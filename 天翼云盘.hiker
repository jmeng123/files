{"last_chapter_rule":"","pageList":[{"col_type":"movie_3","name":"code","path":"code","rule":"$.exports.getFiles = function(id) {\n    let u = \"https://cloud.189.cn/api/open/file/listFiles.action\"\n    let res = request(buildUrl(u, {\n        \"pageSize\": 1000,\n        \"pageNum\": 1,\n        \"mediaType\": 0,\n        \"folderId\": id,\n        \"iconOption\": 5,\n        \"orderBy\": \"lastOpTime\",\n        \"descending\": \"true\",\n    }), {\n        headers: {\n            \"Cookie\": request(\"hiker://files/rules/Joe/189.txt\"),\n            \"Accept\": \"application/json;charset=UTF-8\",\n            \"User-Agent\": PC_UA\n        }\n    })\n    var json = res.replace(/\\\"id\\\":(\\d+)/g, '\"id\":\"$1\"') //解决js的精度问题\n    return JSON.parse(json)\n}\n$.exports.getIcon = function(fileName) {\n    let {\n        getHzm\n    } = $.require(\"hiker://page/code\")\n    let root = \"https://gitcode.net/qq_32394351/dr/-/raw/master/img/文件类型2/\";\n    let files = 'ai|apk|avi|css|dmg|exe|flv|gif|hiker|html|iso|jpg|js|json|log|mov|ogg|aac|vorbis|mp3|mp4|flac|ape|dsd|otf|php|png|ppt|psd|table|txt|wav|xls|zip|css|doc|epub|exc|htm|xlsx'.split('|');\n    let hzm = getHzm(fileName)\n    if (files.includes(hzm)) {\n        img = root + hzm + '.svg';\n    } else {\n        img = root + \"文件.svg\"\n    }\n    return img\n}\n$.exports.getHzm = function(fileName) {\n    return fileName.substr(fileName.lastIndexOf(\".\") + 1)\n}"},{"col_type":"movie_3","name":"登陆","path":"login","rule":"js:\nvar d = [];\nd.push({\n    url: \"https://cloud.189.cn/api/portal/loginUrl.action?redirectURL=https://cloud.189.cn/web/redirect.html&defaultSaveName=3&defaultSaveNameCheck=uncheck\",\n    col_type: \"x5_webview_single\",\n    desc: \"100%&&float\",\n    extra: {\n        js: $.toString(() => {\n            var url = location.href\n            if (url.includes(\"https://cloud.189.cn/web/main\")) {\n                fba.writeFile(\"hiker://files/rules/Joe/189.txt\", fba.getCookie(\"\"))\n                alert(\"已获取到cookie，返回即可\")\n                fba.back()\n            }\n        }),\n        ua: PC_UA,\n        canBack: true\n    }\n})\nsetResult(d);"}],"title":"天翼云盘","author":"Joe","version":0,"type":"video","url":"hiker://empty","col_type":"movie_3","class_name":"","class_url":"","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:\nvar d = [];\ntry {\n    if (fileExist(\"hiker://files/rules/Joe/189.txt\")) {\n        const {\n            getFiles,\n            getIcon\n        } = $.require(\"hiker://page/code\")\n        var paths = storage0.getMyVar(\"paths\", [{\n            \"id\": -11,\n            \"name\": \"家\"\n        }])\n        paths.forEach((item, i) => {\n            d.push({\n                title: item.name,\n                col_type: \"scroll_button\",\n                url: $().lazyRule((paths, i) => {\n                    storage0.putMyVar(\"paths\", paths.slice(0, i + 1))\n                    refreshPage()\n                    return \"hiker://empty\"\n                }, paths, i)\n            })\n        })\n        let list = getFiles(paths[paths.length - 1].id)\n        list.fileListAO.folderList.forEach(item => {\n            d.push({\n                title: item.name,\n                col_type: \"avatar\",\n                img: \"https://gitcode.net/qq_32394351/dr/-/raw/master/img/文件类型2/文件夹.svg\",\n                url: $().lazyRule((paths, id, name) => {\n                    paths.push({\n                        id: id,\n                        name: name\n                    })\n                    storage0.putMyVar(\"paths\", paths)\n                    refreshPage()\n                    return \"hiker://empty\"\n                }, paths, item.id, item.name)\n            })\n        })\n        list.fileListAO.fileList.forEach(item => {\n            var img = getIcon(item.name)\n            d.push({\n                title: item.name,\n                col_type: \"avatar\",\n                img: img,\n                url: $().lazyRule((id, name) => {\n                    const {\n                        getHzm\n                    } = $.require(\"hiker://page/code\")\n                    let cookie = request(\"hiker://files/rules/Joe/189.txt\")\n                    let u = \"https://cloud.189.cn/api/portal/getFileInfo.action\"\n                    let res = JSON.parse(request(buildUrl(u, {\n                        \"fileId\": id\n                    }), {\n                        headers: {\n                            \"Cookie\": cookie,\n                            \"Accept\": \"application/json;charset=UTF-8\",\n                            \"User-Agent\": PC_UA\n                        }\n                    }))\n                    if ($.movie.includes(getHzm(name))) {\n                        return JSON.stringify({\n                            urls: [\"https:\" + res.downloadUrl + \"#isVideo=true#\"],\n                            headers: {\n                                \"Cookie\": cookie.replace(/;/g, \"；；\"),\n                                \"User-Agent\": PC_UA.replace(/;/g, \"；；\")\n                            }\n                        })\n                    } else if ($.audio.includes(getHzm(name))) {\n                        return JSON.stringify({\n                            urls: [\"https:\" + res.downloadUrl + \"#isMusic=true#\"],\n                            headers: {\n                                \"Cookie\": cookie.replace(/;/g, \"；；\"),\n                                \"User-Agent\": PC_UA.replace(/;/g, \"；；\")\n                            }\n                        })\n                    } else if ($.img.includes(getHzm(name))) {\n                        return \"https:\" + res.downloadUrl + `#.jpg@User-Agent=${PC_UA}@Cookie=${cookie}`\n                    } else {\n                        return \"download://https:\" + res.downloadUrl + `@User-Agent=${PC_UA}@Cookie=${cookie}`\n                    }\n                }, item.id, item.name)\n            })\n        })\n    } else {\n        d.unshift({\n            title: \"登陆\",\n            url: \"hiker://page/login\",\n            col_type: \"text_center_1\"\n        })\n    }\n} catch (e) {\n    d.unshift({\n        title: \"登陆\",\n        url: \"hiker://page/login\",\n        col_type: \"text_center_1\"\n    })\n    log(e.message)\n    toast(\"程序可能出错了，请查看日志\")\n}\nsetResult(d);","searchFind":"","search_url":"","group":"④网盘","detail_col_type":"movie_1","detail_find_rule":"","sdetail_col_type":"movie_1","sdetail_find_rule":"","ua":"mobile","preRule":"$.extend({\n    audio: [\"mp3\", \"flac\", \"ogg\", \"m4a\", \"wav\", \"opus\"],\n    movie: [\"mp4\", \"mkv\", \"avi\", \"mov\", \"rmvb\", \"webm\", \"flv\", \"m4v\", \"m3u8\", \"ts\"],\n    img: [\"jpg\", \"png\", \"jpeg\", \"gif\", \"svg\", \"raw\"]\n})","pages":"[{\"col_type\":\"movie_3\",\"name\":\"code\",\"path\":\"code\",\"rule\":\"$.exports.getFiles = function(id) {\\n    let u = \\\"https://cloud.189.cn/api/open/file/listFiles.action\\\"\\n    let res = request(buildUrl(u, {\\n        \\\"pageSize\\\": 1000,\\n        \\\"pageNum\\\": 1,\\n        \\\"mediaType\\\": 0,\\n        \\\"folderId\\\": id,\\n        \\\"iconOption\\\": 5,\\n        \\\"orderBy\\\": \\\"lastOpTime\\\",\\n        \\\"descending\\\": \\\"true\\\",\\n    }), {\\n        headers: {\\n            \\\"Cookie\\\": request(\\\"hiker://files/rules/Joe/189.txt\\\"),\\n            \\\"Accept\\\": \\\"application/json;charset=UTF-8\\\",\\n            \\\"User-Agent\\\": PC_UA\\n        }\\n    })\\n    var json = res.replace(/\\\\\\\"id\\\\\\\":(\\\\d+)/g, '\\\"id\\\":\\\"$1\\\"') //解决js的精度问题\\n    return JSON.parse(json)\\n}\\n$.exports.getIcon = function(fileName) {\\n    let {\\n        getHzm\\n    } = $.require(\\\"hiker://page/code\\\")\\n    let root = \\\"https://gitcode.net/qq_32394351/dr/-/raw/master/img/文件类型2/\\\";\\n    let files = 'ai|apk|avi|css|dmg|exe|flv|gif|hiker|html|iso|jpg|js|json|log|mov|ogg|aac|vorbis|mp3|mp4|flac|ape|dsd|otf|php|png|ppt|psd|table|txt|wav|xls|zip|css|doc|epub|exc|htm|xlsx'.split('|');\\n    let hzm = getHzm(fileName)\\n    if (files.includes(hzm)) {\\n        img = root + hzm + '.svg';\\n    } else {\\n        img = root + \\\"文件.svg\\\"\\n    }\\n    return img\\n}\\n$.exports.getHzm = function(fileName) {\\n    return fileName.substr(fileName.lastIndexOf(\\\".\\\") + 1)\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"登陆\",\"path\":\"login\",\"rule\":\"js:\\nvar d = [];\\nd.push({\\n    url: \\\"https://cloud.189.cn/api/portal/loginUrl.action?redirectURL=https://cloud.189.cn/web/redirect.html&defaultSaveName=3&defaultSaveNameCheck=uncheck\\\",\\n    col_type: \\\"x5_webview_single\\\",\\n    desc: \\\"100%&&float\\\",\\n    extra: {\\n        js: $.toString(() => {\\n            var url = location.href\\n            if (url.includes(\\\"https://cloud.189.cn/web/main\\\")) {\\n                fba.writeFile(\\\"hiker://files/rules/Joe/189.txt\\\", fba.getCookie(\\\"\\\"))\\n                alert(\\\"已获取到cookie，返回即可\\\")\\n                fba.back()\\n            }\\n        }),\\n        ua: PC_UA,\\n        canBack: true\\n    }\\n})\\nsetResult(d);\"}]","proxy":"","icon":"https://android-artworks.25pp.com/fs08/2020/07/28/8/110_2f359e5a49e69d8aea074212198b9383_con.png"}