{"last_chapter_rule":"","pageList":[{"col_type":"movie_3","name":"主页","path":"homeIndex","rule":"js:\n    const {genRule}=$.require(\"hiker://page/genApi?rule=道长仓库Pro\");\nconst {color, small} = $.require(\"hiker://page/utiliy?rule=道长仓库Pro\");\naddListener('onClose', $.toString(()=>{\n    clearVar(\"house.qhj\");\n}));\nlet d=[];\nd.push(\n    {\n        title:\"轻合集生成小程序1.1.0\",\n        col_type:\"text_1\",\n        url:$(\"按照对应格式输入就行了,要来个示例吗？\\n支持本地文件与在线文件\").confirm(()=>{\n            putVar(\"house.qhj\",\"轻合集.逐风者@http://hiker.nokia.press/hikerule/dev/json_list?name=510381049\");\n            refreshPage(true);\n        })\n    });\nlet sel_title = ['共享','自用'].map((it) => {\n    let qhj_mode = getItem('house.qhj_mode','共享');\n    if(it===qhj_mode){\n        return '👉'+it;\n    }else{\n        return it;\n    }\n});\nd.push(\n    {\n        title:\"当前模式:\"+color(getItem('house.qhj_mode','共享'),'#ff7000'),\n        col_type:\"text_1\",\n        url:$(sel_title,2).select(() => {\n            setItem('house.qhj_mode',input.replace('👉',''));\n            refreshPage(true);\n            return 'toast://已设置生成模式为:'+input\n        })\n});\n\nd.push({\n    title: '生成',\n    desc: \"轻合集.dz@http://hiker.nokia.press/hikerule/dev/json_list?name=510381049\",\n    extra: {\n        onChange: \"putVar('house.qhj',input)\",\n        titleVisible: true,\n        defaultValue:getVar('house.qhj')\n    },\n    url:$.toString((genRule) => {\n        // 定义字符串替换全部函数\n        if(getVar('house.qhj')&&getVar('house.qhj').includes('@')) {\n            let new_name = getVar('house.qhj').split('@')[0];\n            let new_url = getVar('house.qhj').split('@')[1];\n            if(!new_url.startsWith('http')){\n                if(new_url.startsWith('/storage/')||new_url.startsWith('/sdcard/')){\n                    new_url = 'file://'+new_url;\n                }else if(new_url.startsWith('hiker://')){\n\n                }else {\n                    return 'toast://文件地址有误'\n                }\n            }\n            if(getItem('house.qhj_mode','共享')==='共享'){\n                if(!new_url.startsWith('http')){\n                    let text = fetch(new_url);\n                    if(text&&text.length>2){//本地有内容且两个字符以上\n                        try {\n                            JSON.parse(text);\n                            const {taskCall, taskRun,taskReq} = $.require(\"hiker://page/taskCall?rule=道长仓库Pro\");\n                            log('开始执行任务仓库获取文件外链');\n                            let result = taskCall(15,'uploadText',[new_name+'.json',text]);\n                            let short_url = new_url;\n                            log('返回状态码:'+result.status);\n                            if (result.status == 0) {\n                                short_url = result.result[0];\n                                log(short_url);\n                            }\n                            let import_rule=genRule(new_name,short_url);\n                            copy(import_rule);\n                            putVar(\"import_rule\",import_rule);\n                            refreshPage(true);\n                            return 'toast://成功生成轻合集:' + new_name+'并复制到剪切板';\n                        }catch (e) {\n\n                        }\n                    }\n                }\n            }\n            let import_rule=genRule(new_name,new_url);\n            copy(import_rule);\n            putVar(\"import_rule\",import_rule);\n            refreshPage(true);\n            return 'toast://成功生成轻合集:' + new_name+'并复制到剪切板';\n        }else{\n            return 'toast://你个憨批，本道不陪你玩了';\n        }\n    },genRule),\n    col_type: \"input\"\n});\nd.push({\n    title:\"复制剪切板口令\",\n    desc:\"生成后会自动复制,这里留个复制历史记录\",\n    col_type:\"text_1\",\n    url:$().lazyRule(()=>{\n        copy(getVar(\"import_rule\"));\n        return \"hiker://empty\"\n    })\n});\nd.push({\n    title: '““””<span style=\"color: #ff7000\">导入轻合集</span>',\n    url: $().lazyRule((import_rule)=>{\n        if(!import_rule){\n            return 'toast://没有历史口令，无法导入';\n        }\n        let ruleCode=parsePaste(import_rule.split(\"\\n\")[0]);\n        importUrl = 'rule://' + base64Encode(ruleCode);\n        return importUrl\n    },getVar(\"import_rule\")),\n    col_type: 'text_1'\n});\nd.push({\n    title:getVar(\"import_rule\"),\n    col_type:\"long_text\"\n});\n\nsetResult(d)"}],"title":"轻合集生成器","author":"道长","version":10,"type":"other","url":"hiker://empty","col_type":"movie_3","class_name":"","class_url":"","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:\neval(JSON.parse(fetch('hiker://page/homeIndex')).rule);","searchFind":"","search_url":"","titleColor":"#ff13b66a","group":"⑧工具","detail_col_type":"movie_1","detail_find_rule":"","sdetail_col_type":"movie_1","sdetail_find_rule":"","ua":"mobile","preRule":"","pages":"[{\"col_type\":\"movie_3\",\"name\":\"主页\",\"path\":\"homeIndex\",\"rule\":\"js:\\n    const {genRule}=$.require(\\\"hiker://page/genApi?rule=道长仓库Pro\\\");\\nconst {color, small} = $.require(\\\"hiker://page/utiliy?rule=道长仓库Pro\\\");\\naddListener('onClose', $.toString(()=>{\\n    clearVar(\\\"house.qhj\\\");\\n}));\\nlet d=[];\\nd.push(\\n    {\\n        title:\\\"轻合集生成小程序1.1.0\\\",\\n        col_type:\\\"text_1\\\",\\n        url:$(\\\"按照对应格式输入就行了,要来个示例吗？\\\\n支持本地文件与在线文件\\\").confirm(()=>{\\n            putVar(\\\"house.qhj\\\",\\\"轻合集.逐风者@http://hiker.nokia.press/hikerule/dev/json_list?name=510381049\\\");\\n            refreshPage(true);\\n        })\\n    });\\nlet sel_title = ['共享','自用'].map((it) => {\\n    let qhj_mode = getItem('house.qhj_mode','共享');\\n    if(it===qhj_mode){\\n        return '👉'+it;\\n    }else{\\n        return it;\\n    }\\n});\\nd.push(\\n    {\\n        title:\\\"当前模式:\\\"+color(getItem('house.qhj_mode','共享'),'#ff7000'),\\n        col_type:\\\"text_1\\\",\\n        url:$(sel_title,2).select(() => {\\n            setItem('house.qhj_mode',input.replace('👉',''));\\n            refreshPage(true);\\n            return 'toast://已设置生成模式为:'+input\\n        })\\n});\\n\\nd.push({\\n    title: '生成',\\n    desc: \\\"轻合集.dz@http://hiker.nokia.press/hikerule/dev/json_list?name=510381049\\\",\\n    extra: {\\n        onChange: \\\"putVar('house.qhj',input)\\\",\\n        titleVisible: true,\\n        defaultValue:getVar('house.qhj')\\n    },\\n    url:$.toString((genRule) => {\\n        // 定义字符串替换全部函数\\n        if(getVar('house.qhj')&&getVar('house.qhj').includes('@')) {\\n            let new_name = getVar('house.qhj').split('@')[0];\\n            let new_url = getVar('house.qhj').split('@')[1];\\n            if(!new_url.startsWith('http')){\\n                if(new_url.startsWith('/storage/')||new_url.startsWith('/sdcard/')){\\n                    new_url = 'file://'+new_url;\\n                }else if(new_url.startsWith('hiker://')){\\n\\n                }else {\\n                    return 'toast://文件地址有误'\\n                }\\n            }\\n            if(getItem('house.qhj_mode','共享')==='共享'){\\n                if(!new_url.startsWith('http')){\\n                    let text = fetch(new_url);\\n                    if(text&&text.length>2){//本地有内容且两个字符以上\\n                        try {\\n                            JSON.parse(text);\\n                            const {taskCall, taskRun,taskReq} = $.require(\\\"hiker://page/taskCall?rule=道长仓库Pro\\\");\\n                            log('开始执行任务仓库获取文件外链');\\n                            let result = taskCall(15,'uploadText',[new_name+'.json',text]);\\n                            let short_url = new_url;\\n                            log('返回状态码:'+result.status);\\n                            if (result.status == 0) {\\n                                short_url = result.result[0];\\n                                log(short_url);\\n                            }\\n                            let import_rule=genRule(new_name,short_url);\\n                            copy(import_rule);\\n                            putVar(\\\"import_rule\\\",import_rule);\\n                            refreshPage(true);\\n                            return 'toast://成功生成轻合集:' + new_name+'并复制到剪切板';\\n                        }catch (e) {\\n\\n                        }\\n                    }\\n                }\\n            }\\n            let import_rule=genRule(new_name,new_url);\\n            copy(import_rule);\\n            putVar(\\\"import_rule\\\",import_rule);\\n            refreshPage(true);\\n            return 'toast://成功生成轻合集:' + new_name+'并复制到剪切板';\\n        }else{\\n            return 'toast://你个憨批，本道不陪你玩了';\\n        }\\n    },genRule),\\n    col_type: \\\"input\\\"\\n});\\nd.push({\\n    title:\\\"复制剪切板口令\\\",\\n    desc:\\\"生成后会自动复制,这里留个复制历史记录\\\",\\n    col_type:\\\"text_1\\\",\\n    url:$().lazyRule(()=>{\\n        copy(getVar(\\\"import_rule\\\"));\\n        return \\\"hiker://empty\\\"\\n    })\\n});\\nd.push({\\n    title: '““””<span style=\\\"color: #ff7000\\\">导入轻合集</span>',\\n    url: $().lazyRule((import_rule)=>{\\n        if(!import_rule){\\n            return 'toast://没有历史口令，无法导入';\\n        }\\n        let ruleCode=parsePaste(import_rule.split(\\\"\\\\n\\\")[0]);\\n        importUrl = 'rule://' + base64Encode(ruleCode);\\n        return importUrl\\n    },getVar(\\\"import_rule\\\")),\\n    col_type: 'text_1'\\n});\\nd.push({\\n    title:getVar(\\\"import_rule\\\"),\\n    col_type:\\\"long_text\\\"\\n});\\n\\nsetResult(d)\"}]","proxy":"","icon":"https://lanmeiguojiang.com/tubiao/more/23.png"}