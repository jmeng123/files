{"last_chapter_rule":"","pageList":[{"col_type":"movie_3","name":"ysfx","path":"ysfx","rule":"js:\nvar d = [];\nlet rule = getParam(\"r\").split(\"##\")[0];\nlet url = MY_URL.split(\"##\")[1];\nlet ad = \"拦截\".split(\",\");\nlet ite = $.require(\"hiker://page/u\")(rule, getHome(url));\nlet js = $.toString(() => {\n    try {\n        if (document.title && document.title.length) {\n            let r = $$$().lazyRule((t) => {\n                setPageTitle(t);\n            }, document.title);\n            fy_bridge_app.parseLazyRule(r);\n        }\n    } catch (e) {\n        fy_bridge_app.log(e.toString());\n    }\n});\nd.push({\n    title: \"\",\n    url: url,\n    col_type: \"x5_webview_single\",\n    desc: \"100%&&float\",\n    pic_url: \"\",\n    extra: {\n        urlInterceptor: ite,\n        js: js,\n        canBack: true,\n        jsLoadingInject: true,\n        floatVideo: 嗅探,\n        blockRules: ad\n    }\n});\nsetResult(d);"},{"col_type":"movie_3","name":"u","path":"u","rule":"$.exports = function(rule, origin) {\n    return $.toString((rule, origin) => {\n        let host = origin.replace(new RegExp(\"http://|https://\"), \"\").split(\"/\")[0];\n        let hosts = host.split(\".\");\n        if (hosts.length > 2) {\n            host = hosts[hosts.length - 2] + \".\" + hosts[hosts.length - 1];\n        }\n        if (input.startsWith(\"magnet\")) {\n            confirm({\n                title: \"温馨提示\",\n                content: \"检测到新的磁链地址，点击确定按钮即可播放，点击取消按钮可以复制链接\",\n                confirm: $.toString((mag) => {\n                    return mag;\n                }, input),\n                cancel: $.toString((mag) => {\n                    return \"copy://\" + mag\n                }, input)\n            })\n            return true;\n        } else if (!input.startsWith(\"http\")) {\n            log(input);\n            //能唤起APP的白名单\n            let white = [\n                \"qklink\",\n                \"bdnetdisk\",\n                \"xunleiapp\",\n                \"smartdrive\"\n            ];\n            let inWhite = white.filter(it => input.startsWith(it)).length > 0;\n            if (!inWhite) {\n                return false;\n            }\n            return $.toString((url, rule) => {\n                fy_bridge_app.openThirdApp && fy_bridge_app.openThirdApp(url);\n            }, input, rule)\n        } else if (input.includes(\"aliyundrive.com/\") || input.includes(\"aliyundrive.net/\") || input.includes(\"alipan.com/\")) {\n            if (fetch(\"hiker://home@\\u4e91\\u76d8\\u541b.\\u7b80\").length < 15) {\n                return false;\n            }\n            return $.toString((url, rule) => {\n                fy_bridge_app.open(JSON.stringify({\n                    title: \"阿里云盘\",\n                    url: \"hiker://page/aliyun?page=fypage&realurl=\" + encodeURIComponent(url) + \"&rule=\\u4e91\\u76d8\\u541b.\\u7b80\",\n                }))\n            }, input, rule);\n        } else if (input.includes(\"quark.cn\") && fetch(\"hiker://home@Quark.简\").length > 15) {\n            return $.toString((url, rule) => {\n                fy_bridge_app.open(JSON.stringify({\n                    title: \"夸克网盘\",\n                    url: \"hiker://page/quarkList?realurl=\" + encodeURIComponent(url) + \"&rule=Quark.简&sharePwd=\",\n                }))\n            }, input, rule);\n        } else {\n            let white = [\n                \"url=\",\n                \"fsou.com\",\n                \"bing.\",\n            ];\n            let inWhite = white.filter(it => input.includes(it)).length > 0;\n            if (inWhite) {\n                return false;\n            }\n            let reg = new RegExp(\"[\\u4e00-\\u9fa5]+\", \"g\");\n            let r = decodeURIComponent(input);\n            if (reg.test(r) || (input.startsWith(origin) && input.length - origin.length > 2) || !input.includes(host + \"/\")) {\n                //有中文，应该是在搜索，跳新页面\n                return $.toString((url, rule) => {\n                    fy_bridge_app.open(JSON.stringify({\n                        title: \"详情\",\n                        url: \"hiker://page/ysfx?rule=\" + rule + \"&r=\" + rule + \"##\" + url,\n                    }));\n                }, input, rule);\n            }\n        }\n    }, rule, origin);\n}"},{"col_type":"movie_3","name":"首页","path":"home","rule":"var d = [];\nlet url = 网站;\nlet ad = \"拦截\".split(\",\");\nlet ite = $.require(\"hiker://page/u\")(MY_RULE.title, getHome(url));\nd.push({\n    title: \"\",\n    url: url,\n    col_type: \"x5_webview_single\",\n    desc: \"100%&&float\",\n    pic_url: \"\",\n    extra: {\n        urlInterceptor: ite,\n        canBack: true,\n        floatVideo: 嗅探,\n        jsLoadingInject: true,\n        blockRules: ad\n    }\n});\nsetResult(d);"}],"title":"网页转小程序","author":"小棉袄🌞","version":12,"type":"tool","url":"hiker://empty##","col_type":"movie_3","class_name":"","class_url":"","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:\nvar d = [];\n\nd.push({\n    title: \"\",\n    url: \"\",\n    col_type: \"input\",\n    desc: \"请输入要生成的小程序名\",\n    pic_url: \"\",\n    extra: {\n        titleVisible: false,\n        onChange: $.toString(() => {\n            putMyVar(\"r1\", input);\n        }),\n        defaultValue: getMyVar(\"r1\", \"\")\n    }\n});\nd.push({\n    title: \"\",\n    url: \"\",\n    col_type: \"input\",\n    desc: \"请输入网站地址，如https://cn.bing.com/\",\n    pic_url: \"\",\n    extra: {\n        type: \"textarea\",\n        height: 2,\n        highlight: true,\n        titleVisible: false,\n        onChange: $.toString(() => {\n            putMyVar(\"rule\", input);\n        }),\n        defaultValue: getMyVar(\"rule\", \"\")\n    }\n});\nd.push({\n    title: \"广告拦截规则，英文逗号分隔\",\n    url: \"hiker://empty\",\n    col_type: \"text_1\",\n    desc: \"\",\n    pic_url: \"\",\n    extra: {\n        lineVisible: false\n    }\n});\n\nd.push({\n    title: \"\",\n    url: \"\",\n    col_type: \"input\",\n    desc: \"请输入广告拦截规则，英文逗号分隔\",\n    pic_url: \"\",\n    extra: {\n        type: \"textarea\",\n        height: 2,\n        highlight: true,\n        titleVisible: false,\n        onChange: $.toString(() => {\n            putMyVar(\"ad\", input);\n        }),\n        defaultValue: getMyVar(\"ad\", \"/ad/, /ads/, google\")\n    }\n});\nlet floatVideo = getMyVar(\"f\", \"false\") == \"true\";\nd.push({\n    title: \"悬浮嗅探：\" + (floatVideo ? \"开\" : \"关\"),\n    url: $(\"#noLoading#\").lazyRule((f) => {\n        putMyVar(\"f\", !f + \"\");\n        refreshPage();\n        return \"hiker://empty\";\n    }, floatVideo),\n    col_type: \"text_1\",\n});\n\nd.push({\n    title: \"生成小程序\",\n    url: $(\"#noLoading#\").lazyRule((rule1) => {\n        let url = getMyVar(\"rule\", \"\");\n        let r1 = getMyVar(\"r1\", \"\");\n        if (url == \"\" || r1 == \"\") {\n            return \"toast://请先在上面输入网站地址和名称\";\n        }\n        if (url.includes(\"@\")) {\n            return \"toast://网站地址格式不对\";\n        }\n        /*let arr = storage0.getItem(\"list\", []);\n        arr = arr.filter(it => it.url != url);\n        arr.push({\n            name: r1,\n            url: url\n        });\n        storage0.setItem(\"list\", arr);\n        refreshPage();*/\n        rule = JSON.parse(fetch(\"hiker://home@\" + rule1));\n        rule.find_rule = \"js:\\nvar 网站 = '{RULE}';\\neval(JSON.parse(fetch('hiker://page/home')).rule)\";\n        rule.url = \"hiker://empty\";\n        let floatVideo = getMyVar(\"f\", \"false\") == \"true\";\n        let ad = getMyVar(\"ad\", \"/ad/, /ads/, google\");\n        ad = ad.split(\",\").map(it => it.trim()).join(\",\");\n        return \"海阔视界￥home_rule￥\" + JSON.stringify(rule)\n            .replace(/\\{RULE\\}/g, url)\n            .replace(rule1, r1)\n            .replace(/嗅探/g, floatVideo + \"\")\n            .replace(/拦截/g, ad);\n    }, MY_RULE.title),\n    col_type: \"text_2\",\n    desc: \"\",\n    pic_url: \"\"\n});\n\nd.push({\n    title: \"来个示例\",\n    url: $(\"#noLoading#\").lazyRule(() => {\n        putMyVar(\"rule\", \"https://cn.bing.com/\");\n        putMyVar(\"r1\", \"必应\");\n        refreshPage();\n        return \"hiker://empty\"\n    }),\n    col_type: \"text_2\",\n    desc: \"\",\n    pic_url: \"\"\n});\nsetResult(d);","searchFind":"","search_url":"","group":"⑧工具","detail_col_type":"movie_1","detail_find_rule":"","sdetail_col_type":"movie_1","sdetail_find_rule":"","ua":"mobile","preRule":"","pages":"[{\"col_type\":\"movie_3\",\"name\":\"ysfx\",\"path\":\"ysfx\",\"rule\":\"js:\\nvar d = [];\\nlet rule = getParam(\\\"r\\\").split(\\\"##\\\")[0];\\nlet url = MY_URL.split(\\\"##\\\")[1];\\nlet ad = \\\"拦截\\\".split(\\\",\\\");\\nlet ite = $.require(\\\"hiker://page/u\\\")(rule, getHome(url));\\nlet js = $.toString(() => {\\n    try {\\n        if (document.title && document.title.length) {\\n            let r = $$$().lazyRule((t) => {\\n                setPageTitle(t);\\n            }, document.title);\\n            fy_bridge_app.parseLazyRule(r);\\n        }\\n    } catch (e) {\\n        fy_bridge_app.log(e.toString());\\n    }\\n});\\nd.push({\\n    title: \\\"\\\",\\n    url: url,\\n    col_type: \\\"x5_webview_single\\\",\\n    desc: \\\"100%&&float\\\",\\n    pic_url: \\\"\\\",\\n    extra: {\\n        urlInterceptor: ite,\\n        js: js,\\n        canBack: true,\\n        jsLoadingInject: true,\\n        floatVideo: 嗅探,\\n        blockRules: ad\\n    }\\n});\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"u\",\"path\":\"u\",\"rule\":\"$.exports = function(rule, origin) {\\n    return $.toString((rule, origin) => {\\n        let host = origin.replace(new RegExp(\\\"http://|https://\\\"), \\\"\\\").split(\\\"/\\\")[0];\\n        let hosts = host.split(\\\".\\\");\\n        if (hosts.length > 2) {\\n            host = hosts[hosts.length - 2] + \\\".\\\" + hosts[hosts.length - 1];\\n        }\\n        if (input.startsWith(\\\"magnet\\\")) {\\n            confirm({\\n                title: \\\"温馨提示\\\",\\n                content: \\\"检测到新的磁链地址，点击确定按钮即可播放，点击取消按钮可以复制链接\\\",\\n                confirm: $.toString((mag) => {\\n                    return mag;\\n                }, input),\\n                cancel: $.toString((mag) => {\\n                    return \\\"copy://\\\" + mag\\n                }, input)\\n            })\\n            return true;\\n        } else if (!input.startsWith(\\\"http\\\")) {\\n            log(input);\\n            //能唤起APP的白名单\\n            let white = [\\n                \\\"qklink\\\",\\n                \\\"bdnetdisk\\\",\\n                \\\"xunleiapp\\\",\\n                \\\"smartdrive\\\"\\n            ];\\n            let inWhite = white.filter(it => input.startsWith(it)).length > 0;\\n            if (!inWhite) {\\n                return false;\\n            }\\n            return $.toString((url, rule) => {\\n                fy_bridge_app.openThirdApp && fy_bridge_app.openThirdApp(url);\\n            }, input, rule)\\n        } else if (input.includes(\\\"aliyundrive.com/\\\") || input.includes(\\\"aliyundrive.net/\\\") || input.includes(\\\"alipan.com/\\\")) {\\n            if (fetch(\\\"hiker://home@\\\\u4e91\\\\u76d8\\\\u541b.\\\\u7b80\\\").length < 15) {\\n                return false;\\n            }\\n            return $.toString((url, rule) => {\\n                fy_bridge_app.open(JSON.stringify({\\n                    title: \\\"阿里云盘\\\",\\n                    url: \\\"hiker://page/aliyun?page=fypage&realurl=\\\" + encodeURIComponent(url) + \\\"&rule=\\\\u4e91\\\\u76d8\\\\u541b.\\\\u7b80\\\",\\n                }))\\n            }, input, rule);\\n        } else if (input.includes(\\\"quark.cn\\\") && fetch(\\\"hiker://home@Quark.简\\\").length > 15) {\\n            return $.toString((url, rule) => {\\n                fy_bridge_app.open(JSON.stringify({\\n                    title: \\\"夸克网盘\\\",\\n                    url: \\\"hiker://page/quarkList?realurl=\\\" + encodeURIComponent(url) + \\\"&rule=Quark.简&sharePwd=\\\",\\n                }))\\n            }, input, rule);\\n        } else {\\n            let white = [\\n                \\\"url=\\\",\\n                \\\"fsou.com\\\",\\n                \\\"bing.\\\",\\n            ];\\n            let inWhite = white.filter(it => input.includes(it)).length > 0;\\n            if (inWhite) {\\n                return false;\\n            }\\n            let reg = new RegExp(\\\"[\\\\u4e00-\\\\u9fa5]+\\\", \\\"g\\\");\\n            let r = decodeURIComponent(input);\\n            if (reg.test(r) || (input.startsWith(origin) && input.length - origin.length > 2) || !input.includes(host + \\\"/\\\")) {\\n                //有中文，应该是在搜索，跳新页面\\n                return $.toString((url, rule) => {\\n                    fy_bridge_app.open(JSON.stringify({\\n                        title: \\\"详情\\\",\\n                        url: \\\"hiker://page/ysfx?rule=\\\" + rule + \\\"&r=\\\" + rule + \\\"##\\\" + url,\\n                    }));\\n                }, input, rule);\\n            }\\n        }\\n    }, rule, origin);\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"首页\",\"path\":\"home\",\"rule\":\"var d = [];\\nlet url = 网站;\\nlet ad = \\\"拦截\\\".split(\\\",\\\");\\nlet ite = $.require(\\\"hiker://page/u\\\")(MY_RULE.title, getHome(url));\\nd.push({\\n    title: \\\"\\\",\\n    url: url,\\n    col_type: \\\"x5_webview_single\\\",\\n    desc: \\\"100%&&float\\\",\\n    pic_url: \\\"\\\",\\n    extra: {\\n        urlInterceptor: ite,\\n        canBack: true,\\n        floatVideo: 嗅探,\\n        jsLoadingInject: true,\\n        blockRules: ad\\n    }\\n});\\nsetResult(d);\"}]","proxy":"","icon":""}