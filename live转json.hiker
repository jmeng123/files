{"last_chapter_rule":"","pageList":[],"title":"liveè½¬json","author":"ğŸ…äº¬æ¢¦","version":1,"type":"tool","url":"hiker://empty","col_type":"movie_3","class_name":"","class_url":"","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:\nlet d = [];\nlet url = getItem('live_url', '');\nlet file = getItem('live_file', 'hiker://files/Jm/live/live.json');\nd.push({\n    title: 'â€˜â€˜â€™â€™<font color=#fd268a>æ³¨æ„ï¼šè½¬æ¢çš„jsonæ•°æ®é€‚ç”¨äºäº¬æ¢¦ä¸»é¡µçš„ç”µè§†ï¼Œè½¬æ¢åè®°å¾—å»ä¸»é¡µ é•¿æŒ‰ç”µè§†æ”¹ä¸‹è·¯å¾„ã€‚</font>',\n    col_type: 'text_1',\n    url: $('hiker://empty#noLoading#').lazyRule(() => {\n        clearItem('live_file');\n        refreshPage(false);\n        return 'hiker://empty'\n    }),\n}, {\n    title: \"\",\n    desc: \"è¯·è¾“å…¥hiker|httpåœ°å€\",\n    url: \"hiker://empty\",\n    col_type: \"input\",\n    extra: {\n        defaultValue: url,\n        onChange: \"setItem('live_url',input)\",\n        titleVisible: false\n    }\n}, {\n    title: \"\",\n    desc: \"ä¿å­˜è·¯å¾„|æ–‡ä»¶åç§°\",\n    url: \"hiker://empty\",\n    col_type: \"input\",\n    extra: {\n        defaultValue: file,\n        onChange: \"setItem('live_file',input)\",\n        titleVisible: false\n    }\n}, {\n    title: 'â€˜â€˜â€™â€™<font color=#1AB16B>txtè½¬json</font>',\n    col_type: 'text_2',\n    url: $('hiker://empty#noLoading#').lazyRule((url, file) => {\n        let data = [];\n        let txt = fetch(url);\n        txt.split('\\n').forEach(function(line) {\n            let nameMatch = line.match(/^(.*?),/);\n            let urlMatch = line.match(/http\\S+/);\n            if (nameMatch && urlMatch) {\n                var name = nameMatch[1].trim();\n                var url = urlMatch[0];\n                var existingData = data.find(function(item) {\n                    return item.name === name;\n                });\n\n                if (existingData) {\n                    if (!existingData.url.includes(url)) {\n                        existingData.url.push(url);\n                    }\n                } else {\n                    data.push({\n                        name: name,\n                        url: [url]\n                    });\n                }\n            }\n        });\n\n        let result = {\n            data: data\n        };\n\n        saveFile(file, JSON.stringify(result));\n\n        refreshPage(false);\n        copy(file);\n        return \"toast://è½¬æ¢æˆåŠŸå¹¶å¤åˆ¶äº†è·¯å¾„åœ°å€\";\n    }, url, file),\n}, {\n    title: 'â€˜â€˜â€™â€™<font color=#1AB16B>m3uè½¬json</font>',\n    col_type: 'text_2',\n    url: $('hiker://empty#noLoading#').lazyRule((url, file) => {\n        let data = [];\n        let txt = fetch(url);\n        var lines = txt.split('\\n');\n        var currentTitle = '';\n\n        for (let i = 0; i < lines.length; i++) {\n            var line = lines[i].trim();\n            if (line.startsWith('#EXTINF:')) {\n                let titleMatch = line.match(/,(.*?)$/);\n                if (titleMatch && titleMatch[1]) {\n                    currentTitle = titleMatch[1];\n                }\n            } else if (line.startsWith('http')) {\n                var url = line;\n                var existingEntry = data.find(entry => entry.name === currentTitle);\n                if (existingEntry) {\n                    if (!existingEntry.url.includes(url)) {\n                        existingEntry.url.push(url);\n                    }\n                } else {\n                    data.push({\n                        name: currentTitle,\n                        url: [url]\n                    });\n                }\n            }\n        }\n        let result = {\n            data: data\n        };\n        writeFile(file, JSON.stringify(result));\n\n        refreshPage(false);\n        copy(file);\n        return \"toast://è½¬æ¢æˆåŠŸå¹¶å¤åˆ¶äº†è·¯å¾„åœ°å€\";\n    }, url, file),\n});\nsetResult(d);","searchFind":"","search_url":"","group":"â‘§å·¥å…·","detail_col_type":"movie_1","detail_find_rule":"","sdetail_col_type":"movie_1","sdetail_find_rule":"","ua":"mobile","preRule":"","pages":"[]","proxy":"","icon":""}