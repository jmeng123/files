{"last_chapter_rule":"","pageList":[{"col_type":"text_2","name":"设置","path":"login","rule":"js:\nvar d = [];\nd.push({\n    title: \"获取token\",\n    url: \"https://openapi.baidu.com/oauth/2.0/authorize?response_type=code&client_id=iYCeC9g08h5vuP9UqvPHKKSVrKFXGa1v&redirect_uri=https://alist.nn.ci/tool/baidu/callback&scope=basic,netdisk&qrcode=1\"\n})\nd.push({\n    title: \"登陆\",\n    url: $(\"\", \"填写获取到的token\").input(() => {\n        let res = JSON.parse(request(buildUrl(\"https://openapi.baidu.com/oauth/2.0/token\", {\n            \"grant_type\": \"refresh_token\",\n            \"refresh_token\": input,\n            \"client_id\": \"iYCeC9g08h5vuP9UqvPHKKSVrKFXGa1v\",\n            \"client_secret\": \"jXiFMOPVPCWlO2M5CwWQzffpNPaGTRBG\"\n        })))\n        if (!res.access_token) {\n            log(res)\n            return \"toast://错误！！！\"\n        } else {\n            setItem(\"access_token\", res.access_token)\n            setItem(\"refresh_token\", res.refresh_token)\n            back()\n        }\n    })\n})\nd.push({\n    title: \"选择接口：\" + (getItem(\"jk\", \"0\") == \"0\" ? \"官方接口：不是vip会限速，稳定\" : \"第三方接口：不限速，不稳定\"),\n    url: $().lazyRule(() => {\n        setItem(\"jk\", getItem(\"jk\", \"0\") == \"0\" ? \"1\" : \"0\")\n        refreshPage()\n        return \"hiker://empty\"\n    }),\n    col_type: \"text_center_1\"\n})\nsetResult(d);"},{"col_type":"movie_3","name":"代码","path":"code","rule":"$.exports.getIcon = function(content) {\n    let {\n        getHzm\n    } = $.require(\"hiker://page/code\")\n    let root = \"https://gitcode.net/qq_32394351/dr/-/raw/master/img/文件类型2/\";\n    if (content.isdir == 1) {\n        img = root + \"文件夹.svg\"\n    } else {\n        let files = 'ai|apk|avi|css|dmg|exe|flv|gif|hiker|html|iso|jpg|js|json|log|mov|mp3|mp4|otf|php|png|ppt|psd|table|txt|wav|xls|zip|css|doc|epub|exc|htm|xlsx'.split('|');\n        let fileName = content.server_filename\n        let hzm = getHzm(fileName)\n        if (files.includes(hzm)) {\n            img = root + hzm + '.svg';\n        } else {\n            img = root + \"文件.svg\"\n        }\n    }\n    return img\n}\n$.exports.getHzm = function(fileName) {\n    return fileName.substr(fileName.lastIndexOf(\".\") + 1)\n}\n$.exports.getLink = function(ext, id, path) {\n    return $().lazyRule((ext, id, path) => {\n        if (getItem(\"jk\", \"0\") == \"1\") {\n            var res = JSON.parse(request(buildUrl(\"https://pan.baidu.com/api/filemetas\", {\n                \"access_token\": getItem(\"access_token\"),\n                \"dlink\": \"1\",\n                \"web\": \"5\",\n                \"origin\": \"dlna\",\n                \"target\": `[\\\"${path}\\\"]`\n            }))).info[0].dlink\n        } else {\n            var res = JSON.parse(request(buildUrl(\"https://pan.baidu.com/rest/2.0/xpan/multimedia\", {\n                \"access_token\": getItem(\"access_token\"),\n                \"method\": \"filemetas\",\n                \"fsids\": `[${id}]`,\n                \"dlink\": \"1\"\n            }), {\n                headers: {\n                    \"User-Agent\": \"pan.baidu.com\"\n                }\n            })).list[0].dlink + \"&access_token=\" + getItem(\"access_token\")\n        }\n        if (ext == \"movie\") {\n            return JSON.stringify({\n                urls: [res + \"#isVideo=true#\"],\n                headers: {\n                    \"User-Agent\": \"pan.baidu.com\"\n                }\n            })\n        } else if (ext == \"audio\") {\n            return JSON.stringify({\n                urls: [res + \"#isMusic=true#\"],\n                headers: {\n                    \"User-Agent\": \"pan.baidu.com\"\n                }\n            })\n        } else if (ext == \"img\") {\n            return res + `#.jpg;{User-Agent@pan.baidu.com}`\n        } else {\n            return \"download://\" + res + `;{User-Agent@pan.baidu.com}`\n        }\n    }, ext, id, path)\n}"}],"title":"百度网盘","author":"","version":0,"type":"video","url":"hiker://empty","col_type":"movie_3","class_name":"","class_url":"","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:\nvar d = [];\n//仅供学习，请于导入24小时内删除\nd.push({\n    title: \"设置\",\n    url: \"hiker://page/login\",\n    col_type: \"text_1\"\n})\nif (getItem(\"access_token\", \"\") != \"\") {\n    try {\n        const {\n            getIcon,\n            getHzm,\n            getLink\n        } = $.require(\"hiker://page/code\")\n        let paths = storage0.getMyVar(\"paths\", [{\n            path: \"/\",\n            name: \"家\"\n        }])\n        paths.forEach((item, i) => {\n            d.push({\n                title: item.name,\n                url: $().lazyRule((paths, i) => {\n                    storage0.putMyVar(\"paths\", paths.slice(0, i + 1))\n                    refreshPage()\n                    return \"hiker://empty\"\n                }, paths, i),\n                col_type: \"scroll_button\"\n            })\n        })\n        let res = JSON.parse(request(buildUrl(\"https://pan.baidu.com/rest/2.0/xpan/file\", {\n            \"access_token\": getItem(\"access_token\"),\n            \"method\": \"list\",\n            \"dir\": paths[paths.length - 1].path,\n            \"web\": \"web\",\n            \"limit\": 0,\n            \"limit\": 200\n        })))\n        res.list.forEach(item => {\n            if (item.isdir == 1) {\n                var url = $().lazyRule((item, paths) => {\n                    paths.push({\n                        path: item.path,\n                        name: item.server_filename\n                    })\n                    storage0.putMyVar(\"paths\", paths)\n                    refreshPage()\n                    return \"hiker://empty\"\n                }, item, paths)\n            } else if ($.movie.includes(getHzm(item.server_filename))) {\n                var url = getLink(\"movie\", item.fs_id, item.path)\n            } else if ($.audio.includes(getHzm(item.server_filename))) {\n                var url = getLink(\"audio\", item.fs_id, item.path)\n            } else if ($.img.includes(getHzm(item.server_filename))) {\n                var url = getLink(\"img\", item.fs_id, item.path)\n            } else {\n                var url = getLink(\"\", item.fs_id, item.path)\n            }\n            d.push({\n                title: item.server_filename,\n                img: getIcon(item),\n                url: url,\n                col_type: \"avatar\"\n            })\n        })\n    } catch (e) {\n        log(e.message)\n        toast(\"出现错误，请查看日志\")        \n    }\n}\nsetResult(d);","searchFind":"","search_url":"","group":"④网盘","detail_col_type":"movie_1","detail_find_rule":"","sdetail_col_type":"movie_1","sdetail_find_rule":"","ua":"mobile","preRule":"$.extend({\n    audio: [\"mp3\", \"flac\", \"ogg\", \"m4a\", \"wav\", \"opus\"],\n    movie: [\"mp4\", \"mkv\", \"avi\", \"mov\", \"rmvb\", \"webm\", \"flv\", \"m4v\", \"m3u8\", \"ts\"],\n    img: [\"jpg\", \"png\", \"jpeg\", \"gif\", \"svg\", \"raw\"]\n})","pages":"[{\"col_type\":\"text_2\",\"name\":\"设置\",\"path\":\"login\",\"rule\":\"js:\\nvar d = [];\\nd.push({\\n    title: \\\"获取token\\\",\\n    url: \\\"https://openapi.baidu.com/oauth/2.0/authorize?response_type=code&client_id=iYCeC9g08h5vuP9UqvPHKKSVrKFXGa1v&redirect_uri=https://alist.nn.ci/tool/baidu/callback&scope=basic,netdisk&qrcode=1\\\"\\n})\\nd.push({\\n    title: \\\"登陆\\\",\\n    url: $(\\\"\\\", \\\"填写获取到的token\\\").input(() => {\\n        let res = JSON.parse(request(buildUrl(\\\"https://openapi.baidu.com/oauth/2.0/token\\\", {\\n            \\\"grant_type\\\": \\\"refresh_token\\\",\\n            \\\"refresh_token\\\": input,\\n            \\\"client_id\\\": \\\"iYCeC9g08h5vuP9UqvPHKKSVrKFXGa1v\\\",\\n            \\\"client_secret\\\": \\\"jXiFMOPVPCWlO2M5CwWQzffpNPaGTRBG\\\"\\n        })))\\n        if (!res.access_token) {\\n            log(res)\\n            return \\\"toast://错误！！！\\\"\\n        } else {\\n            setItem(\\\"access_token\\\", res.access_token)\\n            setItem(\\\"refresh_token\\\", res.refresh_token)\\n            back()\\n        }\\n    })\\n})\\nd.push({\\n    title: \\\"选择接口：\\\" + (getItem(\\\"jk\\\", \\\"0\\\") == \\\"0\\\" ? \\\"官方接口：不是vip会限速，稳定\\\" : \\\"第三方接口：不限速，不稳定\\\"),\\n    url: $().lazyRule(() => {\\n        setItem(\\\"jk\\\", getItem(\\\"jk\\\", \\\"0\\\") == \\\"0\\\" ? \\\"1\\\" : \\\"0\\\")\\n        refreshPage()\\n        return \\\"hiker://empty\\\"\\n    }),\\n    col_type: \\\"text_center_1\\\"\\n})\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"代码\",\"path\":\"code\",\"rule\":\"$.exports.getIcon = function(content) {\\n    let {\\n        getHzm\\n    } = $.require(\\\"hiker://page/code\\\")\\n    let root = \\\"https://gitcode.net/qq_32394351/dr/-/raw/master/img/文件类型2/\\\";\\n    if (content.isdir == 1) {\\n        img = root + \\\"文件夹.svg\\\"\\n    } else {\\n        let files = 'ai|apk|avi|css|dmg|exe|flv|gif|hiker|html|iso|jpg|js|json|log|mov|mp3|mp4|otf|php|png|ppt|psd|table|txt|wav|xls|zip|css|doc|epub|exc|htm|xlsx'.split('|');\\n        let fileName = content.server_filename\\n        let hzm = getHzm(fileName)\\n        if (files.includes(hzm)) {\\n            img = root + hzm + '.svg';\\n        } else {\\n            img = root + \\\"文件.svg\\\"\\n        }\\n    }\\n    return img\\n}\\n$.exports.getHzm = function(fileName) {\\n    return fileName.substr(fileName.lastIndexOf(\\\".\\\") + 1)\\n}\\n$.exports.getLink = function(ext, id, path) {\\n    return $().lazyRule((ext, id, path) => {\\n        if (getItem(\\\"jk\\\", \\\"0\\\") == \\\"1\\\") {\\n            var res = JSON.parse(request(buildUrl(\\\"https://pan.baidu.com/api/filemetas\\\", {\\n                \\\"access_token\\\": getItem(\\\"access_token\\\"),\\n                \\\"dlink\\\": \\\"1\\\",\\n                \\\"web\\\": \\\"5\\\",\\n                \\\"origin\\\": \\\"dlna\\\",\\n                \\\"target\\\": `[\\\\\\\"${path}\\\\\\\"]`\\n            }))).info[0].dlink\\n        } else {\\n            var res = JSON.parse(request(buildUrl(\\\"https://pan.baidu.com/rest/2.0/xpan/multimedia\\\", {\\n                \\\"access_token\\\": getItem(\\\"access_token\\\"),\\n                \\\"method\\\": \\\"filemetas\\\",\\n                \\\"fsids\\\": `[${id}]`,\\n                \\\"dlink\\\": \\\"1\\\"\\n            }), {\\n                headers: {\\n                    \\\"User-Agent\\\": \\\"pan.baidu.com\\\"\\n                }\\n            })).list[0].dlink + \\\"&access_token=\\\" + getItem(\\\"access_token\\\")\\n        }\\n        if (ext == \\\"movie\\\") {\\n            return JSON.stringify({\\n                urls: [res + \\\"#isVideo=true#\\\"],\\n                headers: {\\n                    \\\"User-Agent\\\": \\\"pan.baidu.com\\\"\\n                }\\n            })\\n        } else if (ext == \\\"audio\\\") {\\n            return JSON.stringify({\\n                urls: [res + \\\"#isMusic=true#\\\"],\\n                headers: {\\n                    \\\"User-Agent\\\": \\\"pan.baidu.com\\\"\\n                }\\n            })\\n        } else if (ext == \\\"img\\\") {\\n            return res + `#.jpg;{User-Agent@pan.baidu.com}`\\n        } else {\\n            return \\\"download://\\\" + res + `;{User-Agent@pan.baidu.com}`\\n        }\\n    }, ext, id, path)\\n}\"}]","proxy":"","icon":"https://api.xinac.net/icon/?url=https://pan.baidu.com/"}