[{"firstHeader":"class","last_chapter_rule":"","pageList":[],"title":"我的主页","author":"@LoyDgIk","version":56,"type":"other","url":"hiker://empty##","col_type":"icon_small_4","class_name":"","class_url":"","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:\neval(fetch(\"hiker://assets/home.js\"));\n\nvar _urgent=false;\nsetResult(HikerHome.load(\"main\",_urgent));","searchFind":"","search_url":"","titleColor":"","group":"①推荐","detail_col_type":"movie_1","detail_find_rule":"","sdetail_col_type":"movie_1","sdetail_find_rule":"","ua":"mobile","preRule":"","pages":"[]","proxy":"","icon":"https://hikerfans.com/tubiao/more/47.png"},{"last_chapter_rule":"","pageList":[{"col_type":"movie_3","name":"规则处理","path":"data","rule":"js:\nlet ParseRlue = $.require(\"ParseRlue\");\n\nfunction toRedirectTreating(config) {\n    return $.require(\"redirect\").doubleTreating(config);\n}\n\nfunction toRedirect(aliUrl, sharePwd) {\n    return $.require(\"redirect\").getModeUrl(aliUrl, sharePwd);\n}\n\nfunction getCompleteRule(rule) {\n    if (rule.ruleType === \"JSON\") {\n        let find = rule.find;\n        rule.find = (s, page) => {\n            let url = String(rule.basicUrl).replace(\"**\", encodeURIComponent(s)).replace(\"fypage\", page + \"\");\n            return ParseRlue.parseSearchJson(url, find);\n        }\n    } else if (rule.ruleType === \"HTML\") {\n        let find = rule.find;\n        rule.find = (s, page) => {\n            let url = String(rule.basicUrl).replace(\"**\", encodeURIComponent(s)).replace(\"fypage\", page + \"\");\n            return ParseRlue.parseSearchHtml(url, find);\n        }\n    } else {\n        let find = new Function(\"s\", \"page\", \"user\", \"basicUrl\", rule.find);\n        rule.find = (s, page) => find(s, page, rule.user || {}, rule.basicUrl || \"\");\n        /*if (rule.findAliUrl) {\n            rule.findAliUrl = new Function(\"input\", \"basicUrl\", rule.findAliUrl);\n        }*/\n    }\n    return rule;\n}\n$.exports.carryRule = function(rule, s, page, searchMode) {\n    rule = getCompleteRule(rule);\n    let list = rule.find(s, page);\n    if (!list) return [];\n\n    let descTips = \"““””\" + rule.name.fontcolor(\"#f13b66a\") + \"&nbsp;\";\n    let resList = [];\n\n    for (let it of list) {\n        if (it.skip) {\n            resList.push(it);\n            continue;\n        }\n        if (searchMode && !searchContains(it.title, s, true)) continue;\n        if (rule.findAliUrl) {\n            it.url = $(it.url).lazyRule(toRedirectTreating, {\n                findAliUrl: rule.findAliUrl,\n                basicUrl: rule.basicUrl,\n                name: rule.name,\n                author: rule.author,\n                aliUrl: it.url,\n                ruleType: rule.ruleType\n            });\n        } else {\n            it.url = $(\"#noLoading#\").lazyRule(toRedirect, it.url, it.sharePwd || \"\");\n        }\n        let title = it.title || \"\";\n        resList.push({\n            title: title.includes(\"““””\") ? title : \"““””\" + title.replace(new RegExp(\"<em>|</em>\", \"g\"), \"\").replace(new RegExp(\"(\" + s + \")\", \"gi\"), \"<strong><span style=\\\"color: #1E90FF\\\">$1</span></strong>\"),\n            desc: descTips + (it.desc || \"\"),\n            url: it.url,\n            pic_url: it.pic_url,\n            col_type: it.pic_url ? \"movie_1_vertical_pic\" : \"text_1\",\n            extra: Object.assign({\n                inheritTitle: false,\n                noPic: true\n            }, it.extra)\n        });\n    }\n    return resList;\n}\n$.exports.carrySRule = function(rule, s, page, searchMode) {\n    rule = getCompleteRule(rule);\n    let list = rule.find(s, page);\n    if (!list) return [];\n    let resList = [];\n    for (let it of list) {\n        if (it.skip) {\n            resList.push(it);\n            continue;\n        }\n        if (searchMode && !searchContains(it.title, s, true)) continue;\n        if (rule.findAliUrl) {\n            it.url = $(it.url).lazyRule(toRedirectTreating, {\n                findAliUrl: rule.findAliUrl,\n                basicUrl: rule.basicUrl,\n                name: rule.name,\n                author: rule.author,\n                aliUrl: it.url,\n                ruleType: rule.ruleType\n            });\n        } else {\n            it.url = $(\"#noLoading#\").lazyRule(toRedirect, it.url, it.sharePwd || \"\");\n        }\n        resList.push({\n            title: it.title,\n            desc: it.desc || \"\",\n            url: it.url,\n            pic_url: it.pic_url,\n            extra: Object.assign({\n                inheritTitle: false,\n                noPic: true\n            }, it.extra)\n        });\n    }\n    return resList;\n}\nlet size = 10;\n\nlet rules;\n\nfunction getRules(group) {\n    let rulesTmp;\n    if (!rules) {\n        rules = $.require(\"configs\").getUsefulJson();\n    }\n    if (group) {\n        rulesTmp = rules.filter(v => v.group === group);\n    } else {\n        rulesTmp = rules;\n    }\n    return rulesTmp;\n}\n$.exports.getAllData = function(group) {\n    return getRules(group);\n};\n$.exports.getData = function(page, rule, group) {\n    if (rule) {\n        if (page != null && page > 1) {\n            return getRules().filter(i => i.name == rule && i.page);\n        }\n        return getRules().filter(i => i.name == rule);\n    }\n    let rulesTmp = getRules(group);\n    let start = (page - 1) * size;\n    if (rulesTmp.length < start + 1) {\n        return [];\n    }\n    let len = size;\n    if (rulesTmp.length < page * size) {\n        len = rulesTmp.length - start;\n    }\n    return rulesTmp.slice(start, start + len);\n};\n$.exports.getNames = function(group) {\n    return getRules(group).map(it => [it.name, it.basicUrl]);\n};\n\n$.exports.getGroupNames = function() {\n    return Array.from(new Set(getRules().map(v => v.group))).filter(v => v);\n};\n$.exports.findModulo = function(input) {\n    let oriMods = [2, 3];\n    let mods = oriMods.map(v => input % v);\n    let zeroMods = mods.indexOf(0);\n\n    if (zeroMods > -1) {\n        return oriMods[zeroMods];\n    } else {\n        return oriMods[mods.indexOf(Math.max.apply(null, mods))];\n    }\n};"},{"col_type":"movie_3","name":"搜索页面","path":"sou","rule":"js:\nconst alitest = $.require(\"alitest\");\n\nfunction setClip() {\n    function getCopy() {\n        try {\n            const Context = android.content.Context;\n            const context = getCurrentActivity();\n            // 获取系统剪贴板\n            let clipboard = context.getSystemService(Context.CLIPBOARD_SERVICE);\n            // 返回数据\n            let clipData = clipboard.getPrimaryClip();\n            if (clipData != null && clipData.getItemCount() > 0) {\n                // 从数据集中获取（粘贴）第一条文本数据\n                let text = clipData.getItemAt(0).getText();\n                if (text != null) {\n                    return String(text.toString());\n                }\n            }\n            return null;\n        } catch (e) {\n            return null;\n        }\n    }\n    let text = getCopy() || \"\";\n    let url = alitest.matchAliUrl(text);\n    if (url) {\n        let cache = getItem(\"clipboardCache\", \"\");\n        if (url !== cache) {\n            d.push({\n                title: '““””<font color=\"#13B61B\">▐ </font><b>温馨提示<b>',\n                desc: \"检测到剪贴板含有阿里链接是否打开?\\n\" + url,\n                url: $(\"#noLoading#\").lazyRule((input, id) => {\n                    deleteItem(id + \"clipboard\");\n                    return \"hiker://page/aliyun?page=fypage&realurl=\" + encodeURIComponent(input) + \"&sharePwd=\";\n                }, url, id),\n                col_type: \"text_1\",\n                extra: {\n                    id: id + \"clipboard\",\n                    pageTitle: \"打开链接\"\n                }\n            });\n            setItem(\"clipboardCache\", url);\n        }\n    }\n}\n\nfunction setPrepose() {\n    if (openMode == \"本地解析\") {\n        let aliTokensFilepath = $.require(\"hiker://page/tokenPath\").aliTokensFilepath;\n        let a = fetch(aliTokensFilepath);\n        if (!a || a == \"\") {\n            d.push({\n                title: '<font color=\"#13B61B\">▐ </font><b>温馨提示<b>',\n                col_type: \"rich_text\",\n            });\n            d.push({\n                url: $(\"#noLoading#\").lazyRule(() => $.require(\"loginMode\")),\n                col_type: \"text_1\",\n                title: \"未检测到登录信息，点我跳转登录账号页面，登录阿里云盘账号后方可使用本地解析模式\",\n                extra: {\n                    pageTitle: \"登录阿里云盘\"\n                }\n            });\n        }\n    }\n    addListener(\"onClose\", $.toString(() => {\n        clearMyVar(\"s\");\n    }));\n    addListener(\"onRefresh\", $.toString(() => {\n        if (!getMyVar(\"refs\", \"\")) {\n            clearMyVar(\"s\");\n        }\n    }));\n}\n\nfunction setHead() {\n    d.push({\n        title: \"搜索：\" + [\"默认\", \"精准\"][searchMode],\n        url: $(\"#noLoading#\").lazyRule(() => {\n            setSearchMode(getSearchMode() ? 0 : 1);\n            refreshPage(false);\n            return \"hiker://empty\"\n        }),\n        col_type: \"icon_3_round_fill\",\n        pic_url: \"hiker://images/icon_search6\"\n    });\n    d.push({\n        title: \"我的阿里\",\n        url: \"hiker://page/myaliyun?page=fypage\",\n        col_type: \"icon_3_round_fill\",\n        pic_url: \"hiker://images/icon_cloud6\",\n        extra: {\n            isHome: true\n        }\n    });\n    d.push({\n        title: \"设置|\" + openMode,\n        url: $([\"模式：本地解析\", \"模式：官方APP\", \"登录阿里账号\", \"登录信息\", \"规则管理\", \"支持作者\", \"使用代理搜索\", \"播放模式\", \"获取弹幕搜索规则\"], 1, \"云简设置\").select((ids) => {\n            if (\"规则管理\" == input) {\n                return \"hiker://page/ruleManage#noRecordHistory##noHistory#\";\n            }\n            if (\"支持作者\" == input) {\n                return \"hiker://page/Donate.v#noRecordHistory##noHistory#\";\n            }\n            if (\"登录阿里账号\" == input) {\n                return $.require(\"loginMode\");\n            }\n            if (\"使用代理搜索\" == input) {\n                let isdDelegate = !!getItem(\"isdDelegate\", \"\");\n                return $(\"开启后小程序底部搜索框将使用代理搜索\\n当前:\" + isdDelegate + \"\\n点击确定即可\" + (isdDelegate ? \"关闭\" : \"开启\")).confirm((isdDelegate) => {\n                    setItem(\"isdDelegate\", isdDelegate ? \"\" : \"1\");\n                    return \"toast://\" + (isdDelegate ? \"已关闭\" : \"已开启\");\n                }, isdDelegate);\n            }\n            if (\"获取弹幕搜索规则\" === input) {\n                let rule = {\n                    \"js\": JSON.stringify(\"hiker://page/loadDm?rule=\" + MY_RULE.title + \"&title=\") + \"+encodeURIComponent(playdata.title.split('-')[0]);\",\n                    \"name\": MY_RULE.title + \"弹幕搜索\"\n                };\n                return \"rule://\" + base64Encode(\"￥projection_screen￥\" + JSON.stringify(rule));\n            }\n            if (\"播放模式\" === input) {\n                let modes = [\"转码\", \"原画\", \"原转\"];\n                let mode = getItem(\"aliyun_playMode\", modes[0]);\n                let index = modes.indexOf(mode);\n                return $(modes, 1, \"播放模式\", index).select(() => {\n                    setItem(\"aliyun_playMode\", input);\n                    return \"toast://切换成功\";\n                });\n            }\n            if (\"登录信息\" == input) {\n                const {\n                    openTokensFilepath,\n                    aliTokensFilepath\n                } = $.require(\"tokenPath\");\n                if (!fileExist(aliTokensFilepath)) return \"toast://还未登陆\";\n                let ali = request(aliTokensFilepath);\n                try {\n                    ali = JSON.parse(ali);\n                } catch (e) {\n                    deleteFile(aliTokensFilepath);\n                    return \"toast://获取失败\";\n                }\n                confirm({\n                    title: '登录信息',\n                    content: \"用户:\" + (ali.nick_name || ali.user_name || \"Token登录\") + \"\\nToken:\" + ali.refresh_token + \"\\n(取消：注销登录；确定：复制Token)\",\n                    confirm: $.toString((token) => {\n                        return \"copy://\" + token;\n                    }, ali.refresh_token),\n                    cancel: $.toString((path1, path2) => {\n                        return $(\"确认注销登录\").confirm((path1, path2) => {\n                            deleteFile(path1);\n                            deleteFile(path2);\n                            refreshPage();\n                            return \"toast://已成功退出登陆\";\n                        }, path1, path2);\n                    }, aliTokensFilepath, openTokensFilepath)\n                });\n                return;\n            }\n            input = input.replace(\"模式：\", \"\");\n            setItem(\"openMode\", input);\n            updateItem(ids, {\n                title: \"设置|\" + input\n            });\n            if (input == \"官方APP\") {\n                return \"toast://修改成功，请确保手机有安装阿里云盘等官方APP\";\n            }\n        }, id + \"mode\"),\n        col_type: \"icon_3_round_fill\",\n        pic_url: \"hiker://images/icon_menu6\",\n        extra: {\n            id: id + \"mode\"\n        }\n    });\n\n    d.push({\n        title: '搜索',\n        desc: '请输入关键词/链接',\n        col_type: 'input',\n        url: $.toString(() => {\n            input = input.trim();\n            if ($.require(\"alitest\").test(input)) {\n                clearMyVar(\"s\");\n                return \"hiker://page/aliyun?page=fypage&realurl=\" + encodeURIComponent(input) + \"&sharePwd=\";\n            }\n            putMyVar(\"s\", input);\n            refreshPage();\n            return \"hiker://empty\";\n        }),\n        extra: {\n            onChange: \"putMyVar('refs',input)\",\n            id: id + \"ss\",\n            defaultValue: s,\n            pageTitle: \"打开链接\"\n        }\n    });\n}\n\nfunction setRuleItem() {\n    let rules = $.require(\"data\").getNames(ruleGroup);\n    d.push({\n        title: \"🌟\",\n        url: \"hiker://collection?rule=\" + MY_RULE.title,\n        col_type: \"scroll_button\",\n    }, {\n        title: \"📌\" + ruleGroup,\n        url: $(\"#noLoading#\").lazyRule(() => {\n            let group = $.require(\"data\").getGroupNames();\n            let ruleGroup = getItem(\"ruleGroup\", \"\");\n            let index = group.indexOf(ruleGroup) + 1;\n            group.unshift(\"💡全部💡\");\n            let selectNum = $.require(\"data\").findModulo(group.length);\n            return $(group, selectNum, \"请选择分组\", index).select(() => {\n                if (!MY_INDEX) {\n                    setItem(\"ruleGroup\", \"\");\n                } else {\n                    setItem(\"ruleGroup\", input);\n                }\n                clearItem(\"rule\");\n                refreshPage();\n            });\n        }),\n        col_type: \"scroll_button\"\n    }, {\n        title: \"\" == r ? \"““全部””\" : \"全部\",\n        url: $(\"#noLoading#\").lazyRule((s, id) => {\n            let qr = getItem(\"rule\", \"\");\n            clearItem(\"rule\");\n            if (s) {\n                refreshPage();\n            } else {\n                updateItem(\"全部\" + id, {\n                    title: \"““全部””\"\n                });\n                if (qr) {\n                    updateItem(id + qr, {\n                        title: qr\n                    });\n                }\n            }\n            return \"hiker://empty\";\n        }, s, id),\n        col_type: \"scroll_button\",\n        extra: {\n            id: \"全部\" + id\n        }\n    });\n    for (let [it, basicUrl] of rules) {\n        d.push({\n            title: it == r ? \"““\" + it + \"””\" : it,\n            url: $((getHome(basicUrl) || \"\") + \"#noLoading#\").lazyRule((r, s, id) => {\n                let qr = getItem(\"rule\", \"\");\n                setItem(\"rule\", r);\n                if (s) {\n                    refreshPage();\n                } else {\n                    updateItem(qr ? (id + qr) : (\"全部\" + id), {\n                        title: qr || \"全部\"\n                    });\n                    updateItem(id + r, {\n                        title: \"““\" + r + \"””\"\n                    });\n                }\n                return \"hiker://empty\";\n            }, it, s, id),\n            col_type: \"scroll_button\",\n            extra: {\n                id: id + it\n            }\n        });\n    }\n\n}\n\nfunction record() {\n    let history = storage0.getItem(\"searchHistory\", []);\n    let ii = history.indexOf(s);\n    if (ii > -1) {\n        history.splice(ii, 1);\n    }\n    if (history.length > 20) {\n        history.splice(history.length - 1, 1);\n    }\n    history.unshift(s);\n    storage0.setItem(\"searchHistory\", history);\n}\n\nfunction searchEnd() {\n    let p = MY_PAGE;\n    let data = $.require(\"data\").getData(p, r, ruleGroup);\n    let pageid = id + \"ypj-page\" + p;\n    if (data.length > 0) {\n        d.push({\n            title: \"加载第\" + p + \"页中，进度：1/\" + data.length,\n            col_type: \"text_center_1\",\n            extra: {\n                id: pageid\n            }\n        });\n    }\n    setResult(d);\n    if (data.length > 0) {\n        //多线程加载        \n        let realPage = \"\" == r ? 1 : p;\n        let tasks = data.map(it => {\n            return {\n                func: function(rule) {\n                    try {\n                        return $.require(\"data\").carryRule(rule, s, realPage, searchMode);\n                    } catch (e) {\n                        log(rule.name + \":\" + e.toString());\n                        /*if(data.length===1&&p===1){\n                            return [{\n                                title:\"““\"+rule.name+\" ERROR””\",\n                                desc: e.toString(),\n                                col_type:\"text_center_1\",\n                                url:\"hiker://empty\",\n                                extra:{\n                                    lineVisible: false\n                                }\n                            }];\n                        }*/\n                    }\n                    //return rule.find(s, realPage);\n                },\n                param: it,\n                id: \"rule@\" + it.name\n            }\n        });\n\n        batchExecute(tasks, {\n            func: function(param, id, error, result) {\n                param.i += 1;\n                if (Array.isArray(result)) {\n                    deleteItem(\"_nothave\");\n                    addItemBefore(pageid, result);\n                }\n                if (param.i === param.all) {\n                    if (!result || !result.length) {\n                        deleteItem(\"_nothave\");\n                        addItemBefore(pageid, {\n                            col_type: \"text_center_1\",\n                            url: \"hiker://empty\",\n                            title: \"““””\" + \"~~~什么资源都没有哦~~~\".fontcolor(\"Gray\"),\n                            extra: {\n                                lineVisible: false,\n                                id: \"_nothave\"\n                            }\n                        });\n                    }\n                    deleteItem(pageid);\n                } else {\n                    updateItem(pageid, {\n                        title: \"加载第\" + MY_PAGE + \"页中，进度：\" + (param.i + 1) + \"/\" + param.all,\n                        col_type: \"text_center_1\",\n                        url: \"hiker://empty\"\n                    });\n                }\n            },\n            param: {\n                all: data.length,\n                i: 0,\n            }\n        })\n    }\n}\n\nfunction setHistory() {\n    d.push({\n        title: '<span style=\"color:#ff6601\"><b>历史记录</b></span>',\n        pic_url: \"hiker://images/icon_clock\",\n        col_type: \"avatar\",\n        url: $([\"清除搜索记录\", \"打开观看记录\"]).select((id) => {\n            if (input === \"清除搜索记录\") {\n                return $(\"确定清除全部搜索记录？\").confirm((id) => {\n                    clearItem(\"searchHistory\");\n                    deleteItemByCls(id + \":key\");\n                    addItemAfter(id + \":searchHistory\", {\n                        col_type: \"text_center_1\",\n                        url: \"hiker://empty\",\n                        title: \"““””\" + \"~~~什么都没有哦~~~\".fontcolor(\"Gray\"),\n                        extra: {\n                            cls: id + \":key\",\n                            lineVisible: false\n                        }\n                    });\n                }, id);\n            } else {\n                return \"hiker://history?rule=\" + MY_RULE.title;\n            }\n        }, id),\n        extra: {\n            id: id + \":searchHistory\",\n        }\n    });\n\n    let history = storage0.getItem(\"searchHistory\", []);\n    let i = 0;\n    for (let key of history) {\n        d.push({\n            title: key,\n            url: $(\"#noLoading#\").lazyRule((id, key) => {\n                let extra = findItem(id + \"ss\").extra;\n                extra.defaultValue = key;\n                updateItem({\n                    extra: extra\n                });\n                return \"hiker://empty\";\n            }, id, key),\n            col_type: \"flex_button\",\n            extra: {\n                id: id + \":key:\" + key,\n                cls: id + \":key\",\n                longClick: [{\n                    title: \"删除关键词:\" + key,\n                    js: $.toString((id, key, i) => {\n                        let history = storage0.getItem(\"searchHistory\", []);\n                        history.splice(i, 1);\n                        storage0.setItem(\"searchHistory\", history);\n                        deleteItem(id + \":key:\" + key);\n                        //toast();\n                    }, id, key, i)\n                }]\n            }\n        });\n        i++;\n    }\n    if (history.length === 0) {\n        d.push({\n            col_type: \"text_center_1\",\n            url: \"hiker://empty\",\n            title: \"““””\" + \"~~~什么都没有哦~~~\".fontcolor(\"Gray\"),\n            extra: {\n                cls: id + \":key\",\n                lineVisible: false\n            }\n        });\n    }\n}\n\nfunction setTrendingTabEnd() {\n    let hotClass = {\n        \"百度\": {\n            \"电视剧\": \"teleplay\",\n            \"电影\": \"movie\"\n        },\n        \"夸克\": {\n            \"电视剧\": \"电视剧\",\n            \"电影\": \"电影\",\n            \"动漫\": \"动漫\",\n            \"综艺\": \"综艺\"\n        }\n    };\n    let dataSource = Object.keys(hotClass);\n    let selectsource = getItem(\"dataSource\", dataSource[0]);\n    let hotkeys = Object.keys(hotClass[selectsource]);\n    let selectkey = getItem(\"hotkey\", hotkeys[0]);\n    let tabkey = hotClass[selectsource][selectkey];\n\n    d.push({\n        title: '<span style=\"color:#ff6601\"><b>' + selectsource + selectkey + '热搜</b></span>',\n        url: $(hotkeys, 1, \"切换热搜\").select(() => {\n            setItem(\"hotkey\", input);\n            refreshPage(false);\n            return \"toast://已切换为\" + input;\n        }),\n        col_type: \"avatar\",\n        pic_url: \"hiker://images/icon_fire\",\n        extra: {\n            longClick: [{\n                title: \"切换数据源\",\n                js: $.toString((dataSource) => {\n                    return $(dataSource, 1, \"切换数据源\").select(() => {\n                        setItem(\"dataSource\", input);\n                        clearItem(\"hotkey\");\n                        refreshPage(false);\n                        return \"toast://已切换为\" + input;\n                    });\n                }, dataSource)\n            }]\n        }\n    });\n    d.push({\n        title: \"正在加载...\",\n        url: \"hiker://empty\",\n        col_type: \"text_center_1\",\n        extra: {\n            id: id + \":hotkey\",\n            lineVisible: false\n        }\n    });\n    setResult(d);\n    let sd = [];\n    let setSearchKey = name => {\n        putMyVar('s', name);\n        refreshPage();\n        return 'hiker://empty'\n    };\n\n    let getTitle = (i, name) => {\n        let color;\n        switch (i) {\n            case 0:\n                color = \"#ff3300\";\n                break;\n            case 1:\n                color = \"#ff6600\";\n                break;\n            case 2:\n                color = \"#ff9900\"\n                break;\n            default:\n                color = \"black\";\n        }\n        return \"““””\" + String(i + 1).fontcolor(color) + \"\\t\\t\\t\" + name;\n    }\n    try {\n        switch (selectsource) {\n            case \"百度\":\n                var json = request('https://top.baidu.com/api/board?platform=wise&tab=' + tabkey + '&tag=%7B%22category%22:%22%E5%85%A8%E9%83%A8%E7%B1%BB%E5%9E%8B%22%7D', {\n                    headers: {\n                        'User-Agent': 'Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.51 Mobile Safari/537.36',\n                        'Host': 'top.baidu.com',\n                        'Accept': 'application/json, text/plain, */*',\n                        'Accept-Language': 'zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7',\n                        'Accept-Encoding': 'gzip, deflate, br',\n                        'Referer': 'https://top.baidu.com/board?tab=novel',\n                    }\n                });\n                //var s = Date.now();\n                var list = JSON.parse(json).data.cards[0].content;\n                for (let i = 0; i < list.length; i++) {\n                    let item = list[i];\n                    let name = item.word + ' (' + item.show[2] + ')';\n                    let des = item.desc;\n                    sd.push({\n                        title: getTitle(i, name),\n                        url: $('#noLoading#').lazyRule(setSearchKey, item.word),\n                        desc: des,\n                        img: item.img,\n                        col_type: \"movie_1_vertical_pic\"\n                    });\n                }\n                break;\n            case \"夸克\":\n                var json = request(\"https://news.myquark.cn/v2/toplist/movie?&channel=\" + tabkey + \"&rank_type=%E6%9C%80%E7%83%AD\");\n                var xmlData = (JSON.parse(json).data || \"\").replace(/title>/g, \"h_title>\").replace(/src>/g, \"h_src>\").replace(/area>/g, \"h_area\");\n                var list = pdfa(xmlData, \"body&&item\");\n                var getText = t => t;\n                var trend = [\"ㄧ\", \"↑\", \"↓\"];\n                //var s = Date.now();\n                for (let i = 0; i < list.length; i++) {\n                    let item = list[i];\n                    let name = pdfh(item, \"h_title&&Text\");\n                    let des = \"热度：\" + pdfh(item, \"hot_score&&Text\") + \" \" + trend.at(pdfh(item, \"hot_trend&&Text\")) +\n                        \"\\n评分：\" + pdfh(item, \"score_avg&&Text\").replace(/^0$/, \"暂无评分\") +\n                        \"\\n\" + pdfh(item, \"year&&Text\") + \"·\" + pdfh(item, \"h_area&&Text\") + \"·\" + pdfh(item, \"category&&Text\").replace(\",\", \"·\");\n                    sd.push({\n                        title: getTitle(i, name),\n                        url: $('#noLoading#').lazyRule(setSearchKey, name),\n                        desc: des,\n                        img: pdfh(item, \"h_src&&Text\"),\n                        col_type: \"movie_1_vertical_pic\"\n                    });\n                }\n                break;\n        }\n        addItemAfter(id + \":hotkey\", sd);\n    } catch (e) {\n        log(e.toString());\n    } finally {\n        deleteItem(id + \":hotkey\");\n    }\n}\nlet r = getItem(\"rule\", \"\");\nlet hideSetting = MY_PARAMS.hideSetting || getParam(\"hideSetting\", \"\") === \"true\";\nlet s = getMyVar('s', '') || MY_PARAMS.searchTerms || decodeURIComponent(getParam(\"searchTerms\", \"\"));\nlet searchMode = getSearchMode();\nlet openMode = getItem(\"openMode\", \"本地解析\");\nlet id = Date.now() + MY_RULE.title;\nlet ruleGroup = getItem(\"ruleGroup\", \"\");\nlet d = [];\nif (MY_PAGE === 1) {\n    setPrepose();\n    if (!hideSetting) {\n        setClip();\n        setHead();\n    }\n    setRuleItem();\n    if (!s) {\n        setHistory();\n    }\n}\nif (s) {\n    record();\n    searchEnd();\n} else if (MY_PAGE === 1) {\n    setTrendingTabEnd();\n} else {\n    setResult([]);\n}"},{"col_type":"movie_3","name":"网页浏览","path":"ysfx","rule":"js:\nvar d = [];\n\nlet openMode = getItem(\"openMode\");\nlet rule = MY_RULE.title;\nlet url = decodeURIComponent(getParam(\"webUrl\",\"\"));\n\nfunction intercept(rule, origin, openMode) {\n    let host = origin.replace(new RegExp(\"http://|https://\"), \"\").split(\"/\")[0];\n    let hosts = host.split(\".\");\n    if (hosts.length > 2) {\n        host = hosts[hosts.length - 2] + \".\" + hosts[hosts.length - 1];\n    }\n    if (input.startsWith(\"magnet\")) {\n        confirm({\n            title: \"温馨提示\",\n            content: \"检测到新的磁链地址，点击确定按钮即可播放，点击取消按钮可以复制链接\",\n            confirm: $.toString((mag) => {\n                return mag;\n            }, input),\n            cancel: $.toString((mag) => {\n                return \"copy://\" + mag\n            }, input)\n        });\n        return true;\n    } else if ($.require(\"alitest?rule=\"+rule).test(input) && openMode != \"官方APP\") {\n        log(input);\n        if (input.includes('checkurl?url=') && input.includes('&urlrefer')) {\n            input = decodeURIComponent(input.split('&urlrefer')[0].split('checkurl?url=')[1]);\n            //log('贴吧'+input);\n        }\n        return $.toString((url, rule) => {\n            fy_bridge_app.open(JSON.stringify({\n                title: \"阿里云盘\",\n                url: \"hiker://page/aliyun?page=fypage&realurl=\" + encodeURIComponent(url) + \"&rule=\" + rule,\n            }))\n        }, input, rule);\n    } else if(input.includes(\"quark.cn/s/\")&&fetch(\"hiker://home@Quark.简\") != \"null\"){\n        return $.toString((url) => {\n            fy_bridge_app.open(JSON.stringify({\n                title: \"夸克网盘\",\n                url: \"hiker://page/quarkList?rule=Quark.简&realurl=\" + encodeURIComponent(url) + \"&sharePwd=\",\n            }))\n        },input);\n    } else if (/\\.(mp3|flac|m4a)$/.test(input)) {\n        log(input);\n        return $.toString((url, rule) => {\n            fy_bridge_app.playVideo(url);\n        }, input, rule);\n    } else if (!input.includes(host) && input.startsWith(\"http\")) {\n        log(input);\n        return $.toString((url, rule) => {\n            fy_bridge_app.open(JSON.stringify({\n                title: \"详情\",\n                url: \"hiker://page/ysfx?webUrl=\"+encodeURIComponent(url)+\"&rule=\"+rule,\n            }))\n        }, input, rule);\n    } else if (!input.startsWith(\"http\")) {\n        log(input);\n        //能唤起APP的白名单\n        let white = [\n            \"qklink\",\n            \"bdnetdisk\",\n            \"xunleiapp\",\n            \"smartdrive\"\n        ];\n        let inWhite = white.filter(it => input.startsWith(it)).length > 0;\n        if (!inWhite) {\n            return false;\n        }\n        return $.toString((url, rule) => {\n            fy_bridge_app.openThirdApp && fy_bridge_app.openThirdApp(url);\n        }, input, rule);\n    }\n}\n\nfunction loadJs() {\n    try {\n        if (document.title && document.title.length) {\n            let r = $$$().lazyRule((t) => {\n                setPageTitle(t);\n            }, document.title);\n            fy_bridge_app.parseLazyRule(r);\n        }\n    } catch (e) {\n        fy_bridge_app.log(e.toString());\n    }\n}\n\nd.push({\n    url: url,\n    col_type: \"x5_webview_single\",\n    desc: \"100%&&float\",\n    extra: {\n        urlInterceptor: $.toString(intercept, rule, getHome(url), openMode),\n        js: $.toString(loadJs),\n        canBack: true,\n        jsLoadingInject: true,\n        floatVideo: true\n    }\n});\n\nsetResult(d);"},{"col_type":"movie_3","name":"阿里Lazy","path":"alilazy","rule":"const AliAccessApi = $.require(\"aliPlayApi\");\nconst {\n    openTokensFilepath,\n    aliTokensFilepath\n} = $.require(\"tokenPath\");\n\nfunction aliM3u8Proxy(fileId, shareId, sharePwd, shareToken, aliToken, title) {\n    let playmode = (MY_PARAMS.mode&&MY_PARAMS.mode[0])||\"\";\n    let suffix = playmode ? \"media.m3u8\" : \"ref_task.m3u8\";\n    let urlname = playmode ? \"url\" : \"preview_url\";\n    let cacheFilePath = \"hiker://files/_cache/\" + fileId + MY_PARAMS.timestamp[0]+ \".m3u8\"\n    //过期获取播放原始链接\n    function getAliPlayUrl(fileId, line) {\n        let aliurl;\n        try {\n            const AliAccessApi = $.require(\"hiker://page/aliPlayApi?rule=\" + title);\n            let aliAccessApi = AliAccessApi.createDefault(shareId, sharePwd, shareToken, aliToken, null, title);\n            let playUrlList = (MY_PARAMS.mode ? aliAccessApi.getAllVideoTemPlayUrl(fileId, true).preview : aliAccessApi.getShareVideoPreview(fileId)) || [];\n\n            aliurl = playUrlList.find(v => v.template_id == line)[urlname];\n        } catch (e) {\n            log(e.toString());\n            throw e;\n        }\n        return aliurl;\n    }\n\n    function getM3u8Content(playurl) {\n        //media.m3u8\n        let home = playurl.split(suffix)[0];\n        let f = fetch(playurl, {\n            headers: {\n                \"User-Agent\": PC_UA,\n                \"Referer\": \"https://www.aliyundrive.com/\"\n            },\n            timeout: 3000\n        }).split(\"\\n\");\n        let ff = f.map(it => {\n            if (it.startsWith(\"media-\")) {\n                return \"/proxy?url=\" + base64Encode(home + it)+\"&timestamp=\"+MY_PARAMS.timestamp[0]+\"&mode=\"+playmode;\n            }\n            return it;\n        }).join(\"\\n\");\n\n        writeFile(cacheFilePath, ff);\n        return ff;\n    }\n\n    function updateTsUrl(url) {\n        let fid = url.split('&f=')[1].split('&')[0];\n        //log('sfid-' + fid);\n        let f = fetch(cacheFilePath).split(\"\\n\");\n        f.forEach(it => {\n            if (it && it.startsWith('/proxy?url=')) {\n                let furl = base64Decode(it.replace('/proxy?url=', '').split(\"&\")[0]);\n                if (url.substr(url.indexOf('/media-'), url.indexOf('.ts')) == furl.substr(furl.indexOf('/media-'), furl.indexOf('.ts'))) {\n                    url = furl;\n                }\n            }\n        })\n        let expires = url.split('x-oss-expires=')[1].split('&')[0];\n        const lasttime = parseInt(expires) - Date.now() / 1000;\n        if (lasttime < 60) {\n            //log('过期更新')\n            let line = url.split('/media')[0]; //取之前播放的ts段线路\n            line = line.substring(line.lastIndexOf('/') + 1);\n            let f = getM3u8Content(getAliPlayUrl(fid, line)).split(\"\\n\");\n            f.forEach(it => {\n                if (it && it.startsWith('/proxy?url=')) {\n                    let furl = base64Decode(it.replace('/proxy?url=', ''));\n                    if (url.substr(url.indexOf('/media-'), url.indexOf('.ts')) == furl.substr(furl.indexOf('/media-'), furl.indexOf('.ts'))) {\n                        url = furl;\n                    }\n                }\n            })\n\n        }\n        return url;\n    }\n    try {\n        let url = base64Decode(MY_PARAMS.url[0]);\n        if (url.includes(\".ts\")) {\n            return JSON.stringify({\n                statusCode: 302,\n                headers: {\n                    \"Location\": updateTsUrl(url),\n                    \"User-Agent\": PC_UA,\n                    \"Referer\": \"https://www.aliyundrive.com/\"\n                }\n            });\n        } else {\n            let templateId = MY_PARAMS.templateId[0];\n            if(fileExist(cacheFilePath)){\n                return getM3u8Content(getAliPlayUrl(fileId, templateId));\n            }else{\n                return getM3u8Content(url);\n            }\n        }\n    } catch (e) {\n        log(\"#代理播放失败#\\n错误信息>\" + e.toString() + \"\\n错误行>\" + e.lineNumber);\n    }\n}\nconst transcoding = {\n    UHD: \"4K 超清\",\n    QHD: \"2K 超清\",\n    FHD: \"1080 全高清\",\n    HD: \"720 高清\",\n    SD: \"540 标清\",\n    LD: \"360 流畅\"\n};\n\nfunction getVideo(aliAccessApi, fileId) {\n\n    let playUrlList = aliAccessApi.getShareVideoPreview(fileId) || [];\n\n    let serverAddress = startProxyServer($.toString(aliM3u8Proxy, fileId, aliAccessApi.shareId, aliAccessApi.sharePwd, aliAccessApi.shareToken, aliAccessApi.aliToken, MY_RULE.title));\n\n    if (playUrlList.length > 0) {\n        let urls = [],\n            names = [];\n        playUrlList.forEach((item) => {\n            urls.push(serverAddress + \"?url=\" + base64Encode(item.preview_url) + \"&timestamp=\"+Date.now()+\"&templateId=\" + item.template_id + \"#.m3u8\");\n            names.push(transcoding[item.template_id] ? transcoding[item.template_id] : item.template_height);\n        });\n        let heads = new Array(playUrlList.length).fill({\n            'Referer': 'https://www.aliyundrive.com/'\n        });\n        return {\n            urls: urls,\n            names: names,\n            headers: heads,\n        };\n    } else {\n        return {};\n    }\n\n}\n\nfunction getSourceTransfer(aliAccessApi, fileId) {\n    let playUrlInfo = aliAccessApi.getAllVideoTemPlayUrl(fileId);\n    let playUrlList = playUrlInfo.preview;\n\n    let serverAddress = startProxyServer($.toString(aliM3u8Proxy, fileId, aliAccessApi.shareId, aliAccessApi.sharePwd, aliAccessApi.shareToken, aliAccessApi.aliToken, MY_RULE.title));\n    if (playUrlList.length > 0) {\n        let urls = [],\n            names = [];\n        playUrlList.forEach((item) => {\n            urls.push(serverAddress + \"?url=\" + base64Encode(item.url) + \"&mode=1&timestamp=\"+Date.now()+\"&templateId=\" + item.template_id + \"#.m3u8\");\n            names.push(transcoding[item.template_id] ? transcoding[item.template_id] : item.template_height);\n        });\n        urls.push(playUrlInfo.origin);\n        names.push(\"原画\");\n        let heads = new Array(playUrlList.length).fill({\n            'Referer': 'https://www.aliyundrive.com/'\n        });\n        return {\n            urls: urls,\n            names: names,\n            headers: heads,\n        };\n    } else {\n        return {};\n    }\n}\n\nfunction getPlayFormat(playUrl, title) {\n    return {\n        names: [title],\n        urls: [playUrl + \"#isVideo=true##ignoreMusic=true#\"],\n        headers: [{\n            'Referer': 'https://www.aliyundrive.com/',\n            \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36\"\n        }]\n    };\n}\n\n\n$.exports = function(shareId, sharePwd, shareToken, fileId, cate, zimu) {\n    if (!fileExist(aliTokensFilepath)) {\n        toast(\"请先登陆登录账号\");\n        return \"hiker://page/login#noRecordHistory##noHistory#?noRefresh=1\";\n    }\n    let aliToken = $.require(aliTokensFilepath);\n    if (cate === \"video\") {\n        let playList = [];\n        let aliAccessApi;\n        let playMode = getItem(\"aliyun_playMode\", \"转码\");\n        try {\n            aliAccessApi = AliAccessApi.createDefault(shareId, sharePwd, shareToken, aliToken);\n            if (playMode === \"转码\") {\n                playList = getVideo(aliAccessApi, fileId) || {};\n            } else if (playMode === \"原画\") {\n                playList = getPlayFormat(aliAccessApi.getVideoTemPlayUrl(fileId), playMode);\n            } else if (playMode === \"极速原画\") {\n                playList = getPlayFormat(aliAccessApi.getVideoTemPlayUrl(fileId) + \"#fastPlayMode##threads=\" + getItem(\"speedThread\", \"10\") + \"#\", playMode);\n            } else if (playMode === \"原转\") {\n                playList = getSourceTransfer(aliAccessApi, fileId);\n            }\n        } catch (e) {\n            log(\"#\" + playMode + \"播放失败#\\n错误信息>\" + e.toString() + \"\\n错误行>\" + e.lineNumber);\n            if (e.code === \"InvalidParameter.RefreshToken\") {\n                toast(\"登陆过期，请重新登陆\");\n                return \"hiker://page/login#noRecordHistory##noHistory#?noRefresh=1\";\n            } else if (e.code === \"QuotaExhausted.Drive\") {\n                return \"toast://网盘空间不足，无法播放请清理。\";\n            }\n            return \"toast://播放失败，错误信息已打印。\\n请查看日志(LOG)\";\n        }\n        let mountsub = storage0.getMyVar('mountzimu', {});\n        if (Object.keys(mountsub).length > 0) {\n            zimu = mountsub;\n        }\n        let subtitle;\n        if (Object.keys(zimu || {}).length > 0 && playList && playList.urls && playList.urls.length > 0) {\n            java.lang.Thread.sleep(100);\n            try {\n                var zmurl = aliAccessApi.getVideoTemPlayUrl(zimu.file_id);\n                let path = 'hiker://files/cache/云盘君/sub.' + zimu.ext;\n                downloadFile(zmurl, path, {\n                    'Referer': 'https://www.aliyundrive.com/'\n                });\n                subtitle = getPath(path);\n            } catch (e) {\n                toast(\"字幕加载失败\");\n                log(e.message);\n            }\n        }\n        let dmlist = storage0.getMyVar(\"dmlist\", []);\n        let dmlist_cache = getMyVar(\"dmlist_cache\", \"\");\n        if (dmlist_cache && dmlist_cache.startsWith(fileId + \"#\")) {\n            playList.danmu = dmlist_cache.replace(fileId + \"#\", \"\");\n        } else if (dmlist.length > 0) {\n            playList.danmu = \"hiker://files/cache/danmu/\" + dmlist.splice(0, 1)[0];\n            putMyVar(\"dmlist_cache\", fileId + \"#\" + playList.danmu);\n            storage0.putMyVar(\"dmlist\", dmlist);\n            if (dmlist.length === 0) {\n                toast(\"弹幕列表已全部挂载\");\n            }\n        } else {\n            playList.danmu = getVar(\"dm_share\", \"\");\n        }\n        playList.subtitle = subtitle;\n        return JSON.stringify(playList);\n    }\n\n    let aliAccessApi = AliAccessApi.createDefault(shareId, sharePwd, shareToken, aliToken, null);\n    let url = aliAccessApi.getVideoTemPlayUrl(fileId);\n\n    if (cate === \"image\") {\n        return url + \"#.jpg\";\n    } else if (cate === \"audio\") {\n        return url + \"#isMusic=true#\";\n    } else {\n        return \"download://\" + url;\n    }\n}"},{"col_type":"movie_3","name":"阿里列表","path":"aliyun","rule":"js:\n//@author LoyDgIk\nconst AliShareApi = $.require(\"AliApi\");\n\n\nlet openAPIList = [\"alist\", \"drive\", \"tvbox\", \"XBY\", \"TV\"];\n\nlet realurl = decodeURIComponent(getParam(\"realurl\", \"\")).split(\"?\")[0];\nlet urlData = realurl.split(\"/\");\n//https://www.aliyundrive.com/s/{shareId}/folder/{fileId}?;\n\nlet shareId = MY_PARAMS.shareId || urlData[4];\nlet sharePwd = getParam(\"sharePwd\", MY_PARAMS.sharePwd || \"\");\nlet shareToken = getParam(\"shareToken\", MY_PARAMS.shareToken);\n\nlet fileId = (urlData[5] === \"folder\" ? urlData[6] : void 0) || MY_PARAMS.fileId;\nlet searchKey = decodeURIComponent(getParam(\"searchKey\", \"\")) || undefined;\nlet isSearch = !!searchKey;\n\nlet pageId = String(Date.now()).slice(6);\n\nlet skipFile = isSearch && getItem(\"skipFile\", \"0\") === \"1\";\n\nfunction formatDate(_date, fmt) {\n    let date = !isNaN(_date) ? new Date(_date * 1000) : new Date(_date);\n    return $.dateFormat(date, fmt || \"yyyy-MM-dd HH:mm:ss\")\n}\n\nfunction formatSize(size) {\n    if (!size) {\n        return '';\n    }\n    const units = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n    let i = 0;\n    while (size >= 1024) {\n        size /= 1024;\n        i++;\n    }\n    size = i ? Number(size.toFixed(2)) : size;\n    return `${size} ${units[i]}`;\n}\n\nfunction setMyPaCache(key, value) {\n    MY_PARAMS[key] = value;\n}\n\nfunction saveMyPaCache() {\n    setPageParams(MY_PARAMS);\n}\n\nfunction setMarker(marker) {\n    setMyPaCache(\"marker\", marker);\n}\n\nfunction setToken(shareToken) {\n    setMyPaCache(\"shareToken\", shareToken);\n}\nif (MY_PARAMS.noPic) {\n    setPagePicUrl();\n    setMyPaCache(\"noPic\", false);\n}\n/*\nfunction setVideoItemCache(videoItemCache) {\n    setMyPaCache(\"videoItemCache\", videoItemCache);\n}\n\nfunction setSubtitleCache(subtitleCache) {\n    setMyPaCache(\"subtitleCache\", subtitleCache);\n}*/\n\nlet iconType = \"ai|apk|avi|css|dmg|exe|flv|gif|hiker|html|iso|jpg|js|json|log|mov|mp3|mp4|otf|php|png|ppt|psd|table|txt|wav|xls|zip|css|doc|epub|exc|htm|xlsx\".split('|');\n\nfunction getIcon(ext, type) {\n    let root = \"https://gitcode.net/qq_32394351/dr/-/raw/master/img/文件类型2/\";\n    if (type === \"folder\") {\n        return root + \"文件夹.svg\";\n    }\n    if (iconType.includes((ext || \"\").toLowerCase())) {\n        return root + ext + \".svg\";\n    }\n    return root + \"文件.svg\";\n\n}\n\nfunction load(items) {\n    let aliShareApi = new AliShareApi(shareId, sharePwd, shareToken, (shareToken) => {\n        setToken(shareToken);\n        MY_PARAMS.shareToken = shareToken;\n    });\n    let orders = {\n        \"名称正序\": \"name#ASC\",\n        \"名称倒序\": \"name#DESC\",\n        \"时间正序\": \"updated_at#ASC\",\n        \"时间倒序\": \"updated_at#DESC\",\n        \"大小正序\": \"size#ASC\",\n        \"大小倒序\": \"size#DESC\"\n    };\n    let playMode = getItem(\"aliyun_playMode\", \"转码\");\n    let ordersKeys = Object.keys(orders);\n    let orderName = getItem(\"aliyun_order\", ordersKeys[0]);\n    let order = orders[orderName].split(\"#\");\n    let styles = [\"text_1\", \"movie_2\", \"card_pic_3\", \"avatar\", \"追剧\", \"看图\"];\n    let style = getItem(\"aliyun_style\", styles[0]);\n    if (MY_PAGE === 1) {\n        if (!getMyVar(\"mountzimu\", \"\")) {\n            storage0.putMyVar(\"mountzimu\", {});\n            addListener(\"onClose\", $.toString(() => {\n                clearMyVar(\"mountzimu\");\n                clearMyVar(\"aliShareToken\");\n                clearVar(\"dm_share\");\n                clearMyVar(\"dmlist\");\n                clearMyVar(\"listSearchKey\");\n                clearMyVar(\"dm_listUrlList\");\n            }));\n        }\n        setMarker();\n        if (realurl && !isSearch) {\n            let shareInfo = aliShareApi.getShareInfo();\n            let fileInfo = shareInfo.file_infos || [];\n            if (fileInfo.length === 1 && fileInfo[0].type === \"folder\" && !fileId) {\n                fileId = fileInfo[0].file_id;\n                setMyPaCache(\"fileId\", fileId);\n                setPageTitle(fileInfo[0].file_name);\n            } else {\n                setPageTitle(shareInfo.share_name);\n            }\n            let deadline = \"永久有效\";\n\n            if (shareInfo.expiration) {\n                deadline = \"有效至：\" + formatDate(shareInfo.expiration);\n                //shareInfo.updated_at\n            }\n            items.push({\n                title: (shareInfo.creator_name || shareInfo.creator_phone) + \"&nbsp;&nbsp;\" + deadline.small(),\n                url: realurl + \"#noHistory#\",\n                img: shareInfo.avatar || \"hiker://images/icon_unknown\",\n                col_type: \"avatar\"\n            });\n        }\n        if (!isSearch) {\n            items.push({\n                title: \"搜索\",\n                url: $.toString(() => {\n                    input = input.trim();\n                    if (!input) return \"toast://请输入关键词\";\n                    return \"hiker://page/aliyun#noHistory##fullTheme#?page=fypage&searchKey=\" + encodeURIComponent(input);\n                }),\n                col_type: \"input\",\n                extra: {\n                    onChange: \"putMyVar('listSearchKey',input)\",\n                    sharePwd: sharePwd,\n                    shareId: shareId,\n                    shareToken: shareToken\n                }\n            });\n        } else {\n            items.push({\n                title: \"““\" + searchKey + \"””的搜索结果\",\n                url: \"hiker://empty\",\n                col_type: \"text_center_1\",\n                extra: {\n                    lineVisible: false\n                }\n            });\n        }\n        let funcItems = [];\n        funcItems.push({\n            title: style,\n            url: $(styles, 1, \"排布样式\").select(() => {\n                setItem(\"aliyun_style\", input);\n                refreshPage();\n                return \"toast://已切换\";\n            }),\n            pic_url: \"https://hikerfans.com/img/ali_icon.svg\"\n        }, {\n            title: orderName,\n            url: $(ordersKeys, 2, \"排序方式\").select(() => {\n                setItem(\"aliyun_order\", input);\n                refreshPage();\n                return \"toast://切换成功\";\n            }),\n            pic_url: \"https://hikerfans.com/img/ali_sort.svg\"\n        }, {\n            title: playMode,\n            url: $([\"转码\", \"原画\", \"原转\", \"极速原画\"], 1, \"播放模式\").select(() => {\n                setItem(\"aliyun_playMode\", input);\n                refreshPage();\n                return \"toast://切换成功\";\n            }),\n            pic_url: \"https://hikerfans.com/img/ali_play.svg\",\n        });\n        if ([\"原转\",\"原画\",\"极速原画\"].includes(playMode)) {\n            funcItems.push({\n                title: openAPIList[getItem(\"openApiMode\", \"0\")],\n                url: $(openAPIList, 1, \"原画API(不要频繁切换)\").select((openAPIList) => {\n                    setItem(\"openApiMode\", String(openAPIList.indexOf(input)));\n                    deleteFile($.require(\"tokenPath\").openTokensFilepath);\n                    refreshPage(false);\n                    return \"toast://已切换为\" + input;\n                }, openAPIList),\n                pic_url: \"https://hikerfans.com/img/ali_api.svg\",\n            });\n        }\n        if (!isSearch) {\n            funcItems.push({\n                title: \"功能\",\n                url: $([\"转存云盘\", \"登陆账号\", \"复制分享链接\", \"查看手动挂载字幕\", \"获取弹幕搜索规则\", \"批量挂载本地弹幕\", \"推送到TVBox\", \"设置收藏封面\", \"获取投屏IP\" , \"极速原画下载线程\" , \"转存当前文件夹\"], 2, \"更多功能\").select((shareId, sharePwd, fileId) => {\n                    switch (input) {\n                        case \"转存云盘\":\n                            return `smartdrive://share/browse?shareId=${shareId}&sharePwd=${sharePwd||\"\"}`;\n                        case \"登陆账号\":\n                            return \"hiker://page/login#noRecordHistory##noHistory#\";\n                        case \"复制分享链接\":\n                            return $([\"复制链接\", \"复制海阔口令\"], 1, \"分享方式\").select((url) => {\n                                if (input === \"复制链接\") {\n                                    return \"copy://\" + url;\n                                } else {\n                                    return \"copy://阿里云盘分享口令「\" + getPageTitle() + \"」\\n\" + url + \" @import=js:`hiker://page/aliyun?realurl=${input.trim()}&rule=\" + MY_RULE.title + \"`;\";\n                                }\n                            }, \"https://www.aliyundrive.com/s/\" + shareId + (fileId ? \"/folder/\" + fileId : \"\"));\n                        case \"批量挂载本地弹幕\":\n                            return \"hiker://page/dmMount#noHistory##noRecordHistory#\";\n                        case \"查看手动挂载字幕\":\n                            let zm = storage0.getMyVar(\"mountzimu\", {});\n                            let tip = zm.name ? \"当前字幕文件\\n\" + zm.name + \".\" + zm.ext : \"还未手动挂载字幕\";\n                            confirm({\n                                title: '手动挂载字幕',\n                                content: tip + \"\\n(点击取消可以清除挂载字幕)\",\n                                cancel: () => {\n                                    clearMyVar(\"mountzimu\");\n                                    return \"toast://已清除手动挂载字幕\";\n                                }\n                            });\n                            return;\n                        case \"获取弹幕搜索规则\":\n                            let rule = {\n                                \"js\": JSON.stringify(\"hiker://page/loadDm?rule=\" + MY_RULE.title + \"&title=\") + \"+encodeURIComponent(playdata.title.split('-')[0]);\",\n                                \"name\": MY_RULE.title + \"弹幕搜索\"\n                            };\n                            return \"rule://\" + base64Encode(\"￥projection_screen￥\" + JSON.stringify(rule));\n                        case \"推送到TVBox\":\n                            return \"hiker://page/tvboxPush#noHistory##noRecordHistory#\";\n                        case \"设置收藏封面\":\n                            return $([\"设置封面地址\", \"搜索封面\"], 1).select(() => {\n                                if (input === \"设置封面地址\") {\n                                    return $(\"\", \"请输入图片地址\").input(() => {\n                                        input = input.trim();\n                                        if (!input) return \"toast://请输入地址\";\n                                        setPagePicUrl(input);\n                                        return \"toast://修改成功\";\n                                    });\n                                } else {\n                                    return \"hiker://page/frontCover#noHistory##noRecordHistory#\";\n                                }\n                            });\n                        case \"获取投屏IP\":\n                            let ip = $.require(\"aliUtil\").getIPv4Address();\n                            if (ip.startsWith(\"192.168.\")) {\n                                return $(ip + \"\\n该IP适用于流量+热点的投屏\\n请替换链接中的0.0.0.0\").confirm((ip) => {\n                                    return \"copy://\" + ip;\n                                }, ip);\n                            } else {\n                                return $(ip + \"\\n获取失败非稳定IP,请开启热点再使用,该IP可能会变,不能投屏\").confirm(() => {});\n                            }\n                        case \"极速原画下载线程\":\n                            return $(getItem(\"speedThread\", \"10\"), \"请输入3-32之间的整数\").input(() => {\n                                let speedThread = parseInt(input);\n                                if (speedThread < 3 || speedThread > 32) {\n                                    return \"toast://设置不合法\";\n                                }\n                                setItem(\"speedThread\", String(speedThread));\n                                return \"toast://设置成功\";\n                            });\n                        case \"转存当前文件夹\":\n                            return \"hiker://page/myaliyun#noHistory##noRecordHistory#?page=fypage\";\n                    }\n                }, shareId, sharePwd, fileId),\n                pic_url: \"https://hikerfans.com/img/ali_fileinto.svg\",\n                extra: {\n                    pageId: pageId,\n                    fileId: fileId,\n                    shareId: shareId,\n                    shareToken: shareToken,\n                    sharePwd: sharePwd,\n                    transfer: true,\n                    folderName: getPageTitle()\n                }\n            });\n        } else {\n            funcItems.push({\n                title: [\"ALL\", \"跳过文件\"][Number(skipFile)],\n                url: $(\"#noLoading#\").lazyRule((skipFile) => {\n                    setItem(\"skipFile\", String(skipFile ? \"0\" : \"1\"));\n                    refreshPage(false);\n                    return \"hiker://empty\";\n                }, skipFile),\n                pic_url: \"hiker://images/icon_search6\",\n            });\n        }\n        let funStyle = [\"\", \"\", \"\", \"icon_small_3\", \"icon_round_small_4\", \"icon_5\"][funcItems.length];\n        items.push.apply(items, funcItems.map(v => (v.col_type = funStyle) && v));\n        items.push({\n            col_type: \"line_blank\"\n        });\n    }\n    let rescod = {};\n    let marker = MY_PARAMS.marker;\n    if (isSearch) {\n        rescod = aliShareApi.getSearchListFile(searchKey, marker, order[0], order[1]);\n    } else {\n        rescod = aliShareApi.getListFile(fileId, marker, order[0], order[1]);\n    }\n    if (rescod.next_marker) {\n        setMarker(rescod.next_marker);\n    } else {\n        setMarker();\n    }\n\n    var conts = rescod.items;\n    //字幕匹配准备\n    let subExts = [\"vtt\", \"srt\", \"ass\"];\n    var zimulist = [];\n    conts.forEach((item) => {\n        if (subExts.includes(item.file_extension && item.file_extension.toLowerCase())) {\n            let name = item.name.replace('.' + item.file_extension, '');\n            zimulist.push({\n                ext: item.file_extension,\n                file_id: item.file_id,\n                name: name\n            });\n        }\n    });\n    //处理夸页匹配字幕\n    /*\n    let hasSub = zimulist.length > 0;\n    if (hasSub&&rescod.next_marker) {\n        if (zimulist.length > 4) {\n            setSubtitleCache(zimulist.slice(-4));\n        } else {\n            setSubtitleCache(zimulist);\n        }\n    }\n    let lastItem = conts.at(-1);\n    if (hasSub&&lastItem&&lastItem.category === \"video\") {\n        setVideoItemCache(conts.splice(conts.length-1,1));\n    }\n    if (MY_PAGE > 1) {\n        let subtitleCache = MY_PARAMS.subtitleCache || [];\n        zimulist = zimulist.concat(subtitleCache);\n        let videoItemCache = MY_PARAMS.videoItemCache || [];\n        conts = videoItemCache.concat(conts);\n        setSubtitleCache();\n        setVideoItemCache();\n    }*/\n    //简体优先\n    zimulist.sort((a, b) => (b.name.endsWith(\".sc\") || b.name.endsWith(\".chs\")) - (a.name.endsWith(\".sc\") || a.name.endsWith(\".chs\")));\n    //end\n    let titleHead = {\n        video: \"🎬\",\n        audio: \"🎵\",\n        doc: \"📑\",\n        image: \"🖼\",\n        zip: \"📦\",\n        folder: \"📂\"\n    };\n\n    function getHead(type, ext) {\n        let head = titleHead[type];\n        if (subExts.includes(ext)) {\n            head = \"🕸\";\n        }\n        return head || \"❓\";\n    }\n\n    function getPreviewPic(fileItem) {\n        if (fileItem.thumbnail) {\n            return $(\"https://empty?\" + fileItem.file_id).image((pic) => {\n                try {\n                    return fetch(pic, {\n                        inputStream: true\n                    });\n                } catch (e) {\n                    return null;\n                }\n            }, fileItem.thumbnail);\n        }\n    }\n    let folderStyle, fileStyle;\n    let filterType = [];\n    if (style === \"追剧\") {\n        folderStyle = \"avatar\";\n        fileStyle = \"movie_2\";\n        filterType.push(\"video\");\n        items.push({\n            title: \"““””\" + \"追剧模式只显示文件夹和视频\".small().fontcolor(\"grey\"),\n            url: \"hiker://empty\",\n            col_type: \"text_center_1\",\n            extra: {\n                lineVisible: false\n            }\n        });\n    } else if (style === \"看图\") {\n        folderStyle = \"avatar\";\n        fileStyle = \"card_pic_3\";\n        filterType.push(\"image\");\n        items.push({\n            title: \"““””\" + \"看图模式只显示文件夹和图片\".small().fontcolor(\"grey\"),\n            url: \"hiker://empty\",\n            col_type: \"text_center_1\",\n            extra: {\n                lineVisible: false\n            }\n        });\n    } else {\n        folderStyle = fileStyle = style;\n    }\n    let noSkipFile = !skipFile;\n    for (let i = 0; i < conts.length; i++) {\n        let fileItem = conts[i];\n        let cate = fileItem.category;\n        let desc = formatDate(fileItem.updated_at);\n        let pic_url = getIcon(fileItem.file_extension, fileItem.type);\n\n        if (fileItem.type === \"folder\") {\n            let title = (folderStyle === \"text_1\" ? titleHead.folder : \"\") + fileItem.name;\n            items.push({\n                title: title,\n                url: 'hiker://page/aliyun?page=fypage',\n                col_type: folderStyle,\n                desc: formatDate(fileItem.updated_at),\n                pic_url: pic_url,\n                extra: {\n                    shareId: shareId,\n                    shareToken: MY_PARAMS.shareToken,\n                    fileId: fileItem.file_id,\n                    sharePwd: sharePwd,\n                    pageTitle: fileItem.name,\n                    transfer: true,\n                    noPic: true,\n                    longClick: [{\n                        title: \"转存\",\n                        js: JSON.stringify(\"hiker://page/myaliyun#noHistory##noRecordHistory#?page=fypage\")\n                    }]\n                }\n            });\n        } else if (noSkipFile) {\n            if (filterType.length > 0 && !filterType.includes(cate)) {\n                continue;\n            }\n            let subtitle, cls, longc = [{\n                title: \"转存\",\n                js: JSON.stringify(\"hiker://page/myaliyun#noHistory##noRecordHistory#?page=fypage\")\n            }];\n            let title = fileItem.name;\n            let nameNotExt = fileItem.name.replace('.' + fileItem.file_extension, '');\n            if (subExts.includes(fileItem.file_extension)) {\n                longc.push({\n                    title: \"挂载字幕\",\n                    js: $.toString((zm) => {\n                        storage0.putMyVar('mountzimu', zm);\n                        return 'toast://挂载完成，当前字幕文件: ' + zm.name + '.' + zm.ext;\n                    }, {\n                        ext: fileItem.file_extension,\n                        file_id: fileItem.file_id,\n                        name: nameNotExt\n                    }),\n                });\n            }\n            if (cate === \"video\") {\n                if (zimulist.length) {\n                    subtitle = zimulist.find(v => v.name.includes(nameNotExt));\n                }\n                cls = \"playlist v\" + pageId;\n            }\n            if (fileStyle === \"text_1\") {\n                desc += \"\\t\\t\" + formatSize(fileItem.size);\n                title = getHead(cate, fileItem.file_extension) + title;\n            } else if ([\"video\", \"image\"].includes(cate)) {\n                pic_url = getPreviewPic(fileItem) || pic_url;\n            }\n            items.push({\n                title: title,\n                url: $(\"#noPre#\").lazyRule((shareId, sharePwd, shareToken, fileId, cate, subtitle) => {\n                    return $.require(\"hiker://page/alilazy\")(shareId, sharePwd, shareToken, fileId, cate, subtitle);\n                }, shareId, sharePwd, MY_PARAMS.shareToken, fileItem.file_id, cate, subtitle),\n                desc: desc,\n                pic_url: pic_url,\n                extra: {\n                    id: fileItem.file_id,\n                    transfer: true,\n                    shareInfo: {\n                        pageId: pageId,\n                        fileId: fileItem.file_id,\n                        shareId: shareId,\n                        shareToken: shareToken,\n                        sharePwd: sharePwd,\n                    },\n                    longClick: longc,\n                    cls: cls,\n                    //inheritTitle: false,\n                    pageTitle: fileItem.name\n                },\n                col_type: fileStyle\n            });\n        }\n    }\n    if (conts.length === 0) {\n        items.push({\n            col_type: \"text_center_1\",\n            url: \"hiker://empty\",\n            title: \"““””\" + \"~~~什么都没有了哦~~~\".fontcolor(\"Gray\"),\n            extra: {\n                lineVisible: false,\n            }\n        });\n    }\n}\n\nlet items = [];\ntry {\n    if (MY_PAGE > 1 && !MY_PARAMS.marker) {\n        items.push({\n            col_type: \"text_center_1\",\n            url: \"hiker://empty\",\n            title: \"““””\" + \"~~~什么都没有了哦~~~\".fontcolor(\"Gray\"),\n            extra: {\n                lineVisible: false,\n            }\n        });\n    } else {\n        load(items);\n    }\n} catch (e) {\n    if (e.name === \"AliError\") {\n        if (e.code === \"InvalidResource.SharePwd\") {\n            items.push({\n                title: \"请输入提取码\",\n                desc: sharePwd ? \"““提取码错误””\" : \"\",\n                url: $().input((MY_PARAMS) => {\n                    setPageParams(Object.assign({}, MY_PARAMS, {\n                        sharePwd: input\n                    }));\n                    refreshPage();\n                }, MY_PARAMS),\n                col_type: \"text_center_1\"\n            });\n        } else {\n            if (e.significance === 1) {\n                items.push({\n                    title: \"““””\" + e.message.big().big().fontcolor(\"red\"),\n                    url: \"hiker://empty\",\n                    col_type: 'text_center_1',\n                });\n            } else if (e.significance === 3) {\n                items.push({\n                    title: \"““””\" + e.message.big().fontcolor(\"green\"),\n                    url: \"hiker://empty\",\n                    col_type: 'text_center_1'\n                });\n            }\n        }\n\n    } else {\n        log(\"列表加载失败#\\n错误信息>\" + e.toString() + \"\\n错误行>\" + e.lineNumber);\n        items.push({\n            title: '欧欧，报错了。在刷新几次？或者更换文件夹。',\n            url: \"hiker://empty\",\n            desc: e.toString(),\n            col_type: 'text_center_1'\n        });\n        //throw e;\n    }\n}\nsaveMyPaCache();\nsetResult(items);"},{"col_type":"movie_3","name":"登录账号","path":"login","rule":"js:\nvar d = [];\nsetPageTitle(\"登录阿里云盘\");\nlet index = Number(getParam(\"index\", \"1\"));\nif (Number.isNaN(index)) {\n    index = 1;\n}\n\n\nfunction getQRCode() {\n    let json = fetch(\"https://passport.aliyundrive.com/newlogin/qrcode/generate.do?appName=aliyun_drive&fromSite=52&appName=aliyun_drive&appEntrance=web&isMobile=false&lang=zh_CN&returnUrl=&bizParams=&_bx-v=2.2.3\");\n    let qr = JSON.parse(json);\n    if (!openAppIntent('com.alicloud.databox', 'com.taobao.login4android.scan.QrScanActivity', {\n            \"key_scanParam\": json\n        })) {\n        createQRCode(qr.content.data.codeContent, false);\n    }\n    return qr;\n}\n\nfunction backHome(t, i) {\n    back(i);\n    toast(t);\n}\n\nfunction fromAppGetToken(qr) {\n    let qr = getQRCode();\n    if (!qr) return backHome(\"获取失败\");\n    let ckk = qr.content.data;\n    let body = {\n        ck: ckk.ck,\n        t: ckk.t + \"\",\n        appName: \"aliyun_drive\",\n        appEntrance: \"web\",\n        isMobile: false,\n        lang: \"zh_CN\",\n        navPlatform: \"MacIntel\",\n        returnUrl: \"\",\n        navlanguage: \"zh-CN\",\n        fromSite: 52,\n        bizParams: \"\"\n\n    };\n    /*\n     {\n        NEW: \"待扫描\",\n        CANCELED: \"取消\",\n        SCANED:\"已扫描\",\n        CANCELED: \"完成\"\n    }*/\n    let errorCount = 0;\n    for (let i = 0; i < 30; i++) {\n        try {\n            let result = JSON.parse(post(\"https://passport.aliyundrive.com/newlogin/qrcode/query.do?appName=aliyun_drive&fromSite=52&_bx-v=2.2.3\", {\n                body: body\n            }));\n            let qrCodeStatus = result.content.data.qrCodeStatus;\n\n            if (qrCodeStatus === \"CONFIRMED\") {\n                if (result.content.data.bizExt) {\n                    let info = JSON.parse(base64Decode(result.content.data.bizExt));\n                    let aliTokensFilepath = $.require(\"hiker://page/tokenPath\").aliTokensFilepath;\n                    let aliToken = {\n                        refresh_token: info.pds_login_result.refreshToken\n                    };\n                    writeFile(aliTokensFilepath, JSON.stringify(aliToken));\n                    addItemAfter(\"loginy\", {\n                        title: \"登录成功(点击返回)\",\n                        url: $(\"#noLoading#\").lazyRule(() => {\n                            back(false);\n                            return \"hiker://empty\";\n                        }),\n                        col_type: \"text_center_1\",\n                    });\n                    backHome(\"登录成功\", true);\n                } else {\n                    backHome(\"登录失败,请尝试其他的方法\");\n                }\n                return;\n            } else if (qrCodeStatus === \"CANCELED\") {\n                backHome(\"取消登录授权\");\n                return;\n            }\n            if ([\"NEW\", \"SCANED\"].includes(qrCodeStatus)) {\n                java.lang.Thread.sleep(2500);\n            } else {\n                backHome(\"超时\");\n                return;\n            }\n        } catch (e) {\n            errorCount++;\n            if (errorCount > 4) {\n                throw e;\n            }\n        }\n    }\n\n}\nif (index > -1) {\n    let loginUrls = [\"https://www.aliyundrive.com/sign\", \"https://auth.aliyundrive.com/v2/oauth/authorize?login_type=custom&response_type=code&redirect_uri=https%3A%2F%2Fwww.aliyundrive.com%2Fsign%2Fcallback&client_id=25dzX3vbYqktVxyX&state=%7B%22origin%22%3A%22*%22%7D#/login\"];\n    let url = loginUrls[index];\n    let isRefresh = !getParam(\"noRefresh\");\n    let aliTokensFilepath = $.require(\"tokenPath\").aliTokensFilepath;\n\n    var js = $.toString((isRefresh, aliTokensFilepath) => {\n        setInterval(() => {\n            var token = JSON.parse(localStorage.getItem('token'));\n            if (token && token.user_id) {\n                let token_url = aliTokensFilepath;\n                fy_bridge_app.writeFile(token_url, JSON.stringify(token));\n                localStorage.clear();\n                fy_bridge_app.back(isRefresh);\n                fy_bridge_app.toast('TOKEN获取成功，请勿泄漏个人隐私！！！');\n                return;\n            }\n        }, 300);\n    }, isRefresh, aliTokensFilepath);\n\n    d.push({\n        url: url,\n        col_type: 'x5_webview_single',\n        desc: '100%&&float',\n        extra: {\n            canBack: false,\n            js: js,\n            urlInterceptor: $.toString(() => true)\n        }\n    });\n    setResult(d);\n} else {\n    \n    d.push({\n        col_type: \"text_center_1\",\n        title: \"““””\" + \"等待授权...\".big().big(),\n        desc: \"如果升级了官方App，无法自动调起授权，请扫码登录\",\n        url: \"hiker://empty\",\n        extra: {\n            id: \"loginy\",\n        }\n    });\n    setResult(d);\n    try {\n        fromAppGetToken();\n    } catch (e) {\n        backHome(\"内部错误:\" + e.toString());\n    }\n}"},{"col_type":"movie_3","name":"阿里列表API","path":"AliApi","rule":"js:\n//@author LoyDgIk\nfunction AliError(errorCode, message, significance) {\n    let errorType = AliError.errorCodeMap.get(errorCode) || [];\n    this.code = errorCode;\n    this.message = errorType[0] || message || \"\";\n    this.name = \"AliError\";\n    this.significance = errorType[1] || significance || 1;\n}\nAliError.errorCodeMap = new Map([\n    [\"ShareLink.Cancelled\", [\"分享链接已失效\"]],\n    [\"ShareLink.Forbidden\", [\"违规资源已被封禁\"]],\n    [\"NotFound.ShareLink\", [\"不存在该链接请核对\"]],\n    [\"AccessTokenInvalid\", [\"访问令牌失效，请重新登陆\"]],\n    [\"ShareLinkTokenInvalid\", [\"分享令牌失效\"]],\n    [\"ParamFlowException\", [\"访问过于频繁，请稍后再试\", 3]]\n]);\n\nAliError.prototype = Object.assign(new Error(), {\n    constructor: AliError\n});\n\nfunction postApi(api, body, headers) {\n    let result = request('https://api.aliyundrive.com' + api, {\n        headers: Object.assign({\n            'Content-Type': 'application/json',\n        }, headers),\n        body: JSON.stringify(body),\n        method: 'POST'\n    });\n    result = JSON.parse(result);\n    if (result.code) {\n        throw new AliError(result.code, result.message);\n    }\n    return result;\n}\n\nfunction AliShareApi(shareId, sharePwd, shareToken, refreshCallBack) {\n    this.shareId = shareId;\n    this.sharePwd = sharePwd;\n    this.refreshCallBack = refreshCallBack || (() => void 0);\n    this.shareToken = shareToken || this.getShareToken();\n}\nObject.assign(AliShareApi.prototype, {\n    getShareToken() {\n        let result = postApi(\"/v2/share_link/get_share_token\", {\n            \"share_id\": this.shareId,\n            \"share_pwd\": this.sharePwd,\n        });\n        this.shareToken = result.share_token;\n        this.refreshCallBack(result.share_token, this);\n        return result.share_token;\n    },\n    postTokenApi(api, body, headers, isRetry) {\n        let result;\n        try {\n            result = postApi(api, body, Object.assign({\n                \"X-Share-Token\": this.shareToken || this.getShareToken()\n            }, headers));\n        } catch (e) {\n            if ((e.code === \"AccessTokenInvalid\" || e.code === \"ShareLinkTokenInvalid\") && !isRetry) {\n                this.getShareToken();\n                return this.postTokenApi(api, body, headers, true);\n            }\n            throw e;\n        }\n        return result;\n    },\n    getListFile(fileId, marker, orderBy, orderDirection) {\n        let result = this.postTokenApi(\"/adrive/v3/file/list\"/*\"/adrive/v2/file/list_by_share\"*/, {\n            \"share_id\": this.shareId,\n            \"parent_file_id\": fileId || \"root\",\n            \"limit\": 100,\n            \"image_thumbnail_process\": \"image/resize,w_160/format,jpeg\",\n            \"image_url_process\": \"image\\/resize,w_1920/format,jpeg\",\n            \"video_thumbnail_process\": \"video/snapshot,t_1000,f_jpg,ar_auto,w_300\",\n            \"order_by\": orderBy || \"name\",\n            \"order_direction\": orderDirection || \"ASC\",\n            \"marker\": marker\n        });\n        return result;\n    },\n    getShareInfo() {\n        let result = postApi(\"/adrive/v3/share_link/get_share_by_anonymous?share_id=\" + this.shareId, {\n            \"share_id\": this.shareId,\n        });\n        return result;\n    },\n    getSearchListFile(key, marker, orderBy, orderDirection) {\n        let result = this.postTokenApi(\"/recommend/v1/shareLink/search\", {\n            \"share_id\": this.shareId,\n            \"keyword\": key,\n            \"limit\": 100,\n            \"order_by\": orderBy + \" \" + orderDirection,\n            \"marker\": marker || undefined\n        });\n        if (Object.keys(result).length === 0) {\n            result.items = [];\n        }\n        return result;\n    }\n});\n$.exports = AliShareApi;"},{"col_type":"movie_3","name":"阿里播放API","path":"aliPlayApi","rule":"//@author LoyDgIk\n\nfunction AliAccessApi({\n    shareId,\n    sharePwd,\n    shareToken,\n    aliTokens,\n    openTokens,\n    openSuffix,\n    refreshShareCallBack,\n    refreshAccessCallBack,\n    refreshOpenCallBack\n}) {\n    this.openSuffix = openSuffix || \"\";\n    this.shareId = shareId;\n    this.sharePwd = sharePwd;\n    this.shareToken = shareToken;\n    this.refreshShareCallBack = refreshShareCallBack || (() => void 0);\n    this.refreshAccessCallBack = refreshAccessCallBack || (() => void 0);\n    this.refreshOpenCallBack = refreshOpenCallBack || (() => void 0);\n    this.aliTokens = aliTokens || {};\n    if (!this.aliTokens.refresh_token) {\n        throw new Error(\"未登陆\");\n    }\n    if (!this.aliTokens.access_token) {\n        this.refreshAccessToken();\n    }\n    this.defDriveId = this.aliTokens.resource_drive_id || this.aliTokens.default_drive_id;\n    this.reaccessTk = (this.aliTokens.token_type || \"Bearer\") + ' ' + this.aliTokens.access_token;\n    Object.defineProperty(this, \"shareToken\", {\n        get() {\n            return this._shareToken || this.getShareToken();\n        },\n        set(v) {\n            this._shareToken = v;\n        }\n    });\n    Object.defineProperty(this, \"openTools\", {\n        get() {\n            if (this._openTools) return this._openTools;\n            let OpenApiTools;\n            switch (getItem(\"openApiMode\", \"0\")) {\n                case \"1\":\n                    OpenApiTools = $.require(\"openApi_aliyundrive\" + this.openSuffix);\n                    break;\n                case \"2\":\n                    OpenApiTools = $.require(\"openApi_tvbox\" + this.openSuffix);\n                    break;\n                case \"3\":\n                    OpenApiTools = $.require(\"openApi_XBY\" + this.openSuffix);\n                    break;\n                case \"4\":\n                    OpenApiTools = $.require(\"openApi_tv\" + this.openSuffix);\n                    break;\n                case \"0\":\n                default:\n                    OpenApiTools = $.require(\"openApi_alist\" + this.openSuffix);\n            }\n            this._openTools = new OpenApiTools(this);\n            return this._openTools;\n        }\n    });\n    Object.defineProperty(this, \"openTokens\", {\n        get() {\n            if (this._openTokens) return this._openTokens;\n            this._openTokens = Object.assign({\n                'RefreshTokenOpen': '',\n                'AccessTokenOpen': '',\n                'BindRefreshToken': '',\n            }, openTokens);\n            if (openTokens !== null && !this._openTokens.AccessTokenOpen) {\n                this.refreshOpenToken();\n            }\n            return this._openTokens;\n        }\n    });\n}\nObject.assign(AliAccessApi.prototype, {\n    _openTools: void 0,\n    _openTokens: void 0,\n    _shareToken: void 0,\n    waitSleep(time) {\n        java.lang.Thread.sleep(time || 600);\n        return this;\n    },\n    postApi(api) {\n        return httpRequest.post(api.startsWith(\"http\") ? api : 'https://api.aliyundrive.com' + api).bodyToString(true).error((err) => {\n            throw err;\n        }).errorType((err, res) => {\n            let result = {};\n            try {\n                result = JSON.parse(res.body);\n            } catch (e) {\n                return err;\n            }\n            let rbody = (result.code ? result : (result && result.responses && result.responses[0] && result.responses[0].body)) || {};\n            if (rbody.code) {\n                let msg = rbody.display_message || rbody.message;\n                let error = new Error(api + \"=>\" + rbody.code + \":\" + msg);\n                error.code = rbody.code;\n                error.judgeMsg = msg;\n                return error;\n            }\n            return err;\n        });\n    },\n    setMyDrividType(isBackup) {\n        this.myDrividType = !!isBackup;\n        return this;\n    },\n    trySolve(e) {\n        if (e.code === \"ShareLinkTokenInvalid\" || e.code === \"InvalidParameterNotMatch.ShareId\") {\n            this.waitSleep(20).getShareToken();\n            return true;\n        } else if (e.code === \"AccessTokenInvalid\" || e.code === \"AccessTokenExpired\") {\n            this.waitSleep(20).refreshAccessToken();\n            return true;\n        } else if (e.code === \"ForbiddenNoPermission.File\" || (e.code === \"BadRequest\" && e.judgeMsg === \"仅可保存到转存空间\")) {\n            this.aliTokens.resource_drive_id = undefined;\n            this.waitSleep(20).refreshAccessToken();\n            return true;\n        }\n        return false;\n    },\n    tryOpenApiSolve(e) {\n        if (e.code === \"AccessTokenInvalid\" || e.code === \"AccessTokenExpired\") {\n            this.waitSleep(20).refreshOpenToken();\n            return true;\n        } else {\n            this.waitSleep(20).refreshAccessToken();\n            this.waitSleep(20).refreshOpenToken();\n            return true;\n        }\n        return false;\n    },\n    getShareToken() {\n        if (!this.shareId) return;\n        let result = this.postApi(\"/v2/share_link/get_share_token\").body({\n            \"share_id\": this.shareId,\n            \"share_pwd\": this.sharePwd,\n        }).start(true);\n        this.shareToken = result.share_token;\n        this.refreshShareCallBack(result.share_token, this);\n        return result.share_token;\n    },\n    refreshAccessToken() {\n        let result = this.postApi(\"https://auth.aliyundrive.com/v2/account/token\")\n            .body({\n                \"grant_type\": \"refresh_token\",\n                \"refresh_token\": this.aliTokens.refresh_token,\n            }).headers({\n                \"User-Agent\": PC_UA,\n                \"Referer\": \"https://www.aliyundrive.com/\"\n            }).error((e) => {\n                if (e.code === \"InvalidParameter.RefreshToken\") {\n                    e.message = \"#登陆过期请重新登陆#\\n\" + e.message;\n                    throw e;\n                }\n            }).start(true);\n        delete result.user_data;\n        let originDefdDriveId = this.aliTokens.default_drive_id;\n        this.aliTokens = Object.assign(this.aliTokens, result);\n        this.reaccessTk = this.aliTokens.token_type + ' ' + this.aliTokens.access_token;\n        try {\n            if ((originDefdDriveId !== this.aliTokens.default_drive_id) || this.aliTokens.resource_drive_id === undefined) {\n                let resource_drive_id = this.getUserInfo().resource_drive_id;\n                this.aliTokens.resource_drive_id = resource_drive_id;\n                if (resource_drive_id) {\n                    this.defDriveId = resource_drive_id;\n                } else {\n                    this.defDriveId = this.aliTokens.default_drive_id;\n                }\n            }\n        } catch (e) {\n            log(\"用户信息获取失败：\" + e.toString());\n        }\n        this.refreshAccessCallBack(result, this);\n        return this.aliTokens;\n    },\n    getUserInfo() {\n        let info = this.postApi(\"https://user.aliyundrive.com/v2/user/get\").headers({\n            \"User-Agent\": PC_UA,\n            \"authorization\": this.reaccessTk,\n            \"Referer\": \"https://www.aliyundrive.com/\"\n        }).errorWithRetry((e, _, http) => {\n            this.trySolve(e);\n            http.mergeHeadAndBody({\n                headers: {\n                    'authorization': this.reaccessTk\n                }\n            });\n            return true;\n        }).start(true);\n        return info;\n    },\n    cacheOpenToken(openResult) {\n        this.openTokens.RefreshTokenOpen = openResult.refresh_token;\n        this.openTokens.AccessTokenOpen = openResult.token_type + \" \" + openResult.access_token;\n        this.openTokens.BindRefreshToken = this.aliTokens.refresh_token;\n        this.refreshOpenCallBack(openResult, this);\n    },\n    refreshOpenToken() {\n        try {\n            let openResult;\n            if (this.openTokens.RefreshTokenOpen && this.openTokens.BindRefreshToken === this.aliTokens.refresh_token) {\n                openResult = this.openTools.refreshOpenToken() || {};\n            } else {\n                openResult = this.openTools.getOpenToken() || {};\n            }\n            if (openResult.refresh_token) {\n                this.cacheOpenToken(openResult);\n                return this.openTokens;\n            } else {\n                throw new Error(\"返回结果无Token\");\n            }\n        } catch (e) {\n            throw new Error(\"OpenToken获取失败:\" + e.toString());\n        }\n    },\n    _cloudFileOperate(body, cloudFileId, operateUrl) {\n        let result = this.postApi('https://api.aliyundrive.com/adrive/v2/batch').body({\n            \"requests\": [{\n                \"body\": body,\n                \"headers\": {\n                    \"Content-Type\": \"application/json\"\n                },\n                \"id\": cloudFileId || \"0\",\n                \"method\": \"POST\",\n                \"url\": operateUrl\n            }],\n            \"resource\": \"file\"\n        }).headers({\n            'User-Agent': PC_UA,\n            'Referer': 'https://www.aliyundrive.com/',\n            'authorization': this.reaccessTk,\n            //getAccessToken\n            'x-canary': 'client=web,app=share,version=v2.3.1',\n            'x-share-token': this.shareToken\n        }).errorWithRetry((e, _, http) => {\n            if (e.code === \"QuotaExhausted.Drive\") {\n                throw e;\n            }\n\n            if (!this.trySolve(e)) {\n                this.waitSleep(20).refreshAccessToken();\n            }\n            let body = http.options.body.requests[0].body;\n            if (body.drive_id) {\n                body.drive_id = this.getMyDrivid();\n            }\n            if (body.to_drive_id) {\n                body.to_drive_id = this.getMyDrivid();\n            }\n            http.mergeHeadAndBody({\n                headers: {\n                    'authorization': this.reaccessTk,\n                    'x-share-token': this.shareToken\n                }\n            });\n            return true;\n        }).start(true);\n        return result;\n    },\n    copyFileToCloudFile(fileId, parentFileId, retry) {\n        let result = this._cloudFileOperate({\n            \"file_id\": fileId,\n            \"share_id\": this.shareId,\n            \"auto_rename\": true,\n            \"to_parent_file_id\": parentFileId || \"root\",\n            \"to_drive_id\": this.getMyDrivid()\n        }, \"0\", \"/file/copy\");\n        let body = result && result.responses && result.responses[0] && result.responses[0].body || {};\n        if (!body.file_id && !retry) {\n            this.waitSleep(20).getShareToken();\n            this.waitSleep(20).refreshAccessToken();\n            return this.waitSleep(20).copyFileToCloudFile(fileId, parentFileId, true);\n        } else if (!body.file_id) {\n            let e = new Error(\"文件复制失败:\\n\" + JSON.stringify(result));\n            e.code = body.code;\n            throw e;\n        }\n        return result.responses[0].body.file_id;\n    },\n    openCloudFileToDownUrl(cloudFileId) {\n        let fileInfo = this.postApi('https://open.aliyundrive.com/adrive/v1.0/openFile/getDownloadUrl').body({\n            'file_id': cloudFileId,\n            'drive_id': this.getMyDrivid()\n        }).headers({\n            'User-Agent': PC_UA,\n            'Referer': 'https://www.aliyundrive.com/',\n            'authorization': this.openTokens.AccessTokenOpen\n        }).errorWithRetry(2, (e, _, http) => {\n            //this.waitSleep(30).trySolve(e);\n            this.waitSleep(30).tryOpenApiSolve(e);\n            http.mergeHeadAndBody({\n                body: {\n                    'drive_id': this.getMyDrivid(),\n                },\n                headers: {\n                    'authorization': this.openTokens.AccessTokenOpen\n                }\n            });\n            return true;\n        }).start(true);\n        if (!fileInfo.url || fileInfo.code) throw new Error(\"下载链接获取失败\\n\" + fileInfo.code + \":\" + fileInfo.message);\n        return fileInfo.url;\n    },\n    deleteeCloudFile(cloudFileId) {\n        let result = this._cloudFileOperate({\n            \"drive_id\": this.getMyDrivid(),\n            \"file_id\": cloudFileId\n        }, cloudFileId, \"/file/delete\");\n        return result;\n    },\n    getVideoCloudPreview(cloudFileId) {\n        let fileInfo = this.postApi('https://open.aliyundrive.com/adrive/v1.0/openFile/getVideoPreviewPlayInfo').body({\n            'file_id': cloudFileId,\n            'drive_id': this.getMyDrivid(),\n            \"category\": \"live_transcoding\",\n            \"template_id\": \"\",\n            \"get_subtitle_info\": true,\n            \"url_expire_sec\": 14400,\n            \"with_play_cursor\": true\n        }).headers({\n            'User-Agent': PC_UA,\n            'Referer': 'https://www.aliyundrive.com/',\n            'authorization': this.openTokens.AccessTokenOpen\n        }).errorWithRetry(2, (e, _, http) => {\n            //this.waitSleep(30).trySolve(e);\n            this.waitSleep(30).tryOpenApiSolve(e);\n            http.mergeHeadAndBody({\n                body: {\n                    'drive_id': this.getMyDrivid(),\n                },\n                headers: {\n                    'authorization': this.openTokens.AccessTokenOpen\n                }\n            });\n            return true;\n        }).start(true);\n        return fileInfo.video_preview_play_info.live_transcoding_task_list.reverse();\n    },\n    getAllVideoTemPlayUrl(fileId, onlyPreview) {\n        let cloudFileId = this.copyFileToCloudFile(fileId);\n        this.waitSleep(20);\n        let playUrl = onlyPreview ? undefined : this.openCloudFileToDownUrl(cloudFileId);\n        this.waitSleep(50);\n        let preview = this.getVideoCloudPreview(cloudFileId);\n        this.waitSleep(50);\n        try {\n            this.deleteeCloudFile(cloudFileId);\n        } catch (e) {\n            log(\"#文件删除失败#\\n错误信息>\" + e.toString() + \"\\n错误行>\" + e.lineNumber);\n        }\n        return {\n            origin: playUrl,\n            preview\n        };\n    },\n    getVideoTemPlayUrl(fileId) {\n        let cloudFileId = this.copyFileToCloudFile(fileId);\n        this.waitSleep(20);\n        let playUrl = this.openCloudFileToDownUrl(cloudFileId);\n        this.waitSleep(50);\n        try {\n            this.deleteeCloudFile(cloudFileId);\n        } catch (e) {\n            log(\"#文件删除失败#\\n错误信息>\" + e.toString() + \"\\n错误行>\" + e.lineNumber);\n        }\n        return playUrl;\n    },\n    getFileToDownUrl(fileId) {\n        let downloadInfo = this.postApi(\"/v2/file/get_share_link_download_url\").body({\n            \"expire_sec\": 600,\n            \"file_id\": fileId,\n            \"share_id\": this.shareId\n        }).headers({\n            \"X-Share-Token\": this.shareToken,\n            \"authorization\": this.aliTokens.access_token\n        }).errorWithRetry((e, _, http) => {\n            this.trySolve(e);\n            http.mergeHeadAndBody({\n                headers: {\n                    \"X-Share-Token\": this.shareToken,\n                    \"authorization\": this.aliTokens.access_token\n                }\n            });\n            return true;\n        }).start(true);\n        return downloadInfo.download_url;\n    },\n    \n    getSign() {\n        if (!this.aliTokens.device_id) {\n            this.waitSleep(20).refreshAccessToken();\n        }\n        let calculateNewSign = () => {\n            let sign = justTestSign(\"5dde4e1bdf9e4966b387ba58f4b3fdc3\", this.aliTokens.device_id, this.aliTokens.user_id).split(\"##\");\n            return {\n                signature: sign.at(0),\n                pubKey: sign.at(-1)\n            };\n        };\n        let newSign = calculateNewSign();\n        let result = this.postApi('/users/v1/users/device/create_session').body({\n            \"deviceName\": \"Edge浏览器\",\n            \"modelName\": \"Windows网页版\",\n            \"pubKey\": newSign.pubKey,\n        }).headers({\n            'User-Agent': PC_UA,\n            'Referer': 'https://www.aliyundrive.com',\n            'Authorization': this.reaccessTk,\n            'X-Share-Token': this.shareToken,\n            'x-device-id': this.aliTokens.device_id,\n            'x-signature': newSign.signature\n        }).errorWithRetry(3, (e, _, http) => {\n            if (e.message === \"x-device-id empty\") {\n                this.waitSleep(20).refreshAccessToken();\n            }\n            this.trySolve(e);\n            this.waitSleep(50);\n            newSign = calculateNewSign();\n            http.mergeHeadAndBody({\n                body: {\n                    \"pubKey\": newSign.pubKey\n                },\n                headers: {\n                    'Authorization': this.reaccessTk,\n                    'X-Share-Token': this.shareToken,\n                    'x-device-id': this.aliTokens.device_id,\n                    'x-signature': newSign.signature\n                }\n            });\n            return true;\n        }).error((err, res) => {\n            return {};\n        }).success((body) => {\n            return body;\n        }).start(true);\n        if (result.success) {\n            return newSign;\n        } else {\n            throw new Error(\"Sign获取失败，请重试。\\ncode:\" + (result.code || \"\") + \"\\nmessage:\" + (result.message || \"\"));\n        }\n    },\n    getShareVideoPreview(fileId) {\n        let sign = this.getSign();\n        let json = this.postApi('https://api.aliyundrive.com/v2/file/get_share_link_video_preview_play_info').body({\n            \"category\": \"live_transcoding\",\n            \"file_id\": fileId,\n            \"get_preview_url\": true,\n            \"share_id\": this.shareId,\n            \"template_id\": \"\",\n            \"get_subtitle_info\": true\n        }).headers({\n            'content-type': 'application/json;charset=UTF-8',\n            \"origin\": \"https://www.aliyundrive.com\",\n            \"referer\": \"https://www.aliyundrive.com/\",\n            \"user-agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.41\",\n            \"x-canary\": \"client=web,app=adrive,version=v3.1.0\",\n            \"x-share-token\": this.shareToken,\n            \"fileid\": this.aliTokens.user_id,\n            'Authorization': this.reaccessTk,\n            'x-device-id': this.aliTokens.device_id,\n            'x-signature': sign.signature\n        }).errorWithRetry((e, _, http) => {\n            this.trySolve(e);\n            http.mergeHeadAndBody({\n                headers: {\n                    'Authorization': this.reaccessTk,\n                    'X-share-token': this.shareToken,\n                    'x-device-id': this.aliTokens.device_id,\n                    'x-signature': sign.signature\n                }\n            });\n            return true;\n        }).start(true);\n        return json.video_preview_play_info.live_transcoding_task_list.reverse();\n    },\n    getMyDrivid() {\n        return (this.myDrividType ? this.aliTokens.default_drive_id : this.aliTokens.resource_drive_id) || this.defDriveId;\n    },\n    getListFile(fileId, marker, orderBy, orderDirection) {\n        let result = this.postApi(\"https://open.aliyundrive.com/adrive/v1.0/openFile/list\").body({\n            \"drive_id\": this.getMyDrivid(),\n            \"parent_file_id\": fileId || \"root\",\n            \"limit\": 100,\n            \"all\": true,\n            \"url_expire_sec\": 86400,\n            \"image_thumbnail_process\": \"image/resize,w_400/format,jpeg\",\n            \"image_url_process\": \"image/resize,w_1920/format,jpeg\",\n            \"video_thumbnail_process\": \"video/snapshot,t_1000,f_jpg,ar_auto,w_300\",\n            \"order_by\": orderBy || \"name\",\n            \"order_direction\": orderDirection || \"ASC\",\n            \"marker\": marker\n        }).headers({\n            'User-Agent': PC_UA,\n            'Referer': 'https://www.aliyundrive.com/',\n            'authorization': this.openTokens.AccessTokenOpen\n        }).errorWithRetry(2, (e, _, http) => {\n\n            this.waitSleep(30).tryOpenApiSolve(e);\n            http.mergeHeadAndBody({\n                body: {\n                    'drive_id': this.getMyDrivid(),\n                },\n                headers: {\n                    'authorization': this.openTokens.AccessTokenOpen\n                }\n            });\n            return true;\n        }).start(true);\n        return result;\n    },\n    getSearchListFile(key, marker, orderBy, orderDirection, mode) {\n        let type = \"\";\n        if (mode === 1) {\n            type = \"type=\\\"file\\\" and \";\n        } else if (mode === 2) {\n            type = \"type=\\\"folder\\\" and \";\n        }\n        let result = this.postApi(\"https://api.alipan.com/adrive/v3/file/search\").body({\n            \"drive_id\": this.getMyDrivid(),\n            \"query\": type + \"name match \" + JSON.stringify(key),\n            \"limit\": 100,\n            \"order_by\": orderBy + \" \" + orderDirection,\n            \"marker\": marker || undefined\n        }).headers({\n            'User-Agent': PC_UA,\n            'Referer': 'https://www.aliyundrive.com/',\n            'authorization': this.reaccessTk\n        }).errorWithRetry(2, (e, _, http) => {\n            this.waitSleep(20).refreshAccessToken();\n            //this.waitSleep(30).tryOpenApiSolve(e);\n            http.mergeHeadAndBody({\n                body: {\n                    'drive_id': this.getMyDrivid(),\n                },\n                headers: {\n                    'authorization': this.reaccessTk\n                }\n            });\n            return true;\n        }).start(true);\n        if (Object.keys(result).length === 0) {\n            result.items = [];\n        }\n        return result;\n    },\n    signInReward() {\n        let silData = this.postApi('https://member.aliyundrive.com/v1/activity/sign_in_list').body({\n            'grant_type': 'refresh_token',\n            'refresh_token': this.aliTokens.refresh_token\n        }).headers({\n            'Authorization': this.reaccessTk,\n            'Content-Type': 'application/json'\n        }).errorWithRetry((e, _, http) => {\n            this.trySolve(e);\n            http.mergeHeadAndBody({\n                headers: {\n                    'Authorization': this.reaccessTk,\n\n                },\n                body: {\n                    'refresh_token': this.aliTokens.refresh_token\n                }\n            });\n            return true;\n        }).start(true);\n        let day = silData.result.signInCount;\n        let isReward = silData.result.signInLogs[day - 1].isReward;\n        if (isReward) {\n            let reward = silData.result.signInLogs[day - 1].reward;\n            if (reward) {\n                let rewnotice = reward.notice;\n                return \"今天已经签到，请不要重复签到！\\n\" + rewnotice;\n            } else {\n                //没有奖励，只有幸运签名片\n                return \"今天已经签到，请不要重复签到！\\n今日好运签:\" + silData.result.blessing;\n            }\n        } else {\n            let sirData = this.postApi('https://member.aliyundrive.com/v1/activity/sign_in_reward').body({\n                \"signInDay\": day\n            }).headers({\n                'Authorization': this.reaccessTk,\n                'Content-Type': 'application/json'\n            }).start(true);\n            let reward = sirData.result;\n            if (reward) {\n                let msg = \"签到成功! 获得奖励:\" + reward.notice + \"(\" + reward.subNotice + \") 本月已连续签到:\" + day + \"天\";\n                return msg;\n            } else {\n                //没有奖励，只有幸运签名片\n                return \"签到成功！今日幸运签:\" + silData.result.blessing;\n            }\n        }\n    }\n});\n\nAliAccessApi.createDefault = function(shareId, sharePwd, shareToken, aliToken, openToken, MY_TITLE) {\n    const {\n        openTokensFilepath,\n        aliTokensFilepath\n    } = $.require(\"tokenPath\" + (MY_TITLE ? \"?rule=\" + MY_TITLE : \"\"));\n    if (!openToken && openToken !== null && fileExist(openTokensFilepath)) {\n        openToken = $.require(openTokensFilepath);\n    }\n    if (!aliToken && fileExist(aliTokensFilepath)) {\n        aliToken = $.require(aliTokensFilepath);\n    }\n    if (MY_TITLE) {\n        shareToken = getVar(MY_TITLE + \"@aliShareToken\", shareToken);\n    } else {\n        shareToken = getMyVar(\"aliShareToken\", shareToken);\n    }\n    return new AliAccessApi({\n        shareId,\n        sharePwd,\n        shareToken,\n        aliTokens: aliToken,\n        openTokens: openToken,\n        openSuffix: (MY_TITLE ? \"?rule=\" + MY_TITLE : \"\"),\n        refreshAccessCallBack(result, api) {\n            writeFile(aliTokensFilepath, JSON.stringify(api.aliTokens));\n        },\n        refreshOpenCallBack(result, api) {\n            writeFile(openTokensFilepath, JSON.stringify(api.openTokens));\n        },\n        refreshShareCallBack(result) {\n            if (MY_TITLE) {\n                shareToken = putVar(MY_TITLE + \"@\" + \"aliShareToken\", result);\n            } else {\n                shareToken = putMyVar(\"aliShareToken\", result);\n            }\n        }\n    });\n}\n$.exports = AliAccessApi;\n\nfunction httpRequest(url, options) {\n    this.retryCount = 0;\n    this.url = url;\n    this.options = Object.assign({}, options, {\n        withHeaders: true\n    });\n    this.errorCallback = (err, res) => {\n        throw err\n    };\n    this.errorCallbackWithRetry = (err, res, tryRestart) => false;\n    this.successCallback = (body, res) => body;\n    this.errorTypeCallback = (err, res) => err;\n    this.startRequest = fetch;\n    this._bodyToString = false;\n}\n\nObject.assign(httpRequest.prototype, {\n    bodyToString(flag) {\n        this._bodyToString = !!flag;\n        return this;\n    },\n    body(body) {\n        this.options.body = body || void 0;\n        return this;\n    },\n    setStartRequestFunc(func) {\n        this.startRequest = func;\n        return this;\n    },\n    headers(headers) {\n        this.options.headers = headers || void 0;\n        return this;\n    },\n    success(successCallback) {\n        if (typeof successCallback !== \"function\") return this;\n        this.successCallback = successCallback;\n        return this;\n    },\n    error(errorCallback) {\n        if (typeof errorCallback !== \"function\") return this;\n        this.errorCallback = errorCallback;\n        return this;\n    },\n    errorType(errorTypeCallback) {\n        if (typeof errorTypeCallback !== \"function\") return this;\n        this.errorTypeCallback = errorTypeCallback;\n        return this;\n    },\n    errorWithRetry(retryCount, errorCallbackWithRetry) {\n        if (typeof retryCount === \"function\" && typeof errorCallbackWithRetry === \"undefined\") {\n            errorCallbackWithRetry = retryCount;\n            retryCount = 1;\n        }\n        if (typeof errorCallbackWithRetry !== \"function\") {\n            return this;\n        }\n        this.retryCount = Number(retryCount);\n        this.errorCallbackWithRetry = errorCallbackWithRetry;\n        return this;\n    },\n    start(toJson) {\n        let options = Object.assign({}, this.options);\n        if (typeof options.body === \"object\" && this._bodyToString) {\n            options.body = JSON.stringify(options.body);\n        }\n        var res = JSON.parse(this.startRequest(this.url, options));\n        try {\n            if (res.statusCode >= 200 && res.statusCode <= 300) {\n                let body = res.body;\n                if (toJson) {\n                    body = JSON.parse(body);\n                }\n                return this.successCallback(body, res);\n            } else {\n                throw new Error(String(res.statusCode));\n            }\n        } catch (err) {\n            try {\n                err = this.errorTypeCallback(err, res);\n            } catch (e) {\n\n            }\n            if (this.retryCount) {\n\n                let tryResult = this.errorCallbackWithRetry(err, res, this);\n                if (tryResult) {\n                    this.retryCount--;\n                    return this.start(toJson);\n                } else {\n                    this.retryCount = 0;\n                    return this.errorCallback(err, res);\n                }\n            } else {\n                return this.errorCallback(err, res);\n            }\n        }\n    },\n    setOptions(options) {\n        this.options = Object.assign({}, options, {\n            withHeaders: true\n        });\n        return this;\n    },\n    mergeHeadAndBody(options) {\n        options = options || {};\n        this.options.headers = Object.assign(this.options.headers, options.headers);\n        if (typeof this.options.body === \"object\" && typeof options.body === \"object\") {\n            this.options.body = Object.assign(this.options.body, options.body);\n        }\n        return this;\n    }\n});\n\nObject.assign(httpRequest, {\n    fetch(url, options) {\n        return new httpRequest(url, options);\n    },\n    post(url, options) {\n        return new httpRequest(url, options).setStartRequestFunc(post);\n    },\n    request(url, options) {\n        return new httpRequest(url, options).setStartRequestFunc(request);\n    },\n    postRequest(url, options) {\n        return new httpRequest(url, options).setStartRequestFunc(postRequest);\n    },\n    fetchCookie(url, options) {\n        return new httpRequest(url, options).setStartRequestFunc(fetchCookie);\n    }\n});"},{"col_type":"movie_3","name":"Token路径","path":"tokenPath","rule":"$.exports={\n    \"openTokensFilepath\": \"hiker://files/rules/LoyDgIk/aliOpenToken.json\",\n    \"aliTokensFilepath\": \"hiker://files/rules/LoyDgIk/aliToken.json\"\n}"},{"col_type":"movie_3","name":"弹弹play工具","path":"danmu","rule":"js:\nlet basicUrl = \"https://api.dandanplay.net/\";\nlet sevePath = \"hiker://files/cache/danmu/\";\n\nfunction getRefreshRate() {\n    const Context = android.content.Context;\n    const Display = android.view.Display;\n    const WindowManager = android.view.WindowManager;\n    const context = com.example.hikerview.ui.Application().getContext();\n\n    let windowManager = context.getSystemService(Context.WINDOW_SERVICE);\n\n    let display = windowManager.getDefaultDisplay();\n\n    let refreshRate = display.getRefreshRate();\n    return refreshRate;\n}\n$.exports.getDanMu = function(key) {\n    return JSON.parse(request(basicUrl + \"api/v2/search/episodes?anime=\" + encodeURIComponent(decodeURIComponent(key))));\n}\n\nfunction encodeHtml(s) {\n    let REGX_HTML_ENCODE = /“|&|’|\\u003C|>|[\\x00-\\x20]|[\\x7F-\\xFF]|[\\u0100-\\u2700]/g;\n   return s.replace(REGX_HTML_ENCODE, function($0) {\n        var c = $0.charCodeAt(0),\n            r = [\"&#\"];\n        c = (c == 0x20) ? 0xA0 : c;\n        r.push(c);\n        r.push(\";\");\n        return r.join(\"\");\n    });\n}\n\n\n\n//0默认 1简体 2繁体\n$.exports.downloadDanMu = function(episodeId, name) {\n    let danMuData = JSON.parse(request(buildUrl(basicUrl + \"api/v2/comment/\" + episodeId, {\n        withRelated: true,\n        chConvert: 1\n    })));\n    let dMcontext = \"\";\n    //let fpsm = getRefreshRate()/60*0.95;\n    //danMuData.comments.sort((v,x)=>v.p.split(\",\")[0]-x.p.split(\",\")[0]);\n    for (let comment of danMuData.comments) {\n        //dMcontext += `<d p=\"${Math.round(timepoint)},${ct},${size},${color},0\">${content}</d>\\n`;\n        let paramText = comment.p;\n        let commentText = comment.m;\n        if (paramText == null || commentText == null) continue;\n        let params = paramText.split(\",\");\n        let paramsT = [];\n        for (let i in params) {\n            /*if (i == 0) {\n                paramsT.push(parseInt(params[i]));\n                continue;\n            }*/\n            if (i == 2) {\n                paramsT.push(\"25\");\n            }\n            if (i == 3) {\n                //颜色值为0时，默认设置为白色\n                if (params[i] == \"0\" || params[i] == \"-1\") {\n                    paramsT.push(\"16777215\");\n                    continue\n                }\n                break;\n            }\n            paramsT.push(params[i]);\n        }\n        paramsT.push(\"0\");\n        let times=parseInt(params[0]/60)+\":\"+parseInt(params[0]%60);\n        dMcontext += `<d p=\"${paramsT.join(',')}\">${encodeHtml(commentText)+\"#\"+times}</d>\\n`;\n    }\n    if (!dMcontext) return;\n    dMcontext = `<?xml version=\"1.0\" encoding=\"UTF-8\"?><i>\\n${dMcontext}</i>`;\n    let path = sevePath + name.replace(/\\//g, \"_\") + \"_\" + episodeId + \".xml\";\n    writeFile(path, dMcontext);\n    return path;\n}\n$.exports.getLocalDanMu = function(episodeId, name) {\n    let path = sevePath + name.replace(/\\//g, \"_\") + \"_\" + episodeId + \".xml\";\n    if (fileExist(path)) {\n        return path;\n    }\n}"},{"col_type":"movie_3","name":"弹幕搜索&加载","path":"loadDm","rule":"js:\nlet d = [];\nlet onlyDownload = !!MY_PARAMS.onlyDownload;\nif (onlyDownload) {\n    addListener(\"onClose\", () => {\n        refreshPage(false);\n    });\n}\nd.push({\n    col_type: \"rich_text\",\n    title: \"<font color='Gray'>❗关于<br><small> 内置搜索P数据来源于[弹弹play]</small></font>\"\n});\nd.push({\n    col_type: \"line\"\n});\nlet key = MY_PARAMS.name || getMyVar(\"s\") || decodeURIComponent(getParam(\"title\", \"\")) || \"\";\nd.push({\n    title: \"内置搜索P\",\n    url: $(key, \"请搜索番剧名称\").input((MY_PARAMS) => {\n        setPageParams(Object.assign(MY_PARAMS, {\n            name: input,\n        }));\n        refreshPage();\n    }, MY_PARAMS),\n    col_type: \"text_3\"\n});\nd.push({\n    title: \"内置搜索T\",\n    url: $(key, \"格式：搜索关键词[回车]集数\").input((onlyDownload) => {\n        try {\n            showLoading(\"正在搜索并下载...\");\n            let [name, pos] = input.split(\"\\n\");\n            if (!name || !pos) {\n                throw \"格式错误\";\n            }\n            let urlInfo = fetch(buildUrl(\"https://azure.leuse.top/searchdm\", {\n                params: {\n                    \"name\": name,\n                    \"pos\": pos\n                }\n            }));\n            urlInfo = JSON.parse(urlInfo);\n            if (!urlInfo.url) throw \"暂时没有找到该视频的弹幕\";\n            let xml = fetch(buildUrl(\"https://azure.leuse.top/danmu\", {\n                params: urlInfo\n            }));\n            hideLoading();\n            if (!xml) {\n                throw \"还没有弹幕哟~\";\n            }\n            let path = \"hiker://files/cache/danmu/\" + urlInfo.platform + \"_\" + name + \"_\" + pos + \".xml\";\n            writeFile(path, '<?xml version=\"1.0\" encoding=\"UTF-8\"?>\\n' + xml);\n            if (onlyDownload) return \"toast://下载完成\";\n            refreshVideoUrl({\n                danmu: path\n            });\n            back(false);\n            return \"toast://加载完成\";\n        } catch (e) {\n            hideLoading();\n            return \"toast://\" + e.toString();\n        }\n    }, onlyDownload),\n    col_type: \"text_3\"\n});\nd.push({\n    title: \"dm盒子搜索\",\n    url: $(\"#noLoading#\").lazyRule((key, onlyDownload) => {\n        let dm = getVar(\"dm_share\");\n        if (dm && !onlyDownload) {\n            clearVar(\"dm_share\");\n            refreshVideoUrl({\n                danmu: dm\n            });\n            back(false);\n            return \"toast://加载完成\";\n        } else {\n            return $(key, \"dm盒子搜索\").input(() => {\n                toast(\"下载完成弹幕后请重新点击搜索\");\n                return \"hiker://search?rule=dm盒子&s=\" + input;\n            });\n        }\n    }, key, onlyDownload),\n    col_type: \"text_3\"\n});\n\nfunction search(d, name) {\n    const danmu = $.require(\"danmu\");\n    d.push({\n        col_type: \"line\"\n    });\n    d.push({\n        col_type: \"line\"\n    });\n    d.push({\n        col_type: \"line\"\n    });\n    let dmList = danmu.getDanMu(name);\n\n    for (let anime of dmList.animes) {\n        d.push({\n            title: anime.animeTitle,\n            desc: anime.typeDescription,\n            col_type: \"avatar\",\n            url: $(\"\", \"请输入下载范围(1,\" + anime.episodes.length + \")\").input((animeTitle, episodes) => {\n                let [a, b] = input.split(/,|，/);\n                a = Number(a), b = Number(b);\n                if (Number.isNaN(a) || Number.isNaN(b)) {\n                    return \"toast://请按格式输入数字\";\n                }\n                if (a < 1 || b > episodes.length) {\n                    return \"toast://请输入规定范围内的数字\";\n                }\n                const danmu = $.require(\"danmu\");\n                try {\n                    for (let i = a - 1, j = 1; i < b; i++, j++) {\n                        let episode = episodes[i];\n                        let dmTitle = animeTitle + \"_\" + episode.episodeTitle;\n                        showLoading(\"正在下载：\" + episode.episodeTitle + \"\\t(\" + j + \"/\" + (b - a + 1) + \")\");\n                        danmu.downloadDanMu(episode.episodeId, dmTitle);\n                    }\n                } catch (e) {\n                    log(e.toString());\n                    hideLoading();\n                    return \"toast://哦哦下载失败...\";\n                }\n                hideLoading();\n                return \"toast://下载完成\";\n            }, anime.animeTitle, anime.episodes),\n            pic_url: \"https://hikerfans.com/tubiao/movie/14.svg\"\n        });\n        d.push({\n            col_type: \"line\"\n        });\n        for (let episode of anime.episodes) {\n            let dmTitle = anime.animeTitle + \"_\" + episode.episodeTitle;\n            d.push({\n                title: episode.episodeTitle,\n                url: $(episode.episodeId).lazyRule((url, title, onlyDownload) => {\n                    const danmu = $.require(\"danmu\");\n                    let path = danmu.getLocalDanMu(input, title) || danmu.downloadDanMu(input, title);\n                    if (onlyDownload) return \"toast://下载完成\";\n                    let danmuText = fetch(path);\n                    if (!danmuText) return \"toast://还没有弹幕哟~\";\n                    refreshVideoUrl({\n                        danmu: path\n                    });\n                    back(false);\n                    return \"toast://加载完成\";\n                }, MY_PARAMS.durl, dmTitle, onlyDownload),\n                col_type: \"text_1\",\n                extra: {\n                    longClick: [{\n                        title: \"强制下载\",\n                        js: $.toString((episodeTitle, episodeId) => {\n                            showLoading(\"请等待\");\n                            const danmu = $.require(\"danmu\");\n                            danmu.downloadDanMu(episodeId, episodeTitle);\n                            hideLoading();\n                            return \"toast://重新下载完成，单击挂载。\";\n                        }, dmTitle, episode.episodeId)\n                    }]\n                }\n            });\n        }\n        d.push({\n            col_type: \"line_blank\"\n        });\n    }\n    if (!dmList.animes.length) {\n        d.push({\n            title: \"没有找到与[\" + name + \"]相关的弹幕\",\n            url: \"hiker://empty\",\n            desc: \"搜不到怎么办？\\n检查名称是否正确；可以尝试删除部分限定词，如第一季等；而且只能搜索番剧哦！其他弹幕可用dm盒子。\",\n            col_type: \"text_center_1\"\n        });\n    }\n}\nlet name = getParam(\"name\", MY_PARAMS.name);\nif (name) {\n    try {\n        search(d, name);\n    } catch (e) {\n        d.push({\n            title: \"““ERROR””\",\n            desc: e.toString(),\n            col_type: \"text_1\"\n        });\n    }\n}\nsetResult(d);"},{"col_type":"movie_3","name":"公开工具","path":"aliUtil","rule":"//提供给规则使用的常用函数\n$.exports = {\n    checkali(realurl) {\n        try {\n            if (realurl.includes(\"com/s/\") && realurl != \"\") {\n                let shareId = realurl.split(\"?\")[0].split(\"/\")[4];\n                let share = fetch(\"https://api.aliyundrive.com/adrive/v3/share_link/get_share_by_anonymous\", {\n                    headers: {\n                        'content-type': 'application/json',\n                        \"User-Agent\": PC_UA,\n                        \"Referer\": \"https://www.aliyundrive.com/\"\n                    },\n                    body: {\n                        \"share_id\": shareId\n                    },\n                    method: 'POST'\n                });\n                if (share.includes(\"share_link is\") || share.includes(\"share_link cannot\")) return false;\n            }\n        } catch (e) {}\n        return true;\n    },\n    bytesToSize(size) {\n        if (!size) {\n            return '0';\n        }\n        const units = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n        let i = 0;\n        while (size >= 1024) {\n            size /= 1024;\n            i++;\n        }\n        size = i ? Number(size.toFixed(2)) : size;\n        return `${size} ${units[i]}`;\n    },\n    getCryptoJS() {\n        if (typeof CryptoJS === \"undefined\") {\n            eval(getCryptoJS());\n            return CryptoJS;\n        }\n        return CryptoJS;\n    },\n    matchAliUrl(text, isG) {\n        return $.require(\"alitest\").matchAliUrl(text, isG);\n    },\n    getIPv4Address() {\n        const NetworkInterface = java.net.NetworkInterface;\n        try {\n            for (let en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) {\n                let intf = en.nextElement();\n                for (let enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements();) {\n                    let inetAddress = enumIpAddr.nextElement();\n                    if (!inetAddress.isLoopbackAddress() && inetAddress instanceof java.net.Inet4Address) {\n                        return String(inetAddress.getHostAddress());\n                    }\n                }\n            }\n        } catch (ex) {\n            log(ex.toString());\n        }\n        return \"0.0.0.0\";\n    }\n}"},{"col_type":"movie_3","name":"弹幕批量挂载","path":"dmMount","rule":"js:\nlet d = [];\naddListener(\"onClose\", () => clearMyVar(\"dllastTime\"));\nsetPageTitle(\"弹幕挂载:\"+(MY_PARAMS.folderName||\"?\"));\nd.push({\n    title: \"清空挂载列表\",\n    url: $(\"#noLoading#\").lazyRule(() => {\n        clearMyVar(\"dmlist\");\n        refreshPage(false);\n        return \"hiker://empty\";\n    }),\n    col_type: \"text_3\",\n});\nif(!MY_PARAMS.automaticadd){\n    MY_PARAMS.automaticadd = getItem(\"automaticadd\",\"1\");\n    setPageParams(MY_PARAMS);\n}\nd.push({\n    title: \"检测新增:\"+[\"关闭\",\"开启\"][MY_PARAMS.automaticadd||\"0\"],\n    url: $(\"#noLoading#\").lazyRule((v) => {\n       setItem(\"automaticadd\", v.automaticadd===\"1\"?\"0\":\"1\");\n       v.automaticadd = undefined;\n       setPageParams(v);\n       refreshPage(false);\n       return \"hiker://empty\";\n    }, MY_PARAMS),\n    col_type: \"text_3\",\n});\nd.push({\n    title: \"下载弹幕\",\n    col_type: \"text_3\",\n    url: \"hiker://page/loadDm#noHistory##noRecordHistory#\",\n    extra: {\n        onlyDownload: true,\n        name: MY_PARAMS.name||decodeURIComponent(getParam(\"name\",\"\"))\n    }\n});\nd.push({\n    col_type: \"line_blank\"\n});\nd.push({\n    title: \"““””\" + \"已挂载\".big(),\n    url: $(\"#noLoading#\").lazyRule(() => {\n        let dmlist = storage0.getMyVar(\"dmlist\", []);\n        let FileSorting = $.require(\"FileSorting\");\n        dmlist.sort((a, b) => FileSorting.nameCompare(a, b));\n        storage0.putMyVar(\"dmlist\", dmlist);\n        refreshPage(false);\n        return \"toast://排序完成\";\n    }),\n    col_type: \"text_center_1\"\n});\nlet file = $.require(\"https://hikerfans.com/weisyr/js/file.js?v=1\");\nlet dmlist = storage0.getMyVar(\"dmlist\", []);\n\nfor (let i = 0; i < dmlist.length; i++) {\n    let dmname = dmlist[i];\n    d.push({\n        title: \"[\" + (i + 1) + \"]\\t\" + dmname,\n        url: $(\"#noLoading#\").lazyRule((i) => {\n            let dmlist = storage0.getMyVar(\"dmlist\", []);\n            dmlist.splice(i, 1);\n            storage0.putMyVar(\"dmlist\", dmlist);\n            refreshPage(false);\n            return \"hiker://empty\";\n        }, i),\n        col_type: \"text_1\"\n    });\n}\nd.push({\n    col_type: \"line_blank\"\n});\nd.push({\n    title: \"““””\" + \"本地未挂载\".big(),\n    url: $(\"是否清除所有本地弹幕文件?\\n(弹幕文件每三天会自动清除)\").confirm(() => {\n        let file = $.require(\"https://hikerfans.com/weisyr/js/file.js?v=1\");\n        file.deleteFiles(getPath(\"hiker://files/cache/danmu/\").slice(7));\n        clearMyVar(\"dmlist\");\n        refreshPage(false);\n        return \"toast://已删除\";\n    }),\n    col_type: \"text_center_1\"\n});\nlet dmListPath = getPath(\"hiker://files/cache/danmu/\").slice(7);\nlet fileList = file.getFilePath(dmListPath, \"file\", \".xml\");\nlet lastTime = 0;\n\nfor (let i = 0; i < fileList.length; i++) {\n    let dmfile = fileList[i];\n    lastTime = Math.max(lastTime, dmfile.lastModified);\n    if (dmlist.includes(dmfile.name)) continue;\n    d.push({\n        title: dmfile.name,\n        url: $(\"#noLoading#\").lazyRule((name) => {\n            let dmlist = storage0.getMyVar(\"dmlist\", []);\n            if (!dmlist.includes(name)) {\n                dmlist.push(name);\n            }\n            storage0.putMyVar(\"dmlist\", dmlist);\n            refreshPage(false);\n            return \"hiker://empty\";\n        }, dmfile.name),\n        col_type: \"text_1\"\n    });\n}\nlet lastRecord = Number(getMyVar(\"dllastTime\", \"-1\"));\n\nif (MY_PARAMS.automaticadd===\"1\"&&lastRecord!=-1&&lastRecord < lastTime) {\n    confirm({\n        title: \"新弹幕文件\",\n        content: \"检查到新下载的弹幕是否全部挂载？\",\n        confirm: $.toString((lastRecord, dmListPath) => {\n            let file = $.require(\"https://hikerfans.com/weisyr/js/file.js?v=1\");\n            let fileList = file.getFilePath(dmListPath, \"file\", \".xml\");\n            let dmlist = storage0.getMyVar(\"dmlist\", []);\n            fileList.forEach(v => {\n                if (!dmlist.includes(v.name)&&v.lastModified > lastRecord) {\n                    dmlist.push(v.name);\n                }\n            });\n            storage0.putMyVar(\"dmlist\", dmlist);\n            refreshPage(false);\n            return \"toast://挂载成功。\";\n        }, lastRecord, dmListPath),\n    });\n}\nif(lastTime>=0){\n    putMyVar(\"dllastTime\", \"\" + lastTime);\n}\nsetResult(d);"},{"col_type":"movie_3","name":"主页处理","path":"Main","rule":"if (getItem(\"first\") == MY_RULE.version) {\n    $.require(\"sou\");\n} else if (MY_PAGE === 1) {\n    let d = []\n    let time = getItem(\"first\", \"\") ? 6 : 20;\n    let id = Date.now();\n    let subPass = \"海阔视界规则分享，当前分享的是：合集规则订阅￥home_sub￥云盘君.简@@http://hiker.nokia.press/hikerule/rulelist.json?id=6591&debug=true\";\n    let content = `\n    1. 本小程序所有代码全部开源，且本规则为学习目的，请于导入24小时内删除！！！\n    2. 本小程序<b>完全免费</b>，如果你是付费购买的恭喜你被骗了。\n    当然如果有能力想鼓励作者的可以${\"支持一下\".link(\"hiker://page/Donate.v#noHistory##noRecordHistory#\")}</a>(<small>点击可进入捐赠，可在主页菜单进入</small>)。\n    3. 本小程序是在原版「云盘君」的基础进行的二次修改，请支持原版。\n    4. 请「云盘君.简」的二次修改尊重一下原版，谢谢。\n    \n    <b>开始使用本规则即代表遵守规则条例</b>\n    当前版本：${MY_RULE.version}\n    如果你想保持最新版请${\"订阅此规则\".link(\"rule://\" + base64Encode(subPass))}\n    `;\n    let updateInfo = \"修复阿里云盘tv接口\";\n    \n    d.push({\n        title: \"““””<strong>使用前须知</strong>\".big(),\n        col_type: \"text_center_1\",\n        url: \"hiker://empty\",\n        extra: {\n            lineVisible: false\n        }\n    });\n    d.push({\n        title: content.trim().replace(/\\n\\s*?/g, \"<br>\"),\n        \"col_type\": \"rich_text\"\n    }, {\n        col_type: \"line\"\n    }, {\n        title: time + \"秒后继续\",\n        url: \"toast://请认真阅读以上内容\",\n        col_type: \"text_center_1\",\n        extra: {\n            id: id + \"timer\"\n        }\n    });\n    if (updateInfo) {\n        confirm({\n            title: \"更新内容\",\n            content: updateInfo,\n            confirm(){},\n            cancel(){}\n        });\n    }\n    setResult(d);\n    while (time != 0) {\n        java.lang.Thread.sleep(1000);\n        time -= 1;\n        updateItem(id + \"timer\", {\n            title: time + \"秒后继续\"\n        });\n    }\n    updateItem(id + \"timer\", {\n        title: \"““我同意以上要求””\",\n        url: $(\"#noLoading#\").lazyRule((v) => {\n            setItem(\"first\", String(v));\n            refreshPage();\n            return \"toast://感谢您的理解\";\n        }, MY_RULE.version),\n        col_type: \"text_center_1\"\n    });\n}"},{"col_type":"movie_3","name":"捐赠","path":"Donate.v","rule":"js:\nlet d = [];\nsetPageTitle(\"捐赠/支持\");\nd.push({\n    title: \"捐赠/支持\",\n    desc: \"这个捐赠不能为你带来特权，但您的支持是我更新创作的动力。\",\n    col_type: \"text_center_1\",\n    url: \"toast://感谢您的支持\"\n});\nd.push({\n    col_type: \"pic_1_full\",\n    url: \"https://gitee.com/LoyDgIk/LoyDgIk_Rule/raw/master/67d8f0187f0186c1.png\",\n    pic_url: \"https://gitee.com/LoyDgIk/LoyDgIk_Rule/raw/master/67d8f0187f0186c1.png\"\n});\nd.push({\n    col_type: \"text_center_1\",\n    title: \"““””\" + \"图片加载缓慢请稍等\".small().fontcolor(\"Gray\"),\n    url: \"hiker://empty\",\n    extra: {\n        lineVisible: false\n    }\n});\nsetResult(d);"},{"col_type":"movie_3","name":"TVBOX推送","path":"tvboxPush","rule":"js:\n(function() {\n    let d = [];\n    const {\n        pageId,\n        shareId,\n        folderName,\n        fileId\n    } = MY_PARAMS;\n    setPageTitle(\"TVBOX推送:\" + folderName);\n    const {\n        aliTokensFilepath\n    } = $.require(\"tokenPath\");\n    let refreshToken = \"\";\n    if (!fileExist(aliTokensFilepath)) {\n        toast(\"请先登陆登录账号\");\n        back(false);\n        return;\n    } else {\n        refreshToken = $.require(aliTokensFilepath).refresh_token;\n    }\n\n    function getPush(name, url) {\n        let push = {\n            \"share_id\": shareId,\n            \"refresh_token\": refreshToken,\n            \"name\": name,\n            \"url\": url\n        };\n        return \"hiker://page/push#noHistory##noRecordHistory#?rule=XYQ推送&pushurl=\" + encodeURIComponent(JSON.stringify(push));\n    }\n    d.push({\n        title: \"推送阿里分享链接\",\n        url: \"hiker://page/push#noHistory##noRecordHistory#?rule=XYQ推送&pushurl=\" + encodeURIComponent(\"https://www.aliyundrive.com/s/\" + shareId + (fileId ? \"/folder/\" + fileId : \"\")),\n        col_type: \"text_2\",\n        extra: {\n            inheritTitle: false\n        }\n    });\n    let all = {\n        title: \"推送全部已加载视频\",\n        col_type: \"text_2\",\n        url: \"hiker://empty\",\n        extra: {\n            inheritTitle: false\n        }\n    }\n    d.push(all);\n    let allUrls = [];\n    let list = findItemsByCls(\"v\" + pageId);\n    if (!Array.isArray(list) || list.length === 0) {\n        /*toast(\"还没有加载完成的视频\");\n        back(false);\n        return;*/\n        d.push({\n            title: \"““””\" + \"~~~还木有视频哦~~~\".fontcolor(\"grey\"),\n            col_type: \"text_center_1\",\n            url: \"hiker://empty\",\n            extra: {\n                lineVisible: false\n            }\n        });\n        all.url = \"toast://没有视频无法推送\";\n    } else {\n        list.forEach(v => {\n            v.col_type = v.type;\n            let name = v.extra.pageTitle;\n            let url = name.replace(/\\#/g, '_').replace(/\\$/g, '_') + \"$video|\" + v.extra.id;\n            allUrls.push(url);\n            v.url = getPush(name, url);\n            v.extra.cls = v.extra.id = undefined;\n            d.push(v);\n        });\n        all.url = getPush(folderName, allUrls.join(\"#\"));\n    }\n    setResult(d);\n})();"},{"col_type":"movie_3","name":"封面搜索","path":"frontCover","rule":"js:\nlet d = [];\nlet key = getMyVar(\"frontcoverkey\", \"\");\nd.push({\n    title: \"搜索\",\n    col_type: \"input\",\n    url: $.toString(() => {\n        putMyVar(\"frontcoverkey\", input.trim());\n        refreshPage(false);\n    }),\n    extra: {\n        defaultValue: key || getMyVar(\"s\", \"\")\n    }\n});\nif (key) {\n    let r = request('https://m.douban.com/search/?query=' + encodeURIComponent(key))\n    let list = pdfa(r, \".search-results&&img\");\n    for (let it of list) {\n        let pic = pdfh(it, \"img&&src\");\n        d.push({\n            pic_url: pic,\n            url: $(\"#noLoading#\").lazyRule((pic) => {\n                putMyVar(\"frontcoverpic\", pic);\n                back(false);\n                return \"toast://设置成功\";\n            }, pic),\n            col_type: \"pic_2_card\"\n        });\n    }\n\n}\naddListener(\"onClose\", () => {\n    let pic = getMyVar(\"frontcoverpic\");\n    clearMyVar(\"frontcoverpic\");\n    clearMyVar(\"frontcoverkey\");\n    setPagePicUrl(pic);\n});\nsetResult(d);"},{"col_type":"movie_3","name":"规则文件","path":"configs","rule":"const path = \"hiker://files/rules/LoyDgIk/aliSimpleRules.json\";\nlet data;\n\nfunction getJson() {\n    if (Array.isArray(data)) {\n        return data;\n    }\n    try {\n        data = JSON.parse(readFile(path) || \"[]\");\n    } catch (e) {\n        deleteFile(path);\n        data = [];\n    }\n    return data;\n}\n\nfunction saveJson(json) {\n    saveFile(path, JSON.stringify(json));\n}\n\nfunction getUsefulJson() {\n    return getJson().filter(v => !v.forbidden);\n}\n\nfunction getForbiddenJson() {\n    return getJson().filter(v => v.forbidden);\n}\n\nfunction getGroupJson(group) {\n    return getJson().filter(v => v.group === group);\n}\n\nfunction getGroupNames() {\n    return Array.from(new Set(getJson().map(v => v.group))).filter(v => v);\n}\n\nif (!fileExist(path) && MY_RULE) {\n    let rules = $.require(\"rules\");\n    $.hiker.window = {};\n    eval.call(null, fetch('hiker://assets/beautify.js'));\n    rules = rules.map((v) => {\n        v.find = window.js_beautify(v.find.toString().replace(/function.*?\\(s.*?page\\).*?\\{/, \"\").replace(/(\\}[\\s\\S].*?)$/, \"\"));\n        if (v.findAliUrl) {\n            v.findAliUrl = window.js_beautify(v.findAliUrl.toString().replace(/function.*?\\(input\\).*?\\{/, \"\").replace(/(\\}[\\s\\S].*?)$/, \"\"));\n        }\n        return v;\n    });\n    saveJson(rules);\n    toast(\"已初始化\");\n}\n$.exports = {\n    getJson,\n    saveJson,\n    getUsefulJson,\n    getForbiddenJson,\n    path,\n    getGroupNames,\n    getGroupJson\n};"},{"col_type":"movie_3","name":"规则管理","path":"ruleManage","rule":"js:\nvar d = [];\nsetPageTitle(\"规则管理\");\nlet configs = $.require(\"configs\");\nlet arr = configs.getJson();\nlet length = arr.length;\nlet groups = configs.getGroupNames();\nlet group = getItem(\"ruleManage_group\", \"\");\nif (!groups.includes(group)) {\n    clearItem(\"ruleManage_group\");\n    group = \"\";\n}\nd.push({\n    title: \"新增\",\n    url: \"hiker://page/ruleEdit#noRecordHistory##noHistory##noRefresh#\",\n    col_type: \"icon_small_4\",\n    pic_url: \"hiker://images/icon_domain_config\",\n    extra: {\n        pageTitle: \"新增规则\"\n    }\n});\n\nd.push({\n    title: \"分享\",\n    url: $(\"-1\", \"输入你要分享规则的序号\\n-1全部，-2已启用的，-3已禁用的，-4,组名分享组，多个用'，'隔开\").input((length) => {\n        let indexc = input.split(/,|，/);\n        let indexs = [];\n        let mo = parseInt(indexc[0]);\n        if (!(indexc.length !== 0 && mo < 0 && mo > -5)) {\n            for (let it of indexc) {\n                let num = parseInt(it);\n                if (Number.isNaN(num) || num >= length || num < 0) {\n                    return \"toast://数字不合法\";\n                }\n                indexs.push(num);\n            }\n        }\n        return $([\"HIKER\", \"TXT\"].concat(getPastes()), 2, \"分享方式\").select((mo, indexs, ext) => {\n            function up(rules) {\n                let ruleb64 = base64Encode(JSON.stringify(rules));\n                let getPass = (length, rule, type) => \"海阔视界云简搜索引擎，共「\" + length + \"」条，复制整条口令打开软件就会自动导入$\" + rule + \"$\" + type + \"@import=js:$.require('import?rule='+\" + JSON.stringify(MY_RULE.title) + \")(input)\";\n                if (getPastes().includes(input)) {\n                    let u = sharePaste(ruleb64, input);\n                    return \"copy://\" + getPass(rules.length, u, \"b\");\n                } else {\n                    let path = \"hiker://files/rules/LoyDgIk/share/云简搜索引擎规则「\" + rules.length + \"」条.\" + (input === \"HIKER\" ? \"hiker\" : \"txt\");\n                    writeFile(path, getPass(rules.length, ruleb64, \"a\"));\n                    return \"share://\" + path;\n                }\n            }\n            let rules;\n            if (mo === -1) {\n                rules = $.require(\"configs\").getJson();\n            } else if (mo === -2) {\n                rules = $.require(\"configs\").getUsefulJson();\n            } else if (mo === -3) {\n                rules = $.require(\"configs\").getForbiddenJson();\n            } else if (mo === -4) {\n                let group = ext;\n                rules = $.require(\"configs\").getGroupJson(ext);\n                if (!rules.length) return \"toast://不存在该组\";\n            } else {\n                rules = $.require(\"configs\").getJson().filter((v, i) => indexs.includes(i));\n            }\n            rules = rules.map((v) => {\n                v.user = undefined;\n                v.forbidden = undefined;\n                return v;\n            });\n            return up(rules);\n        }, mo, indexs, indexc[1]);\n\n    }, length),\n    col_type: \"icon_small_4\",\n    pic_url: \"hiker://images/icon_share_green\"\n});\nd.push({\n    title: \"重置\",\n    url: $(\"你确定重置？\\n该操作会删除现有规则，恢复自带规则。\").confirm((path) => {\n        deleteFile(path);\n        refreshPage(false);\n        return \"hiker://empty\";\n    }, $.require(\"configs\").path),\n    col_type: \"icon_small_4\",\n    pic_url: \"hiker://images/icon_refresh\"\n});\nd.push({\n    title: \"清空\",\n    url: $(\"你确定全部删除？\\n该操作会删除现有规则。\").confirm((path) => {\n        writeFile(path, \"[]\");\n        refreshPage(false);\n        return \"hiker://empty\";\n    }, $.require(\"configs\").path),\n    col_type: \"icon_small_4\",\n    pic_url: \"hiker://images/icon_code_view\"\n});\n\nd.push({\n    //title: '<font color=\"#13B61B\">▐ </font><b>规则列表<b> (' + String(length).fontcolor(\"#ff6601\") + \")\",\n    col_type: \"rich_text\",\n});\nlet countTitle = d.at(-1);\nd.push({\n    title: group ? \"全部\" : \"““全部””\",\n    url: $(\"#noLoading#\").lazyRule((group, length) => {\n        if (group) {\n            clearItem(\"ruleManage_group\");\n            refreshPage(false);\n            return \"hiker://empty\";\n        } else {\n            return $(\"\", \"批量删除\\n格式:开始位置，结束位置(区间[0,\" + (length - 1) + \"])\").input((length) => {\n                let [start, end] = input.split(/,|，/);\n                start = parseInt(start), end = parseInt(end);\n                if (Number.isNaN(start) || Number.isNaN(end) || start < 0 || end > length - 1 || start > end) {\n                    return \"toast://数字不合法\";\n                }\n                let number = end - start + 1;\n                return $(\"确认删除：[\" + start + \",\" + end + \"]\\n共\" + number + \"条搜索引擎\").confirm((start, number) => {\n                    let rules = $.require(\"configs\").getJson();\n                    rules.splice(start, number);\n                    $.require(\"configs\").saveJson(rules);\n                    refreshPage(false);\n                }, start, number);\n            }, length);\n        }\n    }, group, length),\n    col_type: \"scroll_button\"\n});\nfor (let it of groups) {\n    d.push({\n        title: it === group ? \"““\" + it + \"””\" : it,\n        url: $(\"#noLoading#\").lazyRule((it, group) => {\n            if (group !== it) {\n                setItem(\"ruleManage_group\", it);\n                refreshPage();\n                return \"hiker://empty\";\n            } else {\n                return $([\"置顶\", \"置底\", \"改名\", \"删除\"]).select((it) => {\n                    if (\"改名\" === input) {\n                        return $(it, \"请输入新名称\").input((it) => {\n                            let rules = $.require(\"configs\").getJson();\n                            rules.forEach(v => {\n                                if (it === v.group) {\n                                    v.group = input;\n                                }\n                            });\n                            $.require(\"configs\").saveJson(rules);\n                            clearItem(\"ruleManage_group\");\n                            refreshPage(false);\n                        }, it);\n                    } else if (\"删除\" === input) {\n                        return $(\"是否删除该组搜索引擎：\" + it).confirm((it) => {\n                            let rules = $.require(\"configs\").getJson();\n                            rules = rules.filter(v => v.group !== it);\n                            $.require(\"configs\").saveJson(rules);\n                            clearItem(\"ruleManage_group\");\n                            refreshPage(false);\n                        }, it);\n                    }\n                    let rules = $.require(\"configs\").getJson();\n                    let tgRules = [],\n                        txRules = [];\n                    rules.forEach((v) => {\n                        if (it === v.group) {\n                            tgRules.push(v);\n                        } else {\n                            txRules.push(v);\n                        }\n                    });\n                    if (input === \"置顶\") {\n                        tgRules = tgRules.concat(txRules);\n                    } else {\n                        tgRules = txRules.concat(tgRules);\n                    }\n                    $.require(\"configs\").saveJson(tgRules);\n                    refreshPage(false);\n                }, it);\n            }\n\n        }, it, group),\n        col_type: \"scroll_button\"\n    });\n}\n\nlet count = d.length;\n\nfor (let i = 0; i < length; i++) {\n    let it = arr[i];\n    if (group && group !== it.group) continue;\n    let user = it.user || {};\n\n    d.push({\n        title: '““””[' + i + ']<b>  ' + it.name + (it.group ? \"|\" + it.group.small() : \"\") + '<b>' + (it.forbidden ? \" #““禁用””\".small() : \"\") + (it.registerUrl && !(user.password || user.account || user.extra) ? \" #需要登录\".small() : \"\"),\n        url: $([\"编辑\", \"账号\", \"分享\", \"禁用/启用\", \"移动\", \"置顶\", \"删除\"], 1, \"操作：\" + it.name).select((index, length, group) => {\n            if (input === \"编辑\") {\n                return \"hiker://page/ruleEdit#noRecordHistory##noHistory##noRefresh#\";\n            } else if (input === \"账号\") {\n                return \"hiker://page/password#noRecordHistory##noHistory##noRefresh#\";\n            } else if (input === \"分享\") {\n                let ops = getPastes();\n                ops.unshift(\"完整口令\");\n                return $(ops, 2, \"分享方式\").select((index) => {\n                    let rule = $.require(\"configs\").getJson()[index];\n                    rule.user = undefined;\n                    rule.forbidden = undefined;\n                    let ruleb64 = base64Encode(JSON.stringify(rule));\n                    let getPass = (name, rule, type) => \"海阔视界，「\" + name + \"」云简搜索引擎，复制整条口令打开软件就会自动导入$\" + rule + \"$\" + type + \"@import=js:$.require('import?rule='+\" + JSON.stringify(MY_RULE.title) + \")(input)\";\n                    if (input == \"完整口令\") {\n                        return \"copy://\" + getPass(rule.name, ruleb64, \"a\");\n                    } else {\n                        let u = sharePaste(ruleb64, input);\n                        return \"copy://\" + getPass(rule.name, u, \"b\");\n                    }\n                }, index);\n            } else if (input === \"移动\") {\n                return $(index + \"\", \"输入位置\").input((index, length) => {\n                    let newIndex = Number(input);\n                    if (Number.isNaN(newIndex) || newIndex >= length) {\n                        return \"toast://不和规的位置\";\n                    }\n                    let rules = $.require(\"configs\").getJson();\n                    let rule = rules.splice(index, 1)[0];\n                    rules.splice(newIndex, 0, rule);\n                    $.require(\"configs\").saveJson(rules);\n                    refreshPage(false);\n                }, index, length);\n            } else if (input === \"置顶\") {\n                let newIndex = 0;\n                let rules = $.require(\"configs\").getJson();\n                if (group) {\n                    newIndex = rules.findIndex(v => v.group === group);\n                    newIndex = newIndex === -1 ? 0 : newIndex;\n                }\n                let rule = rules.splice(index, 1)[0];\n                rules.splice(newIndex, 0, rule);\n                $.require(\"configs\").saveJson(rules);\n                refreshPage(false);\n            } else if (input === \"删除\") {\n                return $(\"确认删除？\").confirm((index) => {\n                    let rules = $.require(\"configs\").getJson();\n                    let rule = rules.splice(index, 1)[0];\n                    $.require(\"configs\").saveJson(rules);\n                    refreshPage(false);\n                    return \"toast://已删除\" + rule.name;\n                }, index);\n            } else {\n                let arr = $.require(\"configs\").getJson();\n                let rule = arr[index];\n                rule.forbidden = !rule.forbidden;\n                $.require(\"configs\").saveJson(arr);\n                refreshPage(false);\n                //return \"toast://\" + (rule.forbidden ? \"禁用\" : \"启用\") + rule.name;\n            }\n        }, i, length, group),\n        col_type: \"text_1\",\n        extra: {\n            i: i,\n            pageTitle: it.name\n        }\n    });\n}\ncountTitle.title = '<font color=\"#13B61B\">▐ </font><b>规则列表<b> (' + ((d.length - count) + \"/\" + length).fontcolor(\"#ff6601\") + \")\";\nsetResult(d);"},{"col_type":"movie_3","name":"规则编辑","path":"ruleEdit","rule":"js:\nvar d = [];\n\naddListener(\"onClose\", $.toString(() => {\n    clearMyVar(\"ps_name\");\n    clearMyVar(\"ps_find\");\n    clearMyVar(\"ps_findAliUrl\");\n    clearMyVar(\"ps_page\");\n    clearMyVar(\"ps_registerUrl\");\n    clearMyVar(\"ps_basicUrl\");\n    clearMyVar(\"ps_group\");\n    clearMyVar(\"ps_author\");\n    clearMyVar(\"ps_ruleType\");\n}));\nlet urlIndex = parseInt(getParam(\"index\", \"\"));\nurlIndex = Number.isNaN(urlIndex) ? void(0) : urlIndex;\nlet index = void(0) === urlIndex ? MY_PARAMS.i : urlIndex;\nlet isImport = !!getParam(\"isImport\", \"\");\nlet arr = $.require(\"configs\").getJson();\nlet obj;\nif (isImport) {\n    try {\n        obj = $.require(\"hiker://files/_cache/yunSimpleImport.json\");\n        let tip = index !== void(0) ? \"更新规则\" : \"导入规则\";\n        setPageTitle(tip + \":\" + obj.name);\n        d.push({\n            title: \"‘‘\" + tip + \"’’\",\n            col_type: \"text_center_1\",\n            url: \"hiker://empty\",\n            extra: {\n                lineVisible: false\n            }\n        });\n\n    } catch (e) {\n        obj = {};\n        back();\n        toast(\"导入错误\");\n    }\n} else if (index !== void(0)) {\n    obj = arr[index];\n    setPageTitle(\"编辑规则:\" + obj.name);\n    if (obj.lastModify) {\n        d.push({\n            title: \"上次修改：\" + $.dateFormat(obj.lastModify, \"yyyy-MM-dd HH:mm:ss\"),\n            col_type: \"text_center_1\",\n            url: \"hiker://empty\",\n            extra: {\n                lineVisible: false\n            }\n        });\n    }\n} else {\n    obj = {\n        page: true,\n        author: com.example.hikerview.utils.PreferenceMgr.getString(getCurrentActivity(), \"myName\", \"\")\n    };\n    setPageTitle(\"新建规则\");\n}\n\nd.push({\n    col_type: \"input\",\n    desc: \"名字(必填)\",\n    extra: {\n        onChange: $.toString(() => {\n            putMyVar(\"ps_name\", input);\n        }),\n        defaultValue: obj.name,\n        titleVisible: false\n    }\n});\nd.push({\n    title: \"签名\",\n    col_type: \"input\",\n    desc: \"作者(选填)\",\n    url: $.toString(() => {\n        let author = getMyVar(\"ps_author\", \"\");\n        let my = String(com.example.hikerview.utils.PreferenceMgr.getString(getCurrentActivity(), \"myName\", \"\"));\n        let newAuthor = \"\";\n        if (author && !author.includes(my)) {\n            newAuthor = author + \"&\" + my;\n        } else {\n            newAuthor = my;\n        }\n        updateItem(\"id@ps_author\", {\n            extra: Object.assign(findItem(\"id@ps_author\").extra, {\n                defaultValue: newAuthor\n            })\n        });\n    }),\n    extra: {\n        onChange: $.toString(() => {\n            putMyVar(\"ps_author\", input);\n        }),\n        defaultValue: obj.author,\n        id: \"id@ps_author\"\n        //titleVisible: false\n    }\n});\nd.push({\n    title: \"选择\",\n    col_type: \"input\",\n    desc: \"分组(选填)\",\n    url: $.toString(() => {\n        let group = $.require(\"configs\").getGroupNames();\n        if (!group.length) {\n            return \"\";\n        }\n        return $(group).select(() => {\n            let extra = findItem(\"ruleEditGroup\").extra;\n            updateItem(\"ruleEditGroup\", {\n                extra: Object.assign(extra, {\n                    defaultValue: input\n                })\n            });\n        });\n    }),\n    extra: {\n        onChange: $.toString(() => {\n            putMyVar(\"ps_group\", input);\n        }),\n        id: \"ruleEditGroup\",\n        defaultValue: obj.group,\n    }\n});\nd.push({\n    col_type: \"input\",\n    desc: \"搜索规则(必填)\\n内置变量：s搜索关键词，page页数，basicUrl基本链接，user用户账号信息(user.account,user.password)\",\n    extra: {\n        type: \"textarea\",\n        height: 3,\n        highlight: true,\n        onChange: $.toString(() => {\n            putMyVar(\"ps_find\", input);\n        }),\n        defaultValue: obj.find,\n        titleVisible: false,\n    }\n});\nd.push({\n    col_type: \"input\",\n    desc: \"URL规则(选填)\\n内置变量：input链接，basicUrl基本链接\",\n    extra: {\n        type: \"textarea\",\n        height: 3,\n        highlight: true,\n        onChange: $.toString(() => {\n            putMyVar(\"ps_findAliUrl\", input);\n        }),\n        defaultValue: obj.findAliUrl,\n        titleVisible: false,\n    }\n});\nd.push({\n    col_type: \"input\",\n    desc: \"基本链接(选填) 代码中用basicUrl引用\",\n    extra: {\n        onChange: $.toString(() => {\n            putMyVar(\"ps_basicUrl\", input);\n        }),\n        defaultValue: obj.basicUrl,\n        titleVisible: false,\n    }\n});\nd.push({\n    col_type: \"input\",\n    desc: \"注册地址(选填)\",\n    extra: {\n        onChange: $.toString(() => {\n            putMyVar(\"ps_registerUrl\", input);\n        }),\n        defaultValue: obj.registerUrl,\n        titleVisible: false,\n    }\n});\nd.push({\n    title: \"是否可以翻页：\" + obj.page,\n    col_type: \"text_2\",\n    url: $(\"#noLoading#\").lazyRule((page) => {\n        let isPage = !!getMyVar(\"ps_page\", page ? \"1\" : \"\");\n        putMyVar(\"ps_page\", isPage ? \"\" : \"1\");\n        updateItem(\"ruleedps_page\", {\n            title: \"是否可以翻页：\" + !isPage\n        });\n        return \"hiker://empty\";\n    }, obj.page),\n    extra: {\n        id: \"ruleedps_page\"\n    }\n});\nputMyVar(\"ps_ruleType\", (obj.ruleType||\"\"));\nd.push({\n    title: \"解析模式：\" + (obj.ruleType || \"JS\"),\n    col_type: \"text_2\",\n    url: $([\"JS\", \"JSON\", \"HTML\"]).select(() => {\n\n        putMyVar(\"ps_ruleType\", input === \"JS\" ? \"\" : input);\n        updateItem(\"ps_ruleType\", {\n            title: \"解析模式：\" + input\n        });\n        return \"hiker://empty\";\n    }),\n    extra: {\n        id: \"ps_ruleType\"\n    }\n});\nd.push({\n    title: \"删除\",\n    url: $(\"#noLoading#\").lazyRule((index, urlIndex) => {\n        if (index === void(0)) {\n            return \"toast://此项无法删除\";\n        }\n        if (urlIndex !== void(0)) {\n            return \"toast://正在更新规则，删除请从规则管理进入\";\n        }\n        confirm({\n            title: \"温馨提示\",\n            content: \"确定要删除此规则吗？注意删除后无法恢复\",\n            confirm: $.toString((index) => {\n                let arr = $.require(\"configs\").getJson();\n                arr.splice(index, 1);\n                $.require(\"configs\").saveJson(arr);\n                back(true);\n                return \"toast://删除成功\";\n            }, index)\n        });\n        return \"hiker://empty\"\n    }, index, urlIndex),\n    col_type: \"text_3\",\n});\nd.push({\n    title: \"测试\",\n    url: $(\"#noLoading#\").lazyRule(page => {\n        let testKeyword = getItem(\"testKeyword\", \"\");\n        return $(testKeyword, \"请输入关键词\").input((page) => {\n            setItem(\"testKeyword\", input);\n            let name = getMyVar(\"ps_name\", \"\");\n            let find = getMyVar(\"ps_find\", \"\");\n            if (!find) {\n                return \"toast://搜索规则不能为空\";\n            }\n            let arr = $.require(\"configs\").getJson();\n            let testRule = {\n                name: name,\n                find: find,\n                basicUrl: getMyVar(\"ps_basicUrl\", \"\"),\n                findAliUrl: getMyVar(\"ps_findAliUrl\", \"\"),\n                page: !!getMyVar(\"ps_page\", page ? \"1\" : \"\"),\n                ruleType: getMyVar(\"ps_ruleType\", \"\"),\n            };\n            return $(\"hiker://empty#noRecordHistory##noHistory#?fypage\").rule((testRule, key) => {\n                if (MY_PAGE > 1 && !testRule.page) setResult([]);\n                setResult($.require(\"data\").carryRule(testRule, key, MY_PAGE, 0));\n            }, testRule, input);\n        }, page);\n    }, obj.page),\n    col_type: \"text_3\",\n});\n\n\nd.push({\n    title: \"保存\",\n    url: $(\"#noLoading#\").lazyRule((index, page, isImport) => {\n        let name = getMyVar(\"ps_name\", \"\");\n        if (!name) {\n            return \"toast://名字得有一个吧\";\n        }\n        let find = getMyVar(\"ps_find\", \"\");\n        if (!find) {\n            return \"toast://搜索规则不能为空\";\n        }\n        let arr = $.require(\"configs\").getJson();\n        let obj1 = {\n            name: name,\n            author: getMyVar(\"ps_author\", \"\"),\n            find: find,\n            basicUrl: getMyVar(\"ps_basicUrl\", \"\"),\n            findAliUrl: getMyVar(\"ps_findAliUrl\", \"\"),\n            page: !!getMyVar(\"ps_page\", page ? \"1\" : \"\"),\n            registerUrl: getMyVar(\"ps_registerUrl\", \"\") || undefined,\n            lastModify: Date.now(),\n            group: getMyVar(\"ps_group\", \"\"),\n            ruleType: getMyVar(\"ps_ruleType\", \"\"),\n        };\n        if (index === void(0)) {\n            if (arr.some(v => v.name === name)) {\n                return \"toast://已经存在该规则\";\n            }\n            if (obj1.group) {\n                let group = obj1.group;\n                let index = arr.findIndex(v => v.group === group);\n                if (index === -1) {\n                    arr.unshift(obj1);\n                } else {\n                    arr.splice(index, 0, obj1);\n                }\n            } else {\n                if (isImport) {\n                    arr.push(obj1);\n                } else {\n                    arr.unshift(obj1);\n                }\n            }\n        } else {\n            let namey = arr[index].name;\n            if (name !== namey) {\n                if (arr.some(v => v.name === name)) {\n                    return \"toast://已经存在该规则\";\n                }\n            }\n            obj1 = Object.assign(arr[index], obj1);\n            arr.splice(index, 1, obj1);\n        }\n        $.require(\"configs\").saveJson(arr);\n        back(true);\n        return \"toast://保存成功\";\n    }, index, obj.page, isImport),\n    col_type: \"text_3\",\n});\n\nsetResult(d);"},{"col_type":"movie_3","name":"规则账号","path":"password","rule":"js:\n(function() {\n    var d = [];\n    addListener(\"onClose\", $.toString(() => {\n        clearMyVar(\"ps_account\");\n        clearMyVar(\"ps_password\");\n        clearMyVar(\"ps_extra\");\n    }));\n    let index = MY_PARAMS.i;\n    let arr = $.require(\"configs\").getJson();\n    let obj = arr[index] || {};\n    setPageTitle(\"设置账号:\" + obj.name);\n    let registerUrl = obj.registerUrl;\n    if (registerUrl) {\n        d.push({\n            col_type: \"text_center_1\",\n            title: \"前往注册\",\n            url: $(\"hiker://empty#noRecordHistory##noHistory#\").rule((registerUrl)=>{\n                setResult([{\n                    col_type:\"x5_webview_single\",\n                    url:registerUrl,\n                    desc:\"float&&100%\"\n                }]);\n            }, registerUrl),\n            extra:{\n                pageTitle: \"注册账号:\" + obj.name\n            }\n        });\n    }\n    obj = obj.user || {};\n    d.push({\n        col_type: \"input\",\n        desc: \"用户名\",\n        extra: {\n            onChange: $.toString(() => {\n                putMyVar(\"ps_account\", input);\n            }),\n            defaultValue: obj.account,\n            titleVisible: false\n        }\n    });\n    d.push({\n        col_type: \"input\",\n        desc: \"密码\",\n        extra: {\n            type: \"password\",\n            onChange: $.toString(() => {\n                putMyVar(\"ps_password\", input);\n            }),\n            defaultValue: obj.password,\n            titleVisible: false,\n        }\n    });\n    d.push({\n        col_type: \"input\",\n        desc: \"额外\",\n        extra: {\n            type: \"textarea\",\n            onChange: $.toString(() => {\n                putMyVar(\"ps_extra\", input);\n            }),\n            defaultValue: obj.extra,\n            titleVisible: false,\n            height: -1\n        }\n    });\n    d.push({\n        title: \"保存\",\n        url: $(\"#noLoading#\").lazyRule((index) => {\n            let account = getMyVar(\"ps_account\", \"\");\n            let password = getMyVar(\"ps_password\", \"\");\n            let extra = getMyVar(\"ps_extra\", \"\");\n            /*if (!(account||password||extra)) {\n                return \"toast://不能全部为空\";\n            }*/\n            let arr = $.require(\"configs\").getJson();\n            let item = arr[index];\n            item.user = {};\n            item.user.account = account\n            item.user.password = password;\n            item.user.extra = extra;\n            if (index === void(0)) {\n                return \"toast://id错误\";\n            } else {\n                arr.splice(index, 1, item);\n            }\n            $.require(\"configs\").saveJson(arr);\n            back(true);\n            return \"toast://保存成功\";\n        }, index),\n        col_type: \"text_center_1\",\n    });\n    setResult(d);\n})()"},{"col_type":"movie_3","name":"规则导入","path":"import","rule":"js:\nfunction saveCache(json) {\n    writeFile(\"hiker://files/_cache/yunSimpleImport.json\", JSON.stringify(json));\n}\n$.exports = function(pass) {\n    try {\n        let [_, rule, type] = pass.split(\"$\");\n        if (type === \"b\") {\n            rule = parsePaste(rule);\n        }\n        let rules = JSON.parse(base64Decode(rule));\n        if (!Array.isArray(rules)) {\n            rules = [rules];\n        }\n        //rules.reverse();\n        MY_URL = module.id;\n        let ruleTitle = getParam(\"rule\");\n        let arr = $.require(\"configs?rule=\" + ruleTitle).getJson();\n        let newI = 0;\n        for (let rule of rules) {\n            let index = arr.findIndex(v => v.name === rule.name);\n            if (index > -1) {\n                rule = Object.assign(arr[index], rule);\n                arr.splice(index, 1, rule);\n                if (rules.length === 1) {\n                    saveCache(rule);\n                    return \"hiker://page/ruleEdit#noHistory##noRecordHistory#?isImport=true&index=\" + index + \"&rule=\" + ruleTitle;\n                    //toast(\"已更新规则：\" + rule.name);\n                } else {\n                    log(\"已更新规则：\" + rule.name)\n                }\n            } else {\n                newI++;\n                arr.push(rule);\n                if (rules.length === 1) {\n                    saveCache(rule);\n                    return \"hiker://page/ruleEdit#noHistory##noRecordHistory#?isImport=true&rule=\" + ruleTitle;\n                    //toast(\"已导入规则：\" + rule.name);\n                } else {\n                    log(\"已导入规则：\" + rule.name)\n                }\n            }\n        }\n        if (rules.length > 1) {\n            $.require(\"configs?rule=\" + ruleTitle).saveJson(arr);\n            toast(\"新增：\" + newI + \" 覆盖更新：\" + (rules.length - newI));\n        }\n    } catch (e) {\n        log(e.toString());\n        toast(\"导入失败\");\n    }\n}"},{"col_type":"movie_3","name":"规则列表","path":"rules","rule":"js:\n$.exports = [{\n        name: \"小云\",\n        page: true,\n        find(s, page) {\n            let basicUrl = \"https://www.yunso.net\";\n            let api = \"/api/validate/search?wd=\" + encodeURIComponent(s) + \"&mode=90001&stype=20100&uk=&page=\" + page + \"&limit=20&screen_filetype=undefined\";\n            let json = post(basicUrl + api, {\n                body: \"data=\" + api,\n                headers: {\n                    Referer: \"https://www.yunso.net/index/user/s?wd=\" + encodeURIComponent(s)\n                }\n            });\n            let html = JSON.parse(json).data;\n            let list = pdfa(html, \"body&&.layui-card:has(a)\");\n            let d = [];\n            for (let item of list) {\n                let title = pdfh(item, \"a&&Text\").replace(\"#文件夹 \", \"\");\n                //let time = /\\d{4}(-\\d{2}){2} \\d{2}(\\:\\d{2}){2}/.exec(pdfh(item, \".layui-card-body&&Text\")) || [];\n                d.push({\n                    title: title,\n                    //desc: time[0],\n                    url: base64Decode(pdfh(item, \"a&&url\"))\n                });\n            }\n            return d;\n        }\n    }, {\n        name: \"混合盘\",\n        page: true,\n        find(s, page) {\n            let url = \"https://api.hunhepan.com/v1/search\";\n            let json = post(url, {\n                headers: {\n                    Referer: \"https://hunhepan.com/\"\n                },\n                body: JSON.stringify({\n                    \"q\": s,\n                    \"page\": page,\n                    \"size\": 15\n                })\n            });\n            json = JSON.parse(json);\n            let list = json.data.list;\n            let d = [];\n            for (let i = 0; i < list.length; i++) {\n                let it = list[i];\n                if (it.disk_type !== \"ALY\" || it.share_user === \"丶***丶\") continue;\n                d.push({\n                    title: it.disk_name,\n                    pic_url: pd(it, \"img&&src\", url),\n                    url: it.link,\n                    desc: it.update_time + \"\\n\" + it.link,\n                });\n            }\n            return d;\n        }\n    }, {\n        name: \"资源帮\",\n        page: true,\n        find(s, page) {\n            function search() {\n                let rtnList = [];\n                let resp = request(\"https://zyb.upyunso.com/v15/search?keyword=\" + en_aes(s) + \"&s_type=2&page=\" + page + \"&atk=&did=\" + generateRandomHexString(64), {\n                    headers: {\n                        \"user-agent\": \"Mozilla/5.0 (Linux; Android 10; Redmi Note 7 Build/QKQ1.190910.002; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/81.0.4044.138 Mobile Safari/537.36 uni-app Html5Plus/1.0 (Immersed/29.09091)\",\n                    },\n                });\n                let respData = de_aes(resp);\n                let jsonData = JSON.parse(respData) || {};\n                let result = jsonData.result || {};\n                let items = result.items || [];\n\n                for (let i = 0; i < items.length; i++) {\n                    let item = items[i];\n                    let content = item.content || [];\n                    if (content.length == 0 || !item.page_url) continue;\n                    let url = de_aes(item.page_url) || \"\";\n                    if (!url) continue;\n                    rtnList.push({\n                        title: (item.title.length > 30 ? item.title.slice(0, 27) + \"...\" : item.title) || \"\",\n                        desc: \"分享时间：\" + item.insert_time,\n                        url: url\n                    });\n                }\n\n                return rtnList;\n            }\n\n            function generateRandomHexString(length) {\n                let result = \"\";\n                const characters = \"0123456789abcdef\";\n                const charactersLength = characters.length;\n                for (let i = 0; i < length; i++) {\n                    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n                }\n                return result;\n            }\n            let aliUtil = $.require(\"aliUtil\");\n            let CryptoJS = aliUtil.getCryptoJS();\n\n            function en_aes(e) {\n                let i = \"qq1920520460qqzz\";\n                // en_aes\n                let key = CryptoJS.enc.Utf8.parse(i);\n                var t = CryptoJS.enc.Utf8.parse(e),\n                    r = CryptoJS.AES.encrypt(t, key, {\n                        iv: key,\n                        mode: CryptoJS.mode.CBC,\n                    });\n                return r.ciphertext.toString();\n            }\n\n            function de_aes(vv) {\n                let i = \"qq1920520460qqzz\";\n                // de_aes\n                let key = CryptoJS.enc.Utf8.parse(i);\n                let hexVal = CryptoJS.enc.Hex.parse(vv),\n                    val = CryptoJS.enc.Base64.stringify(hexVal),\n                    decrypted = CryptoJS.AES.decrypt(val, key, {\n                        iv: key,\n                        mode: CryptoJS.mode.CBC,\n                    });\n                return decrypted.toString(CryptoJS.enc.Utf8);\n            }\n            return search();\n        }\n    }, {\n        name: \"云盘资源\",\n        page: true,\n        find: function(s, page) {\n            let url = \"https://res.yunpan.win/?PageIndex=\" + page + \"&PageSize=12&Keyword=\" + s + \"&Type=&Tag=\";\n            let html = request(url, {\n                headers: {\n                    \"Referer\": \"https://res.yunpan.win/\"\n                }\n            });\n\n            let arr = pdfa(html, \"main&&.card\");\n            //log(arr);\n            let d = [];\n            for (let i = 0; i < arr.length; i++) {\n                let it = arr[i];\n                let u = pdfh(it, \".card-link,1&&onclick\").match(/https:\\/\\/(www\\.aliyundrive\\.com\\/s|alywp\\.net)\\/\\w*/g) || [];\n                u = u.length > 0 ? u[0] : url;\n                d.push({\n                    title: pdfh(it, \".card-title&&Text\"),\n                    pic_url: pd(it, \"img&&src\", url),\n                    url: u,\n                    desc: pdfh(it, \".card-text,-1&&Text\") + \"\\n\" + u,\n                });\n            }\n            return d;\n        }\n    },\n    {\n        name: \"UP云搜\",\n        page: true,\n        find: function(s, page) {\n            let url = \"https://api.upyunso2.com/search?keyword=\" + s + \"&page=\" + page + \"&s_type=1\";\n            let html = request(url, {\n                headers: {\n                    \"Referer\": \"https://www.upyunso.com\",\n                    \"Cookie\": \"code=1919\"\n                }\n            });\n            //log(base64Decode(html));\n            let arr = JSON.parse(base64Decode(html)).result.items;\n            //log(arr);\n            let d = [];\n            if (!arr) return [];\n            for (let i = 0; i < arr.length; i++) {\n                let it = arr[i];\n                let u = it.page_url;\n                //u = u.length > 0 ? u[0] : url;\n                if (!u.includes(\"aliyundrive\")) {\n                    continue;\n                }\n                d.push({\n                    title: it.title,\n                    url: u,\n                    desc: \"\\n\" + (u),\n                });\n\n            }\n            return d;\n        }\n    },\n    {\n        name: \"猫狸盘搜\",\n        page: false,\n        find: function(s, page) {\n            let html = request(\"https://www.alipansou.com/search?k=\" + s, {\n                headers: {\n                    \"Referer\": \"https://www.alipansou.com/search?k=\" + s\n                }\n            });\n            let arr = pdfa(html, \"#app&&a\");\n            //log(arr);\n            let d = [];\n            for (let i = 0; i < arr.length; i++) {\n                let it = \"<div>\" + arr[i] + \"</div>\";\n                let u = pdfh(it, \"a&&href\");\n                //log(u);\n                if (!u.includes(\"/s/\")) {\n                    continue;\n                }\n                u = \"https://www.alipansou.com\" + u.replace(\"/s/\", \"/cv/\");\n                d.push({\n                    title: pdfh(it, \"template&&Text\"),\n                    url: u,\n                    desc: pdfh(it, \"template,1&&Text\"),\n                });\n            }\n            return d;\n        },\n        findAliUrl(input) {\n            let html = request(input, {\n                headers: {\n                    \"Cookie\": \"no_show_donate=1\",\n                    \"Referer\": input.replace(\"/cv/\", \"/s/\")\n                },\n                redirect: false\n            });\n            html = parseDomForHtml(html, 'a&&href');\n            if (html.length > 0) {\n                return html;\n            } else {\n                return input;\n            }\n        }\n    },\n    {\n        name: \"易搜\",\n        page: true,\n        registerUrl: \"https://yiso.fun\",\n        find: function(s, page) {\n            let aliUtil = $.require(\"aliUtil\");\n            let CryptoJS = aliUtil.getCryptoJS();\n\n            function keyen(str) {\n                var key = CryptoJS.enc.Utf8.parse(\"4OToScUFOaeVTrHE\"),\n                    iv = CryptoJS.enc.Utf8.parse(\"9CLGao1vHKqm17Oz\");\n                var encrypted = CryptoJS.AES.decrypt({\n                    ciphertext: CryptoJS.enc.Base64.parse(str)\n                }, key, {\n                    iv: iv,\n                    mode: CryptoJS.mode.CBC,\n                    padding: CryptoJS.pad.Pkcs7\n                }).toString(CryptoJS.enc.Utf8);\n                return encrypted;\n            }\n            let html = request(\"https://yiso.fun/api/search?name=\" + s + \"&pageNo=\" + page, {\n                headers: {\n                    \"Referer\": \"https://yiso.fun/info?searchKey=\" + s,\n                    \"Cookie\": getItem('yisoucooke', '')\n                }\n            });\n            //log(html);\n            if (html.includes('登录用户无限制')) {\n                var i = 0;\n                do {\n                    var tyimglin = 'https://yiso.fun/api/user/login/captcha?t=' + parseInt(new Date().getTime()) + '';\n                    let img = convertBase64Image(tyimglin).split(',')[1];\n                    let cod = request('https://api.xhofe.top/ocr/b64/text', {\n                        headers: {\n                            'Content-Type': 'text/plain'\n                        },\n                        body: img,\n                        method: 'POST'\n                    });\n                    var ver = JSON.parse(request('https://yiso.fun/api/user/login', {\n                        headers: {\n                            'content-type': 'application/json',\n                            'referer': 'https://yiso.fun/login',\n                            'Cookie': getCookie(tyimglin)\n                        },\n                        body: {\n                            \"userName\": user.account,\n                            \"password\": user.password,\n                            \"code\": cod\n                        },\n                        method: 'POST'\n                    }));\n                    if (ver.code == 200) {\n                        log('易搜登入验证成功');\n                        setItem('yisoucooke', getCookie('https://yiso.fun'));\n                        html = request(\"https://yiso.fun/api/search?name=\" + s + \"&pageNo=\" + page, {\n                            headers: {\n                                \"Referer\": \"https://yiso.fun/info?searchKey=\" + s,\n                                \"Cookie\": getItem('yisoucooke', '')\n                            }\n                        });\n                        break;\n                    }\n                    i++;\n                } while (i < 4);\n\n            }\n            let arr = JSON.parse(html).data.list;\n            //log(arr);\n            let d = [];\n            for (let i = 0; i < arr.length; i++) {\n                let it = arr[i];\n                let u = keyen(it.url);\n                //log(u);\n                if (u == null || !u.includes(\"aliyun\")) {\n                    continue;\n                }\n                d.push({\n                    title: it.name,\n                    url: u,\n                    desc: (it.gmtShare || it.gmtCreate) + \"\\n\" + (u),\n                });\n\n            }\n            return d;\n        }\n    },\n    {\n        name: \"小纸条\",\n        page: false,\n        find: function(s, page) {\n            let aliUtil = $.require(\"aliUtil\");\n\n            function gettoken() {\n                if (getMyVar('xzytoken', '').length == 0) {\n                    let token = JSON.parse(post('https://gitcafe.net/tool/alipaper/', {\n                        headers: {\n                            'Referer': 'https://u.gitcafe.ink/'\n                        },\n                        body: {\n                            action: 'get_token'\n                        }\n                    })).data;\n                    putMyVar('xzttoken', token);\n                }\n                return getMyVar('xzttoken', '');\n            }\n\n            function cat_code(a) {\n                var d, e, b = [\"华语电视\", \"日韩电视\", \"欧美电视\", \"其他电视\", \"华语电影\", \"日韩电影\", \"欧美电影\", \"其他电影\", \"华语动漫\", \"日韩动漫\", \"欧美动漫\", \"纪录片\", \"综艺片\", \"教育培训\", \"其他视频\", \"华语音乐\", \"日韩音乐\", \"欧美音乐\", \"其他音乐\", \"娱乐软件\", \"系统软件\", \"网络软件\", \"办公软件\", \"其他软件\", \"漫画\", \"小说\", \"出版书\", \"知识培训\", \"其他文档\", \"壁纸\", \"人物\", \"风景\", \"其他图片\", \"其他\"],\n                    c = [\"hyds\", \"rhds\", \"omds\", \"qtds\", \"hydy\", \"rhdy\", \"omdy\", \"qtdy\", \"hydm\", \"rhdm\", \"omdm\", \"jlp\", \"zyp\", \"jypx\", \"qtsp\", \"hyyy\", \"rhyy\", \"omyy\", \"qtyy\", \"kfrj\", \"xtrj\", \"wlrj\", \"bgrj\", \"qtrj\", \"mh\", \"xs\", \"cbs\", \"zspx\", \"qtwd\", \"bz\", \"rw\", \"fj\", \"qttp\", \"qt\"];\n                for (d = 0, e = c.length; e > d; d++)\n                    if (c[d] == a) return b[d];\n            }\n            let d = [];\n            let html = post(\"https://gitcafe.net/tool/alipaper/\", {\n                headers: {\n                    'Referer': 'https://u.gitcafe.ink/'\n                },\n                body: {\n                    action: \"search\",\n                    from: \"web\",\n                    token: gettoken(),\n                    keyword: s\n                }\n            })\n            let list = JSON.parse(html);\n            if (list.data) {\n                list = list.data;\n            }\n            for (let i = 0; i < list.length; i++) {\n                let it = list[i]\n                let title = it.title;\n                let murl = 'https://www.aliyundrive.com/s/' + it.alikey\n                if (!aliUtil.checkali(murl)) {\n                    continue;\n                }\n                if (title.includes(s)) {\n                    d.push({\n                        title: \"√ \" + title,\n                        desc: cat_code(it.cat),\n                        extra: {\n                            des: it.des\n                        },\n                        url: murl\n                    });\n                }\n            }\n            return d;\n        }\n    },\n    {\n        name: \"玩偶哥哥\",\n        page: true,\n        basicUrl: \"http://wogg.xyz\",\n        find: function(s, page) {\n            let url = basicUrl + \"/index.php/vodsearch/\" + s + \"----------\" + page + \"---.html\";\n            let html = request(url);\n            let arr = parseDomForArray(html, \".module-items&&.module-search-item\");\n\n            let bet = [];\n            for (let i = 0; i < arr.length; i++) {\n                let it = arr[i];\n                let utitle = pdfh(it, \"h3&&a&&Text\");\n                let userial = pdfh(it, \".video-serial&&Text\");\n                let uimage = pdfh(it, \"img&&data-src\");\n                let u = pd(it, \"h3&&a&&href\", basicUrl);\n                bet.push({\n                    title: utitle,\n                    url: u,\n                    pic_url: uimage,\n                    desc: userial\n                });\n            }\n\n            return bet;\n        },\n        findAliUrl(input) {\n            return pdfa(request(input), \"body&&.module-row-text.copy\").map(v => pdfh(v, \"a&&data-clipboard-text\"));\n        }\n    },\n    {\n        name: \"阿里云盘网\",\n        page: true,\n        basicUrl: \"https://www.alypw.cn\",\n        find: function(s, page) {\n            let url = basicUrl + \"/search.php?q=\" + s + \"&page=\" + page;\n            let html = request(url, {});\n            let arr = pdfa(html, \".list&&li\");\n            let bet = [];\n            for (let i = 0; i < arr.length; i++) {\n                let it = arr[i];\n                let utitle = pdfh(it, \"a&&title\");\n                let userial = pdfh(it, \".fa-clock-o&&Text\");\n                let uimage = pdfh(it, \"img&&src\");\n                let u = pd(it, \"a&&href\", basicUrl);\n                if (!utitle.includes(s)) {\n                    continue;\n                }\n                bet.push({\n                    title: utitle,\n                    url: u,\n                    pic_url: uimage,\n                    desc: userial\n                });\n            }\n\n            return bet;\n        },\n        findAliUrl(input) {\n            return pdfa(request(input), \"body&&a[href^=https://www.aliyundrive.com/s/]\").map(v => pdfh(v, \"a&&href\"));\n        }\n    },\n    {\n        name: \"土拨鼠\",\n        page: false,\n        find: function(s, page) {\n            let html = fetch('https://www.tbsdy.com/search.html?keyword=' + s + '&category=983920&data_type=987910', {\n                headers: {\n                    'User-Agent': PC_UA\n                }\n            });\n\n            let arr = parseDomForArray(html, '.search_result_netdisk_list&&a');\n            let d = [];\n            for (let i = 0; i < arr.length; i++) {\n                let it = arr[i];\n                //log(it);\n                let u = parseDomForHtml(it, 'a&&href');\n                let tit = parseDomForHtml(it, '.netdisk_item_detail_name&&Text');\n                if (!tit.includes(s)) {\n                    continue;\n                }\n                //log(u);\n                d.push({\n                    title: tit,\n                    url: u,\n                    desc: \"\\n\" + u,\n                });\n            }\n            return d;\n        }\n    },\n    {\n        name: \"阿里搜\",\n        page: true,\n        find: function(s, page) {\n            let d = [];\n            let html = request('https://aliso.cc/s/' + s + '-' + page + '-0.html', {});\n\n            let list = parseDomForArray(html, '.search-result&&.resource-item');\n            for (let j = 0; j < list.length; j++) {\n                let u = list[j];\n                let tit = parseDomForHtml(u, 'h3&&Text');\n                if (!tit.includes(s)) {\n                    continue;\n                }\n                d.push({\n                    title: tit,\n                    url: parseDom(u, 'h3&&a&&href', 'https://aliso.cc/'),\n                    desc: parseDomForHtml(u, '.time&&Text'),\n                });\n\n            }\n            return d;\n        },\n        findAliUrl(input) {\n            eval(getCryptoJS());\n\n            function decry(str) {\n                var key = CryptoJS.enc.Utf8.parse(\"9EB20DDFD6AFBD68\");\n                var encrypted = CryptoJS.AES.decrypt(str, key, {\n                    iv: key,\n                    mode: CryptoJS.mode.CBC,\n                    padding: CryptoJS.pad.Pkcs7\n                }).toString(CryptoJS.enc.Utf8);\n                return encrypted;\n            }\n\n            let html = request(input);\n            let but = parseDom(html, '.button&&href', 'https://aliso.cc/');\n            //log(but);\n            let got = request(but);\n            //log(got);\n            eval(parseDomForHtml(got, 'head&&script,1&&Html'));\n            return decry(base64.split('!')[0]);\n        }\n    },\n    {\n        name: \"云盘分享社\",\n        page: false,\n        find: function(s, page) {\n            let aliUtil = $.require(\"aliUtil\");\n            let CryptoJS = aliUtil.getCryptoJS();\n\n            function decry(str) {\n                var key = CryptoJS.enc.Utf8.parse(\"5F6B2AK33DASD123\");\n                var encrypted = CryptoJS.AES.decrypt(str, key, {\n                    mode: CryptoJS.mode.ECB,\n                    padding: CryptoJS.pad.Pkcs7\n                }).toString(CryptoJS.enc.Utf8);\n                return encrypted;\n            }\n            let html = request(\"https://www.yunpanfenxiang.cn/api/bbs/api/getdata?key=\" + s + \"&type=video\", {\n                headers: {\n                    \"Referer\": \"https://www.yunpanfenxiang.cn/\"\n                }\n            });\n            let json = decry(JSON.parse(html).data);\n            let arr = JSON.parse(json);\n\n            let bet = [];\n            for (let i = 0; i < arr.length; i++) {\n                let it = arr[i];\n                let url = it.pid;\n                bet.push({\n                    url: \"https://www.yunpanfenxiang.cn/api/bbs/api/getarticle?id=\" + url,\n                    title: it.title,\n                    desc: it.createtime\n                });\n            }\n\n            return bet;\n        },\n        findAliUrl(input) {\n            let json = JSON.parse(request(input, {\n                headers: {\n                    \"Referer\": \"https://www.yunpanfenxiang.cn/\"\n                }\n            })).data;\n            let list = json.download.split(\"@\");\n            let alist = new Set();\n            for (let j = 0; j < list.length; j++) {\n                alist.add(\"https://www.aliyundrive.com/s/\" + list[j]);\n            }\n            return Array.from(alist);\n        }\n    },\n    {\n        name: \"盘搜\",\n        page: true,\n        find: function(s, page) {\n            page = (page - 1) * 10;\n            let url = \"https://www.pansearch.me/search?keyword=\" + s + \"&offset=\" + page + \"&pan=aliyundrive\";\n            let html = request(url, {});\n\n            let arr = parseDomForArray(html, '.grid&&.shadow:has(a[href^=https://www.aliyundrive.com/s/])');\n            //log(arr);\n            let d = [];\n            for (let i = 0; i < arr.length; i++) {\n                let it = arr[i];\n                let u = parseDomForHtml(it, 'a[href^=https://www.aliyundrive.com/s/]&&href');\n                let pic_url = parseDomForHtml(it, 'img&&src');\n                d.push({\n                    title: parseDomForHtml(it, '.break-all&&Text').split('http')[0],\n                    pic_url: pic_url === \"/favicon.png\" ? \"https://www.pansearch.me/\" + pic_url : pic_url,\n                    url: u,\n                    desc: parseDomForHtml(it, 'p&&Text') + \"\\n\" + u,\n                });\n\n            }\n            return d;\n        }\n    },\n    {\n        name: \"DOVX搜\",\n        page: false,\n        find: function(s, page) {\n            let url = \"https://api.dovx.tk/ali/search?wd=\" + s;\n            let html = request(url);\n            let arr = JSON.parse(html).list;\n            let d = [];\n            let aliUtil = $.require(\"aliUtil\");\n            for (let i = 0; i < arr.length; i++) {\n                let it = arr[i];\n                let u = it.vod_content;\n                if (!u.includes(\"aliyundrive\") || !aliUtil.checkali(u)) {\n                    continue;\n                }\n                d.push({\n                    title: \"√ \" + it.vod_name,\n                    pic_url: it.vod_pic,\n                    url: u,\n                    desc: \"\\n\" + u,\n                });\n            }\n            return d;\n        }\n    },\n    {\n        name: \"必应\",\n        page: true,\n        find: function(s, page) {\n            let url = \"https://cn.bing.com/search?q=\" + s + \"+aliyundrive&qs=ds&form=QBRE\";\n            if (page != 1) {\n                url = getMyVar(\"bing\", url);\n            }\n            let html = request(url, {\n                headers: {\n                    \"Referer\": \"https://cn.bing.com/\",\n                    //\"X-Requested-With\": \"com.example.hikerview\",\n                    \"Accept\": \"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9\"\n                }\n            });\n            let arr = pdfa(html, \"body&&a\");\n            //log(arr);\n            let d = [];\n            for (let i = 0; i < arr.length; i++) {\n                let it = arr[i];\n                let u = pd(it, \"a&&href\", url);\n                let t = pdfh(it, \"a&&Text\");\n                if (it.includes(\"Next page\") || it.includes(\"下一页\")) {\n                    let u2 = pd(it, \"a&&href\", url);\n                    //log(\"next page\");\n                    //log(u2);\n                    putMyVar(\"bing\", u2);\n                }\n                if (u == null || t == null || !it.includes(s)) {\n                    continue;\n                }\n                if (!it.includes(\"网盘\") && !it.includes(\"云盘\") &&\n                    !it.includes(\"aliyundrive\") && !it.includes(\"yunpan\")) {\n                    continue;\n                }\n                if (u.startsWith(\"https://cn.bing.com/\")) {\n                    continue;\n                }\n                let dom = getHome(u).replace(\"http://\", \"\").replace(\"https://\", \"\");\n                let _links = t.match(/https:\\/\\/(www\\.aliyundrive\\.com\\/s|alywp\\.net)\\/\\w*/g) || [];\n                let c = null;\n                if (_links.length > 1 && _links[1].replace(_links[0], \"\").replace(/[a-zA-Z0-9]+/g, \"\") == \"\") {\n                    c = _links[1];\n                } else if (_links.length > 0) {\n                    c = _links[0];\n                }\n                d.push({\n                    title: t,\n                    desc: dom,\n                    url: c != null ? c : u,\n                    extra: {\n                        longClick: [{\n                            title: \"进入网站\",\n                            js: JSON.stringify(\"hiker://page/ysfx?webUrl=\" + encodeURIComponent(u))\n                        }]\n                    }\n                });\n            }\n            return d;\n        },\n        findAliUrl(input) {\n            if (input.includes(\"aliyundrive\")) return input;\n            let html = request(input);\n            var _links = html.match(/https:\\/\\/(www\\.aliyundrive\\.com\\/s|alywp\\.net)\\/\\w*/g) || [];\n            if (_links.length > 1 && _links[1].replace(_links[0], \"\").replace(/[a-zA-Z0-9]+/g, \"\") == \"\") {\n                return _links[1];\n            } else if (_links.length > 0) {\n                return _links[0];\n            } else {\n                return \"hiker://page/ysfx?webUrl=\" + encodeURIComponent(input);\n            }\n\n        }\n    },\n    {\n        name: 'CCOF',\n        page: true,\n        find: function(s, page) {\n            let d = []\n            let aliUtil = $.require(\"aliUtil\");\n            let html = fetch('https://pan.ccof.cc/api/search', {\n                headers: {\n                    \"content-type\": 'application/json',\n                    'Referer': 'https://pan.ccof.cc/search?keyword=' + s\n                },\n                body: {\n                    \"pageSize\": 20,\n                    \"pageNum\": page,\n                    \"keyword\": s,\n                    \"fromMobile\": true\n                },\n                method: 'POST'\n            })\n            let list = JSON.parse(html)\n                .data.rows\n            for (let i = 0; i < list.length; i++) {\n                let it = list[i];\n                let title = it.fileName\n                let murl = it.url\n                let type = it.type.replace(/folder/, '文件夹').replace(/file/, '文件')\n                if (title.includes(s)) {\n                    d.push({\n                        title: title,\n                        desc: '文件类型：' + type + '，文件大小：' + aliUtil.bytesToSize(it.size),\n                        url: murl\n                    })\n                }\n            }\n            return d\n        }\n    },\n    {\n        name: '阿里小站',\n        page: true,\n        find: function(s, page) {\n            let home = \"https://pan666.net\";\n            let d = [];\n            let html = request(buildUrl(home + \"/api/discussions\", {\n                \"include\": \"user,lastPostedUser,mostRelevantPost,mostRelevantPost.user,tags,tags.parent,firstPost\",\n                \"filter[q]\": s /* + \" tag:video,comic\"*/ ,\n                //\"filter[tag]\": \"video,comic\",\n                \"page[offset]\": 20 * (page - 1)\n            }), {\n                headers: {\n                    \"content-type\": \"application/json\",\n                    \"Referer\": \"https://pan666.net/?q=\" + s\n                }\n            });\n            let list = JSON.parse(html).data;\n            for (let i = 0; i < list.length; i++) {\n                let item = list[i].attributes;\n                let url = home + \"/d/\" + item.slug;\n                d.push({\n                    title: item.title,\n                    desc: '发布时间：' + $.dateFormat(new Date(item.createdAt), \"yyyy-MM-dd HH:mm:ss\"),\n                    url: url,\n                    extra: {\n                        longClick: [{\n                            title: \"进入帖子\",\n                            js: JSON.stringify(\"hiker://page/ysfx?webUrl=\" + encodeURIComponent(url))\n                        }]\n                    }\n                });\n            }\n            return d;\n        },\n        findAliUrl(input) {\n            let html = pdfh(request(input), \"Text\");\n            let _links = html.match(/https:\\/\\/(www\\.aliyundrive\\.com\\/s|alywp\\.net)\\/\\w*/g) || [];\n            let sharePwd = html.match(/提取码[:：]\\s*?(\\w{4})/);\n            sharePwd = Array.isArray(sharePwd) && sharePwd.length > 0 ? sharePwd[1] : \"\";\n            if (_links.length > 1 && _links[1].replace(_links[0], \"\").replace(/[a-zA-Z0-9]+/g, \"\") == \"\") {\n                return {\n                    aliUrl: _links[1],\n                    sharePwd: sharePwd\n                };\n            } else if (_links.length > 0) {\n                return {\n                    aliUrl: _links[0],\n                    sharePwd: sharePwd\n                };\n            } else {\n                return \"hiker://page/ysfx?webUrl=\" + encodeURIComponent(input);\n            }\n        }\n    },\n    {\n        name: '云盘分享社区',\n        page: true,\n        find: function(s, page) {\n            let home = \"https://yunpan1.cc\";\n            let d = [];\n            let html = request(buildUrl(home + \"/api/discussions\", {\n                \"include\": \"user,lastPostedUser,mostRelevantPost,mostRelevantPost.user,tags,tags.parent,firstPost\",\n                \"filter[q]\": s /* + \" tag:video,comic\"*/ ,\n                //\"filter[tag]\": \"video,comic\",\n                \"page[offset]\": 20 * (page - 1)\n            }), {\n                headers: {\n                    \"content-type\": \"application/json\",\n                    \"Referer\": \"https://pan666.net/?q=\" + s\n                }\n            });\n            let list = JSON.parse(html).data;\n            for (let i = 0; i < list.length; i++) {\n                let item = list[i].attributes;\n                let url = home + \"/d/\" + item.slug;\n                d.push({\n                    title: item.title,\n                    desc: '发布时间：' + $.dateFormat(new Date(item.createdAt), \"yyyy-MM-dd HH:mm:ss\"),\n                    url: url,\n                    extra: {\n                        longClick: [{\n                            title: \"进入帖子\",\n                            js: JSON.stringify(\"hiker://page/ysfx?webUrl=\" + encodeURIComponent(url))\n                        }]\n                    }\n                });\n            }\n            return d;\n        },\n        findAliUrl(input) {\n            let html = pdfh(request(input), \"Text\");\n            let _links = html.match(/https:\\/\\/(www\\.aliyundrive\\.com\\/s|alywp\\.net)\\/\\w*/g) || [];\n            let sharePwd = html.match(/提取码[:：]\\s*?(\\w{4})/);\n            sharePwd = Array.isArray(sharePwd) && sharePwd.length > 0 ? sharePwd[1] : \"\";\n            if (_links.length > 1 && _links[1].replace(_links[0], \"\").replace(/[a-zA-Z0-9]+/g, \"\") == \"\") {\n                return {\n                    aliUrl: _links[1],\n                    sharePwd: sharePwd\n                };\n            } else if (_links.length > 0) {\n                return {\n                    aliUrl: _links[0],\n                    sharePwd: sharePwd\n                };\n            } else {\n                return \"hiker://page/ysfx?webUrl=\" + encodeURIComponent(input);\n            }\n        }\n    }, {\n        name: \"爱看美剧\",\n        page: true,\n        find: function(s, page) {\n            let url = \"https://www.2kmj.cn/search.php?q=\" + s + \"&page/\" + page + \"/\";\n            let html = request(url);\n            let arr = parseDomForArray(html, \".list-it&&li\");\n\n            let bet = [];\n            for (let i = 0; i < arr.length; i++) {\n                let it = arr[i];\n                let utitle = parseDomForHtml(it, \"a&&title\");\n                let userial = parseDomForHtml(it, \".info&&span:not(:has(a))--i&&Text\");\n                let uimage = parseDom(it, \"img&&src\");\n                let u = parseDom(it, \"a&&href\");\n                bet.push({\n                    title: utitle,\n                    url: u,\n                    pic_url: uimage,\n                    desc: userial\n                });\n            }\n\n            return bet;\n\n        },\n        findAliUrl(input) {\n            return pdfa(request(input), \"body&&#download\").map(v => pdfh(v, \".down&&href\"));\n        }\n    },\n    {\n        name: \"奇妙搜索\",\n        page: true,\n        find(s, page) {\n            let url;\n            if (page === 1) {\n                url = buildUrl(\"https://www.magicalsearch.top/api/pshou/getData\", {\n                    word: s,\n                    type: \"阿里网盘\"\n                });\n            } else {\n                url = buildUrl(\"https://www.magicalsearch.top/api/pshou/getNextPage\", {\n                    url: \"https://api.upyunso2.com/search?s_type=2@page=\" + page + \"@keyword=\" + encodeURIComponent(s),\n                    website: \"阿里网盘\"\n                });\n            }\n            let result = request(url, {\n                headers: {\n                    Referer: buildUrl(\"https://www.magicalsearch.top/search\", {\n                        word: s,\n                        cpage: 0\n                    })\n                }\n            });\n            result = JSON.parse(JSON.parse(result));\n            let list = result.result.items;\n            let d = [];\n            for (let it of list) {\n                if (it.id == -1) {\n                    continue;\n                }\n                d.push({\n                    title: it.title,\n                    desc: \"日期：\" + it.insert_time + \"\\n路径：\" + it.path,\n                    url: it.page_url\n                });\n            }\n            return d;\n        }\n    }\n];"},{"col_type":"movie_3","name":"文件排序","path":"FileSorting","rule":"let chnNumChar = {\n    零: 0,\n    一: 1,\n    二: 2,\n    三: 3,\n    四: 4,\n    五: 5,\n    六: 6,\n    七: 7,\n    八: 8,\n    九: 9\n};\n\nlet chnNameValue = {\n    十: {\n        value: 10,\n        secUnit: false\n    },\n    百: {\n        value: 100,\n        secUnit: false\n    },\n    千: {\n        value: 1000,\n        secUnit: false\n    },\n    万: {\n        value: 10000,\n        secUnit: true\n    },\n    亿: {\n        value: 100000000,\n        secUnit: true\n    }\n}\n\nfunction ChineseToNumber(chnStr) {\n    let rtn = 0;\n    let section = 0;\n    let number = 0;\n    let secUnit = false;\n    let str = chnStr.split('');\n\n    for (let i = 0; i < str.length; i++) {\n        let num = chnNumChar[str[i]];\n        if (typeof num !== 'undefined') {\n            number = num;\n            if (i === str.length - 1) {\n                section += number;\n            }\n        } else {\n            let unit = chnNameValue[str[i]].value;\n            secUnit = chnNameValue[str[i]].secUnit;\n            if (secUnit) {\n                section = (section + number) * unit;\n                rtn += section;\n                section = 0;\n            } else {\n                section += (number * unit);\n            }\n            number = 0;\n        }\n    }\n    return rtn + section;\n}\n\nfunction nameCompare(a, b) {\n    if (a == null || b == null)\n        return a == null ? b == null ? 0 : -1 : 1;\n\n    a = a.replace(/([零一二三四五六七八九十百千万亿])/g, function(match, p1, p2, p3, offset, string) {\n        // p1 is nondigits, p2 digits, and p3 non-alphanumerics\n        return ChineseToNumber(p1);\n    })\n    b = b.replace(/([零一二三四五六七八九十百千万亿])/g, function(match, p1, p2, p3, offset, string) {\n        // p1 is nondigits, p2 digits, and p3 non-alphanumerics\n        return ChineseToNumber(p1);\n    })\n\n    let NUMBERS = java.util.regex.Pattern.compile(\"(?<=\\\\D)(?=\\\\d)|(?<=\\\\d)(?=\\\\D)\")\n    let split1 = NUMBERS.split(new java.lang.String(a));\n    let split2 = NUMBERS.split(new java.lang.String(b));\n\n    for (let i = 0; i < Math.min(split1.length, split2.length); i++) {\n        let c1 = split1[i].charCodeAt(0);\n        let c2 = split2[i].charCodeAt(0);\n        let cmp = 0;\n        let zeroCharCode = '0'.charCodeAt(0);\n        let nineCharCode = '9'.charCodeAt(0);\n\n        if (c1 >= zeroCharCode && c1 <= nineCharCode && c2 >= zeroCharCode && c2 <= nineCharCode) {\n            cmp = new java.math.BigInteger(split1[i]).compareTo(new java.math.BigInteger(split2[i]));\n        }\n\n        if (cmp === 0) {\n            let regex = /[a-zA-Z0-9]/\n            let s1 = String(split1[i])\n            let s2 = String(split2[i])\n            if (regex.test(s1) || regex.test(s2)) {\n                cmp = new java.lang.String(split1[i]).compareTo(new java.lang.String(split2[i]));\n                // cmp = s1.localeCompare(s2, 'en')\n            } else {\n                cmp = s1.localeCompare(s2, 'zh')\n            }\n        }\n\n        if (cmp !== 0) {\n            return cmp;\n        }\n    }\n    let lengthCmp = split1.length - split2.length;\n    // if (lengthCmp !== 0) lengthCmp = lengthCmp > 0 ? -1 : 1;\n    return lengthCmp;\n}\n$.exports.nameCompare = nameCompare;"},{"col_type":"movie_3","name":"登录方式","path":"loginMode","rule":"$.exports = $([\"APP授权登录\", \"网页登录①\", \"网页登录②\", \"TOKEN登录\"], 1, \"登录方式\").select(() => {\n    if (\"网页登录①\" == input) {\n        return \"hiker://page/login#noRecordHistory##noHistory#?pageTitle=登录阿里云盘\"\n    }\n    if (\"网页登录②\" == input) {\n        return \"hiker://page/login#noRecordHistory##noHistory#?index=0&pageTitle=登录阿里云盘\"\n    }\n    if (\"APP授权登录\" == input) {\n        return \"hiker://page/login#noRefresh##noRecordHistory##noHistory#?index=-1&pageTitle=登录阿里云盘\"\n    }\n    if (\"TOKEN登录\" == input) {\n        return $(\"\", \"输入TOKEN\").input(() => {\n            let aliTokensFilepath = $.require(\"hiker://page/tokenPath\").aliTokensFilepath;\n            let aliToken = {\n                refresh_token: input.trim()\n            };\n            writeFile(aliTokensFilepath, JSON.stringify(aliToken));\n            refreshPage();\n        });\n    }\n    if (\"原画登录\" == input) {\n        return \"hiker://page/openApiLogin#noRefresh##noRecordHistory##noHistory#\";\n    }\n});"},{"col_type":"movie_3","name":"阿里链接匹配","path":"alitest","rule":"js:\nlet matchReg = /https?:\\/\\/www.ali(pan|yundrive).com\\/s\\/[a-zA-Z0-9]{11}(\\/folder\\/[a-z0-9]{40})?/;\nlet matchRegG = /https?:\\/\\/www.ali(pan|yundrive).com\\/s\\/[a-zA-Z0-9]{11}(\\/folder\\/[a-z0-9]{40})?/g;\nlet testReg = /www.ali(pan|yundrive).com\\/s\\//;\n$.exports = {\n    matchAliUrl(text, isG) {\n        if (isG) {\n            let url = text.match(matchRegG);\n            if (url) return url;\n            else return [];\n        } else {\n            let url = text.match(matchReg);\n            return url = url && url[0] || \"\";\n        }\n    },\n    test(text){\n        return testReg.test(text);\n    }\n}\n"},{"col_type":"movie_3","name":"openApi登录-废弃","path":"openApiLogin","rule":"js:\nsetPageTitle(\"openApi登录\");\naddListener(\"onClose\", () => clearMyVar(\"Loggingin\"));\n\nlet d = [];\nd.push({\n    title: \"点击获取扫码登录二维码\",\n    desc: \"点击图片可以保存\",\n    col_type: \"text_center_1\",\n    extra: {\n        cls: \"login\",\n        id:\"getQC\"\n    },\n    url: $(\"#noLoading#\").lazyRule(() => {\n        putMyVar(\"Loggingin\", \"true\");\n        showLoading(\"正在获取二维码\");\n\n        function get_qrcode_status(sid) {\n            let res = fetch(\"https://openapi.aliyundrive.com/oauth/qrcode/\" + sid + \"/status\");\n            return JSON.parse(res);\n        }\n\n        function get_refresh_token(code) {\n            let res = post(\"https://aliyundrive-oauth.messense.me/oauth/access_token\", {\n                body: JSON.stringify({\n                    \"grant_type\": \"authorization_code\",\n                    \"code\": code,\n                }),\n            });\n            let data = JSON.parse(res);\n            return data[\"refresh_token\"];\n        }\n        let res = post(\"https://aliyundrive-oauth.messense.me/oauth/authorize/qrcode\", {\n            body: JSON.stringify({\n                \"scopes\": [\"user:base\", \"file:all:read\", \"file:all:write\"],\n                \"width\": 300,\n                \"height\": 300,\n            }),\n        });\n        let data = JSON.parse(res);\n        let sid = data[\"sid\"];\n        let qrcode_url = data[\"qrCodeUrl\"];\n        updateItem(\"infoOutput\", {\n            pic_url: qrcode_url,\n            url: qrcode_url + \"#.jpg\",\n            col_type: \"pic_1_full\"\n        });\n        addItemAfter(\"infoOutput\", {\n            title: \"‘‘’’\" + \"使用阿里云盘 App 扫码\".fontcolor(\"grey\"),\n            col_type: \"text_center_1\",\n            extra: {\n                cls: \"login\"\n            }\n        });\n        deleteItem(\"getQC\");\n        hideLoading();\n        let refresh_token;\n        while (true) {\n            let data;\n            try {\n                data = get_qrcode_status(sid);\n            } catch (e) {\n                return \"toast://查询扫码结果超时, 可能是触发了阿里云盘接口限制, 请稍后再试.\";\n            }\n            let status = data[\"status\"];\n            if (status == \"LoginSuccess\") {\n                refresh_token = get_refresh_token(data[\"authCode\"]);\n                break\n            } else if (status == \"QRCodeExpired\") {\n                return \"toast://二维码已过期, 请刷新页面后重试\";\n            }\n            if (!getMyVar(\"Loggingin\", \"\")) {\n                return \"toast://cancel\";\n            }\n            java.lang.Thread.sleep(1500);\n        }\n        if (refresh_token) {\n            const {\n                openTokensFilepath,\n            } = $.require(\"tokenPath\");\n            let open = {\n                RefreshTokenOpen: refresh_token,\n                isV2: true\n            };\n            writeFile(openTokensFilepath, JSON.stringify(open));\n            addItemAfter(\"infoOutput\", {\n                title: \"登录成功(点击返回)\",\n                url:$(\"#noLoading#\").lazyRule(()=>{\n                    back(false);\n                    return \"hiker://empty\";\n                }),\n                col_type: \"text_center_1\",\n            });\n            deleteItemByCls(\"login\");\n\n            return \"toast://success\";\n        }\n        return \"toast://fail\";\n    })\n});\n\nd.push({\n    col_type: \"blank_block\",\n    extra: {\n        id: \"infoOutput\",\n        cls: \"login\"\n    }\n});\n\nsetResult(d);"},{"col_type":"movie_3","name":"openApi:alist","path":"openApi_alist","rule":"\nfunction OpenApiAlist($this) {\n    this.$this = $this;\n}\nObject.assign(OpenApiAlist.prototype, {\n    getOpenTokenCode() {\n        let result = this.$this.postApi('https://open.aliyundrive.com/oauth/users/authorize?client_id=' + '76917ccccd4441c39457a04f6084fb2f' + '&redirect_uri=https://alist.nn.ci/tool/aliyundrive/callback' + '&scope=user:base,file:all:read,file:all:write&state=').body({\n            \"authorize\": 1,\n            \"scope\": \"user:base,file:all:read,file:all:write\"\n        }).headers({\n            'User-Agent': PC_UA,\n            'Referer': 'https://www.aliyundrive.com/',\n            'authorization': this.$this.reaccessTk, //getAccessToken\n            'x-canary': 'client=web,app=share,version=v2.3.1',\n            'x-share-token': this.$this.shareToken\n        }).errorWithRetry((e,_,http) => {\n            this.$this.trySolve(e);\n            http.mergeHeadAndBody({\n                headers: {\n                    'authorization': this.$this.reaccessTk,\n                    'x-share-token': this.$this.shareToken\n                }\n            });\n            return true;\n        }).start(true);\n        let code = result.redirectUri.split(\"code=\")[1];\n        return code;\n    },\n    getToken(body) {\n        let json = post('https://api.xhofe.top/alist/ali_open/code', {\n            headers: {\n                'User-Agent': PC_UA,\n                'Referer': 'https://www.aliyundrive.com/'\n            },\n            body: JSON.stringify(body),\n        });\n        if (!json) {\n            json = post('https://api-cf.nn.ci/alist/ali_open/code', {\n                headers: headers,\n                body: JSON.stringify(body),\n            });\n        }\n        if (json.includes('Too Many Requests') || json.includes(\"502 Bad Gateway\")) {\n            throw new Error(\"频繁请求暂时被封禁\\n\" + json);\n        } else {\n            let openResult = JSON.parse(json);\n            return openResult;\n        }\n    },\n    getOpenToken() {\n        return this.getToken({\n            code: this.getOpenTokenCode(),\n            grant_type: \"authorization_code\"\n        });\n    },\n    refreshOpenToken() {\n        return this.getToken({\n            grant_type: \"refresh_token\",\n            refresh_token: this.$this.openTokens.RefreshTokenOpen,\n        });\n    }\n});\n$.exports = OpenApiAlist;"},{"col_type":"movie_3","name":"openApi:aliyundrive","path":"openApi_aliyundrive","rule":"js:\nfunction OpenApi($this, postApi) {\n    this.$this = $this;\n}\n\nObject.assign(OpenApi.prototype, {\n    getOpenTokenCode() {\n        function get_qrcode_code(sid) {\n            let res = fetch(\"https://openapi.aliyundrive.com/oauth/qrcode/\" + sid + \"/status\");\n            return JSON.parse(res).authCode;\n        }\n\n        let res = post(\"https://aliyundrive-oauth.messense.me/oauth/authorize/qrcode\", {\n            body: JSON.stringify({\n                \"scopes\": [\"user:base\", \"file:all:read\", \"file:all:write\"],\n                \"width\": 300,\n                \"height\": 300,\n            }),\n        });\n        let data = JSON.parse(res);\n        let sid = data[\"sid\"];\n        let body = {\n            \"authorize\": 1,\n            \"scope\": \"user:base,file:all:read,file:all:write\",\n            \"drives\": [\"backup\", \"resource\"],\n            \"scopes\": [\"user:base\", \"file:all:read\", \"file:all:write\"],\n            \"sid\": sid\n        }\n        let headers = {\n            'authorization': this.$this.reaccessTk\n        };\n        let res2 = this.$this.postApi(\"https://open.aliyundrive.com/oauth/users/qrcode/authorize?sid=\" + sid).body(body).headers(headers).errorWithRetry((e, _, http) => {\n            this.$this.trySolve(e);\n            http.mergeHeadAndBody({\n                headers: {\n                    'authorization': this.$this.reaccessTk,\n                }\n            });\n            return true;\n        }).start(true);\n        return get_qrcode_code(sid);\n    },\n    getToken(body) {\n        let res = post(\"https://aliyundrive-oauth.messense.me/oauth/access_token\", {\n            body: JSON.stringify(body),\n        });\n        let data = JSON.parse(res);\n\n        return data;\n    },\n    getOpenToken() {\n        return this.getToken({\n            code: this.getOpenTokenCode(),\n            grant_type: \"authorization_code\"\n        });\n    },\n    refreshOpenToken() {\n        return this.getToken({\n            grant_type: \"refresh_token\",\n            refresh_token: this.$this.openTokens.RefreshTokenOpen,\n        });\n    }\n});\n$.exports = OpenApi;"},{"col_type":"movie_3","name":"openApi:tvbox","path":"openApi_tvbox","rule":"function OpenApi($this) {\n    this.$this = $this;\n}\n\nObject.assign(OpenApi.prototype, {\n    getOpenTokenCode() {\n        function get_qrcode_code(sid) {\n            let res = fetch(\"https://openapi.aliyundrive.com/oauth/qrcode/\" + sid + \"/status\");\n            return JSON.parse(res).authCode;\n        }\n\n        let res = fetch(\"http://159.75.208.47/cloudisk/api/oauth/authorize/qrcode\");\n        let data = JSON.parse(res);\n        let sid = data[\"sid\"];\n        let body = {\n            \"authorize\": 1,\n            \"scope\": \"user:base,file:all:read,file:all:write\",\n            \"drives\": [\"backup\", \"resource\"],\n            \"scopes\": [\"user:base\", \"file:all:read\", \"file:all:write\"],\n            \"sid\": sid\n        }\n        let headers = {\n            'authorization': this.$this.reaccessTk\n        };\n        let res2 = this.$this.postApi(\"https://open.aliyundrive.com/oauth/users/qrcode/authorize?sid=\" + sid).body(body).headers(headers).errorWithRetry((e, _, http) => {\n            this.$this.trySolve(e);\n            http.mergeHeadAndBody({\n                headers: {\n                    'authorization': this.$this.reaccessTk,\n                }\n            });\n            return true;\n        }).start(true);\n        return get_qrcode_code(sid);\n    },\n    getToken(body) {\n        let url = \"\";\n        if (body.code) {\n            url = buildUrl(\"http://159.75.208.47/cloudisk/api/oauth/accessToken\", {\n                authCode: body.code\n            });\n        } else {\n            url = buildUrl(\"http://159.75.208.47/cloudisk/api/oauth/accessToken\", {\n                refreshToken: body.refresh_token\n            });\n        }\n        let res = fetch(url);\n        let data = JSON.parse(res);\n        let ret = {\n            refresh_token: data.refreshToken,\n            token_type: data.tokenType,\n            access_token: data.accessToken\n        };\n        return ret;\n    },\n    getOpenToken() {\n        return this.getToken({\n            code: this.getOpenTokenCode(),\n            grant_type: \"authorization_code\"\n        });\n    },\n    refreshOpenToken() {\n        return this.getToken({\n            grant_type: \"refresh_token\",\n            refresh_token: this.$this.openTokens.RefreshTokenOpen,\n        });\n    }\n});\n$.exports = OpenApi;"},{"col_type":"movie_3","name":"openApi:XBY","path":"openApi_XBY","rule":"js:\nfunction OpenApi($this, postApi) {\n    this.$this = $this;\n}\n\nObject.assign(OpenApi.prototype, {\n    client_secret: \"63f06c3c5c5d4e1196e2c13e8588ae29\",\n    client_id: \"df43e22f022d4c04b6e29964f3b8b46d\",\n    getOpenTokenCode() {\n        function get_qrcode_code(sid) {\n            let res = fetch(\"https://openapi.aliyundrive.com/oauth/qrcode/\" + sid + \"/status\");\n            return JSON.parse(res).authCode;\n        }\n\n        let res = post(\"https://openapi.aliyundrive.com/oauth/authorize/qrcode\", {\n            body: JSON.stringify({\n                \"scopes\": [\"user:base\", \"file:all:read\", \"file:all:write\"],\n                \"client_secret\": this.client_secret,\n                \"client_id\": this.client_id,\n                \"width\": 350,\n                \"height\": 350,\n            }),\n        });\n        let data = JSON.parse(res);\n        let sid = data[\"sid\"];\n        let body = {\n            \"authorize\": 1,\n            \"scope\": \"user:base,file:all:read,file:all:write\",\n            \"drives\": [\"backup\", \"resource\"],\n            \"scopes\": [\"user:base\", \"file:all:read\", \"file:all:write\"],\n            \"sid\": sid\n        }\n        let headers = {\n            'authorization': this.$this.reaccessTk\n        };\n        let res2 = this.$this.postApi(\"https://open.aliyundrive.com/oauth/users/qrcode/authorize?sid=\" + sid).body(body).headers(headers).errorWithRetry((e, _, http) => {\n            this.$this.trySolve(e);\n            http.mergeHeadAndBody({\n                headers: {\n                    'authorization': this.$this.reaccessTk,\n                }\n            });\n            return true;\n        }).start(true);\n        return get_qrcode_code(sid);\n    },\n    getToken(body) {\n        let res = post(\"https://openapi.aliyundrive.com/oauth/access_token\", {\n            body: JSON.stringify(body),\n        });\n        let data = JSON.parse(res);\n\n        return data;\n    },\n    getOpenToken() {\n        return this.getToken({\n            code: this.getOpenTokenCode(),\n            grant_type: \"authorization_code\",\n            client_secret: this.client_secret,\n            client_id: this.client_id,\n        });\n    },\n    refreshOpenToken() {\n        return this.getToken({\n            grant_type: \"refresh_token\",\n            refresh_token: this.$this.openTokens.RefreshTokenOpen,\n            client_secret: this.client_secret,\n            client_id: this.client_id,\n        });\n    }\n});\n$.exports = OpenApi;"},{"col_type":"movie_3","name":"链接定向","path":"redirect","rule":"js:\nconst openMode = getItem(\"openMode\", \"本地解析\");\nif (openMode === \"本地转码\") {\n    setItem(\"openMode\", \"本地解析\");\n    openMode = \"本地解析\";\n}\n\nfunction dealArray(array) {\n    let isString = typeof array[0] === \"string\";\n    if (array.length === 1) {\n        return dealResult(array[0]);\n    } else if (isString) {\n        array = array.map(aliUrl => ({\n            aliUrl\n        }));\n    }\n    let select = array.map((v, i) => v.title || v.aliUrl.replace(/http.*?\\/s\\//, \"\"));\n    return $(select).select((result) => {\n        let index = MY_INDEX;\n        return $.require(\"redirect\").dealResult(result[index]);\n    }, array);\n}\n\nfunction dealResult(result) {\n    let resultType = typeof result;\n    if (resultType === \"string\") {\n        return getModeUrl(result);\n    } else if (Array.isArray(result)) {\n        return dealArray(result);\n    } else if (result instanceof EasyNextPage) {\n        return result.toNextPage();\n    } else if (resultType === \"object\") {\n        return getModeUrl(result.aliUrl, result.sharePwd);\n    }\n    return \"toast://错误类型：\" + resultType;\n}\n\nfunction EasyNextPage(list, col) {\n    //this.list = list;\n    col = col || \"text_3\";\n    this.toNextPage = function() {\n        return $().rule((list, col_type) => {\n            setResult(list.map(v => ({\n                col_type,\n                url: $().lazyRule(v => $.require(\"redirect\").dealResult(v), v),\n                title: v.title || v.aliUrl.replace(/http.*?\\/s\\//, \"\")\n            })));\n        }, list, col);\n    }\n}\n\nfunction setErrorPop(name, author) {\n    return $(\"搜索引擎「\" + name + \"」失效请联系搜索引擎作者\" + (author ? \"[\" + author + \"]\" : \"\") + \"修复或删除\\n\\n引擎作者可以去官方频道询问\\n点击确定快速删除\").confirm((name) => {\n        confirm({\n            title: \"温馨提示\",\n            content: \"确定要删除\" + name + \"吗？注意删除后无法恢复\",\n            confirm: $.toString((name) => {\n                let arr = $.require(\"configs\").getJson();\n                let index = arr.findIndex(v => v.name === name);\n                arr.splice(index, 1);\n                $.require(\"configs\").saveJson(arr);\n                clearItem(\"rule\");\n                refreshPage(true);\n                return \"toast://删除成功\";\n            }, name)\n        });\n    }, name);\n}\n\nfunction doubleTreating({\n    findAliUrl,\n    basicUrl,\n    name,\n    author,\n    aliUrl,\n    ruleType\n}) {\n    if (!findAliUrl) return getModeUrl(aliUrl);\n    if (ruleType === \"JSON\") {\n        let ParseRlue = $.require(\"ParseRlue\");\n        let find = findAliUrl;\n        findAliUrl = (url, basicUrl) => {\n            return ParseRlue.parseUrlJson(url, find, basicUrl);\n        }\n    }else if (ruleType === \"HTML\") {\n        let ParseRlue = $.require(\"ParseRlue\");\n        let find = findAliUrl;\n        findAliUrl = (url, basicUrl) => {\n            return ParseRlue.parseUrlHtml(url, find, basicUrl);\n        }\n    } else {\n        findAliUrl = new Function(\"input\", \"basicUrl\", \"EasyNextPage\", findAliUrl);\n    }\n    try {\n        let result = findAliUrl(aliUrl, basicUrl, EasyNextPage);\n        return dealResult(result);\n    } catch (e) {\n        log(e.toString());\n        return setErrorPop(name, author);\n    }\n}\n\nfunction getModeUrl(aliUrl, sharePwd) {\n    if ($.require(\"alitest\").test(aliUrl)) {\n        if (openMode === \"本地解析\") {\n            return \"hiker://page/aliyun?page=fypage&realurl=\" + encodeURIComponent(aliUrl) + \"&sharePwd=\" + (sharePwd || \"\");\n        } else {\n            shareId = aliUrl.split(\"/\")[4];\n            return \"smartdrive://share/browse?shareId=\" + shareId + \"&sharePwd=\" + (sharePwd || \"\");\n        }\n    } else if (aliUrl.includes(\"pan.quark.cn/s/\")||aliUrl.includes(\"drive.uc.cn/s/\")) {\n        if (openMode === \"本地解析\") {\n            let has = fetch(\"hiker://home@Quark.简\") != \"null\";\n            if (has) {\n                return \"hiker://page/quarkList?rule=Quark.简&realurl=\" + encodeURIComponent(aliUrl) + \"&sharePwd=\" + (sharePwd || \"\");\n            } else {\n                return aliUrl;\n            }\n        } else {\n            return \"qklink://www.uc.cn/b20b84fd735a8dd3f7541129bacc4e9a?action=open_url&url=\" + aliUrl;\n        }\n    } else if (aliUrl.startsWith(\"http\")) {\n        return aliUrl;\n    } else if (aliUrl.startsWith(\"magnet\")) {\n        if (openMode === \"本地解析\") {\n            return aliUrl;\n        } else {\n            return \"download://\" + aliUrl;\n        }\n    } else {\n        return aliUrl;\n    }\n}\n$.exports.getModeUrl = getModeUrl;\n$.exports.doubleTreating = doubleTreating;\n$.exports.dealResult = dealResult;"},{"col_type":"movie_3","name":"规则解析","path":"ParseRlue","rule":"function toPath(value) {\n    if (typeof value !== 'string') {\n        return [];\n    }\n    let path = [];\n    let current = '';\n    let inBrackets = false;\n    let escape = false;\n    for (let i = 0; i < value.length; i++) {\n        let char = value[i];\n        if (escape) {\n            current += char;\n            escape = false;\n        } else if (char === '\\\\') {\n            escape = true;\n        } else if (char === '.' && !inBrackets) {\n            path.push(current);\n            current = '';\n        } else if (char === '[') {\n            inBrackets = true;\n        } else if (char === ']') {\n            inBrackets = false;\n        } else {\n            current += char;\n        }\n    }\n    if (current) {\n        path.push(current);\n    }\n    return path;\n}\n\nfunction getJson(obj, path) {\n    if (!obj || !Array.isArray(path)) {\n        return undefined;\n    }\n    if (path.length === 0) {\n        return obj;\n    }\n    let current = obj;\n    for (let i = 0; i < path.length; i++) {\n        let key = path[i];\n\n        if (current === null || current === undefined || typeof current !== 'object') {\n            return undefined;\n        }\n        current = current[key];\n    }\n    return current;\n}\n\nfunction dealRule(json, rule, basicUrl) {\n    if (!rule) return;\n    rule = rule.split(\"@js=\");\n    let rule0 = rule.at(0);\n    let t = \"\";\n    if (rule0) {\n        t = getJson(json, toPath(rule0));\n    } else {\n        t = json;\n    }\n    if (rule.length > 1) {\n        return new Function(\"input\", \"$$\", \"basicUrl\", '\"use strict\";return ' + rule.at(1))(t, json, basicUrl);\n    }\n    return t;\n}\n\nfunction parseSearchJson(url, rule) {\n    let json = JSON.parse(fetch(url));\n    let rules = rule.split(\"\\n\");\n    let list = getJson(json, toPath(rules.at(0)));\n    if (!list || !Array.isArray(list)) {\n        throw new Error(\"JSON:列表解析为空\");\n    }\n    let data = [];\n    for (let it of list) {\n        data.push({\n            title: dealRule(it, rules.at(1), url),\n            url: dealRule(it, rules.at(2), url),\n            desc: dealRule(it, rules.at(3), url),\n            pic_url: dealRule(it, rules.at(4), url),\n        });\n    }\n    return data;\n}\n\nfunction parseUrlJson(url, rule, basicUrl) {\n    if (rule.startsWith(\"@js=\")) {\n        return dealRule(url, rule, basicUrl);\n    } else {\n        let json = JSON.parse(fetch(url));\n        return dealRule(json, rule, basicUrl);\n    }\n\n}\n\nfunction dealRuleForHtml(html, rule, basicUrl) {\n    if (!rule) return;\n    rule = rule.split(\"@js=\");\n    let rule0 = rule.at(0);\n    let t = \"\";\n    if (rule0) {\n        t = pdfh(html, rule0);\n    } else {\n        t = html\n    }\n    if (rule.length > 1) {\n        return new Function(\"input\", \"$$\", \"basicUrl\", '\"use strict\";return ' + rule.at(1))(t, html, basicUrl);\n    }\n    return t;\n}\n\nfunction parseSearchHtml(url, rule) {\n    let html = fetch(url);\n    let rules = rule.split(\"\\n\");\n    let list = pdfa(html, rules.at(0));\n    if (!list || !Array.isArray(list)) {\n        throw new Error(\"HTML:列表解析为空\");\n    }\n    let data = [];\n    for (let it of list) {\n        let curl = dealRuleForHtml(it, rules.at(2), url);\n        data.push({\n            title: dealRuleForHtml(it, rules.at(1), url),\n            url: curl.startsWith(\"http\") ? curl : (getHome(url) + curl),\n            desc: dealRuleForHtml(it, rules.at(3), url),\n            pic_url: dealRuleForHtml(it, rules.at(4), url),\n        });\n    }\n    return data;\n}\n\nfunction parseUrlHtml(url, rule, basicUrl) {\n    if (rule.startsWith(\"@js=\")) {\n        return dealRuleForHtml(url, rule, basicUrl);\n    } else {\n        let html = fetch(url);\n        return dealRuleForHtml(html, rule, basicUrl);\n    }\n}\n$.exports = {\n    parseSearchJson,\n    parseUrlJson,\n    parseSearchHtml,\n    parseUrlHtml\n};"},{"col_type":"movie_3","name":"我的阿里","path":"myaliyun","rule":"js:\n//@author LoyDgIk\nconst AliAccessApi = $.require(\"aliPlayApi\");\nlet openAPIList = [\"alist\", \"drive\", \"tvbox\", \"XBY\", \"TV\"];\nlet shareInfo = MY_PARAMS.shareInfo;\nif (MY_PARAMS.transfer) {\n    if (!shareInfo) {\n        shareInfo = MY_PARAMS;\n    }\n    MY_PARAMS = {\n        isHome: true,\n        shareInfo\n    };\n}\n\nlet fileId = MY_PARAMS.fileId || \"root\";\nlet searchKey = decodeURIComponent(getParam(\"searchKey\", \"\")) || undefined;\nlet isSearch = !!searchKey;\n\nlet pageId = String(Date.now()).slice(6);\n\nlet skipFile = Number(getItem(\"myskipFile\", \"0\"));\n\nfunction signInReward(aliAccessApi) {\n    let today = $.dateFormat(Date.now(), \"yyyyMMdd\");\n    let lastday = getItem(\"AliDay\", \"0\");\n    if (today != lastday && new Date().getHours() >= 0) {\n        setItem(\"AliDay\", today);\n        let result = \"\";\n        try {\n            if ((result = aliAccessApi.signInReward())) {\n                toast(result);\n            } else {\n                toast(result);\n            }\n        } catch (e) {\n            toast(\"签到失败:\" + e.toString());\n        }\n    }\n}\n\nfunction formatDate(_date, fmt) {\n    let date = !isNaN(_date) ? new Date(_date * 1000) : new Date(_date);\n    return $.dateFormat(date, fmt || \"yyyy-MM-dd HH:mm:ss\")\n}\n\nfunction formatSize(size) {\n    if (!size) {\n        return '';\n    }\n    const units = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n    let i = 0;\n    while (size >= 1024) {\n        size /= 1024;\n        i++;\n    }\n    size = i ? Number(size.toFixed(2)) : size;\n    return `${size} ${units[i]}`;\n}\n\nfunction setMyPaCache(key, value) {\n    MY_PARAMS[key] = value;\n}\n\nfunction saveMyPaCache() {\n    setPageParams(MY_PARAMS);\n}\n\nfunction setMarker(marker) {\n    setMyPaCache(\"marker\", marker);\n}\n\n\nif (MY_PARAMS.noPic) {\n    setPagePicUrl();\n    setMyPaCache(\"noPic\", false);\n}\n/*\nfunction setVideoItemCache(videoItemCache) {\n    setMyPaCache(\"videoItemCache\", videoItemCache);\n}\n\nfunction setSubtitleCache(subtitleCache) {\n    setMyPaCache(\"subtitleCache\", subtitleCache);\n}*/\n\nlet iconType = \"ai|apk|avi|css|dmg|exe|flv|gif|hiker|html|iso|jpg|js|json|log|mov|mp3|mp4|otf|php|png|ppt|psd|table|txt|wav|xls|zip|css|doc|epub|exc|htm|xlsx\".split('|');\n\nfunction getIcon(ext, type) {\n    let root = \"https://gitcode.net/qq_32394351/dr/-/raw/master/img/文件类型2/\";\n    if (type === \"folder\") {\n        return root + \"文件夹.svg\";\n    }\n    if (iconType.includes((ext || \"\").toLowerCase())) {\n        return root + ext + \".svg\";\n    }\n    return root + \"文件.svg\";\n\n}\n\nfunction load(items) {\n    const aliAccessApi = AliAccessApi.createDefault();\n\n    let orders = {\n        \"名称正序\": \"name#ASC\",\n        \"名称倒序\": \"name#DESC\",\n        \"时间正序\": \"updated_at#ASC\",\n        \"时间倒序\": \"updated_at#DESC\",\n        \"大小正序\": \"size#ASC\",\n        \"大小倒序\": \"size#DESC\"\n    };\n    let playMode = getItem(\"my_aliyun_playMode\", \"转码\");\n    let ordersKeys = Object.keys(orders);\n    let orderName = getItem(\"aliyun_order\", ordersKeys[0]);\n    let order = orders[orderName].split(\"#\");\n    let styles = [\"text_1\", \"movie_2\", \"card_pic_3\", \"avatar\", \"追剧\", \"看图\"];\n    let style = getItem(\"aliyun_style\", styles[0]);\n\n    let isBackupDrivid = MY_PARAMS.isBackupDrivid || getItem(\"myAliPanDrivid\", \"false\") === \"true\";\n    aliAccessApi.setMyDrividType(isBackupDrivid);\n    if (MY_PAGE === 1) {\n        if (!getMyVar(\"mountzimu\", \"\")) {\n            storage0.putMyVar(\"mountzimu\", {});\n            addListener(\"onClose\", $.toString(() => {\n                clearMyVar(\"mountzimu\");\n                clearMyVar(\"aliShareToken\");\n                clearVar(\"dm_share\");\n                clearMyVar(\"dmlist\");\n                clearMyVar(\"listSearchKey\");\n                clearMyVar(\"dm_listUrlList\");\n            }));\n        }\n        setMarker();\n        if (MY_PARAMS.isHome) {\n            //signInReward(aliAccessApi);\n            items.push({\n                title: \"备份盘\" + [\"\", \"√\"][Number(isBackupDrivid)],\n                url: $(\"#noLoading#\").lazyRule(() => {\n                    setItem(\"myAliPanDrivid\", \"true\");\n                    refreshPage();\n                    return \"hiker://empty\";\n                }),\n                col_type: \"text_2\",\n            });\n            items.push({\n                title: \"资源盘\" + [\"√\", \"\"][Number(isBackupDrivid)],\n                url: $(\"#noLoading#\").lazyRule(() => {\n                    setItem(\"myAliPanDrivid\", \"false\");\n                    refreshPage();\n                    return \"hiker://empty\";\n                }),\n                col_type: \"text_2\",\n            });\n        }\n        if (shareInfo) {\n            items.push({\n                title: \"““转存到当前文件夹””\",\n                url: $(\"#noLoading#\").lazyRule((shareInfo, isBackupDrivid, fileId) => {\n                    const AliAccessApi = $.require(\"aliPlayApi\");\n                    let aliAccessApi = AliAccessApi.createDefault(shareInfo.shareId, shareInfo.sharePwd, shareInfo.shareToken);\n                    aliAccessApi.setMyDrividType(isBackupDrivid);\n                    aliAccessApi.copyFileToCloudFile(shareInfo.fileId, fileId);\n                    backToHome();\n                    return \"hiker://empty\";\n                }, shareInfo, isBackupDrivid, fileId),\n                col_type: \"text_center_1\",\n            });\n        }\n        if (!isSearch) {\n            items.push({\n                title: \"搜索\",\n                url: $.toString(() => {\n                    input = input.trim();\n                    if (!input) return \"toast://请输入关键词\";\n                    return \"hiker://page/myaliyun#noHistory##fullTheme#?page=fypage&searchKey=\" + encodeURIComponent(input);\n                }),\n                col_type: \"input\",\n                extra: {\n                    onChange: \"putMyVar('listSearchKey',input)\",\n\n                }\n            });\n        } else {\n            items.push({\n                title: \"““\" + searchKey + \"””的搜索结果\",\n                url: \"hiker://empty\",\n                col_type: \"text_center_1\",\n                extra: {\n                    lineVisible: false\n                }\n            });\n        }\n        let funcItems = [];\n        funcItems.push({\n            title: style,\n            url: $(styles, 1, \"排布样式\").select(() => {\n                setItem(\"aliyun_style\", input);\n                refreshPage();\n                return \"toast://已切换\";\n            }),\n            pic_url: \"https://hikerfans.com/img/ali_icon.svg\"\n        }, {\n            title: orderName,\n            url: $(ordersKeys, 2, \"排序方式\").select(() => {\n                setItem(\"aliyun_order\", input);\n                refreshPage();\n                return \"toast://切换成功\";\n            }),\n            pic_url: \"https://hikerfans.com/img/ali_sort.svg\"\n        }, {\n            title: playMode,\n            url: $([\"转码\", \"原画\", \"极速原画\"], 1, \"播放模式\").select(() => {\n                setItem(\"my_aliyun_playMode\", input);\n                refreshPage();\n                return \"toast://切换成功\";\n            }),\n            pic_url: \"https://hikerfans.com/img/ali_play.svg\",\n        });\n\n        funcItems.push({\n            title: openAPIList[getItem(\"openApiMode\", \"0\")],\n            url: $(openAPIList, 1, \"原画API(不要频繁切换)\").select((openAPIList) => {\n                setItem(\"openApiMode\", String(openAPIList.indexOf(input)));\n                deleteFile($.require(\"tokenPath\").openTokensFilepath);\n                refreshPage(false);\n                return \"toast://已切换为\" + input;\n            }, openAPIList),\n            pic_url: \"https://hikerfans.com/img/ali_api.svg\",\n        });\n\n        if (!isSearch) {\n            funcItems.push({\n                title: \"功能\",\n                url: $([\"查看手动挂载字幕\", \"获取弹幕搜索规则\", \"批量挂载本地弹幕\", \"推送到TVBox\", \"设置收藏封面\", \"获取投屏IP\" , \"极速原画下载线程\"], 2, \"更多功能\").select(() => {\n                    switch (input) {\n                        case \"批量挂载本地弹幕\":\n                            return \"hiker://page/dmMount#noHistory##noRecordHistory#\";\n                        case \"查看手动挂载字幕\":\n                            let zm = storage0.getMyVar(\"mountzimu\", {});\n                            let tip = zm.name ? \"当前字幕文件\\n\" + zm.name + \".\" + zm.ext : \"还未手动挂载字幕\";\n                            confirm({\n                                title: '手动挂载字幕',\n                                content: tip + \"\\n(点击取消可以清除挂载字幕)\",\n                                cancel: () => {\n                                    clearMyVar(\"mountzimu\");\n                                    return \"toast://已清除手动挂载字幕\";\n                                }\n                            });\n                            return;\n                        case \"获取弹幕搜索规则\":\n                            let rule = {\n                                \"js\": JSON.stringify(\"hiker://page/loadDm?rule=\" + MY_RULE.title + \"&title=\") + \"+encodeURIComponent(playdata.title.split('-')[0]);\",\n                                \"name\": MY_RULE.title + \"弹幕搜索\"\n                            };\n                            return \"rule://\" + base64Encode(\"￥projection_screen￥\" + JSON.stringify(rule));\n                        case \"推送到TVBox\":\n                            return \"hiker://page/tvboxPush#noHistory##noRecordHistory#\";\n                        case \"设置收藏封面\":\n                            return $([\"设置封面地址\", \"搜索封面\"], 1).select(() => {\n                                if (input === \"设置封面地址\") {\n                                    return $(\"\", \"请输入图片地址\").input(() => {\n                                        input = input.trim();\n                                        if (!input) return \"toast://请输入地址\";\n                                        setPagePicUrl(input);\n                                        return \"toast://修改成功\";\n                                    });\n                                } else {\n                                    return \"hiker://page/frontCover#noHistory##noRecordHistory#\";\n                                }\n                            });\n                        case \"获取投屏IP\":\n                            let ip = $.require(\"aliUtil\").getIPv4Address();\n                            if (ip.startsWith(\"192.168.\")) {\n                                return $(ip + \"\\n该IP适用于流量+热点的投屏\\n请替换链接中的0.0.0.0\").confirm((ip) => {\n                                    return \"copy://\" + ip;\n                                }, ip);\n                            } else {\n                                return $(ip + \"\\n获取失败非稳定IP,请开启热点再使用,该IP可能会变,不能投屏\").confirm(() => {});\n                            }\n                        case \"极速原画下载线程\":\n                            return $(getItem(\"speedThread\", \"10\"), \"请输入3-32之间的整数\").input(() => {\n                                let speedThread = parseInt(input);\n                                if (speedThread < 3 || speedThread > 32) {\n                                    return \"toast://设置不合法\";\n                                }\n                                setItem(\"speedThread\", String(speedThread));\n                                return \"toast://设置成功\";\n                            });\n                    }\n                }),\n                pic_url: \"https://hikerfans.com/img/ali_fileinto.svg\",\n                extra: {\n                    pageId: pageId,\n                    fileId: fileId,\n                    folderName: getPageTitle()\n                }\n            });\n        } else {\n            funcItems.push({\n                title: [\"ALL\", \"仅文件\", \"仅文件夹\"][skipFile],\n                url: $([\"ALL\", \"仅文件\", \"仅文件夹\"]).select(() => {\n                    setItem(\"myskipFile\", String(MY_INDEX));\n                    refreshPage(false);\n                    return \"hiker://empty\";\n                }),\n                pic_url: \"hiker://images/icon_search6\",\n            });\n        }\n        let funStyle = [\"\", \"\", \"\", \"icon_small_3\", \"icon_round_small_4\", \"icon_5\"][funcItems.length];\n        items.push.apply(items, funcItems.map(v => (v.col_type = funStyle) && v));\n        items.push({\n            col_type: \"line_blank\"\n        });\n    }\n    let rescod = {};\n    let marker = MY_PARAMS.marker;\n    if (isSearch) {\n        rescod = aliAccessApi.getSearchListFile(searchKey, marker, order[0], order[1], skipFile);\n    } else {\n        rescod = aliAccessApi.getListFile(fileId, marker, order[0], order[1]);\n    }\n    if (rescod.next_marker) {\n        setMarker(rescod.next_marker);\n    } else {\n        setMarker();\n    }\n\n    var conts = rescod.items;\n    //字幕匹配准备\n    let subExts = [\"vtt\", \"srt\", \"ass\"];\n    var zimulist = [];\n    conts.forEach((item) => {\n        if (subExts.includes(item.file_extension && item.file_extension.toLowerCase())) {\n            let name = item.name.replace('.' + item.file_extension, '');\n            zimulist.push({\n                ext: item.file_extension,\n                file_id: item.file_id,\n                name: name\n            });\n        }\n    });\n    //处理夸页匹配字幕\n    /*\n    let hasSub = zimulist.length > 0;\n    if (hasSub&&rescod.next_marker) {\n        if (zimulist.length > 4) {\n            setSubtitleCache(zimulist.slice(-4));\n        } else {\n            setSubtitleCache(zimulist);\n        }\n    }\n    let lastItem = conts.at(-1);\n    if (hasSub&&lastItem&&lastItem.category === \"video\") {\n        setVideoItemCache(conts.splice(conts.length-1,1));\n    }\n    if (MY_PAGE > 1) {\n        let subtitleCache = MY_PARAMS.subtitleCache || [];\n        zimulist = zimulist.concat(subtitleCache);\n        let videoItemCache = MY_PARAMS.videoItemCache || [];\n        conts = videoItemCache.concat(conts);\n        setSubtitleCache();\n        setVideoItemCache();\n    }*/\n    //简体优先\n    zimulist.sort((a, b) => (b.name.endsWith(\".sc\") || b.name.endsWith(\".chs\")) - (a.name.endsWith(\".sc\") || a.name.endsWith(\".chs\")));\n    //end\n    let titleHead = {\n        video: \"🎬\",\n        audio: \"🎵\",\n        doc: \"📑\",\n        image: \"🖼\",\n        zip: \"📦\",\n        folder: \"📂\"\n    };\n\n    function getHead(type, ext) {\n        let head = titleHead[type];\n        if (subExts.includes(ext)) {\n            head = \"🕸\";\n        }\n        return head || \"❓\";\n    }\n\n    function getPreviewPic(fileItem) {\n        if (fileItem.thumbnail) {\n            return $(\"https://empty?\" + fileItem.file_id).image((pic) => {\n                try {\n                    return fetch(pic, {\n                        inputStream: true\n                    });\n                } catch (e) {\n                    return null;\n                }\n            }, fileItem.thumbnail);\n        }\n    }\n\n    function deleteDFile(fileId, isBackupDrivid, name) {\n        return $(\"确认永久删除[\" + name + \"]\").confirm((fileId, isBackupDrivid) => {\n            const AliAccessApi = $.require(\"aliPlayApi\");\n            let aliAccessApi = AliAccessApi.createDefault();\n            aliAccessApi.setMyDrividType(isBackupDrivid);\n            aliAccessApi.deleteeCloudFile(fileId);\n            refreshPage(false);\n            return \"hiker://empty\";\n        }, fileId, isBackupDrivid);\n    }\n    let folderStyle, fileStyle;\n    let filterType = [];\n    if (style === \"追剧\") {\n        folderStyle = \"avatar\";\n        fileStyle = \"movie_2\";\n        filterType.push(\"video\");\n        items.push({\n            title: \"““””\" + \"追剧模式只显示文件夹和视频\".small().fontcolor(\"grey\"),\n            url: \"hiker://empty\",\n            col_type: \"text_center_1\",\n            extra: {\n                lineVisible: false\n            }\n        });\n    } else if (style === \"看图\") {\n        folderStyle = \"avatar\";\n        fileStyle = \"card_pic_3\";\n        filterType.push(\"image\");\n        items.push({\n            title: \"““””\" + \"看图模式只显示文件夹和图片\".small().fontcolor(\"grey\"),\n            url: \"hiker://empty\",\n            col_type: \"text_center_1\",\n            extra: {\n                lineVisible: false\n            }\n        });\n    } else {\n        folderStyle = fileStyle = style;\n    }\n    let noSkipFile = true;\n    for (let i = 0; i < conts.length; i++) {\n        let fileItem = conts[i];\n        let cate = fileItem.category;\n        let desc = formatDate(fileItem.updated_at);\n        let pic_url = getIcon(fileItem.file_extension, fileItem.type);\n\n        if (fileItem.type === \"folder\") {\n            let title = (folderStyle === \"text_1\" ? titleHead.folder : \"\") + fileItem.name;\n            items.push({\n                title: title,\n                url: 'hiker://page/myaliyun?page=fypage',\n                col_type: folderStyle,\n                desc: formatDate(fileItem.updated_at),\n                pic_url: pic_url,\n                extra: {\n                    fileId: fileItem.file_id,\n                    isBackupDrivid,\n                    pageTitle: fileItem.name,\n                    shareInfo,\n                    noPic: true,\n                    longClick: [{\n                        title: \"删除文件夹\",\n                        js: $.toString(deleteDFile, fileItem.file_id, isBackupDrivid, fileItem.name)\n                    }]\n                }\n            });\n        } else if (noSkipFile) {\n            if (filterType.length > 0 && !filterType.includes(cate)) {\n                continue;\n            }\n            let subtitle, cls, longc = [{\n                title: \"删除文件\",\n                js: $.toString(deleteDFile, fileItem.file_id, isBackupDrivid, fileItem.name)\n            }];\n            let title = fileItem.name;\n            let nameNotExt = fileItem.name.replace('.' + fileItem.file_extension, '');\n            if (subExts.includes(fileItem.file_extension)) {\n                longc.push({\n                    title: \"挂载字幕\",\n                    js: $.toString((zm) => {\n                        storage0.putMyVar('mountzimu', zm);\n                        return 'toast://挂载完成，当前字幕文件: ' + zm.name + '.' + zm.ext;\n                    }, {\n                        ext: fileItem.file_extension,\n                        file_id: fileItem.file_id,\n                        name: nameNotExt\n                    }),\n                });\n            }\n            if (cate === \"video\") {\n                if (zimulist.length) {\n                    subtitle = zimulist.find(v => v.name.includes(nameNotExt));\n                }\n                cls = \"playlist v\" + pageId;\n            }\n            if (fileStyle === \"text_1\") {\n                desc += \"\\t\\t\" + formatSize(fileItem.size);\n                title = getHead(cate, fileItem.file_extension) + title;\n            } else if ([\"video\", \"image\"].includes(cate)) {\n                pic_url = getPreviewPic(fileItem) || pic_url;\n            }\n            items.push({\n                title: title,\n                url: $(\"#noPre#\").lazyRule((fileId, cate, isBackupDrivid, subtitle) => {\n                    return $.require(\"myalilazy\")(fileId, cate, isBackupDrivid, subtitle);\n                }, fileItem.file_id, cate, isBackupDrivid, subtitle),\n                desc: desc,\n                pic_url: pic_url,\n                extra: {\n                    id: fileItem.file_id,\n                    longClick: longc,\n                    cls: cls,\n                    //inheritTitle: false,\n                    pageTitle: fileItem.name\n                },\n                col_type: fileStyle\n            });\n        }\n    }\n    if (conts.length === 0) {\n        items.push({\n            col_type: \"text_center_1\",\n            url: \"hiker://empty\",\n            title: \"““””\" + \"~~~什么都没有了哦~~~\".fontcolor(\"Gray\"),\n            extra: {\n                lineVisible: false,\n            }\n        });\n    }\n}\n\nlet items = [];\ntry {\n    if (MY_PAGE > 1 && !MY_PARAMS.marker) {\n        items.push({\n            col_type: \"text_center_1\",\n            url: \"hiker://empty\",\n            title: \"““””\" + \"~~~什么都没有了哦~~~\".fontcolor(\"Gray\"),\n            extra: {\n                lineVisible: false,\n            }\n        });\n    } else {\n        load(items);\n    }\n} catch (e) {\n\n    log(\"列表加载失败#\\n错误信息>\" + e.toString() + \"\\n错误行>\" + e.lineNumber);\n    items.push({\n        title: '欧欧，报错了。在刷新几次？或者更换文件夹。',\n        url: \"hiker://empty\",\n        desc: e.toString(),\n        col_type: 'text_center_1'\n    });\n    //throw e;\n}\nsaveMyPaCache();\nsetResult(items);"},{"col_type":"movie_3","name":"我的阿里Lazy","path":"myalilazy","rule":"const AliAccessApi = $.require(\"aliPlayApi\");\nconst {\n    openTokensFilepath,\n    aliTokensFilepath\n} = $.require(\"tokenPath\");\n\nfunction aliM3u8Proxy(fileId, aliToken, isBackupDrivid, title) {\n    let suffix = \"media.m3u8\";\n    let urlname = \"url\";\n    let cacheFilePath = \"hiker://files/_cache/\" + fileId + MY_PARAMS.timestamp[0]+ \".m3u8\"\n    //过期获取播放原始链接\n    function getAliPlayUrl(fileId, line) {\n        let aliurl;\n        try {\n            const AliAccessApi = $.require(\"hiker://page/aliPlayApi?rule=\" + title);\n            let aliAccessApi = AliAccessApi.createDefault(null, null, null, aliToken, null, title).setMyDrividType(isBackupDrivid);\n            let playUrlList =  aliAccessApi.getVideoCloudPreview(fileId) || [];\n\n            aliurl = playUrlList.find(v => v.template_id == line)[urlname];\n        } catch (e) {\n            log(e.toString());\n            throw e;\n        }\n        return aliurl;\n    }\n\n    function getM3u8Content(playurl) {\n        //media.m3u8\n        let home = playurl.split(suffix)[0];\n        let f = fetch(playurl, {\n            headers: {\n                \"User-Agent\": PC_UA,\n                \"Referer\": \"https://www.aliyundrive.com/\"\n            },\n            timeout: 3000\n        }).split(\"\\n\");\n        let ff = f.map(it => {\n            if (it.startsWith(\"media-\")) {\n                return \"/proxy?url=\" + base64Encode(home + it)+\"&timestamp=\"+MY_PARAMS.timestamp[0];\n            }\n            return it;\n        }).join(\"\\n\");\n\n        writeFile(cacheFilePath, ff);\n        return ff;\n    }\n\n    function updateTsUrl(url) {\n        let fid = url.split('&f=')[1].split('&')[0];\n        //log('sfid-' + fid);\n        let f = fetch(cacheFilePath).split(\"\\n\");\n        f.forEach(it => {\n            if (it && it.startsWith('/proxy?url=')) {\n                let furl = base64Decode(it.replace('/proxy?url=', '').split(\"&\")[0]);\n                if (url.substr(url.indexOf('/media-'), url.indexOf('.ts')) == furl.substr(furl.indexOf('/media-'), furl.indexOf('.ts'))) {\n                    url = furl;\n                }\n            }\n        })\n        let expires = url.split('x-oss-expires=')[1].split('&')[0];\n        const lasttime = parseInt(expires) - Date.now() / 1000;\n        if (lasttime < 60) {\n            //log('过期更新')\n            let line = url.split('/media')[0]; //取之前播放的ts段线路\n            line = line.substring(line.lastIndexOf('/') + 1);\n            let f = getM3u8Content(getAliPlayUrl(fid, line)).split(\"\\n\");\n            f.forEach(it => {\n                if (it && it.startsWith('/proxy?url=')) {\n                    let furl = base64Decode(it.replace('/proxy?url=', ''));\n                    if (url.substr(url.indexOf('/media-'), url.indexOf('.ts')) == furl.substr(furl.indexOf('/media-'), furl.indexOf('.ts'))) {\n                        url = furl;\n                    }\n                }\n            })\n\n        }\n        return url;\n    }\n    try {\n        let url = base64Decode(MY_PARAMS.url[0]);\n        if (url.includes(\".ts\")) {\n            return JSON.stringify({\n                statusCode: 302,\n                headers: {\n                    \"Location\": updateTsUrl(url),\n                    \"User-Agent\": PC_UA,\n                    \"Referer\": \"https://www.aliyundrive.com/\"\n                }\n            });\n        } else {\n            let templateId = MY_PARAMS.templateId[0];\n            if(fileExist(cacheFilePath)){\n                return getM3u8Content(getAliPlayUrl(fileId, templateId));\n            }else{\n                return getM3u8Content(url);\n            }\n        }\n    } catch (e) {\n        log(\"#代理播放失败#\\n错误信息>\" + e.toString() + \"\\n错误行>\" + e.lineNumber);\n    }\n}\nconst transcoding = {\n    UHD: \"4K 超清\",\n    QHD: \"2K 超清\",\n    FHD: \"1080 全高清\",\n    HD: \"720 高清\",\n    SD: \"540 标清\",\n    LD: \"360 流畅\"\n};\n\nfunction getVideo(aliAccessApi, fileId) {\n\n    let playUrlList = aliAccessApi.getVideoCloudPreview(fileId) || [];\n\n    let serverAddress = startProxyServer($.toString(aliM3u8Proxy, fileId, aliAccessApi.aliToken,aliAccessApi.myDrividType,MY_RULE.title));\n\n    if (playUrlList.length > 0) {\n        let urls = [],\n            names = [];\n        playUrlList.forEach((item) => {\n            urls.push(serverAddress + \"?url=\" + base64Encode(item.url) + \"&timestamp=\"+Date.now()+\"&templateId=\" + item.template_id + \"#.m3u8\");\n            names.push(transcoding[item.template_id] ? transcoding[item.template_id] : item.template_height);\n        });\n        let heads = new Array(playUrlList.length).fill({\n            'Referer': 'https://www.aliyundrive.com/'\n        });\n        return {\n            urls: urls,\n            names: names,\n            headers: heads,\n        };\n    } else {\n        return {};\n    }\n\n}\n\n\nfunction getPlayFormat(playUrl, title) {\n    return {\n        names: [title],\n        urls: [playUrl + \"#isVideo=true##ignoreMusic=true#\"],\n        headers: [{\n            'Referer': 'https://www.aliyundrive.com/',\n            \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36\"\n        }]\n    };\n}\n\n\n$.exports = function(fileId, cate, isBackupDrivid,  zimu) {\n    if (!fileExist(aliTokensFilepath)) {\n        toast(\"请先登陆登录账号\");\n        return \"hiker://page/login#noRecordHistory##noHistory#?noRefresh=1\";\n    }\n    let aliToken = $.require(aliTokensFilepath);\n    let aliAccessApi = AliAccessApi.createDefault(null, null, null, aliToken, null);\n    aliAccessApi.setMyDrividType(isBackupDrivid);\n    if (cate === \"video\") {\n        let playList = [];\n        let playMode = getItem(\"my_aliyun_playMode\", \"转码\");\n        try {\n            \n            if (playMode === \"转码\") {\n                playList = getVideo(aliAccessApi, fileId) || {};\n            } else if (playMode === \"原画\") {\n                playList = getPlayFormat(aliAccessApi.openCloudFileToDownUrl(fileId), playMode);\n            }else if (playMode === \"极速原画\") {\n                playList = getPlayFormat(aliAccessApi.openCloudFileToDownUrl(fileId)+ \"#fastPlayMode##threads=\" + getItem(\"speedThread\", \"10\") + \"#\", playMode);\n            }\n        } catch (e) {\n            log(\"#\" + playMode + \"播放失败#\\n错误信息>\" + e.toString() + \"\\n错误行>\" + e.lineNumber);\n            if (e.code === \"InvalidParameter.RefreshToken\") {\n                toast(\"登陆过期，请重新登陆\");\n                return \"hiker://page/login#noRecordHistory##noHistory#?noRefresh=1\";\n            } else if (e.code === \"QuotaExhausted.Drive\") {\n                return \"toast://网盘空间不足，无法播放请清理。\";\n            }\n            return \"toast://播放失败，错误信息已打印。\\n请查看日志(LOG)\";\n        }\n        let mountsub = storage0.getMyVar('mountzimu', {});\n        if (Object.keys(mountsub).length > 0) {\n            zimu = mountsub;\n        }\n        let subtitle;\n        if (Object.keys(zimu || {}).length > 0 && playList && playList.urls && playList.urls.length > 0) {\n            java.lang.Thread.sleep(100);\n            try {\n                var zmurl = aliAccessApi.openCloudFileToDownUrl(zimu.file_id);\n                let path = 'hiker://files/cache/云盘君/sub.' + zimu.ext;\n                downloadFile(zmurl, path, {\n                    'Referer': 'https://www.aliyundrive.com/'\n                });\n                subtitle = getPath(path);\n            } catch (e) {\n                toast(\"字幕加载失败\");\n                log(e.message);\n            }\n        }\n        let dmlist = storage0.getMyVar(\"dmlist\", []);\n        let dmlist_cache = getMyVar(\"dmlist_cache\", \"\");\n        if (dmlist_cache && dmlist_cache.startsWith(fileId + \"#\")) {\n            playList.danmu = dmlist_cache.replace(fileId + \"#\", \"\");\n        } else if (dmlist.length > 0) {\n            playList.danmu = \"hiker://files/cache/danmu/\" + dmlist.splice(0, 1)[0];\n            putMyVar(\"dmlist_cache\", fileId + \"#\" + playList.danmu);\n            storage0.putMyVar(\"dmlist\", dmlist);\n            if (dmlist.length === 0) {\n                toast(\"弹幕列表已全部挂载\");\n            }\n        } else {\n            playList.danmu = getVar(\"dm_share\", \"\");\n        }\n        playList.subtitle = subtitle;\n        return JSON.stringify(playList);\n    }\n\n    let url = aliAccessApi.openCloudFileToDownUrl(fileId);\n\n    if (cate === \"image\") {\n        return url + \"#.jpg\";\n    } else if (cate === \"audio\") {\n        return url + \"#isMusic=true#\";\n    } else {\n        return \"download://\" + url;\n    }\n}"},{"col_type":"movie_3","name":"openApi:tv","path":"openApi_tv","rule":"js:\nfunction OpenApi($this, postApi) {\n    this.$this = $this;\n}\n\n// 生成 unique_id\nfunction generateUUID() {\n    return 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'.replace(/[x]/g, function() {\n        return (Math.random() * 16 | 0).toString(16);\n    });\n}\n\n\n// 生成 wifimac\nfunction generateWifiMac() {\n    const min = 10 ** 11;\n    const max = 10 ** 12 - 1;\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n}\nfunction h(charArray, modifier) {\n    // 去除重复字符\n    var uniqueChars = [];\n    for (var i = 0; i < charArray.length; i++) {\n        if (uniqueChars.indexOf(charArray[i]) === -1) {\n            uniqueChars.push(charArray[i]);\n        }\n    }\n    \n    var numericModifier = parseInt(modifier.slice(7));\n    var transformedString = '';\n    \n    for (var j = 0; j < uniqueChars.length; j++) {\n        var c = uniqueChars[j];\n        var code = Math.abs(c.charCodeAt(0) - (numericModifier % 127) - 1);\n        transformedString += String.fromCharCode(code < 33 ? code + 33 : code);\n    }\n    \n    return transformedString;\n}\n//eval(getCryptoJS());\n/*\nconst CryptoUtil = $.require(\"hiker://assets/crypto-java.js\");\n\n        let key = CryptoUtil.Data.parseUTF8(\"^(i/x>>5(ebyhumz*i1wkpk^orIs^Na.\");\n        let niv = CryptoUtil.Data.parseHex(iv);\n        let encrypted0 = CryptoUtil.AES.decrypt(ciphertext, key, {\n            mode: \"AES/CBC/PKCS7Padding\",\n            iv: niv\n        });\n\n        return JSON.parse(encrypted0.toString());\n        */\nfunction decrypt(ciphertext, iv, t, unique_id, wifimac) {\n    try {\n        var key = generateKey(t, unique_id, wifimac);\n        /*var cipherParams = CryptoJS.lib.CipherParams.create({\n            ciphertext: CryptoJS.enc.Base64.parse(ciphertext)\n        });\n\n        var decrypted = CryptoJS.AES.decrypt(cipherParams, CryptoJS.enc.Utf8.parse(key), {\n            iv: CryptoJS.enc.Hex.parse(iv),\n            mode: CryptoJS.mode.CBC,\n            padding: CryptoJS.pad.Pkcs7\n        });\n\n        var dec = decrypted.toString(CryptoJS.enc.Utf8);*/\n        const CryptoUtil = $.require(\"hiker://assets/crypto-java.js\");\n        let keydata = CryptoUtil.Data.parseUTF8(key);\n        let ivdata = CryptoUtil.Data.parseHex(iv);\n        let encrypted0 = CryptoUtil.AES.decrypt(ciphertext, keydata, {\n            mode: \"AES/CBC/PKCS7Padding\",\n            iv: ivdata\n        });\n        return encrypted0.toString();\n    } catch (error) {\n        log(\"Decryption failed \"+error.toString());\n        throw error;\n    }\n}\n\nfunction getParams(t, unique_id, wifimac) {\n    let params = {\n        'akv': '2.8.1496',\n        'apv': '1.3.6',\n        'b': 'OnePlus',\n        'd': unique_id,\n        'm': 'PJX110',\n        'mac': '',\n        'n': 'PJX110',\n        't': String(t),\n        'wifiMac': String(wifimac),\n    };\n    return params;\n}\nfunction generateKey(t, unique_id, wifimac) {\n    var params = getParams(t, unique_id, wifimac);\n    var sortedKeys = Object.keys(params).sort();\n    \n    var concatenatedParams = '';\n    for (var i = 0; i < sortedKeys.length; i++) {\n        var key = sortedKeys[i];\n        if (key !== 't') {\n            concatenatedParams += params[key];\n        }\n    }\n\n    var hashedKey = h(concatenatedParams.split(''), t);\n    return md5(hashedKey);\n}\nObject.assign(OpenApi.prototype, {\n    getOpenTokenCode() {\n        function get_qrcode_code(sid) {\n            let res = fetch(\"https://openapi.aliyundrive.com/oauth/qrcode/\" + sid + \"/status\");\n            return JSON.parse(res).authCode;\n        }\n\n        let res = post(\"http://api.extscreen.com/aliyundrive/qrcode\", {\n            body: JSON.stringify({\n                \"scopes\": 'user:base,file:all:read,file:all:write',\n                \"width\": 500,\n                \"height\": 500,\n            }),\n        });\n        let data = JSON.parse(res).data;\n        let sid = data[\"sid\"];\n        let body = {\n            \"authorize\": 1,\n            \"scope\": \"user:base,file:all:read,file:all:write\",\n            \"drives\": [\"backup\", \"resource\"],\n            \"scopes\": [\"user:base\", \"file:all:read\", \"file:all:write\"],\n            \"sid\": sid\n        }\n        let headers = {\n            'authorization': this.$this.reaccessTk\n        };\n        let res2 = this.$this.postApi(\"https://open.aliyundrive.com/oauth/users/qrcode/authorize?sid=\" + sid).body(body).headers(headers).errorWithRetry((e, _, http) => {\n            this.$this.trySolve(e);\n            http.mergeHeadAndBody({\n                headers: {\n                    'authorization': this.$this.reaccessTk,\n                }\n            });\n            return true;\n        }).start(true);\n        return get_qrcode_code(sid);\n    },\n    getToken(body) {\n\n        let timestamp = String(JSON.parse(fetch(\"http://api.extscreen.com/timestamp\")).data.timestamp);\n        let unique_id = generateUUID();\n        let wifimac = generateWifiMac().toString();\n        let res = post(\"http://api.extscreen.com/aliyundrive/v3/token\", {\n            body: JSON.stringify(body),\n            headers: Object.assign({\n\n                \"token\": \"6733b42e28cdba32\",\n                'User-Agent': 'Mozilla/5.0 (Linux; U; Android 9; zh-cn; SM-S908E Build/TP1A.220624.014) AppleWebKit/533.1 (KHTML, like Gecko) Mobile Safari/533.1',\n                //'Host': 'api.extscreen.com'\n            }, getParams(timestamp, unique_id, wifimac))\n        });\n        let data = JSON.parse(res);\n        let {\n            iv,\n            ciphertext\n        } = data.data;\n        return JSON.parse(decrypt(ciphertext, iv, timestamp, unique_id, wifimac));\n    },\n    getOpenToken() {\n        return this.getToken({\n            code: this.getOpenTokenCode(),\n            grant_type: \"authorization_code\"\n        });\n    },\n    refreshOpenToken() {\n        return this.getToken({\n            grant_type: \"refresh_token\",\n            refresh_token: this.$this.openTokens.RefreshTokenOpen,\n        });\n    }\n});\n$.exports = OpenApi;"}],"title":"云盘君.简","author":"小棉袄🌞&@LoyDgIk","version":178,"type":"all","url":"hiker://empty##fypage","col_type":"movie_3","class_name":"","class_url":"","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:$.require(\"Main\");","searchFind":"js:\nlet isdDelegate = !!getItem(\"isdDelegate\", \"\");\nif (isdDelegate) {\n    setResult([{\n        title: \"点我开始聚合搜索\" + MY_KEYWORD,\n        url: \"hiker://search?s=\" + MY_KEYWORD,\n        extra: {\n            delegateOnlySearch: true,\n            rules: $.toString(() => {\n                try {\n                    let ruleGroup = getItem(\"ruleGroup\", \"\");\n                    let data = $.require(\"data\").getAllData(ruleGroup);\n                    let rules = [];\n                    for (let it of data) {\n                        rules.push({\n                            title: it.name,\n                            search_url: \"hiker://empty?page=fypage&searchTerms=**\",\n                            searchFind: \"js:\" + $.toString((rule) => {\n                                setResult($.require(\"data\").carrySRule(rule, MY_KEYWORD, MY_PAGE, getSearchMode()));\n                            }, it)\n                        });\n                    }\n                    return JSON.stringify(rules);\n                } catch (e) {\n                    log(e.toString());\n                }\n            })\n        }\n    }]);\n} else {\n    setResult([{\n        title: \"点我开始聚合搜索\" + MY_KEYWORD,\n        url: \"hiker://page/sou#noHistory#?p=fypage\",\n        extra: {\n            pageTitle: \"搜索\" + MY_KEYWORD,\n            searchTerms: MY_KEYWORD,\n            hideSetting: true\n        }\n    }]);\n}","search_url":"hiker://empty?searchTerms=**","group":"①推荐","detail_col_type":"movie_1","detail_find_rule":"","sdetail_col_type":"movie_1","sdetail_find_rule":"","ua":"mobile","preRule":"","pages":"[{\"col_type\":\"movie_3\",\"name\":\"规则处理\",\"path\":\"data\",\"rule\":\"js:\\nlet ParseRlue = $.require(\\\"ParseRlue\\\");\\n\\nfunction toRedirectTreating(config) {\\n    return $.require(\\\"redirect\\\").doubleTreating(config);\\n}\\n\\nfunction toRedirect(aliUrl, sharePwd) {\\n    return $.require(\\\"redirect\\\").getModeUrl(aliUrl, sharePwd);\\n}\\n\\nfunction getCompleteRule(rule) {\\n    if (rule.ruleType === \\\"JSON\\\") {\\n        let find = rule.find;\\n        rule.find = (s, page) => {\\n            let url = String(rule.basicUrl).replace(\\\"**\\\", encodeURIComponent(s)).replace(\\\"fypage\\\", page + \\\"\\\");\\n            return ParseRlue.parseSearchJson(url, find);\\n        }\\n    } else if (rule.ruleType === \\\"HTML\\\") {\\n        let find = rule.find;\\n        rule.find = (s, page) => {\\n            let url = String(rule.basicUrl).replace(\\\"**\\\", encodeURIComponent(s)).replace(\\\"fypage\\\", page + \\\"\\\");\\n            return ParseRlue.parseSearchHtml(url, find);\\n        }\\n    } else {\\n        let find = new Function(\\\"s\\\", \\\"page\\\", \\\"user\\\", \\\"basicUrl\\\", rule.find);\\n        rule.find = (s, page) => find(s, page, rule.user || {}, rule.basicUrl || \\\"\\\");\\n        /*if (rule.findAliUrl) {\\n            rule.findAliUrl = new Function(\\\"input\\\", \\\"basicUrl\\\", rule.findAliUrl);\\n        }*/\\n    }\\n    return rule;\\n}\\n$.exports.carryRule = function(rule, s, page, searchMode) {\\n    rule = getCompleteRule(rule);\\n    let list = rule.find(s, page);\\n    if (!list) return [];\\n\\n    let descTips = \\\"““””\\\" + rule.name.fontcolor(\\\"#f13b66a\\\") + \\\"&nbsp;\\\";\\n    let resList = [];\\n\\n    for (let it of list) {\\n        if (it.skip) {\\n            resList.push(it);\\n            continue;\\n        }\\n        if (searchMode && !searchContains(it.title, s, true)) continue;\\n        if (rule.findAliUrl) {\\n            it.url = $(it.url).lazyRule(toRedirectTreating, {\\n                findAliUrl: rule.findAliUrl,\\n                basicUrl: rule.basicUrl,\\n                name: rule.name,\\n                author: rule.author,\\n                aliUrl: it.url,\\n                ruleType: rule.ruleType\\n            });\\n        } else {\\n            it.url = $(\\\"#noLoading#\\\").lazyRule(toRedirect, it.url, it.sharePwd || \\\"\\\");\\n        }\\n        let title = it.title || \\\"\\\";\\n        resList.push({\\n            title: title.includes(\\\"““””\\\") ? title : \\\"““””\\\" + title.replace(new RegExp(\\\"<em>|</em>\\\", \\\"g\\\"), \\\"\\\").replace(new RegExp(\\\"(\\\" + s + \\\")\\\", \\\"gi\\\"), \\\"<strong><span style=\\\\\\\"color: #1E90FF\\\\\\\">$1</span></strong>\\\"),\\n            desc: descTips + (it.desc || \\\"\\\"),\\n            url: it.url,\\n            pic_url: it.pic_url,\\n            col_type: it.pic_url ? \\\"movie_1_vertical_pic\\\" : \\\"text_1\\\",\\n            extra: Object.assign({\\n                inheritTitle: false,\\n                noPic: true\\n            }, it.extra)\\n        });\\n    }\\n    return resList;\\n}\\n$.exports.carrySRule = function(rule, s, page, searchMode) {\\n    rule = getCompleteRule(rule);\\n    let list = rule.find(s, page);\\n    if (!list) return [];\\n    let resList = [];\\n    for (let it of list) {\\n        if (it.skip) {\\n            resList.push(it);\\n            continue;\\n        }\\n        if (searchMode && !searchContains(it.title, s, true)) continue;\\n        if (rule.findAliUrl) {\\n            it.url = $(it.url).lazyRule(toRedirectTreating, {\\n                findAliUrl: rule.findAliUrl,\\n                basicUrl: rule.basicUrl,\\n                name: rule.name,\\n                author: rule.author,\\n                aliUrl: it.url,\\n                ruleType: rule.ruleType\\n            });\\n        } else {\\n            it.url = $(\\\"#noLoading#\\\").lazyRule(toRedirect, it.url, it.sharePwd || \\\"\\\");\\n        }\\n        resList.push({\\n            title: it.title,\\n            desc: it.desc || \\\"\\\",\\n            url: it.url,\\n            pic_url: it.pic_url,\\n            extra: Object.assign({\\n                inheritTitle: false,\\n                noPic: true\\n            }, it.extra)\\n        });\\n    }\\n    return resList;\\n}\\nlet size = 10;\\n\\nlet rules;\\n\\nfunction getRules(group) {\\n    let rulesTmp;\\n    if (!rules) {\\n        rules = $.require(\\\"configs\\\").getUsefulJson();\\n    }\\n    if (group) {\\n        rulesTmp = rules.filter(v => v.group === group);\\n    } else {\\n        rulesTmp = rules;\\n    }\\n    return rulesTmp;\\n}\\n$.exports.getAllData = function(group) {\\n    return getRules(group);\\n};\\n$.exports.getData = function(page, rule, group) {\\n    if (rule) {\\n        if (page != null && page > 1) {\\n            return getRules().filter(i => i.name == rule && i.page);\\n        }\\n        return getRules().filter(i => i.name == rule);\\n    }\\n    let rulesTmp = getRules(group);\\n    let start = (page - 1) * size;\\n    if (rulesTmp.length < start + 1) {\\n        return [];\\n    }\\n    let len = size;\\n    if (rulesTmp.length < page * size) {\\n        len = rulesTmp.length - start;\\n    }\\n    return rulesTmp.slice(start, start + len);\\n};\\n$.exports.getNames = function(group) {\\n    return getRules(group).map(it => [it.name, it.basicUrl]);\\n};\\n\\n$.exports.getGroupNames = function() {\\n    return Array.from(new Set(getRules().map(v => v.group))).filter(v => v);\\n};\\n$.exports.findModulo = function(input) {\\n    let oriMods = [2, 3];\\n    let mods = oriMods.map(v => input % v);\\n    let zeroMods = mods.indexOf(0);\\n\\n    if (zeroMods > -1) {\\n        return oriMods[zeroMods];\\n    } else {\\n        return oriMods[mods.indexOf(Math.max.apply(null, mods))];\\n    }\\n};\"},{\"col_type\":\"movie_3\",\"name\":\"搜索页面\",\"path\":\"sou\",\"rule\":\"js:\\nconst alitest = $.require(\\\"alitest\\\");\\n\\nfunction setClip() {\\n    function getCopy() {\\n        try {\\n            const Context = android.content.Context;\\n            const context = getCurrentActivity();\\n            // 获取系统剪贴板\\n            let clipboard = context.getSystemService(Context.CLIPBOARD_SERVICE);\\n            // 返回数据\\n            let clipData = clipboard.getPrimaryClip();\\n            if (clipData != null && clipData.getItemCount() > 0) {\\n                // 从数据集中获取（粘贴）第一条文本数据\\n                let text = clipData.getItemAt(0).getText();\\n                if (text != null) {\\n                    return String(text.toString());\\n                }\\n            }\\n            return null;\\n        } catch (e) {\\n            return null;\\n        }\\n    }\\n    let text = getCopy() || \\\"\\\";\\n    let url = alitest.matchAliUrl(text);\\n    if (url) {\\n        let cache = getItem(\\\"clipboardCache\\\", \\\"\\\");\\n        if (url !== cache) {\\n            d.push({\\n                title: '““””<font color=\\\"#13B61B\\\">▐ </font><b>温馨提示<b>',\\n                desc: \\\"检测到剪贴板含有阿里链接是否打开?\\\\n\\\" + url,\\n                url: $(\\\"#noLoading#\\\").lazyRule((input, id) => {\\n                    deleteItem(id + \\\"clipboard\\\");\\n                    return \\\"hiker://page/aliyun?page=fypage&realurl=\\\" + encodeURIComponent(input) + \\\"&sharePwd=\\\";\\n                }, url, id),\\n                col_type: \\\"text_1\\\",\\n                extra: {\\n                    id: id + \\\"clipboard\\\",\\n                    pageTitle: \\\"打开链接\\\"\\n                }\\n            });\\n            setItem(\\\"clipboardCache\\\", url);\\n        }\\n    }\\n}\\n\\nfunction setPrepose() {\\n    if (openMode == \\\"本地解析\\\") {\\n        let aliTokensFilepath = $.require(\\\"hiker://page/tokenPath\\\").aliTokensFilepath;\\n        let a = fetch(aliTokensFilepath);\\n        if (!a || a == \\\"\\\") {\\n            d.push({\\n                title: '<font color=\\\"#13B61B\\\">▐ </font><b>温馨提示<b>',\\n                col_type: \\\"rich_text\\\",\\n            });\\n            d.push({\\n                url: $(\\\"#noLoading#\\\").lazyRule(() => $.require(\\\"loginMode\\\")),\\n                col_type: \\\"text_1\\\",\\n                title: \\\"未检测到登录信息，点我跳转登录账号页面，登录阿里云盘账号后方可使用本地解析模式\\\",\\n                extra: {\\n                    pageTitle: \\\"登录阿里云盘\\\"\\n                }\\n            });\\n        }\\n    }\\n    addListener(\\\"onClose\\\", $.toString(() => {\\n        clearMyVar(\\\"s\\\");\\n    }));\\n    addListener(\\\"onRefresh\\\", $.toString(() => {\\n        if (!getMyVar(\\\"refs\\\", \\\"\\\")) {\\n            clearMyVar(\\\"s\\\");\\n        }\\n    }));\\n}\\n\\nfunction setHead() {\\n    d.push({\\n        title: \\\"搜索：\\\" + [\\\"默认\\\", \\\"精准\\\"][searchMode],\\n        url: $(\\\"#noLoading#\\\").lazyRule(() => {\\n            setSearchMode(getSearchMode() ? 0 : 1);\\n            refreshPage(false);\\n            return \\\"hiker://empty\\\"\\n        }),\\n        col_type: \\\"icon_3_round_fill\\\",\\n        pic_url: \\\"hiker://images/icon_search6\\\"\\n    });\\n    d.push({\\n        title: \\\"我的阿里\\\",\\n        url: \\\"hiker://page/myaliyun?page=fypage\\\",\\n        col_type: \\\"icon_3_round_fill\\\",\\n        pic_url: \\\"hiker://images/icon_cloud6\\\",\\n        extra: {\\n            isHome: true\\n        }\\n    });\\n    d.push({\\n        title: \\\"设置|\\\" + openMode,\\n        url: $([\\\"模式：本地解析\\\", \\\"模式：官方APP\\\", \\\"登录阿里账号\\\", \\\"登录信息\\\", \\\"规则管理\\\", \\\"支持作者\\\", \\\"使用代理搜索\\\", \\\"播放模式\\\", \\\"获取弹幕搜索规则\\\"], 1, \\\"云简设置\\\").select((ids) => {\\n            if (\\\"规则管理\\\" == input) {\\n                return \\\"hiker://page/ruleManage#noRecordHistory##noHistory#\\\";\\n            }\\n            if (\\\"支持作者\\\" == input) {\\n                return \\\"hiker://page/Donate.v#noRecordHistory##noHistory#\\\";\\n            }\\n            if (\\\"登录阿里账号\\\" == input) {\\n                return $.require(\\\"loginMode\\\");\\n            }\\n            if (\\\"使用代理搜索\\\" == input) {\\n                let isdDelegate = !!getItem(\\\"isdDelegate\\\", \\\"\\\");\\n                return $(\\\"开启后小程序底部搜索框将使用代理搜索\\\\n当前:\\\" + isdDelegate + \\\"\\\\n点击确定即可\\\" + (isdDelegate ? \\\"关闭\\\" : \\\"开启\\\")).confirm((isdDelegate) => {\\n                    setItem(\\\"isdDelegate\\\", isdDelegate ? \\\"\\\" : \\\"1\\\");\\n                    return \\\"toast://\\\" + (isdDelegate ? \\\"已关闭\\\" : \\\"已开启\\\");\\n                }, isdDelegate);\\n            }\\n            if (\\\"获取弹幕搜索规则\\\" === input) {\\n                let rule = {\\n                    \\\"js\\\": JSON.stringify(\\\"hiker://page/loadDm?rule=\\\" + MY_RULE.title + \\\"&title=\\\") + \\\"+encodeURIComponent(playdata.title.split('-')[0]);\\\",\\n                    \\\"name\\\": MY_RULE.title + \\\"弹幕搜索\\\"\\n                };\\n                return \\\"rule://\\\" + base64Encode(\\\"￥projection_screen￥\\\" + JSON.stringify(rule));\\n            }\\n            if (\\\"播放模式\\\" === input) {\\n                let modes = [\\\"转码\\\", \\\"原画\\\", \\\"原转\\\"];\\n                let mode = getItem(\\\"aliyun_playMode\\\", modes[0]);\\n                let index = modes.indexOf(mode);\\n                return $(modes, 1, \\\"播放模式\\\", index).select(() => {\\n                    setItem(\\\"aliyun_playMode\\\", input);\\n                    return \\\"toast://切换成功\\\";\\n                });\\n            }\\n            if (\\\"登录信息\\\" == input) {\\n                const {\\n                    openTokensFilepath,\\n                    aliTokensFilepath\\n                } = $.require(\\\"tokenPath\\\");\\n                if (!fileExist(aliTokensFilepath)) return \\\"toast://还未登陆\\\";\\n                let ali = request(aliTokensFilepath);\\n                try {\\n                    ali = JSON.parse(ali);\\n                } catch (e) {\\n                    deleteFile(aliTokensFilepath);\\n                    return \\\"toast://获取失败\\\";\\n                }\\n                confirm({\\n                    title: '登录信息',\\n                    content: \\\"用户:\\\" + (ali.nick_name || ali.user_name || \\\"Token登录\\\") + \\\"\\\\nToken:\\\" + ali.refresh_token + \\\"\\\\n(取消：注销登录；确定：复制Token)\\\",\\n                    confirm: $.toString((token) => {\\n                        return \\\"copy://\\\" + token;\\n                    }, ali.refresh_token),\\n                    cancel: $.toString((path1, path2) => {\\n                        return $(\\\"确认注销登录\\\").confirm((path1, path2) => {\\n                            deleteFile(path1);\\n                            deleteFile(path2);\\n                            refreshPage();\\n                            return \\\"toast://已成功退出登陆\\\";\\n                        }, path1, path2);\\n                    }, aliTokensFilepath, openTokensFilepath)\\n                });\\n                return;\\n            }\\n            input = input.replace(\\\"模式：\\\", \\\"\\\");\\n            setItem(\\\"openMode\\\", input);\\n            updateItem(ids, {\\n                title: \\\"设置|\\\" + input\\n            });\\n            if (input == \\\"官方APP\\\") {\\n                return \\\"toast://修改成功，请确保手机有安装阿里云盘等官方APP\\\";\\n            }\\n        }, id + \\\"mode\\\"),\\n        col_type: \\\"icon_3_round_fill\\\",\\n        pic_url: \\\"hiker://images/icon_menu6\\\",\\n        extra: {\\n            id: id + \\\"mode\\\"\\n        }\\n    });\\n\\n    d.push({\\n        title: '搜索',\\n        desc: '请输入关键词/链接',\\n        col_type: 'input',\\n        url: $.toString(() => {\\n            input = input.trim();\\n            if ($.require(\\\"alitest\\\").test(input)) {\\n                clearMyVar(\\\"s\\\");\\n                return \\\"hiker://page/aliyun?page=fypage&realurl=\\\" + encodeURIComponent(input) + \\\"&sharePwd=\\\";\\n            }\\n            putMyVar(\\\"s\\\", input);\\n            refreshPage();\\n            return \\\"hiker://empty\\\";\\n        }),\\n        extra: {\\n            onChange: \\\"putMyVar('refs',input)\\\",\\n            id: id + \\\"ss\\\",\\n            defaultValue: s,\\n            pageTitle: \\\"打开链接\\\"\\n        }\\n    });\\n}\\n\\nfunction setRuleItem() {\\n    let rules = $.require(\\\"data\\\").getNames(ruleGroup);\\n    d.push({\\n        title: \\\"🌟\\\",\\n        url: \\\"hiker://collection?rule=\\\" + MY_RULE.title,\\n        col_type: \\\"scroll_button\\\",\\n    }, {\\n        title: \\\"📌\\\" + ruleGroup,\\n        url: $(\\\"#noLoading#\\\").lazyRule(() => {\\n            let group = $.require(\\\"data\\\").getGroupNames();\\n            let ruleGroup = getItem(\\\"ruleGroup\\\", \\\"\\\");\\n            let index = group.indexOf(ruleGroup) + 1;\\n            group.unshift(\\\"💡全部💡\\\");\\n            let selectNum = $.require(\\\"data\\\").findModulo(group.length);\\n            return $(group, selectNum, \\\"请选择分组\\\", index).select(() => {\\n                if (!MY_INDEX) {\\n                    setItem(\\\"ruleGroup\\\", \\\"\\\");\\n                } else {\\n                    setItem(\\\"ruleGroup\\\", input);\\n                }\\n                clearItem(\\\"rule\\\");\\n                refreshPage();\\n            });\\n        }),\\n        col_type: \\\"scroll_button\\\"\\n    }, {\\n        title: \\\"\\\" == r ? \\\"““全部””\\\" : \\\"全部\\\",\\n        url: $(\\\"#noLoading#\\\").lazyRule((s, id) => {\\n            let qr = getItem(\\\"rule\\\", \\\"\\\");\\n            clearItem(\\\"rule\\\");\\n            if (s) {\\n                refreshPage();\\n            } else {\\n                updateItem(\\\"全部\\\" + id, {\\n                    title: \\\"““全部””\\\"\\n                });\\n                if (qr) {\\n                    updateItem(id + qr, {\\n                        title: qr\\n                    });\\n                }\\n            }\\n            return \\\"hiker://empty\\\";\\n        }, s, id),\\n        col_type: \\\"scroll_button\\\",\\n        extra: {\\n            id: \\\"全部\\\" + id\\n        }\\n    });\\n    for (let [it, basicUrl] of rules) {\\n        d.push({\\n            title: it == r ? \\\"““\\\" + it + \\\"””\\\" : it,\\n            url: $((getHome(basicUrl) || \\\"\\\") + \\\"#noLoading#\\\").lazyRule((r, s, id) => {\\n                let qr = getItem(\\\"rule\\\", \\\"\\\");\\n                setItem(\\\"rule\\\", r);\\n                if (s) {\\n                    refreshPage();\\n                } else {\\n                    updateItem(qr ? (id + qr) : (\\\"全部\\\" + id), {\\n                        title: qr || \\\"全部\\\"\\n                    });\\n                    updateItem(id + r, {\\n                        title: \\\"““\\\" + r + \\\"””\\\"\\n                    });\\n                }\\n                return \\\"hiker://empty\\\";\\n            }, it, s, id),\\n            col_type: \\\"scroll_button\\\",\\n            extra: {\\n                id: id + it\\n            }\\n        });\\n    }\\n\\n}\\n\\nfunction record() {\\n    let history = storage0.getItem(\\\"searchHistory\\\", []);\\n    let ii = history.indexOf(s);\\n    if (ii > -1) {\\n        history.splice(ii, 1);\\n    }\\n    if (history.length > 20) {\\n        history.splice(history.length - 1, 1);\\n    }\\n    history.unshift(s);\\n    storage0.setItem(\\\"searchHistory\\\", history);\\n}\\n\\nfunction searchEnd() {\\n    let p = MY_PAGE;\\n    let data = $.require(\\\"data\\\").getData(p, r, ruleGroup);\\n    let pageid = id + \\\"ypj-page\\\" + p;\\n    if (data.length > 0) {\\n        d.push({\\n            title: \\\"加载第\\\" + p + \\\"页中，进度：1/\\\" + data.length,\\n            col_type: \\\"text_center_1\\\",\\n            extra: {\\n                id: pageid\\n            }\\n        });\\n    }\\n    setResult(d);\\n    if (data.length > 0) {\\n        //多线程加载        \\n        let realPage = \\\"\\\" == r ? 1 : p;\\n        let tasks = data.map(it => {\\n            return {\\n                func: function(rule) {\\n                    try {\\n                        return $.require(\\\"data\\\").carryRule(rule, s, realPage, searchMode);\\n                    } catch (e) {\\n                        log(rule.name + \\\":\\\" + e.toString());\\n                        /*if(data.length===1&&p===1){\\n                            return [{\\n                                title:\\\"““\\\"+rule.name+\\\" ERROR””\\\",\\n                                desc: e.toString(),\\n                                col_type:\\\"text_center_1\\\",\\n                                url:\\\"hiker://empty\\\",\\n                                extra:{\\n                                    lineVisible: false\\n                                }\\n                            }];\\n                        }*/\\n                    }\\n                    //return rule.find(s, realPage);\\n                },\\n                param: it,\\n                id: \\\"rule@\\\" + it.name\\n            }\\n        });\\n\\n        batchExecute(tasks, {\\n            func: function(param, id, error, result) {\\n                param.i += 1;\\n                if (Array.isArray(result)) {\\n                    deleteItem(\\\"_nothave\\\");\\n                    addItemBefore(pageid, result);\\n                }\\n                if (param.i === param.all) {\\n                    if (!result || !result.length) {\\n                        deleteItem(\\\"_nothave\\\");\\n                        addItemBefore(pageid, {\\n                            col_type: \\\"text_center_1\\\",\\n                            url: \\\"hiker://empty\\\",\\n                            title: \\\"““””\\\" + \\\"~~~什么资源都没有哦~~~\\\".fontcolor(\\\"Gray\\\"),\\n                            extra: {\\n                                lineVisible: false,\\n                                id: \\\"_nothave\\\"\\n                            }\\n                        });\\n                    }\\n                    deleteItem(pageid);\\n                } else {\\n                    updateItem(pageid, {\\n                        title: \\\"加载第\\\" + MY_PAGE + \\\"页中，进度：\\\" + (param.i + 1) + \\\"/\\\" + param.all,\\n                        col_type: \\\"text_center_1\\\",\\n                        url: \\\"hiker://empty\\\"\\n                    });\\n                }\\n            },\\n            param: {\\n                all: data.length,\\n                i: 0,\\n            }\\n        })\\n    }\\n}\\n\\nfunction setHistory() {\\n    d.push({\\n        title: '<span style=\\\"color:#ff6601\\\"><b>历史记录</b></span>',\\n        pic_url: \\\"hiker://images/icon_clock\\\",\\n        col_type: \\\"avatar\\\",\\n        url: $([\\\"清除搜索记录\\\", \\\"打开观看记录\\\"]).select((id) => {\\n            if (input === \\\"清除搜索记录\\\") {\\n                return $(\\\"确定清除全部搜索记录？\\\").confirm((id) => {\\n                    clearItem(\\\"searchHistory\\\");\\n                    deleteItemByCls(id + \\\":key\\\");\\n                    addItemAfter(id + \\\":searchHistory\\\", {\\n                        col_type: \\\"text_center_1\\\",\\n                        url: \\\"hiker://empty\\\",\\n                        title: \\\"““””\\\" + \\\"~~~什么都没有哦~~~\\\".fontcolor(\\\"Gray\\\"),\\n                        extra: {\\n                            cls: id + \\\":key\\\",\\n                            lineVisible: false\\n                        }\\n                    });\\n                }, id);\\n            } else {\\n                return \\\"hiker://history?rule=\\\" + MY_RULE.title;\\n            }\\n        }, id),\\n        extra: {\\n            id: id + \\\":searchHistory\\\",\\n        }\\n    });\\n\\n    let history = storage0.getItem(\\\"searchHistory\\\", []);\\n    let i = 0;\\n    for (let key of history) {\\n        d.push({\\n            title: key,\\n            url: $(\\\"#noLoading#\\\").lazyRule((id, key) => {\\n                let extra = findItem(id + \\\"ss\\\").extra;\\n                extra.defaultValue = key;\\n                updateItem({\\n                    extra: extra\\n                });\\n                return \\\"hiker://empty\\\";\\n            }, id, key),\\n            col_type: \\\"flex_button\\\",\\n            extra: {\\n                id: id + \\\":key:\\\" + key,\\n                cls: id + \\\":key\\\",\\n                longClick: [{\\n                    title: \\\"删除关键词:\\\" + key,\\n                    js: $.toString((id, key, i) => {\\n                        let history = storage0.getItem(\\\"searchHistory\\\", []);\\n                        history.splice(i, 1);\\n                        storage0.setItem(\\\"searchHistory\\\", history);\\n                        deleteItem(id + \\\":key:\\\" + key);\\n                        //toast();\\n                    }, id, key, i)\\n                }]\\n            }\\n        });\\n        i++;\\n    }\\n    if (history.length === 0) {\\n        d.push({\\n            col_type: \\\"text_center_1\\\",\\n            url: \\\"hiker://empty\\\",\\n            title: \\\"““””\\\" + \\\"~~~什么都没有哦~~~\\\".fontcolor(\\\"Gray\\\"),\\n            extra: {\\n                cls: id + \\\":key\\\",\\n                lineVisible: false\\n            }\\n        });\\n    }\\n}\\n\\nfunction setTrendingTabEnd() {\\n    let hotClass = {\\n        \\\"百度\\\": {\\n            \\\"电视剧\\\": \\\"teleplay\\\",\\n            \\\"电影\\\": \\\"movie\\\"\\n        },\\n        \\\"夸克\\\": {\\n            \\\"电视剧\\\": \\\"电视剧\\\",\\n            \\\"电影\\\": \\\"电影\\\",\\n            \\\"动漫\\\": \\\"动漫\\\",\\n            \\\"综艺\\\": \\\"综艺\\\"\\n        }\\n    };\\n    let dataSource = Object.keys(hotClass);\\n    let selectsource = getItem(\\\"dataSource\\\", dataSource[0]);\\n    let hotkeys = Object.keys(hotClass[selectsource]);\\n    let selectkey = getItem(\\\"hotkey\\\", hotkeys[0]);\\n    let tabkey = hotClass[selectsource][selectkey];\\n\\n    d.push({\\n        title: '<span style=\\\"color:#ff6601\\\"><b>' + selectsource + selectkey + '热搜</b></span>',\\n        url: $(hotkeys, 1, \\\"切换热搜\\\").select(() => {\\n            setItem(\\\"hotkey\\\", input);\\n            refreshPage(false);\\n            return \\\"toast://已切换为\\\" + input;\\n        }),\\n        col_type: \\\"avatar\\\",\\n        pic_url: \\\"hiker://images/icon_fire\\\",\\n        extra: {\\n            longClick: [{\\n                title: \\\"切换数据源\\\",\\n                js: $.toString((dataSource) => {\\n                    return $(dataSource, 1, \\\"切换数据源\\\").select(() => {\\n                        setItem(\\\"dataSource\\\", input);\\n                        clearItem(\\\"hotkey\\\");\\n                        refreshPage(false);\\n                        return \\\"toast://已切换为\\\" + input;\\n                    });\\n                }, dataSource)\\n            }]\\n        }\\n    });\\n    d.push({\\n        title: \\\"正在加载...\\\",\\n        url: \\\"hiker://empty\\\",\\n        col_type: \\\"text_center_1\\\",\\n        extra: {\\n            id: id + \\\":hotkey\\\",\\n            lineVisible: false\\n        }\\n    });\\n    setResult(d);\\n    let sd = [];\\n    let setSearchKey = name => {\\n        putMyVar('s', name);\\n        refreshPage();\\n        return 'hiker://empty'\\n    };\\n\\n    let getTitle = (i, name) => {\\n        let color;\\n        switch (i) {\\n            case 0:\\n                color = \\\"#ff3300\\\";\\n                break;\\n            case 1:\\n                color = \\\"#ff6600\\\";\\n                break;\\n            case 2:\\n                color = \\\"#ff9900\\\"\\n                break;\\n            default:\\n                color = \\\"black\\\";\\n        }\\n        return \\\"““””\\\" + String(i + 1).fontcolor(color) + \\\"\\\\t\\\\t\\\\t\\\" + name;\\n    }\\n    try {\\n        switch (selectsource) {\\n            case \\\"百度\\\":\\n                var json = request('https://top.baidu.com/api/board?platform=wise&tab=' + tabkey + '&tag=%7B%22category%22:%22%E5%85%A8%E9%83%A8%E7%B1%BB%E5%9E%8B%22%7D', {\\n                    headers: {\\n                        'User-Agent': 'Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.51 Mobile Safari/537.36',\\n                        'Host': 'top.baidu.com',\\n                        'Accept': 'application/json, text/plain, */*',\\n                        'Accept-Language': 'zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7',\\n                        'Accept-Encoding': 'gzip, deflate, br',\\n                        'Referer': 'https://top.baidu.com/board?tab=novel',\\n                    }\\n                });\\n                //var s = Date.now();\\n                var list = JSON.parse(json).data.cards[0].content;\\n                for (let i = 0; i < list.length; i++) {\\n                    let item = list[i];\\n                    let name = item.word + ' (' + item.show[2] + ')';\\n                    let des = item.desc;\\n                    sd.push({\\n                        title: getTitle(i, name),\\n                        url: $('#noLoading#').lazyRule(setSearchKey, item.word),\\n                        desc: des,\\n                        img: item.img,\\n                        col_type: \\\"movie_1_vertical_pic\\\"\\n                    });\\n                }\\n                break;\\n            case \\\"夸克\\\":\\n                var json = request(\\\"https://news.myquark.cn/v2/toplist/movie?&channel=\\\" + tabkey + \\\"&rank_type=%E6%9C%80%E7%83%AD\\\");\\n                var xmlData = (JSON.parse(json).data || \\\"\\\").replace(/title>/g, \\\"h_title>\\\").replace(/src>/g, \\\"h_src>\\\").replace(/area>/g, \\\"h_area\\\");\\n                var list = pdfa(xmlData, \\\"body&&item\\\");\\n                var getText = t => t;\\n                var trend = [\\\"ㄧ\\\", \\\"↑\\\", \\\"↓\\\"];\\n                //var s = Date.now();\\n                for (let i = 0; i < list.length; i++) {\\n                    let item = list[i];\\n                    let name = pdfh(item, \\\"h_title&&Text\\\");\\n                    let des = \\\"热度：\\\" + pdfh(item, \\\"hot_score&&Text\\\") + \\\" \\\" + trend.at(pdfh(item, \\\"hot_trend&&Text\\\")) +\\n                        \\\"\\\\n评分：\\\" + pdfh(item, \\\"score_avg&&Text\\\").replace(/^0$/, \\\"暂无评分\\\") +\\n                        \\\"\\\\n\\\" + pdfh(item, \\\"year&&Text\\\") + \\\"·\\\" + pdfh(item, \\\"h_area&&Text\\\") + \\\"·\\\" + pdfh(item, \\\"category&&Text\\\").replace(\\\",\\\", \\\"·\\\");\\n                    sd.push({\\n                        title: getTitle(i, name),\\n                        url: $('#noLoading#').lazyRule(setSearchKey, name),\\n                        desc: des,\\n                        img: pdfh(item, \\\"h_src&&Text\\\"),\\n                        col_type: \\\"movie_1_vertical_pic\\\"\\n                    });\\n                }\\n                break;\\n        }\\n        addItemAfter(id + \\\":hotkey\\\", sd);\\n    } catch (e) {\\n        log(e.toString());\\n    } finally {\\n        deleteItem(id + \\\":hotkey\\\");\\n    }\\n}\\nlet r = getItem(\\\"rule\\\", \\\"\\\");\\nlet hideSetting = MY_PARAMS.hideSetting || getParam(\\\"hideSetting\\\", \\\"\\\") === \\\"true\\\";\\nlet s = getMyVar('s', '') || MY_PARAMS.searchTerms || decodeURIComponent(getParam(\\\"searchTerms\\\", \\\"\\\"));\\nlet searchMode = getSearchMode();\\nlet openMode = getItem(\\\"openMode\\\", \\\"本地解析\\\");\\nlet id = Date.now() + MY_RULE.title;\\nlet ruleGroup = getItem(\\\"ruleGroup\\\", \\\"\\\");\\nlet d = [];\\nif (MY_PAGE === 1) {\\n    setPrepose();\\n    if (!hideSetting) {\\n        setClip();\\n        setHead();\\n    }\\n    setRuleItem();\\n    if (!s) {\\n        setHistory();\\n    }\\n}\\nif (s) {\\n    record();\\n    searchEnd();\\n} else if (MY_PAGE === 1) {\\n    setTrendingTabEnd();\\n} else {\\n    setResult([]);\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"网页浏览\",\"path\":\"ysfx\",\"rule\":\"js:\\nvar d = [];\\n\\nlet openMode = getItem(\\\"openMode\\\");\\nlet rule = MY_RULE.title;\\nlet url = decodeURIComponent(getParam(\\\"webUrl\\\",\\\"\\\"));\\n\\nfunction intercept(rule, origin, openMode) {\\n    let host = origin.replace(new RegExp(\\\"http://|https://\\\"), \\\"\\\").split(\\\"/\\\")[0];\\n    let hosts = host.split(\\\".\\\");\\n    if (hosts.length > 2) {\\n        host = hosts[hosts.length - 2] + \\\".\\\" + hosts[hosts.length - 1];\\n    }\\n    if (input.startsWith(\\\"magnet\\\")) {\\n        confirm({\\n            title: \\\"温馨提示\\\",\\n            content: \\\"检测到新的磁链地址，点击确定按钮即可播放，点击取消按钮可以复制链接\\\",\\n            confirm: $.toString((mag) => {\\n                return mag;\\n            }, input),\\n            cancel: $.toString((mag) => {\\n                return \\\"copy://\\\" + mag\\n            }, input)\\n        });\\n        return true;\\n    } else if ($.require(\\\"alitest?rule=\\\"+rule).test(input) && openMode != \\\"官方APP\\\") {\\n        log(input);\\n        if (input.includes('checkurl?url=') && input.includes('&urlrefer')) {\\n            input = decodeURIComponent(input.split('&urlrefer')[0].split('checkurl?url=')[1]);\\n            //log('贴吧'+input);\\n        }\\n        return $.toString((url, rule) => {\\n            fy_bridge_app.open(JSON.stringify({\\n                title: \\\"阿里云盘\\\",\\n                url: \\\"hiker://page/aliyun?page=fypage&realurl=\\\" + encodeURIComponent(url) + \\\"&rule=\\\" + rule,\\n            }))\\n        }, input, rule);\\n    } else if(input.includes(\\\"quark.cn/s/\\\")&&fetch(\\\"hiker://home@Quark.简\\\") != \\\"null\\\"){\\n        return $.toString((url) => {\\n            fy_bridge_app.open(JSON.stringify({\\n                title: \\\"夸克网盘\\\",\\n                url: \\\"hiker://page/quarkList?rule=Quark.简&realurl=\\\" + encodeURIComponent(url) + \\\"&sharePwd=\\\",\\n            }))\\n        },input);\\n    } else if (/\\\\.(mp3|flac|m4a)$/.test(input)) {\\n        log(input);\\n        return $.toString((url, rule) => {\\n            fy_bridge_app.playVideo(url);\\n        }, input, rule);\\n    } else if (!input.includes(host) && input.startsWith(\\\"http\\\")) {\\n        log(input);\\n        return $.toString((url, rule) => {\\n            fy_bridge_app.open(JSON.stringify({\\n                title: \\\"详情\\\",\\n                url: \\\"hiker://page/ysfx?webUrl=\\\"+encodeURIComponent(url)+\\\"&rule=\\\"+rule,\\n            }))\\n        }, input, rule);\\n    } else if (!input.startsWith(\\\"http\\\")) {\\n        log(input);\\n        //能唤起APP的白名单\\n        let white = [\\n            \\\"qklink\\\",\\n            \\\"bdnetdisk\\\",\\n            \\\"xunleiapp\\\",\\n            \\\"smartdrive\\\"\\n        ];\\n        let inWhite = white.filter(it => input.startsWith(it)).length > 0;\\n        if (!inWhite) {\\n            return false;\\n        }\\n        return $.toString((url, rule) => {\\n            fy_bridge_app.openThirdApp && fy_bridge_app.openThirdApp(url);\\n        }, input, rule);\\n    }\\n}\\n\\nfunction loadJs() {\\n    try {\\n        if (document.title && document.title.length) {\\n            let r = $$$().lazyRule((t) => {\\n                setPageTitle(t);\\n            }, document.title);\\n            fy_bridge_app.parseLazyRule(r);\\n        }\\n    } catch (e) {\\n        fy_bridge_app.log(e.toString());\\n    }\\n}\\n\\nd.push({\\n    url: url,\\n    col_type: \\\"x5_webview_single\\\",\\n    desc: \\\"100%&&float\\\",\\n    extra: {\\n        urlInterceptor: $.toString(intercept, rule, getHome(url), openMode),\\n        js: $.toString(loadJs),\\n        canBack: true,\\n        jsLoadingInject: true,\\n        floatVideo: true\\n    }\\n});\\n\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"阿里Lazy\",\"path\":\"alilazy\",\"rule\":\"const AliAccessApi = $.require(\\\"aliPlayApi\\\");\\nconst {\\n    openTokensFilepath,\\n    aliTokensFilepath\\n} = $.require(\\\"tokenPath\\\");\\n\\nfunction aliM3u8Proxy(fileId, shareId, sharePwd, shareToken, aliToken, title) {\\n    let playmode = (MY_PARAMS.mode&&MY_PARAMS.mode[0])||\\\"\\\";\\n    let suffix = playmode ? \\\"media.m3u8\\\" : \\\"ref_task.m3u8\\\";\\n    let urlname = playmode ? \\\"url\\\" : \\\"preview_url\\\";\\n    let cacheFilePath = \\\"hiker://files/_cache/\\\" + fileId + MY_PARAMS.timestamp[0]+ \\\".m3u8\\\"\\n    //过期获取播放原始链接\\n    function getAliPlayUrl(fileId, line) {\\n        let aliurl;\\n        try {\\n            const AliAccessApi = $.require(\\\"hiker://page/aliPlayApi?rule=\\\" + title);\\n            let aliAccessApi = AliAccessApi.createDefault(shareId, sharePwd, shareToken, aliToken, null, title);\\n            let playUrlList = (MY_PARAMS.mode ? aliAccessApi.getAllVideoTemPlayUrl(fileId, true).preview : aliAccessApi.getShareVideoPreview(fileId)) || [];\\n\\n            aliurl = playUrlList.find(v => v.template_id == line)[urlname];\\n        } catch (e) {\\n            log(e.toString());\\n            throw e;\\n        }\\n        return aliurl;\\n    }\\n\\n    function getM3u8Content(playurl) {\\n        //media.m3u8\\n        let home = playurl.split(suffix)[0];\\n        let f = fetch(playurl, {\\n            headers: {\\n                \\\"User-Agent\\\": PC_UA,\\n                \\\"Referer\\\": \\\"https://www.aliyundrive.com/\\\"\\n            },\\n            timeout: 3000\\n        }).split(\\\"\\\\n\\\");\\n        let ff = f.map(it => {\\n            if (it.startsWith(\\\"media-\\\")) {\\n                return \\\"/proxy?url=\\\" + base64Encode(home + it)+\\\"&timestamp=\\\"+MY_PARAMS.timestamp[0]+\\\"&mode=\\\"+playmode;\\n            }\\n            return it;\\n        }).join(\\\"\\\\n\\\");\\n\\n        writeFile(cacheFilePath, ff);\\n        return ff;\\n    }\\n\\n    function updateTsUrl(url) {\\n        let fid = url.split('&f=')[1].split('&')[0];\\n        //log('sfid-' + fid);\\n        let f = fetch(cacheFilePath).split(\\\"\\\\n\\\");\\n        f.forEach(it => {\\n            if (it && it.startsWith('/proxy?url=')) {\\n                let furl = base64Decode(it.replace('/proxy?url=', '').split(\\\"&\\\")[0]);\\n                if (url.substr(url.indexOf('/media-'), url.indexOf('.ts')) == furl.substr(furl.indexOf('/media-'), furl.indexOf('.ts'))) {\\n                    url = furl;\\n                }\\n            }\\n        })\\n        let expires = url.split('x-oss-expires=')[1].split('&')[0];\\n        const lasttime = parseInt(expires) - Date.now() / 1000;\\n        if (lasttime < 60) {\\n            //log('过期更新')\\n            let line = url.split('/media')[0]; //取之前播放的ts段线路\\n            line = line.substring(line.lastIndexOf('/') + 1);\\n            let f = getM3u8Content(getAliPlayUrl(fid, line)).split(\\\"\\\\n\\\");\\n            f.forEach(it => {\\n                if (it && it.startsWith('/proxy?url=')) {\\n                    let furl = base64Decode(it.replace('/proxy?url=', ''));\\n                    if (url.substr(url.indexOf('/media-'), url.indexOf('.ts')) == furl.substr(furl.indexOf('/media-'), furl.indexOf('.ts'))) {\\n                        url = furl;\\n                    }\\n                }\\n            })\\n\\n        }\\n        return url;\\n    }\\n    try {\\n        let url = base64Decode(MY_PARAMS.url[0]);\\n        if (url.includes(\\\".ts\\\")) {\\n            return JSON.stringify({\\n                statusCode: 302,\\n                headers: {\\n                    \\\"Location\\\": updateTsUrl(url),\\n                    \\\"User-Agent\\\": PC_UA,\\n                    \\\"Referer\\\": \\\"https://www.aliyundrive.com/\\\"\\n                }\\n            });\\n        } else {\\n            let templateId = MY_PARAMS.templateId[0];\\n            if(fileExist(cacheFilePath)){\\n                return getM3u8Content(getAliPlayUrl(fileId, templateId));\\n            }else{\\n                return getM3u8Content(url);\\n            }\\n        }\\n    } catch (e) {\\n        log(\\\"#代理播放失败#\\\\n错误信息>\\\" + e.toString() + \\\"\\\\n错误行>\\\" + e.lineNumber);\\n    }\\n}\\nconst transcoding = {\\n    UHD: \\\"4K 超清\\\",\\n    QHD: \\\"2K 超清\\\",\\n    FHD: \\\"1080 全高清\\\",\\n    HD: \\\"720 高清\\\",\\n    SD: \\\"540 标清\\\",\\n    LD: \\\"360 流畅\\\"\\n};\\n\\nfunction getVideo(aliAccessApi, fileId) {\\n\\n    let playUrlList = aliAccessApi.getShareVideoPreview(fileId) || [];\\n\\n    let serverAddress = startProxyServer($.toString(aliM3u8Proxy, fileId, aliAccessApi.shareId, aliAccessApi.sharePwd, aliAccessApi.shareToken, aliAccessApi.aliToken, MY_RULE.title));\\n\\n    if (playUrlList.length > 0) {\\n        let urls = [],\\n            names = [];\\n        playUrlList.forEach((item) => {\\n            urls.push(serverAddress + \\\"?url=\\\" + base64Encode(item.preview_url) + \\\"&timestamp=\\\"+Date.now()+\\\"&templateId=\\\" + item.template_id + \\\"#.m3u8\\\");\\n            names.push(transcoding[item.template_id] ? transcoding[item.template_id] : item.template_height);\\n        });\\n        let heads = new Array(playUrlList.length).fill({\\n            'Referer': 'https://www.aliyundrive.com/'\\n        });\\n        return {\\n            urls: urls,\\n            names: names,\\n            headers: heads,\\n        };\\n    } else {\\n        return {};\\n    }\\n\\n}\\n\\nfunction getSourceTransfer(aliAccessApi, fileId) {\\n    let playUrlInfo = aliAccessApi.getAllVideoTemPlayUrl(fileId);\\n    let playUrlList = playUrlInfo.preview;\\n\\n    let serverAddress = startProxyServer($.toString(aliM3u8Proxy, fileId, aliAccessApi.shareId, aliAccessApi.sharePwd, aliAccessApi.shareToken, aliAccessApi.aliToken, MY_RULE.title));\\n    if (playUrlList.length > 0) {\\n        let urls = [],\\n            names = [];\\n        playUrlList.forEach((item) => {\\n            urls.push(serverAddress + \\\"?url=\\\" + base64Encode(item.url) + \\\"&mode=1&timestamp=\\\"+Date.now()+\\\"&templateId=\\\" + item.template_id + \\\"#.m3u8\\\");\\n            names.push(transcoding[item.template_id] ? transcoding[item.template_id] : item.template_height);\\n        });\\n        urls.push(playUrlInfo.origin);\\n        names.push(\\\"原画\\\");\\n        let heads = new Array(playUrlList.length).fill({\\n            'Referer': 'https://www.aliyundrive.com/'\\n        });\\n        return {\\n            urls: urls,\\n            names: names,\\n            headers: heads,\\n        };\\n    } else {\\n        return {};\\n    }\\n}\\n\\nfunction getPlayFormat(playUrl, title) {\\n    return {\\n        names: [title],\\n        urls: [playUrl + \\\"#isVideo=true##ignoreMusic=true#\\\"],\\n        headers: [{\\n            'Referer': 'https://www.aliyundrive.com/',\\n            \\\"User-Agent\\\": \\\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36\\\"\\n        }]\\n    };\\n}\\n\\n\\n$.exports = function(shareId, sharePwd, shareToken, fileId, cate, zimu) {\\n    if (!fileExist(aliTokensFilepath)) {\\n        toast(\\\"请先登陆登录账号\\\");\\n        return \\\"hiker://page/login#noRecordHistory##noHistory#?noRefresh=1\\\";\\n    }\\n    let aliToken = $.require(aliTokensFilepath);\\n    if (cate === \\\"video\\\") {\\n        let playList = [];\\n        let aliAccessApi;\\n        let playMode = getItem(\\\"aliyun_playMode\\\", \\\"转码\\\");\\n        try {\\n            aliAccessApi = AliAccessApi.createDefault(shareId, sharePwd, shareToken, aliToken);\\n            if (playMode === \\\"转码\\\") {\\n                playList = getVideo(aliAccessApi, fileId) || {};\\n            } else if (playMode === \\\"原画\\\") {\\n                playList = getPlayFormat(aliAccessApi.getVideoTemPlayUrl(fileId), playMode);\\n            } else if (playMode === \\\"极速原画\\\") {\\n                playList = getPlayFormat(aliAccessApi.getVideoTemPlayUrl(fileId) + \\\"#fastPlayMode##threads=\\\" + getItem(\\\"speedThread\\\", \\\"10\\\") + \\\"#\\\", playMode);\\n            } else if (playMode === \\\"原转\\\") {\\n                playList = getSourceTransfer(aliAccessApi, fileId);\\n            }\\n        } catch (e) {\\n            log(\\\"#\\\" + playMode + \\\"播放失败#\\\\n错误信息>\\\" + e.toString() + \\\"\\\\n错误行>\\\" + e.lineNumber);\\n            if (e.code === \\\"InvalidParameter.RefreshToken\\\") {\\n                toast(\\\"登陆过期，请重新登陆\\\");\\n                return \\\"hiker://page/login#noRecordHistory##noHistory#?noRefresh=1\\\";\\n            } else if (e.code === \\\"QuotaExhausted.Drive\\\") {\\n                return \\\"toast://网盘空间不足，无法播放请清理。\\\";\\n            }\\n            return \\\"toast://播放失败，错误信息已打印。\\\\n请查看日志(LOG)\\\";\\n        }\\n        let mountsub = storage0.getMyVar('mountzimu', {});\\n        if (Object.keys(mountsub).length > 0) {\\n            zimu = mountsub;\\n        }\\n        let subtitle;\\n        if (Object.keys(zimu || {}).length > 0 && playList && playList.urls && playList.urls.length > 0) {\\n            java.lang.Thread.sleep(100);\\n            try {\\n                var zmurl = aliAccessApi.getVideoTemPlayUrl(zimu.file_id);\\n                let path = 'hiker://files/cache/云盘君/sub.' + zimu.ext;\\n                downloadFile(zmurl, path, {\\n                    'Referer': 'https://www.aliyundrive.com/'\\n                });\\n                subtitle = getPath(path);\\n            } catch (e) {\\n                toast(\\\"字幕加载失败\\\");\\n                log(e.message);\\n            }\\n        }\\n        let dmlist = storage0.getMyVar(\\\"dmlist\\\", []);\\n        let dmlist_cache = getMyVar(\\\"dmlist_cache\\\", \\\"\\\");\\n        if (dmlist_cache && dmlist_cache.startsWith(fileId + \\\"#\\\")) {\\n            playList.danmu = dmlist_cache.replace(fileId + \\\"#\\\", \\\"\\\");\\n        } else if (dmlist.length > 0) {\\n            playList.danmu = \\\"hiker://files/cache/danmu/\\\" + dmlist.splice(0, 1)[0];\\n            putMyVar(\\\"dmlist_cache\\\", fileId + \\\"#\\\" + playList.danmu);\\n            storage0.putMyVar(\\\"dmlist\\\", dmlist);\\n            if (dmlist.length === 0) {\\n                toast(\\\"弹幕列表已全部挂载\\\");\\n            }\\n        } else {\\n            playList.danmu = getVar(\\\"dm_share\\\", \\\"\\\");\\n        }\\n        playList.subtitle = subtitle;\\n        return JSON.stringify(playList);\\n    }\\n\\n    let aliAccessApi = AliAccessApi.createDefault(shareId, sharePwd, shareToken, aliToken, null);\\n    let url = aliAccessApi.getVideoTemPlayUrl(fileId);\\n\\n    if (cate === \\\"image\\\") {\\n        return url + \\\"#.jpg\\\";\\n    } else if (cate === \\\"audio\\\") {\\n        return url + \\\"#isMusic=true#\\\";\\n    } else {\\n        return \\\"download://\\\" + url;\\n    }\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"阿里列表\",\"path\":\"aliyun\",\"rule\":\"js:\\n//@author LoyDgIk\\nconst AliShareApi = $.require(\\\"AliApi\\\");\\n\\n\\nlet openAPIList = [\\\"alist\\\", \\\"drive\\\", \\\"tvbox\\\", \\\"XBY\\\", \\\"TV\\\"];\\n\\nlet realurl = decodeURIComponent(getParam(\\\"realurl\\\", \\\"\\\")).split(\\\"?\\\")[0];\\nlet urlData = realurl.split(\\\"/\\\");\\n//https://www.aliyundrive.com/s/{shareId}/folder/{fileId}?;\\n\\nlet shareId = MY_PARAMS.shareId || urlData[4];\\nlet sharePwd = getParam(\\\"sharePwd\\\", MY_PARAMS.sharePwd || \\\"\\\");\\nlet shareToken = getParam(\\\"shareToken\\\", MY_PARAMS.shareToken);\\n\\nlet fileId = (urlData[5] === \\\"folder\\\" ? urlData[6] : void 0) || MY_PARAMS.fileId;\\nlet searchKey = decodeURIComponent(getParam(\\\"searchKey\\\", \\\"\\\")) || undefined;\\nlet isSearch = !!searchKey;\\n\\nlet pageId = String(Date.now()).slice(6);\\n\\nlet skipFile = isSearch && getItem(\\\"skipFile\\\", \\\"0\\\") === \\\"1\\\";\\n\\nfunction formatDate(_date, fmt) {\\n    let date = !isNaN(_date) ? new Date(_date * 1000) : new Date(_date);\\n    return $.dateFormat(date, fmt || \\\"yyyy-MM-dd HH:mm:ss\\\")\\n}\\n\\nfunction formatSize(size) {\\n    if (!size) {\\n        return '';\\n    }\\n    const units = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\\n    let i = 0;\\n    while (size >= 1024) {\\n        size /= 1024;\\n        i++;\\n    }\\n    size = i ? Number(size.toFixed(2)) : size;\\n    return `${size} ${units[i]}`;\\n}\\n\\nfunction setMyPaCache(key, value) {\\n    MY_PARAMS[key] = value;\\n}\\n\\nfunction saveMyPaCache() {\\n    setPageParams(MY_PARAMS);\\n}\\n\\nfunction setMarker(marker) {\\n    setMyPaCache(\\\"marker\\\", marker);\\n}\\n\\nfunction setToken(shareToken) {\\n    setMyPaCache(\\\"shareToken\\\", shareToken);\\n}\\nif (MY_PARAMS.noPic) {\\n    setPagePicUrl();\\n    setMyPaCache(\\\"noPic\\\", false);\\n}\\n/*\\nfunction setVideoItemCache(videoItemCache) {\\n    setMyPaCache(\\\"videoItemCache\\\", videoItemCache);\\n}\\n\\nfunction setSubtitleCache(subtitleCache) {\\n    setMyPaCache(\\\"subtitleCache\\\", subtitleCache);\\n}*/\\n\\nlet iconType = \\\"ai|apk|avi|css|dmg|exe|flv|gif|hiker|html|iso|jpg|js|json|log|mov|mp3|mp4|otf|php|png|ppt|psd|table|txt|wav|xls|zip|css|doc|epub|exc|htm|xlsx\\\".split('|');\\n\\nfunction getIcon(ext, type) {\\n    let root = \\\"https://gitcode.net/qq_32394351/dr/-/raw/master/img/文件类型2/\\\";\\n    if (type === \\\"folder\\\") {\\n        return root + \\\"文件夹.svg\\\";\\n    }\\n    if (iconType.includes((ext || \\\"\\\").toLowerCase())) {\\n        return root + ext + \\\".svg\\\";\\n    }\\n    return root + \\\"文件.svg\\\";\\n\\n}\\n\\nfunction load(items) {\\n    let aliShareApi = new AliShareApi(shareId, sharePwd, shareToken, (shareToken) => {\\n        setToken(shareToken);\\n        MY_PARAMS.shareToken = shareToken;\\n    });\\n    let orders = {\\n        \\\"名称正序\\\": \\\"name#ASC\\\",\\n        \\\"名称倒序\\\": \\\"name#DESC\\\",\\n        \\\"时间正序\\\": \\\"updated_at#ASC\\\",\\n        \\\"时间倒序\\\": \\\"updated_at#DESC\\\",\\n        \\\"大小正序\\\": \\\"size#ASC\\\",\\n        \\\"大小倒序\\\": \\\"size#DESC\\\"\\n    };\\n    let playMode = getItem(\\\"aliyun_playMode\\\", \\\"转码\\\");\\n    let ordersKeys = Object.keys(orders);\\n    let orderName = getItem(\\\"aliyun_order\\\", ordersKeys[0]);\\n    let order = orders[orderName].split(\\\"#\\\");\\n    let styles = [\\\"text_1\\\", \\\"movie_2\\\", \\\"card_pic_3\\\", \\\"avatar\\\", \\\"追剧\\\", \\\"看图\\\"];\\n    let style = getItem(\\\"aliyun_style\\\", styles[0]);\\n    if (MY_PAGE === 1) {\\n        if (!getMyVar(\\\"mountzimu\\\", \\\"\\\")) {\\n            storage0.putMyVar(\\\"mountzimu\\\", {});\\n            addListener(\\\"onClose\\\", $.toString(() => {\\n                clearMyVar(\\\"mountzimu\\\");\\n                clearMyVar(\\\"aliShareToken\\\");\\n                clearVar(\\\"dm_share\\\");\\n                clearMyVar(\\\"dmlist\\\");\\n                clearMyVar(\\\"listSearchKey\\\");\\n                clearMyVar(\\\"dm_listUrlList\\\");\\n            }));\\n        }\\n        setMarker();\\n        if (realurl && !isSearch) {\\n            let shareInfo = aliShareApi.getShareInfo();\\n            let fileInfo = shareInfo.file_infos || [];\\n            if (fileInfo.length === 1 && fileInfo[0].type === \\\"folder\\\" && !fileId) {\\n                fileId = fileInfo[0].file_id;\\n                setMyPaCache(\\\"fileId\\\", fileId);\\n                setPageTitle(fileInfo[0].file_name);\\n            } else {\\n                setPageTitle(shareInfo.share_name);\\n            }\\n            let deadline = \\\"永久有效\\\";\\n\\n            if (shareInfo.expiration) {\\n                deadline = \\\"有效至：\\\" + formatDate(shareInfo.expiration);\\n                //shareInfo.updated_at\\n            }\\n            items.push({\\n                title: (shareInfo.creator_name || shareInfo.creator_phone) + \\\"&nbsp;&nbsp;\\\" + deadline.small(),\\n                url: realurl + \\\"#noHistory#\\\",\\n                img: shareInfo.avatar || \\\"hiker://images/icon_unknown\\\",\\n                col_type: \\\"avatar\\\"\\n            });\\n        }\\n        if (!isSearch) {\\n            items.push({\\n                title: \\\"搜索\\\",\\n                url: $.toString(() => {\\n                    input = input.trim();\\n                    if (!input) return \\\"toast://请输入关键词\\\";\\n                    return \\\"hiker://page/aliyun#noHistory##fullTheme#?page=fypage&searchKey=\\\" + encodeURIComponent(input);\\n                }),\\n                col_type: \\\"input\\\",\\n                extra: {\\n                    onChange: \\\"putMyVar('listSearchKey',input)\\\",\\n                    sharePwd: sharePwd,\\n                    shareId: shareId,\\n                    shareToken: shareToken\\n                }\\n            });\\n        } else {\\n            items.push({\\n                title: \\\"““\\\" + searchKey + \\\"””的搜索结果\\\",\\n                url: \\\"hiker://empty\\\",\\n                col_type: \\\"text_center_1\\\",\\n                extra: {\\n                    lineVisible: false\\n                }\\n            });\\n        }\\n        let funcItems = [];\\n        funcItems.push({\\n            title: style,\\n            url: $(styles, 1, \\\"排布样式\\\").select(() => {\\n                setItem(\\\"aliyun_style\\\", input);\\n                refreshPage();\\n                return \\\"toast://已切换\\\";\\n            }),\\n            pic_url: \\\"https://hikerfans.com/img/ali_icon.svg\\\"\\n        }, {\\n            title: orderName,\\n            url: $(ordersKeys, 2, \\\"排序方式\\\").select(() => {\\n                setItem(\\\"aliyun_order\\\", input);\\n                refreshPage();\\n                return \\\"toast://切换成功\\\";\\n            }),\\n            pic_url: \\\"https://hikerfans.com/img/ali_sort.svg\\\"\\n        }, {\\n            title: playMode,\\n            url: $([\\\"转码\\\", \\\"原画\\\", \\\"原转\\\", \\\"极速原画\\\"], 1, \\\"播放模式\\\").select(() => {\\n                setItem(\\\"aliyun_playMode\\\", input);\\n                refreshPage();\\n                return \\\"toast://切换成功\\\";\\n            }),\\n            pic_url: \\\"https://hikerfans.com/img/ali_play.svg\\\",\\n        });\\n        if ([\\\"原转\\\",\\\"原画\\\",\\\"极速原画\\\"].includes(playMode)) {\\n            funcItems.push({\\n                title: openAPIList[getItem(\\\"openApiMode\\\", \\\"0\\\")],\\n                url: $(openAPIList, 1, \\\"原画API(不要频繁切换)\\\").select((openAPIList) => {\\n                    setItem(\\\"openApiMode\\\", String(openAPIList.indexOf(input)));\\n                    deleteFile($.require(\\\"tokenPath\\\").openTokensFilepath);\\n                    refreshPage(false);\\n                    return \\\"toast://已切换为\\\" + input;\\n                }, openAPIList),\\n                pic_url: \\\"https://hikerfans.com/img/ali_api.svg\\\",\\n            });\\n        }\\n        if (!isSearch) {\\n            funcItems.push({\\n                title: \\\"功能\\\",\\n                url: $([\\\"转存云盘\\\", \\\"登陆账号\\\", \\\"复制分享链接\\\", \\\"查看手动挂载字幕\\\", \\\"获取弹幕搜索规则\\\", \\\"批量挂载本地弹幕\\\", \\\"推送到TVBox\\\", \\\"设置收藏封面\\\", \\\"获取投屏IP\\\" , \\\"极速原画下载线程\\\" , \\\"转存当前文件夹\\\"], 2, \\\"更多功能\\\").select((shareId, sharePwd, fileId) => {\\n                    switch (input) {\\n                        case \\\"转存云盘\\\":\\n                            return `smartdrive://share/browse?shareId=${shareId}&sharePwd=${sharePwd||\\\"\\\"}`;\\n                        case \\\"登陆账号\\\":\\n                            return \\\"hiker://page/login#noRecordHistory##noHistory#\\\";\\n                        case \\\"复制分享链接\\\":\\n                            return $([\\\"复制链接\\\", \\\"复制海阔口令\\\"], 1, \\\"分享方式\\\").select((url) => {\\n                                if (input === \\\"复制链接\\\") {\\n                                    return \\\"copy://\\\" + url;\\n                                } else {\\n                                    return \\\"copy://阿里云盘分享口令「\\\" + getPageTitle() + \\\"」\\\\n\\\" + url + \\\" @import=js:`hiker://page/aliyun?realurl=${input.trim()}&rule=\\\" + MY_RULE.title + \\\"`;\\\";\\n                                }\\n                            }, \\\"https://www.aliyundrive.com/s/\\\" + shareId + (fileId ? \\\"/folder/\\\" + fileId : \\\"\\\"));\\n                        case \\\"批量挂载本地弹幕\\\":\\n                            return \\\"hiker://page/dmMount#noHistory##noRecordHistory#\\\";\\n                        case \\\"查看手动挂载字幕\\\":\\n                            let zm = storage0.getMyVar(\\\"mountzimu\\\", {});\\n                            let tip = zm.name ? \\\"当前字幕文件\\\\n\\\" + zm.name + \\\".\\\" + zm.ext : \\\"还未手动挂载字幕\\\";\\n                            confirm({\\n                                title: '手动挂载字幕',\\n                                content: tip + \\\"\\\\n(点击取消可以清除挂载字幕)\\\",\\n                                cancel: () => {\\n                                    clearMyVar(\\\"mountzimu\\\");\\n                                    return \\\"toast://已清除手动挂载字幕\\\";\\n                                }\\n                            });\\n                            return;\\n                        case \\\"获取弹幕搜索规则\\\":\\n                            let rule = {\\n                                \\\"js\\\": JSON.stringify(\\\"hiker://page/loadDm?rule=\\\" + MY_RULE.title + \\\"&title=\\\") + \\\"+encodeURIComponent(playdata.title.split('-')[0]);\\\",\\n                                \\\"name\\\": MY_RULE.title + \\\"弹幕搜索\\\"\\n                            };\\n                            return \\\"rule://\\\" + base64Encode(\\\"￥projection_screen￥\\\" + JSON.stringify(rule));\\n                        case \\\"推送到TVBox\\\":\\n                            return \\\"hiker://page/tvboxPush#noHistory##noRecordHistory#\\\";\\n                        case \\\"设置收藏封面\\\":\\n                            return $([\\\"设置封面地址\\\", \\\"搜索封面\\\"], 1).select(() => {\\n                                if (input === \\\"设置封面地址\\\") {\\n                                    return $(\\\"\\\", \\\"请输入图片地址\\\").input(() => {\\n                                        input = input.trim();\\n                                        if (!input) return \\\"toast://请输入地址\\\";\\n                                        setPagePicUrl(input);\\n                                        return \\\"toast://修改成功\\\";\\n                                    });\\n                                } else {\\n                                    return \\\"hiker://page/frontCover#noHistory##noRecordHistory#\\\";\\n                                }\\n                            });\\n                        case \\\"获取投屏IP\\\":\\n                            let ip = $.require(\\\"aliUtil\\\").getIPv4Address();\\n                            if (ip.startsWith(\\\"192.168.\\\")) {\\n                                return $(ip + \\\"\\\\n该IP适用于流量+热点的投屏\\\\n请替换链接中的0.0.0.0\\\").confirm((ip) => {\\n                                    return \\\"copy://\\\" + ip;\\n                                }, ip);\\n                            } else {\\n                                return $(ip + \\\"\\\\n获取失败非稳定IP,请开启热点再使用,该IP可能会变,不能投屏\\\").confirm(() => {});\\n                            }\\n                        case \\\"极速原画下载线程\\\":\\n                            return $(getItem(\\\"speedThread\\\", \\\"10\\\"), \\\"请输入3-32之间的整数\\\").input(() => {\\n                                let speedThread = parseInt(input);\\n                                if (speedThread < 3 || speedThread > 32) {\\n                                    return \\\"toast://设置不合法\\\";\\n                                }\\n                                setItem(\\\"speedThread\\\", String(speedThread));\\n                                return \\\"toast://设置成功\\\";\\n                            });\\n                        case \\\"转存当前文件夹\\\":\\n                            return \\\"hiker://page/myaliyun#noHistory##noRecordHistory#?page=fypage\\\";\\n                    }\\n                }, shareId, sharePwd, fileId),\\n                pic_url: \\\"https://hikerfans.com/img/ali_fileinto.svg\\\",\\n                extra: {\\n                    pageId: pageId,\\n                    fileId: fileId,\\n                    shareId: shareId,\\n                    shareToken: shareToken,\\n                    sharePwd: sharePwd,\\n                    transfer: true,\\n                    folderName: getPageTitle()\\n                }\\n            });\\n        } else {\\n            funcItems.push({\\n                title: [\\\"ALL\\\", \\\"跳过文件\\\"][Number(skipFile)],\\n                url: $(\\\"#noLoading#\\\").lazyRule((skipFile) => {\\n                    setItem(\\\"skipFile\\\", String(skipFile ? \\\"0\\\" : \\\"1\\\"));\\n                    refreshPage(false);\\n                    return \\\"hiker://empty\\\";\\n                }, skipFile),\\n                pic_url: \\\"hiker://images/icon_search6\\\",\\n            });\\n        }\\n        let funStyle = [\\\"\\\", \\\"\\\", \\\"\\\", \\\"icon_small_3\\\", \\\"icon_round_small_4\\\", \\\"icon_5\\\"][funcItems.length];\\n        items.push.apply(items, funcItems.map(v => (v.col_type = funStyle) && v));\\n        items.push({\\n            col_type: \\\"line_blank\\\"\\n        });\\n    }\\n    let rescod = {};\\n    let marker = MY_PARAMS.marker;\\n    if (isSearch) {\\n        rescod = aliShareApi.getSearchListFile(searchKey, marker, order[0], order[1]);\\n    } else {\\n        rescod = aliShareApi.getListFile(fileId, marker, order[0], order[1]);\\n    }\\n    if (rescod.next_marker) {\\n        setMarker(rescod.next_marker);\\n    } else {\\n        setMarker();\\n    }\\n\\n    var conts = rescod.items;\\n    //字幕匹配准备\\n    let subExts = [\\\"vtt\\\", \\\"srt\\\", \\\"ass\\\"];\\n    var zimulist = [];\\n    conts.forEach((item) => {\\n        if (subExts.includes(item.file_extension && item.file_extension.toLowerCase())) {\\n            let name = item.name.replace('.' + item.file_extension, '');\\n            zimulist.push({\\n                ext: item.file_extension,\\n                file_id: item.file_id,\\n                name: name\\n            });\\n        }\\n    });\\n    //处理夸页匹配字幕\\n    /*\\n    let hasSub = zimulist.length > 0;\\n    if (hasSub&&rescod.next_marker) {\\n        if (zimulist.length > 4) {\\n            setSubtitleCache(zimulist.slice(-4));\\n        } else {\\n            setSubtitleCache(zimulist);\\n        }\\n    }\\n    let lastItem = conts.at(-1);\\n    if (hasSub&&lastItem&&lastItem.category === \\\"video\\\") {\\n        setVideoItemCache(conts.splice(conts.length-1,1));\\n    }\\n    if (MY_PAGE > 1) {\\n        let subtitleCache = MY_PARAMS.subtitleCache || [];\\n        zimulist = zimulist.concat(subtitleCache);\\n        let videoItemCache = MY_PARAMS.videoItemCache || [];\\n        conts = videoItemCache.concat(conts);\\n        setSubtitleCache();\\n        setVideoItemCache();\\n    }*/\\n    //简体优先\\n    zimulist.sort((a, b) => (b.name.endsWith(\\\".sc\\\") || b.name.endsWith(\\\".chs\\\")) - (a.name.endsWith(\\\".sc\\\") || a.name.endsWith(\\\".chs\\\")));\\n    //end\\n    let titleHead = {\\n        video: \\\"🎬\\\",\\n        audio: \\\"🎵\\\",\\n        doc: \\\"📑\\\",\\n        image: \\\"🖼\\\",\\n        zip: \\\"📦\\\",\\n        folder: \\\"📂\\\"\\n    };\\n\\n    function getHead(type, ext) {\\n        let head = titleHead[type];\\n        if (subExts.includes(ext)) {\\n            head = \\\"🕸\\\";\\n        }\\n        return head || \\\"❓\\\";\\n    }\\n\\n    function getPreviewPic(fileItem) {\\n        if (fileItem.thumbnail) {\\n            return $(\\\"https://empty?\\\" + fileItem.file_id).image((pic) => {\\n                try {\\n                    return fetch(pic, {\\n                        inputStream: true\\n                    });\\n                } catch (e) {\\n                    return null;\\n                }\\n            }, fileItem.thumbnail);\\n        }\\n    }\\n    let folderStyle, fileStyle;\\n    let filterType = [];\\n    if (style === \\\"追剧\\\") {\\n        folderStyle = \\\"avatar\\\";\\n        fileStyle = \\\"movie_2\\\";\\n        filterType.push(\\\"video\\\");\\n        items.push({\\n            title: \\\"““””\\\" + \\\"追剧模式只显示文件夹和视频\\\".small().fontcolor(\\\"grey\\\"),\\n            url: \\\"hiker://empty\\\",\\n            col_type: \\\"text_center_1\\\",\\n            extra: {\\n                lineVisible: false\\n            }\\n        });\\n    } else if (style === \\\"看图\\\") {\\n        folderStyle = \\\"avatar\\\";\\n        fileStyle = \\\"card_pic_3\\\";\\n        filterType.push(\\\"image\\\");\\n        items.push({\\n            title: \\\"““””\\\" + \\\"看图模式只显示文件夹和图片\\\".small().fontcolor(\\\"grey\\\"),\\n            url: \\\"hiker://empty\\\",\\n            col_type: \\\"text_center_1\\\",\\n            extra: {\\n                lineVisible: false\\n            }\\n        });\\n    } else {\\n        folderStyle = fileStyle = style;\\n    }\\n    let noSkipFile = !skipFile;\\n    for (let i = 0; i < conts.length; i++) {\\n        let fileItem = conts[i];\\n        let cate = fileItem.category;\\n        let desc = formatDate(fileItem.updated_at);\\n        let pic_url = getIcon(fileItem.file_extension, fileItem.type);\\n\\n        if (fileItem.type === \\\"folder\\\") {\\n            let title = (folderStyle === \\\"text_1\\\" ? titleHead.folder : \\\"\\\") + fileItem.name;\\n            items.push({\\n                title: title,\\n                url: 'hiker://page/aliyun?page=fypage',\\n                col_type: folderStyle,\\n                desc: formatDate(fileItem.updated_at),\\n                pic_url: pic_url,\\n                extra: {\\n                    shareId: shareId,\\n                    shareToken: MY_PARAMS.shareToken,\\n                    fileId: fileItem.file_id,\\n                    sharePwd: sharePwd,\\n                    pageTitle: fileItem.name,\\n                    transfer: true,\\n                    noPic: true,\\n                    longClick: [{\\n                        title: \\\"转存\\\",\\n                        js: JSON.stringify(\\\"hiker://page/myaliyun#noHistory##noRecordHistory#?page=fypage\\\")\\n                    }]\\n                }\\n            });\\n        } else if (noSkipFile) {\\n            if (filterType.length > 0 && !filterType.includes(cate)) {\\n                continue;\\n            }\\n            let subtitle, cls, longc = [{\\n                title: \\\"转存\\\",\\n                js: JSON.stringify(\\\"hiker://page/myaliyun#noHistory##noRecordHistory#?page=fypage\\\")\\n            }];\\n            let title = fileItem.name;\\n            let nameNotExt = fileItem.name.replace('.' + fileItem.file_extension, '');\\n            if (subExts.includes(fileItem.file_extension)) {\\n                longc.push({\\n                    title: \\\"挂载字幕\\\",\\n                    js: $.toString((zm) => {\\n                        storage0.putMyVar('mountzimu', zm);\\n                        return 'toast://挂载完成，当前字幕文件: ' + zm.name + '.' + zm.ext;\\n                    }, {\\n                        ext: fileItem.file_extension,\\n                        file_id: fileItem.file_id,\\n                        name: nameNotExt\\n                    }),\\n                });\\n            }\\n            if (cate === \\\"video\\\") {\\n                if (zimulist.length) {\\n                    subtitle = zimulist.find(v => v.name.includes(nameNotExt));\\n                }\\n                cls = \\\"playlist v\\\" + pageId;\\n            }\\n            if (fileStyle === \\\"text_1\\\") {\\n                desc += \\\"\\\\t\\\\t\\\" + formatSize(fileItem.size);\\n                title = getHead(cate, fileItem.file_extension) + title;\\n            } else if ([\\\"video\\\", \\\"image\\\"].includes(cate)) {\\n                pic_url = getPreviewPic(fileItem) || pic_url;\\n            }\\n            items.push({\\n                title: title,\\n                url: $(\\\"#noPre#\\\").lazyRule((shareId, sharePwd, shareToken, fileId, cate, subtitle) => {\\n                    return $.require(\\\"hiker://page/alilazy\\\")(shareId, sharePwd, shareToken, fileId, cate, subtitle);\\n                }, shareId, sharePwd, MY_PARAMS.shareToken, fileItem.file_id, cate, subtitle),\\n                desc: desc,\\n                pic_url: pic_url,\\n                extra: {\\n                    id: fileItem.file_id,\\n                    transfer: true,\\n                    shareInfo: {\\n                        pageId: pageId,\\n                        fileId: fileItem.file_id,\\n                        shareId: shareId,\\n                        shareToken: shareToken,\\n                        sharePwd: sharePwd,\\n                    },\\n                    longClick: longc,\\n                    cls: cls,\\n                    //inheritTitle: false,\\n                    pageTitle: fileItem.name\\n                },\\n                col_type: fileStyle\\n            });\\n        }\\n    }\\n    if (conts.length === 0) {\\n        items.push({\\n            col_type: \\\"text_center_1\\\",\\n            url: \\\"hiker://empty\\\",\\n            title: \\\"““””\\\" + \\\"~~~什么都没有了哦~~~\\\".fontcolor(\\\"Gray\\\"),\\n            extra: {\\n                lineVisible: false,\\n            }\\n        });\\n    }\\n}\\n\\nlet items = [];\\ntry {\\n    if (MY_PAGE > 1 && !MY_PARAMS.marker) {\\n        items.push({\\n            col_type: \\\"text_center_1\\\",\\n            url: \\\"hiker://empty\\\",\\n            title: \\\"““””\\\" + \\\"~~~什么都没有了哦~~~\\\".fontcolor(\\\"Gray\\\"),\\n            extra: {\\n                lineVisible: false,\\n            }\\n        });\\n    } else {\\n        load(items);\\n    }\\n} catch (e) {\\n    if (e.name === \\\"AliError\\\") {\\n        if (e.code === \\\"InvalidResource.SharePwd\\\") {\\n            items.push({\\n                title: \\\"请输入提取码\\\",\\n                desc: sharePwd ? \\\"““提取码错误””\\\" : \\\"\\\",\\n                url: $().input((MY_PARAMS) => {\\n                    setPageParams(Object.assign({}, MY_PARAMS, {\\n                        sharePwd: input\\n                    }));\\n                    refreshPage();\\n                }, MY_PARAMS),\\n                col_type: \\\"text_center_1\\\"\\n            });\\n        } else {\\n            if (e.significance === 1) {\\n                items.push({\\n                    title: \\\"““””\\\" + e.message.big().big().fontcolor(\\\"red\\\"),\\n                    url: \\\"hiker://empty\\\",\\n                    col_type: 'text_center_1',\\n                });\\n            } else if (e.significance === 3) {\\n                items.push({\\n                    title: \\\"““””\\\" + e.message.big().fontcolor(\\\"green\\\"),\\n                    url: \\\"hiker://empty\\\",\\n                    col_type: 'text_center_1'\\n                });\\n            }\\n        }\\n\\n    } else {\\n        log(\\\"列表加载失败#\\\\n错误信息>\\\" + e.toString() + \\\"\\\\n错误行>\\\" + e.lineNumber);\\n        items.push({\\n            title: '欧欧，报错了。在刷新几次？或者更换文件夹。',\\n            url: \\\"hiker://empty\\\",\\n            desc: e.toString(),\\n            col_type: 'text_center_1'\\n        });\\n        //throw e;\\n    }\\n}\\nsaveMyPaCache();\\nsetResult(items);\"},{\"col_type\":\"movie_3\",\"name\":\"登录账号\",\"path\":\"login\",\"rule\":\"js:\\nvar d = [];\\nsetPageTitle(\\\"登录阿里云盘\\\");\\nlet index = Number(getParam(\\\"index\\\", \\\"1\\\"));\\nif (Number.isNaN(index)) {\\n    index = 1;\\n}\\n\\n\\nfunction getQRCode() {\\n    let json = fetch(\\\"https://passport.aliyundrive.com/newlogin/qrcode/generate.do?appName=aliyun_drive&fromSite=52&appName=aliyun_drive&appEntrance=web&isMobile=false&lang=zh_CN&returnUrl=&bizParams=&_bx-v=2.2.3\\\");\\n    let qr = JSON.parse(json);\\n    if (!openAppIntent('com.alicloud.databox', 'com.taobao.login4android.scan.QrScanActivity', {\\n            \\\"key_scanParam\\\": json\\n        })) {\\n        createQRCode(qr.content.data.codeContent, false);\\n    }\\n    return qr;\\n}\\n\\nfunction backHome(t, i) {\\n    back(i);\\n    toast(t);\\n}\\n\\nfunction fromAppGetToken(qr) {\\n    let qr = getQRCode();\\n    if (!qr) return backHome(\\\"获取失败\\\");\\n    let ckk = qr.content.data;\\n    let body = {\\n        ck: ckk.ck,\\n        t: ckk.t + \\\"\\\",\\n        appName: \\\"aliyun_drive\\\",\\n        appEntrance: \\\"web\\\",\\n        isMobile: false,\\n        lang: \\\"zh_CN\\\",\\n        navPlatform: \\\"MacIntel\\\",\\n        returnUrl: \\\"\\\",\\n        navlanguage: \\\"zh-CN\\\",\\n        fromSite: 52,\\n        bizParams: \\\"\\\"\\n\\n    };\\n    /*\\n     {\\n        NEW: \\\"待扫描\\\",\\n        CANCELED: \\\"取消\\\",\\n        SCANED:\\\"已扫描\\\",\\n        CANCELED: \\\"完成\\\"\\n    }*/\\n    let errorCount = 0;\\n    for (let i = 0; i < 30; i++) {\\n        try {\\n            let result = JSON.parse(post(\\\"https://passport.aliyundrive.com/newlogin/qrcode/query.do?appName=aliyun_drive&fromSite=52&_bx-v=2.2.3\\\", {\\n                body: body\\n            }));\\n            let qrCodeStatus = result.content.data.qrCodeStatus;\\n\\n            if (qrCodeStatus === \\\"CONFIRMED\\\") {\\n                if (result.content.data.bizExt) {\\n                    let info = JSON.parse(base64Decode(result.content.data.bizExt));\\n                    let aliTokensFilepath = $.require(\\\"hiker://page/tokenPath\\\").aliTokensFilepath;\\n                    let aliToken = {\\n                        refresh_token: info.pds_login_result.refreshToken\\n                    };\\n                    writeFile(aliTokensFilepath, JSON.stringify(aliToken));\\n                    addItemAfter(\\\"loginy\\\", {\\n                        title: \\\"登录成功(点击返回)\\\",\\n                        url: $(\\\"#noLoading#\\\").lazyRule(() => {\\n                            back(false);\\n                            return \\\"hiker://empty\\\";\\n                        }),\\n                        col_type: \\\"text_center_1\\\",\\n                    });\\n                    backHome(\\\"登录成功\\\", true);\\n                } else {\\n                    backHome(\\\"登录失败,请尝试其他的方法\\\");\\n                }\\n                return;\\n            } else if (qrCodeStatus === \\\"CANCELED\\\") {\\n                backHome(\\\"取消登录授权\\\");\\n                return;\\n            }\\n            if ([\\\"NEW\\\", \\\"SCANED\\\"].includes(qrCodeStatus)) {\\n                java.lang.Thread.sleep(2500);\\n            } else {\\n                backHome(\\\"超时\\\");\\n                return;\\n            }\\n        } catch (e) {\\n            errorCount++;\\n            if (errorCount > 4) {\\n                throw e;\\n            }\\n        }\\n    }\\n\\n}\\nif (index > -1) {\\n    let loginUrls = [\\\"https://www.aliyundrive.com/sign\\\", \\\"https://auth.aliyundrive.com/v2/oauth/authorize?login_type=custom&response_type=code&redirect_uri=https%3A%2F%2Fwww.aliyundrive.com%2Fsign%2Fcallback&client_id=25dzX3vbYqktVxyX&state=%7B%22origin%22%3A%22*%22%7D#/login\\\"];\\n    let url = loginUrls[index];\\n    let isRefresh = !getParam(\\\"noRefresh\\\");\\n    let aliTokensFilepath = $.require(\\\"tokenPath\\\").aliTokensFilepath;\\n\\n    var js = $.toString((isRefresh, aliTokensFilepath) => {\\n        setInterval(() => {\\n            var token = JSON.parse(localStorage.getItem('token'));\\n            if (token && token.user_id) {\\n                let token_url = aliTokensFilepath;\\n                fy_bridge_app.writeFile(token_url, JSON.stringify(token));\\n                localStorage.clear();\\n                fy_bridge_app.back(isRefresh);\\n                fy_bridge_app.toast('TOKEN获取成功，请勿泄漏个人隐私！！！');\\n                return;\\n            }\\n        }, 300);\\n    }, isRefresh, aliTokensFilepath);\\n\\n    d.push({\\n        url: url,\\n        col_type: 'x5_webview_single',\\n        desc: '100%&&float',\\n        extra: {\\n            canBack: false,\\n            js: js,\\n            urlInterceptor: $.toString(() => true)\\n        }\\n    });\\n    setResult(d);\\n} else {\\n    \\n    d.push({\\n        col_type: \\\"text_center_1\\\",\\n        title: \\\"““””\\\" + \\\"等待授权...\\\".big().big(),\\n        desc: \\\"如果升级了官方App，无法自动调起授权，请扫码登录\\\",\\n        url: \\\"hiker://empty\\\",\\n        extra: {\\n            id: \\\"loginy\\\",\\n        }\\n    });\\n    setResult(d);\\n    try {\\n        fromAppGetToken();\\n    } catch (e) {\\n        backHome(\\\"内部错误:\\\" + e.toString());\\n    }\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"阿里列表API\",\"path\":\"AliApi\",\"rule\":\"js:\\n//@author LoyDgIk\\nfunction AliError(errorCode, message, significance) {\\n    let errorType = AliError.errorCodeMap.get(errorCode) || [];\\n    this.code = errorCode;\\n    this.message = errorType[0] || message || \\\"\\\";\\n    this.name = \\\"AliError\\\";\\n    this.significance = errorType[1] || significance || 1;\\n}\\nAliError.errorCodeMap = new Map([\\n    [\\\"ShareLink.Cancelled\\\", [\\\"分享链接已失效\\\"]],\\n    [\\\"ShareLink.Forbidden\\\", [\\\"违规资源已被封禁\\\"]],\\n    [\\\"NotFound.ShareLink\\\", [\\\"不存在该链接请核对\\\"]],\\n    [\\\"AccessTokenInvalid\\\", [\\\"访问令牌失效，请重新登陆\\\"]],\\n    [\\\"ShareLinkTokenInvalid\\\", [\\\"分享令牌失效\\\"]],\\n    [\\\"ParamFlowException\\\", [\\\"访问过于频繁，请稍后再试\\\", 3]]\\n]);\\n\\nAliError.prototype = Object.assign(new Error(), {\\n    constructor: AliError\\n});\\n\\nfunction postApi(api, body, headers) {\\n    let result = request('https://api.aliyundrive.com' + api, {\\n        headers: Object.assign({\\n            'Content-Type': 'application/json',\\n        }, headers),\\n        body: JSON.stringify(body),\\n        method: 'POST'\\n    });\\n    result = JSON.parse(result);\\n    if (result.code) {\\n        throw new AliError(result.code, result.message);\\n    }\\n    return result;\\n}\\n\\nfunction AliShareApi(shareId, sharePwd, shareToken, refreshCallBack) {\\n    this.shareId = shareId;\\n    this.sharePwd = sharePwd;\\n    this.refreshCallBack = refreshCallBack || (() => void 0);\\n    this.shareToken = shareToken || this.getShareToken();\\n}\\nObject.assign(AliShareApi.prototype, {\\n    getShareToken() {\\n        let result = postApi(\\\"/v2/share_link/get_share_token\\\", {\\n            \\\"share_id\\\": this.shareId,\\n            \\\"share_pwd\\\": this.sharePwd,\\n        });\\n        this.shareToken = result.share_token;\\n        this.refreshCallBack(result.share_token, this);\\n        return result.share_token;\\n    },\\n    postTokenApi(api, body, headers, isRetry) {\\n        let result;\\n        try {\\n            result = postApi(api, body, Object.assign({\\n                \\\"X-Share-Token\\\": this.shareToken || this.getShareToken()\\n            }, headers));\\n        } catch (e) {\\n            if ((e.code === \\\"AccessTokenInvalid\\\" || e.code === \\\"ShareLinkTokenInvalid\\\") && !isRetry) {\\n                this.getShareToken();\\n                return this.postTokenApi(api, body, headers, true);\\n            }\\n            throw e;\\n        }\\n        return result;\\n    },\\n    getListFile(fileId, marker, orderBy, orderDirection) {\\n        let result = this.postTokenApi(\\\"/adrive/v3/file/list\\\"/*\\\"/adrive/v2/file/list_by_share\\\"*/, {\\n            \\\"share_id\\\": this.shareId,\\n            \\\"parent_file_id\\\": fileId || \\\"root\\\",\\n            \\\"limit\\\": 100,\\n            \\\"image_thumbnail_process\\\": \\\"image/resize,w_160/format,jpeg\\\",\\n            \\\"image_url_process\\\": \\\"image\\\\/resize,w_1920/format,jpeg\\\",\\n            \\\"video_thumbnail_process\\\": \\\"video/snapshot,t_1000,f_jpg,ar_auto,w_300\\\",\\n            \\\"order_by\\\": orderBy || \\\"name\\\",\\n            \\\"order_direction\\\": orderDirection || \\\"ASC\\\",\\n            \\\"marker\\\": marker\\n        });\\n        return result;\\n    },\\n    getShareInfo() {\\n        let result = postApi(\\\"/adrive/v3/share_link/get_share_by_anonymous?share_id=\\\" + this.shareId, {\\n            \\\"share_id\\\": this.shareId,\\n        });\\n        return result;\\n    },\\n    getSearchListFile(key, marker, orderBy, orderDirection) {\\n        let result = this.postTokenApi(\\\"/recommend/v1/shareLink/search\\\", {\\n            \\\"share_id\\\": this.shareId,\\n            \\\"keyword\\\": key,\\n            \\\"limit\\\": 100,\\n            \\\"order_by\\\": orderBy + \\\" \\\" + orderDirection,\\n            \\\"marker\\\": marker || undefined\\n        });\\n        if (Object.keys(result).length === 0) {\\n            result.items = [];\\n        }\\n        return result;\\n    }\\n});\\n$.exports = AliShareApi;\"},{\"col_type\":\"movie_3\",\"name\":\"阿里播放API\",\"path\":\"aliPlayApi\",\"rule\":\"//@author LoyDgIk\\n\\nfunction AliAccessApi({\\n    shareId,\\n    sharePwd,\\n    shareToken,\\n    aliTokens,\\n    openTokens,\\n    openSuffix,\\n    refreshShareCallBack,\\n    refreshAccessCallBack,\\n    refreshOpenCallBack\\n}) {\\n    this.openSuffix = openSuffix || \\\"\\\";\\n    this.shareId = shareId;\\n    this.sharePwd = sharePwd;\\n    this.shareToken = shareToken;\\n    this.refreshShareCallBack = refreshShareCallBack || (() => void 0);\\n    this.refreshAccessCallBack = refreshAccessCallBack || (() => void 0);\\n    this.refreshOpenCallBack = refreshOpenCallBack || (() => void 0);\\n    this.aliTokens = aliTokens || {};\\n    if (!this.aliTokens.refresh_token) {\\n        throw new Error(\\\"未登陆\\\");\\n    }\\n    if (!this.aliTokens.access_token) {\\n        this.refreshAccessToken();\\n    }\\n    this.defDriveId = this.aliTokens.resource_drive_id || this.aliTokens.default_drive_id;\\n    this.reaccessTk = (this.aliTokens.token_type || \\\"Bearer\\\") + ' ' + this.aliTokens.access_token;\\n    Object.defineProperty(this, \\\"shareToken\\\", {\\n        get() {\\n            return this._shareToken || this.getShareToken();\\n        },\\n        set(v) {\\n            this._shareToken = v;\\n        }\\n    });\\n    Object.defineProperty(this, \\\"openTools\\\", {\\n        get() {\\n            if (this._openTools) return this._openTools;\\n            let OpenApiTools;\\n            switch (getItem(\\\"openApiMode\\\", \\\"0\\\")) {\\n                case \\\"1\\\":\\n                    OpenApiTools = $.require(\\\"openApi_aliyundrive\\\" + this.openSuffix);\\n                    break;\\n                case \\\"2\\\":\\n                    OpenApiTools = $.require(\\\"openApi_tvbox\\\" + this.openSuffix);\\n                    break;\\n                case \\\"3\\\":\\n                    OpenApiTools = $.require(\\\"openApi_XBY\\\" + this.openSuffix);\\n                    break;\\n                case \\\"4\\\":\\n                    OpenApiTools = $.require(\\\"openApi_tv\\\" + this.openSuffix);\\n                    break;\\n                case \\\"0\\\":\\n                default:\\n                    OpenApiTools = $.require(\\\"openApi_alist\\\" + this.openSuffix);\\n            }\\n            this._openTools = new OpenApiTools(this);\\n            return this._openTools;\\n        }\\n    });\\n    Object.defineProperty(this, \\\"openTokens\\\", {\\n        get() {\\n            if (this._openTokens) return this._openTokens;\\n            this._openTokens = Object.assign({\\n                'RefreshTokenOpen': '',\\n                'AccessTokenOpen': '',\\n                'BindRefreshToken': '',\\n            }, openTokens);\\n            if (openTokens !== null && !this._openTokens.AccessTokenOpen) {\\n                this.refreshOpenToken();\\n            }\\n            return this._openTokens;\\n        }\\n    });\\n}\\nObject.assign(AliAccessApi.prototype, {\\n    _openTools: void 0,\\n    _openTokens: void 0,\\n    _shareToken: void 0,\\n    waitSleep(time) {\\n        java.lang.Thread.sleep(time || 600);\\n        return this;\\n    },\\n    postApi(api) {\\n        return httpRequest.post(api.startsWith(\\\"http\\\") ? api : 'https://api.aliyundrive.com' + api).bodyToString(true).error((err) => {\\n            throw err;\\n        }).errorType((err, res) => {\\n            let result = {};\\n            try {\\n                result = JSON.parse(res.body);\\n            } catch (e) {\\n                return err;\\n            }\\n            let rbody = (result.code ? result : (result && result.responses && result.responses[0] && result.responses[0].body)) || {};\\n            if (rbody.code) {\\n                let msg = rbody.display_message || rbody.message;\\n                let error = new Error(api + \\\"=>\\\" + rbody.code + \\\":\\\" + msg);\\n                error.code = rbody.code;\\n                error.judgeMsg = msg;\\n                return error;\\n            }\\n            return err;\\n        });\\n    },\\n    setMyDrividType(isBackup) {\\n        this.myDrividType = !!isBackup;\\n        return this;\\n    },\\n    trySolve(e) {\\n        if (e.code === \\\"ShareLinkTokenInvalid\\\" || e.code === \\\"InvalidParameterNotMatch.ShareId\\\") {\\n            this.waitSleep(20).getShareToken();\\n            return true;\\n        } else if (e.code === \\\"AccessTokenInvalid\\\" || e.code === \\\"AccessTokenExpired\\\") {\\n            this.waitSleep(20).refreshAccessToken();\\n            return true;\\n        } else if (e.code === \\\"ForbiddenNoPermission.File\\\" || (e.code === \\\"BadRequest\\\" && e.judgeMsg === \\\"仅可保存到转存空间\\\")) {\\n            this.aliTokens.resource_drive_id = undefined;\\n            this.waitSleep(20).refreshAccessToken();\\n            return true;\\n        }\\n        return false;\\n    },\\n    tryOpenApiSolve(e) {\\n        if (e.code === \\\"AccessTokenInvalid\\\" || e.code === \\\"AccessTokenExpired\\\") {\\n            this.waitSleep(20).refreshOpenToken();\\n            return true;\\n        } else {\\n            this.waitSleep(20).refreshAccessToken();\\n            this.waitSleep(20).refreshOpenToken();\\n            return true;\\n        }\\n        return false;\\n    },\\n    getShareToken() {\\n        if (!this.shareId) return;\\n        let result = this.postApi(\\\"/v2/share_link/get_share_token\\\").body({\\n            \\\"share_id\\\": this.shareId,\\n            \\\"share_pwd\\\": this.sharePwd,\\n        }).start(true);\\n        this.shareToken = result.share_token;\\n        this.refreshShareCallBack(result.share_token, this);\\n        return result.share_token;\\n    },\\n    refreshAccessToken() {\\n        let result = this.postApi(\\\"https://auth.aliyundrive.com/v2/account/token\\\")\\n            .body({\\n                \\\"grant_type\\\": \\\"refresh_token\\\",\\n                \\\"refresh_token\\\": this.aliTokens.refresh_token,\\n            }).headers({\\n                \\\"User-Agent\\\": PC_UA,\\n                \\\"Referer\\\": \\\"https://www.aliyundrive.com/\\\"\\n            }).error((e) => {\\n                if (e.code === \\\"InvalidParameter.RefreshToken\\\") {\\n                    e.message = \\\"#登陆过期请重新登陆#\\\\n\\\" + e.message;\\n                    throw e;\\n                }\\n            }).start(true);\\n        delete result.user_data;\\n        let originDefdDriveId = this.aliTokens.default_drive_id;\\n        this.aliTokens = Object.assign(this.aliTokens, result);\\n        this.reaccessTk = this.aliTokens.token_type + ' ' + this.aliTokens.access_token;\\n        try {\\n            if ((originDefdDriveId !== this.aliTokens.default_drive_id) || this.aliTokens.resource_drive_id === undefined) {\\n                let resource_drive_id = this.getUserInfo().resource_drive_id;\\n                this.aliTokens.resource_drive_id = resource_drive_id;\\n                if (resource_drive_id) {\\n                    this.defDriveId = resource_drive_id;\\n                } else {\\n                    this.defDriveId = this.aliTokens.default_drive_id;\\n                }\\n            }\\n        } catch (e) {\\n            log(\\\"用户信息获取失败：\\\" + e.toString());\\n        }\\n        this.refreshAccessCallBack(result, this);\\n        return this.aliTokens;\\n    },\\n    getUserInfo() {\\n        let info = this.postApi(\\\"https://user.aliyundrive.com/v2/user/get\\\").headers({\\n            \\\"User-Agent\\\": PC_UA,\\n            \\\"authorization\\\": this.reaccessTk,\\n            \\\"Referer\\\": \\\"https://www.aliyundrive.com/\\\"\\n        }).errorWithRetry((e, _, http) => {\\n            this.trySolve(e);\\n            http.mergeHeadAndBody({\\n                headers: {\\n                    'authorization': this.reaccessTk\\n                }\\n            });\\n            return true;\\n        }).start(true);\\n        return info;\\n    },\\n    cacheOpenToken(openResult) {\\n        this.openTokens.RefreshTokenOpen = openResult.refresh_token;\\n        this.openTokens.AccessTokenOpen = openResult.token_type + \\\" \\\" + openResult.access_token;\\n        this.openTokens.BindRefreshToken = this.aliTokens.refresh_token;\\n        this.refreshOpenCallBack(openResult, this);\\n    },\\n    refreshOpenToken() {\\n        try {\\n            let openResult;\\n            if (this.openTokens.RefreshTokenOpen && this.openTokens.BindRefreshToken === this.aliTokens.refresh_token) {\\n                openResult = this.openTools.refreshOpenToken() || {};\\n            } else {\\n                openResult = this.openTools.getOpenToken() || {};\\n            }\\n            if (openResult.refresh_token) {\\n                this.cacheOpenToken(openResult);\\n                return this.openTokens;\\n            } else {\\n                throw new Error(\\\"返回结果无Token\\\");\\n            }\\n        } catch (e) {\\n            throw new Error(\\\"OpenToken获取失败:\\\" + e.toString());\\n        }\\n    },\\n    _cloudFileOperate(body, cloudFileId, operateUrl) {\\n        let result = this.postApi('https://api.aliyundrive.com/adrive/v2/batch').body({\\n            \\\"requests\\\": [{\\n                \\\"body\\\": body,\\n                \\\"headers\\\": {\\n                    \\\"Content-Type\\\": \\\"application/json\\\"\\n                },\\n                \\\"id\\\": cloudFileId || \\\"0\\\",\\n                \\\"method\\\": \\\"POST\\\",\\n                \\\"url\\\": operateUrl\\n            }],\\n            \\\"resource\\\": \\\"file\\\"\\n        }).headers({\\n            'User-Agent': PC_UA,\\n            'Referer': 'https://www.aliyundrive.com/',\\n            'authorization': this.reaccessTk,\\n            //getAccessToken\\n            'x-canary': 'client=web,app=share,version=v2.3.1',\\n            'x-share-token': this.shareToken\\n        }).errorWithRetry((e, _, http) => {\\n            if (e.code === \\\"QuotaExhausted.Drive\\\") {\\n                throw e;\\n            }\\n\\n            if (!this.trySolve(e)) {\\n                this.waitSleep(20).refreshAccessToken();\\n            }\\n            let body = http.options.body.requests[0].body;\\n            if (body.drive_id) {\\n                body.drive_id = this.getMyDrivid();\\n            }\\n            if (body.to_drive_id) {\\n                body.to_drive_id = this.getMyDrivid();\\n            }\\n            http.mergeHeadAndBody({\\n                headers: {\\n                    'authorization': this.reaccessTk,\\n                    'x-share-token': this.shareToken\\n                }\\n            });\\n            return true;\\n        }).start(true);\\n        return result;\\n    },\\n    copyFileToCloudFile(fileId, parentFileId, retry) {\\n        let result = this._cloudFileOperate({\\n            \\\"file_id\\\": fileId,\\n            \\\"share_id\\\": this.shareId,\\n            \\\"auto_rename\\\": true,\\n            \\\"to_parent_file_id\\\": parentFileId || \\\"root\\\",\\n            \\\"to_drive_id\\\": this.getMyDrivid()\\n        }, \\\"0\\\", \\\"/file/copy\\\");\\n        let body = result && result.responses && result.responses[0] && result.responses[0].body || {};\\n        if (!body.file_id && !retry) {\\n            this.waitSleep(20).getShareToken();\\n            this.waitSleep(20).refreshAccessToken();\\n            return this.waitSleep(20).copyFileToCloudFile(fileId, parentFileId, true);\\n        } else if (!body.file_id) {\\n            let e = new Error(\\\"文件复制失败:\\\\n\\\" + JSON.stringify(result));\\n            e.code = body.code;\\n            throw e;\\n        }\\n        return result.responses[0].body.file_id;\\n    },\\n    openCloudFileToDownUrl(cloudFileId) {\\n        let fileInfo = this.postApi('https://open.aliyundrive.com/adrive/v1.0/openFile/getDownloadUrl').body({\\n            'file_id': cloudFileId,\\n            'drive_id': this.getMyDrivid()\\n        }).headers({\\n            'User-Agent': PC_UA,\\n            'Referer': 'https://www.aliyundrive.com/',\\n            'authorization': this.openTokens.AccessTokenOpen\\n        }).errorWithRetry(2, (e, _, http) => {\\n            //this.waitSleep(30).trySolve(e);\\n            this.waitSleep(30).tryOpenApiSolve(e);\\n            http.mergeHeadAndBody({\\n                body: {\\n                    'drive_id': this.getMyDrivid(),\\n                },\\n                headers: {\\n                    'authorization': this.openTokens.AccessTokenOpen\\n                }\\n            });\\n            return true;\\n        }).start(true);\\n        if (!fileInfo.url || fileInfo.code) throw new Error(\\\"下载链接获取失败\\\\n\\\" + fileInfo.code + \\\":\\\" + fileInfo.message);\\n        return fileInfo.url;\\n    },\\n    deleteeCloudFile(cloudFileId) {\\n        let result = this._cloudFileOperate({\\n            \\\"drive_id\\\": this.getMyDrivid(),\\n            \\\"file_id\\\": cloudFileId\\n        }, cloudFileId, \\\"/file/delete\\\");\\n        return result;\\n    },\\n    getVideoCloudPreview(cloudFileId) {\\n        let fileInfo = this.postApi('https://open.aliyundrive.com/adrive/v1.0/openFile/getVideoPreviewPlayInfo').body({\\n            'file_id': cloudFileId,\\n            'drive_id': this.getMyDrivid(),\\n            \\\"category\\\": \\\"live_transcoding\\\",\\n            \\\"template_id\\\": \\\"\\\",\\n            \\\"get_subtitle_info\\\": true,\\n            \\\"url_expire_sec\\\": 14400,\\n            \\\"with_play_cursor\\\": true\\n        }).headers({\\n            'User-Agent': PC_UA,\\n            'Referer': 'https://www.aliyundrive.com/',\\n            'authorization': this.openTokens.AccessTokenOpen\\n        }).errorWithRetry(2, (e, _, http) => {\\n            //this.waitSleep(30).trySolve(e);\\n            this.waitSleep(30).tryOpenApiSolve(e);\\n            http.mergeHeadAndBody({\\n                body: {\\n                    'drive_id': this.getMyDrivid(),\\n                },\\n                headers: {\\n                    'authorization': this.openTokens.AccessTokenOpen\\n                }\\n            });\\n            return true;\\n        }).start(true);\\n        return fileInfo.video_preview_play_info.live_transcoding_task_list.reverse();\\n    },\\n    getAllVideoTemPlayUrl(fileId, onlyPreview) {\\n        let cloudFileId = this.copyFileToCloudFile(fileId);\\n        this.waitSleep(20);\\n        let playUrl = onlyPreview ? undefined : this.openCloudFileToDownUrl(cloudFileId);\\n        this.waitSleep(50);\\n        let preview = this.getVideoCloudPreview(cloudFileId);\\n        this.waitSleep(50);\\n        try {\\n            this.deleteeCloudFile(cloudFileId);\\n        } catch (e) {\\n            log(\\\"#文件删除失败#\\\\n错误信息>\\\" + e.toString() + \\\"\\\\n错误行>\\\" + e.lineNumber);\\n        }\\n        return {\\n            origin: playUrl,\\n            preview\\n        };\\n    },\\n    getVideoTemPlayUrl(fileId) {\\n        let cloudFileId = this.copyFileToCloudFile(fileId);\\n        this.waitSleep(20);\\n        let playUrl = this.openCloudFileToDownUrl(cloudFileId);\\n        this.waitSleep(50);\\n        try {\\n            this.deleteeCloudFile(cloudFileId);\\n        } catch (e) {\\n            log(\\\"#文件删除失败#\\\\n错误信息>\\\" + e.toString() + \\\"\\\\n错误行>\\\" + e.lineNumber);\\n        }\\n        return playUrl;\\n    },\\n    getFileToDownUrl(fileId) {\\n        let downloadInfo = this.postApi(\\\"/v2/file/get_share_link_download_url\\\").body({\\n            \\\"expire_sec\\\": 600,\\n            \\\"file_id\\\": fileId,\\n            \\\"share_id\\\": this.shareId\\n        }).headers({\\n            \\\"X-Share-Token\\\": this.shareToken,\\n            \\\"authorization\\\": this.aliTokens.access_token\\n        }).errorWithRetry((e, _, http) => {\\n            this.trySolve(e);\\n            http.mergeHeadAndBody({\\n                headers: {\\n                    \\\"X-Share-Token\\\": this.shareToken,\\n                    \\\"authorization\\\": this.aliTokens.access_token\\n                }\\n            });\\n            return true;\\n        }).start(true);\\n        return downloadInfo.download_url;\\n    },\\n    \\n    getSign() {\\n        if (!this.aliTokens.device_id) {\\n            this.waitSleep(20).refreshAccessToken();\\n        }\\n        let calculateNewSign = () => {\\n            let sign = justTestSign(\\\"5dde4e1bdf9e4966b387ba58f4b3fdc3\\\", this.aliTokens.device_id, this.aliTokens.user_id).split(\\\"##\\\");\\n            return {\\n                signature: sign.at(0),\\n                pubKey: sign.at(-1)\\n            };\\n        };\\n        let newSign = calculateNewSign();\\n        let result = this.postApi('/users/v1/users/device/create_session').body({\\n            \\\"deviceName\\\": \\\"Edge浏览器\\\",\\n            \\\"modelName\\\": \\\"Windows网页版\\\",\\n            \\\"pubKey\\\": newSign.pubKey,\\n        }).headers({\\n            'User-Agent': PC_UA,\\n            'Referer': 'https://www.aliyundrive.com',\\n            'Authorization': this.reaccessTk,\\n            'X-Share-Token': this.shareToken,\\n            'x-device-id': this.aliTokens.device_id,\\n            'x-signature': newSign.signature\\n        }).errorWithRetry(3, (e, _, http) => {\\n            if (e.message === \\\"x-device-id empty\\\") {\\n                this.waitSleep(20).refreshAccessToken();\\n            }\\n            this.trySolve(e);\\n            this.waitSleep(50);\\n            newSign = calculateNewSign();\\n            http.mergeHeadAndBody({\\n                body: {\\n                    \\\"pubKey\\\": newSign.pubKey\\n                },\\n                headers: {\\n                    'Authorization': this.reaccessTk,\\n                    'X-Share-Token': this.shareToken,\\n                    'x-device-id': this.aliTokens.device_id,\\n                    'x-signature': newSign.signature\\n                }\\n            });\\n            return true;\\n        }).error((err, res) => {\\n            return {};\\n        }).success((body) => {\\n            return body;\\n        }).start(true);\\n        if (result.success) {\\n            return newSign;\\n        } else {\\n            throw new Error(\\\"Sign获取失败，请重试。\\\\ncode:\\\" + (result.code || \\\"\\\") + \\\"\\\\nmessage:\\\" + (result.message || \\\"\\\"));\\n        }\\n    },\\n    getShareVideoPreview(fileId) {\\n        let sign = this.getSign();\\n        let json = this.postApi('https://api.aliyundrive.com/v2/file/get_share_link_video_preview_play_info').body({\\n            \\\"category\\\": \\\"live_transcoding\\\",\\n            \\\"file_id\\\": fileId,\\n            \\\"get_preview_url\\\": true,\\n            \\\"share_id\\\": this.shareId,\\n            \\\"template_id\\\": \\\"\\\",\\n            \\\"get_subtitle_info\\\": true\\n        }).headers({\\n            'content-type': 'application/json;charset=UTF-8',\\n            \\\"origin\\\": \\\"https://www.aliyundrive.com\\\",\\n            \\\"referer\\\": \\\"https://www.aliyundrive.com/\\\",\\n            \\\"user-agent\\\": \\\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.41\\\",\\n            \\\"x-canary\\\": \\\"client=web,app=adrive,version=v3.1.0\\\",\\n            \\\"x-share-token\\\": this.shareToken,\\n            \\\"fileid\\\": this.aliTokens.user_id,\\n            'Authorization': this.reaccessTk,\\n            'x-device-id': this.aliTokens.device_id,\\n            'x-signature': sign.signature\\n        }).errorWithRetry((e, _, http) => {\\n            this.trySolve(e);\\n            http.mergeHeadAndBody({\\n                headers: {\\n                    'Authorization': this.reaccessTk,\\n                    'X-share-token': this.shareToken,\\n                    'x-device-id': this.aliTokens.device_id,\\n                    'x-signature': sign.signature\\n                }\\n            });\\n            return true;\\n        }).start(true);\\n        return json.video_preview_play_info.live_transcoding_task_list.reverse();\\n    },\\n    getMyDrivid() {\\n        return (this.myDrividType ? this.aliTokens.default_drive_id : this.aliTokens.resource_drive_id) || this.defDriveId;\\n    },\\n    getListFile(fileId, marker, orderBy, orderDirection) {\\n        let result = this.postApi(\\\"https://open.aliyundrive.com/adrive/v1.0/openFile/list\\\").body({\\n            \\\"drive_id\\\": this.getMyDrivid(),\\n            \\\"parent_file_id\\\": fileId || \\\"root\\\",\\n            \\\"limit\\\": 100,\\n            \\\"all\\\": true,\\n            \\\"url_expire_sec\\\": 86400,\\n            \\\"image_thumbnail_process\\\": \\\"image/resize,w_400/format,jpeg\\\",\\n            \\\"image_url_process\\\": \\\"image/resize,w_1920/format,jpeg\\\",\\n            \\\"video_thumbnail_process\\\": \\\"video/snapshot,t_1000,f_jpg,ar_auto,w_300\\\",\\n            \\\"order_by\\\": orderBy || \\\"name\\\",\\n            \\\"order_direction\\\": orderDirection || \\\"ASC\\\",\\n            \\\"marker\\\": marker\\n        }).headers({\\n            'User-Agent': PC_UA,\\n            'Referer': 'https://www.aliyundrive.com/',\\n            'authorization': this.openTokens.AccessTokenOpen\\n        }).errorWithRetry(2, (e, _, http) => {\\n\\n            this.waitSleep(30).tryOpenApiSolve(e);\\n            http.mergeHeadAndBody({\\n                body: {\\n                    'drive_id': this.getMyDrivid(),\\n                },\\n                headers: {\\n                    'authorization': this.openTokens.AccessTokenOpen\\n                }\\n            });\\n            return true;\\n        }).start(true);\\n        return result;\\n    },\\n    getSearchListFile(key, marker, orderBy, orderDirection, mode) {\\n        let type = \\\"\\\";\\n        if (mode === 1) {\\n            type = \\\"type=\\\\\\\"file\\\\\\\" and \\\";\\n        } else if (mode === 2) {\\n            type = \\\"type=\\\\\\\"folder\\\\\\\" and \\\";\\n        }\\n        let result = this.postApi(\\\"https://api.alipan.com/adrive/v3/file/search\\\").body({\\n            \\\"drive_id\\\": this.getMyDrivid(),\\n            \\\"query\\\": type + \\\"name match \\\" + JSON.stringify(key),\\n            \\\"limit\\\": 100,\\n            \\\"order_by\\\": orderBy + \\\" \\\" + orderDirection,\\n            \\\"marker\\\": marker || undefined\\n        }).headers({\\n            'User-Agent': PC_UA,\\n            'Referer': 'https://www.aliyundrive.com/',\\n            'authorization': this.reaccessTk\\n        }).errorWithRetry(2, (e, _, http) => {\\n            this.waitSleep(20).refreshAccessToken();\\n            //this.waitSleep(30).tryOpenApiSolve(e);\\n            http.mergeHeadAndBody({\\n                body: {\\n                    'drive_id': this.getMyDrivid(),\\n                },\\n                headers: {\\n                    'authorization': this.reaccessTk\\n                }\\n            });\\n            return true;\\n        }).start(true);\\n        if (Object.keys(result).length === 0) {\\n            result.items = [];\\n        }\\n        return result;\\n    },\\n    signInReward() {\\n        let silData = this.postApi('https://member.aliyundrive.com/v1/activity/sign_in_list').body({\\n            'grant_type': 'refresh_token',\\n            'refresh_token': this.aliTokens.refresh_token\\n        }).headers({\\n            'Authorization': this.reaccessTk,\\n            'Content-Type': 'application/json'\\n        }).errorWithRetry((e, _, http) => {\\n            this.trySolve(e);\\n            http.mergeHeadAndBody({\\n                headers: {\\n                    'Authorization': this.reaccessTk,\\n\\n                },\\n                body: {\\n                    'refresh_token': this.aliTokens.refresh_token\\n                }\\n            });\\n            return true;\\n        }).start(true);\\n        let day = silData.result.signInCount;\\n        let isReward = silData.result.signInLogs[day - 1].isReward;\\n        if (isReward) {\\n            let reward = silData.result.signInLogs[day - 1].reward;\\n            if (reward) {\\n                let rewnotice = reward.notice;\\n                return \\\"今天已经签到，请不要重复签到！\\\\n\\\" + rewnotice;\\n            } else {\\n                //没有奖励，只有幸运签名片\\n                return \\\"今天已经签到，请不要重复签到！\\\\n今日好运签:\\\" + silData.result.blessing;\\n            }\\n        } else {\\n            let sirData = this.postApi('https://member.aliyundrive.com/v1/activity/sign_in_reward').body({\\n                \\\"signInDay\\\": day\\n            }).headers({\\n                'Authorization': this.reaccessTk,\\n                'Content-Type': 'application/json'\\n            }).start(true);\\n            let reward = sirData.result;\\n            if (reward) {\\n                let msg = \\\"签到成功! 获得奖励:\\\" + reward.notice + \\\"(\\\" + reward.subNotice + \\\") 本月已连续签到:\\\" + day + \\\"天\\\";\\n                return msg;\\n            } else {\\n                //没有奖励，只有幸运签名片\\n                return \\\"签到成功！今日幸运签:\\\" + silData.result.blessing;\\n            }\\n        }\\n    }\\n});\\n\\nAliAccessApi.createDefault = function(shareId, sharePwd, shareToken, aliToken, openToken, MY_TITLE) {\\n    const {\\n        openTokensFilepath,\\n        aliTokensFilepath\\n    } = $.require(\\\"tokenPath\\\" + (MY_TITLE ? \\\"?rule=\\\" + MY_TITLE : \\\"\\\"));\\n    if (!openToken && openToken !== null && fileExist(openTokensFilepath)) {\\n        openToken = $.require(openTokensFilepath);\\n    }\\n    if (!aliToken && fileExist(aliTokensFilepath)) {\\n        aliToken = $.require(aliTokensFilepath);\\n    }\\n    if (MY_TITLE) {\\n        shareToken = getVar(MY_TITLE + \\\"@aliShareToken\\\", shareToken);\\n    } else {\\n        shareToken = getMyVar(\\\"aliShareToken\\\", shareToken);\\n    }\\n    return new AliAccessApi({\\n        shareId,\\n        sharePwd,\\n        shareToken,\\n        aliTokens: aliToken,\\n        openTokens: openToken,\\n        openSuffix: (MY_TITLE ? \\\"?rule=\\\" + MY_TITLE : \\\"\\\"),\\n        refreshAccessCallBack(result, api) {\\n            writeFile(aliTokensFilepath, JSON.stringify(api.aliTokens));\\n        },\\n        refreshOpenCallBack(result, api) {\\n            writeFile(openTokensFilepath, JSON.stringify(api.openTokens));\\n        },\\n        refreshShareCallBack(result) {\\n            if (MY_TITLE) {\\n                shareToken = putVar(MY_TITLE + \\\"@\\\" + \\\"aliShareToken\\\", result);\\n            } else {\\n                shareToken = putMyVar(\\\"aliShareToken\\\", result);\\n            }\\n        }\\n    });\\n}\\n$.exports = AliAccessApi;\\n\\nfunction httpRequest(url, options) {\\n    this.retryCount = 0;\\n    this.url = url;\\n    this.options = Object.assign({}, options, {\\n        withHeaders: true\\n    });\\n    this.errorCallback = (err, res) => {\\n        throw err\\n    };\\n    this.errorCallbackWithRetry = (err, res, tryRestart) => false;\\n    this.successCallback = (body, res) => body;\\n    this.errorTypeCallback = (err, res) => err;\\n    this.startRequest = fetch;\\n    this._bodyToString = false;\\n}\\n\\nObject.assign(httpRequest.prototype, {\\n    bodyToString(flag) {\\n        this._bodyToString = !!flag;\\n        return this;\\n    },\\n    body(body) {\\n        this.options.body = body || void 0;\\n        return this;\\n    },\\n    setStartRequestFunc(func) {\\n        this.startRequest = func;\\n        return this;\\n    },\\n    headers(headers) {\\n        this.options.headers = headers || void 0;\\n        return this;\\n    },\\n    success(successCallback) {\\n        if (typeof successCallback !== \\\"function\\\") return this;\\n        this.successCallback = successCallback;\\n        return this;\\n    },\\n    error(errorCallback) {\\n        if (typeof errorCallback !== \\\"function\\\") return this;\\n        this.errorCallback = errorCallback;\\n        return this;\\n    },\\n    errorType(errorTypeCallback) {\\n        if (typeof errorTypeCallback !== \\\"function\\\") return this;\\n        this.errorTypeCallback = errorTypeCallback;\\n        return this;\\n    },\\n    errorWithRetry(retryCount, errorCallbackWithRetry) {\\n        if (typeof retryCount === \\\"function\\\" && typeof errorCallbackWithRetry === \\\"undefined\\\") {\\n            errorCallbackWithRetry = retryCount;\\n            retryCount = 1;\\n        }\\n        if (typeof errorCallbackWithRetry !== \\\"function\\\") {\\n            return this;\\n        }\\n        this.retryCount = Number(retryCount);\\n        this.errorCallbackWithRetry = errorCallbackWithRetry;\\n        return this;\\n    },\\n    start(toJson) {\\n        let options = Object.assign({}, this.options);\\n        if (typeof options.body === \\\"object\\\" && this._bodyToString) {\\n            options.body = JSON.stringify(options.body);\\n        }\\n        var res = JSON.parse(this.startRequest(this.url, options));\\n        try {\\n            if (res.statusCode >= 200 && res.statusCode <= 300) {\\n                let body = res.body;\\n                if (toJson) {\\n                    body = JSON.parse(body);\\n                }\\n                return this.successCallback(body, res);\\n            } else {\\n                throw new Error(String(res.statusCode));\\n            }\\n        } catch (err) {\\n            try {\\n                err = this.errorTypeCallback(err, res);\\n            } catch (e) {\\n\\n            }\\n            if (this.retryCount) {\\n\\n                let tryResult = this.errorCallbackWithRetry(err, res, this);\\n                if (tryResult) {\\n                    this.retryCount--;\\n                    return this.start(toJson);\\n                } else {\\n                    this.retryCount = 0;\\n                    return this.errorCallback(err, res);\\n                }\\n            } else {\\n                return this.errorCallback(err, res);\\n            }\\n        }\\n    },\\n    setOptions(options) {\\n        this.options = Object.assign({}, options, {\\n            withHeaders: true\\n        });\\n        return this;\\n    },\\n    mergeHeadAndBody(options) {\\n        options = options || {};\\n        this.options.headers = Object.assign(this.options.headers, options.headers);\\n        if (typeof this.options.body === \\\"object\\\" && typeof options.body === \\\"object\\\") {\\n            this.options.body = Object.assign(this.options.body, options.body);\\n        }\\n        return this;\\n    }\\n});\\n\\nObject.assign(httpRequest, {\\n    fetch(url, options) {\\n        return new httpRequest(url, options);\\n    },\\n    post(url, options) {\\n        return new httpRequest(url, options).setStartRequestFunc(post);\\n    },\\n    request(url, options) {\\n        return new httpRequest(url, options).setStartRequestFunc(request);\\n    },\\n    postRequest(url, options) {\\n        return new httpRequest(url, options).setStartRequestFunc(postRequest);\\n    },\\n    fetchCookie(url, options) {\\n        return new httpRequest(url, options).setStartRequestFunc(fetchCookie);\\n    }\\n});\"},{\"col_type\":\"movie_3\",\"name\":\"Token路径\",\"path\":\"tokenPath\",\"rule\":\"$.exports={\\n    \\\"openTokensFilepath\\\": \\\"hiker://files/rules/LoyDgIk/aliOpenToken.json\\\",\\n    \\\"aliTokensFilepath\\\": \\\"hiker://files/rules/LoyDgIk/aliToken.json\\\"\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"弹弹play工具\",\"path\":\"danmu\",\"rule\":\"js:\\nlet basicUrl = \\\"https://api.dandanplay.net/\\\";\\nlet sevePath = \\\"hiker://files/cache/danmu/\\\";\\n\\nfunction getRefreshRate() {\\n    const Context = android.content.Context;\\n    const Display = android.view.Display;\\n    const WindowManager = android.view.WindowManager;\\n    const context = com.example.hikerview.ui.Application().getContext();\\n\\n    let windowManager = context.getSystemService(Context.WINDOW_SERVICE);\\n\\n    let display = windowManager.getDefaultDisplay();\\n\\n    let refreshRate = display.getRefreshRate();\\n    return refreshRate;\\n}\\n$.exports.getDanMu = function(key) {\\n    return JSON.parse(request(basicUrl + \\\"api/v2/search/episodes?anime=\\\" + encodeURIComponent(decodeURIComponent(key))));\\n}\\n\\nfunction encodeHtml(s) {\\n    let REGX_HTML_ENCODE = /“|&|’|\\\\u003C|>|[\\\\x00-\\\\x20]|[\\\\x7F-\\\\xFF]|[\\\\u0100-\\\\u2700]/g;\\n   return s.replace(REGX_HTML_ENCODE, function($0) {\\n        var c = $0.charCodeAt(0),\\n            r = [\\\"&#\\\"];\\n        c = (c == 0x20) ? 0xA0 : c;\\n        r.push(c);\\n        r.push(\\\";\\\");\\n        return r.join(\\\"\\\");\\n    });\\n}\\n\\n\\n\\n//0默认 1简体 2繁体\\n$.exports.downloadDanMu = function(episodeId, name) {\\n    let danMuData = JSON.parse(request(buildUrl(basicUrl + \\\"api/v2/comment/\\\" + episodeId, {\\n        withRelated: true,\\n        chConvert: 1\\n    })));\\n    let dMcontext = \\\"\\\";\\n    //let fpsm = getRefreshRate()/60*0.95;\\n    //danMuData.comments.sort((v,x)=>v.p.split(\\\",\\\")[0]-x.p.split(\\\",\\\")[0]);\\n    for (let comment of danMuData.comments) {\\n        //dMcontext += `<d p=\\\"${Math.round(timepoint)},${ct},${size},${color},0\\\">${content}</d>\\\\n`;\\n        let paramText = comment.p;\\n        let commentText = comment.m;\\n        if (paramText == null || commentText == null) continue;\\n        let params = paramText.split(\\\",\\\");\\n        let paramsT = [];\\n        for (let i in params) {\\n            /*if (i == 0) {\\n                paramsT.push(parseInt(params[i]));\\n                continue;\\n            }*/\\n            if (i == 2) {\\n                paramsT.push(\\\"25\\\");\\n            }\\n            if (i == 3) {\\n                //颜色值为0时，默认设置为白色\\n                if (params[i] == \\\"0\\\" || params[i] == \\\"-1\\\") {\\n                    paramsT.push(\\\"16777215\\\");\\n                    continue\\n                }\\n                break;\\n            }\\n            paramsT.push(params[i]);\\n        }\\n        paramsT.push(\\\"0\\\");\\n        let times=parseInt(params[0]/60)+\\\":\\\"+parseInt(params[0]%60);\\n        dMcontext += `<d p=\\\"${paramsT.join(',')}\\\">${encodeHtml(commentText)+\\\"#\\\"+times}</d>\\\\n`;\\n    }\\n    if (!dMcontext) return;\\n    dMcontext = `<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?><i>\\\\n${dMcontext}</i>`;\\n    let path = sevePath + name.replace(/\\\\//g, \\\"_\\\") + \\\"_\\\" + episodeId + \\\".xml\\\";\\n    writeFile(path, dMcontext);\\n    return path;\\n}\\n$.exports.getLocalDanMu = function(episodeId, name) {\\n    let path = sevePath + name.replace(/\\\\//g, \\\"_\\\") + \\\"_\\\" + episodeId + \\\".xml\\\";\\n    if (fileExist(path)) {\\n        return path;\\n    }\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"弹幕搜索&加载\",\"path\":\"loadDm\",\"rule\":\"js:\\nlet d = [];\\nlet onlyDownload = !!MY_PARAMS.onlyDownload;\\nif (onlyDownload) {\\n    addListener(\\\"onClose\\\", () => {\\n        refreshPage(false);\\n    });\\n}\\nd.push({\\n    col_type: \\\"rich_text\\\",\\n    title: \\\"<font color='Gray'>❗关于<br><small> 内置搜索P数据来源于[弹弹play]</small></font>\\\"\\n});\\nd.push({\\n    col_type: \\\"line\\\"\\n});\\nlet key = MY_PARAMS.name || getMyVar(\\\"s\\\") || decodeURIComponent(getParam(\\\"title\\\", \\\"\\\")) || \\\"\\\";\\nd.push({\\n    title: \\\"内置搜索P\\\",\\n    url: $(key, \\\"请搜索番剧名称\\\").input((MY_PARAMS) => {\\n        setPageParams(Object.assign(MY_PARAMS, {\\n            name: input,\\n        }));\\n        refreshPage();\\n    }, MY_PARAMS),\\n    col_type: \\\"text_3\\\"\\n});\\nd.push({\\n    title: \\\"内置搜索T\\\",\\n    url: $(key, \\\"格式：搜索关键词[回车]集数\\\").input((onlyDownload) => {\\n        try {\\n            showLoading(\\\"正在搜索并下载...\\\");\\n            let [name, pos] = input.split(\\\"\\\\n\\\");\\n            if (!name || !pos) {\\n                throw \\\"格式错误\\\";\\n            }\\n            let urlInfo = fetch(buildUrl(\\\"https://azure.leuse.top/searchdm\\\", {\\n                params: {\\n                    \\\"name\\\": name,\\n                    \\\"pos\\\": pos\\n                }\\n            }));\\n            urlInfo = JSON.parse(urlInfo);\\n            if (!urlInfo.url) throw \\\"暂时没有找到该视频的弹幕\\\";\\n            let xml = fetch(buildUrl(\\\"https://azure.leuse.top/danmu\\\", {\\n                params: urlInfo\\n            }));\\n            hideLoading();\\n            if (!xml) {\\n                throw \\\"还没有弹幕哟~\\\";\\n            }\\n            let path = \\\"hiker://files/cache/danmu/\\\" + urlInfo.platform + \\\"_\\\" + name + \\\"_\\\" + pos + \\\".xml\\\";\\n            writeFile(path, '<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\\\n' + xml);\\n            if (onlyDownload) return \\\"toast://下载完成\\\";\\n            refreshVideoUrl({\\n                danmu: path\\n            });\\n            back(false);\\n            return \\\"toast://加载完成\\\";\\n        } catch (e) {\\n            hideLoading();\\n            return \\\"toast://\\\" + e.toString();\\n        }\\n    }, onlyDownload),\\n    col_type: \\\"text_3\\\"\\n});\\nd.push({\\n    title: \\\"dm盒子搜索\\\",\\n    url: $(\\\"#noLoading#\\\").lazyRule((key, onlyDownload) => {\\n        let dm = getVar(\\\"dm_share\\\");\\n        if (dm && !onlyDownload) {\\n            clearVar(\\\"dm_share\\\");\\n            refreshVideoUrl({\\n                danmu: dm\\n            });\\n            back(false);\\n            return \\\"toast://加载完成\\\";\\n        } else {\\n            return $(key, \\\"dm盒子搜索\\\").input(() => {\\n                toast(\\\"下载完成弹幕后请重新点击搜索\\\");\\n                return \\\"hiker://search?rule=dm盒子&s=\\\" + input;\\n            });\\n        }\\n    }, key, onlyDownload),\\n    col_type: \\\"text_3\\\"\\n});\\n\\nfunction search(d, name) {\\n    const danmu = $.require(\\\"danmu\\\");\\n    d.push({\\n        col_type: \\\"line\\\"\\n    });\\n    d.push({\\n        col_type: \\\"line\\\"\\n    });\\n    d.push({\\n        col_type: \\\"line\\\"\\n    });\\n    let dmList = danmu.getDanMu(name);\\n\\n    for (let anime of dmList.animes) {\\n        d.push({\\n            title: anime.animeTitle,\\n            desc: anime.typeDescription,\\n            col_type: \\\"avatar\\\",\\n            url: $(\\\"\\\", \\\"请输入下载范围(1,\\\" + anime.episodes.length + \\\")\\\").input((animeTitle, episodes) => {\\n                let [a, b] = input.split(/,|，/);\\n                a = Number(a), b = Number(b);\\n                if (Number.isNaN(a) || Number.isNaN(b)) {\\n                    return \\\"toast://请按格式输入数字\\\";\\n                }\\n                if (a < 1 || b > episodes.length) {\\n                    return \\\"toast://请输入规定范围内的数字\\\";\\n                }\\n                const danmu = $.require(\\\"danmu\\\");\\n                try {\\n                    for (let i = a - 1, j = 1; i < b; i++, j++) {\\n                        let episode = episodes[i];\\n                        let dmTitle = animeTitle + \\\"_\\\" + episode.episodeTitle;\\n                        showLoading(\\\"正在下载：\\\" + episode.episodeTitle + \\\"\\\\t(\\\" + j + \\\"/\\\" + (b - a + 1) + \\\")\\\");\\n                        danmu.downloadDanMu(episode.episodeId, dmTitle);\\n                    }\\n                } catch (e) {\\n                    log(e.toString());\\n                    hideLoading();\\n                    return \\\"toast://哦哦下载失败...\\\";\\n                }\\n                hideLoading();\\n                return \\\"toast://下载完成\\\";\\n            }, anime.animeTitle, anime.episodes),\\n            pic_url: \\\"https://hikerfans.com/tubiao/movie/14.svg\\\"\\n        });\\n        d.push({\\n            col_type: \\\"line\\\"\\n        });\\n        for (let episode of anime.episodes) {\\n            let dmTitle = anime.animeTitle + \\\"_\\\" + episode.episodeTitle;\\n            d.push({\\n                title: episode.episodeTitle,\\n                url: $(episode.episodeId).lazyRule((url, title, onlyDownload) => {\\n                    const danmu = $.require(\\\"danmu\\\");\\n                    let path = danmu.getLocalDanMu(input, title) || danmu.downloadDanMu(input, title);\\n                    if (onlyDownload) return \\\"toast://下载完成\\\";\\n                    let danmuText = fetch(path);\\n                    if (!danmuText) return \\\"toast://还没有弹幕哟~\\\";\\n                    refreshVideoUrl({\\n                        danmu: path\\n                    });\\n                    back(false);\\n                    return \\\"toast://加载完成\\\";\\n                }, MY_PARAMS.durl, dmTitle, onlyDownload),\\n                col_type: \\\"text_1\\\",\\n                extra: {\\n                    longClick: [{\\n                        title: \\\"强制下载\\\",\\n                        js: $.toString((episodeTitle, episodeId) => {\\n                            showLoading(\\\"请等待\\\");\\n                            const danmu = $.require(\\\"danmu\\\");\\n                            danmu.downloadDanMu(episodeId, episodeTitle);\\n                            hideLoading();\\n                            return \\\"toast://重新下载完成，单击挂载。\\\";\\n                        }, dmTitle, episode.episodeId)\\n                    }]\\n                }\\n            });\\n        }\\n        d.push({\\n            col_type: \\\"line_blank\\\"\\n        });\\n    }\\n    if (!dmList.animes.length) {\\n        d.push({\\n            title: \\\"没有找到与[\\\" + name + \\\"]相关的弹幕\\\",\\n            url: \\\"hiker://empty\\\",\\n            desc: \\\"搜不到怎么办？\\\\n检查名称是否正确；可以尝试删除部分限定词，如第一季等；而且只能搜索番剧哦！其他弹幕可用dm盒子。\\\",\\n            col_type: \\\"text_center_1\\\"\\n        });\\n    }\\n}\\nlet name = getParam(\\\"name\\\", MY_PARAMS.name);\\nif (name) {\\n    try {\\n        search(d, name);\\n    } catch (e) {\\n        d.push({\\n            title: \\\"““ERROR””\\\",\\n            desc: e.toString(),\\n            col_type: \\\"text_1\\\"\\n        });\\n    }\\n}\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"公开工具\",\"path\":\"aliUtil\",\"rule\":\"//提供给规则使用的常用函数\\n$.exports = {\\n    checkali(realurl) {\\n        try {\\n            if (realurl.includes(\\\"com/s/\\\") && realurl != \\\"\\\") {\\n                let shareId = realurl.split(\\\"?\\\")[0].split(\\\"/\\\")[4];\\n                let share = fetch(\\\"https://api.aliyundrive.com/adrive/v3/share_link/get_share_by_anonymous\\\", {\\n                    headers: {\\n                        'content-type': 'application/json',\\n                        \\\"User-Agent\\\": PC_UA,\\n                        \\\"Referer\\\": \\\"https://www.aliyundrive.com/\\\"\\n                    },\\n                    body: {\\n                        \\\"share_id\\\": shareId\\n                    },\\n                    method: 'POST'\\n                });\\n                if (share.includes(\\\"share_link is\\\") || share.includes(\\\"share_link cannot\\\")) return false;\\n            }\\n        } catch (e) {}\\n        return true;\\n    },\\n    bytesToSize(size) {\\n        if (!size) {\\n            return '0';\\n        }\\n        const units = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\\n        let i = 0;\\n        while (size >= 1024) {\\n            size /= 1024;\\n            i++;\\n        }\\n        size = i ? Number(size.toFixed(2)) : size;\\n        return `${size} ${units[i]}`;\\n    },\\n    getCryptoJS() {\\n        if (typeof CryptoJS === \\\"undefined\\\") {\\n            eval(getCryptoJS());\\n            return CryptoJS;\\n        }\\n        return CryptoJS;\\n    },\\n    matchAliUrl(text, isG) {\\n        return $.require(\\\"alitest\\\").matchAliUrl(text, isG);\\n    },\\n    getIPv4Address() {\\n        const NetworkInterface = java.net.NetworkInterface;\\n        try {\\n            for (let en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) {\\n                let intf = en.nextElement();\\n                for (let enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements();) {\\n                    let inetAddress = enumIpAddr.nextElement();\\n                    if (!inetAddress.isLoopbackAddress() && inetAddress instanceof java.net.Inet4Address) {\\n                        return String(inetAddress.getHostAddress());\\n                    }\\n                }\\n            }\\n        } catch (ex) {\\n            log(ex.toString());\\n        }\\n        return \\\"0.0.0.0\\\";\\n    }\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"弹幕批量挂载\",\"path\":\"dmMount\",\"rule\":\"js:\\nlet d = [];\\naddListener(\\\"onClose\\\", () => clearMyVar(\\\"dllastTime\\\"));\\nsetPageTitle(\\\"弹幕挂载:\\\"+(MY_PARAMS.folderName||\\\"?\\\"));\\nd.push({\\n    title: \\\"清空挂载列表\\\",\\n    url: $(\\\"#noLoading#\\\").lazyRule(() => {\\n        clearMyVar(\\\"dmlist\\\");\\n        refreshPage(false);\\n        return \\\"hiker://empty\\\";\\n    }),\\n    col_type: \\\"text_3\\\",\\n});\\nif(!MY_PARAMS.automaticadd){\\n    MY_PARAMS.automaticadd = getItem(\\\"automaticadd\\\",\\\"1\\\");\\n    setPageParams(MY_PARAMS);\\n}\\nd.push({\\n    title: \\\"检测新增:\\\"+[\\\"关闭\\\",\\\"开启\\\"][MY_PARAMS.automaticadd||\\\"0\\\"],\\n    url: $(\\\"#noLoading#\\\").lazyRule((v) => {\\n       setItem(\\\"automaticadd\\\", v.automaticadd===\\\"1\\\"?\\\"0\\\":\\\"1\\\");\\n       v.automaticadd = undefined;\\n       setPageParams(v);\\n       refreshPage(false);\\n       return \\\"hiker://empty\\\";\\n    }, MY_PARAMS),\\n    col_type: \\\"text_3\\\",\\n});\\nd.push({\\n    title: \\\"下载弹幕\\\",\\n    col_type: \\\"text_3\\\",\\n    url: \\\"hiker://page/loadDm#noHistory##noRecordHistory#\\\",\\n    extra: {\\n        onlyDownload: true,\\n        name: MY_PARAMS.name||decodeURIComponent(getParam(\\\"name\\\",\\\"\\\"))\\n    }\\n});\\nd.push({\\n    col_type: \\\"line_blank\\\"\\n});\\nd.push({\\n    title: \\\"““””\\\" + \\\"已挂载\\\".big(),\\n    url: $(\\\"#noLoading#\\\").lazyRule(() => {\\n        let dmlist = storage0.getMyVar(\\\"dmlist\\\", []);\\n        let FileSorting = $.require(\\\"FileSorting\\\");\\n        dmlist.sort((a, b) => FileSorting.nameCompare(a, b));\\n        storage0.putMyVar(\\\"dmlist\\\", dmlist);\\n        refreshPage(false);\\n        return \\\"toast://排序完成\\\";\\n    }),\\n    col_type: \\\"text_center_1\\\"\\n});\\nlet file = $.require(\\\"https://hikerfans.com/weisyr/js/file.js?v=1\\\");\\nlet dmlist = storage0.getMyVar(\\\"dmlist\\\", []);\\n\\nfor (let i = 0; i < dmlist.length; i++) {\\n    let dmname = dmlist[i];\\n    d.push({\\n        title: \\\"[\\\" + (i + 1) + \\\"]\\\\t\\\" + dmname,\\n        url: $(\\\"#noLoading#\\\").lazyRule((i) => {\\n            let dmlist = storage0.getMyVar(\\\"dmlist\\\", []);\\n            dmlist.splice(i, 1);\\n            storage0.putMyVar(\\\"dmlist\\\", dmlist);\\n            refreshPage(false);\\n            return \\\"hiker://empty\\\";\\n        }, i),\\n        col_type: \\\"text_1\\\"\\n    });\\n}\\nd.push({\\n    col_type: \\\"line_blank\\\"\\n});\\nd.push({\\n    title: \\\"““””\\\" + \\\"本地未挂载\\\".big(),\\n    url: $(\\\"是否清除所有本地弹幕文件?\\\\n(弹幕文件每三天会自动清除)\\\").confirm(() => {\\n        let file = $.require(\\\"https://hikerfans.com/weisyr/js/file.js?v=1\\\");\\n        file.deleteFiles(getPath(\\\"hiker://files/cache/danmu/\\\").slice(7));\\n        clearMyVar(\\\"dmlist\\\");\\n        refreshPage(false);\\n        return \\\"toast://已删除\\\";\\n    }),\\n    col_type: \\\"text_center_1\\\"\\n});\\nlet dmListPath = getPath(\\\"hiker://files/cache/danmu/\\\").slice(7);\\nlet fileList = file.getFilePath(dmListPath, \\\"file\\\", \\\".xml\\\");\\nlet lastTime = 0;\\n\\nfor (let i = 0; i < fileList.length; i++) {\\n    let dmfile = fileList[i];\\n    lastTime = Math.max(lastTime, dmfile.lastModified);\\n    if (dmlist.includes(dmfile.name)) continue;\\n    d.push({\\n        title: dmfile.name,\\n        url: $(\\\"#noLoading#\\\").lazyRule((name) => {\\n            let dmlist = storage0.getMyVar(\\\"dmlist\\\", []);\\n            if (!dmlist.includes(name)) {\\n                dmlist.push(name);\\n            }\\n            storage0.putMyVar(\\\"dmlist\\\", dmlist);\\n            refreshPage(false);\\n            return \\\"hiker://empty\\\";\\n        }, dmfile.name),\\n        col_type: \\\"text_1\\\"\\n    });\\n}\\nlet lastRecord = Number(getMyVar(\\\"dllastTime\\\", \\\"-1\\\"));\\n\\nif (MY_PARAMS.automaticadd===\\\"1\\\"&&lastRecord!=-1&&lastRecord < lastTime) {\\n    confirm({\\n        title: \\\"新弹幕文件\\\",\\n        content: \\\"检查到新下载的弹幕是否全部挂载？\\\",\\n        confirm: $.toString((lastRecord, dmListPath) => {\\n            let file = $.require(\\\"https://hikerfans.com/weisyr/js/file.js?v=1\\\");\\n            let fileList = file.getFilePath(dmListPath, \\\"file\\\", \\\".xml\\\");\\n            let dmlist = storage0.getMyVar(\\\"dmlist\\\", []);\\n            fileList.forEach(v => {\\n                if (!dmlist.includes(v.name)&&v.lastModified > lastRecord) {\\n                    dmlist.push(v.name);\\n                }\\n            });\\n            storage0.putMyVar(\\\"dmlist\\\", dmlist);\\n            refreshPage(false);\\n            return \\\"toast://挂载成功。\\\";\\n        }, lastRecord, dmListPath),\\n    });\\n}\\nif(lastTime>=0){\\n    putMyVar(\\\"dllastTime\\\", \\\"\\\" + lastTime);\\n}\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"主页处理\",\"path\":\"Main\",\"rule\":\"if (getItem(\\\"first\\\") == MY_RULE.version) {\\n    $.require(\\\"sou\\\");\\n} else if (MY_PAGE === 1) {\\n    let d = []\\n    let time = getItem(\\\"first\\\", \\\"\\\") ? 6 : 20;\\n    let id = Date.now();\\n    let subPass = \\\"海阔视界规则分享，当前分享的是：合集规则订阅￥home_sub￥云盘君.简@@http://hiker.nokia.press/hikerule/rulelist.json?id=6591&debug=true\\\";\\n    let content = `\\n    1. 本小程序所有代码全部开源，且本规则为学习目的，请于导入24小时内删除！！！\\n    2. 本小程序<b>完全免费</b>，如果你是付费购买的恭喜你被骗了。\\n    当然如果有能力想鼓励作者的可以${\\\"支持一下\\\".link(\\\"hiker://page/Donate.v#noHistory##noRecordHistory#\\\")}</a>(<small>点击可进入捐赠，可在主页菜单进入</small>)。\\n    3. 本小程序是在原版「云盘君」的基础进行的二次修改，请支持原版。\\n    4. 请「云盘君.简」的二次修改尊重一下原版，谢谢。\\n    \\n    <b>开始使用本规则即代表遵守规则条例</b>\\n    当前版本：${MY_RULE.version}\\n    如果你想保持最新版请${\\\"订阅此规则\\\".link(\\\"rule://\\\" + base64Encode(subPass))}\\n    `;\\n    let updateInfo = \\\"修复阿里云盘tv接口\\\";\\n    \\n    d.push({\\n        title: \\\"““””<strong>使用前须知</strong>\\\".big(),\\n        col_type: \\\"text_center_1\\\",\\n        url: \\\"hiker://empty\\\",\\n        extra: {\\n            lineVisible: false\\n        }\\n    });\\n    d.push({\\n        title: content.trim().replace(/\\\\n\\\\s*?/g, \\\"<br>\\\"),\\n        \\\"col_type\\\": \\\"rich_text\\\"\\n    }, {\\n        col_type: \\\"line\\\"\\n    }, {\\n        title: time + \\\"秒后继续\\\",\\n        url: \\\"toast://请认真阅读以上内容\\\",\\n        col_type: \\\"text_center_1\\\",\\n        extra: {\\n            id: id + \\\"timer\\\"\\n        }\\n    });\\n    if (updateInfo) {\\n        confirm({\\n            title: \\\"更新内容\\\",\\n            content: updateInfo,\\n            confirm(){},\\n            cancel(){}\\n        });\\n    }\\n    setResult(d);\\n    while (time != 0) {\\n        java.lang.Thread.sleep(1000);\\n        time -= 1;\\n        updateItem(id + \\\"timer\\\", {\\n            title: time + \\\"秒后继续\\\"\\n        });\\n    }\\n    updateItem(id + \\\"timer\\\", {\\n        title: \\\"““我同意以上要求””\\\",\\n        url: $(\\\"#noLoading#\\\").lazyRule((v) => {\\n            setItem(\\\"first\\\", String(v));\\n            refreshPage();\\n            return \\\"toast://感谢您的理解\\\";\\n        }, MY_RULE.version),\\n        col_type: \\\"text_center_1\\\"\\n    });\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"捐赠\",\"path\":\"Donate.v\",\"rule\":\"js:\\nlet d = [];\\nsetPageTitle(\\\"捐赠/支持\\\");\\nd.push({\\n    title: \\\"捐赠/支持\\\",\\n    desc: \\\"这个捐赠不能为你带来特权，但您的支持是我更新创作的动力。\\\",\\n    col_type: \\\"text_center_1\\\",\\n    url: \\\"toast://感谢您的支持\\\"\\n});\\nd.push({\\n    col_type: \\\"pic_1_full\\\",\\n    url: \\\"https://gitee.com/LoyDgIk/LoyDgIk_Rule/raw/master/67d8f0187f0186c1.png\\\",\\n    pic_url: \\\"https://gitee.com/LoyDgIk/LoyDgIk_Rule/raw/master/67d8f0187f0186c1.png\\\"\\n});\\nd.push({\\n    col_type: \\\"text_center_1\\\",\\n    title: \\\"““””\\\" + \\\"图片加载缓慢请稍等\\\".small().fontcolor(\\\"Gray\\\"),\\n    url: \\\"hiker://empty\\\",\\n    extra: {\\n        lineVisible: false\\n    }\\n});\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"TVBOX推送\",\"path\":\"tvboxPush\",\"rule\":\"js:\\n(function() {\\n    let d = [];\\n    const {\\n        pageId,\\n        shareId,\\n        folderName,\\n        fileId\\n    } = MY_PARAMS;\\n    setPageTitle(\\\"TVBOX推送:\\\" + folderName);\\n    const {\\n        aliTokensFilepath\\n    } = $.require(\\\"tokenPath\\\");\\n    let refreshToken = \\\"\\\";\\n    if (!fileExist(aliTokensFilepath)) {\\n        toast(\\\"请先登陆登录账号\\\");\\n        back(false);\\n        return;\\n    } else {\\n        refreshToken = $.require(aliTokensFilepath).refresh_token;\\n    }\\n\\n    function getPush(name, url) {\\n        let push = {\\n            \\\"share_id\\\": shareId,\\n            \\\"refresh_token\\\": refreshToken,\\n            \\\"name\\\": name,\\n            \\\"url\\\": url\\n        };\\n        return \\\"hiker://page/push#noHistory##noRecordHistory#?rule=XYQ推送&pushurl=\\\" + encodeURIComponent(JSON.stringify(push));\\n    }\\n    d.push({\\n        title: \\\"推送阿里分享链接\\\",\\n        url: \\\"hiker://page/push#noHistory##noRecordHistory#?rule=XYQ推送&pushurl=\\\" + encodeURIComponent(\\\"https://www.aliyundrive.com/s/\\\" + shareId + (fileId ? \\\"/folder/\\\" + fileId : \\\"\\\")),\\n        col_type: \\\"text_2\\\",\\n        extra: {\\n            inheritTitle: false\\n        }\\n    });\\n    let all = {\\n        title: \\\"推送全部已加载视频\\\",\\n        col_type: \\\"text_2\\\",\\n        url: \\\"hiker://empty\\\",\\n        extra: {\\n            inheritTitle: false\\n        }\\n    }\\n    d.push(all);\\n    let allUrls = [];\\n    let list = findItemsByCls(\\\"v\\\" + pageId);\\n    if (!Array.isArray(list) || list.length === 0) {\\n        /*toast(\\\"还没有加载完成的视频\\\");\\n        back(false);\\n        return;*/\\n        d.push({\\n            title: \\\"““””\\\" + \\\"~~~还木有视频哦~~~\\\".fontcolor(\\\"grey\\\"),\\n            col_type: \\\"text_center_1\\\",\\n            url: \\\"hiker://empty\\\",\\n            extra: {\\n                lineVisible: false\\n            }\\n        });\\n        all.url = \\\"toast://没有视频无法推送\\\";\\n    } else {\\n        list.forEach(v => {\\n            v.col_type = v.type;\\n            let name = v.extra.pageTitle;\\n            let url = name.replace(/\\\\#/g, '_').replace(/\\\\$/g, '_') + \\\"$video|\\\" + v.extra.id;\\n            allUrls.push(url);\\n            v.url = getPush(name, url);\\n            v.extra.cls = v.extra.id = undefined;\\n            d.push(v);\\n        });\\n        all.url = getPush(folderName, allUrls.join(\\\"#\\\"));\\n    }\\n    setResult(d);\\n})();\"},{\"col_type\":\"movie_3\",\"name\":\"封面搜索\",\"path\":\"frontCover\",\"rule\":\"js:\\nlet d = [];\\nlet key = getMyVar(\\\"frontcoverkey\\\", \\\"\\\");\\nd.push({\\n    title: \\\"搜索\\\",\\n    col_type: \\\"input\\\",\\n    url: $.toString(() => {\\n        putMyVar(\\\"frontcoverkey\\\", input.trim());\\n        refreshPage(false);\\n    }),\\n    extra: {\\n        defaultValue: key || getMyVar(\\\"s\\\", \\\"\\\")\\n    }\\n});\\nif (key) {\\n    let r = request('https://m.douban.com/search/?query=' + encodeURIComponent(key))\\n    let list = pdfa(r, \\\".search-results&&img\\\");\\n    for (let it of list) {\\n        let pic = pdfh(it, \\\"img&&src\\\");\\n        d.push({\\n            pic_url: pic,\\n            url: $(\\\"#noLoading#\\\").lazyRule((pic) => {\\n                putMyVar(\\\"frontcoverpic\\\", pic);\\n                back(false);\\n                return \\\"toast://设置成功\\\";\\n            }, pic),\\n            col_type: \\\"pic_2_card\\\"\\n        });\\n    }\\n\\n}\\naddListener(\\\"onClose\\\", () => {\\n    let pic = getMyVar(\\\"frontcoverpic\\\");\\n    clearMyVar(\\\"frontcoverpic\\\");\\n    clearMyVar(\\\"frontcoverkey\\\");\\n    setPagePicUrl(pic);\\n});\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"规则文件\",\"path\":\"configs\",\"rule\":\"const path = \\\"hiker://files/rules/LoyDgIk/aliSimpleRules.json\\\";\\nlet data;\\n\\nfunction getJson() {\\n    if (Array.isArray(data)) {\\n        return data;\\n    }\\n    try {\\n        data = JSON.parse(readFile(path) || \\\"[]\\\");\\n    } catch (e) {\\n        deleteFile(path);\\n        data = [];\\n    }\\n    return data;\\n}\\n\\nfunction saveJson(json) {\\n    saveFile(path, JSON.stringify(json));\\n}\\n\\nfunction getUsefulJson() {\\n    return getJson().filter(v => !v.forbidden);\\n}\\n\\nfunction getForbiddenJson() {\\n    return getJson().filter(v => v.forbidden);\\n}\\n\\nfunction getGroupJson(group) {\\n    return getJson().filter(v => v.group === group);\\n}\\n\\nfunction getGroupNames() {\\n    return Array.from(new Set(getJson().map(v => v.group))).filter(v => v);\\n}\\n\\nif (!fileExist(path) && MY_RULE) {\\n    let rules = $.require(\\\"rules\\\");\\n    $.hiker.window = {};\\n    eval.call(null, fetch('hiker://assets/beautify.js'));\\n    rules = rules.map((v) => {\\n        v.find = window.js_beautify(v.find.toString().replace(/function.*?\\\\(s.*?page\\\\).*?\\\\{/, \\\"\\\").replace(/(\\\\}[\\\\s\\\\S].*?)$/, \\\"\\\"));\\n        if (v.findAliUrl) {\\n            v.findAliUrl = window.js_beautify(v.findAliUrl.toString().replace(/function.*?\\\\(input\\\\).*?\\\\{/, \\\"\\\").replace(/(\\\\}[\\\\s\\\\S].*?)$/, \\\"\\\"));\\n        }\\n        return v;\\n    });\\n    saveJson(rules);\\n    toast(\\\"已初始化\\\");\\n}\\n$.exports = {\\n    getJson,\\n    saveJson,\\n    getUsefulJson,\\n    getForbiddenJson,\\n    path,\\n    getGroupNames,\\n    getGroupJson\\n};\"},{\"col_type\":\"movie_3\",\"name\":\"规则管理\",\"path\":\"ruleManage\",\"rule\":\"js:\\nvar d = [];\\nsetPageTitle(\\\"规则管理\\\");\\nlet configs = $.require(\\\"configs\\\");\\nlet arr = configs.getJson();\\nlet length = arr.length;\\nlet groups = configs.getGroupNames();\\nlet group = getItem(\\\"ruleManage_group\\\", \\\"\\\");\\nif (!groups.includes(group)) {\\n    clearItem(\\\"ruleManage_group\\\");\\n    group = \\\"\\\";\\n}\\nd.push({\\n    title: \\\"新增\\\",\\n    url: \\\"hiker://page/ruleEdit#noRecordHistory##noHistory##noRefresh#\\\",\\n    col_type: \\\"icon_small_4\\\",\\n    pic_url: \\\"hiker://images/icon_domain_config\\\",\\n    extra: {\\n        pageTitle: \\\"新增规则\\\"\\n    }\\n});\\n\\nd.push({\\n    title: \\\"分享\\\",\\n    url: $(\\\"-1\\\", \\\"输入你要分享规则的序号\\\\n-1全部，-2已启用的，-3已禁用的，-4,组名分享组，多个用'，'隔开\\\").input((length) => {\\n        let indexc = input.split(/,|，/);\\n        let indexs = [];\\n        let mo = parseInt(indexc[0]);\\n        if (!(indexc.length !== 0 && mo < 0 && mo > -5)) {\\n            for (let it of indexc) {\\n                let num = parseInt(it);\\n                if (Number.isNaN(num) || num >= length || num < 0) {\\n                    return \\\"toast://数字不合法\\\";\\n                }\\n                indexs.push(num);\\n            }\\n        }\\n        return $([\\\"HIKER\\\", \\\"TXT\\\"].concat(getPastes()), 2, \\\"分享方式\\\").select((mo, indexs, ext) => {\\n            function up(rules) {\\n                let ruleb64 = base64Encode(JSON.stringify(rules));\\n                let getPass = (length, rule, type) => \\\"海阔视界云简搜索引擎，共「\\\" + length + \\\"」条，复制整条口令打开软件就会自动导入$\\\" + rule + \\\"$\\\" + type + \\\"@import=js:$.require('import?rule='+\\\" + JSON.stringify(MY_RULE.title) + \\\")(input)\\\";\\n                if (getPastes().includes(input)) {\\n                    let u = sharePaste(ruleb64, input);\\n                    return \\\"copy://\\\" + getPass(rules.length, u, \\\"b\\\");\\n                } else {\\n                    let path = \\\"hiker://files/rules/LoyDgIk/share/云简搜索引擎规则「\\\" + rules.length + \\\"」条.\\\" + (input === \\\"HIKER\\\" ? \\\"hiker\\\" : \\\"txt\\\");\\n                    writeFile(path, getPass(rules.length, ruleb64, \\\"a\\\"));\\n                    return \\\"share://\\\" + path;\\n                }\\n            }\\n            let rules;\\n            if (mo === -1) {\\n                rules = $.require(\\\"configs\\\").getJson();\\n            } else if (mo === -2) {\\n                rules = $.require(\\\"configs\\\").getUsefulJson();\\n            } else if (mo === -3) {\\n                rules = $.require(\\\"configs\\\").getForbiddenJson();\\n            } else if (mo === -4) {\\n                let group = ext;\\n                rules = $.require(\\\"configs\\\").getGroupJson(ext);\\n                if (!rules.length) return \\\"toast://不存在该组\\\";\\n            } else {\\n                rules = $.require(\\\"configs\\\").getJson().filter((v, i) => indexs.includes(i));\\n            }\\n            rules = rules.map((v) => {\\n                v.user = undefined;\\n                v.forbidden = undefined;\\n                return v;\\n            });\\n            return up(rules);\\n        }, mo, indexs, indexc[1]);\\n\\n    }, length),\\n    col_type: \\\"icon_small_4\\\",\\n    pic_url: \\\"hiker://images/icon_share_green\\\"\\n});\\nd.push({\\n    title: \\\"重置\\\",\\n    url: $(\\\"你确定重置？\\\\n该操作会删除现有规则，恢复自带规则。\\\").confirm((path) => {\\n        deleteFile(path);\\n        refreshPage(false);\\n        return \\\"hiker://empty\\\";\\n    }, $.require(\\\"configs\\\").path),\\n    col_type: \\\"icon_small_4\\\",\\n    pic_url: \\\"hiker://images/icon_refresh\\\"\\n});\\nd.push({\\n    title: \\\"清空\\\",\\n    url: $(\\\"你确定全部删除？\\\\n该操作会删除现有规则。\\\").confirm((path) => {\\n        writeFile(path, \\\"[]\\\");\\n        refreshPage(false);\\n        return \\\"hiker://empty\\\";\\n    }, $.require(\\\"configs\\\").path),\\n    col_type: \\\"icon_small_4\\\",\\n    pic_url: \\\"hiker://images/icon_code_view\\\"\\n});\\n\\nd.push({\\n    //title: '<font color=\\\"#13B61B\\\">▐ </font><b>规则列表<b> (' + String(length).fontcolor(\\\"#ff6601\\\") + \\\")\\\",\\n    col_type: \\\"rich_text\\\",\\n});\\nlet countTitle = d.at(-1);\\nd.push({\\n    title: group ? \\\"全部\\\" : \\\"““全部””\\\",\\n    url: $(\\\"#noLoading#\\\").lazyRule((group, length) => {\\n        if (group) {\\n            clearItem(\\\"ruleManage_group\\\");\\n            refreshPage(false);\\n            return \\\"hiker://empty\\\";\\n        } else {\\n            return $(\\\"\\\", \\\"批量删除\\\\n格式:开始位置，结束位置(区间[0,\\\" + (length - 1) + \\\"])\\\").input((length) => {\\n                let [start, end] = input.split(/,|，/);\\n                start = parseInt(start), end = parseInt(end);\\n                if (Number.isNaN(start) || Number.isNaN(end) || start < 0 || end > length - 1 || start > end) {\\n                    return \\\"toast://数字不合法\\\";\\n                }\\n                let number = end - start + 1;\\n                return $(\\\"确认删除：[\\\" + start + \\\",\\\" + end + \\\"]\\\\n共\\\" + number + \\\"条搜索引擎\\\").confirm((start, number) => {\\n                    let rules = $.require(\\\"configs\\\").getJson();\\n                    rules.splice(start, number);\\n                    $.require(\\\"configs\\\").saveJson(rules);\\n                    refreshPage(false);\\n                }, start, number);\\n            }, length);\\n        }\\n    }, group, length),\\n    col_type: \\\"scroll_button\\\"\\n});\\nfor (let it of groups) {\\n    d.push({\\n        title: it === group ? \\\"““\\\" + it + \\\"””\\\" : it,\\n        url: $(\\\"#noLoading#\\\").lazyRule((it, group) => {\\n            if (group !== it) {\\n                setItem(\\\"ruleManage_group\\\", it);\\n                refreshPage();\\n                return \\\"hiker://empty\\\";\\n            } else {\\n                return $([\\\"置顶\\\", \\\"置底\\\", \\\"改名\\\", \\\"删除\\\"]).select((it) => {\\n                    if (\\\"改名\\\" === input) {\\n                        return $(it, \\\"请输入新名称\\\").input((it) => {\\n                            let rules = $.require(\\\"configs\\\").getJson();\\n                            rules.forEach(v => {\\n                                if (it === v.group) {\\n                                    v.group = input;\\n                                }\\n                            });\\n                            $.require(\\\"configs\\\").saveJson(rules);\\n                            clearItem(\\\"ruleManage_group\\\");\\n                            refreshPage(false);\\n                        }, it);\\n                    } else if (\\\"删除\\\" === input) {\\n                        return $(\\\"是否删除该组搜索引擎：\\\" + it).confirm((it) => {\\n                            let rules = $.require(\\\"configs\\\").getJson();\\n                            rules = rules.filter(v => v.group !== it);\\n                            $.require(\\\"configs\\\").saveJson(rules);\\n                            clearItem(\\\"ruleManage_group\\\");\\n                            refreshPage(false);\\n                        }, it);\\n                    }\\n                    let rules = $.require(\\\"configs\\\").getJson();\\n                    let tgRules = [],\\n                        txRules = [];\\n                    rules.forEach((v) => {\\n                        if (it === v.group) {\\n                            tgRules.push(v);\\n                        } else {\\n                            txRules.push(v);\\n                        }\\n                    });\\n                    if (input === \\\"置顶\\\") {\\n                        tgRules = tgRules.concat(txRules);\\n                    } else {\\n                        tgRules = txRules.concat(tgRules);\\n                    }\\n                    $.require(\\\"configs\\\").saveJson(tgRules);\\n                    refreshPage(false);\\n                }, it);\\n            }\\n\\n        }, it, group),\\n        col_type: \\\"scroll_button\\\"\\n    });\\n}\\n\\nlet count = d.length;\\n\\nfor (let i = 0; i < length; i++) {\\n    let it = arr[i];\\n    if (group && group !== it.group) continue;\\n    let user = it.user || {};\\n\\n    d.push({\\n        title: '““””[' + i + ']<b>  ' + it.name + (it.group ? \\\"|\\\" + it.group.small() : \\\"\\\") + '<b>' + (it.forbidden ? \\\" #““禁用””\\\".small() : \\\"\\\") + (it.registerUrl && !(user.password || user.account || user.extra) ? \\\" #需要登录\\\".small() : \\\"\\\"),\\n        url: $([\\\"编辑\\\", \\\"账号\\\", \\\"分享\\\", \\\"禁用/启用\\\", \\\"移动\\\", \\\"置顶\\\", \\\"删除\\\"], 1, \\\"操作：\\\" + it.name).select((index, length, group) => {\\n            if (input === \\\"编辑\\\") {\\n                return \\\"hiker://page/ruleEdit#noRecordHistory##noHistory##noRefresh#\\\";\\n            } else if (input === \\\"账号\\\") {\\n                return \\\"hiker://page/password#noRecordHistory##noHistory##noRefresh#\\\";\\n            } else if (input === \\\"分享\\\") {\\n                let ops = getPastes();\\n                ops.unshift(\\\"完整口令\\\");\\n                return $(ops, 2, \\\"分享方式\\\").select((index) => {\\n                    let rule = $.require(\\\"configs\\\").getJson()[index];\\n                    rule.user = undefined;\\n                    rule.forbidden = undefined;\\n                    let ruleb64 = base64Encode(JSON.stringify(rule));\\n                    let getPass = (name, rule, type) => \\\"海阔视界，「\\\" + name + \\\"」云简搜索引擎，复制整条口令打开软件就会自动导入$\\\" + rule + \\\"$\\\" + type + \\\"@import=js:$.require('import?rule='+\\\" + JSON.stringify(MY_RULE.title) + \\\")(input)\\\";\\n                    if (input == \\\"完整口令\\\") {\\n                        return \\\"copy://\\\" + getPass(rule.name, ruleb64, \\\"a\\\");\\n                    } else {\\n                        let u = sharePaste(ruleb64, input);\\n                        return \\\"copy://\\\" + getPass(rule.name, u, \\\"b\\\");\\n                    }\\n                }, index);\\n            } else if (input === \\\"移动\\\") {\\n                return $(index + \\\"\\\", \\\"输入位置\\\").input((index, length) => {\\n                    let newIndex = Number(input);\\n                    if (Number.isNaN(newIndex) || newIndex >= length) {\\n                        return \\\"toast://不和规的位置\\\";\\n                    }\\n                    let rules = $.require(\\\"configs\\\").getJson();\\n                    let rule = rules.splice(index, 1)[0];\\n                    rules.splice(newIndex, 0, rule);\\n                    $.require(\\\"configs\\\").saveJson(rules);\\n                    refreshPage(false);\\n                }, index, length);\\n            } else if (input === \\\"置顶\\\") {\\n                let newIndex = 0;\\n                let rules = $.require(\\\"configs\\\").getJson();\\n                if (group) {\\n                    newIndex = rules.findIndex(v => v.group === group);\\n                    newIndex = newIndex === -1 ? 0 : newIndex;\\n                }\\n                let rule = rules.splice(index, 1)[0];\\n                rules.splice(newIndex, 0, rule);\\n                $.require(\\\"configs\\\").saveJson(rules);\\n                refreshPage(false);\\n            } else if (input === \\\"删除\\\") {\\n                return $(\\\"确认删除？\\\").confirm((index) => {\\n                    let rules = $.require(\\\"configs\\\").getJson();\\n                    let rule = rules.splice(index, 1)[0];\\n                    $.require(\\\"configs\\\").saveJson(rules);\\n                    refreshPage(false);\\n                    return \\\"toast://已删除\\\" + rule.name;\\n                }, index);\\n            } else {\\n                let arr = $.require(\\\"configs\\\").getJson();\\n                let rule = arr[index];\\n                rule.forbidden = !rule.forbidden;\\n                $.require(\\\"configs\\\").saveJson(arr);\\n                refreshPage(false);\\n                //return \\\"toast://\\\" + (rule.forbidden ? \\\"禁用\\\" : \\\"启用\\\") + rule.name;\\n            }\\n        }, i, length, group),\\n        col_type: \\\"text_1\\\",\\n        extra: {\\n            i: i,\\n            pageTitle: it.name\\n        }\\n    });\\n}\\ncountTitle.title = '<font color=\\\"#13B61B\\\">▐ </font><b>规则列表<b> (' + ((d.length - count) + \\\"/\\\" + length).fontcolor(\\\"#ff6601\\\") + \\\")\\\";\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"规则编辑\",\"path\":\"ruleEdit\",\"rule\":\"js:\\nvar d = [];\\n\\naddListener(\\\"onClose\\\", $.toString(() => {\\n    clearMyVar(\\\"ps_name\\\");\\n    clearMyVar(\\\"ps_find\\\");\\n    clearMyVar(\\\"ps_findAliUrl\\\");\\n    clearMyVar(\\\"ps_page\\\");\\n    clearMyVar(\\\"ps_registerUrl\\\");\\n    clearMyVar(\\\"ps_basicUrl\\\");\\n    clearMyVar(\\\"ps_group\\\");\\n    clearMyVar(\\\"ps_author\\\");\\n    clearMyVar(\\\"ps_ruleType\\\");\\n}));\\nlet urlIndex = parseInt(getParam(\\\"index\\\", \\\"\\\"));\\nurlIndex = Number.isNaN(urlIndex) ? void(0) : urlIndex;\\nlet index = void(0) === urlIndex ? MY_PARAMS.i : urlIndex;\\nlet isImport = !!getParam(\\\"isImport\\\", \\\"\\\");\\nlet arr = $.require(\\\"configs\\\").getJson();\\nlet obj;\\nif (isImport) {\\n    try {\\n        obj = $.require(\\\"hiker://files/_cache/yunSimpleImport.json\\\");\\n        let tip = index !== void(0) ? \\\"更新规则\\\" : \\\"导入规则\\\";\\n        setPageTitle(tip + \\\":\\\" + obj.name);\\n        d.push({\\n            title: \\\"‘‘\\\" + tip + \\\"’’\\\",\\n            col_type: \\\"text_center_1\\\",\\n            url: \\\"hiker://empty\\\",\\n            extra: {\\n                lineVisible: false\\n            }\\n        });\\n\\n    } catch (e) {\\n        obj = {};\\n        back();\\n        toast(\\\"导入错误\\\");\\n    }\\n} else if (index !== void(0)) {\\n    obj = arr[index];\\n    setPageTitle(\\\"编辑规则:\\\" + obj.name);\\n    if (obj.lastModify) {\\n        d.push({\\n            title: \\\"上次修改：\\\" + $.dateFormat(obj.lastModify, \\\"yyyy-MM-dd HH:mm:ss\\\"),\\n            col_type: \\\"text_center_1\\\",\\n            url: \\\"hiker://empty\\\",\\n            extra: {\\n                lineVisible: false\\n            }\\n        });\\n    }\\n} else {\\n    obj = {\\n        page: true,\\n        author: com.example.hikerview.utils.PreferenceMgr.getString(getCurrentActivity(), \\\"myName\\\", \\\"\\\")\\n    };\\n    setPageTitle(\\\"新建规则\\\");\\n}\\n\\nd.push({\\n    col_type: \\\"input\\\",\\n    desc: \\\"名字(必填)\\\",\\n    extra: {\\n        onChange: $.toString(() => {\\n            putMyVar(\\\"ps_name\\\", input);\\n        }),\\n        defaultValue: obj.name,\\n        titleVisible: false\\n    }\\n});\\nd.push({\\n    title: \\\"签名\\\",\\n    col_type: \\\"input\\\",\\n    desc: \\\"作者(选填)\\\",\\n    url: $.toString(() => {\\n        let author = getMyVar(\\\"ps_author\\\", \\\"\\\");\\n        let my = String(com.example.hikerview.utils.PreferenceMgr.getString(getCurrentActivity(), \\\"myName\\\", \\\"\\\"));\\n        let newAuthor = \\\"\\\";\\n        if (author && !author.includes(my)) {\\n            newAuthor = author + \\\"&\\\" + my;\\n        } else {\\n            newAuthor = my;\\n        }\\n        updateItem(\\\"id@ps_author\\\", {\\n            extra: Object.assign(findItem(\\\"id@ps_author\\\").extra, {\\n                defaultValue: newAuthor\\n            })\\n        });\\n    }),\\n    extra: {\\n        onChange: $.toString(() => {\\n            putMyVar(\\\"ps_author\\\", input);\\n        }),\\n        defaultValue: obj.author,\\n        id: \\\"id@ps_author\\\"\\n        //titleVisible: false\\n    }\\n});\\nd.push({\\n    title: \\\"选择\\\",\\n    col_type: \\\"input\\\",\\n    desc: \\\"分组(选填)\\\",\\n    url: $.toString(() => {\\n        let group = $.require(\\\"configs\\\").getGroupNames();\\n        if (!group.length) {\\n            return \\\"\\\";\\n        }\\n        return $(group).select(() => {\\n            let extra = findItem(\\\"ruleEditGroup\\\").extra;\\n            updateItem(\\\"ruleEditGroup\\\", {\\n                extra: Object.assign(extra, {\\n                    defaultValue: input\\n                })\\n            });\\n        });\\n    }),\\n    extra: {\\n        onChange: $.toString(() => {\\n            putMyVar(\\\"ps_group\\\", input);\\n        }),\\n        id: \\\"ruleEditGroup\\\",\\n        defaultValue: obj.group,\\n    }\\n});\\nd.push({\\n    col_type: \\\"input\\\",\\n    desc: \\\"搜索规则(必填)\\\\n内置变量：s搜索关键词，page页数，basicUrl基本链接，user用户账号信息(user.account,user.password)\\\",\\n    extra: {\\n        type: \\\"textarea\\\",\\n        height: 3,\\n        highlight: true,\\n        onChange: $.toString(() => {\\n            putMyVar(\\\"ps_find\\\", input);\\n        }),\\n        defaultValue: obj.find,\\n        titleVisible: false,\\n    }\\n});\\nd.push({\\n    col_type: \\\"input\\\",\\n    desc: \\\"URL规则(选填)\\\\n内置变量：input链接，basicUrl基本链接\\\",\\n    extra: {\\n        type: \\\"textarea\\\",\\n        height: 3,\\n        highlight: true,\\n        onChange: $.toString(() => {\\n            putMyVar(\\\"ps_findAliUrl\\\", input);\\n        }),\\n        defaultValue: obj.findAliUrl,\\n        titleVisible: false,\\n    }\\n});\\nd.push({\\n    col_type: \\\"input\\\",\\n    desc: \\\"基本链接(选填) 代码中用basicUrl引用\\\",\\n    extra: {\\n        onChange: $.toString(() => {\\n            putMyVar(\\\"ps_basicUrl\\\", input);\\n        }),\\n        defaultValue: obj.basicUrl,\\n        titleVisible: false,\\n    }\\n});\\nd.push({\\n    col_type: \\\"input\\\",\\n    desc: \\\"注册地址(选填)\\\",\\n    extra: {\\n        onChange: $.toString(() => {\\n            putMyVar(\\\"ps_registerUrl\\\", input);\\n        }),\\n        defaultValue: obj.registerUrl,\\n        titleVisible: false,\\n    }\\n});\\nd.push({\\n    title: \\\"是否可以翻页：\\\" + obj.page,\\n    col_type: \\\"text_2\\\",\\n    url: $(\\\"#noLoading#\\\").lazyRule((page) => {\\n        let isPage = !!getMyVar(\\\"ps_page\\\", page ? \\\"1\\\" : \\\"\\\");\\n        putMyVar(\\\"ps_page\\\", isPage ? \\\"\\\" : \\\"1\\\");\\n        updateItem(\\\"ruleedps_page\\\", {\\n            title: \\\"是否可以翻页：\\\" + !isPage\\n        });\\n        return \\\"hiker://empty\\\";\\n    }, obj.page),\\n    extra: {\\n        id: \\\"ruleedps_page\\\"\\n    }\\n});\\nputMyVar(\\\"ps_ruleType\\\", (obj.ruleType||\\\"\\\"));\\nd.push({\\n    title: \\\"解析模式：\\\" + (obj.ruleType || \\\"JS\\\"),\\n    col_type: \\\"text_2\\\",\\n    url: $([\\\"JS\\\", \\\"JSON\\\", \\\"HTML\\\"]).select(() => {\\n\\n        putMyVar(\\\"ps_ruleType\\\", input === \\\"JS\\\" ? \\\"\\\" : input);\\n        updateItem(\\\"ps_ruleType\\\", {\\n            title: \\\"解析模式：\\\" + input\\n        });\\n        return \\\"hiker://empty\\\";\\n    }),\\n    extra: {\\n        id: \\\"ps_ruleType\\\"\\n    }\\n});\\nd.push({\\n    title: \\\"删除\\\",\\n    url: $(\\\"#noLoading#\\\").lazyRule((index, urlIndex) => {\\n        if (index === void(0)) {\\n            return \\\"toast://此项无法删除\\\";\\n        }\\n        if (urlIndex !== void(0)) {\\n            return \\\"toast://正在更新规则，删除请从规则管理进入\\\";\\n        }\\n        confirm({\\n            title: \\\"温馨提示\\\",\\n            content: \\\"确定要删除此规则吗？注意删除后无法恢复\\\",\\n            confirm: $.toString((index) => {\\n                let arr = $.require(\\\"configs\\\").getJson();\\n                arr.splice(index, 1);\\n                $.require(\\\"configs\\\").saveJson(arr);\\n                back(true);\\n                return \\\"toast://删除成功\\\";\\n            }, index)\\n        });\\n        return \\\"hiker://empty\\\"\\n    }, index, urlIndex),\\n    col_type: \\\"text_3\\\",\\n});\\nd.push({\\n    title: \\\"测试\\\",\\n    url: $(\\\"#noLoading#\\\").lazyRule(page => {\\n        let testKeyword = getItem(\\\"testKeyword\\\", \\\"\\\");\\n        return $(testKeyword, \\\"请输入关键词\\\").input((page) => {\\n            setItem(\\\"testKeyword\\\", input);\\n            let name = getMyVar(\\\"ps_name\\\", \\\"\\\");\\n            let find = getMyVar(\\\"ps_find\\\", \\\"\\\");\\n            if (!find) {\\n                return \\\"toast://搜索规则不能为空\\\";\\n            }\\n            let arr = $.require(\\\"configs\\\").getJson();\\n            let testRule = {\\n                name: name,\\n                find: find,\\n                basicUrl: getMyVar(\\\"ps_basicUrl\\\", \\\"\\\"),\\n                findAliUrl: getMyVar(\\\"ps_findAliUrl\\\", \\\"\\\"),\\n                page: !!getMyVar(\\\"ps_page\\\", page ? \\\"1\\\" : \\\"\\\"),\\n                ruleType: getMyVar(\\\"ps_ruleType\\\", \\\"\\\"),\\n            };\\n            return $(\\\"hiker://empty#noRecordHistory##noHistory#?fypage\\\").rule((testRule, key) => {\\n                if (MY_PAGE > 1 && !testRule.page) setResult([]);\\n                setResult($.require(\\\"data\\\").carryRule(testRule, key, MY_PAGE, 0));\\n            }, testRule, input);\\n        }, page);\\n    }, obj.page),\\n    col_type: \\\"text_3\\\",\\n});\\n\\n\\nd.push({\\n    title: \\\"保存\\\",\\n    url: $(\\\"#noLoading#\\\").lazyRule((index, page, isImport) => {\\n        let name = getMyVar(\\\"ps_name\\\", \\\"\\\");\\n        if (!name) {\\n            return \\\"toast://名字得有一个吧\\\";\\n        }\\n        let find = getMyVar(\\\"ps_find\\\", \\\"\\\");\\n        if (!find) {\\n            return \\\"toast://搜索规则不能为空\\\";\\n        }\\n        let arr = $.require(\\\"configs\\\").getJson();\\n        let obj1 = {\\n            name: name,\\n            author: getMyVar(\\\"ps_author\\\", \\\"\\\"),\\n            find: find,\\n            basicUrl: getMyVar(\\\"ps_basicUrl\\\", \\\"\\\"),\\n            findAliUrl: getMyVar(\\\"ps_findAliUrl\\\", \\\"\\\"),\\n            page: !!getMyVar(\\\"ps_page\\\", page ? \\\"1\\\" : \\\"\\\"),\\n            registerUrl: getMyVar(\\\"ps_registerUrl\\\", \\\"\\\") || undefined,\\n            lastModify: Date.now(),\\n            group: getMyVar(\\\"ps_group\\\", \\\"\\\"),\\n            ruleType: getMyVar(\\\"ps_ruleType\\\", \\\"\\\"),\\n        };\\n        if (index === void(0)) {\\n            if (arr.some(v => v.name === name)) {\\n                return \\\"toast://已经存在该规则\\\";\\n            }\\n            if (obj1.group) {\\n                let group = obj1.group;\\n                let index = arr.findIndex(v => v.group === group);\\n                if (index === -1) {\\n                    arr.unshift(obj1);\\n                } else {\\n                    arr.splice(index, 0, obj1);\\n                }\\n            } else {\\n                if (isImport) {\\n                    arr.push(obj1);\\n                } else {\\n                    arr.unshift(obj1);\\n                }\\n            }\\n        } else {\\n            let namey = arr[index].name;\\n            if (name !== namey) {\\n                if (arr.some(v => v.name === name)) {\\n                    return \\\"toast://已经存在该规则\\\";\\n                }\\n            }\\n            obj1 = Object.assign(arr[index], obj1);\\n            arr.splice(index, 1, obj1);\\n        }\\n        $.require(\\\"configs\\\").saveJson(arr);\\n        back(true);\\n        return \\\"toast://保存成功\\\";\\n    }, index, obj.page, isImport),\\n    col_type: \\\"text_3\\\",\\n});\\n\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"规则账号\",\"path\":\"password\",\"rule\":\"js:\\n(function() {\\n    var d = [];\\n    addListener(\\\"onClose\\\", $.toString(() => {\\n        clearMyVar(\\\"ps_account\\\");\\n        clearMyVar(\\\"ps_password\\\");\\n        clearMyVar(\\\"ps_extra\\\");\\n    }));\\n    let index = MY_PARAMS.i;\\n    let arr = $.require(\\\"configs\\\").getJson();\\n    let obj = arr[index] || {};\\n    setPageTitle(\\\"设置账号:\\\" + obj.name);\\n    let registerUrl = obj.registerUrl;\\n    if (registerUrl) {\\n        d.push({\\n            col_type: \\\"text_center_1\\\",\\n            title: \\\"前往注册\\\",\\n            url: $(\\\"hiker://empty#noRecordHistory##noHistory#\\\").rule((registerUrl)=>{\\n                setResult([{\\n                    col_type:\\\"x5_webview_single\\\",\\n                    url:registerUrl,\\n                    desc:\\\"float&&100%\\\"\\n                }]);\\n            }, registerUrl),\\n            extra:{\\n                pageTitle: \\\"注册账号:\\\" + obj.name\\n            }\\n        });\\n    }\\n    obj = obj.user || {};\\n    d.push({\\n        col_type: \\\"input\\\",\\n        desc: \\\"用户名\\\",\\n        extra: {\\n            onChange: $.toString(() => {\\n                putMyVar(\\\"ps_account\\\", input);\\n            }),\\n            defaultValue: obj.account,\\n            titleVisible: false\\n        }\\n    });\\n    d.push({\\n        col_type: \\\"input\\\",\\n        desc: \\\"密码\\\",\\n        extra: {\\n            type: \\\"password\\\",\\n            onChange: $.toString(() => {\\n                putMyVar(\\\"ps_password\\\", input);\\n            }),\\n            defaultValue: obj.password,\\n            titleVisible: false,\\n        }\\n    });\\n    d.push({\\n        col_type: \\\"input\\\",\\n        desc: \\\"额外\\\",\\n        extra: {\\n            type: \\\"textarea\\\",\\n            onChange: $.toString(() => {\\n                putMyVar(\\\"ps_extra\\\", input);\\n            }),\\n            defaultValue: obj.extra,\\n            titleVisible: false,\\n            height: -1\\n        }\\n    });\\n    d.push({\\n        title: \\\"保存\\\",\\n        url: $(\\\"#noLoading#\\\").lazyRule((index) => {\\n            let account = getMyVar(\\\"ps_account\\\", \\\"\\\");\\n            let password = getMyVar(\\\"ps_password\\\", \\\"\\\");\\n            let extra = getMyVar(\\\"ps_extra\\\", \\\"\\\");\\n            /*if (!(account||password||extra)) {\\n                return \\\"toast://不能全部为空\\\";\\n            }*/\\n            let arr = $.require(\\\"configs\\\").getJson();\\n            let item = arr[index];\\n            item.user = {};\\n            item.user.account = account\\n            item.user.password = password;\\n            item.user.extra = extra;\\n            if (index === void(0)) {\\n                return \\\"toast://id错误\\\";\\n            } else {\\n                arr.splice(index, 1, item);\\n            }\\n            $.require(\\\"configs\\\").saveJson(arr);\\n            back(true);\\n            return \\\"toast://保存成功\\\";\\n        }, index),\\n        col_type: \\\"text_center_1\\\",\\n    });\\n    setResult(d);\\n})()\"},{\"col_type\":\"movie_3\",\"name\":\"规则导入\",\"path\":\"import\",\"rule\":\"js:\\nfunction saveCache(json) {\\n    writeFile(\\\"hiker://files/_cache/yunSimpleImport.json\\\", JSON.stringify(json));\\n}\\n$.exports = function(pass) {\\n    try {\\n        let [_, rule, type] = pass.split(\\\"$\\\");\\n        if (type === \\\"b\\\") {\\n            rule = parsePaste(rule);\\n        }\\n        let rules = JSON.parse(base64Decode(rule));\\n        if (!Array.isArray(rules)) {\\n            rules = [rules];\\n        }\\n        //rules.reverse();\\n        MY_URL = module.id;\\n        let ruleTitle = getParam(\\\"rule\\\");\\n        let arr = $.require(\\\"configs?rule=\\\" + ruleTitle).getJson();\\n        let newI = 0;\\n        for (let rule of rules) {\\n            let index = arr.findIndex(v => v.name === rule.name);\\n            if (index > -1) {\\n                rule = Object.assign(arr[index], rule);\\n                arr.splice(index, 1, rule);\\n                if (rules.length === 1) {\\n                    saveCache(rule);\\n                    return \\\"hiker://page/ruleEdit#noHistory##noRecordHistory#?isImport=true&index=\\\" + index + \\\"&rule=\\\" + ruleTitle;\\n                    //toast(\\\"已更新规则：\\\" + rule.name);\\n                } else {\\n                    log(\\\"已更新规则：\\\" + rule.name)\\n                }\\n            } else {\\n                newI++;\\n                arr.push(rule);\\n                if (rules.length === 1) {\\n                    saveCache(rule);\\n                    return \\\"hiker://page/ruleEdit#noHistory##noRecordHistory#?isImport=true&rule=\\\" + ruleTitle;\\n                    //toast(\\\"已导入规则：\\\" + rule.name);\\n                } else {\\n                    log(\\\"已导入规则：\\\" + rule.name)\\n                }\\n            }\\n        }\\n        if (rules.length > 1) {\\n            $.require(\\\"configs?rule=\\\" + ruleTitle).saveJson(arr);\\n            toast(\\\"新增：\\\" + newI + \\\" 覆盖更新：\\\" + (rules.length - newI));\\n        }\\n    } catch (e) {\\n        log(e.toString());\\n        toast(\\\"导入失败\\\");\\n    }\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"规则列表\",\"path\":\"rules\",\"rule\":\"js:\\n$.exports = [{\\n        name: \\\"小云\\\",\\n        page: true,\\n        find(s, page) {\\n            let basicUrl = \\\"https://www.yunso.net\\\";\\n            let api = \\\"/api/validate/search?wd=\\\" + encodeURIComponent(s) + \\\"&mode=90001&stype=20100&uk=&page=\\\" + page + \\\"&limit=20&screen_filetype=undefined\\\";\\n            let json = post(basicUrl + api, {\\n                body: \\\"data=\\\" + api,\\n                headers: {\\n                    Referer: \\\"https://www.yunso.net/index/user/s?wd=\\\" + encodeURIComponent(s)\\n                }\\n            });\\n            let html = JSON.parse(json).data;\\n            let list = pdfa(html, \\\"body&&.layui-card:has(a)\\\");\\n            let d = [];\\n            for (let item of list) {\\n                let title = pdfh(item, \\\"a&&Text\\\").replace(\\\"#文件夹 \\\", \\\"\\\");\\n                //let time = /\\\\d{4}(-\\\\d{2}){2} \\\\d{2}(\\\\:\\\\d{2}){2}/.exec(pdfh(item, \\\".layui-card-body&&Text\\\")) || [];\\n                d.push({\\n                    title: title,\\n                    //desc: time[0],\\n                    url: base64Decode(pdfh(item, \\\"a&&url\\\"))\\n                });\\n            }\\n            return d;\\n        }\\n    }, {\\n        name: \\\"混合盘\\\",\\n        page: true,\\n        find(s, page) {\\n            let url = \\\"https://api.hunhepan.com/v1/search\\\";\\n            let json = post(url, {\\n                headers: {\\n                    Referer: \\\"https://hunhepan.com/\\\"\\n                },\\n                body: JSON.stringify({\\n                    \\\"q\\\": s,\\n                    \\\"page\\\": page,\\n                    \\\"size\\\": 15\\n                })\\n            });\\n            json = JSON.parse(json);\\n            let list = json.data.list;\\n            let d = [];\\n            for (let i = 0; i < list.length; i++) {\\n                let it = list[i];\\n                if (it.disk_type !== \\\"ALY\\\" || it.share_user === \\\"丶***丶\\\") continue;\\n                d.push({\\n                    title: it.disk_name,\\n                    pic_url: pd(it, \\\"img&&src\\\", url),\\n                    url: it.link,\\n                    desc: it.update_time + \\\"\\\\n\\\" + it.link,\\n                });\\n            }\\n            return d;\\n        }\\n    }, {\\n        name: \\\"资源帮\\\",\\n        page: true,\\n        find(s, page) {\\n            function search() {\\n                let rtnList = [];\\n                let resp = request(\\\"https://zyb.upyunso.com/v15/search?keyword=\\\" + en_aes(s) + \\\"&s_type=2&page=\\\" + page + \\\"&atk=&did=\\\" + generateRandomHexString(64), {\\n                    headers: {\\n                        \\\"user-agent\\\": \\\"Mozilla/5.0 (Linux; Android 10; Redmi Note 7 Build/QKQ1.190910.002; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/81.0.4044.138 Mobile Safari/537.36 uni-app Html5Plus/1.0 (Immersed/29.09091)\\\",\\n                    },\\n                });\\n                let respData = de_aes(resp);\\n                let jsonData = JSON.parse(respData) || {};\\n                let result = jsonData.result || {};\\n                let items = result.items || [];\\n\\n                for (let i = 0; i < items.length; i++) {\\n                    let item = items[i];\\n                    let content = item.content || [];\\n                    if (content.length == 0 || !item.page_url) continue;\\n                    let url = de_aes(item.page_url) || \\\"\\\";\\n                    if (!url) continue;\\n                    rtnList.push({\\n                        title: (item.title.length > 30 ? item.title.slice(0, 27) + \\\"...\\\" : item.title) || \\\"\\\",\\n                        desc: \\\"分享时间：\\\" + item.insert_time,\\n                        url: url\\n                    });\\n                }\\n\\n                return rtnList;\\n            }\\n\\n            function generateRandomHexString(length) {\\n                let result = \\\"\\\";\\n                const characters = \\\"0123456789abcdef\\\";\\n                const charactersLength = characters.length;\\n                for (let i = 0; i < length; i++) {\\n                    result += characters.charAt(Math.floor(Math.random() * charactersLength));\\n                }\\n                return result;\\n            }\\n            let aliUtil = $.require(\\\"aliUtil\\\");\\n            let CryptoJS = aliUtil.getCryptoJS();\\n\\n            function en_aes(e) {\\n                let i = \\\"qq1920520460qqzz\\\";\\n                // en_aes\\n                let key = CryptoJS.enc.Utf8.parse(i);\\n                var t = CryptoJS.enc.Utf8.parse(e),\\n                    r = CryptoJS.AES.encrypt(t, key, {\\n                        iv: key,\\n                        mode: CryptoJS.mode.CBC,\\n                    });\\n                return r.ciphertext.toString();\\n            }\\n\\n            function de_aes(vv) {\\n                let i = \\\"qq1920520460qqzz\\\";\\n                // de_aes\\n                let key = CryptoJS.enc.Utf8.parse(i);\\n                let hexVal = CryptoJS.enc.Hex.parse(vv),\\n                    val = CryptoJS.enc.Base64.stringify(hexVal),\\n                    decrypted = CryptoJS.AES.decrypt(val, key, {\\n                        iv: key,\\n                        mode: CryptoJS.mode.CBC,\\n                    });\\n                return decrypted.toString(CryptoJS.enc.Utf8);\\n            }\\n            return search();\\n        }\\n    }, {\\n        name: \\\"云盘资源\\\",\\n        page: true,\\n        find: function(s, page) {\\n            let url = \\\"https://res.yunpan.win/?PageIndex=\\\" + page + \\\"&PageSize=12&Keyword=\\\" + s + \\\"&Type=&Tag=\\\";\\n            let html = request(url, {\\n                headers: {\\n                    \\\"Referer\\\": \\\"https://res.yunpan.win/\\\"\\n                }\\n            });\\n\\n            let arr = pdfa(html, \\\"main&&.card\\\");\\n            //log(arr);\\n            let d = [];\\n            for (let i = 0; i < arr.length; i++) {\\n                let it = arr[i];\\n                let u = pdfh(it, \\\".card-link,1&&onclick\\\").match(/https:\\\\/\\\\/(www\\\\.aliyundrive\\\\.com\\\\/s|alywp\\\\.net)\\\\/\\\\w*/g) || [];\\n                u = u.length > 0 ? u[0] : url;\\n                d.push({\\n                    title: pdfh(it, \\\".card-title&&Text\\\"),\\n                    pic_url: pd(it, \\\"img&&src\\\", url),\\n                    url: u,\\n                    desc: pdfh(it, \\\".card-text,-1&&Text\\\") + \\\"\\\\n\\\" + u,\\n                });\\n            }\\n            return d;\\n        }\\n    },\\n    {\\n        name: \\\"UP云搜\\\",\\n        page: true,\\n        find: function(s, page) {\\n            let url = \\\"https://api.upyunso2.com/search?keyword=\\\" + s + \\\"&page=\\\" + page + \\\"&s_type=1\\\";\\n            let html = request(url, {\\n                headers: {\\n                    \\\"Referer\\\": \\\"https://www.upyunso.com\\\",\\n                    \\\"Cookie\\\": \\\"code=1919\\\"\\n                }\\n            });\\n            //log(base64Decode(html));\\n            let arr = JSON.parse(base64Decode(html)).result.items;\\n            //log(arr);\\n            let d = [];\\n            if (!arr) return [];\\n            for (let i = 0; i < arr.length; i++) {\\n                let it = arr[i];\\n                let u = it.page_url;\\n                //u = u.length > 0 ? u[0] : url;\\n                if (!u.includes(\\\"aliyundrive\\\")) {\\n                    continue;\\n                }\\n                d.push({\\n                    title: it.title,\\n                    url: u,\\n                    desc: \\\"\\\\n\\\" + (u),\\n                });\\n\\n            }\\n            return d;\\n        }\\n    },\\n    {\\n        name: \\\"猫狸盘搜\\\",\\n        page: false,\\n        find: function(s, page) {\\n            let html = request(\\\"https://www.alipansou.com/search?k=\\\" + s, {\\n                headers: {\\n                    \\\"Referer\\\": \\\"https://www.alipansou.com/search?k=\\\" + s\\n                }\\n            });\\n            let arr = pdfa(html, \\\"#app&&a\\\");\\n            //log(arr);\\n            let d = [];\\n            for (let i = 0; i < arr.length; i++) {\\n                let it = \\\"<div>\\\" + arr[i] + \\\"</div>\\\";\\n                let u = pdfh(it, \\\"a&&href\\\");\\n                //log(u);\\n                if (!u.includes(\\\"/s/\\\")) {\\n                    continue;\\n                }\\n                u = \\\"https://www.alipansou.com\\\" + u.replace(\\\"/s/\\\", \\\"/cv/\\\");\\n                d.push({\\n                    title: pdfh(it, \\\"template&&Text\\\"),\\n                    url: u,\\n                    desc: pdfh(it, \\\"template,1&&Text\\\"),\\n                });\\n            }\\n            return d;\\n        },\\n        findAliUrl(input) {\\n            let html = request(input, {\\n                headers: {\\n                    \\\"Cookie\\\": \\\"no_show_donate=1\\\",\\n                    \\\"Referer\\\": input.replace(\\\"/cv/\\\", \\\"/s/\\\")\\n                },\\n                redirect: false\\n            });\\n            html = parseDomForHtml(html, 'a&&href');\\n            if (html.length > 0) {\\n                return html;\\n            } else {\\n                return input;\\n            }\\n        }\\n    },\\n    {\\n        name: \\\"易搜\\\",\\n        page: true,\\n        registerUrl: \\\"https://yiso.fun\\\",\\n        find: function(s, page) {\\n            let aliUtil = $.require(\\\"aliUtil\\\");\\n            let CryptoJS = aliUtil.getCryptoJS();\\n\\n            function keyen(str) {\\n                var key = CryptoJS.enc.Utf8.parse(\\\"4OToScUFOaeVTrHE\\\"),\\n                    iv = CryptoJS.enc.Utf8.parse(\\\"9CLGao1vHKqm17Oz\\\");\\n                var encrypted = CryptoJS.AES.decrypt({\\n                    ciphertext: CryptoJS.enc.Base64.parse(str)\\n                }, key, {\\n                    iv: iv,\\n                    mode: CryptoJS.mode.CBC,\\n                    padding: CryptoJS.pad.Pkcs7\\n                }).toString(CryptoJS.enc.Utf8);\\n                return encrypted;\\n            }\\n            let html = request(\\\"https://yiso.fun/api/search?name=\\\" + s + \\\"&pageNo=\\\" + page, {\\n                headers: {\\n                    \\\"Referer\\\": \\\"https://yiso.fun/info?searchKey=\\\" + s,\\n                    \\\"Cookie\\\": getItem('yisoucooke', '')\\n                }\\n            });\\n            //log(html);\\n            if (html.includes('登录用户无限制')) {\\n                var i = 0;\\n                do {\\n                    var tyimglin = 'https://yiso.fun/api/user/login/captcha?t=' + parseInt(new Date().getTime()) + '';\\n                    let img = convertBase64Image(tyimglin).split(',')[1];\\n                    let cod = request('https://api.xhofe.top/ocr/b64/text', {\\n                        headers: {\\n                            'Content-Type': 'text/plain'\\n                        },\\n                        body: img,\\n                        method: 'POST'\\n                    });\\n                    var ver = JSON.parse(request('https://yiso.fun/api/user/login', {\\n                        headers: {\\n                            'content-type': 'application/json',\\n                            'referer': 'https://yiso.fun/login',\\n                            'Cookie': getCookie(tyimglin)\\n                        },\\n                        body: {\\n                            \\\"userName\\\": user.account,\\n                            \\\"password\\\": user.password,\\n                            \\\"code\\\": cod\\n                        },\\n                        method: 'POST'\\n                    }));\\n                    if (ver.code == 200) {\\n                        log('易搜登入验证成功');\\n                        setItem('yisoucooke', getCookie('https://yiso.fun'));\\n                        html = request(\\\"https://yiso.fun/api/search?name=\\\" + s + \\\"&pageNo=\\\" + page, {\\n                            headers: {\\n                                \\\"Referer\\\": \\\"https://yiso.fun/info?searchKey=\\\" + s,\\n                                \\\"Cookie\\\": getItem('yisoucooke', '')\\n                            }\\n                        });\\n                        break;\\n                    }\\n                    i++;\\n                } while (i < 4);\\n\\n            }\\n            let arr = JSON.parse(html).data.list;\\n            //log(arr);\\n            let d = [];\\n            for (let i = 0; i < arr.length; i++) {\\n                let it = arr[i];\\n                let u = keyen(it.url);\\n                //log(u);\\n                if (u == null || !u.includes(\\\"aliyun\\\")) {\\n                    continue;\\n                }\\n                d.push({\\n                    title: it.name,\\n                    url: u,\\n                    desc: (it.gmtShare || it.gmtCreate) + \\\"\\\\n\\\" + (u),\\n                });\\n\\n            }\\n            return d;\\n        }\\n    },\\n    {\\n        name: \\\"小纸条\\\",\\n        page: false,\\n        find: function(s, page) {\\n            let aliUtil = $.require(\\\"aliUtil\\\");\\n\\n            function gettoken() {\\n                if (getMyVar('xzytoken', '').length == 0) {\\n                    let token = JSON.parse(post('https://gitcafe.net/tool/alipaper/', {\\n                        headers: {\\n                            'Referer': 'https://u.gitcafe.ink/'\\n                        },\\n                        body: {\\n                            action: 'get_token'\\n                        }\\n                    })).data;\\n                    putMyVar('xzttoken', token);\\n                }\\n                return getMyVar('xzttoken', '');\\n            }\\n\\n            function cat_code(a) {\\n                var d, e, b = [\\\"华语电视\\\", \\\"日韩电视\\\", \\\"欧美电视\\\", \\\"其他电视\\\", \\\"华语电影\\\", \\\"日韩电影\\\", \\\"欧美电影\\\", \\\"其他电影\\\", \\\"华语动漫\\\", \\\"日韩动漫\\\", \\\"欧美动漫\\\", \\\"纪录片\\\", \\\"综艺片\\\", \\\"教育培训\\\", \\\"其他视频\\\", \\\"华语音乐\\\", \\\"日韩音乐\\\", \\\"欧美音乐\\\", \\\"其他音乐\\\", \\\"娱乐软件\\\", \\\"系统软件\\\", \\\"网络软件\\\", \\\"办公软件\\\", \\\"其他软件\\\", \\\"漫画\\\", \\\"小说\\\", \\\"出版书\\\", \\\"知识培训\\\", \\\"其他文档\\\", \\\"壁纸\\\", \\\"人物\\\", \\\"风景\\\", \\\"其他图片\\\", \\\"其他\\\"],\\n                    c = [\\\"hyds\\\", \\\"rhds\\\", \\\"omds\\\", \\\"qtds\\\", \\\"hydy\\\", \\\"rhdy\\\", \\\"omdy\\\", \\\"qtdy\\\", \\\"hydm\\\", \\\"rhdm\\\", \\\"omdm\\\", \\\"jlp\\\", \\\"zyp\\\", \\\"jypx\\\", \\\"qtsp\\\", \\\"hyyy\\\", \\\"rhyy\\\", \\\"omyy\\\", \\\"qtyy\\\", \\\"kfrj\\\", \\\"xtrj\\\", \\\"wlrj\\\", \\\"bgrj\\\", \\\"qtrj\\\", \\\"mh\\\", \\\"xs\\\", \\\"cbs\\\", \\\"zspx\\\", \\\"qtwd\\\", \\\"bz\\\", \\\"rw\\\", \\\"fj\\\", \\\"qttp\\\", \\\"qt\\\"];\\n                for (d = 0, e = c.length; e > d; d++)\\n                    if (c[d] == a) return b[d];\\n            }\\n            let d = [];\\n            let html = post(\\\"https://gitcafe.net/tool/alipaper/\\\", {\\n                headers: {\\n                    'Referer': 'https://u.gitcafe.ink/'\\n                },\\n                body: {\\n                    action: \\\"search\\\",\\n                    from: \\\"web\\\",\\n                    token: gettoken(),\\n                    keyword: s\\n                }\\n            })\\n            let list = JSON.parse(html);\\n            if (list.data) {\\n                list = list.data;\\n            }\\n            for (let i = 0; i < list.length; i++) {\\n                let it = list[i]\\n                let title = it.title;\\n                let murl = 'https://www.aliyundrive.com/s/' + it.alikey\\n                if (!aliUtil.checkali(murl)) {\\n                    continue;\\n                }\\n                if (title.includes(s)) {\\n                    d.push({\\n                        title: \\\"√ \\\" + title,\\n                        desc: cat_code(it.cat),\\n                        extra: {\\n                            des: it.des\\n                        },\\n                        url: murl\\n                    });\\n                }\\n            }\\n            return d;\\n        }\\n    },\\n    {\\n        name: \\\"玩偶哥哥\\\",\\n        page: true,\\n        basicUrl: \\\"http://wogg.xyz\\\",\\n        find: function(s, page) {\\n            let url = basicUrl + \\\"/index.php/vodsearch/\\\" + s + \\\"----------\\\" + page + \\\"---.html\\\";\\n            let html = request(url);\\n            let arr = parseDomForArray(html, \\\".module-items&&.module-search-item\\\");\\n\\n            let bet = [];\\n            for (let i = 0; i < arr.length; i++) {\\n                let it = arr[i];\\n                let utitle = pdfh(it, \\\"h3&&a&&Text\\\");\\n                let userial = pdfh(it, \\\".video-serial&&Text\\\");\\n                let uimage = pdfh(it, \\\"img&&data-src\\\");\\n                let u = pd(it, \\\"h3&&a&&href\\\", basicUrl);\\n                bet.push({\\n                    title: utitle,\\n                    url: u,\\n                    pic_url: uimage,\\n                    desc: userial\\n                });\\n            }\\n\\n            return bet;\\n        },\\n        findAliUrl(input) {\\n            return pdfa(request(input), \\\"body&&.module-row-text.copy\\\").map(v => pdfh(v, \\\"a&&data-clipboard-text\\\"));\\n        }\\n    },\\n    {\\n        name: \\\"阿里云盘网\\\",\\n        page: true,\\n        basicUrl: \\\"https://www.alypw.cn\\\",\\n        find: function(s, page) {\\n            let url = basicUrl + \\\"/search.php?q=\\\" + s + \\\"&page=\\\" + page;\\n            let html = request(url, {});\\n            let arr = pdfa(html, \\\".list&&li\\\");\\n            let bet = [];\\n            for (let i = 0; i < arr.length; i++) {\\n                let it = arr[i];\\n                let utitle = pdfh(it, \\\"a&&title\\\");\\n                let userial = pdfh(it, \\\".fa-clock-o&&Text\\\");\\n                let uimage = pdfh(it, \\\"img&&src\\\");\\n                let u = pd(it, \\\"a&&href\\\", basicUrl);\\n                if (!utitle.includes(s)) {\\n                    continue;\\n                }\\n                bet.push({\\n                    title: utitle,\\n                    url: u,\\n                    pic_url: uimage,\\n                    desc: userial\\n                });\\n            }\\n\\n            return bet;\\n        },\\n        findAliUrl(input) {\\n            return pdfa(request(input), \\\"body&&a[href^=https://www.aliyundrive.com/s/]\\\").map(v => pdfh(v, \\\"a&&href\\\"));\\n        }\\n    },\\n    {\\n        name: \\\"土拨鼠\\\",\\n        page: false,\\n        find: function(s, page) {\\n            let html = fetch('https://www.tbsdy.com/search.html?keyword=' + s + '&category=983920&data_type=987910', {\\n                headers: {\\n                    'User-Agent': PC_UA\\n                }\\n            });\\n\\n            let arr = parseDomForArray(html, '.search_result_netdisk_list&&a');\\n            let d = [];\\n            for (let i = 0; i < arr.length; i++) {\\n                let it = arr[i];\\n                //log(it);\\n                let u = parseDomForHtml(it, 'a&&href');\\n                let tit = parseDomForHtml(it, '.netdisk_item_detail_name&&Text');\\n                if (!tit.includes(s)) {\\n                    continue;\\n                }\\n                //log(u);\\n                d.push({\\n                    title: tit,\\n                    url: u,\\n                    desc: \\\"\\\\n\\\" + u,\\n                });\\n            }\\n            return d;\\n        }\\n    },\\n    {\\n        name: \\\"阿里搜\\\",\\n        page: true,\\n        find: function(s, page) {\\n            let d = [];\\n            let html = request('https://aliso.cc/s/' + s + '-' + page + '-0.html', {});\\n\\n            let list = parseDomForArray(html, '.search-result&&.resource-item');\\n            for (let j = 0; j < list.length; j++) {\\n                let u = list[j];\\n                let tit = parseDomForHtml(u, 'h3&&Text');\\n                if (!tit.includes(s)) {\\n                    continue;\\n                }\\n                d.push({\\n                    title: tit,\\n                    url: parseDom(u, 'h3&&a&&href', 'https://aliso.cc/'),\\n                    desc: parseDomForHtml(u, '.time&&Text'),\\n                });\\n\\n            }\\n            return d;\\n        },\\n        findAliUrl(input) {\\n            eval(getCryptoJS());\\n\\n            function decry(str) {\\n                var key = CryptoJS.enc.Utf8.parse(\\\"9EB20DDFD6AFBD68\\\");\\n                var encrypted = CryptoJS.AES.decrypt(str, key, {\\n                    iv: key,\\n                    mode: CryptoJS.mode.CBC,\\n                    padding: CryptoJS.pad.Pkcs7\\n                }).toString(CryptoJS.enc.Utf8);\\n                return encrypted;\\n            }\\n\\n            let html = request(input);\\n            let but = parseDom(html, '.button&&href', 'https://aliso.cc/');\\n            //log(but);\\n            let got = request(but);\\n            //log(got);\\n            eval(parseDomForHtml(got, 'head&&script,1&&Html'));\\n            return decry(base64.split('!')[0]);\\n        }\\n    },\\n    {\\n        name: \\\"云盘分享社\\\",\\n        page: false,\\n        find: function(s, page) {\\n            let aliUtil = $.require(\\\"aliUtil\\\");\\n            let CryptoJS = aliUtil.getCryptoJS();\\n\\n            function decry(str) {\\n                var key = CryptoJS.enc.Utf8.parse(\\\"5F6B2AK33DASD123\\\");\\n                var encrypted = CryptoJS.AES.decrypt(str, key, {\\n                    mode: CryptoJS.mode.ECB,\\n                    padding: CryptoJS.pad.Pkcs7\\n                }).toString(CryptoJS.enc.Utf8);\\n                return encrypted;\\n            }\\n            let html = request(\\\"https://www.yunpanfenxiang.cn/api/bbs/api/getdata?key=\\\" + s + \\\"&type=video\\\", {\\n                headers: {\\n                    \\\"Referer\\\": \\\"https://www.yunpanfenxiang.cn/\\\"\\n                }\\n            });\\n            let json = decry(JSON.parse(html).data);\\n            let arr = JSON.parse(json);\\n\\n            let bet = [];\\n            for (let i = 0; i < arr.length; i++) {\\n                let it = arr[i];\\n                let url = it.pid;\\n                bet.push({\\n                    url: \\\"https://www.yunpanfenxiang.cn/api/bbs/api/getarticle?id=\\\" + url,\\n                    title: it.title,\\n                    desc: it.createtime\\n                });\\n            }\\n\\n            return bet;\\n        },\\n        findAliUrl(input) {\\n            let json = JSON.parse(request(input, {\\n                headers: {\\n                    \\\"Referer\\\": \\\"https://www.yunpanfenxiang.cn/\\\"\\n                }\\n            })).data;\\n            let list = json.download.split(\\\"@\\\");\\n            let alist = new Set();\\n            for (let j = 0; j < list.length; j++) {\\n                alist.add(\\\"https://www.aliyundrive.com/s/\\\" + list[j]);\\n            }\\n            return Array.from(alist);\\n        }\\n    },\\n    {\\n        name: \\\"盘搜\\\",\\n        page: true,\\n        find: function(s, page) {\\n            page = (page - 1) * 10;\\n            let url = \\\"https://www.pansearch.me/search?keyword=\\\" + s + \\\"&offset=\\\" + page + \\\"&pan=aliyundrive\\\";\\n            let html = request(url, {});\\n\\n            let arr = parseDomForArray(html, '.grid&&.shadow:has(a[href^=https://www.aliyundrive.com/s/])');\\n            //log(arr);\\n            let d = [];\\n            for (let i = 0; i < arr.length; i++) {\\n                let it = arr[i];\\n                let u = parseDomForHtml(it, 'a[href^=https://www.aliyundrive.com/s/]&&href');\\n                let pic_url = parseDomForHtml(it, 'img&&src');\\n                d.push({\\n                    title: parseDomForHtml(it, '.break-all&&Text').split('http')[0],\\n                    pic_url: pic_url === \\\"/favicon.png\\\" ? \\\"https://www.pansearch.me/\\\" + pic_url : pic_url,\\n                    url: u,\\n                    desc: parseDomForHtml(it, 'p&&Text') + \\\"\\\\n\\\" + u,\\n                });\\n\\n            }\\n            return d;\\n        }\\n    },\\n    {\\n        name: \\\"DOVX搜\\\",\\n        page: false,\\n        find: function(s, page) {\\n            let url = \\\"https://api.dovx.tk/ali/search?wd=\\\" + s;\\n            let html = request(url);\\n            let arr = JSON.parse(html).list;\\n            let d = [];\\n            let aliUtil = $.require(\\\"aliUtil\\\");\\n            for (let i = 0; i < arr.length; i++) {\\n                let it = arr[i];\\n                let u = it.vod_content;\\n                if (!u.includes(\\\"aliyundrive\\\") || !aliUtil.checkali(u)) {\\n                    continue;\\n                }\\n                d.push({\\n                    title: \\\"√ \\\" + it.vod_name,\\n                    pic_url: it.vod_pic,\\n                    url: u,\\n                    desc: \\\"\\\\n\\\" + u,\\n                });\\n            }\\n            return d;\\n        }\\n    },\\n    {\\n        name: \\\"必应\\\",\\n        page: true,\\n        find: function(s, page) {\\n            let url = \\\"https://cn.bing.com/search?q=\\\" + s + \\\"+aliyundrive&qs=ds&form=QBRE\\\";\\n            if (page != 1) {\\n                url = getMyVar(\\\"bing\\\", url);\\n            }\\n            let html = request(url, {\\n                headers: {\\n                    \\\"Referer\\\": \\\"https://cn.bing.com/\\\",\\n                    //\\\"X-Requested-With\\\": \\\"com.example.hikerview\\\",\\n                    \\\"Accept\\\": \\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9\\\"\\n                }\\n            });\\n            let arr = pdfa(html, \\\"body&&a\\\");\\n            //log(arr);\\n            let d = [];\\n            for (let i = 0; i < arr.length; i++) {\\n                let it = arr[i];\\n                let u = pd(it, \\\"a&&href\\\", url);\\n                let t = pdfh(it, \\\"a&&Text\\\");\\n                if (it.includes(\\\"Next page\\\") || it.includes(\\\"下一页\\\")) {\\n                    let u2 = pd(it, \\\"a&&href\\\", url);\\n                    //log(\\\"next page\\\");\\n                    //log(u2);\\n                    putMyVar(\\\"bing\\\", u2);\\n                }\\n                if (u == null || t == null || !it.includes(s)) {\\n                    continue;\\n                }\\n                if (!it.includes(\\\"网盘\\\") && !it.includes(\\\"云盘\\\") &&\\n                    !it.includes(\\\"aliyundrive\\\") && !it.includes(\\\"yunpan\\\")) {\\n                    continue;\\n                }\\n                if (u.startsWith(\\\"https://cn.bing.com/\\\")) {\\n                    continue;\\n                }\\n                let dom = getHome(u).replace(\\\"http://\\\", \\\"\\\").replace(\\\"https://\\\", \\\"\\\");\\n                let _links = t.match(/https:\\\\/\\\\/(www\\\\.aliyundrive\\\\.com\\\\/s|alywp\\\\.net)\\\\/\\\\w*/g) || [];\\n                let c = null;\\n                if (_links.length > 1 && _links[1].replace(_links[0], \\\"\\\").replace(/[a-zA-Z0-9]+/g, \\\"\\\") == \\\"\\\") {\\n                    c = _links[1];\\n                } else if (_links.length > 0) {\\n                    c = _links[0];\\n                }\\n                d.push({\\n                    title: t,\\n                    desc: dom,\\n                    url: c != null ? c : u,\\n                    extra: {\\n                        longClick: [{\\n                            title: \\\"进入网站\\\",\\n                            js: JSON.stringify(\\\"hiker://page/ysfx?webUrl=\\\" + encodeURIComponent(u))\\n                        }]\\n                    }\\n                });\\n            }\\n            return d;\\n        },\\n        findAliUrl(input) {\\n            if (input.includes(\\\"aliyundrive\\\")) return input;\\n            let html = request(input);\\n            var _links = html.match(/https:\\\\/\\\\/(www\\\\.aliyundrive\\\\.com\\\\/s|alywp\\\\.net)\\\\/\\\\w*/g) || [];\\n            if (_links.length > 1 && _links[1].replace(_links[0], \\\"\\\").replace(/[a-zA-Z0-9]+/g, \\\"\\\") == \\\"\\\") {\\n                return _links[1];\\n            } else if (_links.length > 0) {\\n                return _links[0];\\n            } else {\\n                return \\\"hiker://page/ysfx?webUrl=\\\" + encodeURIComponent(input);\\n            }\\n\\n        }\\n    },\\n    {\\n        name: 'CCOF',\\n        page: true,\\n        find: function(s, page) {\\n            let d = []\\n            let aliUtil = $.require(\\\"aliUtil\\\");\\n            let html = fetch('https://pan.ccof.cc/api/search', {\\n                headers: {\\n                    \\\"content-type\\\": 'application/json',\\n                    'Referer': 'https://pan.ccof.cc/search?keyword=' + s\\n                },\\n                body: {\\n                    \\\"pageSize\\\": 20,\\n                    \\\"pageNum\\\": page,\\n                    \\\"keyword\\\": s,\\n                    \\\"fromMobile\\\": true\\n                },\\n                method: 'POST'\\n            })\\n            let list = JSON.parse(html)\\n                .data.rows\\n            for (let i = 0; i < list.length; i++) {\\n                let it = list[i];\\n                let title = it.fileName\\n                let murl = it.url\\n                let type = it.type.replace(/folder/, '文件夹').replace(/file/, '文件')\\n                if (title.includes(s)) {\\n                    d.push({\\n                        title: title,\\n                        desc: '文件类型：' + type + '，文件大小：' + aliUtil.bytesToSize(it.size),\\n                        url: murl\\n                    })\\n                }\\n            }\\n            return d\\n        }\\n    },\\n    {\\n        name: '阿里小站',\\n        page: true,\\n        find: function(s, page) {\\n            let home = \\\"https://pan666.net\\\";\\n            let d = [];\\n            let html = request(buildUrl(home + \\\"/api/discussions\\\", {\\n                \\\"include\\\": \\\"user,lastPostedUser,mostRelevantPost,mostRelevantPost.user,tags,tags.parent,firstPost\\\",\\n                \\\"filter[q]\\\": s /* + \\\" tag:video,comic\\\"*/ ,\\n                //\\\"filter[tag]\\\": \\\"video,comic\\\",\\n                \\\"page[offset]\\\": 20 * (page - 1)\\n            }), {\\n                headers: {\\n                    \\\"content-type\\\": \\\"application/json\\\",\\n                    \\\"Referer\\\": \\\"https://pan666.net/?q=\\\" + s\\n                }\\n            });\\n            let list = JSON.parse(html).data;\\n            for (let i = 0; i < list.length; i++) {\\n                let item = list[i].attributes;\\n                let url = home + \\\"/d/\\\" + item.slug;\\n                d.push({\\n                    title: item.title,\\n                    desc: '发布时间：' + $.dateFormat(new Date(item.createdAt), \\\"yyyy-MM-dd HH:mm:ss\\\"),\\n                    url: url,\\n                    extra: {\\n                        longClick: [{\\n                            title: \\\"进入帖子\\\",\\n                            js: JSON.stringify(\\\"hiker://page/ysfx?webUrl=\\\" + encodeURIComponent(url))\\n                        }]\\n                    }\\n                });\\n            }\\n            return d;\\n        },\\n        findAliUrl(input) {\\n            let html = pdfh(request(input), \\\"Text\\\");\\n            let _links = html.match(/https:\\\\/\\\\/(www\\\\.aliyundrive\\\\.com\\\\/s|alywp\\\\.net)\\\\/\\\\w*/g) || [];\\n            let sharePwd = html.match(/提取码[:：]\\\\s*?(\\\\w{4})/);\\n            sharePwd = Array.isArray(sharePwd) && sharePwd.length > 0 ? sharePwd[1] : \\\"\\\";\\n            if (_links.length > 1 && _links[1].replace(_links[0], \\\"\\\").replace(/[a-zA-Z0-9]+/g, \\\"\\\") == \\\"\\\") {\\n                return {\\n                    aliUrl: _links[1],\\n                    sharePwd: sharePwd\\n                };\\n            } else if (_links.length > 0) {\\n                return {\\n                    aliUrl: _links[0],\\n                    sharePwd: sharePwd\\n                };\\n            } else {\\n                return \\\"hiker://page/ysfx?webUrl=\\\" + encodeURIComponent(input);\\n            }\\n        }\\n    },\\n    {\\n        name: '云盘分享社区',\\n        page: true,\\n        find: function(s, page) {\\n            let home = \\\"https://yunpan1.cc\\\";\\n            let d = [];\\n            let html = request(buildUrl(home + \\\"/api/discussions\\\", {\\n                \\\"include\\\": \\\"user,lastPostedUser,mostRelevantPost,mostRelevantPost.user,tags,tags.parent,firstPost\\\",\\n                \\\"filter[q]\\\": s /* + \\\" tag:video,comic\\\"*/ ,\\n                //\\\"filter[tag]\\\": \\\"video,comic\\\",\\n                \\\"page[offset]\\\": 20 * (page - 1)\\n            }), {\\n                headers: {\\n                    \\\"content-type\\\": \\\"application/json\\\",\\n                    \\\"Referer\\\": \\\"https://pan666.net/?q=\\\" + s\\n                }\\n            });\\n            let list = JSON.parse(html).data;\\n            for (let i = 0; i < list.length; i++) {\\n                let item = list[i].attributes;\\n                let url = home + \\\"/d/\\\" + item.slug;\\n                d.push({\\n                    title: item.title,\\n                    desc: '发布时间：' + $.dateFormat(new Date(item.createdAt), \\\"yyyy-MM-dd HH:mm:ss\\\"),\\n                    url: url,\\n                    extra: {\\n                        longClick: [{\\n                            title: \\\"进入帖子\\\",\\n                            js: JSON.stringify(\\\"hiker://page/ysfx?webUrl=\\\" + encodeURIComponent(url))\\n                        }]\\n                    }\\n                });\\n            }\\n            return d;\\n        },\\n        findAliUrl(input) {\\n            let html = pdfh(request(input), \\\"Text\\\");\\n            let _links = html.match(/https:\\\\/\\\\/(www\\\\.aliyundrive\\\\.com\\\\/s|alywp\\\\.net)\\\\/\\\\w*/g) || [];\\n            let sharePwd = html.match(/提取码[:：]\\\\s*?(\\\\w{4})/);\\n            sharePwd = Array.isArray(sharePwd) && sharePwd.length > 0 ? sharePwd[1] : \\\"\\\";\\n            if (_links.length > 1 && _links[1].replace(_links[0], \\\"\\\").replace(/[a-zA-Z0-9]+/g, \\\"\\\") == \\\"\\\") {\\n                return {\\n                    aliUrl: _links[1],\\n                    sharePwd: sharePwd\\n                };\\n            } else if (_links.length > 0) {\\n                return {\\n                    aliUrl: _links[0],\\n                    sharePwd: sharePwd\\n                };\\n            } else {\\n                return \\\"hiker://page/ysfx?webUrl=\\\" + encodeURIComponent(input);\\n            }\\n        }\\n    }, {\\n        name: \\\"爱看美剧\\\",\\n        page: true,\\n        find: function(s, page) {\\n            let url = \\\"https://www.2kmj.cn/search.php?q=\\\" + s + \\\"&page/\\\" + page + \\\"/\\\";\\n            let html = request(url);\\n            let arr = parseDomForArray(html, \\\".list-it&&li\\\");\\n\\n            let bet = [];\\n            for (let i = 0; i < arr.length; i++) {\\n                let it = arr[i];\\n                let utitle = parseDomForHtml(it, \\\"a&&title\\\");\\n                let userial = parseDomForHtml(it, \\\".info&&span:not(:has(a))--i&&Text\\\");\\n                let uimage = parseDom(it, \\\"img&&src\\\");\\n                let u = parseDom(it, \\\"a&&href\\\");\\n                bet.push({\\n                    title: utitle,\\n                    url: u,\\n                    pic_url: uimage,\\n                    desc: userial\\n                });\\n            }\\n\\n            return bet;\\n\\n        },\\n        findAliUrl(input) {\\n            return pdfa(request(input), \\\"body&&#download\\\").map(v => pdfh(v, \\\".down&&href\\\"));\\n        }\\n    },\\n    {\\n        name: \\\"奇妙搜索\\\",\\n        page: true,\\n        find(s, page) {\\n            let url;\\n            if (page === 1) {\\n                url = buildUrl(\\\"https://www.magicalsearch.top/api/pshou/getData\\\", {\\n                    word: s,\\n                    type: \\\"阿里网盘\\\"\\n                });\\n            } else {\\n                url = buildUrl(\\\"https://www.magicalsearch.top/api/pshou/getNextPage\\\", {\\n                    url: \\\"https://api.upyunso2.com/search?s_type=2@page=\\\" + page + \\\"@keyword=\\\" + encodeURIComponent(s),\\n                    website: \\\"阿里网盘\\\"\\n                });\\n            }\\n            let result = request(url, {\\n                headers: {\\n                    Referer: buildUrl(\\\"https://www.magicalsearch.top/search\\\", {\\n                        word: s,\\n                        cpage: 0\\n                    })\\n                }\\n            });\\n            result = JSON.parse(JSON.parse(result));\\n            let list = result.result.items;\\n            let d = [];\\n            for (let it of list) {\\n                if (it.id == -1) {\\n                    continue;\\n                }\\n                d.push({\\n                    title: it.title,\\n                    desc: \\\"日期：\\\" + it.insert_time + \\\"\\\\n路径：\\\" + it.path,\\n                    url: it.page_url\\n                });\\n            }\\n            return d;\\n        }\\n    }\\n];\"},{\"col_type\":\"movie_3\",\"name\":\"文件排序\",\"path\":\"FileSorting\",\"rule\":\"let chnNumChar = {\\n    零: 0,\\n    一: 1,\\n    二: 2,\\n    三: 3,\\n    四: 4,\\n    五: 5,\\n    六: 6,\\n    七: 7,\\n    八: 8,\\n    九: 9\\n};\\n\\nlet chnNameValue = {\\n    十: {\\n        value: 10,\\n        secUnit: false\\n    },\\n    百: {\\n        value: 100,\\n        secUnit: false\\n    },\\n    千: {\\n        value: 1000,\\n        secUnit: false\\n    },\\n    万: {\\n        value: 10000,\\n        secUnit: true\\n    },\\n    亿: {\\n        value: 100000000,\\n        secUnit: true\\n    }\\n}\\n\\nfunction ChineseToNumber(chnStr) {\\n    let rtn = 0;\\n    let section = 0;\\n    let number = 0;\\n    let secUnit = false;\\n    let str = chnStr.split('');\\n\\n    for (let i = 0; i < str.length; i++) {\\n        let num = chnNumChar[str[i]];\\n        if (typeof num !== 'undefined') {\\n            number = num;\\n            if (i === str.length - 1) {\\n                section += number;\\n            }\\n        } else {\\n            let unit = chnNameValue[str[i]].value;\\n            secUnit = chnNameValue[str[i]].secUnit;\\n            if (secUnit) {\\n                section = (section + number) * unit;\\n                rtn += section;\\n                section = 0;\\n            } else {\\n                section += (number * unit);\\n            }\\n            number = 0;\\n        }\\n    }\\n    return rtn + section;\\n}\\n\\nfunction nameCompare(a, b) {\\n    if (a == null || b == null)\\n        return a == null ? b == null ? 0 : -1 : 1;\\n\\n    a = a.replace(/([零一二三四五六七八九十百千万亿])/g, function(match, p1, p2, p3, offset, string) {\\n        // p1 is nondigits, p2 digits, and p3 non-alphanumerics\\n        return ChineseToNumber(p1);\\n    })\\n    b = b.replace(/([零一二三四五六七八九十百千万亿])/g, function(match, p1, p2, p3, offset, string) {\\n        // p1 is nondigits, p2 digits, and p3 non-alphanumerics\\n        return ChineseToNumber(p1);\\n    })\\n\\n    let NUMBERS = java.util.regex.Pattern.compile(\\\"(?<=\\\\\\\\D)(?=\\\\\\\\d)|(?<=\\\\\\\\d)(?=\\\\\\\\D)\\\")\\n    let split1 = NUMBERS.split(new java.lang.String(a));\\n    let split2 = NUMBERS.split(new java.lang.String(b));\\n\\n    for (let i = 0; i < Math.min(split1.length, split2.length); i++) {\\n        let c1 = split1[i].charCodeAt(0);\\n        let c2 = split2[i].charCodeAt(0);\\n        let cmp = 0;\\n        let zeroCharCode = '0'.charCodeAt(0);\\n        let nineCharCode = '9'.charCodeAt(0);\\n\\n        if (c1 >= zeroCharCode && c1 <= nineCharCode && c2 >= zeroCharCode && c2 <= nineCharCode) {\\n            cmp = new java.math.BigInteger(split1[i]).compareTo(new java.math.BigInteger(split2[i]));\\n        }\\n\\n        if (cmp === 0) {\\n            let regex = /[a-zA-Z0-9]/\\n            let s1 = String(split1[i])\\n            let s2 = String(split2[i])\\n            if (regex.test(s1) || regex.test(s2)) {\\n                cmp = new java.lang.String(split1[i]).compareTo(new java.lang.String(split2[i]));\\n                // cmp = s1.localeCompare(s2, 'en')\\n            } else {\\n                cmp = s1.localeCompare(s2, 'zh')\\n            }\\n        }\\n\\n        if (cmp !== 0) {\\n            return cmp;\\n        }\\n    }\\n    let lengthCmp = split1.length - split2.length;\\n    // if (lengthCmp !== 0) lengthCmp = lengthCmp > 0 ? -1 : 1;\\n    return lengthCmp;\\n}\\n$.exports.nameCompare = nameCompare;\"},{\"col_type\":\"movie_3\",\"name\":\"登录方式\",\"path\":\"loginMode\",\"rule\":\"$.exports = $([\\\"APP授权登录\\\", \\\"网页登录①\\\", \\\"网页登录②\\\", \\\"TOKEN登录\\\"], 1, \\\"登录方式\\\").select(() => {\\n    if (\\\"网页登录①\\\" == input) {\\n        return \\\"hiker://page/login#noRecordHistory##noHistory#?pageTitle=登录阿里云盘\\\"\\n    }\\n    if (\\\"网页登录②\\\" == input) {\\n        return \\\"hiker://page/login#noRecordHistory##noHistory#?index=0&pageTitle=登录阿里云盘\\\"\\n    }\\n    if (\\\"APP授权登录\\\" == input) {\\n        return \\\"hiker://page/login#noRefresh##noRecordHistory##noHistory#?index=-1&pageTitle=登录阿里云盘\\\"\\n    }\\n    if (\\\"TOKEN登录\\\" == input) {\\n        return $(\\\"\\\", \\\"输入TOKEN\\\").input(() => {\\n            let aliTokensFilepath = $.require(\\\"hiker://page/tokenPath\\\").aliTokensFilepath;\\n            let aliToken = {\\n                refresh_token: input.trim()\\n            };\\n            writeFile(aliTokensFilepath, JSON.stringify(aliToken));\\n            refreshPage();\\n        });\\n    }\\n    if (\\\"原画登录\\\" == input) {\\n        return \\\"hiker://page/openApiLogin#noRefresh##noRecordHistory##noHistory#\\\";\\n    }\\n});\"},{\"col_type\":\"movie_3\",\"name\":\"阿里链接匹配\",\"path\":\"alitest\",\"rule\":\"js:\\nlet matchReg = /https?:\\\\/\\\\/www.ali(pan|yundrive).com\\\\/s\\\\/[a-zA-Z0-9]{11}(\\\\/folder\\\\/[a-z0-9]{40})?/;\\nlet matchRegG = /https?:\\\\/\\\\/www.ali(pan|yundrive).com\\\\/s\\\\/[a-zA-Z0-9]{11}(\\\\/folder\\\\/[a-z0-9]{40})?/g;\\nlet testReg = /www.ali(pan|yundrive).com\\\\/s\\\\//;\\n$.exports = {\\n    matchAliUrl(text, isG) {\\n        if (isG) {\\n            let url = text.match(matchRegG);\\n            if (url) return url;\\n            else return [];\\n        } else {\\n            let url = text.match(matchReg);\\n            return url = url && url[0] || \\\"\\\";\\n        }\\n    },\\n    test(text){\\n        return testReg.test(text);\\n    }\\n}\\n\"},{\"col_type\":\"movie_3\",\"name\":\"openApi登录-废弃\",\"path\":\"openApiLogin\",\"rule\":\"js:\\nsetPageTitle(\\\"openApi登录\\\");\\naddListener(\\\"onClose\\\", () => clearMyVar(\\\"Loggingin\\\"));\\n\\nlet d = [];\\nd.push({\\n    title: \\\"点击获取扫码登录二维码\\\",\\n    desc: \\\"点击图片可以保存\\\",\\n    col_type: \\\"text_center_1\\\",\\n    extra: {\\n        cls: \\\"login\\\",\\n        id:\\\"getQC\\\"\\n    },\\n    url: $(\\\"#noLoading#\\\").lazyRule(() => {\\n        putMyVar(\\\"Loggingin\\\", \\\"true\\\");\\n        showLoading(\\\"正在获取二维码\\\");\\n\\n        function get_qrcode_status(sid) {\\n            let res = fetch(\\\"https://openapi.aliyundrive.com/oauth/qrcode/\\\" + sid + \\\"/status\\\");\\n            return JSON.parse(res);\\n        }\\n\\n        function get_refresh_token(code) {\\n            let res = post(\\\"https://aliyundrive-oauth.messense.me/oauth/access_token\\\", {\\n                body: JSON.stringify({\\n                    \\\"grant_type\\\": \\\"authorization_code\\\",\\n                    \\\"code\\\": code,\\n                }),\\n            });\\n            let data = JSON.parse(res);\\n            return data[\\\"refresh_token\\\"];\\n        }\\n        let res = post(\\\"https://aliyundrive-oauth.messense.me/oauth/authorize/qrcode\\\", {\\n            body: JSON.stringify({\\n                \\\"scopes\\\": [\\\"user:base\\\", \\\"file:all:read\\\", \\\"file:all:write\\\"],\\n                \\\"width\\\": 300,\\n                \\\"height\\\": 300,\\n            }),\\n        });\\n        let data = JSON.parse(res);\\n        let sid = data[\\\"sid\\\"];\\n        let qrcode_url = data[\\\"qrCodeUrl\\\"];\\n        updateItem(\\\"infoOutput\\\", {\\n            pic_url: qrcode_url,\\n            url: qrcode_url + \\\"#.jpg\\\",\\n            col_type: \\\"pic_1_full\\\"\\n        });\\n        addItemAfter(\\\"infoOutput\\\", {\\n            title: \\\"‘‘’’\\\" + \\\"使用阿里云盘 App 扫码\\\".fontcolor(\\\"grey\\\"),\\n            col_type: \\\"text_center_1\\\",\\n            extra: {\\n                cls: \\\"login\\\"\\n            }\\n        });\\n        deleteItem(\\\"getQC\\\");\\n        hideLoading();\\n        let refresh_token;\\n        while (true) {\\n            let data;\\n            try {\\n                data = get_qrcode_status(sid);\\n            } catch (e) {\\n                return \\\"toast://查询扫码结果超时, 可能是触发了阿里云盘接口限制, 请稍后再试.\\\";\\n            }\\n            let status = data[\\\"status\\\"];\\n            if (status == \\\"LoginSuccess\\\") {\\n                refresh_token = get_refresh_token(data[\\\"authCode\\\"]);\\n                break\\n            } else if (status == \\\"QRCodeExpired\\\") {\\n                return \\\"toast://二维码已过期, 请刷新页面后重试\\\";\\n            }\\n            if (!getMyVar(\\\"Loggingin\\\", \\\"\\\")) {\\n                return \\\"toast://cancel\\\";\\n            }\\n            java.lang.Thread.sleep(1500);\\n        }\\n        if (refresh_token) {\\n            const {\\n                openTokensFilepath,\\n            } = $.require(\\\"tokenPath\\\");\\n            let open = {\\n                RefreshTokenOpen: refresh_token,\\n                isV2: true\\n            };\\n            writeFile(openTokensFilepath, JSON.stringify(open));\\n            addItemAfter(\\\"infoOutput\\\", {\\n                title: \\\"登录成功(点击返回)\\\",\\n                url:$(\\\"#noLoading#\\\").lazyRule(()=>{\\n                    back(false);\\n                    return \\\"hiker://empty\\\";\\n                }),\\n                col_type: \\\"text_center_1\\\",\\n            });\\n            deleteItemByCls(\\\"login\\\");\\n\\n            return \\\"toast://success\\\";\\n        }\\n        return \\\"toast://fail\\\";\\n    })\\n});\\n\\nd.push({\\n    col_type: \\\"blank_block\\\",\\n    extra: {\\n        id: \\\"infoOutput\\\",\\n        cls: \\\"login\\\"\\n    }\\n});\\n\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"openApi:alist\",\"path\":\"openApi_alist\",\"rule\":\"\\nfunction OpenApiAlist($this) {\\n    this.$this = $this;\\n}\\nObject.assign(OpenApiAlist.prototype, {\\n    getOpenTokenCode() {\\n        let result = this.$this.postApi('https://open.aliyundrive.com/oauth/users/authorize?client_id=' + '76917ccccd4441c39457a04f6084fb2f' + '&redirect_uri=https://alist.nn.ci/tool/aliyundrive/callback' + '&scope=user:base,file:all:read,file:all:write&state=').body({\\n            \\\"authorize\\\": 1,\\n            \\\"scope\\\": \\\"user:base,file:all:read,file:all:write\\\"\\n        }).headers({\\n            'User-Agent': PC_UA,\\n            'Referer': 'https://www.aliyundrive.com/',\\n            'authorization': this.$this.reaccessTk, //getAccessToken\\n            'x-canary': 'client=web,app=share,version=v2.3.1',\\n            'x-share-token': this.$this.shareToken\\n        }).errorWithRetry((e,_,http) => {\\n            this.$this.trySolve(e);\\n            http.mergeHeadAndBody({\\n                headers: {\\n                    'authorization': this.$this.reaccessTk,\\n                    'x-share-token': this.$this.shareToken\\n                }\\n            });\\n            return true;\\n        }).start(true);\\n        let code = result.redirectUri.split(\\\"code=\\\")[1];\\n        return code;\\n    },\\n    getToken(body) {\\n        let json = post('https://api.xhofe.top/alist/ali_open/code', {\\n            headers: {\\n                'User-Agent': PC_UA,\\n                'Referer': 'https://www.aliyundrive.com/'\\n            },\\n            body: JSON.stringify(body),\\n        });\\n        if (!json) {\\n            json = post('https://api-cf.nn.ci/alist/ali_open/code', {\\n                headers: headers,\\n                body: JSON.stringify(body),\\n            });\\n        }\\n        if (json.includes('Too Many Requests') || json.includes(\\\"502 Bad Gateway\\\")) {\\n            throw new Error(\\\"频繁请求暂时被封禁\\\\n\\\" + json);\\n        } else {\\n            let openResult = JSON.parse(json);\\n            return openResult;\\n        }\\n    },\\n    getOpenToken() {\\n        return this.getToken({\\n            code: this.getOpenTokenCode(),\\n            grant_type: \\\"authorization_code\\\"\\n        });\\n    },\\n    refreshOpenToken() {\\n        return this.getToken({\\n            grant_type: \\\"refresh_token\\\",\\n            refresh_token: this.$this.openTokens.RefreshTokenOpen,\\n        });\\n    }\\n});\\n$.exports = OpenApiAlist;\"},{\"col_type\":\"movie_3\",\"name\":\"openApi:aliyundrive\",\"path\":\"openApi_aliyundrive\",\"rule\":\"js:\\nfunction OpenApi($this, postApi) {\\n    this.$this = $this;\\n}\\n\\nObject.assign(OpenApi.prototype, {\\n    getOpenTokenCode() {\\n        function get_qrcode_code(sid) {\\n            let res = fetch(\\\"https://openapi.aliyundrive.com/oauth/qrcode/\\\" + sid + \\\"/status\\\");\\n            return JSON.parse(res).authCode;\\n        }\\n\\n        let res = post(\\\"https://aliyundrive-oauth.messense.me/oauth/authorize/qrcode\\\", {\\n            body: JSON.stringify({\\n                \\\"scopes\\\": [\\\"user:base\\\", \\\"file:all:read\\\", \\\"file:all:write\\\"],\\n                \\\"width\\\": 300,\\n                \\\"height\\\": 300,\\n            }),\\n        });\\n        let data = JSON.parse(res);\\n        let sid = data[\\\"sid\\\"];\\n        let body = {\\n            \\\"authorize\\\": 1,\\n            \\\"scope\\\": \\\"user:base,file:all:read,file:all:write\\\",\\n            \\\"drives\\\": [\\\"backup\\\", \\\"resource\\\"],\\n            \\\"scopes\\\": [\\\"user:base\\\", \\\"file:all:read\\\", \\\"file:all:write\\\"],\\n            \\\"sid\\\": sid\\n        }\\n        let headers = {\\n            'authorization': this.$this.reaccessTk\\n        };\\n        let res2 = this.$this.postApi(\\\"https://open.aliyundrive.com/oauth/users/qrcode/authorize?sid=\\\" + sid).body(body).headers(headers).errorWithRetry((e, _, http) => {\\n            this.$this.trySolve(e);\\n            http.mergeHeadAndBody({\\n                headers: {\\n                    'authorization': this.$this.reaccessTk,\\n                }\\n            });\\n            return true;\\n        }).start(true);\\n        return get_qrcode_code(sid);\\n    },\\n    getToken(body) {\\n        let res = post(\\\"https://aliyundrive-oauth.messense.me/oauth/access_token\\\", {\\n            body: JSON.stringify(body),\\n        });\\n        let data = JSON.parse(res);\\n\\n        return data;\\n    },\\n    getOpenToken() {\\n        return this.getToken({\\n            code: this.getOpenTokenCode(),\\n            grant_type: \\\"authorization_code\\\"\\n        });\\n    },\\n    refreshOpenToken() {\\n        return this.getToken({\\n            grant_type: \\\"refresh_token\\\",\\n            refresh_token: this.$this.openTokens.RefreshTokenOpen,\\n        });\\n    }\\n});\\n$.exports = OpenApi;\"},{\"col_type\":\"movie_3\",\"name\":\"openApi:tvbox\",\"path\":\"openApi_tvbox\",\"rule\":\"function OpenApi($this) {\\n    this.$this = $this;\\n}\\n\\nObject.assign(OpenApi.prototype, {\\n    getOpenTokenCode() {\\n        function get_qrcode_code(sid) {\\n            let res = fetch(\\\"https://openapi.aliyundrive.com/oauth/qrcode/\\\" + sid + \\\"/status\\\");\\n            return JSON.parse(res).authCode;\\n        }\\n\\n        let res = fetch(\\\"http://159.75.208.47/cloudisk/api/oauth/authorize/qrcode\\\");\\n        let data = JSON.parse(res);\\n        let sid = data[\\\"sid\\\"];\\n        let body = {\\n            \\\"authorize\\\": 1,\\n            \\\"scope\\\": \\\"user:base,file:all:read,file:all:write\\\",\\n            \\\"drives\\\": [\\\"backup\\\", \\\"resource\\\"],\\n            \\\"scopes\\\": [\\\"user:base\\\", \\\"file:all:read\\\", \\\"file:all:write\\\"],\\n            \\\"sid\\\": sid\\n        }\\n        let headers = {\\n            'authorization': this.$this.reaccessTk\\n        };\\n        let res2 = this.$this.postApi(\\\"https://open.aliyundrive.com/oauth/users/qrcode/authorize?sid=\\\" + sid).body(body).headers(headers).errorWithRetry((e, _, http) => {\\n            this.$this.trySolve(e);\\n            http.mergeHeadAndBody({\\n                headers: {\\n                    'authorization': this.$this.reaccessTk,\\n                }\\n            });\\n            return true;\\n        }).start(true);\\n        return get_qrcode_code(sid);\\n    },\\n    getToken(body) {\\n        let url = \\\"\\\";\\n        if (body.code) {\\n            url = buildUrl(\\\"http://159.75.208.47/cloudisk/api/oauth/accessToken\\\", {\\n                authCode: body.code\\n            });\\n        } else {\\n            url = buildUrl(\\\"http://159.75.208.47/cloudisk/api/oauth/accessToken\\\", {\\n                refreshToken: body.refresh_token\\n            });\\n        }\\n        let res = fetch(url);\\n        let data = JSON.parse(res);\\n        let ret = {\\n            refresh_token: data.refreshToken,\\n            token_type: data.tokenType,\\n            access_token: data.accessToken\\n        };\\n        return ret;\\n    },\\n    getOpenToken() {\\n        return this.getToken({\\n            code: this.getOpenTokenCode(),\\n            grant_type: \\\"authorization_code\\\"\\n        });\\n    },\\n    refreshOpenToken() {\\n        return this.getToken({\\n            grant_type: \\\"refresh_token\\\",\\n            refresh_token: this.$this.openTokens.RefreshTokenOpen,\\n        });\\n    }\\n});\\n$.exports = OpenApi;\"},{\"col_type\":\"movie_3\",\"name\":\"openApi:XBY\",\"path\":\"openApi_XBY\",\"rule\":\"js:\\nfunction OpenApi($this, postApi) {\\n    this.$this = $this;\\n}\\n\\nObject.assign(OpenApi.prototype, {\\n    client_secret: \\\"63f06c3c5c5d4e1196e2c13e8588ae29\\\",\\n    client_id: \\\"df43e22f022d4c04b6e29964f3b8b46d\\\",\\n    getOpenTokenCode() {\\n        function get_qrcode_code(sid) {\\n            let res = fetch(\\\"https://openapi.aliyundrive.com/oauth/qrcode/\\\" + sid + \\\"/status\\\");\\n            return JSON.parse(res).authCode;\\n        }\\n\\n        let res = post(\\\"https://openapi.aliyundrive.com/oauth/authorize/qrcode\\\", {\\n            body: JSON.stringify({\\n                \\\"scopes\\\": [\\\"user:base\\\", \\\"file:all:read\\\", \\\"file:all:write\\\"],\\n                \\\"client_secret\\\": this.client_secret,\\n                \\\"client_id\\\": this.client_id,\\n                \\\"width\\\": 350,\\n                \\\"height\\\": 350,\\n            }),\\n        });\\n        let data = JSON.parse(res);\\n        let sid = data[\\\"sid\\\"];\\n        let body = {\\n            \\\"authorize\\\": 1,\\n            \\\"scope\\\": \\\"user:base,file:all:read,file:all:write\\\",\\n            \\\"drives\\\": [\\\"backup\\\", \\\"resource\\\"],\\n            \\\"scopes\\\": [\\\"user:base\\\", \\\"file:all:read\\\", \\\"file:all:write\\\"],\\n            \\\"sid\\\": sid\\n        }\\n        let headers = {\\n            'authorization': this.$this.reaccessTk\\n        };\\n        let res2 = this.$this.postApi(\\\"https://open.aliyundrive.com/oauth/users/qrcode/authorize?sid=\\\" + sid).body(body).headers(headers).errorWithRetry((e, _, http) => {\\n            this.$this.trySolve(e);\\n            http.mergeHeadAndBody({\\n                headers: {\\n                    'authorization': this.$this.reaccessTk,\\n                }\\n            });\\n            return true;\\n        }).start(true);\\n        return get_qrcode_code(sid);\\n    },\\n    getToken(body) {\\n        let res = post(\\\"https://openapi.aliyundrive.com/oauth/access_token\\\", {\\n            body: JSON.stringify(body),\\n        });\\n        let data = JSON.parse(res);\\n\\n        return data;\\n    },\\n    getOpenToken() {\\n        return this.getToken({\\n            code: this.getOpenTokenCode(),\\n            grant_type: \\\"authorization_code\\\",\\n            client_secret: this.client_secret,\\n            client_id: this.client_id,\\n        });\\n    },\\n    refreshOpenToken() {\\n        return this.getToken({\\n            grant_type: \\\"refresh_token\\\",\\n            refresh_token: this.$this.openTokens.RefreshTokenOpen,\\n            client_secret: this.client_secret,\\n            client_id: this.client_id,\\n        });\\n    }\\n});\\n$.exports = OpenApi;\"},{\"col_type\":\"movie_3\",\"name\":\"链接定向\",\"path\":\"redirect\",\"rule\":\"js:\\nconst openMode = getItem(\\\"openMode\\\", \\\"本地解析\\\");\\nif (openMode === \\\"本地转码\\\") {\\n    setItem(\\\"openMode\\\", \\\"本地解析\\\");\\n    openMode = \\\"本地解析\\\";\\n}\\n\\nfunction dealArray(array) {\\n    let isString = typeof array[0] === \\\"string\\\";\\n    if (array.length === 1) {\\n        return dealResult(array[0]);\\n    } else if (isString) {\\n        array = array.map(aliUrl => ({\\n            aliUrl\\n        }));\\n    }\\n    let select = array.map((v, i) => v.title || v.aliUrl.replace(/http.*?\\\\/s\\\\//, \\\"\\\"));\\n    return $(select).select((result) => {\\n        let index = MY_INDEX;\\n        return $.require(\\\"redirect\\\").dealResult(result[index]);\\n    }, array);\\n}\\n\\nfunction dealResult(result) {\\n    let resultType = typeof result;\\n    if (resultType === \\\"string\\\") {\\n        return getModeUrl(result);\\n    } else if (Array.isArray(result)) {\\n        return dealArray(result);\\n    } else if (result instanceof EasyNextPage) {\\n        return result.toNextPage();\\n    } else if (resultType === \\\"object\\\") {\\n        return getModeUrl(result.aliUrl, result.sharePwd);\\n    }\\n    return \\\"toast://错误类型：\\\" + resultType;\\n}\\n\\nfunction EasyNextPage(list, col) {\\n    //this.list = list;\\n    col = col || \\\"text_3\\\";\\n    this.toNextPage = function() {\\n        return $().rule((list, col_type) => {\\n            setResult(list.map(v => ({\\n                col_type,\\n                url: $().lazyRule(v => $.require(\\\"redirect\\\").dealResult(v), v),\\n                title: v.title || v.aliUrl.replace(/http.*?\\\\/s\\\\//, \\\"\\\")\\n            })));\\n        }, list, col);\\n    }\\n}\\n\\nfunction setErrorPop(name, author) {\\n    return $(\\\"搜索引擎「\\\" + name + \\\"」失效请联系搜索引擎作者\\\" + (author ? \\\"[\\\" + author + \\\"]\\\" : \\\"\\\") + \\\"修复或删除\\\\n\\\\n引擎作者可以去官方频道询问\\\\n点击确定快速删除\\\").confirm((name) => {\\n        confirm({\\n            title: \\\"温馨提示\\\",\\n            content: \\\"确定要删除\\\" + name + \\\"吗？注意删除后无法恢复\\\",\\n            confirm: $.toString((name) => {\\n                let arr = $.require(\\\"configs\\\").getJson();\\n                let index = arr.findIndex(v => v.name === name);\\n                arr.splice(index, 1);\\n                $.require(\\\"configs\\\").saveJson(arr);\\n                clearItem(\\\"rule\\\");\\n                refreshPage(true);\\n                return \\\"toast://删除成功\\\";\\n            }, name)\\n        });\\n    }, name);\\n}\\n\\nfunction doubleTreating({\\n    findAliUrl,\\n    basicUrl,\\n    name,\\n    author,\\n    aliUrl,\\n    ruleType\\n}) {\\n    if (!findAliUrl) return getModeUrl(aliUrl);\\n    if (ruleType === \\\"JSON\\\") {\\n        let ParseRlue = $.require(\\\"ParseRlue\\\");\\n        let find = findAliUrl;\\n        findAliUrl = (url, basicUrl) => {\\n            return ParseRlue.parseUrlJson(url, find, basicUrl);\\n        }\\n    }else if (ruleType === \\\"HTML\\\") {\\n        let ParseRlue = $.require(\\\"ParseRlue\\\");\\n        let find = findAliUrl;\\n        findAliUrl = (url, basicUrl) => {\\n            return ParseRlue.parseUrlHtml(url, find, basicUrl);\\n        }\\n    } else {\\n        findAliUrl = new Function(\\\"input\\\", \\\"basicUrl\\\", \\\"EasyNextPage\\\", findAliUrl);\\n    }\\n    try {\\n        let result = findAliUrl(aliUrl, basicUrl, EasyNextPage);\\n        return dealResult(result);\\n    } catch (e) {\\n        log(e.toString());\\n        return setErrorPop(name, author);\\n    }\\n}\\n\\nfunction getModeUrl(aliUrl, sharePwd) {\\n    if ($.require(\\\"alitest\\\").test(aliUrl)) {\\n        if (openMode === \\\"本地解析\\\") {\\n            return \\\"hiker://page/aliyun?page=fypage&realurl=\\\" + encodeURIComponent(aliUrl) + \\\"&sharePwd=\\\" + (sharePwd || \\\"\\\");\\n        } else {\\n            shareId = aliUrl.split(\\\"/\\\")[4];\\n            return \\\"smartdrive://share/browse?shareId=\\\" + shareId + \\\"&sharePwd=\\\" + (sharePwd || \\\"\\\");\\n        }\\n    } else if (aliUrl.includes(\\\"pan.quark.cn/s/\\\")||aliUrl.includes(\\\"drive.uc.cn/s/\\\")) {\\n        if (openMode === \\\"本地解析\\\") {\\n            let has = fetch(\\\"hiker://home@Quark.简\\\") != \\\"null\\\";\\n            if (has) {\\n                return \\\"hiker://page/quarkList?rule=Quark.简&realurl=\\\" + encodeURIComponent(aliUrl) + \\\"&sharePwd=\\\" + (sharePwd || \\\"\\\");\\n            } else {\\n                return aliUrl;\\n            }\\n        } else {\\n            return \\\"qklink://www.uc.cn/b20b84fd735a8dd3f7541129bacc4e9a?action=open_url&url=\\\" + aliUrl;\\n        }\\n    } else if (aliUrl.startsWith(\\\"http\\\")) {\\n        return aliUrl;\\n    } else if (aliUrl.startsWith(\\\"magnet\\\")) {\\n        if (openMode === \\\"本地解析\\\") {\\n            return aliUrl;\\n        } else {\\n            return \\\"download://\\\" + aliUrl;\\n        }\\n    } else {\\n        return aliUrl;\\n    }\\n}\\n$.exports.getModeUrl = getModeUrl;\\n$.exports.doubleTreating = doubleTreating;\\n$.exports.dealResult = dealResult;\"},{\"col_type\":\"movie_3\",\"name\":\"规则解析\",\"path\":\"ParseRlue\",\"rule\":\"function toPath(value) {\\n    if (typeof value !== 'string') {\\n        return [];\\n    }\\n    let path = [];\\n    let current = '';\\n    let inBrackets = false;\\n    let escape = false;\\n    for (let i = 0; i < value.length; i++) {\\n        let char = value[i];\\n        if (escape) {\\n            current += char;\\n            escape = false;\\n        } else if (char === '\\\\\\\\') {\\n            escape = true;\\n        } else if (char === '.' && !inBrackets) {\\n            path.push(current);\\n            current = '';\\n        } else if (char === '[') {\\n            inBrackets = true;\\n        } else if (char === ']') {\\n            inBrackets = false;\\n        } else {\\n            current += char;\\n        }\\n    }\\n    if (current) {\\n        path.push(current);\\n    }\\n    return path;\\n}\\n\\nfunction getJson(obj, path) {\\n    if (!obj || !Array.isArray(path)) {\\n        return undefined;\\n    }\\n    if (path.length === 0) {\\n        return obj;\\n    }\\n    let current = obj;\\n    for (let i = 0; i < path.length; i++) {\\n        let key = path[i];\\n\\n        if (current === null || current === undefined || typeof current !== 'object') {\\n            return undefined;\\n        }\\n        current = current[key];\\n    }\\n    return current;\\n}\\n\\nfunction dealRule(json, rule, basicUrl) {\\n    if (!rule) return;\\n    rule = rule.split(\\\"@js=\\\");\\n    let rule0 = rule.at(0);\\n    let t = \\\"\\\";\\n    if (rule0) {\\n        t = getJson(json, toPath(rule0));\\n    } else {\\n        t = json;\\n    }\\n    if (rule.length > 1) {\\n        return new Function(\\\"input\\\", \\\"$$\\\", \\\"basicUrl\\\", '\\\"use strict\\\";return ' + rule.at(1))(t, json, basicUrl);\\n    }\\n    return t;\\n}\\n\\nfunction parseSearchJson(url, rule) {\\n    let json = JSON.parse(fetch(url));\\n    let rules = rule.split(\\\"\\\\n\\\");\\n    let list = getJson(json, toPath(rules.at(0)));\\n    if (!list || !Array.isArray(list)) {\\n        throw new Error(\\\"JSON:列表解析为空\\\");\\n    }\\n    let data = [];\\n    for (let it of list) {\\n        data.push({\\n            title: dealRule(it, rules.at(1), url),\\n            url: dealRule(it, rules.at(2), url),\\n            desc: dealRule(it, rules.at(3), url),\\n            pic_url: dealRule(it, rules.at(4), url),\\n        });\\n    }\\n    return data;\\n}\\n\\nfunction parseUrlJson(url, rule, basicUrl) {\\n    if (rule.startsWith(\\\"@js=\\\")) {\\n        return dealRule(url, rule, basicUrl);\\n    } else {\\n        let json = JSON.parse(fetch(url));\\n        return dealRule(json, rule, basicUrl);\\n    }\\n\\n}\\n\\nfunction dealRuleForHtml(html, rule, basicUrl) {\\n    if (!rule) return;\\n    rule = rule.split(\\\"@js=\\\");\\n    let rule0 = rule.at(0);\\n    let t = \\\"\\\";\\n    if (rule0) {\\n        t = pdfh(html, rule0);\\n    } else {\\n        t = html\\n    }\\n    if (rule.length > 1) {\\n        return new Function(\\\"input\\\", \\\"$$\\\", \\\"basicUrl\\\", '\\\"use strict\\\";return ' + rule.at(1))(t, html, basicUrl);\\n    }\\n    return t;\\n}\\n\\nfunction parseSearchHtml(url, rule) {\\n    let html = fetch(url);\\n    let rules = rule.split(\\\"\\\\n\\\");\\n    let list = pdfa(html, rules.at(0));\\n    if (!list || !Array.isArray(list)) {\\n        throw new Error(\\\"HTML:列表解析为空\\\");\\n    }\\n    let data = [];\\n    for (let it of list) {\\n        let curl = dealRuleForHtml(it, rules.at(2), url);\\n        data.push({\\n            title: dealRuleForHtml(it, rules.at(1), url),\\n            url: curl.startsWith(\\\"http\\\") ? curl : (getHome(url) + curl),\\n            desc: dealRuleForHtml(it, rules.at(3), url),\\n            pic_url: dealRuleForHtml(it, rules.at(4), url),\\n        });\\n    }\\n    return data;\\n}\\n\\nfunction parseUrlHtml(url, rule, basicUrl) {\\n    if (rule.startsWith(\\\"@js=\\\")) {\\n        return dealRuleForHtml(url, rule, basicUrl);\\n    } else {\\n        let html = fetch(url);\\n        return dealRuleForHtml(html, rule, basicUrl);\\n    }\\n}\\n$.exports = {\\n    parseSearchJson,\\n    parseUrlJson,\\n    parseSearchHtml,\\n    parseUrlHtml\\n};\"},{\"col_type\":\"movie_3\",\"name\":\"我的阿里\",\"path\":\"myaliyun\",\"rule\":\"js:\\n//@author LoyDgIk\\nconst AliAccessApi = $.require(\\\"aliPlayApi\\\");\\nlet openAPIList = [\\\"alist\\\", \\\"drive\\\", \\\"tvbox\\\", \\\"XBY\\\", \\\"TV\\\"];\\nlet shareInfo = MY_PARAMS.shareInfo;\\nif (MY_PARAMS.transfer) {\\n    if (!shareInfo) {\\n        shareInfo = MY_PARAMS;\\n    }\\n    MY_PARAMS = {\\n        isHome: true,\\n        shareInfo\\n    };\\n}\\n\\nlet fileId = MY_PARAMS.fileId || \\\"root\\\";\\nlet searchKey = decodeURIComponent(getParam(\\\"searchKey\\\", \\\"\\\")) || undefined;\\nlet isSearch = !!searchKey;\\n\\nlet pageId = String(Date.now()).slice(6);\\n\\nlet skipFile = Number(getItem(\\\"myskipFile\\\", \\\"0\\\"));\\n\\nfunction signInReward(aliAccessApi) {\\n    let today = $.dateFormat(Date.now(), \\\"yyyyMMdd\\\");\\n    let lastday = getItem(\\\"AliDay\\\", \\\"0\\\");\\n    if (today != lastday && new Date().getHours() >= 0) {\\n        setItem(\\\"AliDay\\\", today);\\n        let result = \\\"\\\";\\n        try {\\n            if ((result = aliAccessApi.signInReward())) {\\n                toast(result);\\n            } else {\\n                toast(result);\\n            }\\n        } catch (e) {\\n            toast(\\\"签到失败:\\\" + e.toString());\\n        }\\n    }\\n}\\n\\nfunction formatDate(_date, fmt) {\\n    let date = !isNaN(_date) ? new Date(_date * 1000) : new Date(_date);\\n    return $.dateFormat(date, fmt || \\\"yyyy-MM-dd HH:mm:ss\\\")\\n}\\n\\nfunction formatSize(size) {\\n    if (!size) {\\n        return '';\\n    }\\n    const units = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\\n    let i = 0;\\n    while (size >= 1024) {\\n        size /= 1024;\\n        i++;\\n    }\\n    size = i ? Number(size.toFixed(2)) : size;\\n    return `${size} ${units[i]}`;\\n}\\n\\nfunction setMyPaCache(key, value) {\\n    MY_PARAMS[key] = value;\\n}\\n\\nfunction saveMyPaCache() {\\n    setPageParams(MY_PARAMS);\\n}\\n\\nfunction setMarker(marker) {\\n    setMyPaCache(\\\"marker\\\", marker);\\n}\\n\\n\\nif (MY_PARAMS.noPic) {\\n    setPagePicUrl();\\n    setMyPaCache(\\\"noPic\\\", false);\\n}\\n/*\\nfunction setVideoItemCache(videoItemCache) {\\n    setMyPaCache(\\\"videoItemCache\\\", videoItemCache);\\n}\\n\\nfunction setSubtitleCache(subtitleCache) {\\n    setMyPaCache(\\\"subtitleCache\\\", subtitleCache);\\n}*/\\n\\nlet iconType = \\\"ai|apk|avi|css|dmg|exe|flv|gif|hiker|html|iso|jpg|js|json|log|mov|mp3|mp4|otf|php|png|ppt|psd|table|txt|wav|xls|zip|css|doc|epub|exc|htm|xlsx\\\".split('|');\\n\\nfunction getIcon(ext, type) {\\n    let root = \\\"https://gitcode.net/qq_32394351/dr/-/raw/master/img/文件类型2/\\\";\\n    if (type === \\\"folder\\\") {\\n        return root + \\\"文件夹.svg\\\";\\n    }\\n    if (iconType.includes((ext || \\\"\\\").toLowerCase())) {\\n        return root + ext + \\\".svg\\\";\\n    }\\n    return root + \\\"文件.svg\\\";\\n\\n}\\n\\nfunction load(items) {\\n    const aliAccessApi = AliAccessApi.createDefault();\\n\\n    let orders = {\\n        \\\"名称正序\\\": \\\"name#ASC\\\",\\n        \\\"名称倒序\\\": \\\"name#DESC\\\",\\n        \\\"时间正序\\\": \\\"updated_at#ASC\\\",\\n        \\\"时间倒序\\\": \\\"updated_at#DESC\\\",\\n        \\\"大小正序\\\": \\\"size#ASC\\\",\\n        \\\"大小倒序\\\": \\\"size#DESC\\\"\\n    };\\n    let playMode = getItem(\\\"my_aliyun_playMode\\\", \\\"转码\\\");\\n    let ordersKeys = Object.keys(orders);\\n    let orderName = getItem(\\\"aliyun_order\\\", ordersKeys[0]);\\n    let order = orders[orderName].split(\\\"#\\\");\\n    let styles = [\\\"text_1\\\", \\\"movie_2\\\", \\\"card_pic_3\\\", \\\"avatar\\\", \\\"追剧\\\", \\\"看图\\\"];\\n    let style = getItem(\\\"aliyun_style\\\", styles[0]);\\n\\n    let isBackupDrivid = MY_PARAMS.isBackupDrivid || getItem(\\\"myAliPanDrivid\\\", \\\"false\\\") === \\\"true\\\";\\n    aliAccessApi.setMyDrividType(isBackupDrivid);\\n    if (MY_PAGE === 1) {\\n        if (!getMyVar(\\\"mountzimu\\\", \\\"\\\")) {\\n            storage0.putMyVar(\\\"mountzimu\\\", {});\\n            addListener(\\\"onClose\\\", $.toString(() => {\\n                clearMyVar(\\\"mountzimu\\\");\\n                clearMyVar(\\\"aliShareToken\\\");\\n                clearVar(\\\"dm_share\\\");\\n                clearMyVar(\\\"dmlist\\\");\\n                clearMyVar(\\\"listSearchKey\\\");\\n                clearMyVar(\\\"dm_listUrlList\\\");\\n            }));\\n        }\\n        setMarker();\\n        if (MY_PARAMS.isHome) {\\n            //signInReward(aliAccessApi);\\n            items.push({\\n                title: \\\"备份盘\\\" + [\\\"\\\", \\\"√\\\"][Number(isBackupDrivid)],\\n                url: $(\\\"#noLoading#\\\").lazyRule(() => {\\n                    setItem(\\\"myAliPanDrivid\\\", \\\"true\\\");\\n                    refreshPage();\\n                    return \\\"hiker://empty\\\";\\n                }),\\n                col_type: \\\"text_2\\\",\\n            });\\n            items.push({\\n                title: \\\"资源盘\\\" + [\\\"√\\\", \\\"\\\"][Number(isBackupDrivid)],\\n                url: $(\\\"#noLoading#\\\").lazyRule(() => {\\n                    setItem(\\\"myAliPanDrivid\\\", \\\"false\\\");\\n                    refreshPage();\\n                    return \\\"hiker://empty\\\";\\n                }),\\n                col_type: \\\"text_2\\\",\\n            });\\n        }\\n        if (shareInfo) {\\n            items.push({\\n                title: \\\"““转存到当前文件夹””\\\",\\n                url: $(\\\"#noLoading#\\\").lazyRule((shareInfo, isBackupDrivid, fileId) => {\\n                    const AliAccessApi = $.require(\\\"aliPlayApi\\\");\\n                    let aliAccessApi = AliAccessApi.createDefault(shareInfo.shareId, shareInfo.sharePwd, shareInfo.shareToken);\\n                    aliAccessApi.setMyDrividType(isBackupDrivid);\\n                    aliAccessApi.copyFileToCloudFile(shareInfo.fileId, fileId);\\n                    backToHome();\\n                    return \\\"hiker://empty\\\";\\n                }, shareInfo, isBackupDrivid, fileId),\\n                col_type: \\\"text_center_1\\\",\\n            });\\n        }\\n        if (!isSearch) {\\n            items.push({\\n                title: \\\"搜索\\\",\\n                url: $.toString(() => {\\n                    input = input.trim();\\n                    if (!input) return \\\"toast://请输入关键词\\\";\\n                    return \\\"hiker://page/myaliyun#noHistory##fullTheme#?page=fypage&searchKey=\\\" + encodeURIComponent(input);\\n                }),\\n                col_type: \\\"input\\\",\\n                extra: {\\n                    onChange: \\\"putMyVar('listSearchKey',input)\\\",\\n\\n                }\\n            });\\n        } else {\\n            items.push({\\n                title: \\\"““\\\" + searchKey + \\\"””的搜索结果\\\",\\n                url: \\\"hiker://empty\\\",\\n                col_type: \\\"text_center_1\\\",\\n                extra: {\\n                    lineVisible: false\\n                }\\n            });\\n        }\\n        let funcItems = [];\\n        funcItems.push({\\n            title: style,\\n            url: $(styles, 1, \\\"排布样式\\\").select(() => {\\n                setItem(\\\"aliyun_style\\\", input);\\n                refreshPage();\\n                return \\\"toast://已切换\\\";\\n            }),\\n            pic_url: \\\"https://hikerfans.com/img/ali_icon.svg\\\"\\n        }, {\\n            title: orderName,\\n            url: $(ordersKeys, 2, \\\"排序方式\\\").select(() => {\\n                setItem(\\\"aliyun_order\\\", input);\\n                refreshPage();\\n                return \\\"toast://切换成功\\\";\\n            }),\\n            pic_url: \\\"https://hikerfans.com/img/ali_sort.svg\\\"\\n        }, {\\n            title: playMode,\\n            url: $([\\\"转码\\\", \\\"原画\\\", \\\"极速原画\\\"], 1, \\\"播放模式\\\").select(() => {\\n                setItem(\\\"my_aliyun_playMode\\\", input);\\n                refreshPage();\\n                return \\\"toast://切换成功\\\";\\n            }),\\n            pic_url: \\\"https://hikerfans.com/img/ali_play.svg\\\",\\n        });\\n\\n        funcItems.push({\\n            title: openAPIList[getItem(\\\"openApiMode\\\", \\\"0\\\")],\\n            url: $(openAPIList, 1, \\\"原画API(不要频繁切换)\\\").select((openAPIList) => {\\n                setItem(\\\"openApiMode\\\", String(openAPIList.indexOf(input)));\\n                deleteFile($.require(\\\"tokenPath\\\").openTokensFilepath);\\n                refreshPage(false);\\n                return \\\"toast://已切换为\\\" + input;\\n            }, openAPIList),\\n            pic_url: \\\"https://hikerfans.com/img/ali_api.svg\\\",\\n        });\\n\\n        if (!isSearch) {\\n            funcItems.push({\\n                title: \\\"功能\\\",\\n                url: $([\\\"查看手动挂载字幕\\\", \\\"获取弹幕搜索规则\\\", \\\"批量挂载本地弹幕\\\", \\\"推送到TVBox\\\", \\\"设置收藏封面\\\", \\\"获取投屏IP\\\" , \\\"极速原画下载线程\\\"], 2, \\\"更多功能\\\").select(() => {\\n                    switch (input) {\\n                        case \\\"批量挂载本地弹幕\\\":\\n                            return \\\"hiker://page/dmMount#noHistory##noRecordHistory#\\\";\\n                        case \\\"查看手动挂载字幕\\\":\\n                            let zm = storage0.getMyVar(\\\"mountzimu\\\", {});\\n                            let tip = zm.name ? \\\"当前字幕文件\\\\n\\\" + zm.name + \\\".\\\" + zm.ext : \\\"还未手动挂载字幕\\\";\\n                            confirm({\\n                                title: '手动挂载字幕',\\n                                content: tip + \\\"\\\\n(点击取消可以清除挂载字幕)\\\",\\n                                cancel: () => {\\n                                    clearMyVar(\\\"mountzimu\\\");\\n                                    return \\\"toast://已清除手动挂载字幕\\\";\\n                                }\\n                            });\\n                            return;\\n                        case \\\"获取弹幕搜索规则\\\":\\n                            let rule = {\\n                                \\\"js\\\": JSON.stringify(\\\"hiker://page/loadDm?rule=\\\" + MY_RULE.title + \\\"&title=\\\") + \\\"+encodeURIComponent(playdata.title.split('-')[0]);\\\",\\n                                \\\"name\\\": MY_RULE.title + \\\"弹幕搜索\\\"\\n                            };\\n                            return \\\"rule://\\\" + base64Encode(\\\"￥projection_screen￥\\\" + JSON.stringify(rule));\\n                        case \\\"推送到TVBox\\\":\\n                            return \\\"hiker://page/tvboxPush#noHistory##noRecordHistory#\\\";\\n                        case \\\"设置收藏封面\\\":\\n                            return $([\\\"设置封面地址\\\", \\\"搜索封面\\\"], 1).select(() => {\\n                                if (input === \\\"设置封面地址\\\") {\\n                                    return $(\\\"\\\", \\\"请输入图片地址\\\").input(() => {\\n                                        input = input.trim();\\n                                        if (!input) return \\\"toast://请输入地址\\\";\\n                                        setPagePicUrl(input);\\n                                        return \\\"toast://修改成功\\\";\\n                                    });\\n                                } else {\\n                                    return \\\"hiker://page/frontCover#noHistory##noRecordHistory#\\\";\\n                                }\\n                            });\\n                        case \\\"获取投屏IP\\\":\\n                            let ip = $.require(\\\"aliUtil\\\").getIPv4Address();\\n                            if (ip.startsWith(\\\"192.168.\\\")) {\\n                                return $(ip + \\\"\\\\n该IP适用于流量+热点的投屏\\\\n请替换链接中的0.0.0.0\\\").confirm((ip) => {\\n                                    return \\\"copy://\\\" + ip;\\n                                }, ip);\\n                            } else {\\n                                return $(ip + \\\"\\\\n获取失败非稳定IP,请开启热点再使用,该IP可能会变,不能投屏\\\").confirm(() => {});\\n                            }\\n                        case \\\"极速原画下载线程\\\":\\n                            return $(getItem(\\\"speedThread\\\", \\\"10\\\"), \\\"请输入3-32之间的整数\\\").input(() => {\\n                                let speedThread = parseInt(input);\\n                                if (speedThread < 3 || speedThread > 32) {\\n                                    return \\\"toast://设置不合法\\\";\\n                                }\\n                                setItem(\\\"speedThread\\\", String(speedThread));\\n                                return \\\"toast://设置成功\\\";\\n                            });\\n                    }\\n                }),\\n                pic_url: \\\"https://hikerfans.com/img/ali_fileinto.svg\\\",\\n                extra: {\\n                    pageId: pageId,\\n                    fileId: fileId,\\n                    folderName: getPageTitle()\\n                }\\n            });\\n        } else {\\n            funcItems.push({\\n                title: [\\\"ALL\\\", \\\"仅文件\\\", \\\"仅文件夹\\\"][skipFile],\\n                url: $([\\\"ALL\\\", \\\"仅文件\\\", \\\"仅文件夹\\\"]).select(() => {\\n                    setItem(\\\"myskipFile\\\", String(MY_INDEX));\\n                    refreshPage(false);\\n                    return \\\"hiker://empty\\\";\\n                }),\\n                pic_url: \\\"hiker://images/icon_search6\\\",\\n            });\\n        }\\n        let funStyle = [\\\"\\\", \\\"\\\", \\\"\\\", \\\"icon_small_3\\\", \\\"icon_round_small_4\\\", \\\"icon_5\\\"][funcItems.length];\\n        items.push.apply(items, funcItems.map(v => (v.col_type = funStyle) && v));\\n        items.push({\\n            col_type: \\\"line_blank\\\"\\n        });\\n    }\\n    let rescod = {};\\n    let marker = MY_PARAMS.marker;\\n    if (isSearch) {\\n        rescod = aliAccessApi.getSearchListFile(searchKey, marker, order[0], order[1], skipFile);\\n    } else {\\n        rescod = aliAccessApi.getListFile(fileId, marker, order[0], order[1]);\\n    }\\n    if (rescod.next_marker) {\\n        setMarker(rescod.next_marker);\\n    } else {\\n        setMarker();\\n    }\\n\\n    var conts = rescod.items;\\n    //字幕匹配准备\\n    let subExts = [\\\"vtt\\\", \\\"srt\\\", \\\"ass\\\"];\\n    var zimulist = [];\\n    conts.forEach((item) => {\\n        if (subExts.includes(item.file_extension && item.file_extension.toLowerCase())) {\\n            let name = item.name.replace('.' + item.file_extension, '');\\n            zimulist.push({\\n                ext: item.file_extension,\\n                file_id: item.file_id,\\n                name: name\\n            });\\n        }\\n    });\\n    //处理夸页匹配字幕\\n    /*\\n    let hasSub = zimulist.length > 0;\\n    if (hasSub&&rescod.next_marker) {\\n        if (zimulist.length > 4) {\\n            setSubtitleCache(zimulist.slice(-4));\\n        } else {\\n            setSubtitleCache(zimulist);\\n        }\\n    }\\n    let lastItem = conts.at(-1);\\n    if (hasSub&&lastItem&&lastItem.category === \\\"video\\\") {\\n        setVideoItemCache(conts.splice(conts.length-1,1));\\n    }\\n    if (MY_PAGE > 1) {\\n        let subtitleCache = MY_PARAMS.subtitleCache || [];\\n        zimulist = zimulist.concat(subtitleCache);\\n        let videoItemCache = MY_PARAMS.videoItemCache || [];\\n        conts = videoItemCache.concat(conts);\\n        setSubtitleCache();\\n        setVideoItemCache();\\n    }*/\\n    //简体优先\\n    zimulist.sort((a, b) => (b.name.endsWith(\\\".sc\\\") || b.name.endsWith(\\\".chs\\\")) - (a.name.endsWith(\\\".sc\\\") || a.name.endsWith(\\\".chs\\\")));\\n    //end\\n    let titleHead = {\\n        video: \\\"🎬\\\",\\n        audio: \\\"🎵\\\",\\n        doc: \\\"📑\\\",\\n        image: \\\"🖼\\\",\\n        zip: \\\"📦\\\",\\n        folder: \\\"📂\\\"\\n    };\\n\\n    function getHead(type, ext) {\\n        let head = titleHead[type];\\n        if (subExts.includes(ext)) {\\n            head = \\\"🕸\\\";\\n        }\\n        return head || \\\"❓\\\";\\n    }\\n\\n    function getPreviewPic(fileItem) {\\n        if (fileItem.thumbnail) {\\n            return $(\\\"https://empty?\\\" + fileItem.file_id).image((pic) => {\\n                try {\\n                    return fetch(pic, {\\n                        inputStream: true\\n                    });\\n                } catch (e) {\\n                    return null;\\n                }\\n            }, fileItem.thumbnail);\\n        }\\n    }\\n\\n    function deleteDFile(fileId, isBackupDrivid, name) {\\n        return $(\\\"确认永久删除[\\\" + name + \\\"]\\\").confirm((fileId, isBackupDrivid) => {\\n            const AliAccessApi = $.require(\\\"aliPlayApi\\\");\\n            let aliAccessApi = AliAccessApi.createDefault();\\n            aliAccessApi.setMyDrividType(isBackupDrivid);\\n            aliAccessApi.deleteeCloudFile(fileId);\\n            refreshPage(false);\\n            return \\\"hiker://empty\\\";\\n        }, fileId, isBackupDrivid);\\n    }\\n    let folderStyle, fileStyle;\\n    let filterType = [];\\n    if (style === \\\"追剧\\\") {\\n        folderStyle = \\\"avatar\\\";\\n        fileStyle = \\\"movie_2\\\";\\n        filterType.push(\\\"video\\\");\\n        items.push({\\n            title: \\\"““””\\\" + \\\"追剧模式只显示文件夹和视频\\\".small().fontcolor(\\\"grey\\\"),\\n            url: \\\"hiker://empty\\\",\\n            col_type: \\\"text_center_1\\\",\\n            extra: {\\n                lineVisible: false\\n            }\\n        });\\n    } else if (style === \\\"看图\\\") {\\n        folderStyle = \\\"avatar\\\";\\n        fileStyle = \\\"card_pic_3\\\";\\n        filterType.push(\\\"image\\\");\\n        items.push({\\n            title: \\\"““””\\\" + \\\"看图模式只显示文件夹和图片\\\".small().fontcolor(\\\"grey\\\"),\\n            url: \\\"hiker://empty\\\",\\n            col_type: \\\"text_center_1\\\",\\n            extra: {\\n                lineVisible: false\\n            }\\n        });\\n    } else {\\n        folderStyle = fileStyle = style;\\n    }\\n    let noSkipFile = true;\\n    for (let i = 0; i < conts.length; i++) {\\n        let fileItem = conts[i];\\n        let cate = fileItem.category;\\n        let desc = formatDate(fileItem.updated_at);\\n        let pic_url = getIcon(fileItem.file_extension, fileItem.type);\\n\\n        if (fileItem.type === \\\"folder\\\") {\\n            let title = (folderStyle === \\\"text_1\\\" ? titleHead.folder : \\\"\\\") + fileItem.name;\\n            items.push({\\n                title: title,\\n                url: 'hiker://page/myaliyun?page=fypage',\\n                col_type: folderStyle,\\n                desc: formatDate(fileItem.updated_at),\\n                pic_url: pic_url,\\n                extra: {\\n                    fileId: fileItem.file_id,\\n                    isBackupDrivid,\\n                    pageTitle: fileItem.name,\\n                    shareInfo,\\n                    noPic: true,\\n                    longClick: [{\\n                        title: \\\"删除文件夹\\\",\\n                        js: $.toString(deleteDFile, fileItem.file_id, isBackupDrivid, fileItem.name)\\n                    }]\\n                }\\n            });\\n        } else if (noSkipFile) {\\n            if (filterType.length > 0 && !filterType.includes(cate)) {\\n                continue;\\n            }\\n            let subtitle, cls, longc = [{\\n                title: \\\"删除文件\\\",\\n                js: $.toString(deleteDFile, fileItem.file_id, isBackupDrivid, fileItem.name)\\n            }];\\n            let title = fileItem.name;\\n            let nameNotExt = fileItem.name.replace('.' + fileItem.file_extension, '');\\n            if (subExts.includes(fileItem.file_extension)) {\\n                longc.push({\\n                    title: \\\"挂载字幕\\\",\\n                    js: $.toString((zm) => {\\n                        storage0.putMyVar('mountzimu', zm);\\n                        return 'toast://挂载完成，当前字幕文件: ' + zm.name + '.' + zm.ext;\\n                    }, {\\n                        ext: fileItem.file_extension,\\n                        file_id: fileItem.file_id,\\n                        name: nameNotExt\\n                    }),\\n                });\\n            }\\n            if (cate === \\\"video\\\") {\\n                if (zimulist.length) {\\n                    subtitle = zimulist.find(v => v.name.includes(nameNotExt));\\n                }\\n                cls = \\\"playlist v\\\" + pageId;\\n            }\\n            if (fileStyle === \\\"text_1\\\") {\\n                desc += \\\"\\\\t\\\\t\\\" + formatSize(fileItem.size);\\n                title = getHead(cate, fileItem.file_extension) + title;\\n            } else if ([\\\"video\\\", \\\"image\\\"].includes(cate)) {\\n                pic_url = getPreviewPic(fileItem) || pic_url;\\n            }\\n            items.push({\\n                title: title,\\n                url: $(\\\"#noPre#\\\").lazyRule((fileId, cate, isBackupDrivid, subtitle) => {\\n                    return $.require(\\\"myalilazy\\\")(fileId, cate, isBackupDrivid, subtitle);\\n                }, fileItem.file_id, cate, isBackupDrivid, subtitle),\\n                desc: desc,\\n                pic_url: pic_url,\\n                extra: {\\n                    id: fileItem.file_id,\\n                    longClick: longc,\\n                    cls: cls,\\n                    //inheritTitle: false,\\n                    pageTitle: fileItem.name\\n                },\\n                col_type: fileStyle\\n            });\\n        }\\n    }\\n    if (conts.length === 0) {\\n        items.push({\\n            col_type: \\\"text_center_1\\\",\\n            url: \\\"hiker://empty\\\",\\n            title: \\\"““””\\\" + \\\"~~~什么都没有了哦~~~\\\".fontcolor(\\\"Gray\\\"),\\n            extra: {\\n                lineVisible: false,\\n            }\\n        });\\n    }\\n}\\n\\nlet items = [];\\ntry {\\n    if (MY_PAGE > 1 && !MY_PARAMS.marker) {\\n        items.push({\\n            col_type: \\\"text_center_1\\\",\\n            url: \\\"hiker://empty\\\",\\n            title: \\\"““””\\\" + \\\"~~~什么都没有了哦~~~\\\".fontcolor(\\\"Gray\\\"),\\n            extra: {\\n                lineVisible: false,\\n            }\\n        });\\n    } else {\\n        load(items);\\n    }\\n} catch (e) {\\n\\n    log(\\\"列表加载失败#\\\\n错误信息>\\\" + e.toString() + \\\"\\\\n错误行>\\\" + e.lineNumber);\\n    items.push({\\n        title: '欧欧，报错了。在刷新几次？或者更换文件夹。',\\n        url: \\\"hiker://empty\\\",\\n        desc: e.toString(),\\n        col_type: 'text_center_1'\\n    });\\n    //throw e;\\n}\\nsaveMyPaCache();\\nsetResult(items);\"},{\"col_type\":\"movie_3\",\"name\":\"我的阿里Lazy\",\"path\":\"myalilazy\",\"rule\":\"const AliAccessApi = $.require(\\\"aliPlayApi\\\");\\nconst {\\n    openTokensFilepath,\\n    aliTokensFilepath\\n} = $.require(\\\"tokenPath\\\");\\n\\nfunction aliM3u8Proxy(fileId, aliToken, isBackupDrivid, title) {\\n    let suffix = \\\"media.m3u8\\\";\\n    let urlname = \\\"url\\\";\\n    let cacheFilePath = \\\"hiker://files/_cache/\\\" + fileId + MY_PARAMS.timestamp[0]+ \\\".m3u8\\\"\\n    //过期获取播放原始链接\\n    function getAliPlayUrl(fileId, line) {\\n        let aliurl;\\n        try {\\n            const AliAccessApi = $.require(\\\"hiker://page/aliPlayApi?rule=\\\" + title);\\n            let aliAccessApi = AliAccessApi.createDefault(null, null, null, aliToken, null, title).setMyDrividType(isBackupDrivid);\\n            let playUrlList =  aliAccessApi.getVideoCloudPreview(fileId) || [];\\n\\n            aliurl = playUrlList.find(v => v.template_id == line)[urlname];\\n        } catch (e) {\\n            log(e.toString());\\n            throw e;\\n        }\\n        return aliurl;\\n    }\\n\\n    function getM3u8Content(playurl) {\\n        //media.m3u8\\n        let home = playurl.split(suffix)[0];\\n        let f = fetch(playurl, {\\n            headers: {\\n                \\\"User-Agent\\\": PC_UA,\\n                \\\"Referer\\\": \\\"https://www.aliyundrive.com/\\\"\\n            },\\n            timeout: 3000\\n        }).split(\\\"\\\\n\\\");\\n        let ff = f.map(it => {\\n            if (it.startsWith(\\\"media-\\\")) {\\n                return \\\"/proxy?url=\\\" + base64Encode(home + it)+\\\"&timestamp=\\\"+MY_PARAMS.timestamp[0];\\n            }\\n            return it;\\n        }).join(\\\"\\\\n\\\");\\n\\n        writeFile(cacheFilePath, ff);\\n        return ff;\\n    }\\n\\n    function updateTsUrl(url) {\\n        let fid = url.split('&f=')[1].split('&')[0];\\n        //log('sfid-' + fid);\\n        let f = fetch(cacheFilePath).split(\\\"\\\\n\\\");\\n        f.forEach(it => {\\n            if (it && it.startsWith('/proxy?url=')) {\\n                let furl = base64Decode(it.replace('/proxy?url=', '').split(\\\"&\\\")[0]);\\n                if (url.substr(url.indexOf('/media-'), url.indexOf('.ts')) == furl.substr(furl.indexOf('/media-'), furl.indexOf('.ts'))) {\\n                    url = furl;\\n                }\\n            }\\n        })\\n        let expires = url.split('x-oss-expires=')[1].split('&')[0];\\n        const lasttime = parseInt(expires) - Date.now() / 1000;\\n        if (lasttime < 60) {\\n            //log('过期更新')\\n            let line = url.split('/media')[0]; //取之前播放的ts段线路\\n            line = line.substring(line.lastIndexOf('/') + 1);\\n            let f = getM3u8Content(getAliPlayUrl(fid, line)).split(\\\"\\\\n\\\");\\n            f.forEach(it => {\\n                if (it && it.startsWith('/proxy?url=')) {\\n                    let furl = base64Decode(it.replace('/proxy?url=', ''));\\n                    if (url.substr(url.indexOf('/media-'), url.indexOf('.ts')) == furl.substr(furl.indexOf('/media-'), furl.indexOf('.ts'))) {\\n                        url = furl;\\n                    }\\n                }\\n            })\\n\\n        }\\n        return url;\\n    }\\n    try {\\n        let url = base64Decode(MY_PARAMS.url[0]);\\n        if (url.includes(\\\".ts\\\")) {\\n            return JSON.stringify({\\n                statusCode: 302,\\n                headers: {\\n                    \\\"Location\\\": updateTsUrl(url),\\n                    \\\"User-Agent\\\": PC_UA,\\n                    \\\"Referer\\\": \\\"https://www.aliyundrive.com/\\\"\\n                }\\n            });\\n        } else {\\n            let templateId = MY_PARAMS.templateId[0];\\n            if(fileExist(cacheFilePath)){\\n                return getM3u8Content(getAliPlayUrl(fileId, templateId));\\n            }else{\\n                return getM3u8Content(url);\\n            }\\n        }\\n    } catch (e) {\\n        log(\\\"#代理播放失败#\\\\n错误信息>\\\" + e.toString() + \\\"\\\\n错误行>\\\" + e.lineNumber);\\n    }\\n}\\nconst transcoding = {\\n    UHD: \\\"4K 超清\\\",\\n    QHD: \\\"2K 超清\\\",\\n    FHD: \\\"1080 全高清\\\",\\n    HD: \\\"720 高清\\\",\\n    SD: \\\"540 标清\\\",\\n    LD: \\\"360 流畅\\\"\\n};\\n\\nfunction getVideo(aliAccessApi, fileId) {\\n\\n    let playUrlList = aliAccessApi.getVideoCloudPreview(fileId) || [];\\n\\n    let serverAddress = startProxyServer($.toString(aliM3u8Proxy, fileId, aliAccessApi.aliToken,aliAccessApi.myDrividType,MY_RULE.title));\\n\\n    if (playUrlList.length > 0) {\\n        let urls = [],\\n            names = [];\\n        playUrlList.forEach((item) => {\\n            urls.push(serverAddress + \\\"?url=\\\" + base64Encode(item.url) + \\\"&timestamp=\\\"+Date.now()+\\\"&templateId=\\\" + item.template_id + \\\"#.m3u8\\\");\\n            names.push(transcoding[item.template_id] ? transcoding[item.template_id] : item.template_height);\\n        });\\n        let heads = new Array(playUrlList.length).fill({\\n            'Referer': 'https://www.aliyundrive.com/'\\n        });\\n        return {\\n            urls: urls,\\n            names: names,\\n            headers: heads,\\n        };\\n    } else {\\n        return {};\\n    }\\n\\n}\\n\\n\\nfunction getPlayFormat(playUrl, title) {\\n    return {\\n        names: [title],\\n        urls: [playUrl + \\\"#isVideo=true##ignoreMusic=true#\\\"],\\n        headers: [{\\n            'Referer': 'https://www.aliyundrive.com/',\\n            \\\"User-Agent\\\": \\\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36\\\"\\n        }]\\n    };\\n}\\n\\n\\n$.exports = function(fileId, cate, isBackupDrivid,  zimu) {\\n    if (!fileExist(aliTokensFilepath)) {\\n        toast(\\\"请先登陆登录账号\\\");\\n        return \\\"hiker://page/login#noRecordHistory##noHistory#?noRefresh=1\\\";\\n    }\\n    let aliToken = $.require(aliTokensFilepath);\\n    let aliAccessApi = AliAccessApi.createDefault(null, null, null, aliToken, null);\\n    aliAccessApi.setMyDrividType(isBackupDrivid);\\n    if (cate === \\\"video\\\") {\\n        let playList = [];\\n        let playMode = getItem(\\\"my_aliyun_playMode\\\", \\\"转码\\\");\\n        try {\\n            \\n            if (playMode === \\\"转码\\\") {\\n                playList = getVideo(aliAccessApi, fileId) || {};\\n            } else if (playMode === \\\"原画\\\") {\\n                playList = getPlayFormat(aliAccessApi.openCloudFileToDownUrl(fileId), playMode);\\n            }else if (playMode === \\\"极速原画\\\") {\\n                playList = getPlayFormat(aliAccessApi.openCloudFileToDownUrl(fileId)+ \\\"#fastPlayMode##threads=\\\" + getItem(\\\"speedThread\\\", \\\"10\\\") + \\\"#\\\", playMode);\\n            }\\n        } catch (e) {\\n            log(\\\"#\\\" + playMode + \\\"播放失败#\\\\n错误信息>\\\" + e.toString() + \\\"\\\\n错误行>\\\" + e.lineNumber);\\n            if (e.code === \\\"InvalidParameter.RefreshToken\\\") {\\n                toast(\\\"登陆过期，请重新登陆\\\");\\n                return \\\"hiker://page/login#noRecordHistory##noHistory#?noRefresh=1\\\";\\n            } else if (e.code === \\\"QuotaExhausted.Drive\\\") {\\n                return \\\"toast://网盘空间不足，无法播放请清理。\\\";\\n            }\\n            return \\\"toast://播放失败，错误信息已打印。\\\\n请查看日志(LOG)\\\";\\n        }\\n        let mountsub = storage0.getMyVar('mountzimu', {});\\n        if (Object.keys(mountsub).length > 0) {\\n            zimu = mountsub;\\n        }\\n        let subtitle;\\n        if (Object.keys(zimu || {}).length > 0 && playList && playList.urls && playList.urls.length > 0) {\\n            java.lang.Thread.sleep(100);\\n            try {\\n                var zmurl = aliAccessApi.openCloudFileToDownUrl(zimu.file_id);\\n                let path = 'hiker://files/cache/云盘君/sub.' + zimu.ext;\\n                downloadFile(zmurl, path, {\\n                    'Referer': 'https://www.aliyundrive.com/'\\n                });\\n                subtitle = getPath(path);\\n            } catch (e) {\\n                toast(\\\"字幕加载失败\\\");\\n                log(e.message);\\n            }\\n        }\\n        let dmlist = storage0.getMyVar(\\\"dmlist\\\", []);\\n        let dmlist_cache = getMyVar(\\\"dmlist_cache\\\", \\\"\\\");\\n        if (dmlist_cache && dmlist_cache.startsWith(fileId + \\\"#\\\")) {\\n            playList.danmu = dmlist_cache.replace(fileId + \\\"#\\\", \\\"\\\");\\n        } else if (dmlist.length > 0) {\\n            playList.danmu = \\\"hiker://files/cache/danmu/\\\" + dmlist.splice(0, 1)[0];\\n            putMyVar(\\\"dmlist_cache\\\", fileId + \\\"#\\\" + playList.danmu);\\n            storage0.putMyVar(\\\"dmlist\\\", dmlist);\\n            if (dmlist.length === 0) {\\n                toast(\\\"弹幕列表已全部挂载\\\");\\n            }\\n        } else {\\n            playList.danmu = getVar(\\\"dm_share\\\", \\\"\\\");\\n        }\\n        playList.subtitle = subtitle;\\n        return JSON.stringify(playList);\\n    }\\n\\n    let url = aliAccessApi.openCloudFileToDownUrl(fileId);\\n\\n    if (cate === \\\"image\\\") {\\n        return url + \\\"#.jpg\\\";\\n    } else if (cate === \\\"audio\\\") {\\n        return url + \\\"#isMusic=true#\\\";\\n    } else {\\n        return \\\"download://\\\" + url;\\n    }\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"openApi:tv\",\"path\":\"openApi_tv\",\"rule\":\"js:\\nfunction OpenApi($this, postApi) {\\n    this.$this = $this;\\n}\\n\\n// 生成 unique_id\\nfunction generateUUID() {\\n    return 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'.replace(/[x]/g, function() {\\n        return (Math.random() * 16 | 0).toString(16);\\n    });\\n}\\n\\n\\n// 生成 wifimac\\nfunction generateWifiMac() {\\n    const min = 10 ** 11;\\n    const max = 10 ** 12 - 1;\\n    return Math.floor(Math.random() * (max - min + 1)) + min;\\n}\\nfunction h(charArray, modifier) {\\n    // 去除重复字符\\n    var uniqueChars = [];\\n    for (var i = 0; i < charArray.length; i++) {\\n        if (uniqueChars.indexOf(charArray[i]) === -1) {\\n            uniqueChars.push(charArray[i]);\\n        }\\n    }\\n    \\n    var numericModifier = parseInt(modifier.slice(7));\\n    var transformedString = '';\\n    \\n    for (var j = 0; j < uniqueChars.length; j++) {\\n        var c = uniqueChars[j];\\n        var code = Math.abs(c.charCodeAt(0) - (numericModifier % 127) - 1);\\n        transformedString += String.fromCharCode(code < 33 ? code + 33 : code);\\n    }\\n    \\n    return transformedString;\\n}\\n//eval(getCryptoJS());\\n/*\\nconst CryptoUtil = $.require(\\\"hiker://assets/crypto-java.js\\\");\\n\\n        let key = CryptoUtil.Data.parseUTF8(\\\"^(i/x>>5(ebyhumz*i1wkpk^orIs^Na.\\\");\\n        let niv = CryptoUtil.Data.parseHex(iv);\\n        let encrypted0 = CryptoUtil.AES.decrypt(ciphertext, key, {\\n            mode: \\\"AES/CBC/PKCS7Padding\\\",\\n            iv: niv\\n        });\\n\\n        return JSON.parse(encrypted0.toString());\\n        */\\nfunction decrypt(ciphertext, iv, t, unique_id, wifimac) {\\n    try {\\n        var key = generateKey(t, unique_id, wifimac);\\n        /*var cipherParams = CryptoJS.lib.CipherParams.create({\\n            ciphertext: CryptoJS.enc.Base64.parse(ciphertext)\\n        });\\n\\n        var decrypted = CryptoJS.AES.decrypt(cipherParams, CryptoJS.enc.Utf8.parse(key), {\\n            iv: CryptoJS.enc.Hex.parse(iv),\\n            mode: CryptoJS.mode.CBC,\\n            padding: CryptoJS.pad.Pkcs7\\n        });\\n\\n        var dec = decrypted.toString(CryptoJS.enc.Utf8);*/\\n        const CryptoUtil = $.require(\\\"hiker://assets/crypto-java.js\\\");\\n        let keydata = CryptoUtil.Data.parseUTF8(key);\\n        let ivdata = CryptoUtil.Data.parseHex(iv);\\n        let encrypted0 = CryptoUtil.AES.decrypt(ciphertext, keydata, {\\n            mode: \\\"AES/CBC/PKCS7Padding\\\",\\n            iv: ivdata\\n        });\\n        return encrypted0.toString();\\n    } catch (error) {\\n        log(\\\"Decryption failed \\\"+error.toString());\\n        throw error;\\n    }\\n}\\n\\nfunction getParams(t, unique_id, wifimac) {\\n    let params = {\\n        'akv': '2.8.1496',\\n        'apv': '1.3.6',\\n        'b': 'OnePlus',\\n        'd': unique_id,\\n        'm': 'PJX110',\\n        'mac': '',\\n        'n': 'PJX110',\\n        't': String(t),\\n        'wifiMac': String(wifimac),\\n    };\\n    return params;\\n}\\nfunction generateKey(t, unique_id, wifimac) {\\n    var params = getParams(t, unique_id, wifimac);\\n    var sortedKeys = Object.keys(params).sort();\\n    \\n    var concatenatedParams = '';\\n    for (var i = 0; i < sortedKeys.length; i++) {\\n        var key = sortedKeys[i];\\n        if (key !== 't') {\\n            concatenatedParams += params[key];\\n        }\\n    }\\n\\n    var hashedKey = h(concatenatedParams.split(''), t);\\n    return md5(hashedKey);\\n}\\nObject.assign(OpenApi.prototype, {\\n    getOpenTokenCode() {\\n        function get_qrcode_code(sid) {\\n            let res = fetch(\\\"https://openapi.aliyundrive.com/oauth/qrcode/\\\" + sid + \\\"/status\\\");\\n            return JSON.parse(res).authCode;\\n        }\\n\\n        let res = post(\\\"http://api.extscreen.com/aliyundrive/qrcode\\\", {\\n            body: JSON.stringify({\\n                \\\"scopes\\\": 'user:base,file:all:read,file:all:write',\\n                \\\"width\\\": 500,\\n                \\\"height\\\": 500,\\n            }),\\n        });\\n        let data = JSON.parse(res).data;\\n        let sid = data[\\\"sid\\\"];\\n        let body = {\\n            \\\"authorize\\\": 1,\\n            \\\"scope\\\": \\\"user:base,file:all:read,file:all:write\\\",\\n            \\\"drives\\\": [\\\"backup\\\", \\\"resource\\\"],\\n            \\\"scopes\\\": [\\\"user:base\\\", \\\"file:all:read\\\", \\\"file:all:write\\\"],\\n            \\\"sid\\\": sid\\n        }\\n        let headers = {\\n            'authorization': this.$this.reaccessTk\\n        };\\n        let res2 = this.$this.postApi(\\\"https://open.aliyundrive.com/oauth/users/qrcode/authorize?sid=\\\" + sid).body(body).headers(headers).errorWithRetry((e, _, http) => {\\n            this.$this.trySolve(e);\\n            http.mergeHeadAndBody({\\n                headers: {\\n                    'authorization': this.$this.reaccessTk,\\n                }\\n            });\\n            return true;\\n        }).start(true);\\n        return get_qrcode_code(sid);\\n    },\\n    getToken(body) {\\n\\n        let timestamp = String(JSON.parse(fetch(\\\"http://api.extscreen.com/timestamp\\\")).data.timestamp);\\n        let unique_id = generateUUID();\\n        let wifimac = generateWifiMac().toString();\\n        let res = post(\\\"http://api.extscreen.com/aliyundrive/v3/token\\\", {\\n            body: JSON.stringify(body),\\n            headers: Object.assign({\\n\\n                \\\"token\\\": \\\"6733b42e28cdba32\\\",\\n                'User-Agent': 'Mozilla/5.0 (Linux; U; Android 9; zh-cn; SM-S908E Build/TP1A.220624.014) AppleWebKit/533.1 (KHTML, like Gecko) Mobile Safari/533.1',\\n                //'Host': 'api.extscreen.com'\\n            }, getParams(timestamp, unique_id, wifimac))\\n        });\\n        let data = JSON.parse(res);\\n        let {\\n            iv,\\n            ciphertext\\n        } = data.data;\\n        return JSON.parse(decrypt(ciphertext, iv, timestamp, unique_id, wifimac));\\n    },\\n    getOpenToken() {\\n        return this.getToken({\\n            code: this.getOpenTokenCode(),\\n            grant_type: \\\"authorization_code\\\"\\n        });\\n    },\\n    refreshOpenToken() {\\n        return this.getToken({\\n            grant_type: \\\"refresh_token\\\",\\n            refresh_token: this.$this.openTokens.RefreshTokenOpen,\\n        });\\n    }\\n});\\n$.exports = OpenApi;\"}]","proxy":"","icon":"https://img.alicdn.com/imgextra/i2/O1CN01DOYcs71v3B6bOemVM_!!6000000006116-2-tps-512-512.png"},{"last_chapter_rule":"","pageList":[{"col_type":"movie_3","name":"配置参数","path":"config","rule":"js:\n$.exports.version = 7;"},{"col_type":"movie_3","name":"云口令导入","path":"import","rule":"js:\nfunction cloudimport() {\n    let JYCode = fetch(\"hiker://home@聚影\");\n    if (JYCode) {\n        writeFile(\"hiker://files/_cache/juying2/cloudimport.txt\", input);\n        return \"hiker://page/importConfirm#fullTheme##noRecordHistory##noHistory#?rule=聚影\"\n    } else {\n        return \"toast://没有聚影小程序，要是新版哦\";\n    }\n}\n$.exports = cloudimport();"},{"col_type":"movie_3","name":"代理管理","path":"ghproxy","rule":"js:\nlet cfgfile = \"hiker://files/rules/Src/Juying2/config.json\";\nlet Juconfig = {};\nlet Jucfg = fetch(cfgfile);\nif (Jucfg != \"\") {\n    eval(\"Juconfig=\" + Jucfg + \";\");\n}\nlet proxylist = Juconfig['ghproxy'] || [];\n\nfunction getproxy() {\n    return proxylist.filter(v => !v.stop).map(it => it.url);\n}\n\nfunction setproxy(input, zt) {\n    input = input.trim();\n    if (input) {\n        let index = proxylist.findIndex(it => it.url == input);\n        if (index == -1) {\n            proxylist.push({\n                url: input\n            });\n        } else if (zt == 1) {\n            delete proxylist[index].stop;\n        } else if (zt == 0) {\n            proxylist[index].stop = 1;\n        } else if (zt == 2) {\n            proxylist = proxylist.filter(v => v.url != input);\n        }\n        Juconfig['ghproxy'] = proxylist;\n        writeFile(cfgfile, JSON.stringify(Juconfig));\n    }\n}\n\nfunction proxyPage() {\n    setPageTitle('github代理管理页');\n    let d = [];\n    d.push({\n        title: '需要github代理来获取代码，或指定代码仓',\n        desc: '有代理：' + proxylist.length + '，有效的：' + getproxy().length,\n        url: $(getItem('依赖', ''), \"指定聚影代码仓地址\").input(() => {\n            setItem('依赖', input);\n            refreshPage();\n            return \"toast://已设置\"\n        }),\n        col_type: \"text_1\"\n    });\n    d.push({\n        title: '添加',\n        col_type: 'input',\n        desc: '请输入代理地址',\n        url: $.toString(() => {\n            input = input.trim();\n            if(input && input.includes(\"/https\")){\n                input = input.split(\"/http\")[0] + \"/\";\n            }\n            if (!input || !/^http/.test(input) || input.includes(\"raw.githubusercontent.com\") || !input.endsWith(\"/\")) {\n                return \"toast://输入错误，请输入正确的github加速代理\";\n            }\n            $.require('ghproxy').setproxy(input);\n            refreshPage();\n            return \"hiker://empty\";\n        }),\n        extra: {\n            titleVisible: true\n        }\n    });\n    d.push({\n        col_type: \"line\"\n    });\n    proxylist.reverse();\n    proxylist.forEach(it => {\n        d.push({\n            title: it.stop ? '‘‘’’<font color=\"#f20c00\">' + it.url + '</font>' : it.url,\n            url: $([it.stop ? \"启用\" : \"停用\", \"删除\", \"复制\"], 1, \"\").select((url) => {\n                if (input == \"启用\") {\n                    $.require('ghproxy').setproxy(url, 1);\n                } else if (input == \"停用\") {\n                    $.require('ghproxy').setproxy(url, 0);\n                } else if (input == \"删除\") {\n                    $.require('ghproxy').setproxy(url, 2);\n                } else if (input == \"复制\") {\n                    copy(url);\n                    return \"hiker://empty\";\n                }\n                refreshPage(false);\n                return \"hiker://empty\";\n            }, it.url),\n            col_type: \"text_1\"\n        });\n    })\n    setResult(d);\n}\n$.exports = {\n    getproxy: getproxy,\n    setproxy: setproxy,\n    proxyPage: proxyPage\n};"},{"col_type":"movie_3","name":"导入确认页","path":"importConfirm","rule":"js:\neval(JSON.parse(fetch(\"hiker://home@聚影\")).preRule);\nif (!config.依赖) {\n    initConfig({\n        依赖: \"https://gitcode.net/src48597962/juying/-/raw/master/SrcJuying.js\"\n    });\n}\nlet extfile = getParam(\"extfile\",\"\");\nrequire(config.依赖.match(/http(s)?:\\/\\/.*\\//)[0] + 'SrcJySet.js');\nimportConfirm(extfile);"},{"col_type":"movie_3","name":"intent#js#","path":"intent","rule":"js:\nfunction jsimport() {\n    return \"hiker://page/importConfirm#fullTheme##noRecordHistory##noHistory#?extfile=\" + input;\n}\n$.exports = jsimport();"}],"title":"聚影","author":"","version":7,"type":"video","url":"hiker://empty","col_type":"movie_3","class_name":"","class_url":"","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:\nif(config.依赖){\n    try{\n        require(config.依赖);\n        yiji();\n    }catch(e){\n        log(e.message);\n        toast(e.message);\n        confirm({\n            title:'依赖地址加载失败', \n            content:'是否重新获取依赖？', \n            confirm:$.toString(()=>{\n                clearItem('依赖');\n                initConfig({依赖:''});\n                refreshPage(false);\n                toast('偿试刷新依赖地址');\n            }), \n            cancel:$.toString(()=>{\n                toast('重进或换网再试一次');\n            })\n        })\n    }\n}else{\n    $.require('ghproxy').proxyPage();\n}","searchFind":"js:\nrequire(config.依赖);\nsousuo()","search_url":"hiker://empty##**##fypage","group":"①推荐","detail_col_type":"movie_3","detail_find_rule":"","sdetail_col_type":"movie_1","sdetail_find_rule":"*","ua":"pc","preRule":"/*<$>\n@include start\nhttp://hiker.nokia.press/hikerule/rulelist.json?id=6916&auth=1d35e8f0-22e8-5270-a9d1-826f53f177ad\n@include end\n<$>*/\n\nif (!config.依赖) {\n    let srcHome = getItem('依赖', '');\n    if (!srcHome) {\n        //远程依赖索引文件代理地址列表\n        let ghproxy = $.require('ghproxy').getproxy();\n        if(ghproxy.length==0){\n            ghproxy.push(\"\");\n        }\n        for (let i = 0; i < ghproxy.length; i++) {\n            try { //远程依赖索引\n                require(ghproxy[i] + 'https://raw.githubusercontent.com/src48597962/hk/master/JyRequire.js', {\n                    timeout: 3000\n                });\n                if (relyfile) {\n                    srcHome = relyfile.includes('raw.github') ? ghproxy[i] + relyfile : relyfile;\n                    setItem('依赖', srcHome);\n                    break;\n                }\n            } catch (e) {\n                $.require('ghproxy').setproxy(ghproxy[i], 0);\n                log(e.message);\n            }\n        }\n    }\n    initConfig({\n        依赖: srcHome\n    });\n}\n//by.帅√`人才","pages":"[{\"col_type\":\"movie_3\",\"name\":\"配置参数\",\"path\":\"config\",\"rule\":\"js:\\n$.exports.version = 7;\"},{\"col_type\":\"movie_3\",\"name\":\"云口令导入\",\"path\":\"import\",\"rule\":\"js:\\nfunction cloudimport() {\\n    let JYCode = fetch(\\\"hiker://home@聚影\\\");\\n    if (JYCode) {\\n        writeFile(\\\"hiker://files/_cache/juying2/cloudimport.txt\\\", input);\\n        return \\\"hiker://page/importConfirm#fullTheme##noRecordHistory##noHistory#?rule=聚影\\\"\\n    } else {\\n        return \\\"toast://没有聚影小程序，要是新版哦\\\";\\n    }\\n}\\n$.exports = cloudimport();\"},{\"col_type\":\"movie_3\",\"name\":\"代理管理\",\"path\":\"ghproxy\",\"rule\":\"js:\\nlet cfgfile = \\\"hiker://files/rules/Src/Juying2/config.json\\\";\\nlet Juconfig = {};\\nlet Jucfg = fetch(cfgfile);\\nif (Jucfg != \\\"\\\") {\\n    eval(\\\"Juconfig=\\\" + Jucfg + \\\";\\\");\\n}\\nlet proxylist = Juconfig['ghproxy'] || [];\\n\\nfunction getproxy() {\\n    return proxylist.filter(v => !v.stop).map(it => it.url);\\n}\\n\\nfunction setproxy(input, zt) {\\n    input = input.trim();\\n    if (input) {\\n        let index = proxylist.findIndex(it => it.url == input);\\n        if (index == -1) {\\n            proxylist.push({\\n                url: input\\n            });\\n        } else if (zt == 1) {\\n            delete proxylist[index].stop;\\n        } else if (zt == 0) {\\n            proxylist[index].stop = 1;\\n        } else if (zt == 2) {\\n            proxylist = proxylist.filter(v => v.url != input);\\n        }\\n        Juconfig['ghproxy'] = proxylist;\\n        writeFile(cfgfile, JSON.stringify(Juconfig));\\n    }\\n}\\n\\nfunction proxyPage() {\\n    setPageTitle('github代理管理页');\\n    let d = [];\\n    d.push({\\n        title: '需要github代理来获取代码，或指定代码仓',\\n        desc: '有代理：' + proxylist.length + '，有效的：' + getproxy().length,\\n        url: $(getItem('依赖', ''), \\\"指定聚影代码仓地址\\\").input(() => {\\n            setItem('依赖', input);\\n            refreshPage();\\n            return \\\"toast://已设置\\\"\\n        }),\\n        col_type: \\\"text_1\\\"\\n    });\\n    d.push({\\n        title: '添加',\\n        col_type: 'input',\\n        desc: '请输入代理地址',\\n        url: $.toString(() => {\\n            input = input.trim();\\n            if(input && input.includes(\\\"/https\\\")){\\n                input = input.split(\\\"/http\\\")[0] + \\\"/\\\";\\n            }\\n            if (!input || !/^http/.test(input) || input.includes(\\\"raw.githubusercontent.com\\\") || !input.endsWith(\\\"/\\\")) {\\n                return \\\"toast://输入错误，请输入正确的github加速代理\\\";\\n            }\\n            $.require('ghproxy').setproxy(input);\\n            refreshPage();\\n            return \\\"hiker://empty\\\";\\n        }),\\n        extra: {\\n            titleVisible: true\\n        }\\n    });\\n    d.push({\\n        col_type: \\\"line\\\"\\n    });\\n    proxylist.reverse();\\n    proxylist.forEach(it => {\\n        d.push({\\n            title: it.stop ? '‘‘’’<font color=\\\"#f20c00\\\">' + it.url + '</font>' : it.url,\\n            url: $([it.stop ? \\\"启用\\\" : \\\"停用\\\", \\\"删除\\\", \\\"复制\\\"], 1, \\\"\\\").select((url) => {\\n                if (input == \\\"启用\\\") {\\n                    $.require('ghproxy').setproxy(url, 1);\\n                } else if (input == \\\"停用\\\") {\\n                    $.require('ghproxy').setproxy(url, 0);\\n                } else if (input == \\\"删除\\\") {\\n                    $.require('ghproxy').setproxy(url, 2);\\n                } else if (input == \\\"复制\\\") {\\n                    copy(url);\\n                    return \\\"hiker://empty\\\";\\n                }\\n                refreshPage(false);\\n                return \\\"hiker://empty\\\";\\n            }, it.url),\\n            col_type: \\\"text_1\\\"\\n        });\\n    })\\n    setResult(d);\\n}\\n$.exports = {\\n    getproxy: getproxy,\\n    setproxy: setproxy,\\n    proxyPage: proxyPage\\n};\"},{\"col_type\":\"movie_3\",\"name\":\"导入确认页\",\"path\":\"importConfirm\",\"rule\":\"js:\\neval(JSON.parse(fetch(\\\"hiker://home@聚影\\\")).preRule);\\nif (!config.依赖) {\\n    initConfig({\\n        依赖: \\\"https://gitcode.net/src48597962/juying/-/raw/master/SrcJuying.js\\\"\\n    });\\n}\\nlet extfile = getParam(\\\"extfile\\\",\\\"\\\");\\nrequire(config.依赖.match(/http(s)?:\\\\/\\\\/.*\\\\//)[0] + 'SrcJySet.js');\\nimportConfirm(extfile);\"},{\"col_type\":\"movie_3\",\"name\":\"intent#js#\",\"path\":\"intent\",\"rule\":\"js:\\nfunction jsimport() {\\n    return \\\"hiker://page/importConfirm#fullTheme##noRecordHistory##noHistory#?extfile=\\\" + input;\\n}\\n$.exports = jsimport();\"}]","proxy":"","icon":"hiker://files/cache/src/聚影.png"},{"last_chapter_rule":"","pageList":[{"col_type":"movie_3","name":"一级轮播","path":"lunbo","rule":"js:\nfunction banner(title, start, arr, data, cfg) {\n    //log(data)\n    let id = title + 'lunbo';\n    var rnum = Math.floor(Math.random() * data.length);\n    var item = data[rnum]; //log(item)\n    putMyVar('rnum', rnum);\n    let time = 5000;\n    let col_type = 'pic_1_card';\n    let color = \"white\";\n    let desc = '';\n    if (cfg != undefined) {\n        time = cfg.time ? cfg.time : time;\n        col_type = cfg.col_type ? cfg.col_type : col_type;\n        desc = cfg.desc ? cfg.desc : desc;\n    }\n\n    arr.push({\n        col_type: col_type,\n        img: item.img,\n        desc: desc,\n        title: item.title,\n        url: item.url,\n        extra: {\n            //id: id+'bar',\n            vid: item.desc.split('#')[0],\n            cid: item.desc.split('#')[1],\n        }\n    })\n\n    if (start == false || getMyVar('benstart', 'true') == 'false') {\n        unRegisterTask(id)\n        return\n    }\n    \n    //log(data)\n\n    let obj = {\n        data: data,\n    };\n\n    registerTask(id, time, $.toString((obj,id) => {\n        var data = obj.data;\n        var rum = getMyVar('rnum');\n\n        var i = Number(getMyVar('banneri', '0'));\n        if (rum != '') {\n            i = Number(rum) + 1\n            clearMyVar('rnum')\n        } else {\n            i = i + 1;\n        }\n        //log(i)\n        //log(data.length)\n\n        if (i > data.length - 1) {\n            i = 0\n        }\n        var item = data[i];\n        //log(item)\n        try {\n            updateItem(id+'bar', {\n                title: item.title,\n                img: item.img,\n                url: item.url,\n                extra: {\n                    //name: item.title.replace(/<[^>]+>/g, ''),\n                    //sname: item.extra.sname,\n                    //stype: item.extra.stype,\n                    //surl: item.url,\n                    //img:item.img,\n                    //title: item.title.replace(/<[^>]+>/g, ''),\n                    vid: item.desc.split('#')[0],\n                    cid: item.desc.split('#')[1],\n                }\n            })\n        } catch (e) {\n            log(e.message)\n            unRegisterTask(id)\n        }\n        putMyVar('banneri', i);\n\n    }, obj,id))\n}"},{"col_type":"movie_3","name":"二级","path":"erji","rule":"js:\nvar d = [];\neval(JSON.parse(request('hiker://page/hanshu')).rule)\nvar html2 = gethtml('http://43.142.232.217:8090/app/video/detail?id=' + (MY_PARAMS.id || MY_PARAMS.vid), 'GET'); //log(html2)\nvar data = JSON.parse(html2).data; //log(data)\nvar Data = transformData(extractData(data))\nvar 简介 = data.content\nsetPageTitle(Data.titles[0])\nvar 标题 = '““””' + Data.titles[0] + '\\n' + (Data.titles.slice(1, 3).join('\\n')).small();\nvar 描述 = '““””' + (Data.descs.slice(0, 3).join('\\n')).small().fontcolor('#806d9e');\nd.push({\n    title: 标题,\n    desc: 描述,\n    img: data.pic,\n    url: data.pic,\n    col_type: \"movie_1_vertical_pic_blur\",\n    extra: {\n        gradient: true\n    }\n})\nsetDesc(d, 简介)\ndata.parts.forEach((data2) => {\n    data2.part.forEach((partTitle) => {\n        d.push({\n            title: partTitle, // 直接使用 part 数组中的标题\n            url: $(partTitle).lazyRule((data) => {\n                //log(data.id)\n                //log(data.parts[0].play)\n                eval(JSON.parse(request('hiker://page/hanshu')).rule)\n                var timestamp = new Date().getTime() / 1000; //log(timestamp)\n                var t = timestamp.toString().split('.')[0]; //log(t)\n                var html = gethtml('http://43.142.232.217:8090/app/video/play?id=' + data.id + '&play=' + data.parts[0].play + '&part=' + input, 'POST'); //log(html)\n                \n                var html2 = JSON.parse(html).data[0]; //log(html2)\n                var jx = html2.parse.match(/http.*?url=/)[0]; //log(jx)\n                //var player = html2.extension.player; //log(player)\n                var source = html2.extension.url; //log(source)\n                var hash = md5(source + 'v50gjcy' + t); //log(hash)\n                var modified_source = source + '$' + t + '$' + hash; //log(modified_source)\n\n                var headers = {\n                    'x-version': '2020-09-17',\n                    'user-agent': 'Dart/2.17 (dart:io)',\n                    'appid': '4150439554430529',\n                    'ts': '1724923917970',\n                    //'accept-encoding': 'gzip',\n                    'authentication': 'NHHqFspFXhfOBgNVq/MHfjSa5zJV/hnUNcFgUa+A75fnUGKweg5Mjqc3zNiy+Ao0ASFcsMtdSNfOjTvrb/4+kbiie1G8CnEkTLjhoyfQf7YwtNZgFSxcDJneJwQVbPCRnaVIEUTFnFeA+CkMshMRFQ\\u003d\\u003d',\n                    'host': '43.142.232.217:8090',\n                    'x-token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVVUlEIjoiY2E3Njc0YTUtODliYS00NjNkLWE2OGUtMzNmZmFmMmYyODU3IiwiQnVmZmVyVGltZSI6ODY0MDAwMDAwMDAwMDAsImV4cCI6MTcyNTYyMzA1NCwibmJmIjoxNzI1MDE4MjU0fQ.2Zau9hdc88_ziP6jMx7geEN64JL0X7c2ANW_CMIui-U'\n                };\n                var html3 = fetch(jx + modified_source, {\n                    headers: headers,\n                    method: 'GET'\n                }); \n               \n                var play = JSON.parse(html3).url\n                $.require(\"danmu\").load(data.id, data.parts[0].play, input, play, headers);\n                \n                return JSON.stringify({\n                    urls: [play],\n                    danmu: 'hiker://files/cache/danmu/Jong_danmu.xml'\n                }) + '#isVideo=true#'\n            }, data),\n            col_type: 'text_4',\n        });\n    });\n});\n\nvar html2 = gethtml('http://43.142.232.217:8090/app/video/list?channel=' + MY_PARAMS.cid + '&sort=addtime&type=&area=&year=&limit=6&page=1', 'GET'); //log(html2)\nvar list = JSON.parse(html2).data.items; //log(list)\nif (MY_PARAMS.cid) {\n    d.push({\n        title: \"热门推荐\",\n        url: \"hiker://empty\",\n        img: \"https://hikerfans.com/tubiao/more/84.png\",\n        col_type: \"avatar\"\n    })\n    \n    list.forEach(data => {\n        d.push({\n            title: data.name,\n            desc: data.continu,\n            img: data.pic + '@Referer=' + data.pic.match(/(http.*\\/\\/.*)\\//)[1],\n            url: `hiker://page/erji#immersiveTheme#`,\n            col_type: 'movie_3',\n            extra: {\n                id: data.id,\n                cid: data.cid\n            }\n        })\n    })\n}\n\nsetResult(d)"},{"col_type":"movie_3","name":"函数","path":"hanshu","rule":"eval(getCryptoJS())\n\n//反转函数\nfunction reverseIV(iv) {\n  // 将输入字符串转换为字符数组\n  const ivArray = iv.split('');\n  \n  // 反转字符数组\n  ivArray.reverse();\n  \n  // 将反转后的字符数组连接回字符串\n  const reversedIV = ivArray.join('');\n  \n  return reversedIV;\n}\n\n//响应解密\nfunction Decrypt(word,key,iv) {\n    \n    let decrypt = CryptoJS.AES.decrypt(word, CryptoJS.enc.Utf8.parse(key), {\n        iv: CryptoJS.enc.Utf8.parse(iv),\n        mode: CryptoJS.mode.CBC, // 使用CBC模式\n        padding: CryptoJS.pad.Pkcs7 // 使用PKCS#7填充\n    });\n    \n    // 将解密后的数据转换为原始文本\n    let decryptedStr = decrypt.toString(CryptoJS.enc.Utf8);\n    \n    // 返回解密后的文本\n    return decryptedStr;\n}\n\n//日期\nfunction getUpcomingWeekDates() {\n    // 创建一个空数组来存储日期\n    let dates = [];\n    // 循环遍历未来7天（从今天开始）\n    for (let i = 0; i < 7; i++) {\n        // 获取当前日期，并加上i天\n        let date = new Date();\n        date.setDate(date.getDate() + i);\n        // 获取年、月、日\n        let year = date.getFullYear();\n        let month = (date.getMonth() + 1).toString().padStart(2, '0'); // 月份从0开始，所以加1\n        let day = date.getDate().toString().padStart(2, '0'); // 确保日期是两位数\n        // 组合年月日，并添加到数组中\n        let formattedDate = year + '-' + month + '-' + day;\n        dates.push(formattedDate); // 将日期添加到数组中\n    }\n    return dates; // 返回日期数组\n}\n\n//请求函数\nfunction gethtml(url,method){\nvar html = fetch(url,{\n    headers: {\n    'x-version': '2020-09-17',\n    'user-agent': 'Dart/2.17 (dart:io)',\n    'appid': '4150439554430529',\n    'ts': '1724923917970',\n    //'accept-encoding': 'gzip',\n    'authentication': 'NHHqFspFXhfOBgNVq/MHfjSa5zJV/hnUNcFgUa+A75fnUGKweg5Mjqc3zNiy+Ao0ASFcsMtdSNfOjTvrb/4+kbiie1G8CnEkTLjhoyfQf7YwtNZgFSxcDJneJwQVbPCRnaVIEUTFnFeA+CkMshMRFQ\\u003d\\u003d',\n    'host': '43.142.232.217:8090',\n    'x-token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVVUlEIjoiZDlmZjUzODMtZTBkOS00NDcyLTkzZGQtM2ZkOTk1YzRkYTAyIiwiQnVmZmVyVGltZSI6ODY0MDAwMDAwMDAwMDAsImV4cCI6MTcyNjIzMTc0OSwibmJmIjoxNzI1NjI2OTQ5fQ.nGJgRy8rReJkWTjbZS4jkqX3c--wGe1deKt7RvdCUcU'\n  },\n    method: 'GET'\n}); //log(html)\nvar rsakey = 'MIIEowIBAAKCAQEAxm2Kzu9L/FNX42em9Xo73JXtJCtrhleKN9jqclpK6/Iyah/TUjH5RCNItWiTKHg6LcsGxZs9+4fP6uU8oO5Qp1akaOrJTg3QTQQFyRxDrv+LN/nL6/MpSf3SnihyVPQWwlkj3yHZWrVC9HI3q2JmzGV/kzwnpVIj2as8zl4cO7OZr0F9bR+G4jblqLPmB/x/BBOGrWWCxn+YI2RVHw23dev9jql284eN/KV4tlDlbtoJGy4+Cb7nEV/THvRVZYbHAp+fMY0+NyqyslLX/btJqT8eSH6Hb8c+BSC77Dry4G8/m/wUYPdvXiL3cVhZmEaqjs8rUafGyQmW3mrflAbIJwIDAQABAoIBAQCbRhUdIbzAUyevV+kapvA5CUlsyF133wDV+vRbT7TZNcmlqgnfhCOe4k1/R7oALTS5qOo/r9+s+PYGxiPPey26BN7bCv9ECSM7YS511ZxRUL9MqjidBscEk49BHD17pRY6Ny8O6JoBlV4zkz1k67etsq9GNAiCIejT6F/IzXQicmO5MaJWCjBNSP+IPTvd5NW3DUNlt2NcCBvO2sCgSq2Z4B0IdNWeSvd4ZmA2qSkqk60A8glNR4HdRTG9VWR0fUOd/qzpN1vjBUKMaIHeUX50NCRdK8EGqrVOCq4uUgBRj7bjt0DOb9ck4vYxgBdkyK4HMYsAGdirYKxdDkseicqhAoGBAOZ750Vky38kq3MucAE/uaFpaDUSeOKDy03fumM6TLlkeAxnTQZWNBDzlrqNgQPMLu+tmm+ZsEN5buF8C2oKc97+Rz21rvrOufr4sX2PqHfj/kerYGq/NzX1jpRbqsmcs+3JxveeozHuXBbOFpd8teCGZPFPHREFDe4sZFtFmwX1AoGBANxlJNlKIz0TVmPgGCUZ4j8BRBiLPHMeFkUoam6Djou2iJLYey3ZNHhyMiRER7Smia0fY/QjqJIeSRWQlZExu6s9ijl4VSmoh4hLanOxxAE+gFnuhgK4XwMV0hvHbqSaupQdfkULZ+t3rGKzt+t+0ob7xx+LjYWEwpLsKCQKRKgrAoGADLPvfyea/5rpyCNbEPaOKJNCpwopl3JkFhqqjyV7bQxYgXaADEVcAUMrn4SFA8yRGaybwmLaEB31OoA3sNR6pmOlUYVd63zRSz/BqIXuZw0tyo1rdvaq+FJcVVjoBMyaLhTc3nDj1bCpaqhZHmhFLea6UYJmu7VnmyTfMxiW/rECgYAh4MJLTGQiTUioTZgoi9QFT1KCW1TNdUCDHPVPS5Wr0EEqIXC92XeBVDx06rIDCN586ChbLOgKnfEqCXGUQgrRBcKrlt2wa6F5x+3zHs48Srk8Gbgrzt97/+yuLHfLgaVQg0AXqOsufNTYzztkTbha23T+WltEvOWT5A0/jPyExQKBgCGbq62piyIEeMNoP/SoLvh4hTq/eeNw5yCcLEsLrgt45Xb/2YgeyXWvxTXl4c8bPdZTFYQ9A7IUYvhizpH032tDouqCsvgu3KtDO/pW6IteL17YBco7fRMQJhBuQjGDCMEGEJW76GwlXj/xUW32TN/5KeQXtHHZ4z2lZlJLU81B'; //log(rsakey)\nvar data = html.split('.')[0]; //log(data)\nvar data2 = html.split('.')[1]; //log(data2)\nvar key = rsaDecrypt(data,rsakey); //log(key)\nvar iv = reverseIV(key); //log(iv)\nvar html2 = Decrypt(data2,key,iv); //log(html2)\nreturn html2\n}\n\n//二级美化\nfunction colorCode(d) {\n    var str = Array.from(d.toString().replace('#', ''));\n    if (str.length != 6) {\n        return false;\n    } else {\n        for (var k in str) {\n            if (!((str[k] >= '0' && str[k] <= '9') || (str[k] >= 'a' && str[k] <= 'f') || (str[k] >= 'A' && str[k] <= 'F'))) {\n                return false;\n            }\n        }\n        return true;\n    }\n}    \nfunction color(d, c) {if (colorCode(d) && !colorCode(c)) {\n        var tmp = d;\n        d = c;\n        c = tmp;\n    }\n    return '‘‘’’<font color=#' + (c || '000000') + '>' + d + '</font>';\n}\nfunction snum(index,title){\n    if (index < 10) {\n                    var num = String.fromCharCode(parseInt(index)  +0+10101);\n                } else if (index < 20) {\n                    var num = String.fromCharCode(parseInt(index) + 0 + 9440);\n                } else if (index < 35) {\n                    var num = String.fromCharCode(parseInt(index) + 0 + 12860);\n                } else if (index < 50) {\n                    var num = String.fromCharCode(parseInt(index) + 0 + 12941);\n                } else {\n                    var num = parseInt(index) + 0 + '.';\n                }\n     var Title = (index == 0 ? color(num, 'FF2244') : index == 1 ? color(num, 'FF6633') : index == 2 ? color(num, 'FFBB33') : color(num, '555555')) + color(' ' + title, 555555)\n     return Title\n}    \nfunction combinPath(dire, path) {\n    let Proto = '';\n    if (dire.includes(\"//\")) {\n        [Proto, _, dire] = dire.split(/(\\/{2})/);\n        Proto += _;\n    }\n    const Paths = java.nio.file.Paths;\n    dire = dire + path;\n    var p = Paths.get(dire).toAbsolutePath().normalize();\n    return Proto + String(p);\n}    \nfunction substr(str, maxLength) {\n  let len = 0;\n  for (let i = 0; i < str.length; i++) {\n    if (str.charCodeAt(i) > 255) {\n      len += 2;\n    } else {\n      len++;\n    }\n    if (len > maxLength) {\n      return str.slice(0, i) + '...';\n    }\n  }\n  return str;\n}\nfunction setDesc(arr, desc, num) {\n  //log(desc)\n  if (desc == undefined) {\n    return;\n  }\n  desc = desc.constructor == Array ? desc.join('<br>') : desc;\n  if (desc.replace(/(<br>|\\s+|<\\/?p>|&nbsp;)/g, '').length == 0) {\n    return;\n  }\n\n  const mark = 'desc';\n  num = typeof (num) == 'undefined' ? 100 : num\n  desc = desc.startsWith('　　') ? desc : '　　' + desc;\n  desc = desc.replace(/'/g, \"&#39;\");\n  desc = desc.replace(/\\r\\n/g, \"<br>\");\n  desc = desc.replace(/\\r/g, \"<br>\");\n  desc = desc.replace(/\\n/g, \"<br>\");\n  let sdesc = substr(desc, num);\n\n  var colors = {\n    show: \"black\",\n    hide: \"grey\"\n  }\n\n  var lazy = $(`#noLoading#`).lazyRule((dc, sdc, m, cs) => {\n    var show = storage0.getItem(m, '0');\n    var title = findItem('desc').title;\n    var re = /(<\\/small><br>.*?>).+/g;\n    var exp = '展开:';\n    var ret = '收起:';\n    if (show == '1') {\n      updateItem('desc', {\n        title: title\n          .replace(ret, exp)\n          .replace(re, '$1' + sdc + '</small>')\n          .replace(/(<\\/small><br>\\<font color=\").*?(\">)/, '$1' + cs.hide + '$2')\n\n      })\n      storage0.setItem(m, '0');\n    } else {\n      updateItem('desc', {\n        title: title\n          .replace(exp, ret)\n          .replace(re, '$1' + dc + '</small>')\n          .replace(/(<\\/small><br>\\<font color=\").*?(\">)/, '$1' + cs.show + '$2')\n      })\n      storage0.setItem(m, '1');\n    }\n    return `hiker://empty`\n  }, desc, sdesc, mark, colors)\n  var sc = storage0.getItem(mark, '0') == '0' ? '展开:' : '收起:';\n  var dc = storage0.getItem(mark, '0') == '0' ? sdesc : desc;\n  var cs = storage0.getItem(mark, '0') == '0' ? colors.hide : colors.show;\n  arr.push({\n    title: '' + '<b><font color=\"#098AC1\">∷剧情简介\t</font></b>' + \"<small><a style='text-decoration: none;' href='\" + lazy + \"'>\" + sc + '</a></small><br><font color=\"' + cs + '\">' + `${dc}` + '</small>',\n    col_type: 'rich_text',\n    extra: {\n      id: 'desc',\n      lineSpacing: 6,\n      textSize: 15,\n      lineVisible: true,\n    }\n  })\n} \nfunction extractData(data) {\n    const result = {};\n    const fields = {\n        name: \"标题\",\n        created_at: \"更新\",\n        director: \"导演\",\n        actor: \"主演\",\n        continu: \"评分\",\n        year: \"上映\",\n        created_at: \"添加时间\",\n    };\n\n    Object.keys(fields).forEach(key => {\n        if (data[key]) {\n            // 如果键存在，且值是数组，使用 join 连接，否则直接赋值\n            result[fields[key]] = Array.isArray(data[key]) ? data[key].join('/') : data[key];\n        }\n    });\n\n    return result;\n}\nfunction transformData(data) {\n    const descs = [];\n    const titles = [];\n\n    if (data[\"类型\"]) descs.push(`类型：${data[\"类型\"]}`);\n    if (data[\"评分\"]) descs.push(`状态：${data[\"评分\"]}`);\n    if (data[\"更新\"]) descs.push(`更新：${data[\"更新\"]}`);\n    if (data[\"地区\"]) descs.push(`地区：${data[\"地区\"]}`);\n    if (data[\"主演\"]) descs.push(`主演：${data[\"主演\"]}`);\n\n    if (data[\"标题\"]) titles.push(data[\"标题\"]);\n    if (data[\"导演\"]) titles.push(`导演：${data[\"导演\"]}`);\n    if (data[\"上映\"]) titles.push(`上映：${data[\"上映\"]}`);\n\n    return { descs, titles };\n}\nfunction Transforweek(dates){\nconst daysOfWeek = [\"星期日\", \"星期一\", \"星期二\", \"星期三\", \"星期四\", \"星期五\", \"星期六\"];\n\n// 遍历日期数组并转换为对应的星期几\nconst weekdays = dates.map(dateStr => {\n  const date = new Date(dateStr); // 将字符串转换为 Date 对象\n  const day = date.getDay();      // 获取星期几 (0-6 对应 星期日 到 星期六)\n  return daysOfWeek[day];         // 返回对应的中文星期几\n});\nreturn weekdays\n}"},{"col_type":"movie_3","name":"danmu","path":"danmu","rule":"js:\nfunction getVideoDuration(videoUrl) {\n    let retriever = new android.media.MediaMetadataRetriever();\n    try {\n        // 不要抓包会报错\n        retriever.setDataSource(videoUrl, new java.util.HashMap());\n        let time = retriever.extractMetadata(android.media.MediaMetadataRetriever.METADATA_KEY_DURATION);\n        return Number(time);\n    } catch (e) {\n        log(e.toString());\n        return 0;\n    } finally {\n        retriever.release();\n    }\n}\n$.exports.load = function(vid, play, part, playurl, headers) {\n    let millisecond = getVideoDuration(playurl) || 1000 * 60 * 20; //如果获取具体时长失败，就默认20分钟的弹幕\n    let minute = Math.ceil(millisecond / 60000);\n    let res = batchFetch(Array.from({length:minute},(v, i) => ({\n        url: 'http://43.142.232.217:8090/app/danmu?vid=' + vid + '&play=' + play + '&part=' + part + '&start_time_point=' + (i * 60000) + '&end_time_point=' + (i + 1) * 60000 + '&limit=10&page=1',\n        options: {\n            headers\n        }\n    })));\n    let count = 0;\n    let data = \"\";\n    for (let htmldm of res) {\n        var items = JSON.parse(htmldm).data.items; //log(items.length)\n        for (let i = 0; i < items.length; i++) {\n            var time_point = items[i].time_point / 1000; //log(time_point)\n            var contents = JSON.parse(items[i].content); //log(contents)\n            var color = contents.color; //log(color)\n            var content = contents.content; //log(content)\n\n            tempdata = `<d p=\"${time_point},1,25,${color},0\">${content}</d>\\n`; //log(tempdata)\n            data += tempdata;\n            count++;\n        }\n    }\n    data= `<d p=\"0,5,1,16711680,0\">前方共有${count}条弹幕~</d>\\n`+data;\n    danmustr = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\\n<i>\\n${data}</i>`; //log(danmustr)\n    writeFile('hiker://files/cache/danmu/Jong_danmu.xml', danmustr);\n}"}],"title":"囧次元APP","author":"zhao","version":1,"type":"video","url":"hiker://empty##fypage","col_type":"movie_3","class_name":"","class_url":"","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:\nvar d = [];\nvar page = MY_PAGE\nvar getRangeColors = function() {       \n    return ('00000' + (Math.random() * 0x1000000 << 0).toString(16)).substr(-6);     \n}\nvar timestamp = new Date().getTime() / 1000; //log(timestamp)\nvar t = timestamp.toString().split('.')[0]; //log(t)\nif (MY_PAGE == 1) {\n    let nav = [\"首页\", \"分类\", \"周表\"];\n    for (let i = 0; i < nav.length; i++) {\n        let mytitle = nav[i];\n        d.push({\n            title: getMyVar('navtitle', \"首页\") == mytitle ? '““””<b><font color=#9F5F9F>' + mytitle + '</font></b>' : mytitle,\n            url: $('#noLoading##noHistory#')\n                .lazyRule((mytitle) => {\n                    putMyVar(\"navtitle\", mytitle);\n                    refreshPage();\n                    return 'hiker://empty'\n                }, mytitle),\n            col_type: \"text_3\"\n        });\n    }\n}\nif (getMyVar('navtitle', \"首页\") == \"首页\") {\neval(JSON.parse(request('hiker://page/hanshu')).rule)\nif(MY_PAGE == 1){\nvar html2 = gethtml('http://43.142.232.217:8090/app/banners/0','GET'); //log(html2)\nvar list = JSON.parse(html2).data; //log(list)\nvar lundata = list.map((x) => {\n            return {\n                title: x.vname,\n                desc: x.vid+'#'+'1',\n                img: x.img + '@Referer=' + x.img.match(/(http.*\\/\\/.*)\\//)[1],\n                url: `hiker://page/erji#immersiveTheme#`,\n            }\n        });\n        eval(JSON.parse(fetch(\"hiker://page/lunbo\", {})).rule);\n        banner(MY_RULE.title, true, d, lundata, {\n            time: 5000,\n            col_type: 'card_pic_1',\n            desc: '0'\n        })\nd.push({\n    url: \"hiker://empty\",\n    col_type: 'line'\n})\nd.push({\n    title: '推荐◎日漫',\n    url: \"hiker://empty\",\n    col_type: 'text_1',\n})\nvar html2 = gethtml('http://43.142.232.217:8090/app/video/list?channel=1&sort=weight&type=&area=&year=&limit=6&page=1','GET'); //log(html2)\nvar list = JSON.parse(html2).data.items; //log(list)\nlist.forEach(data => {\n    d.push({\n            title: data.name,\n            desc: data.continu,\n            img: data.pic + '@Referer=' + data.pic.match(/(http.*\\/\\/.*)\\//)[1],\n            url: `hiker://page/erji#immersiveTheme#`,\n            col_type: 'movie_2',\n            extra: {\n                id: data.id,\n                cid: data.cid\n            }\n        })\n})\nd.push({\n    url: \"hiker://empty\",\n    col_type: 'line'\n})\nd.push({\n    title: '推荐◎国漫',\n    url: \"hiker://empty\",\n    col_type: 'text_1',\n})\nvar html2 = gethtml('http://43.142.232.217:8090/app/video/list?channel=2&sort=weight&type=&area=&year=&limit=6&page=1','GET'); //log(html2)\nvar list = JSON.parse(html2).data.items; //log(list)\nlist.forEach(data => {\n    d.push({\n            title: data.name,\n            desc: data.continu,\n            img: data.pic + '@Referer=' + data.pic.match(/(http.*\\/\\/.*)\\//)[1],\n            url: `hiker://page/erji#immersiveTheme#`,\n            col_type: 'movie_2',\n            extra: {\n                id: data.id,\n                cid: data.cid\n            }\n        })\n})\nd.push({\n    url: \"hiker://empty\",\n    col_type: 'line'\n})\nd.push({\n    title: '推荐◎动漫电影',\n    url: \"hiker://empty\",\n    col_type: 'text_1',\n})\nvar html2 = gethtml('http://43.142.232.217:8090/app/video/list?channel=26&sort=weight&type=&area=&year=&limit=6&page=1','GET'); //log(html2)\nvar list = JSON.parse(html2).data.items; //log(list)\nlist.forEach(data => {\n    d.push({\n            title: data.name,\n            desc: data.continu,\n            img: data.pic + '@Referer=' + data.pic.match(/(http.*\\/\\/.*)\\//)[1],\n            url: `hiker://page/erji#immersiveTheme#`,\n            col_type: 'movie_2',\n            extra: {\n                id: data.id,\n                cid: data.cid\n            }\n        })\n})\nd.push({\n    url: \"hiker://empty\",\n    col_type: 'line'\n})\nd.push({\n    title: '推荐◎其他动漫',\n    url: \"hiker://empty\",\n    col_type: 'text_1',\n})\nvar html2 = gethtml('http://43.142.232.217:8090/app/video/list?channel=3&sort=weight&type=&area=&year=&limit=6&page=1','GET'); //log(html2)\nvar list = JSON.parse(html2).data.items; //log(list)\nlist.forEach(data => {\n    d.push({\n            title: data.name,\n            desc: data.continu,\n            img: data.pic + '@Referer=' + data.pic.match(/(http.*\\/\\/.*)\\//)[1],\n            url: `hiker://page/erji#immersiveTheme#`,\n            col_type: 'movie_2',\n            extra: {\n                id: data.id,\n                cid: data.cid\n            }\n        })\n})\n\n}\n} else if (getMyVar(\"navtitle\") == \"分类\") {\neval(JSON.parse(request('hiker://page/hanshu')).rule)\nvar he = [\"日漫\",\"国漫\",\"动漫电影\",\"其他动漫\"]\nvar subs = [\"1\",\"2\",\"26\",\"3\"]\nif(page=='1'){\nhe.forEach((x,i)=>{\n    var ctitle = x\n    var sub = subs[i]\n    d.push({\n        title: getMyVar('ctitle', \"日漫\") == ctitle ? '““””'+ctitle.fontcolor('#'+getRangeColors()):ctitle,\n        url: $('#noLoading##noHistory#').lazyRule((ctitle,sub) => {\n                putMyVar(\"ctitle\", ctitle);\n                putMyVar(\"sub\",sub);\n                refreshPage();\n                return 'hiker://empty'\n            }, ctitle,sub),\n        col_type: \"scroll_button\"\n    })\n})\n}\nvar sub = getMyVar(\"sub\",subs[0])\nvar html2 = gethtml('http://43.142.232.217:8090/app/video/list?channel='+sub+'&sort=addtime&type=&area=&year=&limit=30&page='+MY_PAGE,'GET'); //log(html2)\n\nvar list = JSON.parse(html2).data.items; //log(list)\ntry {\n    list.forEach(data => {\n        d.push({\n            title: data.name,\n            desc: data.continu,\n            img: data.pic + '@Referer=' + data.pic.match(/(http.*\\/\\/.*)\\//)[1],\n            url: `hiker://page/erji#immersiveTheme#`,\n            col_type: 'movie_3',\n            extra: {\n                id: data.id,\n                cid: data.cid\n            }\n        })\n    })\n} catch (e) {}\n} else if (getMyVar(\"navtitle\") == \"周表\") {\neval(JSON.parse(request('hiker://page/hanshu')).rule)\nvar subs2 = getUpcomingWeekDates();\nvar he2 = Transforweek(subs2)\nif(page=='1'){\nhe2.forEach((x,i)=>{\n    var ctitle = x\n    var sub2 = subs2[i]\n    d.push({\n        title: getMyVar('ctitle',he2[0]) == ctitle ? '““””'+ctitle.fontcolor('#'+getRangeColors()):ctitle,\n        url: $('#noLoading##noHistory#').lazyRule((ctitle,sub2) => {\n                putMyVar(\"ctitle\", ctitle);\n                putMyVar(\"sub2\",sub2);\n                refreshPage();\n                return 'hiker://empty'\n            }, ctitle,sub2),\n        col_type: \"scroll_button\"\n    })\n})\n}\nvar sub2 = getMyVar(\"sub2\",subs2[0]);//log(sub2)\nvar html2 = gethtml('http://43.142.232.217:8090/app/video_update_list/'+sub2+'?limit=500&page=1','GET'); //log(html2)\nvar list = JSON.parse(html2).data.items; //log(list)\n\nlist.forEach(data => {\n    d.push({\n        title: data.vod_name,\n        desc: '更新日期：'+data.date.split('T')[0]+'\\n'+'更新时间：'+data.date.split('T')[1].split('+')[0],\n        img: data.vod_pic + '@Referer=' + data.vod_pic.match(/(http.*\\/\\/.*)\\//)[1],\n        url: `hiker://page/erji#immersiveTheme#`,\n        col_type: 'movie_1_vertical_pic',\n        extra: {\n            vid: data.vid,\n            cid: '1'\n        }\n    })\n})\n}\n\nsetResult(d)","searchFind":"js:\nvar d = [];\neval(JSON.parse(request('hiker://page/hanshu')).rule)\nMY_URL = MY_URL.split(\"##\")[1];\nvar html2 = gethtml(MY_URL, 'GET'); //log(html2)\nvar list = JSON.parse(html2).data.items; //log(list)\ntry {\n    list.forEach(data => {\n        d.push({\n            title: data.name,\n            desc: '状态：' + data.continu,\n            content: '地区：' + data.area + '\\n' + '类型：' + data.type + '\\n' + '年代：' + data.year,\n            img: data.pic + '@Referer=' + data.pic.match(/(http.*\\/\\/.*)\\//)[1],\n            url: `hiker://page/erji#immersiveTheme#`,\n            col_type: 'movie_3',\n            extra: {\n                id: data.id,\n                cid: data.cid\n            }\n        })\n    })\n} catch (e) {}\nsetResult(d)","search_url":"hiker://empty##http://43.142.232.217:8090/app/video/search?key=**&limit=6&page=fypage","group":"①推荐","detail_col_type":"movie_3","detail_find_rule":"","sdetail_col_type":"movie_1","sdetail_find_rule":"*","ua":"mobile","preRule":"","pages":"[{\"col_type\":\"movie_3\",\"name\":\"一级轮播\",\"path\":\"lunbo\",\"rule\":\"js:\\nfunction banner(title, start, arr, data, cfg) {\\n    //log(data)\\n    let id = title + 'lunbo';\\n    var rnum = Math.floor(Math.random() * data.length);\\n    var item = data[rnum]; //log(item)\\n    putMyVar('rnum', rnum);\\n    let time = 5000;\\n    let col_type = 'pic_1_card';\\n    let color = \\\"white\\\";\\n    let desc = '';\\n    if (cfg != undefined) {\\n        time = cfg.time ? cfg.time : time;\\n        col_type = cfg.col_type ? cfg.col_type : col_type;\\n        desc = cfg.desc ? cfg.desc : desc;\\n    }\\n\\n    arr.push({\\n        col_type: col_type,\\n        img: item.img,\\n        desc: desc,\\n        title: item.title,\\n        url: item.url,\\n        extra: {\\n            //id: id+'bar',\\n            vid: item.desc.split('#')[0],\\n            cid: item.desc.split('#')[1],\\n        }\\n    })\\n\\n    if (start == false || getMyVar('benstart', 'true') == 'false') {\\n        unRegisterTask(id)\\n        return\\n    }\\n    \\n    //log(data)\\n\\n    let obj = {\\n        data: data,\\n    };\\n\\n    registerTask(id, time, $.toString((obj,id) => {\\n        var data = obj.data;\\n        var rum = getMyVar('rnum');\\n\\n        var i = Number(getMyVar('banneri', '0'));\\n        if (rum != '') {\\n            i = Number(rum) + 1\\n            clearMyVar('rnum')\\n        } else {\\n            i = i + 1;\\n        }\\n        //log(i)\\n        //log(data.length)\\n\\n        if (i > data.length - 1) {\\n            i = 0\\n        }\\n        var item = data[i];\\n        //log(item)\\n        try {\\n            updateItem(id+'bar', {\\n                title: item.title,\\n                img: item.img,\\n                url: item.url,\\n                extra: {\\n                    //name: item.title.replace(/<[^>]+>/g, ''),\\n                    //sname: item.extra.sname,\\n                    //stype: item.extra.stype,\\n                    //surl: item.url,\\n                    //img:item.img,\\n                    //title: item.title.replace(/<[^>]+>/g, ''),\\n                    vid: item.desc.split('#')[0],\\n                    cid: item.desc.split('#')[1],\\n                }\\n            })\\n        } catch (e) {\\n            log(e.message)\\n            unRegisterTask(id)\\n        }\\n        putMyVar('banneri', i);\\n\\n    }, obj,id))\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"二级\",\"path\":\"erji\",\"rule\":\"js:\\nvar d = [];\\neval(JSON.parse(request('hiker://page/hanshu')).rule)\\nvar html2 = gethtml('http://43.142.232.217:8090/app/video/detail?id=' + (MY_PARAMS.id || MY_PARAMS.vid), 'GET'); //log(html2)\\nvar data = JSON.parse(html2).data; //log(data)\\nvar Data = transformData(extractData(data))\\nvar 简介 = data.content\\nsetPageTitle(Data.titles[0])\\nvar 标题 = '““””' + Data.titles[0] + '\\\\n' + (Data.titles.slice(1, 3).join('\\\\n')).small();\\nvar 描述 = '““””' + (Data.descs.slice(0, 3).join('\\\\n')).small().fontcolor('#806d9e');\\nd.push({\\n    title: 标题,\\n    desc: 描述,\\n    img: data.pic,\\n    url: data.pic,\\n    col_type: \\\"movie_1_vertical_pic_blur\\\",\\n    extra: {\\n        gradient: true\\n    }\\n})\\nsetDesc(d, 简介)\\ndata.parts.forEach((data2) => {\\n    data2.part.forEach((partTitle) => {\\n        d.push({\\n            title: partTitle, // 直接使用 part 数组中的标题\\n            url: $(partTitle).lazyRule((data) => {\\n                //log(data.id)\\n                //log(data.parts[0].play)\\n                eval(JSON.parse(request('hiker://page/hanshu')).rule)\\n                var timestamp = new Date().getTime() / 1000; //log(timestamp)\\n                var t = timestamp.toString().split('.')[0]; //log(t)\\n                var html = gethtml('http://43.142.232.217:8090/app/video/play?id=' + data.id + '&play=' + data.parts[0].play + '&part=' + input, 'POST'); //log(html)\\n                \\n                var html2 = JSON.parse(html).data[0]; //log(html2)\\n                var jx = html2.parse.match(/http.*?url=/)[0]; //log(jx)\\n                //var player = html2.extension.player; //log(player)\\n                var source = html2.extension.url; //log(source)\\n                var hash = md5(source + 'v50gjcy' + t); //log(hash)\\n                var modified_source = source + '$' + t + '$' + hash; //log(modified_source)\\n\\n                var headers = {\\n                    'x-version': '2020-09-17',\\n                    'user-agent': 'Dart/2.17 (dart:io)',\\n                    'appid': '4150439554430529',\\n                    'ts': '1724923917970',\\n                    //'accept-encoding': 'gzip',\\n                    'authentication': 'NHHqFspFXhfOBgNVq/MHfjSa5zJV/hnUNcFgUa+A75fnUGKweg5Mjqc3zNiy+Ao0ASFcsMtdSNfOjTvrb/4+kbiie1G8CnEkTLjhoyfQf7YwtNZgFSxcDJneJwQVbPCRnaVIEUTFnFeA+CkMshMRFQ\\\\u003d\\\\u003d',\\n                    'host': '43.142.232.217:8090',\\n                    'x-token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVVUlEIjoiY2E3Njc0YTUtODliYS00NjNkLWE2OGUtMzNmZmFmMmYyODU3IiwiQnVmZmVyVGltZSI6ODY0MDAwMDAwMDAwMDAsImV4cCI6MTcyNTYyMzA1NCwibmJmIjoxNzI1MDE4MjU0fQ.2Zau9hdc88_ziP6jMx7geEN64JL0X7c2ANW_CMIui-U'\\n                };\\n                var html3 = fetch(jx + modified_source, {\\n                    headers: headers,\\n                    method: 'GET'\\n                }); \\n               \\n                var play = JSON.parse(html3).url\\n                $.require(\\\"danmu\\\").load(data.id, data.parts[0].play, input, play, headers);\\n                \\n                return JSON.stringify({\\n                    urls: [play],\\n                    danmu: 'hiker://files/cache/danmu/Jong_danmu.xml'\\n                }) + '#isVideo=true#'\\n            }, data),\\n            col_type: 'text_4',\\n        });\\n    });\\n});\\n\\nvar html2 = gethtml('http://43.142.232.217:8090/app/video/list?channel=' + MY_PARAMS.cid + '&sort=addtime&type=&area=&year=&limit=6&page=1', 'GET'); //log(html2)\\nvar list = JSON.parse(html2).data.items; //log(list)\\nif (MY_PARAMS.cid) {\\n    d.push({\\n        title: \\\"热门推荐\\\",\\n        url: \\\"hiker://empty\\\",\\n        img: \\\"https://hikerfans.com/tubiao/more/84.png\\\",\\n        col_type: \\\"avatar\\\"\\n    })\\n    \\n    list.forEach(data => {\\n        d.push({\\n            title: data.name,\\n            desc: data.continu,\\n            img: data.pic + '@Referer=' + data.pic.match(/(http.*\\\\/\\\\/.*)\\\\//)[1],\\n            url: `hiker://page/erji#immersiveTheme#`,\\n            col_type: 'movie_3',\\n            extra: {\\n                id: data.id,\\n                cid: data.cid\\n            }\\n        })\\n    })\\n}\\n\\nsetResult(d)\"},{\"col_type\":\"movie_3\",\"name\":\"函数\",\"path\":\"hanshu\",\"rule\":\"eval(getCryptoJS())\\n\\n//反转函数\\nfunction reverseIV(iv) {\\n  // 将输入字符串转换为字符数组\\n  const ivArray = iv.split('');\\n  \\n  // 反转字符数组\\n  ivArray.reverse();\\n  \\n  // 将反转后的字符数组连接回字符串\\n  const reversedIV = ivArray.join('');\\n  \\n  return reversedIV;\\n}\\n\\n//响应解密\\nfunction Decrypt(word,key,iv) {\\n    \\n    let decrypt = CryptoJS.AES.decrypt(word, CryptoJS.enc.Utf8.parse(key), {\\n        iv: CryptoJS.enc.Utf8.parse(iv),\\n        mode: CryptoJS.mode.CBC, // 使用CBC模式\\n        padding: CryptoJS.pad.Pkcs7 // 使用PKCS#7填充\\n    });\\n    \\n    // 将解密后的数据转换为原始文本\\n    let decryptedStr = decrypt.toString(CryptoJS.enc.Utf8);\\n    \\n    // 返回解密后的文本\\n    return decryptedStr;\\n}\\n\\n//日期\\nfunction getUpcomingWeekDates() {\\n    // 创建一个空数组来存储日期\\n    let dates = [];\\n    // 循环遍历未来7天（从今天开始）\\n    for (let i = 0; i < 7; i++) {\\n        // 获取当前日期，并加上i天\\n        let date = new Date();\\n        date.setDate(date.getDate() + i);\\n        // 获取年、月、日\\n        let year = date.getFullYear();\\n        let month = (date.getMonth() + 1).toString().padStart(2, '0'); // 月份从0开始，所以加1\\n        let day = date.getDate().toString().padStart(2, '0'); // 确保日期是两位数\\n        // 组合年月日，并添加到数组中\\n        let formattedDate = year + '-' + month + '-' + day;\\n        dates.push(formattedDate); // 将日期添加到数组中\\n    }\\n    return dates; // 返回日期数组\\n}\\n\\n//请求函数\\nfunction gethtml(url,method){\\nvar html = fetch(url,{\\n    headers: {\\n    'x-version': '2020-09-17',\\n    'user-agent': 'Dart/2.17 (dart:io)',\\n    'appid': '4150439554430529',\\n    'ts': '1724923917970',\\n    //'accept-encoding': 'gzip',\\n    'authentication': 'NHHqFspFXhfOBgNVq/MHfjSa5zJV/hnUNcFgUa+A75fnUGKweg5Mjqc3zNiy+Ao0ASFcsMtdSNfOjTvrb/4+kbiie1G8CnEkTLjhoyfQf7YwtNZgFSxcDJneJwQVbPCRnaVIEUTFnFeA+CkMshMRFQ\\\\u003d\\\\u003d',\\n    'host': '43.142.232.217:8090',\\n    'x-token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVVUlEIjoiZDlmZjUzODMtZTBkOS00NDcyLTkzZGQtM2ZkOTk1YzRkYTAyIiwiQnVmZmVyVGltZSI6ODY0MDAwMDAwMDAwMDAsImV4cCI6MTcyNjIzMTc0OSwibmJmIjoxNzI1NjI2OTQ5fQ.nGJgRy8rReJkWTjbZS4jkqX3c--wGe1deKt7RvdCUcU'\\n  },\\n    method: 'GET'\\n}); //log(html)\\nvar rsakey = 'MIIEowIBAAKCAQEAxm2Kzu9L/FNX42em9Xo73JXtJCtrhleKN9jqclpK6/Iyah/TUjH5RCNItWiTKHg6LcsGxZs9+4fP6uU8oO5Qp1akaOrJTg3QTQQFyRxDrv+LN/nL6/MpSf3SnihyVPQWwlkj3yHZWrVC9HI3q2JmzGV/kzwnpVIj2as8zl4cO7OZr0F9bR+G4jblqLPmB/x/BBOGrWWCxn+YI2RVHw23dev9jql284eN/KV4tlDlbtoJGy4+Cb7nEV/THvRVZYbHAp+fMY0+NyqyslLX/btJqT8eSH6Hb8c+BSC77Dry4G8/m/wUYPdvXiL3cVhZmEaqjs8rUafGyQmW3mrflAbIJwIDAQABAoIBAQCbRhUdIbzAUyevV+kapvA5CUlsyF133wDV+vRbT7TZNcmlqgnfhCOe4k1/R7oALTS5qOo/r9+s+PYGxiPPey26BN7bCv9ECSM7YS511ZxRUL9MqjidBscEk49BHD17pRY6Ny8O6JoBlV4zkz1k67etsq9GNAiCIejT6F/IzXQicmO5MaJWCjBNSP+IPTvd5NW3DUNlt2NcCBvO2sCgSq2Z4B0IdNWeSvd4ZmA2qSkqk60A8glNR4HdRTG9VWR0fUOd/qzpN1vjBUKMaIHeUX50NCRdK8EGqrVOCq4uUgBRj7bjt0DOb9ck4vYxgBdkyK4HMYsAGdirYKxdDkseicqhAoGBAOZ750Vky38kq3MucAE/uaFpaDUSeOKDy03fumM6TLlkeAxnTQZWNBDzlrqNgQPMLu+tmm+ZsEN5buF8C2oKc97+Rz21rvrOufr4sX2PqHfj/kerYGq/NzX1jpRbqsmcs+3JxveeozHuXBbOFpd8teCGZPFPHREFDe4sZFtFmwX1AoGBANxlJNlKIz0TVmPgGCUZ4j8BRBiLPHMeFkUoam6Djou2iJLYey3ZNHhyMiRER7Smia0fY/QjqJIeSRWQlZExu6s9ijl4VSmoh4hLanOxxAE+gFnuhgK4XwMV0hvHbqSaupQdfkULZ+t3rGKzt+t+0ob7xx+LjYWEwpLsKCQKRKgrAoGADLPvfyea/5rpyCNbEPaOKJNCpwopl3JkFhqqjyV7bQxYgXaADEVcAUMrn4SFA8yRGaybwmLaEB31OoA3sNR6pmOlUYVd63zRSz/BqIXuZw0tyo1rdvaq+FJcVVjoBMyaLhTc3nDj1bCpaqhZHmhFLea6UYJmu7VnmyTfMxiW/rECgYAh4MJLTGQiTUioTZgoi9QFT1KCW1TNdUCDHPVPS5Wr0EEqIXC92XeBVDx06rIDCN586ChbLOgKnfEqCXGUQgrRBcKrlt2wa6F5x+3zHs48Srk8Gbgrzt97/+yuLHfLgaVQg0AXqOsufNTYzztkTbha23T+WltEvOWT5A0/jPyExQKBgCGbq62piyIEeMNoP/SoLvh4hTq/eeNw5yCcLEsLrgt45Xb/2YgeyXWvxTXl4c8bPdZTFYQ9A7IUYvhizpH032tDouqCsvgu3KtDO/pW6IteL17YBco7fRMQJhBuQjGDCMEGEJW76GwlXj/xUW32TN/5KeQXtHHZ4z2lZlJLU81B'; //log(rsakey)\\nvar data = html.split('.')[0]; //log(data)\\nvar data2 = html.split('.')[1]; //log(data2)\\nvar key = rsaDecrypt(data,rsakey); //log(key)\\nvar iv = reverseIV(key); //log(iv)\\nvar html2 = Decrypt(data2,key,iv); //log(html2)\\nreturn html2\\n}\\n\\n//二级美化\\nfunction colorCode(d) {\\n    var str = Array.from(d.toString().replace('#', ''));\\n    if (str.length != 6) {\\n        return false;\\n    } else {\\n        for (var k in str) {\\n            if (!((str[k] >= '0' && str[k] <= '9') || (str[k] >= 'a' && str[k] <= 'f') || (str[k] >= 'A' && str[k] <= 'F'))) {\\n                return false;\\n            }\\n        }\\n        return true;\\n    }\\n}    \\nfunction color(d, c) {if (colorCode(d) && !colorCode(c)) {\\n        var tmp = d;\\n        d = c;\\n        c = tmp;\\n    }\\n    return '‘‘’’<font color=#' + (c || '000000') + '>' + d + '</font>';\\n}\\nfunction snum(index,title){\\n    if (index < 10) {\\n                    var num = String.fromCharCode(parseInt(index)  +0+10101);\\n                } else if (index < 20) {\\n                    var num = String.fromCharCode(parseInt(index) + 0 + 9440);\\n                } else if (index < 35) {\\n                    var num = String.fromCharCode(parseInt(index) + 0 + 12860);\\n                } else if (index < 50) {\\n                    var num = String.fromCharCode(parseInt(index) + 0 + 12941);\\n                } else {\\n                    var num = parseInt(index) + 0 + '.';\\n                }\\n     var Title = (index == 0 ? color(num, 'FF2244') : index == 1 ? color(num, 'FF6633') : index == 2 ? color(num, 'FFBB33') : color(num, '555555')) + color(' ' + title, 555555)\\n     return Title\\n}    \\nfunction combinPath(dire, path) {\\n    let Proto = '';\\n    if (dire.includes(\\\"//\\\")) {\\n        [Proto, _, dire] = dire.split(/(\\\\/{2})/);\\n        Proto += _;\\n    }\\n    const Paths = java.nio.file.Paths;\\n    dire = dire + path;\\n    var p = Paths.get(dire).toAbsolutePath().normalize();\\n    return Proto + String(p);\\n}    \\nfunction substr(str, maxLength) {\\n  let len = 0;\\n  for (let i = 0; i < str.length; i++) {\\n    if (str.charCodeAt(i) > 255) {\\n      len += 2;\\n    } else {\\n      len++;\\n    }\\n    if (len > maxLength) {\\n      return str.slice(0, i) + '...';\\n    }\\n  }\\n  return str;\\n}\\nfunction setDesc(arr, desc, num) {\\n  //log(desc)\\n  if (desc == undefined) {\\n    return;\\n  }\\n  desc = desc.constructor == Array ? desc.join('<br>') : desc;\\n  if (desc.replace(/(<br>|\\\\s+|<\\\\/?p>|&nbsp;)/g, '').length == 0) {\\n    return;\\n  }\\n\\n  const mark = 'desc';\\n  num = typeof (num) == 'undefined' ? 100 : num\\n  desc = desc.startsWith('　　') ? desc : '　　' + desc;\\n  desc = desc.replace(/'/g, \\\"&#39;\\\");\\n  desc = desc.replace(/\\\\r\\\\n/g, \\\"<br>\\\");\\n  desc = desc.replace(/\\\\r/g, \\\"<br>\\\");\\n  desc = desc.replace(/\\\\n/g, \\\"<br>\\\");\\n  let sdesc = substr(desc, num);\\n\\n  var colors = {\\n    show: \\\"black\\\",\\n    hide: \\\"grey\\\"\\n  }\\n\\n  var lazy = $(`#noLoading#`).lazyRule((dc, sdc, m, cs) => {\\n    var show = storage0.getItem(m, '0');\\n    var title = findItem('desc').title;\\n    var re = /(<\\\\/small><br>.*?>).+/g;\\n    var exp = '展开:';\\n    var ret = '收起:';\\n    if (show == '1') {\\n      updateItem('desc', {\\n        title: title\\n          .replace(ret, exp)\\n          .replace(re, '$1' + sdc + '</small>')\\n          .replace(/(<\\\\/small><br>\\\\<font color=\\\").*?(\\\">)/, '$1' + cs.hide + '$2')\\n\\n      })\\n      storage0.setItem(m, '0');\\n    } else {\\n      updateItem('desc', {\\n        title: title\\n          .replace(exp, ret)\\n          .replace(re, '$1' + dc + '</small>')\\n          .replace(/(<\\\\/small><br>\\\\<font color=\\\").*?(\\\">)/, '$1' + cs.show + '$2')\\n      })\\n      storage0.setItem(m, '1');\\n    }\\n    return `hiker://empty`\\n  }, desc, sdesc, mark, colors)\\n  var sc = storage0.getItem(mark, '0') == '0' ? '展开:' : '收起:';\\n  var dc = storage0.getItem(mark, '0') == '0' ? sdesc : desc;\\n  var cs = storage0.getItem(mark, '0') == '0' ? colors.hide : colors.show;\\n  arr.push({\\n    title: '' + '<b><font color=\\\"#098AC1\\\">∷剧情简介\\t</font></b>' + \\\"<small><a style='text-decoration: none;' href='\\\" + lazy + \\\"'>\\\" + sc + '</a></small><br><font color=\\\"' + cs + '\\\">' + `${dc}` + '</small>',\\n    col_type: 'rich_text',\\n    extra: {\\n      id: 'desc',\\n      lineSpacing: 6,\\n      textSize: 15,\\n      lineVisible: true,\\n    }\\n  })\\n} \\nfunction extractData(data) {\\n    const result = {};\\n    const fields = {\\n        name: \\\"标题\\\",\\n        created_at: \\\"更新\\\",\\n        director: \\\"导演\\\",\\n        actor: \\\"主演\\\",\\n        continu: \\\"评分\\\",\\n        year: \\\"上映\\\",\\n        created_at: \\\"添加时间\\\",\\n    };\\n\\n    Object.keys(fields).forEach(key => {\\n        if (data[key]) {\\n            // 如果键存在，且值是数组，使用 join 连接，否则直接赋值\\n            result[fields[key]] = Array.isArray(data[key]) ? data[key].join('/') : data[key];\\n        }\\n    });\\n\\n    return result;\\n}\\nfunction transformData(data) {\\n    const descs = [];\\n    const titles = [];\\n\\n    if (data[\\\"类型\\\"]) descs.push(`类型：${data[\\\"类型\\\"]}`);\\n    if (data[\\\"评分\\\"]) descs.push(`状态：${data[\\\"评分\\\"]}`);\\n    if (data[\\\"更新\\\"]) descs.push(`更新：${data[\\\"更新\\\"]}`);\\n    if (data[\\\"地区\\\"]) descs.push(`地区：${data[\\\"地区\\\"]}`);\\n    if (data[\\\"主演\\\"]) descs.push(`主演：${data[\\\"主演\\\"]}`);\\n\\n    if (data[\\\"标题\\\"]) titles.push(data[\\\"标题\\\"]);\\n    if (data[\\\"导演\\\"]) titles.push(`导演：${data[\\\"导演\\\"]}`);\\n    if (data[\\\"上映\\\"]) titles.push(`上映：${data[\\\"上映\\\"]}`);\\n\\n    return { descs, titles };\\n}\\nfunction Transforweek(dates){\\nconst daysOfWeek = [\\\"星期日\\\", \\\"星期一\\\", \\\"星期二\\\", \\\"星期三\\\", \\\"星期四\\\", \\\"星期五\\\", \\\"星期六\\\"];\\n\\n// 遍历日期数组并转换为对应的星期几\\nconst weekdays = dates.map(dateStr => {\\n  const date = new Date(dateStr); // 将字符串转换为 Date 对象\\n  const day = date.getDay();      // 获取星期几 (0-6 对应 星期日 到 星期六)\\n  return daysOfWeek[day];         // 返回对应的中文星期几\\n});\\nreturn weekdays\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"danmu\",\"path\":\"danmu\",\"rule\":\"js:\\nfunction getVideoDuration(videoUrl) {\\n    let retriever = new android.media.MediaMetadataRetriever();\\n    try {\\n        // 不要抓包会报错\\n        retriever.setDataSource(videoUrl, new java.util.HashMap());\\n        let time = retriever.extractMetadata(android.media.MediaMetadataRetriever.METADATA_KEY_DURATION);\\n        return Number(time);\\n    } catch (e) {\\n        log(e.toString());\\n        return 0;\\n    } finally {\\n        retriever.release();\\n    }\\n}\\n$.exports.load = function(vid, play, part, playurl, headers) {\\n    let millisecond = getVideoDuration(playurl) || 1000 * 60 * 20; //如果获取具体时长失败，就默认20分钟的弹幕\\n    let minute = Math.ceil(millisecond / 60000);\\n    let res = batchFetch(Array.from({length:minute},(v, i) => ({\\n        url: 'http://43.142.232.217:8090/app/danmu?vid=' + vid + '&play=' + play + '&part=' + part + '&start_time_point=' + (i * 60000) + '&end_time_point=' + (i + 1) * 60000 + '&limit=10&page=1',\\n        options: {\\n            headers\\n        }\\n    })));\\n    let count = 0;\\n    let data = \\\"\\\";\\n    for (let htmldm of res) {\\n        var items = JSON.parse(htmldm).data.items; //log(items.length)\\n        for (let i = 0; i < items.length; i++) {\\n            var time_point = items[i].time_point / 1000; //log(time_point)\\n            var contents = JSON.parse(items[i].content); //log(contents)\\n            var color = contents.color; //log(color)\\n            var content = contents.content; //log(content)\\n\\n            tempdata = `<d p=\\\"${time_point},1,25,${color},0\\\">${content}</d>\\\\n`; //log(tempdata)\\n            data += tempdata;\\n            count++;\\n        }\\n    }\\n    data= `<d p=\\\"0,5,1,16711680,0\\\">前方共有${count}条弹幕~</d>\\\\n`+data;\\n    danmustr = `<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\\\n<i>\\\\n${data}</i>`; //log(danmustr)\\n    writeFile('hiker://files/cache/danmu/Jong_danmu.xml', danmustr);\\n}\"}]","proxy":"","icon":"https://img.meituan.net/csc/56b770f6ac608a8a10649f87925663dc27506.png"},{"last_chapter_rule":"","pageList":[{"col_type":"movie_3","name":"drpy","path":"drpy","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/drpy.js\"))"},{"col_type":"movie_1_vertical_pic_blur","name":"详细页面","path":"detailed","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/detailed.js\"))"},{"col_type":"movie_3","name":"解析文件","path":"configs","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/configs.js\"))"},{"col_type":"movie_3","name":"解析管理","path":"ruleManage","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/ruleManage.js\"))"},{"col_type":"movie_3","name":"解析编辑","path":"ruleEdit","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/ruleEdit.js\"))"},{"col_type":"movie_3","name":"解析导入","path":"import","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/import.js\"))"},{"col_type":"movie_3","name":"视频解析","path":"videoUrl","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/videoUrl.js\"))"},{"col_type":"movie_3","name":"创建订阅","path":"createSubscription","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/createSubscription.js\"))"},{"col_type":"movie_3","name":"解析订阅","path":"subscribe","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/subscribe.js\"))"},{"col_type":"movie_3","name":"运行时配置管理","path":"runtimeConfig","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/runtimeConfig.js\"))"},{"col_type":"movie_3","name":"编辑配置","path":"createConfig","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/createConfig.js\"))"},{"col_type":"movie_3","name":"换源弹窗","path":"ChangeSourcePop","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/ChangeSourcePop.js\"))"},{"col_type":"movie_3","name":"drpy管理","path":"DrpyManage","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/DrpyManage.js\"))"},{"col_type":"movie_3","name":"指定搜索弹窗","path":"SearchAllowPop","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/SearchAllowPop.js\"))"},{"col_type":"movie_3","name":"分类","path":"categorys","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/categorys.js\"))"},{"col_type":"movie_3","name":"本地规则管理","path":"LocalDir","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/LocalDir.js\"))"},{"col_type":"movie_3","name":"默认保存选择","path":"sharedefaultpath","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/sharedefaultpath.js\"))"},{"col_type":"movie_3","name":"小说","path":"novel","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/novel.js\"))"},{"col_type":"movie_3","name":"主页","path":"mian","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/mian.js\"))"},{"col_type":"movie_3","name":"主页处理","path":"MianLoad","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/MianLoad.js\"))"},{"col_type":"movie_3","name":"Ui管理","path":"UIManage","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/UIManage.js\"))"},{"col_type":"movie_3","name":"LocalProxy","path":"LocalProxy","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/LocalProxy.js\"))"},{"col_type":"movie_3","name":"JavaGZIP","path":"GZIP","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/GZIP.js\"))"},{"col_type":"movie_3","name":"支持作者","path":"Donate.v","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/Donate.v.js\"))"},{"col_type":"movie_3","name":"通用方法","path":"methods","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/methods.js\"))"},{"col_type":"movie_3","name":"更新日志","path":"updateRecords","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/updateRecords.js\"))"},{"col_type":"movie_3","name":"T4适配器","path":"T4Adapter","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/T4Adapter.js\"))"},{"col_type":"movie_3","name":"T0适配器","path":"T0Adapter","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/T0Adapter.js\"))"},{"col_type":"movie_3","name":"T1适配器","path":"T1Adapter","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/T1Adapter.js\"))"},{"col_type":"movie_3","name":"二级方法","path":"methods_er","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/methods_er.js\"))"},{"col_type":"movie_3","name":"主题编辑","path":"ThemeEdit","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/ThemeEdit.js\"))"},{"col_type":"movie_3","name":"规则测试","path":"ruleTest","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/ruleTest.js\"))"},{"col_type":"movie_3","name":"XBPQ适配器","path":"XBPQAdapter","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/XBPQAdapter.js\"))"},{"col_type":"movie_3","name":"AI匹配","path":"AiMatching","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/AiMatching.js\"))"},{"col_type":"movie_3","name":"AppYsV2适配器","path":"AppYsV2Adapter","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/AppYsV2Adapter.js\"))"},{"col_type":"movie_3","name":"视频嗅探","path":"videoConfig","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/videoConfig.js\"))"},{"col_type":"movie_3","name":"Drpy加密","path":"drpyEncrypt","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/drpyEncrypt.js\"))"},{"col_type":"movie_3","name":"编辑视频源","path":"editSources","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/editSources.js\"))"},{"col_type":"movie_3","name":"编辑本地配置","path":"editLocalConfigList","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/editLocalConfigList.js\"))"},{"col_type":"movie_3","name":"子页面管理","path":"subPageManage","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/subPageManage.js\"))"},{"col_type":"movie_3","name":"intent#js#","path":"intent","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/intent.js\"))"},{"col_type":"movie_3","name":"导入处理","path":"difference","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/difference.js\"))"},{"col_type":"movie_3","name":"XYQ适配器","path":"XYQAdapter","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/XYQAdapter.js\"))"},{"col_type":"movie_3","name":"默认推荐","path":"recommend","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/recommend.js\"))"},{"col_type":"movie_3","name":"XBPQ自动规则","path":"XBPQrule","rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/XBPQrule.js\"))"}],"title":"DrpyHiker","author":"@LoyDgIk&zetalpha","version":57,"type":"video","url":"hiker://empty##fypage","col_type":"movie_3","class_name":"","class_url":"","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/main.js\"))","searchFind":"js:\neval(request(\"hiker://files/data/DrpyHiker/subpage/search.js\"))","search_url":"hiker://empty?s=**&page=fypage","group":"①推荐","detail_col_type":"movie_1","detail_find_rule":"","sdetail_col_type":"movie_1","sdetail_find_rule":"","ua":"mobile","preRule":"/*<$>\n@include start\nhttp://hiker.nokia.press/hikerule/rulelist.json?id=6916&auth=1d35e8f0-22e8-5270-a9d1-826f53f177ad\n@include end\n<$>*/\n","pages":"[{\"col_type\":\"movie_3\",\"name\":\"drpy\",\"path\":\"drpy\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/drpy.js\\\"))\"},{\"col_type\":\"movie_1_vertical_pic_blur\",\"name\":\"详细页面\",\"path\":\"detailed\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/detailed.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"解析文件\",\"path\":\"configs\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/configs.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"解析管理\",\"path\":\"ruleManage\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/ruleManage.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"解析编辑\",\"path\":\"ruleEdit\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/ruleEdit.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"解析导入\",\"path\":\"import\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/import.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"视频解析\",\"path\":\"videoUrl\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/videoUrl.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"创建订阅\",\"path\":\"createSubscription\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/createSubscription.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"解析订阅\",\"path\":\"subscribe\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/subscribe.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"运行时配置管理\",\"path\":\"runtimeConfig\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/runtimeConfig.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"编辑配置\",\"path\":\"createConfig\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/createConfig.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"换源弹窗\",\"path\":\"ChangeSourcePop\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/ChangeSourcePop.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"drpy管理\",\"path\":\"DrpyManage\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/DrpyManage.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"指定搜索弹窗\",\"path\":\"SearchAllowPop\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/SearchAllowPop.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"分类\",\"path\":\"categorys\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/categorys.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"本地规则管理\",\"path\":\"LocalDir\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/LocalDir.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"默认保存选择\",\"path\":\"sharedefaultpath\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/sharedefaultpath.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"小说\",\"path\":\"novel\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/novel.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"主页\",\"path\":\"mian\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/mian.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"主页处理\",\"path\":\"MianLoad\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/MianLoad.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"Ui管理\",\"path\":\"UIManage\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/UIManage.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"LocalProxy\",\"path\":\"LocalProxy\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/LocalProxy.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"JavaGZIP\",\"path\":\"GZIP\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/GZIP.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"支持作者\",\"path\":\"Donate.v\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/Donate.v.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"通用方法\",\"path\":\"methods\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/methods.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"更新日志\",\"path\":\"updateRecords\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/updateRecords.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"T4适配器\",\"path\":\"T4Adapter\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/T4Adapter.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"T0适配器\",\"path\":\"T0Adapter\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/T0Adapter.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"T1适配器\",\"path\":\"T1Adapter\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/T1Adapter.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"二级方法\",\"path\":\"methods_er\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/methods_er.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"主题编辑\",\"path\":\"ThemeEdit\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/ThemeEdit.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"规则测试\",\"path\":\"ruleTest\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/ruleTest.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"XBPQ适配器\",\"path\":\"XBPQAdapter\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/XBPQAdapter.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"AI匹配\",\"path\":\"AiMatching\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/AiMatching.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"AppYsV2适配器\",\"path\":\"AppYsV2Adapter\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/AppYsV2Adapter.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"视频嗅探\",\"path\":\"videoConfig\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/videoConfig.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"Drpy加密\",\"path\":\"drpyEncrypt\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/drpyEncrypt.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"编辑视频源\",\"path\":\"editSources\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/editSources.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"编辑本地配置\",\"path\":\"editLocalConfigList\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/editLocalConfigList.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"子页面管理\",\"path\":\"subPageManage\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/subPageManage.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"intent#js#\",\"path\":\"intent\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/intent.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"导入处理\",\"path\":\"difference\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/difference.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"XYQ适配器\",\"path\":\"XYQAdapter\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/XYQAdapter.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"默认推荐\",\"path\":\"recommend\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/recommend.js\\\"))\"},{\"col_type\":\"movie_3\",\"name\":\"XBPQ自动规则\",\"path\":\"XBPQrule\",\"rule\":\"js:\\neval(request(\\\"hiker://files/data/DrpyHiker/subpage/XBPQrule.js\\\"))\"}]","proxy":"","icon":""},{"last_chapter_rule":"js:\neval(JSON.parse(request(\"hiker://page/main\")).rule);\nlet type = getParam('type', ''),\n    id = getParam('id', ''),\n    title = getParam('title', '');\nlet res = getDoubanRes(\"https://frodo.douban.com/api/v2/\" + type + \"/\" + id);\nlet update = \"\";\nif (title == '') {\n    let length = res.vendors.length;\n    update += length > 0 ? '共' + length + '个片源' : '暂无片源';\n    if (length > 0) {\n        let e = res.vendors[0];\n        update += e.episodes_info ? \"|\" + e.episodes_info : \"\";\n    }\n} else {\n    for (let e of res.vendors) {\n        if (e.title == title) {\n            update += e.episodes_info ? e.episodes_info : \"\";\n            break;\n        }\n    }\n}\nsetResult(update);","pageList":[{"col_type":"movie_3","name":"配置编辑界面","path":"setting-editor","rule":"js:\n/**\n * 通过传入 params 对象生成编辑界面\n * @param d 视界 setResult 用的列表\n * @param configKey config 的 key 值，比如我要拿 config.detailsViewConfigs，configKey 就传 \"detailsViewConfigs\"\n * @param params 编辑界面的配置\n *\n * 【params对象数据示例】\n * {\n        key: \"input_name\",\n        desc: \"请输入名称\",\n        type: 'textarea',\n        data: {\n            config: {\n                key: \"input_code\",\n                desc: \"请输入输入配置\",\n                type: 'textarea'\n            },\n        }\n    }\n */\nfunction modeEditPage(d, configKey, params) {\n    addListener('onClose', $.toString((params) => {\n        clearMyVar(params.key)\n        let datas = params.data;\n        let dataKeys = Object.keys(datas);\n        for (let i in dataKeys) {\n            let dataKey = dataKeys[i]\n            clearMyVar(datas[dataKey].key)\n        }\n    }, params))\n    d.push({\n        title: \"保存\",\n        desc: params.desc,\n        col_type: 'input',\n        extra: {\n            titleVisible: false,\n            defaultValue: getMyVar(params.key, \"\"),\n            type: params.type ? params.type : '',\n            onChange: 'putMyVar(\"' + params.key + '\", input)'\n        }\n    })\n    let datas = params.data;\n    let dataKeys = Object.keys(datas);\n    for (let dataKey of dataKeys) {\n        let data = datas[dataKey]\n        d.push({\n            title: \"保存\",\n            desc: data.desc,\n            col_type: 'input',\n            extra: {\n                titleVisible: false,\n                defaultValue: getMyVar(data.key, \"\"),\n                type: data.type ? data.type : '',\n                height: 5,\n                highlight: true,\n                onChange: 'putMyVar(\"' + data.key + '\", input)'\n            }\n        })\n    }\n    d.push({\n        title: '保存',\n        col_type: 'text_center_1',\n        url: $('hiker://empty#noLoading#').lazyRule((configKey, params) => {\n            let config = JSON.parse(request(getMyVar('qdb_config')))\n            let name = getMyVar(params.key, \"\");\n            if(name == '默认') return 'toast://默认配置无法编辑'\n            config[configKey].use = name\n            if (!config[configKey][name]) config[configKey][name] = {}\n            let datas = params.data;\n            let dataKeys = Object.keys(datas);\n            for (let i in dataKeys) {\n                let dataKey = dataKeys[i]\n                let data = datas[dataKey]\n                config[configKey][name][dataKey] = getMyVar(data.key, \"\");\n            }\n            writeFile(getMyVar('qdb_config'), JSON.stringify(config))\n            back();\n            return 'toast://保存成功'\n        }, configKey, params)\n    })\n}\n\n//自定义首页-配置编辑页面\nfunction homePageModeEditPage(d) {\n    d.push({\n        title: '<font color=\"red\">' + '返回数组,供setResult使用' + '</font>' + '<font color=\"#808080\"><br>' + '【内置函数】' + '<br>&nbsp;&nbsp;&nbsp;hiker://page/settingPage: 设置页(默认首页有使用示例)' + '</font>',\n        col_type: 'rich_text'\n    })\n    modeEditPage(d, \"homePageConfigs\", {\n        key: \"input_name\",\n        desc: \"请输入名称\",\n        type: 'input',\n        data: {\n            config: {\n                key: \"input_code\",\n                desc: \"请输入配置代码\",\n                type: 'textarea'\n            }\n        }\n    })\n}\n\n//自定义详情页面-配置编辑页面\nfunction detailViewModeEditPage(d) {\n    d.push({\n        title: '<font color=\"#808080\">' + '【内置变量】' + '<br>&nbsp;&nbsp;&nbsp;id: 片单id' + '<br>&nbsp;&nbsp;&nbsp;type: 片单类型' + '<br>&nbsp;&nbsp;&nbsp;title: 片单标题' + '</font>',\n        col_type: 'rich_text'\n    })\n    modeEditPage(d, \"detailsViewConfigs\", {\n        key: \"input_name\",\n        desc: \"请输入名称\",\n        // type: 'input'\n        data: {\n            config: {\n                key: \"input_code\",\n                desc: \"请输入配置代码\",\n                type: 'textarea'\n            },\n            setting: {\n                key: \"input_setting_code\",\n                desc: \"请输入设置页面代码\",\n                type: 'textarea'\n            }\n        }\n    })\n}\n\n//自定义解析-编辑页面\nfunction analysisModeEditPage(d) {\n    d.push({\n        title: '<font color=\"#808080\">' + '【解析代码内置变量】' + '<br>&nbsp;&nbsp;&nbsp;input: 视频链接' + '</font>',\n        col_type: 'rich_text'\n    })\n    modeEditPage(d, \"analysisConfigs\", {\n        key: \"input_name\",\n        desc: \"请输入名称\",\n        // type: 'input'\n        data: {\n            config: {\n                key: \"input_code\",\n                desc: \"请输入解析代码\",\n                type: 'textarea'\n            },\n            extra: {\n                key: 'input_extra',\n                desc: '请输入extra属性值',\n                type: 'textarea'\n            },\n            setting: {\n                key: \"input_setting_code\",\n                desc: \"请输入设置页面代码\",\n                type: 'textarea'\n            }\n        }\n    })\n}\n\nlet d = [];\nlet view = getParam(\"view\",\"\");\nif(view==\"analysisModeEditPage\"){\n    setPageTitle(\"自定义解析编辑\")\n    analysisModeEditPage(d);\n}else if(view==\"detailViewModeEditPage\"){\n    setPageTitle(\"自定义详情页编辑\")\n    detailViewModeEditPage(d);\n}else if(view==\"homePageModeEditPage\"){\n    setPageTitle(\"自定义首页编辑\")\n    homePageModeEditPage(d);\n}\nsetResult(d);"},{"col_type":"movie_3","name":"解除被封ip","path":"releaseIP","rule":"js:\nlet id = getParam('id');\nlet d = [];\nd.push({\n    title: '您已被封禁IP地址或触发了人机验证，请按照以下步骤处理(如不处理您将在一段时间内无法正常获取剧集列表)',\n    url: 'hiker://empty',\n    col_type: 'text_1'\n});\nd.push({\n    title: '1.点击此处导入自动获取Cookie插件',\n    url: $()\n        .lazyRule(() => {\n            let getDoubanCookie = \"(function(){if(window['location']['host']=='www.douban.com'){fy_bridge_app['writeFile']('hiker://files/cache/doubancookie.txt',fy_bridge_app['getCookie']('https://www.douban.com/'));}if(window['location']['host']=='m.douban.com'){fy_bridge_app['writeFile']('hiker://files/cache/doubancookie.txt',fy_bridge_app['getCookie']('https://m.douban.com/'));}}());\"\n            if (!fileExist('hiker://files/cache/global_getDoubanCookie.js')) {\n                writeFile('hiker://files/cache/global_getDoubanCookie.js', getDoubanCookie);\n            };\n            return 'rule://' + base64Encode('海阔视界，网页插件￥js_url￥global_getDoubanCookie@hiker://files/cache/global_getDoubanCookie.js');\n        }),\n    col_type: 'text_1'\n});\nd.push({\n    title: '2.点击此处进入网页进行登录或人机验证，完成后返回此页面',\n    url: 'https://movie.douban.com/subject/' + id + '/',\n    col_type: 'text_1'\n});\nd.push({\n    title: '3.完成登录或人机验证后返回影片详情页面重新进入',\n    url: 'hiker://empty',\n    col_type: 'text_1'\n});\nsetResult(d)"},{"col_type":"movie_3","name":"抢救页面","path":"urgencyMode","rule":"js:\nlet d = [];\n\nd.push({\n  title: '很明显,出了一些小问题,建议查看设置',\n  desc: \"出错位置:\" + (typeof(pos) == 'undefined' ? '未知' : pos),\n  col_type: 'text_center_1',\n  url: 'hiker://empty',\n});\n\nd.push({\n    title: '点我进入设置页',\n    col_type: 'text_1',\n    url: \"hiker://page/settingPage\"\n})\n\nd.push({\n  title: '若修改设置不起作用,点我复制错误信息提交给开发者',\n  desc: e.toString(),\n  col_type: 'text_1',\n  url: 'copy://' + e.toString(),\n});\n\nsetResult(d);\n"},{"col_type":"movie_3","name":"顺佬专用详情页","path":"Sdetail","rule":"js:\neval(MY_RULE.preRule);\neval(JSON.parse(request(\"hiker://page/main\")).rule);\nlet type = getParam('type', ''),\n    id = getParam('id', '');\ndetailsView(type, id);"},{"col_type":"movie_3","name":"主代码","path":"main","rule":"let version = 202402170001;\r\neval(JSON.parse(request('hiker://page/utils')).rule);\r\n\r\nlet parseVideoUrlLazy = $.toString(() => {\r\n    eval(JSON.parse(request('hiker://page/main')).rule);\r\n    let analysisConfigs = getConfig('analysisConfigs');\r\n    let analysisConfig = analysisConfigs[analysisConfigs.use].config;\r\n    let result = \"toast://解析失败\";\r\n    try {\r\n        if (analysisConfig.startsWith(\"(\")) {\r\n            eval('result = ' + analysisConfig);\r\n        } else {\r\n            eval('result = ' + '(() => {' + analysisConfig + '})()');\r\n        }\r\n    } catch (e) {}\r\n    return result;\r\n})\r\n\r\n//首页\r\nfunction home() {\r\n    if (getItem(\"start\", \"\") == \"\") {\r\n        setItem(\"start\", \"1\");\r\n        setItem('update', String(version));\r\n        confirm({\r\n            title: '温馨提示',\r\n            content: '此规则仅限学习交流使用\\n请于导入后24小时内删除!\\n\\n任何组织或个人不得以任何方式方法\\n传播此规则的整体或部分!!\\n\\n感谢大佬们提供的技术支持!!!',\r\n            confirm: '',\r\n            cancel: ''\r\n        })\r\n    } else {\r\n        let updateInfo = getItem('update', '');\r\n        if (updateInfo == '' || parseInt(updateInfo) < version) {\r\n            setItem('update', String(version));\r\n            confirm({\r\n                title: '本次更新内容',\r\n                content: '降低配置文件出错概率',\r\n                confirm: '',\r\n                cancel: ''\r\n            })\r\n        }\r\n    }\r\n    addListener(\"onClose\", $.toString(() => {\r\n        clearMyVar(\"qdb_config\");\r\n    }))\r\n    let homePageConfigs = getConfig('homePageConfigs');\r\n    let homePageConfig = homePageConfigs[homePageConfigs.use].config;\r\n    if (homePageConfig.startsWith(\"(\")) {\r\n        eval('d = ' + homePageConfig)\r\n    } else {\r\n        eval('d = ' + '(() => {' + homePageConfig + '})()')\r\n    }\r\n    setResult(d);\r\n}\r\n\r\n//海阔搜索\r\nfunction search() {\r\n    let wd = MY_URL.split(\"/#/\")[1];\r\n    let page = MY_PAGE;\r\n    let s = getDoubanRes('https://frodo.douban.com/api/v2/search/subjects?type=movie&q=' + wd + (page ? '&start=' + (page - 1) * 20 : '&start=0') + '&count=20');\r\n\r\n    let list = s.items;\r\n    let detailsViewConfigs = getConfig('detailsViewConfigs');\r\n\r\n    let items = [];\r\n    list.forEach(data => {\r\n        if (data.target_type == 'doulist_cards') {\r\n            data.target.doulists.forEach(e => {\r\n                items.push({\r\n                    title: e.title,\r\n                    url: $('hiker://empty/$page{fypage}#noHistory#')\r\n                        .rule((type, id) => {\r\n                            eval(JSON.parse(request('hiker://page/main')).rule);\r\n                            if (type === \"playlist\") {\r\n                                douList(id, MY_PAGE, 50);\r\n                            } else if (type == \"collection\" || type == \"chart\") {\r\n                                subjectCollectionList(MY_PAGE, 50, id);\r\n                            }\r\n                        }, e.target_type, e.id),\r\n                    img: e.cover_url + \"@Referer=\" + e.cover_url\r\n                })\r\n            })\r\n        } else if (data.target_type == 'chart') {\r\n            let e = data.target;\r\n            items.push({\r\n                title: e.title,\r\n                url: $('hiker://empty/$page{fypage}#noHistory#')\r\n                    .rule((type, id) => {\r\n                        eval(JSON.parse(request('hiker://page/main')).rule);\r\n                        if (type === \"playlist\") {\r\n                            douList(id, MY_PAGE, 50);\r\n                        } else if (type == \"collection\" || type == \"chart\") {\r\n                            subjectCollectionList(MY_PAGE, 50, id);\r\n                        }\r\n                    }, data.target_type, e.id),\r\n                img: e.cover_url + \"@Referer=\" + e.cover_url\r\n            })\r\n        } else {\r\n            let type = data.target_type,\r\n                id = data.target.id,\r\n                title = data.target.title;\r\n            let useConfig = detailsViewConfigs[detailsViewConfigs.use].config;\r\n            let urlParams = {};\r\n            if (useConfig.startsWith('{')) {\r\n                eval('urlParams = ' + useConfig);\r\n            } else {\r\n                urlParams.url = $(\"hiker://empty#noHistory##immersiveTheme#\" + '?type=' + type + '&id=' + id)\r\n                    .rule((type, id, title, useConfig) => {\r\n                        eval(JSON.parse(request('hiker://page/main')).rule);\r\n                        if (type === \"playlist\") {\r\n                            douList(id, MY_PAGE, 50);\r\n                        } else {\r\n                            eval(useConfig);\r\n                        }\r\n                    }, type, id, title, useConfig);\r\n            }\r\n            items.push({\r\n                title: title,\r\n                img: data.target.cover_url + \"@Referer=\" + data.target.cover_url,\r\n                desc: data.type_name,\r\n                content: data.target.card_subtitle,\r\n                url: urlParams.url,\r\n                extra: urlParams.extra\r\n            });\r\n        }\r\n\r\n    });\r\n\r\n    setSearchResult({\r\n        data: items\r\n    });\r\n}\r\n\r\n//二级页面\r\nfunction erji() {\r\n    addListener(\"onClose\", $.toString(() => {\r\n        clearMyVar(\"findList\");\r\n        clearMyVar(\"hotList\");\r\n        clearMyVar(\"classlist\");\r\n        clearMyVar(\"playlist\");\r\n        clearMyVar(\"rankList\");\r\n        clearMyVar(\"ranking\");\r\n        clearMyVar(\"coming\");\r\n        clearMyVar(\"analysis\");\r\n    }))\r\n\r\n    let choice = MY_URL.split('/#/')[1].split('#')[0];\r\n    let d = [];\r\n    switch (choice) {\r\n        case \"推荐\":\r\n            eval(JSON.parse(request('hiker://page/main')).rule);\r\n            d = findList(MY_PAGE, 10);\r\n            break;\r\n        case \"热门\":\r\n            eval(JSON.parse(request('hiker://page/main')).rule);\r\n            d = hotList(MY_PAGE, 10);\r\n            break;\r\n        case \"分类\":\r\n            eval(JSON.parse(request('hiker://page/main')).rule);\r\n            d = classList(MY_PAGE, 15);\r\n            break;\r\n        case \"片单\":\r\n            eval(JSON.parse(request('hiker://page/main')).rule);\r\n            d = playList(MY_PAGE, 10);\r\n            break;\r\n        case \"榜单\":\r\n            eval(JSON.parse(request('hiker://page/main')).rule);\r\n            d = rankList(MY_PAGE, 10);\r\n            break;\r\n        case \"将上映\":\r\n            eval(JSON.parse(request('hiker://page/main')).rule);\r\n            d = comingList(MY_PAGE, 10);\r\n            break;\r\n    }\r\n    setResult(d);\r\n}\r\n\r\n//获取豆瓣资源,返回json数据\r\nfunction getDoubanRes(url) {\n    //log(url)\r\n    var cc =null;\r\n    if($.type(url)=='object'){\r\n         cc=url.cc;\r\n         url = url.url;\r\n    }\r\n    var _url = url;\r\n    if (url.indexOf('apikey') === -1) {\r\n        _url += (url.indexOf('?') === -1 ? '?' : '&') + \"apikey=0dad551ec0f84ed02907ff5c42e8ec70\"\r\n    }\r\n    let _ts = parseInt(Date.now()/1000).toString();\r\n    let m = 'GET&' + encodeURIComponent(url.split('douban.com')[1].split('?')[0]) + '&' + _ts;\r\n    eval(getCryptoJS());\r\n    let _sig = hexToBase64(CryptoJS.HmacSHA1(m,'bf7dddc7c9cfe6f7').toString());\r\n    _url += '&_sig=' + _sig +'&_ts=' + _ts;\r\n    //let cookieCache = 'hiker://files/cache/doubancookie.txt';\r\n    let s = fetch(_url, {\r\n        headers: {\r\n            //'Cookie': fetch(cookieCache),\r\n            \"User-Agent\": \"Rexxar-Core/0.1.3 api-client/1 com.douban.frodo/7.9.0.beta2(215) Android/25 product/TAS-AL00 vendor/HUAWEI model/TAS-AL00  rom/android  network/wifi  platform/mobile com.douban.frodo/7.9.0.beta2(215) Rexxar/1.2.151  platform/mobile 1.2.151\"\r\n        },\r\n        method: 'GET'\r\n        //body: 'host=frodo.douban.com'\r\n    });\r\n    let json = JSON.parse(s);\r\n    if(json.localized_message){\r\n        cc= cc==null ? 1 : cc+1;\r\n        log('重试次数:'+cc);\r\n        if(cc>5){throw new Error('超时')}\r\n        java.lang.Thread.sleep(1000);\r\n        return getDoubanRes({url:url,cc:cc});\r\n    }else{\r\n        return json;\r\n    }\r\n}\r\n\r\n//根据评分信息获取评分星星样式\r\nfunction computeRating(e, t) {\r\n    let i = \"\";\r\n    for (let r = 0; r < 5; r++) r < Math.round(t / (e / 5)) ? i += \"★\" : i += \"☆\";\r\n    return i;\r\n}\r\n\r\n//评分详情页面\r\nfunction rating(type, id, ratingCount) {\r\n    setPageTitle('影片信息');\r\n    //评分统计\r\n    let i = getDoubanRes(\"https://frodo.douban.com/api/v2/\" + type + \"/\" + id + \"/rating\");\r\n\r\n    let r = \"<h2>评分统计</h2>\";\r\n\r\n    r += '<small><font color=\"grey\">' + ratingCount + '人评分' + '</font></small><br/>';\r\n\r\n    let starColor = getConfig('starColor');\r\n    if (i.stats.length == 0) {\r\n        i.stats = [0, 0, 0, 0, 0];\r\n    }\r\n    i.stats.reverse().forEach(((value, index) => {\r\n        r += '<font color=' + starColor + '>' + [\"★★★★★\", \"★★★★☆\", \"★★★☆☆\", \"★★☆☆☆\", \"★☆☆☆☆\"][index] + \"</font>&nbsp;\";\r\n\r\n        r += function(e) {\r\n            let t1 = '';\r\n            for (let i = 0; i < e; i++) t1 += \"▇\";\r\n            let t2 = '';\r\n            for (let i = 0; i < 10 - e; i++) t2 += \"▇\";\r\n            return t1.fontcolor('#ffac2d') + t2.fontcolor('#e5e1e4');\r\n        }((10 * value).toFixed(0));\r\n\r\n        r += '&nbsp;<small><font color=\"grey\">' + (100 * value)\r\n            .toFixed(1) + \"%</font></small><br/>\";\r\n    }));\r\n\r\n    r += [i.done_count ? i.done_count + \"人看过\" : \"\", i.doing_count ? i.doing_count + \"人在看\" : \"\", i.wish_count ? i.wish_count + \"人想看\" : \"\"].join(\"&nbsp;&nbsp;\")\r\n        .small()\r\n        .fontcolor('grey');\r\n    //影片信息\r\n    i = getDoubanRes(\"https://frodo.douban.com/api/v2/\" + type + \"/\" + id + \"/desc\");\r\n    let l = i.html.replace(/[\\n\\t\\r]/g, \"\")\r\n        .replace(/<td\\s*[^>]*>(.*?)<\\/td>/g, \"<span>$1</span>\")\r\n        .replace(/<tr\\s*[^>]*>(.*?)<\\/tr>/g, \"<teng>$1</teng><br/>\");\r\n    parseDomForArray(l, \"section&&teng\").forEach((e => {\r\n        let t = parseDomForArray(e, \"span\");\r\n        l = l.replace(t[0], '<font color=\"grey\">' + t[0].replace(/<span\\s*[^>]*>(.*?)<\\/span>/g, \"$1\") + \"：</font>\")\r\n    }));\r\n    r += l;\r\n    //获奖记录\r\n    let page = MY_PAGE;\r\n    let s = getDoubanRes(\"https://frodo.douban.com/api/v2/\" + type + \"/\" + id + \"/awards?start=\" + 20 * (page - 1) + \"&count=20\");\r\n    r += \"<h2>获奖记录\" + '<small><font color=\"grey\">' + (s.total != 0 ? '(共' + s.total + '项)' : '(暂无)') + '</font></small>' + \"</h2>\";\r\n    //r += '<font color=\"grey\">' + (s.total != 0 ? '共' + s.total + '项' : '暂无') + '</font><br/>';\r\n    let r2 = '';\r\n    s.awards.forEach(e => {\r\n        r2 += (e.ceremony.title + '(' + e.ceremony.year + ')').big().bold() + '<small>(<a href=\"hiker://empty#noHistory#@rule=js:eval(JSON.parse(fetch(`hiker://page/main`)).rule);awardView(`' + e.ceremony.id + '`,`' + e.ceremony.title + '`);\">查看详情</a>)</small>' + '<br/>';\r\n        e.categories.forEach(item => {\r\n            r2 += (item.category.title + (item.is_won ? '' : '(提名)') + '&nbsp;').fontcolor(\"grey\");\r\n            r2 += item.celebrities.map(celebrity => celebrity.name).join('&nbsp;/&nbsp;');\r\n            r2 += '<br/>';\r\n        })\r\n        r2 += '<br/>';\r\n    })\r\n\r\n    if (page == 1) {\r\n        setHomeResult({\r\n            data: [{\r\n                title: r + r2,\r\n                col_type: \"rich_text\"\r\n            }]\r\n        })\r\n    } else if(s.awards.length == 0){\r\n        setResult([]);\r\n    } else{\r\n        setHomeResult({\r\n            data: [{\r\n                title: r2,\r\n                col_type: \"rich_text\"\r\n            }]\r\n        })\r\n    }\r\n}\r\n\r\n//奖项详情页面\r\nfunction awardView(id, name) {\r\n    setPageTitle(name);\r\n    let s = getDoubanRes(\"https://frodo.douban.com/api/v2/ceremony/\" + id);\r\n    let a = [];\r\n    a.push({\r\n        title: '““””' + (s.title + '(' + s.year + ')').big().bold(),\r\n        col_type: 'text_1',\r\n        extra: {\r\n            lineVisible: false\r\n        }\r\n    })\r\n    s.playlists.forEach(e => {\r\n        a.push({\r\n            title: e.title,\r\n            desc: '共' + e.items_count + '部',\r\n            img: e.cover_url + '@Referer=' + e.cover_url,\r\n            url: $('hiker://empty#noHistory#').rule((id) => {\r\n                eval(JSON.parse(request('hiker://page/main')).rule);\r\n                douList(id);\r\n            }, e.id)\r\n        })\r\n    })\r\n\r\n    let r = '';\r\n    s.prizes.forEach(e => {\r\n        r += '<h4>获奖名单(' + e.title + ')</h4>';\r\n        e.categories.forEach(t => {\r\n            r += (t.title + '&nbsp;&nbsp;&nbsp;&nbsp;').fontcolor(\"grey\").bold();\r\n            r += t.results.map(item => !!item.info ? item.info + ('&nbsp;-&nbsp;' + item.title + '&nbsp;&nbsp;').fontcolor(\"grey\") : item.title).join('&nbsp;/&nbsp;').bold();\r\n            r += '<br/>';\r\n        })\r\n    })\r\n    a.push({\r\n        title: r,\r\n        col_type: 'rich_text'\r\n    })\r\n\r\n    let i = [];\r\n    s.ceremonies.forEach(e => {\r\n        i.push({\r\n            title: e.title,\r\n            desc: e.year + '年',\r\n            col_type: 'movie_3',\r\n            img: e.pic.normal + '@Referer=' + e.pic.normal,\r\n            url: $('hiker://empty#noHistory#').rule((id, name) => {\r\n                eval(JSON.parse(request('hiker://page/main')).rule);\r\n                awardView(id, name);\r\n            }, e.id, e.title)\r\n        })\r\n    })\r\n    if (i.length > 0) {\r\n        i.unshift({\r\n            title: '““””' + '历届回顾'.big().bold(),\r\n            col_type: 'text_1',\r\n            extra: {\r\n                lineVisible: false\r\n            }\r\n        })\r\n    }\r\n\r\n    setResult(a.concat(i));\r\n}\r\n\r\n//剧照页面\r\nfunction stillsList(type, id) {\r\n    addListener('onClose', 'clearMyVar(\"photo\")');\r\n    let page = MY_PAGE;\r\n    let items = {\r\n        剧照: 'photos',\r\n        海报: 'covers'\r\n    };\r\n    let a = [];\r\n    let temp = getMyVar('photo', 'photos');\r\n    let color = getConfig('chooseColor');\r\n    for (let i in items) {\r\n        a.push({\r\n            title: temp == items[i] ? '““””' + i.fontcolor(color) : i,\r\n            col_type: 'scroll_button',\r\n            url: $('hiker://empty').lazyRule((t) => {\r\n                putMyVar('photo', t);\r\n                refreshPage();\r\n                return 'hiker://empty';\r\n            }, items[i])\r\n        })\r\n    }\r\n\r\n    let r = getDoubanRes(\"https://frodo.douban.com/api/v2/\" + type + \"/\" + id + \"/\" + temp + \"?start=\" + 30 * (page - 1) + \"&count=30\");\r\n    let l = r.photos.map((e => ({\r\n        title: e.create_time,\r\n        img: e.image.small.url + \"@Referer=\" + e.image.small.url,\r\n        url: e.image.large.url + \"?type=.jpg@Referer=\" + e.image.large.url + \"?type=.jpg\",\r\n        col_type: \"pic_2\"\r\n    })));\r\n\r\n    if (page == 1) {\r\n        l.unshift({\r\n            col_type: \"blank_block\"\r\n        });\r\n        if (temp == 'photos') {\r\n            l.unshift({\r\n                title: \"<big>共<strong> \" + r.total + ' </strong>张剧照</big><br/><small><font color=\"grey\">官方剧照：' + r.o + \"张&nbsp;截图：\" + r.c + \"张&nbsp;工作照：\" + r.w + \"张&nbsp;新闻图片：\" + r.n + \"张&nbsp;粉丝图片：\" + r.f + \"张</font></small>\",\r\n                col_type: \"rich_text\"\r\n            })\r\n        } else {\r\n            l.unshift({\r\n                title: \"<big>共<strong> \" + r.total + \"</strong>张海报</big>\",\r\n                col_type: \"rich_text\"\r\n            })\r\n        }\r\n        l = a.concat(l);\r\n    }\r\n    setHomeResult({\r\n        data: l\r\n    })\r\n}\r\n\r\n//演职人员页面\r\nfunction credits(type, id) {\r\n    let i = getDoubanRes(\"https://frodo.douban.com/api/v2/\" + type + \"/\" + id + \"/credits\");\r\n    let r = [];\r\n    i.credits.forEach((e => {\r\n        r.push({\r\n            title: e.title,\r\n            col_type: \"rich_text\"\r\n        });\r\n        e.celebrities.forEach((e => {\r\n            r.push({\r\n                title: e.name + \"\\n\" + e.latin_name,\r\n                desc: e.character,\r\n                img: e.avatar.normal + \"@Referer=\" + e.avatar.normal,\r\n                col_type: 'movie_1_vertical_pic',\r\n                url: $('hiker://empty#noHistory##immersiveTheme#').rule((e) => {\r\n                    eval(JSON.parse(request('hiker://page/main')).rule);\r\n                    elessarView(e.uri.split(\"subject_id=\")[1], e.id, e.name);\r\n                }, e)\r\n            })\r\n        }))\r\n    }));\r\n    setHomeResult({\r\n        data: r\r\n    })\r\n}\r\n\r\n//短评页面\r\nfunction shortCommentList(type, id) {\r\n    addListener('onClose', \"clearMyVar('shortcomment')\");\r\n    let items = {\r\n        热门: 'hot',\r\n        最新: 'latest'\r\n    }\r\n    let u = getMyVar('shortcomment', 'hot');\r\n    let a = [];\r\n    let chooseColor = getConfig('chooseColor') // || \"#FA7298\";\r\n    for (i in items) {\r\n        a.push({\r\n            title: u === items[i] ? '““””<b> <font color=' + chooseColor + '>' + i + ' </font></b>' : i,\r\n            col_type: 'scroll_button',\r\n            url: $('hiker: //empty').lazyRule((t) => {\r\n                putMyVar(\"shortcomment\", t);\r\n                refreshPage();\r\n                return 'hiker://empty'\r\n            }, items[i])\r\n        })\r\n    }\r\n\r\n    let page = MY_PAGE;\r\n    let r = getDoubanRes(\"https://frodo.douban.com/api/v2/\" + type + \"/\" + id + \"/interests?start=\" + 30 * (page - 1) + \"&count=30&order_by=\" + u);\r\n    let l = [];\r\n    let starColor = getConfig('starColor');\r\n    r.interests.forEach((e => {\r\n        let t = \"\";\r\n        if (e.rating) {\r\n            t = computeRating(e.rating.max, e.rating.value);\r\n        }\r\n        l.push({\r\n            title: e.user.name,\r\n            img: e.user.avatar,\r\n            url: e.user.url,\r\n            col_type: \"avatar\"\r\n        });\r\n        l.push({\r\n            title: e.comment + (t ? '<br/><small>看过 <font color=' + starColor + '>' + t + \"</font></small>\" : \"\") + '<br/><small><font color=\"grey\">' + e.vote_count + \"赞•\" + /\\d{4}-\\d{1,2}-\\d{1,2}/g.exec(e.create_time) + \"</font></small>\",\r\n            col_type: \"rich_text\"\r\n        });\r\n        l.push({\r\n            col_type: \"line\"\r\n        })\r\n    }));\r\n\r\n    if (page == 1) {\r\n        l.unshift({\r\n            col_type: \"blank_block\"\r\n        });\r\n        l.unshift({\r\n            title: \"<big>共<strong> \" + r.total + \" </strong>条短评</big>\",\r\n            col_type: \"rich_text\"\r\n        });\r\n        setHomeResult({\r\n            data: a.concat(l)\r\n        })\r\n    } else {\r\n        setHomeResult({\r\n            data: l\r\n        })\r\n    }\r\n}\r\n\r\n//剧评页面\r\nfunction dramaReviewList(type, id) {\r\n    addListener('onClose', \"clearMyVar('dramareview')\");\r\n    let items = {\r\n        热门: 'hot',\r\n        最新: 'latest'\r\n    }\r\n    let u = getMyVar('dramareview', 'hot');\r\n    let a = [];\r\n    let chooseColor = getConfig('chooseColor');\r\n    for (i in items) {\r\n        a.push({\r\n            title: u === items[i] ? '““””<b> <font color=' + chooseColor + '>' + i + ' </font></b>' : i,\r\n            col_type: 'scroll_button',\r\n            url: $('hiker: //empty').lazyRule((t) => {\r\n                putMyVar(\"dramareview\", t);\r\n                refreshPage();\r\n                return 'hiker://empty'\r\n            }, items[i])\r\n        })\r\n    }\r\n\r\n    let page = MY_PAGE\r\n    let r = getDoubanRes(\"https://frodo.douban.com/api/v2/\" + type + \"/\" + id + \"/reviews?start=\" + 15 * (page - 1) + \"&count=15&order_by=\" + u);\r\n    let l = [];\r\n    let starColor = getConfig('starColor');\r\n    r.reviews.forEach((e => {\r\n        let t = \"\";\r\n        if (e.rating) {\r\n            t = computeRating(e.rating.max, e.rating.value);\r\n        }\r\n        let i = e.comments_count ? e.comments_count + \"回复\" : \"\",\r\n            r = e.useful_count ? e.useful_count + \"有用\" : \"\",\r\n            o = e.reshares_count ? e.reshares_count + \"转发\" : \"\";\r\n\r\n        r = i && r ? \"•\" + r : r;\r\n        o = (i || r) && o ? \"•\" + o : o;\r\n        l.push({\r\n            title: e.user.name,\r\n            img: e.user.avatar,\r\n            url: e.user.url,\r\n            col_type: \"avatar\"\r\n        })\r\n        l.push({\r\n            title: \"<strong>\" + e.title + \"</strong><br/>\" + e.abstract + '   <small>(<a href=\"hiker://empty#noHistory#@rule=js:eval(JSON.parse(fetch(`hiker://page/main`)).rule);dramaReviewView(' + e.id + ')\">更多</a>)</small>' + (t ? '<br/><small>看过 <font color=' + starColor + '>' + t + \"</font></small>\" : \"\") + '<br/><small><font color=\"grey\">' + i + r + o + \"</font></small>\",\r\n            col_type: \"rich_text\"\r\n        })\r\n        l.push({\r\n            col_type: \"line\"\r\n        })\r\n    }));\r\n\r\n    if (page == 1) {\r\n        l.unshift({\r\n            col_type: \"blank_block\"\r\n        });\r\n        l.unshift({\r\n            title: \"<big>共<strong> \" + r.total + \" </strong>条剧评</big>\",\r\n            col_type: \"rich_text\"\r\n        });\r\n\r\n        setHomeResult({\r\n            data: a.concat(l)\r\n        })\r\n    } else {\r\n        setHomeResult({\r\n            data: l\r\n        })\r\n    }\r\n}\r\n\r\n//预告片页面\r\nfunction trailers(type, id) {\r\n    setPageTitle('预告-片段-花絮')\r\n    let i = getDoubanRes(\"https://frodo.douban.com/api/v2/\" + type + \"/\" + id + \"/trailers\").trailers;\r\n    i.forEach((e => {\r\n        e.col_type = \"movie_2\", e.desc = e.subject_title + \"•\" + e.create_time, e.img = e.cover_url, e.url = e.video_url\r\n    }));\r\n\r\n    let r = i.filter((e => \"A\" === e.type));\r\n    let l = i.filter((e => \"B\" === e.type));\r\n    let o = i.filter((e => \"C\" === e.type));\r\n\r\n    if (r.length > 0) {\r\n        r.unshift({\r\n            title: \"预告\",\r\n            col_type: \"rich_text\"\r\n        })\r\n    }\r\n    if (l.length > 0) {\r\n        l.unshift({\r\n            title: \"片段\",\r\n            col_type: \"rich_text\"\r\n        })\r\n    }\r\n    if (o.length > 0) {\r\n        o.unshift({\r\n            title: \"花絮\",\r\n            col_type: \"rich_text\"\r\n        })\r\n    }\r\n\r\n    setHomeResult({\r\n        data: r.concat(l)\r\n            .concat(o)\r\n    })\r\n}\r\n\r\n//视频评论页面\r\nfunction videoComment(type, id) {\r\n    let i = getDoubanRes(\"https://frodo.douban.com/api/v2/\" + type + \"/\" + id + \"/videos\").videos;\r\n    i.forEach((e => {\r\n        e.col_type = \"movie_2\", e.desc = e.author.name + \"•\" + e.create_time, e.img = e.cover_url + \"@Referer=\" + e.cover_url, e.url = e.video_url\r\n    }))\r\n    if (i.length > 0) {\r\n        i.unshift({\r\n            title: \"视频评论\",\r\n            col_type: \"rich_text\"\r\n        })\r\n    }\r\n    setHomeResult({\r\n        data: i\r\n    })\r\n}\r\n\r\n//演职人员详情页面\r\nfunction elessarView(id, pid, name) {\r\n    setPageTitle(name);\r\n    let i = getDoubanRes(\"https://frodo.douban.com/api/v2/elessar/subject/\" + id);\r\n    let a = [];\r\n    a.push({\r\n        title: '““””' + (i.title + '(' + i.latin_title + ')').big().bold(),\r\n        desc: '““””' + i.desc.match(/\\<p\\>.*\\<\\/p\\>/)[0],\r\n        img: i.cover.normal.url + '@Referer=' + i.cover.normal.url,\r\n        col_type: 'movie_1_vertical_pic_blur',\r\n        url: $('hiker://empty').rule((desc, extra, name) => {\r\n            let info = extra.info.map(e => e.join(':&nbsp;'));\r\n            setResult([{\r\n                title: '<h2>' + name + '</h2>' + info.join('<br/>') + desc.match(/\\<p\\>.*\\<\\/p\\>/)[0],\r\n                col_type: 'rich_text'\r\n            }])\r\n        }, i.desc, i.extra, i.title)\r\n    })\r\n    \r\n    let index = i.modules.findIndex(cur => cur.type == \"award_result_collection\");\r\n    if (index > -1) {\r\n        let e = i.modules[index].payload;\r\n        a.push({\r\n            title: '““””' + '获奖记录'.big().bold() + '<small>(共' + e.total + '项)</small>',\r\n            desc: '““””<strong>' + e.awards[0].ceremony.title + '</strong>\\n' + e.awards[0].category.title + (e.awards[0].is_won ? '' : '(提名)'),\r\n            col_type: 'text_center_1',\r\n            url: $('hiker://empty/#/$page{fypage}#noHistory#').rule((id, count) => {\r\n                eval(JSON.parse(request('hiker://page/main')).rule);\r\n                elessarAwards(id, count);\r\n            }, e.id, e.total),\r\n            extra: {\r\n                lineVisible: false\r\n            }\r\n        })\r\n    }\r\n    \r\n    index = i.modules.findIndex(cur => cur.type == \"work_collections\");\r\n    if (index > -1) {\r\n        let e2 = i.modules[index].payload;\r\n        a.push({\r\n            col_type: 'line'\r\n        })\r\n        a.push({\r\n            title: '““””' + '影视作品'.big().bold() + ('(共' + e2.collections[0].total + '部)').small(),\r\n            col_type: 'text_center_1',\r\n            url: $('hiker://empty/#/$page{fypage}#noHistory#').rule((id, type) => {\r\n                eval(JSON.parse(request('hiker://page/main')).rule);\r\n                elessarWorks(id, type);\r\n            }, e2.id, e2.collections[0].title),\r\n            extra: {\r\n                lineVisible: false\r\n            }\r\n        })\r\n\r\n        let detailsViewConfigs = getConfig('detailsViewConfigs');\r\n        let works = e2.collections[0].works;\r\n        let length = works.length <= 3 ? works.length : 3;\r\n        for (let i = 0; i < length; i++) {\r\n            let e = works[i];\r\n            let rating = \"\";\r\n            if (e.subject.extra.rating_group.rating) {\r\n                rating = computeRating(e.subject.extra.rating_group.rating.max, e.subject.extra.rating_group.rating.value) + \" \" + e.subject.extra.rating_group.rating.value + \"分\";\r\n            }\r\n\r\n            let type = e.subject.subtype,\r\n                id = e.subject.id,\r\n                title = e.subject.title;\r\n            let useConfig = detailsViewConfigs[detailsViewConfigs.use].config;\r\n            let urlParams = {};\r\n            if (useConfig.startsWith('{')) {\r\n                eval('urlParams = ' + useConfig);\r\n            } else {\r\n                urlParams.url = $(\"hiker://empty#noHistory##immersiveTheme#\" + '?type=' + type + '&id=' + id).rule((type, id, title, useConfig) => {\r\n                    eval(JSON.parse(request('hiker://page/main')).rule);\r\n                    if (type === \"playlist\") {\r\n                        douList(id, MY_PAGE, 50);\r\n                    } else {\r\n                        eval(useConfig);\r\n                    }\r\n                }, type, id, title, useConfig);\r\n            }\r\n            a.push({\r\n                title: title,\r\n                img: e.subject.cover.normal.url + \"@Referer=\" + e.subject.cover.normal.url,\r\n                desc: rating,\r\n                col_type: 'movie_3',\r\n                url: urlParams.url,\r\n                extra: urlParams.extra\r\n            })\r\n        }\r\n        /*a.push({\r\n            title: '查看更多',\r\n            img: 'https://joker-tx.coding.net/p/hikerimg/d/hiker/git/raw/master/img/more_ver.png?download=false',\r\n            col_type: 'movie_3',\r\n            url: $('hiker://empty/#/$page{fypage}#noHistory#')\r\n                .rule((id, type) => {\r\n                eval(JSON.parse(request('hiker://page/main')).rule);\r\n                elessarWorks(id, type);\r\n            }, e2.id, e2.collections[0].title)\r\n        })*/\r\n    }\r\n    \r\n    index = i.modules.findIndex(cur => cur.type == \"photos\");\r\n    if (index > -1) {\r\n        let e3 = i.modules[index].payload;\r\n        a.push({\r\n            col_type: 'line'\r\n        })\r\n        a.push({\r\n            title: '““””' + '演员照片'.big().bold() + ('(共' + e3.total + '张)').small(),\r\n            col_type: 'text_center_1',\r\n            url: $('hiker://empty/#/$page{fypage}#noHistory#').rule((pid) => {\r\n                eval(JSON.parse(request('hiker://page/main')).rule);\r\n                elessarPhotos(pid);\r\n            }, pid),\r\n            extra: {\r\n                lineVisible: false\r\n            }\r\n        })\r\n\r\n        let plength = e3.photos.length <= 2 ? e3.photos.length : 2;\r\n        for (let i = 0; i < plength; i++) {\r\n            a.push({\r\n                //title: e3.photos[0].description,\r\n                col_type: 'card_pic_2',\r\n                desc: '0',\r\n                img: e3.photos[i].image.normal.url + '@Referer=' + e3.photos[i].image.normal.url,\r\n                url: e3.photos[i].image.normal.url + '@Referer=' + e3.photos[i].image.normal.url\r\n            })\r\n        }\r\n\r\n        /*a.push({\r\n            //title: '查看更多',\r\n            img: 'https://joker-tx.coding.net/p/hikerimg/d/hiker/git/raw/master/img/more.png?download=false',\r\n            col_type: 'card_pic_2',\r\n            desc: '0',\r\n            url: $('hiker://empty/#/$page{fypage}#noHistory#')\r\n                .rule((pid) => {\r\n                eval(JSON.parse(request('hiker://page/main')).rule);\r\n                elessarPhotos(pid);\r\n            }, pid)\r\n        })*/\r\n    }\r\n\r\n    setResult(a);\r\n}\r\n\r\n//演职人员获奖详情页面\r\nfunction elessarAwards(id, count) {\r\n    let i = getDoubanRes(\"https://frodo.douban.com/api/v2/elessar/award_result_collection/\" + id + \"/awards?start=\" + 30 * (MY_PAGE - 1) + \"&count=30\");\r\n    let l = [];\r\n    let detailsViewConfigs = getConfig('detailsViewConfigs');\r\n    i.awards.forEach(t => {\r\n        l.push({\r\n            title: (t.year+\"\").bold().big(),\r\n            col_type: 'rich_text'\r\n        })\r\n\r\n        for (let i = 0; i < t.modules.length; i++) {\r\n            let e = t.modules[i];\r\n            if (!e.ceremony || !e.category) {\r\n                let rating = \"\";\r\n                if (e.extra.rating_group.rating) {\r\n                    rating = computeRating(e.extra.rating_group.rating.max, e.extra.rating_group.rating.value) + \" \" + e.extra.rating_group.rating.value + \"分\";\r\n                }\r\n                let type = e.subtype,\r\n                    id = e.id,\r\n                    title = e.title;\r\n                let useConfig = detailsViewConfigs[detailsViewConfigs.use].config;\r\n                let urlParams = {};\r\n                if (useConfig.startsWith('{')) {\r\n                    eval('urlParams = ' + useConfig);\r\n                } else {\r\n                    urlParams.url = $(\"hiker://empty#noHistory##immersiveTheme#\" + '?type=' + type + '&id=' + id).rule((type, id, title, useConfig) => {\r\n                        eval(JSON.parse(request('hiker://page/main')).rule);\r\n                        if (type === \"playlist\") {\r\n                            douList(id, MY_PAGE, 50);\r\n                        } else {\r\n                            eval(useConfig);\r\n                        }\r\n                    }, type, id, title, useConfig);\r\n                }\r\n                l.push({\r\n                    title: title,\r\n                    img: e.cover.normal.url + \"@Referer=\" + e.cover.normal.url,\r\n                    desc: rating + '\\n' + e.extra.short_info,\r\n                    url: urlParams.url,\r\n                    extra: urlParams.extra\r\n                })\r\n            } else {\r\n                l.push({\r\n                    title: e.ceremony.title.bold() + '<small>(<a href=\"hiker://empty#noHistory#@rule=js:eval(JSON.parse(fetch(`hiker://page/main`)).rule);awardView(`' + e.ceremony.id + '`,`' + e.ceremony.title + '`);\">查看详情</a>)</small>' + '<br/>' + (e.category.title + (e.is_won ? '' : '(提名)')).small(),\r\n                    col_type: 'rich_text'\r\n                })\r\n            }\r\n        }\r\n    })\r\n\r\n    if (MY_PAGE == 1) {\r\n        l.unshift({\r\n            col_type: \"blank_block\"\r\n        })\r\n        l.unshift({\r\n            title: \"<big>共<strong> \" + count + \" </strong>项获奖记录</big>\",\r\n            col_type: \"rich_text\"\r\n        })\r\n    }\r\n    setResult(l);\r\n}\r\n\r\n//演职人员作品页面\r\nfunction elessarWorks(id, type) {\r\n    let i = getDoubanRes(\"https://frodo.douban.com/api/v2/elessar/work_collections/\" + id + \"/works?start=\" + 30 * (MY_PAGE - 1) + \"&count=30&collection_title=\" + type);\r\n\r\n    let l = [];\r\n    let detailsViewConfigs = getConfig('detailsViewConfigs');\r\n    i.works.forEach((e => {\r\n        let rating = \"\";\r\n        if (e.subject.extra.rating_group.rating) {\r\n            rating = computeRating(e.subject.extra.rating_group.rating.max, e.subject.extra.rating_group.rating.value) + \" \" + e.subject.extra.rating_group.rating.value + \"分\";\r\n        }\n        \n        let year = e.subject.extra ? (e.subject.extra.year ? '('+e.subject.extra.year+')' : '') : '';\r\n\r\n        let type = e.subject.subtype,\r\n            id = e.subject.id,\r\n            title = e.subject.title;\r\n        let useConfig = detailsViewConfigs[detailsViewConfigs.use].config;\r\n        let urlParams = {};\r\n        if (useConfig.startsWith('{')) {\r\n            eval('urlParams = ' + useConfig);\r\n        } else {\r\n            urlParams.url = $(\"hiker://empty#noHistory##immersiveTheme#\" + '?type=' + type + '&id=' + id).rule((type, id, title, useConfig) => {\r\n                eval(JSON.parse(request('hiker://page/main')).rule);\r\n                if (type === \"playlist\") {\r\n                    douList(id, MY_PAGE, 50);\r\n                } else {\r\n                    eval(useConfig);\r\n                }\r\n            }, type, id, title, useConfig);\r\n        }\r\n        l.push({\r\n            title: title + year,\r\n            img: e.subject.cover.normal.url + \"@Referer=\" + e.subject.cover.normal.url,\r\n            desc: e.roles.join(\"•\") + \"\\n\" + rating + '\\n' + e.subject.extra.short_info,\r\n            col_type: 'movie_1_vertical_pic',\r\n            url: urlParams.url,\r\n            extra: urlParams.extra\r\n        })\r\n    }))\r\n\r\n    if (MY_PAGE == 1) {\r\n        l.unshift({\r\n            col_type: \"blank_block\"\r\n        })\r\n        l.unshift({\r\n            title: \"<big>共<strong> \" + i.total + \" </strong>部作品</big>\",\r\n            col_type: \"rich_text\"\r\n        })\r\n    }\r\n    setHomeResult({\r\n        data: l\r\n    })\r\n}\r\n\r\n//演职人员照片页面\r\nfunction elessarPhotos(pid) {\r\n    let i = getDoubanRes(\"https://frodo.douban.com/api/v2/celebrity/\" + pid + \"/photos?start=\" + 30 * (MY_PAGE - 1) + \"&count=30\");\r\n    let l = [];\r\n    i.photos.forEach(e => {\r\n        l.push({\r\n            col_type: 'card_pic_2',\r\n            desc: '0',\r\n            img: e.image.normal.url + '@Referer=' + e.image.normal.url,\r\n            url: e.image.normal.url + '@Referer=' + e.image.normal.url\r\n        })\r\n    })\r\n    if (MY_PAGE == 1) {\r\n        l.unshift({\r\n            col_type: \"blank_block\"\r\n        })\r\n        l.unshift({\r\n            title: \"<big>共<strong> \" + i.total + \" </strong>张照片</big>\",\r\n            col_type: \"rich_text\"\r\n        })\r\n    }\r\n    setResult(l);\r\n}\r\n\r\n//剧评详情页面\r\nfunction dramaReviewView(id) {\r\n    setPageTitle('剧评详情');\r\n    let i = getDoubanRes(\"https://frodo.douban.com/api/v2/review/\" + id);\r\n\r\n    i.photos.forEach((e => {\r\n        i.content = i.content.replace('id=\"' + e.tag_name + '\"', 'src=\"' + e.image.large.url + \"@Referer=\" + e.image.large.url + '\"')\r\n    }));\r\n\r\n    let l = getDoubanRes(\"https://frodo.douban.com/api/v2/review/\" + id + \"/comments\");\r\n    let o = [{\r\n        col_type: \"blank_block\"\r\n    }, {\r\n        title: \"<big><strong>评论：</strong></big>\",\r\n        col_type: \"rich_text\"\r\n    }];\r\n\r\n    l.comments.length > 0 ? l.comments.forEach((e => {\r\n        o.push({\r\n            title: e.author.name,\r\n            img: e.author.avatar,\r\n            url: e.author.url,\r\n            col_type: \"avatar\"\r\n        })\r\n        o.push({\r\n            title: e.text + (e.replies.length > 0 ? ' <small><a href=\"hiker://empty#noHistory#@rule=js:eval(JSON.parse(fetch(`hiker://page/main`)).rule);dramaReviewReplyView(' + e.id + ');\">[查看回复]</a></small>' : \"\"),\r\n            col_type: \"rich_text\"\r\n        })\r\n        o.push({\r\n            col_type: \"line\"\r\n        })\r\n    })) : o.push({\r\n        title: '<font color=\"grey\">( •̥́ ˍ •̀ू )还没有人评论...</font>',\r\n        col_type: \"rich_text\"\r\n    });\r\n\r\n    let a = \"\";\r\n    if (i.rating) {\r\n        a = computeRating(i.rating.max, i.rating.value);\r\n    }\r\n    let color = JSON.parse(fetch(getMyVar('qdb_config')))\r\n        .starColor || \"#ffac2d\";\r\n    let s = [{\r\n        title: \"<big><strong>\" + i.title + \"</strong></big>\",\r\n        col_type: \"rich_text\"\r\n    }, {\r\n        title: i.user.name + \" 的剧评\",\r\n        img: i.user.avatar,\r\n        url: i.user.url,\r\n        col_type: \"avatar\"\r\n    }, {\r\n        title: (i.spoiler ? \"<small><font color=#f20c00>这篇影评可能有剧透</font></small><br/>\" : \"\") + (a ? '<small>看过 <font color=' + color + '>' + a + \"</font><br/></small>\" : \"\") + '<small><font color=\"grey\">' + /\\d{4}-\\d{1,2}-\\d{1,2}/g.exec(i.create_time) + \"</font></small>\",\r\n        col_type: \"rich_text\"\r\n    }, {\r\n        col_type: \"line_blank\"\r\n    }, {\r\n        title: i.content.replace(/<div\\s*[^>]*>(.*?)<\\/div>/g, \"$1\") + (i.is_original ? '<small><font color=\"grey\">&copy;本文版权归该作者所有，任何形式转载请联系作者。</font></small>' : \"\"),\r\n        col_type: \"rich_text\"\r\n    }];\r\n\r\n    setHomeResult({\r\n        data: s.concat(o)\r\n    })\r\n}\r\n\r\n//剧评回复页面\r\nfunction dramaReviewReplyView(id) {\r\n    setPageTitle('回复详情');\r\n    let t = getDoubanRes(\"https://frodo.douban.com/api/v2/review/comment/\" + id + \"/replies\");\r\n    let i = [];\r\n    t.replies.forEach((e => {\r\n        i.push({\r\n            title: e.author.name,\r\n            img: e.author.avatar,\r\n            url: e.author.url,\r\n            col_type: \"avatar\"\r\n        })\r\n        i.push({\r\n            title: (e.ref_comment.has_ref ? '回复@<font color=\"blue\">' + e.ref_comment.author.name + \"</font>：\" : \"\") + e.text,\r\n            col_type: \"rich_text\"\r\n        })\r\n        i.push({\r\n            col_type: \"line\"\r\n        })\r\n    }))\r\n\r\n    setHomeResult({\r\n        data: i\r\n    })\r\n}\r\n\r\n//相关推荐页面\r\nfunction recommendations(type, id){\r\n    setPageTitle('相关推荐');\r\n    let res = getDoubanRes(\"https://frodo.douban.com/api/v2/\"+ type + \"/\" + id + \"/recommendations\");\r\n    let detailsViewConfigs = getConfig('detailsViewConfigs');\r\n    let i = res.map((e => {\r\n        let type = e.type,\r\n            id = e.id,\r\n            title = e.title;\r\n        let useConfig = detailsViewConfigs[detailsViewConfigs.use].config;\r\n        let urlParams = {};\r\n        if (useConfig.startsWith('{')) {\r\n            eval('urlParams = ' + useConfig);\r\n        } else {\r\n            urlParams.url = $(\"hiker://empty#noHistory##immersiveTheme#\" + '?type=' + type + '&id=' + id).rule((type, id, title, useConfig) => {\r\n                eval(JSON.parse(request('hiker://page/main')).rule);\r\n                if (type === \"playlist\") {\r\n                    douList(id, MY_PAGE, 50);\r\n                } else {\r\n                    eval(useConfig);\r\n                }\r\n            }, type, id, title, useConfig);\r\n        }\r\n        return {\r\n            title: title,\r\n            url: urlParams.url,\r\n            extra: urlParams.extra,\r\n            col_type: 'movie_3',\r\n            img: e.pic ? e.pic.normal + \"@Referer=\" + e.pic.normal : e.cover.url + '@Referer=' + e.cover.url,\r\n            desc: e.null_rating_reason || e.rating.value\r\n        }\r\n    }));\r\n\r\n    setHomeResult({\r\n        data: i\r\n    })\r\n}\r\n\r\n//影片详情页面\r\nfunction detailsView(type, id) {\r\n    let i = getDoubanRes(\"https://frodo.douban.com/api/v2/\" + type + \"/\" + id);\r\n    setPageTitle(i.title);\r\n    let info = \"\";\r\n    if (i.is_tv) {\r\n        info = [i.countries ? i.countries.join(\" \") : null, i.genres ? i.genres.join(\" \") : null, i.pubdate ? i.pubdate[0] + \"首播\" : null, i.episodes_count ? \"共\" + i.episodes_count + \"集\" : null, i.durations ? \"单集片长\" + i.durations : null].filter((e => null !== e)).join(\" / \");\r\n    } else {\r\n        info = [i.countries ? i.countries.join(\" \") : null, i.genres ? i.genres.join(\" \") : null, i.pubdate ? i.pubdate[0] + \"首播\" : null, i.durations ? \"片长\" + i.durations : null].filter((e => null !== e)).join(\" / \");\r\n    }\r\n    let infoItems = [{\r\n        title: i.title + \"\\n\" + i.original_title + \"(\" + i.year + \")\",\r\n        desc: info || i.card_subtitle,\r\n        img: i.pic.normal + \"@Referer=\" + i.pic.normal,\r\n        col_type: \"movie_1_vertical_pic_blur\",\r\n        url: 'hiker://page/settingPage?view=analysisSettingModule#noHistory#',\r\n        extra: {\r\n            newWindow: true,\r\n            windowId: '高级功能',\r\n            gradient: true\r\n        }\r\n    }];\r\n\r\n    let rating = \"\";\r\n    if (i.rating) {\r\n        rating = computeRating(i.rating.max, i.rating.value);\r\n    }\r\n    let ratingItems = [];\r\n    let color = getConfig('starColor');\r\n    let ratingTitle = ''\r\n    if (rating) {\r\n        ratingTitle = '豆瓣评分™'.big().bold() + '<br>' + rating.fontcolor(color) + '&nbsp;&nbsp;' + (i.rating.value.toFixed(1) + '分').big().bold();\r\n    } else {\r\n        ratingTitle = '暂无评分'.big().bold() + '<br>' + '点我查看影片信息'.fontcolor('grey');\r\n    }\r\n    ratingItems = [{\r\n        title: '““””' + ratingTitle,\r\n        col_type: \"text_center_1\",\r\n        extra: {\r\n            lineVisible: false\r\n        },\r\n        url: $('hiker://empty/#/$page{fypage}#noHistory#').rule((type, id, ratingCount) => {\r\n            eval(JSON.parse(request('hiker://page/main')).rule);\r\n            rating(type, id, ratingCount);\r\n        }, i.subtype, i.id, i.rating ? i.rating.count : 0)\r\n    }];\r\n\r\n    let relatedItems = [{\r\n        title: \"剧照\",\r\n        img: \"https://gitcode.net/qq_41846756/hiker/-/raw/master/img/剧照.png\",\r\n        url: $('hiker://empty/#/$page{fypage}#noHistory#').rule((t) => {\r\n            eval(JSON.parse(request('hiker://page/main')).rule);\r\n            stillsList(t[0], t[1]);\r\n        }, [i.subtype, i.id]),\r\n        col_type: \"icon_round_small_4\"\r\n    }, {\r\n        title: \"演职\",\r\n        img: \"https://gitcode.net/qq_41846756/hiker/-/raw/master/img/演职.png\",\r\n        url: $('hiker://empty/#/$page{fypage}#noHistory#').rule((t) => {\r\n            eval(JSON.parse(request('hiker://page/main')).rule);\r\n            credits(t[0], t[1]);\r\n        }, [i.subtype, i.id]),\r\n        col_type: \"icon_round_small_4\"\r\n    }, {\r\n        title: \"短评\",\r\n        img: \"https://gitcode.net/qq_41846756/hiker/-/raw/master/img/短评.png\",\r\n        url: $('hiker://empty/#/$page{fypage}#noHistory#').rule((t) => {\r\n            eval(JSON.parse(request('hiker://page/main')).rule);\r\n            shortCommentList(t[0], t[1]);\r\n        }, [i.subtype, i.id]),\r\n        col_type: \"icon_round_small_4\"\r\n    }, {\r\n        title: \"剧评\",\r\n        img: \"https://gitcode.net/qq_41846756/hiker/-/raw/master/img/剧评.png\",\r\n        url: $('hiker://empty/#/$page{fypage}#noHistory#').rule((t) => {\r\n            eval(JSON.parse(request('hiker://page/main')).rule);\r\n            dramaReviewList(t[0], t[1]);\r\n        }, [i.subtype, i.id]),\r\n        col_type: \"icon_round_small_4\"\r\n    }];\r\n\r\n    let introItems = [];\r\n    if (i.intro) {\r\n        introItems = [{\r\n            title: \"““””<big><strong>剧情简介</strong></big>\",\r\n            col_type: \"text_center_1\",\r\n            extra: {\r\n                lineVisible: false\r\n            },\r\n            url: 'hiker://empty'\r\n        }, {\r\n            title: \"&nbsp;&nbsp;&nbsp;&nbsp;\" + i.intro.replace(/\\n/g, \"<br/>&nbsp;&nbsp;&nbsp;&nbsp;\").replace(/\\s/g, \" \").replace(/\\t/g, \" \"),\r\n            col_type: \"rich_text\"\r\n        }]\r\n    }\r\n\r\n    let videoRelatedItems = [];\r\n    if (i.trailer) {\r\n        videoRelatedItems.push({\r\n            title: \"““””<big><strong>预告</strong></big>\",\r\n            col_type: \"text_center_1\",\r\n            extra: {\r\n                lineVisible: false\r\n            },\r\n            url: 'hiker://empty'\r\n        });\r\n        videoRelatedItems.push({\r\n            title: i.trailer.title,\r\n            img: i.trailer.cover_url,\r\n            url: i.trailer.video_url,\r\n            desc: i.trailer.subject_title + \"•\" + i.trailer.create_time,\r\n            col_type: \"movie_2\"\r\n        });\r\n        videoRelatedItems.push({\r\n            title: '查看更多',\r\n            img: \"https://gitcode.net/qq_41846756/hiker/-/raw/master/img/more.png\",\r\n            col_type: \"movie_2\",\r\n            url: $('hiker://empty/#/$page{fypage}#noHistory#').rule((t) => {\r\n                eval(JSON.parse(request('hiker://page/main')).rule);\r\n                trailers(t[0], t[1]);\r\n            }, [i.subtype, i.id]),\r\n        });\r\n    }\r\n    if (i.video) {\r\n        videoRelatedItems.push({\r\n            title: \"““””<big><strong>视频评论</strong></big>\",\r\n            col_type: \"text_center_1\",\r\n            extra: {\r\n                lineVisible: false\r\n            },\r\n            url: 'hiker://empty'\r\n        });\r\n        videoRelatedItems.push({\r\n            title: i.video.title,\r\n            img: i.video.cover_url + \"@Referer=\" + i.video.cover_url,\r\n            url: i.video.video_url,\r\n            desc: i.video.author.name + \"•\" + i.video.create_time,\r\n            col_type: \"movie_2\"\r\n        });\r\n        videoRelatedItems.push({\r\n            title: '查看更多',\r\n            img: \"https://gitcode.net/qq_41846756/hiker/-/raw/master/img/more.png\",\r\n            col_type: \"movie_2\",\r\n            url: $('hiker://empty/#/$page{fypage}#noHistory#').rule((t) => {\r\n                eval(JSON.parse(request('hiker://page/main')).rule);\r\n                videoComment(t[0], t[1]);\r\n            }, [i.subtype, i.id]),\r\n        });\r\n    }\r\n\r\n    let config = JSON.parse(fetch(getMyVar('qdb_config')));\r\n\r\n    let analysisConfigs = getConfig('analysisConfigs', config);\r\n    let extraConfig = analysisConfigs[analysisConfigs.use].extra || '{}';\r\n    let extra = {};\r\n    try {\r\n        if (extraConfig.startsWith('{')) eval('extra=' + extraConfig);\r\n    } catch (e) {}\r\n    let videoItems = [];\r\n    videoUrlsModule(videoItems, type, id, ['icon_2', 'icon_small_4'], parseVideoUrlLazy, i, extra);\r\n    if (videoItems.length > 0) {\r\n        videoItems.unshift({\r\n            title: \"““””<big><strong>在线观看</strong></big>\",\r\n            col_type: \"text_center_1\",\r\n            extra: {\r\n                lineVisible: false\r\n            },\r\n            url: 'hiker://empty'\r\n        })\r\n    } else {\r\n        videoItems.unshift({\r\n            title: \"““””<big><strong>尚无片源</strong></big>\",\r\n            col_type: \"text_center_1\",\r\n            extra: {\r\n                lineVisible: false\r\n            },\r\n            url: 'toast://真的没片源'\r\n        })\r\n    }\r\n\r\n    let quickSearchConfigs = getConfig('quickSearchConfigs', config);\r\n    let quickSearchItems = [];\r\n    quickSearchConfigs.order.forEach(quickSearchItem => {\r\n        if (quickSearchConfigs[quickSearchItem]) {\r\n            quickSearchItems.push({\r\n                title: quickSearchItem,\r\n                img: quickSearchConfigs[quickSearchItem].pic,\r\n                col_type: quickSearchConfigs.mode || 'icon_small_4',\r\n                url: 'hiker://search?s=' + i.title + '&rule=' + quickSearchConfigs[quickSearchItem].name\r\n            })\r\n        }\r\n    })\r\n    if (quickSearchItems.length > 0) {\r\n        quickSearchItems.unshift({\r\n                title: '““””<strong><big>快速搜索</big></strong>',\r\n                col_type: 'text_center_1',\r\n                extra: {\r\n                    lineVisible: false\r\n                },\r\n                url: 'hiker://empty'\r\n            })\r\n            /*quickSearchItems.unshift({\r\n                col_type: 'line'\r\n            })*/\r\n    }\r\n\r\n    setHomeResult({\r\n        data: infoItems.concat(ratingItems)\r\n            .concat(relatedItems)\r\n            .concat({\r\n                col_type: 'line'\r\n            })\r\n            .concat(quickSearchItems)\r\n            .concat({\r\n                col_type: 'line'\r\n            })\r\n            .concat(videoItems)\r\n            .concat({\r\n                col_type: 'line'\r\n            })\r\n            .concat(videoRelatedItems)\r\n            .concat({\r\n                col_type: 'line'\r\n            })\r\n            .concat(introItems)\r\n            .concat({\r\n                col_type: 'line',\r\n                extra:{\r\n                  id: 'recommendations'\r\n                }\r\n            })\r\n            .concat({\r\n                col_type: 'text_center_1',\r\n                title: '““””<small><font color=#871f78>以上数据来源于豆瓣，如您喜欢，请下载官方app</font></small>',\r\n                desc: '““””<small><font color=#f20c00>此规则仅限学习交流使用，请于导入后24小时内删除，任何组织或个人不得以任何方式方法传播此规则的整体或部分！</font></small>',\r\n                url: 'https://movie.douban.com/subject/' + id + '/',\r\n                extra: {\r\n                    lineVisible: false\r\n                }\r\n            })\r\n    })\r\n    be([{\r\n        func: function(obj){\r\n            eval(JSON.parse(request('hiker://page/main')).rule);\r\n            let res = getDoubanRes(obj.url);\r\n            \r\n            let detailsViewConfigs = getConfig('detailsViewConfigs');\r\n            let l = [res[0],res[1],res[2]];\r\n            let i = l.map((e => {\r\n                let type = e.type,\r\n                    id = e.id,\r\n                    title = e.title;\r\n                let useConfig = detailsViewConfigs[detailsViewConfigs.use].config;\r\n                let urlParams = {};\r\n                if (useConfig.startsWith('{')) {\r\n                    eval('urlParams = ' + useConfig);\r\n                } else {\r\n                    urlParams.url = $(\"hiker://empty#noHistory##immersiveTheme#\" + '?type=' + type + '&id=' + id).rule((type, id, title, useConfig) => {\r\n                        eval(JSON.parse(request('hiker://page/main')).rule);\r\n                        if (type === \"playlist\") {\r\n                            douList(id, MY_PAGE, 50);\r\n                        } else {\r\n                            eval(useConfig);\r\n                        }\r\n                    }, type, id, title, useConfig);\r\n                }\r\n                return {\r\n                    title: title,\r\n                    url: urlParams.url,\r\n                    extra: urlParams.extra,\r\n                    img: e.pic ? e.pic.normal + \"@Referer=\" + e.pic.normal : e.cover.url + '@Referer=' + e.cover.url,\r\n                    desc: e.null_rating_reason || e.rating.value\r\n                }\r\n            }));\r\n            addItemAfter('recommendations', i[2]);\r\n            addItemAfter('recommendations', i[1]);\r\n            addItemAfter('recommendations', i[0]);\r\n            addItemAfter('recommendations', {\r\n                title: \"““””<big><strong>相关推荐</strong></big>\",\r\n                col_type: \"text_center_1\",\r\n                url: $('hiker://empty/#noHistory#').rule((t) => {\r\n                    eval(JSON.parse(request('hiker://page/main')).rule);\r\n                    recommendations(t[0], t[1]);\r\n                }, [obj.type, obj.id]),\r\n                extra: {\r\n                    lineVisible: false\r\n                }\r\n            })\r\n            updateItem('recommendations',{col_type: 'line',extra:{id:'nooop'}})\r\n        },\r\n        param: {\r\n            url: \"https://frodo.douban.com/api/v2/\" + type + \"/\" + id + \"/recommendations\",\r\n            type: type,\r\n            id: id\r\n        }\r\n    }])\r\n}\r\n\r\n//推荐\r\nfunction findList(page, count) {\r\n    if (!getMyVar('findList')) putMyVar('findList', '{\"item\":\"movie\",\"playable\":\"0\",\"score\":\"0,10\"}');\r\n    let a = [];\r\n    let temp = JSON.parse(getMyVar('findList'));\r\n    let color = getConfig('chooseColor');\r\n\r\n    let items = {\r\n        电影: 'movie',\r\n        电视剧: 'tv'\r\n    }\r\n    for (i in items) {\r\n        a.push({\r\n            title: temp.item === items[i] ? '““””<b> <font color=' + color + '>' + i + ' </font></b>' : i,\r\n            col_type: 'scroll_button',\r\n            url: $('hiker: //empty#noLoading#').lazyRule((e) => {\r\n                let temp = JSON.parse(getMyVar('findList'));\r\n                temp.item = e;\r\n                putMyVar(\"findList\", JSON.stringify(temp));\r\n                refreshPage();\r\n                return 'hiker://empty'\r\n            }, items[i])\r\n        })\r\n    }\r\n\r\n    a.push({\r\n        col_type: 'blank_block'\r\n    })\r\n\r\n    let playable = {\r\n        全部影片: '0',\r\n        仅有片源: '1'\r\n    }\r\n    for (let r in playable) {\r\n        a.push({\r\n            title: temp.playable == playable[r] ? '““””<b> <font color=' + color + '>' + r + ' </font></b>' : r,\r\n            col_type: 'scroll_button',\r\n            url: $('hiker: //empty#noLoading#').lazyRule((e) => {\r\n                let temp = JSON.parse(getMyVar('findList'));\r\n                temp.playable = e;\r\n                putMyVar(\"findList\", JSON.stringify(temp));\r\n                refreshPage();\r\n                return 'hiker://empty'\r\n            }, playable[r])\r\n        })\r\n    }\r\n\r\n    a.push({\r\n        title: '““””<b> <font color=' + color + '>评分区间:' + temp.score.replace(',', '-') + ' </font></b>',\r\n        col_type: 'scroll_button',\r\n        url: $(temp.score.replace(',', '-'), '评分应在0-10之间').input(() => {\r\n            let temp = JSON.parse(getMyVar('findList'));\r\n            let inputs = input.split('-');\r\n            if (inputs.length == 2 && inputs.every(e => e >= 0 && e <= 10) && parseFloat(inputs[0]) < inputs[1]) {\r\n                temp.score = input.replace('-', ',');\r\n                putMyVar(\"findList\", JSON.stringify(temp));\r\n                refreshPage();\r\n                return 'hiker://empty'\r\n            } else {\r\n                return 'toast://请正确输入'\r\n            }\r\n        })\r\n    })\r\n\r\n    let s = getDoubanRes(\"https://frodo.douban.com/api/v2/\" + temp.item + \"/recommend\" + '?playable=' + temp.playable + '&score_range=' + temp.score + (page ? \"&start=\" + (page - 1) * count + \"&count=\" + count : \"&start=0&count=8\"));\r\n    let l = s.items;\r\n    l = l.filter(e => e.type !== \"ad\" && e.type !== \"tags\");\r\n\r\n    let detailsViewConfigs = getConfig('detailsViewConfigs');\r\n    let i = l.map((e => {\r\n        let type = e.type,\r\n            id = e.id,\r\n            title = e.subtitle || e.title;\r\n        let baseUrl = e.type === \"playlist\" ? 'hiker://empty/$page{fypage}' : 'hiker://empty#immersiveTheme#';\r\n        let useConfig = detailsViewConfigs[detailsViewConfigs.use].config;\r\n        let urlParams = {};\r\n        if (useConfig.startsWith('{')) {\r\n            eval('urlParams = ' + useConfig);\r\n        } else {\r\n            urlParams.url = $(baseUrl + \"#noHistory#\" + '?type=' + type + '&id=' + id).rule((type, id, title, useConfig) => {\r\n                eval(JSON.parse(request('hiker://page/main')).rule);\r\n                if (type === \"playlist\") {\r\n                    douList(id, MY_PAGE, 50);\r\n                } else {\r\n                    eval(useConfig);\r\n                }\r\n            }, type, id, title, useConfig);\r\n        }\r\n        return {\r\n            title: title + (type === \"playlist\" ? \"\" : \"（\" + e.year + \"）\"),\r\n            url: urlParams.url,\r\n            extra: urlParams.extra,\r\n            img: e.pic ? e.pic.normal + \"@Referer=\" + e.pic.normal : e.cover_url + \"@Referer=\" + e.cover_url,\r\n            desc: e.type !== \"playlist\" ? (e.tags.map((e => e.name)).join(\",\") + \"\\n\" + (e.rating ? computeRating(e.rating.max, e.rating.value) + \" \" + e.rating.value.toFixed(1) + \"分\" : \"暂无评分\")) : (e.title + \"\\n\" + e.tags.join(\",\") + \"\\n共\" + e.items_count + \"部\")\r\n        }\r\n    }));\r\n\r\n    return page > 1 ? i : a.concat(i);\r\n}\r\n\r\n//热门\r\nfunction hotList(page, count) {\r\n    if (!getMyVar('hotList')) putMyVar('hotList', '{\"item\":\"movie_showing?area=全部\",\"playable\":\"0\",\"sort\":\"recommend\",\"score\":\"0,10\"}');\r\n    let a = [];\r\n    let temp = JSON.parse(getMyVar('hotList'));\r\n    let color = getConfig('chooseColor');\r\n\r\n    let items = {\r\n        电影: {\r\n            影院热映电影: 'movie_showing?area=全部',\r\n            豆瓣热门电影: 'hot_gaia?area=全部',\r\n            热门华语电影: 'hot_gaia?area=华语',\r\n            热门欧美电影: 'hot_gaia?area=欧美',\r\n            热门韩国电影: 'hot_gaia?area=韩国',\r\n            热门日本电影: 'hot_gaia?area=日本'\r\n        },\r\n        电视剧: {\r\n            热播电视剧: 'tv_hot',\r\n            热播国产剧: 'tv_domestic',\r\n            热播欧美剧: 'tv_american',\r\n            热播日剧: 'tv_japanese',\r\n            热播韩剧: 'tv_korean',\r\n            热播动画: 'tv_animation'\r\n        },\r\n        综艺: {\r\n            热播综艺: 'show_hot',\r\n            国内综艺: 'show_domestic',\r\n            国外综艺: 'show_foreign'\r\n        }\r\n    }\r\n    for (let i in items) {\r\n        for (let j in items[i]) {\r\n            a.push({\r\n                title: temp.item == items[i][j] ? '““””<b> <font color=' + color + '>' + j + ' </font></b>' : j,\r\n                col_type: 'scroll_button',\r\n                url: $('hiker://empty#noLoading#').lazyRule((e) => {\r\n                    let temp = JSON.parse(getMyVar('hotList'));\r\n                    temp.item = e;\r\n                    putMyVar('hotList', JSON.stringify(temp));\r\n                    refreshPage();\r\n                    return 'hiker://empty'\r\n                }, items[i][j])\r\n            })\r\n        }\r\n        a.push({\r\n            col_type: \"blank_block\"\r\n        })\r\n    }\r\n\r\n    let sort = {\r\n        热度排序: 'recommend',\r\n        时间排序: 'time',\r\n        评分排序: 'rank'\r\n    }\r\n    for (let r in sort) {\r\n        a.push({\r\n            title: temp.sort == sort[r] ? '““””<b> <font color=' + color + '>' + r + ' </font></b>' : r,\r\n            col_type: 'scroll_button',\r\n            url: $('hiker: //empty#noLoading#').lazyRule((e) => {\r\n                let temp = JSON.parse(getMyVar('hotList'));\r\n                temp.sort = e;\r\n                putMyVar(\"hotList\", JSON.stringify(temp));\r\n                refreshPage();\r\n                return 'hiker://empty'\r\n            }, sort[r])\r\n        })\r\n    }\r\n\r\n    a.push({\r\n        col_type: \"blank_block\"\r\n    })\r\n\r\n    let playable = {\r\n        全部影片: '0',\r\n        仅有片源: '1'\r\n    }\r\n    for (let r in playable) {\r\n        a.push({\r\n            title: temp.playable == playable[r] ? '““””<b> <font color=' + color + '>' + r + ' </font></b>' : r,\r\n            col_type: 'scroll_button',\r\n            url: $('hiker: //empty#noLoading#').lazyRule((e) => {\r\n                let temp = JSON.parse(getMyVar('hotList'));\r\n                temp.playable = e;\r\n                putMyVar(\"hotList\", JSON.stringify(temp));\r\n                refreshPage();\r\n                return 'hiker://empty'\r\n            }, playable[r])\r\n        })\r\n    }\r\n\r\n    a.push({\r\n        title: '““””<b> <font color=' + color + '>评分区间:' + temp.score.replace(',', '-') + ' </font></b>',\r\n        col_type: 'scroll_button',\r\n        url: $(temp.score.replace(',', '-'), '评分应在0-10之间').input(() => {\r\n            let temp = JSON.parse(getMyVar('hotList'));\r\n            let inputs = input.split('-');\r\n            if (inputs.length == 2 && inputs.every(e => e >= 0 && e <= 10) && parseFloat(inputs[0]) < inputs[1]) {\r\n                temp.score = input.replace('-', ',');\r\n                putMyVar(\"hotList\", JSON.stringify(temp));\r\n                refreshPage();\r\n                return 'hiker://empty'\r\n            } else {\r\n                return 'toast://请正确输入'\r\n            }\r\n        })\r\n    })\r\n\r\n    let l = [];\r\n    if (temp.item.indexOf('?') != -1) {\r\n        let s = getDoubanRes(\"https://frodo.douban.com/api/v2/movie/\" + temp.item + '&playable=' + temp.playable + '&sort=' + temp.sort + '&score_range=' + temp.score + (page ? \"&start=\" + (page - 1) * count + \"&count=\" + count : \"&start=0&count=30\") + '&loc_id=108288');\r\n        l = s.items;\r\n    } else {\r\n        let s = getDoubanRes(\"https://frodo.douban.com/api/v2/subject_collection/\" + temp.item + '/items' + '?playable=' + temp.playable + '&sort=' + temp.sort + '&score_range=' + temp.score + (page ? \"&start=\" + (page - 1) * count + \"&count=\" + count : \"&start=0&count=30\"));\r\n        l = s.subject_collection_items;\r\n    }\r\n\r\n    let detailsViewConfigs = getConfig('detailsViewConfigs');\r\n    let i = l.map((e => {\r\n        let type = e.type,\r\n            id = e.id,\r\n            title = e.title;\r\n        let useConfig = detailsViewConfigs[detailsViewConfigs.use].config;\r\n        let urlParams = {};\r\n        if (useConfig.startsWith('{')) {\r\n            eval('urlParams = ' + useConfig);\r\n        } else {\r\n            urlParams.url = $(\"hiker://empty#noHistory##immersiveTheme#\" + '?type=' + type + '&id=' + id).rule((type, id, title, useConfig) => {\r\n                eval(JSON.parse(request('hiker://page/main')).rule);\r\n                if (type === \"playlist\") {\r\n                    douList(id, MY_PAGE, 50);\r\n                } else {\r\n                    eval(useConfig);\r\n                }\r\n            }, type, id, title, useConfig);\r\n        }\r\n        return {\r\n            title: title + \"（\" + e.year + \"）\",\r\n            url: urlParams.url,\r\n            extra: urlParams.extra,\r\n            img: e.pic ? e.pic.normal + \"@Referer=\" + e.pic.normal : e.cover.url + '@Referer=' + e.cover.url,\r\n            desc: (e.tags ? e.tags.map((e => e.name)).join(\",\") : e.card_subtitle) + \"\\n\" + (e.rating ? computeRating(e.rating.max, e.rating.value) + \" \" + e.rating.value.toFixed(1) + \"分\" : \"暂无评分\")\r\n        }\r\n    }));\r\n\r\n    return page > 1 ? i : a.concat(i);\r\n}\r\n\r\n//分类\r\nfunction classList(page, count) {\r\n    if (!getMyVar('classlist')){\r\n        putMyVar('classlist', JSON.stringify({subtype:\"\",local:\"\",year:\"\",class:\"\",rank:\"U\",type:\"\",filter:\"\",score:\"0,10\"}));\r\n    }\r\n    let a = [];\r\n    let temp = JSON.parse(getMyVar('classlist'));\r\n    let color = getConfig('chooseColor');\r\n\r\n    let items = {\r\n        subtype: [\"全部形式\", \"电影\", \"电视剧\", \"综艺\", \"动漫\", \"纪录片\", \"短片\"],\r\n        local: [\"全部地区\", \"自定义地区\", \"中国大陆\", \"美国\", \"中国香港\", \"中国台湾\", \"日本\", \"韩国\", \"英国\", \"法国\", \"德国\", \"意大利\", \"西班牙\", \"印度\", \"泰国\", \"俄罗斯\", \"伊朗\", \"加拿大\", \"澳大利亚\", \"爱尔兰\", \"瑞典\", \"巴西\", \"丹麦\"],\r\n        type: [\"全部类型\", \"自定义类型\", \"剧情\", \"喜剧\", \"动作\", \"爱情\", \"科幻\", \"动画\", \"悬疑\", \"惊悚\", \"恐怖\", \"犯罪\", \"同性\", \"音乐\", \"歌舞\", \"传记\", \"历史\", \"战争\", \"西部\", \"奇幻\", \"冒险\", \"灾难\", \"武侠\", \"\\u60c5\\u8272\"],\r\n        year: [\"全部年代\", \"自定义年份\", \"2020年代\", \"2010年代\", \"2000年代\", \"90年代\", \"80年代\", \"70年代\", \"60年代\", \"更早\"],\r\n        class: [\"全部特色\", \"自定义标签\", \"经典\", \"青春\", \"文艺\", \"搞笑\", \"励志\", \"魔幻\", \"感人\", \"女性\", \"黑帮\", \"治愈\", \"美食\", \"宗教\", \"小说改编\", \"超级英雄\"]\r\n    }\r\n    for (item in items) {\r\n        for (let i = 0; i < items[item].length; i++) {\r\n            let title = \"\";\r\n            if(temp[item] == items[item][i] || (temp[item] == \"\" && i == 0)){\r\n                title = '““””<b> <font color=' + color + '>' + items[item][i] + ' </font></b>';\r\n            }else{\r\n                title = items[item][i];\r\n            }\r\n            let url = $('hiker://empty#noLoading#').lazyRule((text,item) => {\r\n                        let temp = JSON.parse(getMyVar('classlist'));\r\n                        temp[item] = text.indexOf(\"全部\") != -1 ? \"\" : text;\r\n                        putMyVar(\"classlist\", JSON.stringify(temp));\r\n                        refreshPage();\r\n                        return 'hiker://empty'\r\n                    }, items[item][i], item);\r\n            \r\n            if(items[item][i] == \"自定义年份\"){\r\n                if(temp.year == \"自定义年份\"){\r\n                    title = '““””<b> <font color=' + color + '>自定义年份:' + temp.customYear + ' </font></b>';\r\n                }\r\n                \r\n                url = $(temp.customYear, '直接输入具体年份,例如2000').input(() => {\r\n                    let temp = JSON.parse(getMyVar('classlist'));\r\n                    if(input.length == 4){\r\n                        temp.customYear = input;\r\n                        temp.year = \"自定义年份\";\r\n                        putMyVar(\"classlist\", JSON.stringify(temp));\r\n                        refreshPage();\r\n                        return 'hiker://empty'\r\n                    }else{\r\n                        return 'toast://请正确输入'\r\n                    }\r\n                });\r\n            }else if(items[item][i] == \"自定义地区\"){\r\n                if(temp.local == \"自定义地区\"){\r\n                    title = '““””<b> <font color=' + color + '>自定义地区:' + temp.customLocal + ' </font></b>';\r\n                }\r\n                \r\n                url = $(temp.customLocal, '直接输入具体地区,例如中国大陆').input(() => {\r\n                    let temp = JSON.parse(getMyVar('classlist'));\r\n                    if(input.length > 0){\r\n                        temp.customLocal = input;\r\n                        temp.local = \"自定义地区\";\r\n                        putMyVar(\"classlist\", JSON.stringify(temp));\r\n                        refreshPage();\r\n                        return 'hiker://empty'\r\n                    }else{\r\n                        return 'toast://请正确输入'\r\n                    }\r\n                });\r\n            }else if(items[item][i] == \"自定义类型\"){\r\n                if(temp.type == \"自定义类型\"){\r\n                    title = '““””<b> <font color=' + color + '>自定义类型:' + temp.customType + ' </font></b>';\r\n                }\r\n                \r\n                url = $(temp.customType, '直接输入具体类型,例如剧情').input(() => {\r\n                    let temp = JSON.parse(getMyVar('classlist'));\r\n                    if(input.length > 0){\r\n                        temp.customType = input;\r\n                        temp.type = \"自定义类型\";\r\n                        putMyVar(\"classlist\", JSON.stringify(temp));\r\n                        refreshPage();\r\n                        return 'hiker://empty'\r\n                    }else{\r\n                        return 'toast://请正确输入'\r\n                    }\r\n                });\r\n            }else if(items[item][i] == \"自定义标签\"){\r\n                if(temp.class == \"自定义标签\"){\r\n                    title = '““””<b> <font color=' + color + '>自定义标签:' + temp.customClass + ' </font></b>';\r\n                }\r\n                \r\n                url = $(temp.customClass, '直接输入具体标签,例如经典\\n可写多个标签,使用\"英文逗号\"分隔').input(() => {\r\n                    let temp = JSON.parse(getMyVar('classlist'));\r\n                    if(input.length > 0){\r\n                        temp.customClass = input;\r\n                        temp.class = \"自定义标签\";\r\n                        putMyVar(\"classlist\", JSON.stringify(temp));\r\n                        refreshPage();\r\n                        return 'hiker://empty'\r\n                    }else{\r\n                        return 'toast://请正确输入'\r\n                    }\r\n                });\r\n            }\r\n            a.push({\r\n                title: title,\r\n                col_type: 'scroll_button',\r\n                url: url\r\n            })\r\n        }\r\n        a.push({\r\n            col_type: 'blank_block'\r\n        })\r\n    }\r\n\r\n    let rank = {\r\n        默认排序: \"U\",\r\n        热度: \"T\",\r\n        评分: \"S\",\r\n        时间: \"R\"\r\n    }\r\n    for (let r in rank) {\r\n        a.push({\r\n            title: temp.rank === rank[r] ? '““””<b> <font color=' + color + '>' + r + ' </font></b>' : r,\r\n            col_type: 'scroll_button',\r\n            url: $('hiker: //empty#noLoading#').lazyRule((e) => {\r\n                let temp = JSON.parse(getMyVar('classlist'));\r\n                temp.rank = e;\r\n                putMyVar(\"classlist\", JSON.stringify(temp));\r\n                refreshPage();\r\n                return 'hiker://empty'\r\n            }, rank[r])\r\n        })\r\n    }\r\n\r\n    a.push({\r\n        col_type: 'blank_block'\r\n    })\r\n\r\n    let filter = {\r\n        全部影片: '',\r\n        仅有片源: 'playable'\r\n    }\r\n    for (let r in filter) {\r\n        a.push({\r\n            title: temp.filter === filter[r] ? '““””<b> <font color=' + color + '>' + r + ' </font></b>' : r,\r\n            col_type: 'scroll_button',\r\n            url: $('hiker: //empty#noLoading#').lazyRule((e) => {\r\n                let temp = JSON.parse(getMyVar('classlist'));\r\n                temp.filter = e;\r\n                putMyVar(\"classlist\", JSON.stringify(temp));\r\n                refreshPage();\r\n                return 'hiker://empty'\r\n            }, filter[r])\r\n        })\r\n    }\r\n\r\n    a.push({\r\n        title: '““””<b> <font color=' + color + '>评分区间:' + temp.score.replace(',', '-') + ' </font></b>',\r\n        col_type: 'scroll_button',\r\n        url: $(temp.score.replace(',', '-'), '评分应在0-10之间').input(() => {\r\n            let temp = JSON.parse(getMyVar('classlist'));\r\n            let inputs = input.split('-');\r\n            if (inputs.length == 2 && inputs.every(e => e >= 0 && e <= 10) && parseFloat(inputs[0]) < inputs[1]) {\r\n                temp.score = input.replace('-', ',');\r\n                putMyVar(\"classlist\", JSON.stringify(temp));\r\n                refreshPage();\r\n                return 'hiker://empty'\r\n            } else {\r\n                return 'toast://请正确输入'\r\n            }\r\n        })\r\n    })\r\n\r\n    let s = getDoubanRes(\"https://frodo.douban.com/api/v2/movie/tag?\"\r\n            + (page ? \"start=\" + (page - 1) * count\r\n            + \"&count=\" + count : \"start=0&count=30\")\r\n            + \"&q=\" + temp.subtype\r\n            + \",\" + (temp.local==\"自定义地区\" ? temp.customLocal : temp.local)\r\n            + \",\" + (temp.type==\"自定义类型\" ? temp.customType : temp.type)\r\n            + \",\" + (temp.year==\"自定义年份\" ? temp.customYear : temp.year)\r\n            + \",\" + (temp.class==\"自定义标签\" ? temp.customClass : temp.class)\r\n            + \"&sort=\" + temp.rank + \"&score_range=\" + temp.score + '&filter=' + temp.filter);\r\n    let l = s.data;\r\n\r\n    let detailsViewConfigs = getConfig('detailsViewConfigs');\r\n    let i = l.map((e => {\r\n        let type = e.type,\r\n            id = e.id,\r\n            title = e.title;\r\n        let useConfig = detailsViewConfigs[detailsViewConfigs.use].config;\r\n        let urlParams = {};\r\n        if (useConfig.startsWith('{')) {\r\n            eval('urlParams = ' + useConfig);\r\n        } else {\r\n            urlParams.url = $(\"hiker://empty#noHistory##immersiveTheme#\" + '?type=' + type + '&id=' + id).rule((type, id, title, useConfig) => {\r\n                eval(JSON.parse(request('hiker://page/main')).rule);\r\n                if (type === \"playlist\") {\r\n                    douList(id, MY_PAGE, 50);\r\n                } else {\r\n                    eval(useConfig);\r\n                }\r\n            }, type, id, title, useConfig);\r\n        }\r\n        return {\r\n            title: title,\r\n            col_type: 'movie_3',\r\n            url: urlParams.url,\r\n            extra: urlParams.extra,\r\n            img: e.cover_url + \"@Referer=\" + e.cover_url,\r\n            desc: e.null_rating_reason || e.rating.value\r\n        }\r\n    }));\r\n\r\n    return page > 1 ? i : a.concat(i);\r\n}\r\n\r\n//片单\r\nfunction playList(page, count) {\r\n    if (!getMyVar('playlist')) putMyVar('playlist', '{\"subtype\":\"\",\"type\":\"all\"}');\r\n    let a = [];\r\n    let temp = JSON.parse(getMyVar('playlist', '{\"subtype\":\"\",\"type\":\"all\"}'));\r\n    let color = getConfig('chooseColor');\r\n\r\n    let items = {\r\n        type: {\r\n            全部: \"all\",\r\n            豆瓣片单: \"official\",\r\n            精选: \"selected\",\r\n            经典: \"classical\",\r\n            获奖: \"prize\",\r\n            高分: \"high_score\",\r\n            榜单: \"movie_list\",\r\n            冷门佳片: \"dark_horse\",\r\n            主题: \"topic\",\r\n            导演: \"director\",\r\n            演员: \"actor\",\r\n            系列: \"series\",\r\n            华语: \"chinese\",\r\n            欧美: \"western\",\r\n            日本: \"japanese\",\r\n            韩国: \"korea\",\r\n            喜剧: \"comedy\",\r\n            动作: \"action\",\r\n            爱情: \"love\",\r\n            科幻: \"science_fiction\",\r\n            动画: \"cartoon\",\r\n            悬疑: \"mystery\",\r\n            惊悚: \"panic\",\r\n            恐怖: \"horrible\",\r\n            犯罪: \"criminal\",\r\n            同性: \"lgbt\",\r\n            战争: \"war\",\r\n            奇幻: \"fantasy\",\r\n            \"\\u60c5\\u8272\": \"erotica\",\r\n            音乐: \"music\",\r\n            纪录片: \"documentary\",\r\n            治愈: \"cure\",\r\n            艺术: \"art\",\r\n            黑色幽默: \"dark_humor\",\r\n            青春: \"youth\",\r\n            女性: \"female\",\r\n            真实事件改编: \"real_event\",\r\n            暴力: \"violence\",\r\n            黑白: \"black_white\",\r\n            美食: \"food\",\r\n            旅行: \"travel\",\r\n            儿童: \"child\",\r\n            人性: \"humanity\",\r\n            家庭: \"family\",\r\n            文艺: \"literary_art\",\r\n            小说改编: \"novel\",\r\n            感人: \"moving\",\r\n            励志: \"inspiration\"\r\n        },\r\n        subtype: {\r\n            全部: \"\",\r\n            电影: \"movie\",\r\n            电视剧: \"tv\"\r\n        }\r\n    }\r\n    for (let i in items) {\r\n        for (let j in items[i]) {\r\n            a.push({\r\n                title: temp[i] === items[i][j] ? '““””<b> <font color=' + color + '>' + j + ' </font></b>' : j,\r\n                col_type: 'scroll_button',\r\n                url: $('hiker://empty#noLoading#').lazyRule((t) => {\r\n                    let temp = JSON.parse(getMyVar('playlist', '{\"subtype\":\"\",\"type\":\"all\"}'));\r\n                    temp[t[0]] = t[1];\r\n                    putMyVar(\"playlist\", JSON.stringify(temp));\r\n                    refreshPage();\r\n                    return 'hiker://empty'\r\n                }, [i, items[i][j]])\r\n            })\r\n        }\r\n        a.push({\r\n            col_type: \"blank_block\"\r\n        })\r\n    }\r\n\r\n    let s = getDoubanRes(\"https://frodo.douban.com/api/v2/skynet/new_playlists\" + \"?category=\" + temp.type + \"&subject_type=\" + temp.subtype + (page ? \"&start=\" + (page - 1) * count + \"&count=\" + count : \"&start=0&count=10\"));\r\n    let l = s.data[0].items;\r\n\r\n    let i = l.map((e => ({\r\n        title: e.title,\r\n        url: $('hiker://empty/$page{fypage}#noHistory#').rule((type, id) => {\r\n            eval(JSON.parse(request('hiker://page/main')).rule);\r\n            if (type === \"playlist\") {\r\n                douList(id, MY_PAGE, 50);\r\n            } else {\r\n                subjectCollectionList(MY_PAGE, 50, id);\r\n            }\r\n        }, e.type, e.id),\r\n        img: e.cover_url + \"@Referer=\" + e.cover_url,\r\n        desc: \"共\" + e.items_count + \"部\"\r\n    })));\r\n\r\n    return page > 1 ? i : a.concat(i);\r\n}\r\n\r\n//榜单\r\nfunction rankList(page, count) {\r\n    if (!getMyVar('rankList')) putMyVar('rankList', '{\"type\":\"movie\",\"list\":\"rank_list\",\"year_lists\":[],\"category_lists\":[],\"year\":\"\",\"category\":\"\"}');\r\n    let a = [];\r\n    let temp = JSON.parse(getMyVar('rankList'));\r\n    let color = getConfig('chooseColor');\r\n\r\n    let items = {\r\n        电影: 'movie',\r\n        电视剧: 'tv'\r\n    }\r\n    for (let i in items) {\r\n        a.push({\r\n            title: temp.type == items[i] ? '““””<b> <font color=' + color + '>' + i + ' </font></b>' : i,\r\n            col_type: 'scroll_button',\r\n            url: $('hiker://empty#noLoading#').lazyRule((e) => {\r\n                let temp = JSON.parse(getMyVar('rankList'));\r\n                temp.type = e;\r\n                putMyVar(\"rankList\", JSON.stringify(temp));\r\n                refreshPage();\r\n                return 'hiker://empty'\r\n            }, items[i])\r\n        })\r\n    }\r\n\r\n    a.push({\r\n        col_type: \"blank_block\"\r\n    })\r\n\r\n    let list = {\r\n        口碑榜单: 'rank_list',\r\n        年度榜单: 'year_ranks',\r\n        类型榜单: 'category_ranks'\r\n    }\r\n    for (let i in list) {\r\n        a.push({\r\n            title: temp.list == list[i] ? '““””<b> <font color=' + color + '>' + i + ' </font></b>' : i,\r\n            col_type: 'scroll_button',\r\n            url: $('hiker://empty#noLoading#').lazyRule((e) => {\r\n                let temp = JSON.parse(getMyVar('rankList'));\r\n                temp.list = e;\r\n                putMyVar(\"rankList\", JSON.stringify(temp));\r\n                refreshPage();\r\n                return 'hiker://empty'\r\n            }, list[i])\r\n        })\r\n    }\r\n\r\n    if (temp.list == 'year_ranks' && temp.year_lists.length == 0) {\r\n        let t = getDoubanRes(\"https://frodo.douban.com/api/v2/\" + temp.type + '/rank_list');\r\n        temp.year_lists = t.groups[1].tabs;\r\n        putMyVar('rankList', JSON.stringify(temp));\r\n    } else if (temp.list == 'category_ranks' && temp.category_lists.length == 0) {\r\n        let t = getDoubanRes(\"https://frodo.douban.com/api/v2/\" + temp.type + '/rank_list');\r\n        temp.category_lists = t.groups[2].tabs;\r\n        putMyVar('rankList', JSON.stringify(temp));\r\n    }\r\n\r\n    if (temp.list == 'year_ranks') {\r\n        a.push({\r\n            col_type: \"blank_block\"\r\n        })\r\n        if (!temp.year) temp.year = temp.year_lists[0].key;\r\n        for (let t of temp.year_lists) {\r\n            a.push({\r\n                title: temp.year == t.key ? '““””<b> <font color=' + color + '>' + t.title + ' </font></b>' : t.title,\r\n                col_type: 'scroll_button',\r\n                url: $('hiker://empty#noLoading#').lazyRule((e) => {\r\n                    let temp = JSON.parse(getMyVar('rankList'));\r\n                    temp.year = e;\r\n                    putMyVar(\"rankList\", JSON.stringify(temp));\r\n                    refreshPage();\r\n                    return 'hiker://empty'\r\n                }, t.key)\r\n            })\r\n        }\r\n    } else if (temp.list == 'category_ranks') {\r\n        a.push({\r\n            col_type: \"blank_block\"\r\n        })\r\n        if (!temp.category) temp.category = temp.category_lists[0].key;\r\n        for (let t of temp.category_lists) {\r\n            a.push({\r\n                title: temp.category == t.key ? '““””<b> <font color=' + color + '>' + t.title + ' </font></b>' : t.title,\r\n                col_type: 'scroll_button',\r\n                url: $('hiker://empty#noLoading#').lazyRule((e) => {\r\n                    let temp = JSON.parse(getMyVar('rankList'));\r\n                    temp.category = e;\r\n                    putMyVar(\"rankList\", JSON.stringify(temp));\r\n                    refreshPage();\r\n                    return 'hiker://empty'\r\n                }, t.key)\r\n            })\r\n        }\r\n    }\r\n\r\n    let l = [];\r\n    if (temp.list == 'rank_list' && MY_PAGE == 1) {\r\n        let s = getDoubanRes(\"https://frodo.douban.com/api/v2/\" + temp.type + '/' + temp.list + (page ? \"?start=\" + (page - 1) * count + \"&count=\" + count : \"?start=0&count=10\"));\r\n        l = s.groups[0].selected_collections;\r\n    } else if (temp.list == 'year_ranks' && MY_PAGE == 1) {\r\n        let s = getDoubanRes(\"https://frodo.douban.com/api/v2/\" + temp.type + '/' + temp.list + '?year=' + temp.year + (page ? \"&start=\" + (page - 1) * count + \"&count=\" + count : \"&start=0&count=10\"));\r\n        l = s.groups[0].selected_collections;\r\n    } else if (temp.list == 'category_ranks') {\r\n        let s = getDoubanRes(\"https://frodo.douban.com/api/v2/\" + temp.type + '/' + temp.list + '?category=' + temp.category + (page ? \"&start=\" + (page - 1) * count + \"&count=\" + count : \"&start=0&count=10\"));\r\n        l = s.selected_collections;\r\n    }\r\n\r\n    let i = [];\r\n    if (temp.list == 'category_ranks') {\r\n        i = l.map((e => ({\r\n            title: '““””' + e.title.bold(),\r\n            url: $('hiker://empty/$page{fypage}#noHistory#').rule((type, id) => {\r\n                eval(JSON.parse(request('hiker://page/main')).rule);\r\n                if (type === \"playlist\") {\r\n                    douList(id, MY_PAGE, 50);\r\n                } else {\r\n                    subjectCollectionList(MY_PAGE, 50, id);\r\n                }\r\n            }, e.type, e.id),\r\n            img: e.cover_url + \"@Referer=\" + e.cover_url,\r\n            desc: \"共\" + e.total + \"部\"\r\n        })));\r\n    } else {\r\n        i = l.map((e => ({\r\n            title: '' /*'““””' + e.medium_name + '\\n' + getStrongText(e.title)*/ ,\r\n            col_type: 'card_pic_2',\r\n            url: $('hiker://empty/$page{fypage}#noHistory#').rule((type, id, stitle) => {\r\n                setPageTitle(stitle);\r\n                eval(JSON.parse(request('hiker://page/main')).rule);\r\n                if (type === \"playlist\") {\r\n                    douList(id, MY_PAGE, 50);\r\n                } else {\r\n                    subjectCollectionList(MY_PAGE, 50, id);\r\n                }\r\n            }, e.type, e.id, e.title),\r\n            img: e.cover_url + \"@Referer=\" + e.cover_url,\r\n            desc: \"0\"\r\n        })));\r\n    }\r\n\r\n    return page > 1 ? i : a.concat(i);\r\n}\r\n\r\n//将上映\r\nfunction comingList(page, count) {\r\n    if (!getMyVar('coming')) putMyVar('coming', '{\"type\":\"movie\",\"rank\":\"&sortby=hot\",\"local\":\"domestic\",\"area\":\"\",\"filter\":\"\"}');\r\n    let a = [];\r\n    let temp = JSON.parse(getMyVar('coming'));\r\n    let color = getConfig('chooseColor');\r\n\r\n    let items = {\r\n        电影: 'movie',\r\n        电视剧: 'tv'\r\n    }\r\n    for (let i in items) {\r\n        a.push({\r\n            title: temp.type === items[i] ? '““””<b> <font color=' + color + '>' + i + ' </font></b>' : i,\r\n            col_type: 'scroll_button',\r\n            url: $('hiker://empty#noLoading#').lazyRule((e) => {\r\n                let temp = JSON.parse(getMyVar('coming'));\r\n                temp.type = e;\r\n                putMyVar(\"coming\", JSON.stringify(temp));\r\n                refreshPage();\r\n                return 'hiker://empty'\r\n            }, items[i])\r\n        })\r\n    }\r\n    let rank = {\r\n        热度: '&sortby=hot',\r\n        时间: ''\r\n    }\r\n    a.push({\r\n        col_type: \"blank_block\"\r\n    })\r\n    for (let i in rank) {\r\n        a.push({\r\n            title: temp.rank === rank[i] ? '““””<b> <font color=' + color + '>' + i + ' </font></b>' : i,\r\n            col_type: 'scroll_button',\r\n            url: $('hiker://empty#noLoading#').lazyRule((e) => {\r\n                let temp = JSON.parse(getMyVar('coming'));\r\n                temp.rank = e;\r\n                putMyVar(\"coming\", JSON.stringify(temp));\r\n                refreshPage();\r\n                return 'hiker://empty'\r\n            }, rank[i])\r\n        })\r\n    }\r\n    let local = {\r\n        国内: 'domestic',\r\n        全球: 'international'\r\n    }\r\n    if (temp.type == 'movie') {\r\n        a.push({\r\n            col_type: \"blank_block\"\r\n        })\r\n        for (let i in local) {\r\n            a.push({\r\n                title: temp.local === local[i] ? '““””<b> <font color=' + color + '>' + i + ' </font></b>' : i,\r\n                col_type: 'scroll_button',\r\n                url: $('hiker://empty#noLoading#').lazyRule((e) => {\r\n                    let temp = JSON.parse(getMyVar('coming'));\r\n                    temp.local = e;\r\n                    putMyVar(\"coming\", JSON.stringify(temp));\r\n                    refreshPage();\r\n                    return 'hiker://empty'\r\n                }, local[i])\r\n            })\r\n        }\r\n    }\r\n    let area = {\r\n        全部: '',\r\n        美国: '&area_filter=american',\r\n        欧洲: '&area_filter=europe',\r\n        日本: '&area_filter=japanese',\r\n        韩国: '&area_filter=korean'\r\n    }\r\n    if (temp.type == 'movie' && temp.local == 'international') {\r\n        a.push({\r\n            col_type: \"blank_block\"\r\n        })\r\n        for (let i in area) {\r\n            a.push({\r\n                title: temp.area === area[i] ? '““””<b> <font color=' + color + '>' + i + ' </font></b>' : i,\r\n                col_type: 'scroll_button',\r\n                url: $('hiker://empty#noLoading#').lazyRule((e) => {\r\n                    let temp = JSON.parse(getMyVar('coming'));\r\n                    temp.area = e;\r\n                    putMyVar(\"coming\", JSON.stringify(temp));\r\n                    refreshPage();\r\n                    return 'hiker://empty'\r\n                }, area[i])\r\n            })\r\n        }\r\n    }\r\n    let filter = {\r\n        全部: '',\r\n        国产剧: '&type_filter=tv_domestic',\r\n        欧美剧: '&type_filter=tv_american',\r\n        日剧: '&type_filter=tv_japanese',\r\n        韩剧: '&type_filter=tv_korean',\r\n        动画: '&type_filter=tv_animation',\r\n        国内综艺: '&type_filter=show_domestic',\r\n        国外综艺: '&type_filter=show_foreign'\r\n    }\r\n    if (temp.type == 'tv') {\r\n        a.push({\r\n            col_type: \"blank_block\"\r\n        })\r\n        for (let i in filter) {\r\n            a.push({\r\n                title: temp.filter === filter[i] ? '““””<b> <font color=' + color + '>' + i + ' </font></b>' : i,\r\n                col_type: 'scroll_button',\r\n                url: $('hiker://empty#noLoading#').lazyRule((e) => {\r\n                    let temp = JSON.parse(getMyVar('coming'));\r\n                    temp.filter = e;\r\n                    putMyVar(\"coming\", JSON.stringify(temp));\r\n                    refreshPage();\r\n                    return 'hiker://empty'\r\n                }, filter[i])\r\n            })\r\n        }\r\n    }\r\n\r\n    let s = getDoubanRes(\"https://frodo.douban.com/api/v2/\" + temp.type + \"/coming_soon\" + \"?area=\" + temp.local + temp.rank + temp.area + temp.filter + (page ? \"&start=\" + (page - 1) * count + \"&count=\" + count : \"&start=0&count=10\"));\r\n    let l = s.subjects;\r\n    let detailsViewConfigs = getConfig('detailsViewConfigs');\r\n\r\n    let i = l.map((e => {\r\n        let type = e.type,\r\n            id = e.id,\r\n            title = e.title;\r\n        let useConfig = detailsViewConfigs[detailsViewConfigs.use].config;\r\n        let urlParams = {};\r\n        if (useConfig.startsWith('{')) {\r\n            eval('urlParams = ' + useConfig);\r\n        } else {\r\n            urlParams.url = $(\"hiker://empty#noHistory##immersiveTheme#\" + '?type=' + type + '&id=' + id).rule((type, id, title, useConfig) => {\r\n                eval(JSON.parse(request('hiker://page/main')).rule);\r\n                if (type === \"playlist\") {\r\n                    douList(id, MY_PAGE, 50);\r\n                } else {\r\n                    eval(useConfig);\r\n                }\r\n            }, type, id, title, useConfig);\r\n        }\r\n        return {\r\n            title: title + \"（\" + e.year + \"）\",\r\n            url: urlParams.url,\r\n            extra: urlParams.extra,\r\n            img: e.cover_url + \"@Referer=\" + e.cover_url,\r\n            desc: \"上映日期:\" + e.pubdate + \"\\n\" + e.wish_count + \"人想看\" + \"\\n\" + e.null_rating_reason\r\n        }\r\n    }));\r\n\r\n    return page > 1 ? i : a.concat(i);\r\n}\r\n\r\n//片单详情\r\nfunction subjectCollectionList(page, count, id) {\r\n    if (!getMyVar('ranking')) putMyVar('ranking', '{\"item\":\"movie_real_time_hotest\",\"playable\":\"0\",\"score\":\"0-10\"}');\r\n    let a = [];\r\n    let temp = JSON.parse(getMyVar('ranking'));\r\n    let color = getConfig('chooseColor');\r\n\r\n    let items = {\r\n        电影: {\r\n            实时热门电影: 'movie_real_time_hotest',\r\n            一周口碑电影: 'movie_weekly_best',\r\n            top250电影: 'movie_top250'\r\n        },\r\n        电视剧: {\r\n            实时热门剧集: 'tv_real_time_hotest',\r\n            华语口碑剧集: 'tv_chinese_best_weekly',\r\n            全球口碑剧集: 'tv_global_best_weekly'\r\n        },\r\n        综艺: {\r\n            国内口碑综艺: 'show_chinese_best_weekly',\r\n            国外口碑综艺: 'show_global_best_weekly'\r\n        }\r\n    }\r\n    for (let i in items) {\r\n        for (let j in items[i]) {\r\n            a.push({\r\n                title: temp.item == items[i][j] ? '““””<b> <font color=' + color + '>' + j + ' </font></b>' : j,\r\n                col_type: 'scroll_button',\r\n                url: $('hiker://empty#noLoading#').lazyRule((e) => {\r\n                    let temp = JSON.parse(getMyVar('ranking'));\r\n                    temp.item = e;\r\n                    putMyVar(\"ranking\", JSON.stringify(temp));\r\n                    refreshPage();\r\n                    return 'hiker://empty'\r\n                }, items[i][j])\r\n            })\r\n        }\r\n        a.push({\r\n            col_type: \"blank_block\"\r\n        })\r\n    }\r\n\r\n    a.push({\r\n        col_type: 'blank_block'\r\n    })\r\n\r\n    let i = [];\r\n    let playable = {\r\n        全部影片: '0',\r\n        仅有片源: '1'\r\n    }\r\n    for (let r in playable) {\r\n        i.push({\r\n            title: temp.playable == playable[r] ? '““””<b> <font color=' + color + '>' + r + ' </font></b>' : r,\r\n            col_type: 'scroll_button',\r\n            url: $('hiker: //empty#noLoading#').lazyRule((e) => {\r\n                let temp = JSON.parse(getMyVar('ranking'));\r\n                temp.playable = e;\r\n                putMyVar(\"ranking\", JSON.stringify(temp));\r\n                refreshPage();\r\n                return 'hiker://empty'\r\n            }, playable[r])\r\n        })\r\n    }\r\n\r\n    i.push({\r\n        title: '““””<b> <font color=' + color + '>评分区间:' + temp.score + ' </font></b>',\r\n        col_type: 'scroll_button',\r\n        url: $(temp.score, '评分应在0-10之间').input(() => {\r\n            let temp = JSON.parse(getMyVar('ranking'));\r\n            let inputs = input.split('-');\r\n            if (inputs.length == 2 && inputs.every(e => e >= 0 && e <= 10) && parseFloat(inputs[0]) < inputs[1]) {\r\n                temp.score = input;\r\n                putMyVar(\"ranking\", JSON.stringify(temp));\r\n                refreshPage();\r\n                return 'hiker://empty'\r\n            } else {\r\n                return 'toast://请正确输入'\r\n            }\r\n        })\r\n    })\r\n\r\n    let t = getDoubanRes(\"https://frodo.douban.com/api/v2/subject_collection/\" + (id || temp.item));\r\n    i.push({\r\n        title: t.title + '(共' + t.total + '部)',\r\n        desc: t.description,\r\n        /*img: t.header_bg_image + \"@Referer=\" + t.header_bg_image,\r\n        url: t.header_bg_image + \"?type=.jpg@Referer=\" + t.header_bg_image + \"?type=.jpg\",*/\r\n        url: 'toast://点我干嘛',\r\n        col_type: \"text_1\"\r\n    })\r\n\r\n    let s = getDoubanRes(\"https://frodo.douban.com/api/v2/subject_collection/\" + (id || temp.item) + \"/items?\" + (page ? \"start=\" + (page - 1) * count + \"&count=\" + count : \"start=0&count=50\"));\r\n    let l = s.subject_collection_items;\r\n    if (temp.playable == '1') l = l.filter(e => !!e.has_linewatch);\r\n    if (temp.score != '0-10') {\r\n        l = l.filter(e => {\r\n            let r = temp.score.split('-');\r\n            return e.rating && e.rating.value < r[1] && e.rating.value > r[0];\r\n        });\r\n    }\r\n\r\n    let detailsViewConfigs = getConfig('detailsViewConfigs');\r\n    let r = l.map((e => {\r\n        let type = e.type,\r\n            id = e.id,\r\n            title = e.title;\r\n        let useConfig = detailsViewConfigs[detailsViewConfigs.use].config;\r\n        let urlParams = {};\r\n        if (useConfig.startsWith('{')) {\r\n            eval('urlParams = ' + useConfig);\r\n        } else {\r\n            urlParams.url = $(\"hiker://empty#noHistory##immersiveTheme#\" + '?type=' + type + '&id=' + id).rule((type, id, title, useConfig) => {\r\n                eval(JSON.parse(request('hiker://page/main')).rule);\r\n                if (type === \"playlist\") {\r\n                    douList(id, MY_PAGE, 50);\r\n                } else {\r\n                    eval(useConfig);\r\n                }\r\n            }, type, id, title, useConfig);\r\n        }\r\n        return {\r\n            title: title,\r\n            col_type: 'movie_1_vertical_pic',\r\n            url: urlParams.url,\r\n            extra: urlParams.extra,\r\n            img: e.pic.normal + \"@Referer=\" + e.pic.normal,\r\n            desc: e.card_subtitle.split(\"/\").filter(((e, t) => {\r\n                if (t < 3) return e\r\n            })).join(\",\") + \"\\n\" + (e.rating ? computeRating(e.rating.max, e.rating.value) + \" \" + e.rating.value.toFixed(1) + \"分\" : \"暂无评分\")\r\n        }\r\n    }));\r\n\r\n    setHomeResult({\r\n        data: page > 1 ? r : (id ? i.concat(r) : a.concat(i).concat(r))\r\n    })\r\n}\r\n\r\n//豆列详情\r\nfunction douList(id, page, count) {\r\n    addListener('onClose', 'clearMyVar(\"douList\")');\r\n    if (!getMyVar('douList')) putMyVar('douList', '{\"playable\":\"0\",\"score\":\"0-10\"}');\r\n    let i = [];\r\n    let temp = JSON.parse(getMyVar('douList'));\r\n    let color = getConfig('chooseColor');\r\n\r\n    let playable = {\r\n        全部影片: '0',\r\n        仅有片源: '1'\r\n    }\r\n    for (let r in playable) {\r\n        i.push({\r\n            title: temp.playable == playable[r] ? '““””<b> <font color=' + color + '>' + r + ' </font></b>' : r,\r\n            col_type: 'scroll_button',\r\n            url: $('hiker: //empty#noLoading#').lazyRule((e) => {\r\n                let temp = JSON.parse(getMyVar('douList'));\r\n                temp.playable = e;\r\n                putMyVar(\"douList\", JSON.stringify(temp));\r\n                refreshPage();\r\n                return 'hiker://empty'\r\n            }, playable[r])\r\n        })\r\n    }\r\n\r\n    i.push({\r\n        title: '““””<b> <font color=' + color + '>评分区间:' + temp.score + ' </font></b>',\r\n        col_type: 'scroll_button',\r\n        url: $(temp.score, '评分应在0-10之间').input(() => {\r\n            let temp = JSON.parse(getMyVar('douList'));\r\n            let inputs = input.split('-');\r\n            if (inputs.length == 2 && inputs.every(e => e >= 0 && e <= 10) && parseFloat(inputs[0]) < inputs[1]) {\r\n                temp.score = input;\r\n                putMyVar(\"douList\", JSON.stringify(temp));\r\n                refreshPage();\r\n                return 'hiker://empty'\r\n            } else {\r\n                return 'toast://请正确输入'\r\n            }\r\n        })\r\n    })\r\n\r\n    let t = getDoubanRes(\"https://frodo.douban.com/api/v2/doulist/\" + id);\r\n    i.push({\r\n        title: t.title,\r\n        desc: '共' + t.items_count + '部(' + t.playable_count + '部可播放)',\r\n        /*img: t.header_bg_image + \"@Referer=\" + t.header_bg_image,\r\n        url: t.header_bg_image + \"?type=.jpg@Referer=\" + t.header_bg_image + \"?type=.jpg\",*/\r\n        url: 'toast://别点我',\r\n        col_type: \"text_1\"\r\n    });\r\n\r\n    let s = getDoubanRes(\"https://frodo.douban.com/api/v2/doulist/\" + id + \"/posts\" + '?playable=' + temp.playable + (page ? \"&start=\" + (page - 1) * count + \"&count=\" + count : \"&start=0&count=50\"));\r\n    let l = s.items;\r\n    if (temp.score != '0-10') {\r\n        l = l.filter(e => {\r\n            let r = temp.score.split('-');\r\n            return e.content.subject.rating && e.content.subject.rating.value < r[1] && e.content.subject.rating.value > r[0];\r\n        });\r\n    }\r\n\r\n    let detailsViewConfigs = getConfig('detailsViewConfigs');\r\n    let r = l.map((e => {\r\n        let type = e.content.subject.type,\r\n            id = e.content.subject.id,\r\n            title = e.content.subject.title;\r\n        let useConfig = detailsViewConfigs[detailsViewConfigs.use].config;\r\n        let urlParams = {};\r\n        if (useConfig.startsWith('{')) {\r\n            eval('urlParams = ' + useConfig);\r\n        } else {\r\n            urlParams.url = $(\"hiker://empty#noHistory##immersiveTheme#\" + '?type=' + type + '&id=' + id).rule((type, id, title, useConfig) => {\r\n                eval(JSON.parse(request('hiker://page/main')).rule);\r\n                if (type === \"playlist\") {\r\n                    douList(id, MY_PAGE, 50);\r\n                } else {\r\n                    eval(useConfig);\r\n                }\r\n            }, type, id, title, useConfig);\r\n        }\r\n        return {\r\n            title: title,\r\n            url: urlParams.url,\r\n            extra: urlParams.extra,\r\n            img: e.content.subject.pic.normal + \"@Referer=\" + e.content.subject.pic.normal,\r\n            desc: e.content.subject.card_subtitle.split(\"/\").filter(((e, t) => {\r\n                if (t < 3) return e\r\n            })).join(\",\") + \"\\n\" + (e.content.subject.rating ? computeRating(e.content.subject.rating.max, e.content.subject.rating.value) + \" \" + e.content.subject.rating.value.toFixed(1) + \"分\" : \"暂无评分\")\r\n        }\r\n    }));\r\n\r\n    setHomeResult({\r\n        data: page > 1 ? r : i.concat(r)\r\n    })\r\n}\r\n\r\n\r\n\r\n//视频模块\r\nfunction videoUrlsModule(d, type, id, col, lazy, _res, extra) {\r\n    //col是样式col[0],col[1]分别是tv和movie的样式(tv会有分集信息title会很长)\r\n    if (!col) col = ['icon_2', 'icon_small_4'];\r\n    if (!lazy) lazy = 'return input';\r\n    let res = _res || getDoubanRes(\"https://frodo.douban.com/api/v2/\" + type + \"/\" + id);\r\n    for (let item in res.vendors) {\r\n        let e = res.vendors[item];\r\n        if (type === \"tv\") {\r\n            d.push({\r\n                title: e.title + (e.episodes_info ? \"•\" + e.episodes_info : \"\"),\r\n                img: e.icon,\r\n                col_type: col[0] || \"icon_2\",\r\n                url: $('hiker://empty?id=' + id + '&type=' + type + '&title=' + e.title).rule((res, id, e, lazy, extra) => {\r\n                    let title = res.title,\r\n                        pic = res.pic.normal + \"@Referer=\" + res.pic.normal;\r\n                    setPageTitle(e.title + '-' + title);\r\n                    try {\r\n                        setPagePicUrl(pic);\r\n                    } catch (e) {}\r\n                    eval(JSON.parse(request('hiker://page/main')).rule);\r\n                    let urls = getTvUrls(id, e.id);\r\n                    lazy = $(\"\").lazyRule(lazy => {\r\n                        let resultUrl = \"toast://解析失败\";\r\n                        try {\r\n                            if (lazy.startsWith(\"(\")) {\r\n                                eval('resultUrl = ' + lazy)\r\n                            } else {\r\n                                eval('resultUrl = ' + '(() => {' + lazy + '})()')\r\n                            }\r\n                        } catch (e) {\r\n                            log(e.message)\r\n                        }\r\n                        return resultUrl\r\n                    }, lazy)\r\n                    let d = [];\r\n                    if (typeof(urls) == \"object\") {\r\n                        let d = [];\r\n                        for (let i = 0; i < urls.length; i++) {\r\n                            d.push({\r\n                                title: '第' + (i + 1) + '集',\r\n                                col_type: 'text_4',\r\n                                url: lazy ? urls[i] + lazy : urls[i],\r\n                                extra: extra\r\n                            })\r\n                        }\r\n                        setResult(d);\r\n                    } else if (typeof(urls) == \"string\" && urls == '被封ip') {\r\n                        let rule = JSON.parse(request(\"hiker://page/releaseIP?rule=青豆\"))\r\n                            .rule;\r\n                        eval(rule);\r\n                    } else if (typeof(urls) == 'string' && urls == '没有收录') {\r\n                        let d = [];\r\n                        d.push({\r\n                            title: '豆瓣没有收录此视频源的详细信息',\r\n                            desc: '点我可以去视频源网站看看',\r\n                            col_type: 'text_center_1',\r\n                            url: e.url\r\n                        })\r\n                        setResult(d);\r\n                    }\r\n                }, res, id, e, lazy, extra)\r\n            })\r\n        } else if (type === 'movie') {\r\n            let mLazy = $(\"\").lazyRule(lazy => {\r\n                let resultUrl = \"toast://解析失败\";\r\n                try {\r\n                    if (lazy.startsWith(\"(\")) {\r\n                        eval('resultUrl = ' + lazy)\r\n                    } else {\r\n                        eval('resultUrl = ' + '(() => {' + lazy + '})()')\r\n                    }\r\n                } catch (e) {\r\n                    log(e.message)\r\n                }\r\n                return resultUrl\r\n            }, lazy)\r\n            d.push({\r\n                title: e.title + (e.episodes_info ? \"•\" + e.episodes_info : \"\"),\r\n                img: e.icon,\r\n                col_type: col[1] || \"icon_small_4\",\r\n                url: mLazy ? e.url + mLazy : e.url,\r\n                extra: extra\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\n//获取电视剧分集链接,id是片子编号,uid是视频源编号\r\nfunction getTvUrls(id, uid) {\r\n    let cookieCache = 'hiker://files/cache/doubancookie.txt';\r\n    let mUrl = 'https://movie.douban.com/subject/' + id + '/';\r\n    let headers = {\r\n        \"User-Agent\": PC_UA,\r\n    }\r\n    if (fileExist(cookieCache)) {\r\n        headers[\"Cookie\"] = fetch(cookieCache)\r\n    }\r\n    let html = request(mUrl, {\r\n        headers: headers\r\n    })\r\n    if ((html.includes(\"登录跳转\") && html.includes(\"异常请求\")) || (html.includes(\"window.location.href\") && html.includes(\"sec.douban\"))) {\r\n        return '被封ip';\r\n    } else {\r\n        let s = {\r\n            qq: 1,\r\n            youku: 3,\r\n            letv: 6,\r\n            mgtv: 7,\r\n            bilibili: 8,\r\n            iqiyi: 9,\r\n            cntv: 12,\r\n            cctv6: 13,\r\n            miguvideo: 15,\r\n            xigua: 17,\r\n            acfun: 18,\r\n            maiduidui: 19\r\n        };\r\n        let num = s[uid];\r\n\r\n        var sources = {};\r\n        let sl = html.match(/sources\\[[1-9]{1,2}\\][\\s\\S]*?\\]/g);\r\n        if (sl) {\r\n            for (var i in sl) {\r\n                eval(sl[i]);\r\n            }\r\n        } else {\r\n            let script_list = parseDomForArray(html, 'body&&script[src]');\r\n            let sources_url = \"\";\r\n            for (let i in script_list) {\r\n                let url = parseDomForHtml(script_list[i], 'script&&src');\r\n                if (url.indexOf('mixed_static') !== -1) {\r\n                    sources_url = url;\r\n                }\r\n            }\r\n            let sources_list = request(sources_url).match(/sources\\[[1-9]{1,2}\\][\\s\\S]*?\\]/g);\r\n            for (var i in sources_list) {\r\n                eval(sources_list[i]);\r\n            }\r\n        }\r\n\r\n        let ren = sources[num];\r\n        if (ren && ren.length > 0) {\r\n            /*var r = ren.map(e => unescape(e.play_link.replace(/(https|http):\\/\\/www.douban.com\\/link2\\/\\?url=/, '')\r\n                .split(';')[0].split('.html')[0] + '.html'))*/\r\n            var r = ren.map(e => unescape(e.play_link.split('?url=')[1].split('&')[0]))\r\n\r\n        }\r\n        return r || '没有收录';\r\n    }\r\n}"},{"col_type":"movie_3","name":"设置页","path":"settingPage","rule":"js:\neval(JSON.parse(request('hiker://page/utils')).rule);\n\n//影片详情配置模块\nfunction detailViewModeModule(d, detailsViewConfigs) {\n    let detailsViewConfigs = getConfig('detailsViewConfigs');\n    d.push({\n        title: '自定义影片详情页面'.bold(),\n        col_type: \"rich_text\"\n    })\n    for (let configKey of Object.keys(detailsViewConfigs)) {\n        if (configKey === 'use') continue;\n        d.push({\n            title: configKey === detailsViewConfigs.use ? \"““\" + configKey + \"””\" : configKey,\n            url: $(\"hiker://empty#noLoading#\").lazyRule(configKey => {\n                let config = JSON.parse(request(getMyVar('qdb_config')))\n                if (config.detailsViewConfigs.use === configKey) {\n                    //putMyVar(\"input_config_type\", '影片详情页面配置')\n                    putMyVar(\"input_name\", configKey);\n                    putMyVar(\"input_code\", config.detailsViewConfigs[configKey].config);\n                    putMyVar(\"input_setting_code\", config.detailsViewConfigs[configKey].setting || \"\");\n                    return 'hiker://page/setting-editor?rule=青豆&view=detailViewModeEditPage';\n                }\n                config.detailsViewConfigs.use = configKey\n                writeFile(getMyVar('qdb_config'), JSON.stringify(config))\n                refreshPage(false);\n                return 'toast://切换成功'\n            }, configKey),\n            col_type: 'flex_button'\n        })\n    }\n    d.push({\n        col_type: 'blank_block'\n    })\n    d.push({\n        title: '➕',\n        col_type: 'flex_button',\n        url: 'hiker://page/setting-editor?rule=青豆&view=detailViewModeEditPage'\n    });\n    d.push({\n        title: '➖',\n        col_type: 'flex_button',\n        url: $(Object.keys(detailsViewConfigs).filter(configKey => configKey !== 'use' && configKey !== '默认'), 2)\n            .select(() => {\n                if (input === '默认') return 'toast://默认配置无法删除！'\n                let config = JSON.parse(request(getMyVar('qdb_config')))\n                if (input === config.detailsViewConfigs.use) return 'toast://该配置正在使用，无法删除！'\n                return $('确认删除\"' + input + '\"？').confirm((config) => {\n                    delete config.detailsViewConfigs[configKey]\n                    writeFile(getMyVar('qdb_config'), JSON.stringify(config))\n                    refreshPage(false);\n                    return 'toast://删除' + configKey + '成功'\n                }, config, input)\n            })\n    })\n    d.push({\n        title: '📝',\n        col_type: 'flex_button',\n        url: $(Object.keys(detailsViewConfigs).filter(configKey => configKey !== 'use'), 2).select(() => {\n            // if (input === '默认') return 'toast://默认配置无法编辑！'\n            let config = JSON.parse(request(getMyVar('qdb_config')))\n            putMyVar(\"input_name\", configKey);\n            putMyVar(\"input_code\", config.detailsViewConfigs[configKey].config);\n            putMyVar(\"input_setting_code\", config.detailsViewConfigs[configKey].setting || \"\");\n            return 'hiker://page/setting-editor?rule=青豆&view=detailViewModeEditPage'\n        })\n    })\n    d.push({\n        title: '📥',\n        col_type: 'flex_button',\n        url: $(\"\", \"请输入口令\").input(() => {\n            if (!input.includes(\"影片详情页面配置\")) return \"toast://该口令不是影片详情页面配置\";\n            eval(JSON.parse(request('hiker://page/utils')).rule)\n            let importConfigs = ConfigTool.import(input);\n            if (!importConfigs) return \"toast://似乎出了错，请尝试再次导入～\";\n            putMyVar(\"input_name\", importConfigs.name);\n            putMyVar(\"input_code\", importConfigs.data.config);\n            putMyVar(\"input_setting_code\", importConfigs.data.setting || \"\");\n            return 'hiker://page/setting-editor?rule=青豆&view=detailViewModeEditPage';\n        })\n    })\n    d.push({\n        title: '📤',\n        col_type: 'flex_button',\n        url: $(Object.keys(detailsViewConfigs).filter(configKey => configKey !== 'use'), 2).select(() => {\n            // if (input === '默认') return 'toast://默认配置无法编辑！'\n            eval(JSON.parse(request('hiker://page/utils')).rule)\n            let config = getConfig();\n            let selectConfig = {\n                name: input,\n                data: config.detailsViewConfigs[input]\n            }\n            return $(ConfigTool.encTypeList, 2).select((selectConfig) => {\n                eval(JSON.parse(request('hiker://page/utils')).rule)\n                return ConfigTool.toClipboard(ConfigTool.export(selectConfig.name, selectConfig, \"影片详情页面配置\", input))\n            }, selectConfig)\n        })\n    })\n}\n// 详情页设置模块\nfunction detailViewSettingModule(d) {\n    let detailsViewConfigs = getConfig('detailsViewConfigs');\n    detailViewModeModule(d, detailsViewConfigs)\n    let detailViewSetting = detailsViewConfigs[detailsViewConfigs.use].setting\n    let result = \"toast://该详情页无设置页面\";\n    if (detailViewSetting) {\n        try {\n            if (detailViewSetting.indexOf('return') == -1) throw new Error('必须 return @rule=js: 或 $().rule');\n            if (detailViewSetting.startsWith(\"(\")) {\n                eval('result = ' + detailViewSetting)\n            } else {\n                eval('result = ' + '(() => {' + detailViewSetting + '})()')\n            }\n        } catch (e) {\n            log(e.message);\n            result = \"toast://错误的设置页面代码,请前往 日志 查看错误原因\"\n        }\n    }\n    d.push({\n        title: '⚙️',\n        col_type: 'flex_button',\n        url: result\n    })\n}\n\n// 首页设置模块\nfunction homePageSettingModule(d) {\n    let homePageConfigs = getConfig('homePageConfigs');\n    d.push({\n        title: '自定义首页'.bold(),\n        col_type: \"rich_text\"\n    })\n    for (let configKey of Object.keys(homePageConfigs)) {\n        if (configKey === 'use') continue;\n        d.push({\n            title: configKey === homePageConfigs.use ? \"““\" + configKey + \"””\" : configKey,\n            url: $(\"hiker://empty#noLoading#\").lazyRule((configKey) => {\n                let config = JSON.parse(request(getMyVar('qdb_config')))\n                if (config.homePageConfigs.use === configKey) {\n                    //putMyVar(\"input_config_type\", '首页配置')\n                    putMyVar(\"input_name\", configKey);\n                    putMyVar(\"input_code\", config.homePageConfigs[configKey].config);\n                    return 'hiker://page/setting-editor?rule=青豆&view=homePageModeEditPage'\n                }\n                config.homePageConfigs.use = configKey\n                writeFile(getMyVar('qdb_config'), JSON.stringify(config))\n                refreshPage(false);\n                return 'toast://切换成功'\n            }, configKey),\n            col_type: 'flex_button'\n        })\n    }\n    d.push({\n        col_type: 'blank_block'\n    })\n    d.push({\n        title: '➕',\n        col_type: 'flex_button',\n        url: 'hiker://page/setting-editor?view=homePageModeEditPage'\n    });\n    d.push({\n        title: '➖',\n        col_type: 'flex_button',\n        url: $(Object.keys(homePageConfigs).filter(configKey => configKey !== 'use' && configKey !== '默认'), 2).select(() => {\n                if (input === '默认') return 'toast://默认配置无法删除！'\n                let config = JSON.parse(request(getMyVar('qdb_config')))\n                if (input === config.homePageConfigs.use) return 'toast://该配置正在使用，无法删除！'\n                return $('确认删除\"' + input + '\"？').confirm((config) => {\n                    delete config.homePageConfigs[configKey]\n                    writeFile(getMyVar('qdb_config'), JSON.stringify(config))\n                    refreshPage(false);\n                    return 'toast://删除' + configKey + '成功'\n                }, config)\n            }),\n    })\n    d.push({\n        title: '📝',\n        col_type: 'flex_button',\n        url: $(Object.keys(homePageConfigs).filter(configKey => configKey !== 'use'), 2).select(() => {\n            // if (input === '默认') return 'toast://默认配置无法编辑！'\n            let config = JSON.parse(request(getMyVar('qdb_config')));\n            let configKey = input;\n            putMyVar(\"input_name\", configKey);\n            putMyVar(\"input_code\", config.homePageConfigs[configKey].config);\n            return 'hiker://page/setting-editor?rule=青豆&view=homePageModeEditPage';\n        })\n    })\n    d.push({\n        title: '📥',\n        col_type: 'flex_button',\n        url: $(\"\", \"请输入口令\").input(() => {\n            if (!input.includes(\"首页配置\")) return \"toast://该口令不是首页配置\";\n            eval(JSON.parse(request('hiker://page/utils')).rule)\n            let importConfigs = ConfigTool.import(input);\n            if (!importConfigs) return \"toast://似乎出了错，请尝试再次导入～\";\n            putMyVar(\"input_name\", importConfigs.name);\n            putMyVar(\"input_code\", importConfigs.data.config);\n            return 'hiker://page/setting-editor?rule=青豆&view=homePageModeEditPage';\n        })\n    })\n    d.push({\n        title: '📤',\n        col_type: 'flex_button',\n        url: $(Object.keys(homePageConfigs).filter(configKey => configKey !== 'use'), 2).select(() => {\n            // if (input === '默认') return 'toast://默认配置无法编辑！'\n            eval(JSON.parse(request('hiker://page/utils')).rule)\n            let config = getConfig();\n            let selectConfig = {\n                name: input,\n                data: config.homePageConfigs[input]\n            }\n            return $(ConfigTool.encTypeList, 2).select((selectConfig) => {\n                eval(JSON.parse(request('hiker://page/utils')).rule)\n                return ConfigTool.toClipboard(ConfigTool.export(selectConfig.name, selectConfig, \"首页配置\", input))\n            }, selectConfig)\n        })\n    })\n}\n\n// 解析配置模块\nfunction analysisModeModule(d, analysisConfigs) {\n    d.push({\n        title: '自定义解析插件'.bold(),\n        col_type: \"rich_text\"\n    })\n    for (let configKey of Object.keys(analysisConfigs)) {\n        if (configKey === 'use') continue;\n        d.push({\n            title: configKey === analysisConfigs.use ? \"““\" + configKey + \"””\" : configKey,\n            url: $(\"hiker://empty#noLoading#\").lazyRule(configKey => {\n                let config = JSON.parse(request(getMyVar('qdb_config')))\n                if (config.analysisConfigs.use === configKey) {\n                    //putMyVar(\"input_config_type\", '解析插件配置')\n                    putMyVar(\"input_name\", configKey);\n                    putMyVar(\"input_code\", config.analysisConfigs[configKey].config);\n                    putMyVar(\"input_extra\", config.analysisConfigs[configKey].extra || \"\");\n                    putMyVar(\"input_setting_code\", config.analysisConfigs[configKey].setting || \"\");\n                    return 'hiker://page/setting-editor?rule=青豆&view=analysisModeEditPage';\n                }\n                config.analysisConfigs.use = configKey\n                writeFile(getMyVar('qdb_config'), JSON.stringify(config))\n                refreshPage(false);\n                return 'toast://切换成功'\n            }, configKey),\n            col_type: 'flex_button'\n        })\n    }\n    d.push({\n        col_type: 'blank_block'\n    })\n    d.push({\n        title: '➕',\n        col_type: 'flex_button',\n        url: 'hiker://page/setting-editor?rule=青豆&view=analysisModeEditPage'\n    });\n    d.push({\n        title: '➖',\n        col_type: 'flex_button',\n        url: $(Object.keys(analysisConfigs).filter(configKey => configKey !== 'use' && configKey !== '不解析' && configKey !== '断插'), 2)\n            .select(() => {\n                if (input === '不解析' && input === '断插') return 'toast://默认解析无法删除！'\n                let config = JSON.parse(request(getMyVar('qdb_config')))\n                if (input === config.analysisConfigs.use) return 'toast://该解析正在使用，无法删除！'\n                return $('确认删除\"' + input + '\"？').confirm((config, configKey) => {\n                    delete config.analysisConfigs[configKey]\n                    writeFile(getMyVar('qdb_config'), JSON.stringify(config))\n                    refreshPage(false);\n                    return 'toast://删除' + configKey + '成功'\n                }, config, input)\n            })\n    })\n    d.push({\n        title: '📝',\n        col_type: 'flex_button',\n        url: $(Object.keys(analysisConfigs).filter(configKey => configKey !== 'use'), 2)\n            .select(() => {\n                // if (input === '不解析' && input === '断插') return 'toast://默认解析无法编辑！'\n                let config = JSON.parse(request(getMyVar('qdb_config')));\n                let configKey = input;\n                putMyVar(\"input_name\", configKey);\n                putMyVar(\"input_code\", config.analysisConfigs[configKey].config);\n                putMyVar(\"input_extra\", config.analysisConfigs[configKey].extra || \"\");\n                putMyVar(\"input_setting_code\", config.analysisConfigs[configKey].setting || \"\");\n                return 'hiker://page/setting-editor?rule=青豆&view=analysisModeEditPage';\n            })\n    })\n    d.push({\n        title: '📥',\n        col_type: 'flex_button',\n        url: $(\"\", \"请输入口令\").input(() => {\n            if (!input.includes(\"解析插件配置\")) return \"toast://该口令不是解析插件配置\";\n            eval(JSON.parse(request('hiker://page/utils')).rule)\n            let importConfigs = ConfigTool.import(input);\n            if (!importConfigs) return \"toast://似乎出了错，请尝试再次导入～\";\n            putMyVar(\"input_name\", importConfigs.name);\n            putMyVar(\"input_code\", importConfigs.data.config);\n            putMyVar(\"input_extra\", importConfigs.data.extra || \"\");\n            putMyVar(\"input_setting_code\", importConfigs.data.setting || \"\");\n            return 'hiker://page/setting-editor?rule=青豆&view=analysisModeEditPage';\n        })\n    })\n    d.push({\n        title: '📤',\n        col_type: 'flex_button',\n        url: $(Object.keys(analysisConfigs).filter(configKey => configKey !== 'use'), 2).select(() => {\n            // if (input === '默认') return 'toast://默认配置无法编辑！'\n            eval(JSON.parse(request('hiker://page/utils')).rule)\n            let config = getConfig();\n            let selectConfig = {\n                name: input,\n                data: config.analysisConfigs[input]\n            }\n            return $(ConfigTool.encTypeList, 2).select((selectConfig) => {\n                eval(JSON.parse(request('hiker://page/utils')).rule)\n                return ConfigTool.toClipboard(ConfigTool.export(selectConfig.name, selectConfig, \"解析插件配置\", input))\n            }, selectConfig)\n        })\n    })\n}\n\n// 解析设置模块\nfunction analysisSettingModule(d) {\n    let analysisConfigs = getConfig('analysisConfigs');\n    analysisModeModule(d, analysisConfigs);\n    /**\n     * 这下面的都是拿设置页面的配置出来 eval 执行，最终获得插件设置页面的 url，这个 url 可以是网页也可以是二级界面\n     */\n    let analysisSetting = analysisConfigs[analysisConfigs.use].setting;\n    let result = \"toast://该插件无设置页面\";\n    if (analysisSetting) {\n        try {\n            if (analysisSetting.indexOf('return') == -1) throw new Error('必须 return @rule=js: 或 $().rule');\n            if (analysisSetting.startsWith(\"(\")) {\n                eval('result = ' + analysisSetting);\n            } else {\n                eval('result = ' + '(() => {' + analysisSetting + '})()');\n            }\n        } catch (e) {\n            log(e.message);\n            result = \"toast://错误的设置页面代码,请前往 日志 查看错误原因\"\n        }\n    }\n    d.push({\n        title: '⚙️',\n        col_type: 'flex_button',\n        url: result\n    })\n}\n\n//自定义快速搜索模块\nfunction quickSearchDIYModule(d, config) {\n    let quickSearchConfigs = getConfig('quickSearchConfigs', config);\n    d.push({\n        title: '自定义快速搜索'.bold(),\n        col_type: \"rich_text\"\n    })\n    for (let configKey of quickSearchConfigs.order) {\n        d.push({\n            title: configKey,\n            url: $('➕是添加\\n➖是删除\\n📝是修改\\n🔁是排序\\n⚙️是设置样式').confirm(() => {\n                return 'toast://下次不要再点我了'\n            }),\n            col_type: 'flex_button'\n        })\n    }\n    d.push({\n        col_type: 'blank_block'\n    })\n    d.push({\n        title: '➕️',\n        col_type: 'flex_button',\n        url: $('显示名@@小程序名@@图片链接', '根据提示输入就好了\\n小程序名为空则为海阔搜索').input(() => {\n            let config = JSON.parse(fetch(getMyVar('qdb_config')));\n            input = input.split('@@');\n            if (input.length != 3 || input[0] === \"\") return \"toast://格式不对，按格式输入!\";\n            if (config.quickSearchConfigs.order.indexOf(input[0]) == -1) config.quickSearchConfigs.order.push(input[0]);\n            config.quickSearchConfigs[input[0]] = {\n                name: input[1],\n                pic: input[2]\n            };\n            writeFile(getMyVar('qdb_config'), JSON.stringify(config));\n            refreshPage(false);\n            return 'toast://添加成功';\n        })\n    });\n    d.push({\n        title: '➖',\n        col_type: 'flex_button',\n        url: $(quickSearchConfigs.order, 2).select(() => {\n            let config = JSON.parse(request(getMyVar('qdb_config')))\n            return $('确认删除\"' + input + '\"？').confirm((config, configKey) => {\n                let index = config.quickSearchConfigs.order.indexOf(configKey);\n                config.quickSearchConfigs.order.splice(index, 1);\n                delete config.quickSearchConfigs[configKey]\n                writeFile(getMyVar('qdb_config'), JSON.stringify(config))\n                refreshPage(false);\n                return 'toast://删除' + configKey + '成功'\n            }, config, input)\n        })\n    })\n    d.push({\n        title: '📝',\n        col_type: 'flex_button',\n        url: $(quickSearchConfigs.order, 2).select(() => {\n            let config = JSON.parse(request(getMyVar('qdb_config')));\n            let quickSearchConfigs = config.quickSearchConfigs;\n            let dtext = input + '@@' + quickSearchConfigs[input].name + '@@' + quickSearchConfigs[input].pic;\n            return $(dtext, '请修改').input((config, raw) => {\n                input = input.split('@@');\n                if (raw != input[0]) {\n                    let index = config.quickSearchConfigs.order.indexOf(raw);\n                    config.quickSearchConfigs.order[index] = input[0];\n                    delete config.quickSearchConfigs[raw];\n                }\n                if (config.quickSearchConfigs.order.indexOf(input[0]) == -1) config.quickSearchConfigs.order.push(input[0]);\n                config.quickSearchConfigs[input[0]] = {\n                    name: input[1],\n                    pic: input[2]\n                };\n                writeFile(getMyVar('qdb_config'), JSON.stringify(config));\n                refreshPage(false);\n                return 'toast://修改成功';\n            }, config, input)\n        })\n    })\n    d.push({\n        title: '🔁',\n        col_type: 'flex_button',\n        url: $('hiker://empty#noHistory#').rule(() => {\n            addListener('onClose', $.toString(() => {\n                clearMyVar('json');\n                clearMyVar('op');\n            }))\n            if (getMyVar('json') == \"\") {\n                let config = JSON.parse(request(getMyVar('qdb_config')));\n                let quickSearchConfigs = config.quickSearchConfigs;\n                putMyVar('json', JSON.stringify(quickSearchConfigs));\n            }\n\n            let old = JSON.parse(getMyVar('json'));\n            let d = [];\n            d.push({\n                title: '分别点击两项以交换顺序\\n‘‘排序完毕后点我保存排序,否则排序不生效’’',\n                col_type: 'text_center_1',\n                url: $('#noLoading#').lazyRule(() => {\n                    let config = JSON.parse(fetch(getMyVar('qdb_config')));\n                    config.quickSearchConfigs = JSON.parse(getMyVar('json'));\n                    writeFile(getMyVar('qdb_config'), JSON.stringify(config));\n                    back(true);\n                    return 'toast://修改成功'\n                })\n            })\n            old.order.forEach((value, index) => {\n                d.push({\n                    title: getMyVar('op') == value ? value + '‘‘(当前选中)’’' : value,\n                    col_type: 'text_1',\n                    url: $().lazyRule((key, index) => {\n                        let op = getMyVar('op');\n                        if (op == '') {\n                            putMyVar('op', key);\n                            refreshPage();\n                            return 'hiker://empty'\n                        } else if (op == key) {\n                            clearMyVar('op');\n                            refreshPage();\n                            return 'hiker://empty'\n                        } else {\n                            let old = JSON.parse(getMyVar('json'));\n                            let newa = {\n                                mode: old.mode,\n                                order: old.order\n                            };\n                            let opindex = newa.order.indexOf(op);\n                            if (Math.abs(opindex - index) == 1) {\n                                newa.order[opindex] = key;\n                                newa.order[index] = op;\n                            } else if (opindex > index) {\n                                newa.order.splice(opindex, 1);\n                                newa.order.splice(index, 0, op);\n                            } else {\n                                newa.order.splice(opindex, 1);\n                                newa.order.splice(index - 1, 0, op);\n                            }\n                            newa.order.forEach(value => newa[value] = old[value])\n                            putMyVar('json', JSON.stringify(newa));\n                            clearMyVar('op');\n                            refreshPage();\n                            return 'hiker://empty'\n                        }\n                    }, value, index)\n                })\n            })\n            setResult(d);\n        })\n    })\n    d.push({\n        title: '⚙️',\n        col_type: 'flex_button',\n        url: $(quickSearchConfigs['mode'] || \"\", '请正确输入组件样式\\n建议值:flex_button scroll_button icon_round_small_4 icon_small_4').input(() => {\n            let config = JSON.parse(request(getMyVar('qdb_config')));\n            config.quickSearchConfigs.mode = input;\n            writeFile(getMyVar('qdb_config'), JSON.stringify(config));\n            refreshPage(false);\n            return 'toast://样式修改成功'\n        })\n    })\n}\n\n//设置页面\nfunction settingPage() {\n    let conf = getConfig();\n    let d = [];\n\n    let starColor = conf.starColor || '#ffac2d';\n    d.push({\n        title: '““””' + '自定义星星颜色'.bold(),\n        desc: '““””<font color=' + starColor + '>' + '★★★★★</font>',\n        col_type: 'text_1',\n        url: $(starColor, '别忘了#').input(() => {\n            let config = JSON.parse(fetch(getMyVar('qdb_config')));\n            config.starColor = input;\n            writeFile(getMyVar('qdb_config'), JSON.stringify(config));\n            refreshPage();\n            return \"toast://设置更改已保存\";\n        })\n    })\n    let chooseColor = conf.chooseColor || '#FA7298';\n    d.push({\n        title: '““””' + '自定义选中标签颜色'.bold(),\n        desc: '““””<font color=' + chooseColor + '>' + '我是预览效果</font>',\n        col_type: 'text_1',\n        url: $(chooseColor, '别忘了#').input(() => {\n            let config = JSON.parse(fetch(getMyVar('qdb_config')));\n            config.chooseColor = input;\n            writeFile(getMyVar('qdb_config'), JSON.stringify(config));\n            refreshPage();\n            return \"toast://设置更改已保存\";\n        })\n    })\n\n    homePageSettingModule(d);\n    d.push({\n        col_type: 'line'\n    })\n\n    quickSearchDIYModule(d, conf);\n    d.push({\n        col_type: 'line'\n    })\n\n    detailViewSettingModule(d);\n    d.push({\n        col_type: 'line'\n    })\n\n    if (true /*getItem('password') == 'true'*/ ) {\n        analysisSettingModule(d);\n        d.push({\n            col_type: 'line'\n        })\n    }\n\n    d.push({\n        title: '““””' + '恢复默认设置'.bold(),\n        desc: '重生',\n        col_type: 'text_1',\n        url: $(['重置星星颜色', '重置选中标签颜色', '重置快速搜索', '重置首页为默认', '重置详情页', '清除全部设置'], 1).select(() => {\n            return $(\"确定要\" + input + \"？\").confirm((sel) => {\n                let item = '';\n                switch (sel) {\n                    case '重置星星颜色':\n                        item = 'starColor';\n                        break;\n                    case '重置选中标签颜色':\n                        item = 'chooseColor';\n                        break;\n                    case '重置快速搜索':\n                        item = 'quickSearchConfigs';\n                        break;\n                    case '重置首页为默认':\n                        item = 'homePageConfigs';\n                        break;\n                    case '重置详情页':\n                        item = 'detailViewConfigs';\n                        break;\n                    case '清除全部设置':\n                        item = 'all';\n                        break;\n                }\n                // eval(JSON.parse(request('hiker://page/settingPage')).rule);\n                let defaultConfigs = $.require(\"hiker://page/defaultConfigs\");\n                if (item == 'all') {\n                    writeFile(getMyVar('qdb_config'), JSON.stringify(defaultConfigs));\n                    refreshPage();\n                    return \"toast://已\" + sel;\n                } else if (item == \"homePageConfigs\") {\n                    let config = JSON.parse(fetch(getMyVar('qdb_config')));\n                    config[item][\"默认\"] = defaultConfigs[item][\"默认\"];\n                    config[item].use = \"默认\";\n                    writeFile(getMyVar('qdb_config'), JSON.stringify(config));\n                    refreshPage();\n                    return \"toast://已\" + sel;\n                } else {\n                    let config = JSON.parse(fetch(getMyVar('qdb_config')));\n                    config[item] = defaultConfigs[item];\n                    writeFile(getMyVar('qdb_config'), JSON.stringify(config));\n                    refreshPage();\n                    return \"toast://已\" + sel;\n                }\n            }, input)\n        })\n    })\n    setResult(d);\n}\n\nlet view = getParam(\"view\", \"\");\nif (view == \"\") {\n    setPageTitle(\"设置\")\n    settingPage();\n} else if (view == \"analysisSettingModule\") {\n    let d = [];\n    setPageTitle(\"解析设置\")\n    analysisSettingModule(d);\n    setResult(d);\n}"},{"col_type":"movie_3","name":"默认配置","path":"defaultConfigs","rule":"js:\r\nlet defaultConfigs = {\r\n    starColor: \"#ffac2d\",\r\n    chooseColor: \"#FA7298\",\r\n    quickSearchConfigs: {\r\n        mode: \"scroll_button\",\r\n        order: [\"海阔搜索\"],\r\n        \"海阔搜索\": {\r\n            name: \"\",\r\n            pic: \"\"\r\n        }\r\n    },\r\n    detailsViewConfigs: {\r\n        use: \"默认\",\r\n        \"默认\": {\r\n            config: \"eval(JSON.parse(request('hiker://page/main')).rule);detailsView(type, id);\"\r\n        }\r\n    },\r\n    homePageConfigs:{\r\n        use: \"默认\",\r\n        \"默认\": {\r\n            config: `let d = [];\r\nd.push({\r\n    title: '',\r\n    img: 'https://gitcode.net/qq_41846756/hiker/-/raw/master/img/豆瓣.png',\r\n    desc: '0',\r\n    col_type: 'card_pic_1',\r\n    url: 'hiker://page/settingPage'\r\n})\r\n\r\nlet s = [\"推荐\", \"热门\", \"分类\", \"片单\", \"榜单\", \"将上映\"];\r\nlet img = \"https://gitcode.net/qq_41846756/hiker/-/raw/master/img/\";\r\nfor (let i in s) {\r\n    d.push({\r\n        title: s[i],\r\n        img: img + s[i] + '.jpg',\r\n        col_type: 'icon_2',\r\n        url: \"hiker://empty\" + '$page{fypage}/#/' + s[i] + \"#noHistory#\"\r\n    })\r\n}\r\nreturn d;`\r\n        }\r\n    },\r\n    analysisConfigs: {\r\n        use: \"不解析\",\r\n        \"不解析\": {\r\n            config: $.toString(() => {\r\n                return input;\r\n            }),\r\n            setting: $.toString(() => {\r\n                return \"toast://该插件无设置页面\";\r\n            })\r\n        },\r\n        \"断插\": {\r\n            config: $.toString(() => {\r\n                let file = \"hiker://files/rules/DuanNian/MyParse.json\";\r\n                let oldfile = \"hiker://files/cache/MyParseSet.json\";\r\n                if (fileExist(file)) {\r\n                    eval('json=' + fetch(file));\r\n                    let jsUrl = json.settings.cj;\r\n                    eval(fetch(jsUrl));\r\n                    return aytmParse(input);\r\n                } else if (fileExist(oldfile)) {\r\n                    let jsUrl = JSON.parse(fetch(oldfile)).cj;\r\n                    eval(fetch(jsUrl));\r\n                    return aytmParse(input);\r\n                } else {\r\n                    return 'toast://没找到断插配置文件';\r\n                }\r\n            }),\r\n            setting: $.toString(() => {\r\n                let file = \"hiker://files/rules/DuanNian/MyParse.json\";\r\n                let oldfile = \"hiker://files/cache/MyParseSet.json\";\r\n                if (fileExist(file)) {\r\n                    eval('json=' + fetch(file));\r\n                    let jsUrl = json.settings.cj;\r\n                    eval(fetch(jsUrl));\r\n                    return setUrl;\r\n                } else if (fileExist(oldfile)) {\r\n                    let jsUrl = JSON.parse(fetch(oldfile)).cj;\r\n                    eval(fetch(jsUrl));\r\n                    return setUrl;\r\n                } else {\r\n                    return \"hiker://page/Route?rule=MyFieldᴰⁿ&type=设置\";\r\n                }\r\n            })\r\n        }\r\n    }\r\n}\r\n$.exports = defaultConfigs;"},{"col_type":"movie_3","name":"工具集","path":"utils","rule":"js:\r\n//初始化配置,name为配置项名称\r\nfunction initConfigs(name, config) {\r\n    if (!config) {\r\n        config = JSON.parse(fetch(getMyVar('qdb_config')));\r\n    }\r\n    if (config[name] == null) {\r\n        let defaultConfigs = $.require(\"hiker://page/defaultConfigs\");\r\n        config[name] = defaultConfigs[name] ? defaultConfigs[name] : {};\r\n        writeFile(getMyVar('qdb_config'), JSON.stringify(config));\r\n    }\r\n    return config;\r\n}\r\n\r\n//获取配置项\r\nfunction getConfig(name, rootConfig) {\r\n    let config = rootConfig ? rootConfig : JSON.parse(fetch(getMyVar('qdb_config')));\r\n    if (name) {\r\n        if (config[name] == null) {\r\n            config = initConfigs(name, config);\r\n        }\r\n        return config[name];\r\n    } else {\r\n        return config;\r\n    }\r\n}\r\n\r\n//编码工具类\r\nlet ZipTool = {\r\n    dependence: 'https://unpkg.com/lz-string@1.4.4/libs/lz-string.min.js',\r\n    compress: {\r\n        size: {\r\n            key: \"text-compress-size\",\r\n            set: (newValue) => {\r\n                putMyVar(this.key, newValue.toString())\r\n            },\r\n            get: () => {\r\n                return parseInt(getMyVar(this.key, \"0\"))\r\n            }\r\n        },\r\n        exec: (input) => {\r\n            eval(request(ZipTool.dependence))\r\n            let result = LZString.compressToEncodedURIComponent(input)\r\n                // ZipTool.compress.size.set(result.length * 2)\r\n            return result\r\n        }\r\n    },\r\n    decompress: {\r\n        size: {\r\n            get: () => {\r\n                return getMyVar(\"text-decompress\", \"0\")\r\n                    .length\r\n            }\r\n        },\r\n        exec: (input) => {\r\n            eval(request(ZipTool.dependence))\r\n            let result = LZString.decompressFromEncodedURIComponent(input)\r\n            return result\r\n        }\r\n    }\r\n}\r\n\r\n// 配置项工具类\r\nlet ConfigTool = {\r\n    encTypeList: ['Base64', 'Zipper'].concat(getPastes()),\r\n    toClipboard: (configCommand, name) => {\r\n        if (configCommand.startsWith('toast://')) return configCommand\r\n        if (!name) {\r\n            let commandSplits = configCommand.split(\"￥\")\r\n            name = commandSplits[2]\r\n            name = name ? (\"“\" + name + \"”\") : ''\r\n        }\r\n        refreshPage(false);\r\n        return \"copy://\" + configCommand + \".js:'toast://导出\" + name + \"成功！'\";\r\n    },\r\n    export: (name, config, remark, encType) => {\r\n        let symbol = \"青豆口令￥\" + remark + \"￥\" + name + \"￥\" + encType + \"￥\";\r\n        let result = config\r\n        if (typeof result === \"object\") {\r\n            result = JSON.stringify(config);\r\n        } else if (typeof result === \"string\") {\r\n            result = config;\r\n        } else {\r\n            throw \"导出数据不合法\"\r\n        }\r\n        switch (encType) {\r\n            case 'Base64':\r\n                result = base64Encode(result);\r\n                break;\r\n            case 'Zipper':\r\n                result = ZipTool.compress.exec(result)\r\n                break;\r\n            default :\r\n                if (getAppVersion() > 2070) {\r\n                    symbol = \"青豆口令￥\" + remark + \"￥\" + name\r\n                    result = sharePaste(ConfigTool.export(name, config, remark, 'Zipper'),encType);\r\n                    return result + '\\n\\n' + symbol\r\n                } else {\r\n                    return 'toast://请更新视界版本至 C2070 以上'\r\n                }\r\n                break;\r\n        }\r\n        result = symbol + result\r\n        return result;\r\n    },\r\n    import: (configCommand) => {\r\n        let result = ''\r\n        if (configCommand.startsWith('云')) {\r\n            if (getAppVersion() > 2070) {\r\n                result = configCommand.split('青豆')[0].replace(/\\\\n/, '')\r\n                configCommand = parsePaste(result)\r\n            } else {\r\n                return 'toast://请更新视界版本至 C2070 以上'\r\n            }\r\n        }\r\n        try {\r\n            let resultSplits = configCommand.split(\"￥\")\r\n            let encType = resultSplits[3]\r\n            result = resultSplits[4]\r\n            switch (encType) {\r\n                case 'Base64':\r\n                    result = base64Decode(result);\r\n                    break;\r\n                case 'Zipper':\r\n                    result = ZipTool.decompress.exec(result)\r\n                    break;\r\n            }\r\n            result = JSON.parse(result);\r\n        } catch (e) {\r\n            log(e.message)\r\n            throw \"导入数据不合法\"\r\n        }\r\n        return result;\r\n    }\r\n}"}],"title":"青豆","author":"Joker&&Reborn","version":31,"type":"video","url":"hiker://empty##fypage","col_type":"movie_3","class_name":"","class_url":"","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:\nlet forceUrgencyMode = 0\nif (forceUrgencyMode) {\n    let e = '当前为强制急救模式'\n    let pos = '急救模式'\n    eval(JSON.parse(request(\"hiker://page/urgencyMode\")).rule)\n} else {\n    try {\n        eval(JSON.parse(request(\"hiker://page/main\")).rule);\n        home();\n    } catch (e) {\n        let pos = \"首页\";\n        eval(JSON.parse(request(\"hiker://page/urgencyMode\")).rule)\n    }\n}","searchFind":"js:\ntry {\n    eval(JSON.parse(request(\"hiker://page/main\")).rule);\n    search();\n} catch (e) {\n    let pos = \"搜索页\";\n    eval(JSON.parse(request(\"hiker://page/urgencyMode\")).rule)\n}","search_url":"hiker://empty/$page{fypage}/#/**","titleColor":"","group":"①推荐","detail_col_type":"movie_1_vertical_pic","detail_find_rule":"js:\ntry {\n    eval(JSON.parse(request(\"hiker://page/main\")).rule);\n    erji();\n} catch (e) {\n    let pos = \"二级页面\";\n    eval(JSON.parse(request(\"hiker://page/urgencyMode\")).rule)\n}","sdetail_col_type":"movie_1","sdetail_find_rule":"","ua":"mobile","preRule":"let file = \"hiker://files/rules/joker/qdb_config.js\";\nlet bakfile = \"hiker://files/rules/joker/qdb_config.js.bak\";\ntry {\n    let defaultConfigs = $.require(\"hiker://page/defaultConfigs?rule=青豆\");\n    if (!fileExist(file)) {\n        writeFile(file, JSON.stringify(defaultConfigs));\n    }else{\n        try{\n            let config = JSON.parse(fetch(file));\n            config.detailsViewConfigs[\"默认\"] = defaultConfigs.detailsViewConfigs[\"默认\"];\n            config.homePageConfigs[\"默认\"] = defaultConfigs.homePageConfigs[\"默认\"];\n            writeFile(file, JSON.stringify(config));\n        }catch(e){\n            writeFile(bakfile, fetch(file));\n            writeFile(file, JSON.stringify(defaultConfigs));\n        }\n    }\n    putMyVar(\"qdb_config\", file);\n} catch (e) {\n    let pos = \"预处理\";\n    eval(JSON.parse(request(\"hiker://page/urgencyMode?rule=青豆\")).rule)\n}","pages":"[{\"col_type\":\"movie_3\",\"name\":\"配置编辑界面\",\"path\":\"setting-editor\",\"rule\":\"js:\\n/**\\n * 通过传入 params 对象生成编辑界面\\n * @param d 视界 setResult 用的列表\\n * @param configKey config 的 key 值，比如我要拿 config.detailsViewConfigs，configKey 就传 \\\"detailsViewConfigs\\\"\\n * @param params 编辑界面的配置\\n *\\n * 【params对象数据示例】\\n * {\\n        key: \\\"input_name\\\",\\n        desc: \\\"请输入名称\\\",\\n        type: 'textarea',\\n        data: {\\n            config: {\\n                key: \\\"input_code\\\",\\n                desc: \\\"请输入输入配置\\\",\\n                type: 'textarea'\\n            },\\n        }\\n    }\\n */\\nfunction modeEditPage(d, configKey, params) {\\n    addListener('onClose', $.toString((params) => {\\n        clearMyVar(params.key)\\n        let datas = params.data;\\n        let dataKeys = Object.keys(datas);\\n        for (let i in dataKeys) {\\n            let dataKey = dataKeys[i]\\n            clearMyVar(datas[dataKey].key)\\n        }\\n    }, params))\\n    d.push({\\n        title: \\\"保存\\\",\\n        desc: params.desc,\\n        col_type: 'input',\\n        extra: {\\n            titleVisible: false,\\n            defaultValue: getMyVar(params.key, \\\"\\\"),\\n            type: params.type ? params.type : '',\\n            onChange: 'putMyVar(\\\"' + params.key + '\\\", input)'\\n        }\\n    })\\n    let datas = params.data;\\n    let dataKeys = Object.keys(datas);\\n    for (let dataKey of dataKeys) {\\n        let data = datas[dataKey]\\n        d.push({\\n            title: \\\"保存\\\",\\n            desc: data.desc,\\n            col_type: 'input',\\n            extra: {\\n                titleVisible: false,\\n                defaultValue: getMyVar(data.key, \\\"\\\"),\\n                type: data.type ? data.type : '',\\n                height: 5,\\n                highlight: true,\\n                onChange: 'putMyVar(\\\"' + data.key + '\\\", input)'\\n            }\\n        })\\n    }\\n    d.push({\\n        title: '保存',\\n        col_type: 'text_center_1',\\n        url: $('hiker://empty#noLoading#').lazyRule((configKey, params) => {\\n            let config = JSON.parse(request(getMyVar('qdb_config')))\\n            let name = getMyVar(params.key, \\\"\\\");\\n            if(name == '默认') return 'toast://默认配置无法编辑'\\n            config[configKey].use = name\\n            if (!config[configKey][name]) config[configKey][name] = {}\\n            let datas = params.data;\\n            let dataKeys = Object.keys(datas);\\n            for (let i in dataKeys) {\\n                let dataKey = dataKeys[i]\\n                let data = datas[dataKey]\\n                config[configKey][name][dataKey] = getMyVar(data.key, \\\"\\\");\\n            }\\n            writeFile(getMyVar('qdb_config'), JSON.stringify(config))\\n            back();\\n            return 'toast://保存成功'\\n        }, configKey, params)\\n    })\\n}\\n\\n//自定义首页-配置编辑页面\\nfunction homePageModeEditPage(d) {\\n    d.push({\\n        title: '<font color=\\\"red\\\">' + '返回数组,供setResult使用' + '</font>' + '<font color=\\\"#808080\\\"><br>' + '【内置函数】' + '<br>&nbsp;&nbsp;&nbsp;hiker://page/settingPage: 设置页(默认首页有使用示例)' + '</font>',\\n        col_type: 'rich_text'\\n    })\\n    modeEditPage(d, \\\"homePageConfigs\\\", {\\n        key: \\\"input_name\\\",\\n        desc: \\\"请输入名称\\\",\\n        type: 'input',\\n        data: {\\n            config: {\\n                key: \\\"input_code\\\",\\n                desc: \\\"请输入配置代码\\\",\\n                type: 'textarea'\\n            }\\n        }\\n    })\\n}\\n\\n//自定义详情页面-配置编辑页面\\nfunction detailViewModeEditPage(d) {\\n    d.push({\\n        title: '<font color=\\\"#808080\\\">' + '【内置变量】' + '<br>&nbsp;&nbsp;&nbsp;id: 片单id' + '<br>&nbsp;&nbsp;&nbsp;type: 片单类型' + '<br>&nbsp;&nbsp;&nbsp;title: 片单标题' + '</font>',\\n        col_type: 'rich_text'\\n    })\\n    modeEditPage(d, \\\"detailsViewConfigs\\\", {\\n        key: \\\"input_name\\\",\\n        desc: \\\"请输入名称\\\",\\n        // type: 'input'\\n        data: {\\n            config: {\\n                key: \\\"input_code\\\",\\n                desc: \\\"请输入配置代码\\\",\\n                type: 'textarea'\\n            },\\n            setting: {\\n                key: \\\"input_setting_code\\\",\\n                desc: \\\"请输入设置页面代码\\\",\\n                type: 'textarea'\\n            }\\n        }\\n    })\\n}\\n\\n//自定义解析-编辑页面\\nfunction analysisModeEditPage(d) {\\n    d.push({\\n        title: '<font color=\\\"#808080\\\">' + '【解析代码内置变量】' + '<br>&nbsp;&nbsp;&nbsp;input: 视频链接' + '</font>',\\n        col_type: 'rich_text'\\n    })\\n    modeEditPage(d, \\\"analysisConfigs\\\", {\\n        key: \\\"input_name\\\",\\n        desc: \\\"请输入名称\\\",\\n        // type: 'input'\\n        data: {\\n            config: {\\n                key: \\\"input_code\\\",\\n                desc: \\\"请输入解析代码\\\",\\n                type: 'textarea'\\n            },\\n            extra: {\\n                key: 'input_extra',\\n                desc: '请输入extra属性值',\\n                type: 'textarea'\\n            },\\n            setting: {\\n                key: \\\"input_setting_code\\\",\\n                desc: \\\"请输入设置页面代码\\\",\\n                type: 'textarea'\\n            }\\n        }\\n    })\\n}\\n\\nlet d = [];\\nlet view = getParam(\\\"view\\\",\\\"\\\");\\nif(view==\\\"analysisModeEditPage\\\"){\\n    setPageTitle(\\\"自定义解析编辑\\\")\\n    analysisModeEditPage(d);\\n}else if(view==\\\"detailViewModeEditPage\\\"){\\n    setPageTitle(\\\"自定义详情页编辑\\\")\\n    detailViewModeEditPage(d);\\n}else if(view==\\\"homePageModeEditPage\\\"){\\n    setPageTitle(\\\"自定义首页编辑\\\")\\n    homePageModeEditPage(d);\\n}\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"解除被封ip\",\"path\":\"releaseIP\",\"rule\":\"js:\\nlet id = getParam('id');\\nlet d = [];\\nd.push({\\n    title: '您已被封禁IP地址或触发了人机验证，请按照以下步骤处理(如不处理您将在一段时间内无法正常获取剧集列表)',\\n    url: 'hiker://empty',\\n    col_type: 'text_1'\\n});\\nd.push({\\n    title: '1.点击此处导入自动获取Cookie插件',\\n    url: $()\\n        .lazyRule(() => {\\n            let getDoubanCookie = \\\"(function(){if(window['location']['host']=='www.douban.com'){fy_bridge_app['writeFile']('hiker://files/cache/doubancookie.txt',fy_bridge_app['getCookie']('https://www.douban.com/'));}if(window['location']['host']=='m.douban.com'){fy_bridge_app['writeFile']('hiker://files/cache/doubancookie.txt',fy_bridge_app['getCookie']('https://m.douban.com/'));}}());\\\"\\n            if (!fileExist('hiker://files/cache/global_getDoubanCookie.js')) {\\n                writeFile('hiker://files/cache/global_getDoubanCookie.js', getDoubanCookie);\\n            };\\n            return 'rule://' + base64Encode('海阔视界，网页插件￥js_url￥global_getDoubanCookie@hiker://files/cache/global_getDoubanCookie.js');\\n        }),\\n    col_type: 'text_1'\\n});\\nd.push({\\n    title: '2.点击此处进入网页进行登录或人机验证，完成后返回此页面',\\n    url: 'https://movie.douban.com/subject/' + id + '/',\\n    col_type: 'text_1'\\n});\\nd.push({\\n    title: '3.完成登录或人机验证后返回影片详情页面重新进入',\\n    url: 'hiker://empty',\\n    col_type: 'text_1'\\n});\\nsetResult(d)\"},{\"col_type\":\"movie_3\",\"name\":\"抢救页面\",\"path\":\"urgencyMode\",\"rule\":\"js:\\nlet d = [];\\n\\nd.push({\\n  title: '很明显,出了一些小问题,建议查看设置',\\n  desc: \\\"出错位置:\\\" + (typeof(pos) == 'undefined' ? '未知' : pos),\\n  col_type: 'text_center_1',\\n  url: 'hiker://empty',\\n});\\n\\nd.push({\\n    title: '点我进入设置页',\\n    col_type: 'text_1',\\n    url: \\\"hiker://page/settingPage\\\"\\n})\\n\\nd.push({\\n  title: '若修改设置不起作用,点我复制错误信息提交给开发者',\\n  desc: e.toString(),\\n  col_type: 'text_1',\\n  url: 'copy://' + e.toString(),\\n});\\n\\nsetResult(d);\\n\"},{\"col_type\":\"movie_3\",\"name\":\"顺佬专用详情页\",\"path\":\"Sdetail\",\"rule\":\"js:\\neval(MY_RULE.preRule);\\neval(JSON.parse(request(\\\"hiker://page/main\\\")).rule);\\nlet type = getParam('type', ''),\\n    id = getParam('id', '');\\ndetailsView(type, id);\"},{\"col_type\":\"movie_3\",\"name\":\"主代码\",\"path\":\"main\",\"rule\":\"let version = 202402170001;\\r\\neval(JSON.parse(request('hiker://page/utils')).rule);\\r\\n\\r\\nlet parseVideoUrlLazy = $.toString(() => {\\r\\n    eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n    let analysisConfigs = getConfig('analysisConfigs');\\r\\n    let analysisConfig = analysisConfigs[analysisConfigs.use].config;\\r\\n    let result = \\\"toast://解析失败\\\";\\r\\n    try {\\r\\n        if (analysisConfig.startsWith(\\\"(\\\")) {\\r\\n            eval('result = ' + analysisConfig);\\r\\n        } else {\\r\\n            eval('result = ' + '(() => {' + analysisConfig + '})()');\\r\\n        }\\r\\n    } catch (e) {}\\r\\n    return result;\\r\\n})\\r\\n\\r\\n//首页\\r\\nfunction home() {\\r\\n    if (getItem(\\\"start\\\", \\\"\\\") == \\\"\\\") {\\r\\n        setItem(\\\"start\\\", \\\"1\\\");\\r\\n        setItem('update', String(version));\\r\\n        confirm({\\r\\n            title: '温馨提示',\\r\\n            content: '此规则仅限学习交流使用\\\\n请于导入后24小时内删除!\\\\n\\\\n任何组织或个人不得以任何方式方法\\\\n传播此规则的整体或部分!!\\\\n\\\\n感谢大佬们提供的技术支持!!!',\\r\\n            confirm: '',\\r\\n            cancel: ''\\r\\n        })\\r\\n    } else {\\r\\n        let updateInfo = getItem('update', '');\\r\\n        if (updateInfo == '' || parseInt(updateInfo) < version) {\\r\\n            setItem('update', String(version));\\r\\n            confirm({\\r\\n                title: '本次更新内容',\\r\\n                content: '降低配置文件出错概率',\\r\\n                confirm: '',\\r\\n                cancel: ''\\r\\n            })\\r\\n        }\\r\\n    }\\r\\n    addListener(\\\"onClose\\\", $.toString(() => {\\r\\n        clearMyVar(\\\"qdb_config\\\");\\r\\n    }))\\r\\n    let homePageConfigs = getConfig('homePageConfigs');\\r\\n    let homePageConfig = homePageConfigs[homePageConfigs.use].config;\\r\\n    if (homePageConfig.startsWith(\\\"(\\\")) {\\r\\n        eval('d = ' + homePageConfig)\\r\\n    } else {\\r\\n        eval('d = ' + '(() => {' + homePageConfig + '})()')\\r\\n    }\\r\\n    setResult(d);\\r\\n}\\r\\n\\r\\n//海阔搜索\\r\\nfunction search() {\\r\\n    let wd = MY_URL.split(\\\"/#/\\\")[1];\\r\\n    let page = MY_PAGE;\\r\\n    let s = getDoubanRes('https://frodo.douban.com/api/v2/search/subjects?type=movie&q=' + wd + (page ? '&start=' + (page - 1) * 20 : '&start=0') + '&count=20');\\r\\n\\r\\n    let list = s.items;\\r\\n    let detailsViewConfigs = getConfig('detailsViewConfigs');\\r\\n\\r\\n    let items = [];\\r\\n    list.forEach(data => {\\r\\n        if (data.target_type == 'doulist_cards') {\\r\\n            data.target.doulists.forEach(e => {\\r\\n                items.push({\\r\\n                    title: e.title,\\r\\n                    url: $('hiker://empty/$page{fypage}#noHistory#')\\r\\n                        .rule((type, id) => {\\r\\n                            eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n                            if (type === \\\"playlist\\\") {\\r\\n                                douList(id, MY_PAGE, 50);\\r\\n                            } else if (type == \\\"collection\\\" || type == \\\"chart\\\") {\\r\\n                                subjectCollectionList(MY_PAGE, 50, id);\\r\\n                            }\\r\\n                        }, e.target_type, e.id),\\r\\n                    img: e.cover_url + \\\"@Referer=\\\" + e.cover_url\\r\\n                })\\r\\n            })\\r\\n        } else if (data.target_type == 'chart') {\\r\\n            let e = data.target;\\r\\n            items.push({\\r\\n                title: e.title,\\r\\n                url: $('hiker://empty/$page{fypage}#noHistory#')\\r\\n                    .rule((type, id) => {\\r\\n                        eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n                        if (type === \\\"playlist\\\") {\\r\\n                            douList(id, MY_PAGE, 50);\\r\\n                        } else if (type == \\\"collection\\\" || type == \\\"chart\\\") {\\r\\n                            subjectCollectionList(MY_PAGE, 50, id);\\r\\n                        }\\r\\n                    }, data.target_type, e.id),\\r\\n                img: e.cover_url + \\\"@Referer=\\\" + e.cover_url\\r\\n            })\\r\\n        } else {\\r\\n            let type = data.target_type,\\r\\n                id = data.target.id,\\r\\n                title = data.target.title;\\r\\n            let useConfig = detailsViewConfigs[detailsViewConfigs.use].config;\\r\\n            let urlParams = {};\\r\\n            if (useConfig.startsWith('{')) {\\r\\n                eval('urlParams = ' + useConfig);\\r\\n            } else {\\r\\n                urlParams.url = $(\\\"hiker://empty#noHistory##immersiveTheme#\\\" + '?type=' + type + '&id=' + id)\\r\\n                    .rule((type, id, title, useConfig) => {\\r\\n                        eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n                        if (type === \\\"playlist\\\") {\\r\\n                            douList(id, MY_PAGE, 50);\\r\\n                        } else {\\r\\n                            eval(useConfig);\\r\\n                        }\\r\\n                    }, type, id, title, useConfig);\\r\\n            }\\r\\n            items.push({\\r\\n                title: title,\\r\\n                img: data.target.cover_url + \\\"@Referer=\\\" + data.target.cover_url,\\r\\n                desc: data.type_name,\\r\\n                content: data.target.card_subtitle,\\r\\n                url: urlParams.url,\\r\\n                extra: urlParams.extra\\r\\n            });\\r\\n        }\\r\\n\\r\\n    });\\r\\n\\r\\n    setSearchResult({\\r\\n        data: items\\r\\n    });\\r\\n}\\r\\n\\r\\n//二级页面\\r\\nfunction erji() {\\r\\n    addListener(\\\"onClose\\\", $.toString(() => {\\r\\n        clearMyVar(\\\"findList\\\");\\r\\n        clearMyVar(\\\"hotList\\\");\\r\\n        clearMyVar(\\\"classlist\\\");\\r\\n        clearMyVar(\\\"playlist\\\");\\r\\n        clearMyVar(\\\"rankList\\\");\\r\\n        clearMyVar(\\\"ranking\\\");\\r\\n        clearMyVar(\\\"coming\\\");\\r\\n        clearMyVar(\\\"analysis\\\");\\r\\n    }))\\r\\n\\r\\n    let choice = MY_URL.split('/#/')[1].split('#')[0];\\r\\n    let d = [];\\r\\n    switch (choice) {\\r\\n        case \\\"推荐\\\":\\r\\n            eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n            d = findList(MY_PAGE, 10);\\r\\n            break;\\r\\n        case \\\"热门\\\":\\r\\n            eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n            d = hotList(MY_PAGE, 10);\\r\\n            break;\\r\\n        case \\\"分类\\\":\\r\\n            eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n            d = classList(MY_PAGE, 15);\\r\\n            break;\\r\\n        case \\\"片单\\\":\\r\\n            eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n            d = playList(MY_PAGE, 10);\\r\\n            break;\\r\\n        case \\\"榜单\\\":\\r\\n            eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n            d = rankList(MY_PAGE, 10);\\r\\n            break;\\r\\n        case \\\"将上映\\\":\\r\\n            eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n            d = comingList(MY_PAGE, 10);\\r\\n            break;\\r\\n    }\\r\\n    setResult(d);\\r\\n}\\r\\n\\r\\n//获取豆瓣资源,返回json数据\\r\\nfunction getDoubanRes(url) {\\n    //log(url)\\r\\n    var cc =null;\\r\\n    if($.type(url)=='object'){\\r\\n         cc=url.cc;\\r\\n         url = url.url;\\r\\n    }\\r\\n    var _url = url;\\r\\n    if (url.indexOf('apikey') === -1) {\\r\\n        _url += (url.indexOf('?') === -1 ? '?' : '&') + \\\"apikey=0dad551ec0f84ed02907ff5c42e8ec70\\\"\\r\\n    }\\r\\n    let _ts = parseInt(Date.now()/1000).toString();\\r\\n    let m = 'GET&' + encodeURIComponent(url.split('douban.com')[1].split('?')[0]) + '&' + _ts;\\r\\n    eval(getCryptoJS());\\r\\n    let _sig = hexToBase64(CryptoJS.HmacSHA1(m,'bf7dddc7c9cfe6f7').toString());\\r\\n    _url += '&_sig=' + _sig +'&_ts=' + _ts;\\r\\n    //let cookieCache = 'hiker://files/cache/doubancookie.txt';\\r\\n    let s = fetch(_url, {\\r\\n        headers: {\\r\\n            //'Cookie': fetch(cookieCache),\\r\\n            \\\"User-Agent\\\": \\\"Rexxar-Core/0.1.3 api-client/1 com.douban.frodo/7.9.0.beta2(215) Android/25 product/TAS-AL00 vendor/HUAWEI model/TAS-AL00  rom/android  network/wifi  platform/mobile com.douban.frodo/7.9.0.beta2(215) Rexxar/1.2.151  platform/mobile 1.2.151\\\"\\r\\n        },\\r\\n        method: 'GET'\\r\\n        //body: 'host=frodo.douban.com'\\r\\n    });\\r\\n    let json = JSON.parse(s);\\r\\n    if(json.localized_message){\\r\\n        cc= cc==null ? 1 : cc+1;\\r\\n        log('重试次数:'+cc);\\r\\n        if(cc>5){throw new Error('超时')}\\r\\n        java.lang.Thread.sleep(1000);\\r\\n        return getDoubanRes({url:url,cc:cc});\\r\\n    }else{\\r\\n        return json;\\r\\n    }\\r\\n}\\r\\n\\r\\n//根据评分信息获取评分星星样式\\r\\nfunction computeRating(e, t) {\\r\\n    let i = \\\"\\\";\\r\\n    for (let r = 0; r < 5; r++) r < Math.round(t / (e / 5)) ? i += \\\"★\\\" : i += \\\"☆\\\";\\r\\n    return i;\\r\\n}\\r\\n\\r\\n//评分详情页面\\r\\nfunction rating(type, id, ratingCount) {\\r\\n    setPageTitle('影片信息');\\r\\n    //评分统计\\r\\n    let i = getDoubanRes(\\\"https://frodo.douban.com/api/v2/\\\" + type + \\\"/\\\" + id + \\\"/rating\\\");\\r\\n\\r\\n    let r = \\\"<h2>评分统计</h2>\\\";\\r\\n\\r\\n    r += '<small><font color=\\\"grey\\\">' + ratingCount + '人评分' + '</font></small><br/>';\\r\\n\\r\\n    let starColor = getConfig('starColor');\\r\\n    if (i.stats.length == 0) {\\r\\n        i.stats = [0, 0, 0, 0, 0];\\r\\n    }\\r\\n    i.stats.reverse().forEach(((value, index) => {\\r\\n        r += '<font color=' + starColor + '>' + [\\\"★★★★★\\\", \\\"★★★★☆\\\", \\\"★★★☆☆\\\", \\\"★★☆☆☆\\\", \\\"★☆☆☆☆\\\"][index] + \\\"</font>&nbsp;\\\";\\r\\n\\r\\n        r += function(e) {\\r\\n            let t1 = '';\\r\\n            for (let i = 0; i < e; i++) t1 += \\\"▇\\\";\\r\\n            let t2 = '';\\r\\n            for (let i = 0; i < 10 - e; i++) t2 += \\\"▇\\\";\\r\\n            return t1.fontcolor('#ffac2d') + t2.fontcolor('#e5e1e4');\\r\\n        }((10 * value).toFixed(0));\\r\\n\\r\\n        r += '&nbsp;<small><font color=\\\"grey\\\">' + (100 * value)\\r\\n            .toFixed(1) + \\\"%</font></small><br/>\\\";\\r\\n    }));\\r\\n\\r\\n    r += [i.done_count ? i.done_count + \\\"人看过\\\" : \\\"\\\", i.doing_count ? i.doing_count + \\\"人在看\\\" : \\\"\\\", i.wish_count ? i.wish_count + \\\"人想看\\\" : \\\"\\\"].join(\\\"&nbsp;&nbsp;\\\")\\r\\n        .small()\\r\\n        .fontcolor('grey');\\r\\n    //影片信息\\r\\n    i = getDoubanRes(\\\"https://frodo.douban.com/api/v2/\\\" + type + \\\"/\\\" + id + \\\"/desc\\\");\\r\\n    let l = i.html.replace(/[\\\\n\\\\t\\\\r]/g, \\\"\\\")\\r\\n        .replace(/<td\\\\s*[^>]*>(.*?)<\\\\/td>/g, \\\"<span>$1</span>\\\")\\r\\n        .replace(/<tr\\\\s*[^>]*>(.*?)<\\\\/tr>/g, \\\"<teng>$1</teng><br/>\\\");\\r\\n    parseDomForArray(l, \\\"section&&teng\\\").forEach((e => {\\r\\n        let t = parseDomForArray(e, \\\"span\\\");\\r\\n        l = l.replace(t[0], '<font color=\\\"grey\\\">' + t[0].replace(/<span\\\\s*[^>]*>(.*?)<\\\\/span>/g, \\\"$1\\\") + \\\"：</font>\\\")\\r\\n    }));\\r\\n    r += l;\\r\\n    //获奖记录\\r\\n    let page = MY_PAGE;\\r\\n    let s = getDoubanRes(\\\"https://frodo.douban.com/api/v2/\\\" + type + \\\"/\\\" + id + \\\"/awards?start=\\\" + 20 * (page - 1) + \\\"&count=20\\\");\\r\\n    r += \\\"<h2>获奖记录\\\" + '<small><font color=\\\"grey\\\">' + (s.total != 0 ? '(共' + s.total + '项)' : '(暂无)') + '</font></small>' + \\\"</h2>\\\";\\r\\n    //r += '<font color=\\\"grey\\\">' + (s.total != 0 ? '共' + s.total + '项' : '暂无') + '</font><br/>';\\r\\n    let r2 = '';\\r\\n    s.awards.forEach(e => {\\r\\n        r2 += (e.ceremony.title + '(' + e.ceremony.year + ')').big().bold() + '<small>(<a href=\\\"hiker://empty#noHistory#@rule=js:eval(JSON.parse(fetch(`hiker://page/main`)).rule);awardView(`' + e.ceremony.id + '`,`' + e.ceremony.title + '`);\\\">查看详情</a>)</small>' + '<br/>';\\r\\n        e.categories.forEach(item => {\\r\\n            r2 += (item.category.title + (item.is_won ? '' : '(提名)') + '&nbsp;').fontcolor(\\\"grey\\\");\\r\\n            r2 += item.celebrities.map(celebrity => celebrity.name).join('&nbsp;/&nbsp;');\\r\\n            r2 += '<br/>';\\r\\n        })\\r\\n        r2 += '<br/>';\\r\\n    })\\r\\n\\r\\n    if (page == 1) {\\r\\n        setHomeResult({\\r\\n            data: [{\\r\\n                title: r + r2,\\r\\n                col_type: \\\"rich_text\\\"\\r\\n            }]\\r\\n        })\\r\\n    } else if(s.awards.length == 0){\\r\\n        setResult([]);\\r\\n    } else{\\r\\n        setHomeResult({\\r\\n            data: [{\\r\\n                title: r2,\\r\\n                col_type: \\\"rich_text\\\"\\r\\n            }]\\r\\n        })\\r\\n    }\\r\\n}\\r\\n\\r\\n//奖项详情页面\\r\\nfunction awardView(id, name) {\\r\\n    setPageTitle(name);\\r\\n    let s = getDoubanRes(\\\"https://frodo.douban.com/api/v2/ceremony/\\\" + id);\\r\\n    let a = [];\\r\\n    a.push({\\r\\n        title: '““””' + (s.title + '(' + s.year + ')').big().bold(),\\r\\n        col_type: 'text_1',\\r\\n        extra: {\\r\\n            lineVisible: false\\r\\n        }\\r\\n    })\\r\\n    s.playlists.forEach(e => {\\r\\n        a.push({\\r\\n            title: e.title,\\r\\n            desc: '共' + e.items_count + '部',\\r\\n            img: e.cover_url + '@Referer=' + e.cover_url,\\r\\n            url: $('hiker://empty#noHistory#').rule((id) => {\\r\\n                eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n                douList(id);\\r\\n            }, e.id)\\r\\n        })\\r\\n    })\\r\\n\\r\\n    let r = '';\\r\\n    s.prizes.forEach(e => {\\r\\n        r += '<h4>获奖名单(' + e.title + ')</h4>';\\r\\n        e.categories.forEach(t => {\\r\\n            r += (t.title + '&nbsp;&nbsp;&nbsp;&nbsp;').fontcolor(\\\"grey\\\").bold();\\r\\n            r += t.results.map(item => !!item.info ? item.info + ('&nbsp;-&nbsp;' + item.title + '&nbsp;&nbsp;').fontcolor(\\\"grey\\\") : item.title).join('&nbsp;/&nbsp;').bold();\\r\\n            r += '<br/>';\\r\\n        })\\r\\n    })\\r\\n    a.push({\\r\\n        title: r,\\r\\n        col_type: 'rich_text'\\r\\n    })\\r\\n\\r\\n    let i = [];\\r\\n    s.ceremonies.forEach(e => {\\r\\n        i.push({\\r\\n            title: e.title,\\r\\n            desc: e.year + '年',\\r\\n            col_type: 'movie_3',\\r\\n            img: e.pic.normal + '@Referer=' + e.pic.normal,\\r\\n            url: $('hiker://empty#noHistory#').rule((id, name) => {\\r\\n                eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n                awardView(id, name);\\r\\n            }, e.id, e.title)\\r\\n        })\\r\\n    })\\r\\n    if (i.length > 0) {\\r\\n        i.unshift({\\r\\n            title: '““””' + '历届回顾'.big().bold(),\\r\\n            col_type: 'text_1',\\r\\n            extra: {\\r\\n                lineVisible: false\\r\\n            }\\r\\n        })\\r\\n    }\\r\\n\\r\\n    setResult(a.concat(i));\\r\\n}\\r\\n\\r\\n//剧照页面\\r\\nfunction stillsList(type, id) {\\r\\n    addListener('onClose', 'clearMyVar(\\\"photo\\\")');\\r\\n    let page = MY_PAGE;\\r\\n    let items = {\\r\\n        剧照: 'photos',\\r\\n        海报: 'covers'\\r\\n    };\\r\\n    let a = [];\\r\\n    let temp = getMyVar('photo', 'photos');\\r\\n    let color = getConfig('chooseColor');\\r\\n    for (let i in items) {\\r\\n        a.push({\\r\\n            title: temp == items[i] ? '““””' + i.fontcolor(color) : i,\\r\\n            col_type: 'scroll_button',\\r\\n            url: $('hiker://empty').lazyRule((t) => {\\r\\n                putMyVar('photo', t);\\r\\n                refreshPage();\\r\\n                return 'hiker://empty';\\r\\n            }, items[i])\\r\\n        })\\r\\n    }\\r\\n\\r\\n    let r = getDoubanRes(\\\"https://frodo.douban.com/api/v2/\\\" + type + \\\"/\\\" + id + \\\"/\\\" + temp + \\\"?start=\\\" + 30 * (page - 1) + \\\"&count=30\\\");\\r\\n    let l = r.photos.map((e => ({\\r\\n        title: e.create_time,\\r\\n        img: e.image.small.url + \\\"@Referer=\\\" + e.image.small.url,\\r\\n        url: e.image.large.url + \\\"?type=.jpg@Referer=\\\" + e.image.large.url + \\\"?type=.jpg\\\",\\r\\n        col_type: \\\"pic_2\\\"\\r\\n    })));\\r\\n\\r\\n    if (page == 1) {\\r\\n        l.unshift({\\r\\n            col_type: \\\"blank_block\\\"\\r\\n        });\\r\\n        if (temp == 'photos') {\\r\\n            l.unshift({\\r\\n                title: \\\"<big>共<strong> \\\" + r.total + ' </strong>张剧照</big><br/><small><font color=\\\"grey\\\">官方剧照：' + r.o + \\\"张&nbsp;截图：\\\" + r.c + \\\"张&nbsp;工作照：\\\" + r.w + \\\"张&nbsp;新闻图片：\\\" + r.n + \\\"张&nbsp;粉丝图片：\\\" + r.f + \\\"张</font></small>\\\",\\r\\n                col_type: \\\"rich_text\\\"\\r\\n            })\\r\\n        } else {\\r\\n            l.unshift({\\r\\n                title: \\\"<big>共<strong> \\\" + r.total + \\\"</strong>张海报</big>\\\",\\r\\n                col_type: \\\"rich_text\\\"\\r\\n            })\\r\\n        }\\r\\n        l = a.concat(l);\\r\\n    }\\r\\n    setHomeResult({\\r\\n        data: l\\r\\n    })\\r\\n}\\r\\n\\r\\n//演职人员页面\\r\\nfunction credits(type, id) {\\r\\n    let i = getDoubanRes(\\\"https://frodo.douban.com/api/v2/\\\" + type + \\\"/\\\" + id + \\\"/credits\\\");\\r\\n    let r = [];\\r\\n    i.credits.forEach((e => {\\r\\n        r.push({\\r\\n            title: e.title,\\r\\n            col_type: \\\"rich_text\\\"\\r\\n        });\\r\\n        e.celebrities.forEach((e => {\\r\\n            r.push({\\r\\n                title: e.name + \\\"\\\\n\\\" + e.latin_name,\\r\\n                desc: e.character,\\r\\n                img: e.avatar.normal + \\\"@Referer=\\\" + e.avatar.normal,\\r\\n                col_type: 'movie_1_vertical_pic',\\r\\n                url: $('hiker://empty#noHistory##immersiveTheme#').rule((e) => {\\r\\n                    eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n                    elessarView(e.uri.split(\\\"subject_id=\\\")[1], e.id, e.name);\\r\\n                }, e)\\r\\n            })\\r\\n        }))\\r\\n    }));\\r\\n    setHomeResult({\\r\\n        data: r\\r\\n    })\\r\\n}\\r\\n\\r\\n//短评页面\\r\\nfunction shortCommentList(type, id) {\\r\\n    addListener('onClose', \\\"clearMyVar('shortcomment')\\\");\\r\\n    let items = {\\r\\n        热门: 'hot',\\r\\n        最新: 'latest'\\r\\n    }\\r\\n    let u = getMyVar('shortcomment', 'hot');\\r\\n    let a = [];\\r\\n    let chooseColor = getConfig('chooseColor') // || \\\"#FA7298\\\";\\r\\n    for (i in items) {\\r\\n        a.push({\\r\\n            title: u === items[i] ? '““””<b> <font color=' + chooseColor + '>' + i + ' </font></b>' : i,\\r\\n            col_type: 'scroll_button',\\r\\n            url: $('hiker: //empty').lazyRule((t) => {\\r\\n                putMyVar(\\\"shortcomment\\\", t);\\r\\n                refreshPage();\\r\\n                return 'hiker://empty'\\r\\n            }, items[i])\\r\\n        })\\r\\n    }\\r\\n\\r\\n    let page = MY_PAGE;\\r\\n    let r = getDoubanRes(\\\"https://frodo.douban.com/api/v2/\\\" + type + \\\"/\\\" + id + \\\"/interests?start=\\\" + 30 * (page - 1) + \\\"&count=30&order_by=\\\" + u);\\r\\n    let l = [];\\r\\n    let starColor = getConfig('starColor');\\r\\n    r.interests.forEach((e => {\\r\\n        let t = \\\"\\\";\\r\\n        if (e.rating) {\\r\\n            t = computeRating(e.rating.max, e.rating.value);\\r\\n        }\\r\\n        l.push({\\r\\n            title: e.user.name,\\r\\n            img: e.user.avatar,\\r\\n            url: e.user.url,\\r\\n            col_type: \\\"avatar\\\"\\r\\n        });\\r\\n        l.push({\\r\\n            title: e.comment + (t ? '<br/><small>看过 <font color=' + starColor + '>' + t + \\\"</font></small>\\\" : \\\"\\\") + '<br/><small><font color=\\\"grey\\\">' + e.vote_count + \\\"赞•\\\" + /\\\\d{4}-\\\\d{1,2}-\\\\d{1,2}/g.exec(e.create_time) + \\\"</font></small>\\\",\\r\\n            col_type: \\\"rich_text\\\"\\r\\n        });\\r\\n        l.push({\\r\\n            col_type: \\\"line\\\"\\r\\n        })\\r\\n    }));\\r\\n\\r\\n    if (page == 1) {\\r\\n        l.unshift({\\r\\n            col_type: \\\"blank_block\\\"\\r\\n        });\\r\\n        l.unshift({\\r\\n            title: \\\"<big>共<strong> \\\" + r.total + \\\" </strong>条短评</big>\\\",\\r\\n            col_type: \\\"rich_text\\\"\\r\\n        });\\r\\n        setHomeResult({\\r\\n            data: a.concat(l)\\r\\n        })\\r\\n    } else {\\r\\n        setHomeResult({\\r\\n            data: l\\r\\n        })\\r\\n    }\\r\\n}\\r\\n\\r\\n//剧评页面\\r\\nfunction dramaReviewList(type, id) {\\r\\n    addListener('onClose', \\\"clearMyVar('dramareview')\\\");\\r\\n    let items = {\\r\\n        热门: 'hot',\\r\\n        最新: 'latest'\\r\\n    }\\r\\n    let u = getMyVar('dramareview', 'hot');\\r\\n    let a = [];\\r\\n    let chooseColor = getConfig('chooseColor');\\r\\n    for (i in items) {\\r\\n        a.push({\\r\\n            title: u === items[i] ? '““””<b> <font color=' + chooseColor + '>' + i + ' </font></b>' : i,\\r\\n            col_type: 'scroll_button',\\r\\n            url: $('hiker: //empty').lazyRule((t) => {\\r\\n                putMyVar(\\\"dramareview\\\", t);\\r\\n                refreshPage();\\r\\n                return 'hiker://empty'\\r\\n            }, items[i])\\r\\n        })\\r\\n    }\\r\\n\\r\\n    let page = MY_PAGE\\r\\n    let r = getDoubanRes(\\\"https://frodo.douban.com/api/v2/\\\" + type + \\\"/\\\" + id + \\\"/reviews?start=\\\" + 15 * (page - 1) + \\\"&count=15&order_by=\\\" + u);\\r\\n    let l = [];\\r\\n    let starColor = getConfig('starColor');\\r\\n    r.reviews.forEach((e => {\\r\\n        let t = \\\"\\\";\\r\\n        if (e.rating) {\\r\\n            t = computeRating(e.rating.max, e.rating.value);\\r\\n        }\\r\\n        let i = e.comments_count ? e.comments_count + \\\"回复\\\" : \\\"\\\",\\r\\n            r = e.useful_count ? e.useful_count + \\\"有用\\\" : \\\"\\\",\\r\\n            o = e.reshares_count ? e.reshares_count + \\\"转发\\\" : \\\"\\\";\\r\\n\\r\\n        r = i && r ? \\\"•\\\" + r : r;\\r\\n        o = (i || r) && o ? \\\"•\\\" + o : o;\\r\\n        l.push({\\r\\n            title: e.user.name,\\r\\n            img: e.user.avatar,\\r\\n            url: e.user.url,\\r\\n            col_type: \\\"avatar\\\"\\r\\n        })\\r\\n        l.push({\\r\\n            title: \\\"<strong>\\\" + e.title + \\\"</strong><br/>\\\" + e.abstract + '   <small>(<a href=\\\"hiker://empty#noHistory#@rule=js:eval(JSON.parse(fetch(`hiker://page/main`)).rule);dramaReviewView(' + e.id + ')\\\">更多</a>)</small>' + (t ? '<br/><small>看过 <font color=' + starColor + '>' + t + \\\"</font></small>\\\" : \\\"\\\") + '<br/><small><font color=\\\"grey\\\">' + i + r + o + \\\"</font></small>\\\",\\r\\n            col_type: \\\"rich_text\\\"\\r\\n        })\\r\\n        l.push({\\r\\n            col_type: \\\"line\\\"\\r\\n        })\\r\\n    }));\\r\\n\\r\\n    if (page == 1) {\\r\\n        l.unshift({\\r\\n            col_type: \\\"blank_block\\\"\\r\\n        });\\r\\n        l.unshift({\\r\\n            title: \\\"<big>共<strong> \\\" + r.total + \\\" </strong>条剧评</big>\\\",\\r\\n            col_type: \\\"rich_text\\\"\\r\\n        });\\r\\n\\r\\n        setHomeResult({\\r\\n            data: a.concat(l)\\r\\n        })\\r\\n    } else {\\r\\n        setHomeResult({\\r\\n            data: l\\r\\n        })\\r\\n    }\\r\\n}\\r\\n\\r\\n//预告片页面\\r\\nfunction trailers(type, id) {\\r\\n    setPageTitle('预告-片段-花絮')\\r\\n    let i = getDoubanRes(\\\"https://frodo.douban.com/api/v2/\\\" + type + \\\"/\\\" + id + \\\"/trailers\\\").trailers;\\r\\n    i.forEach((e => {\\r\\n        e.col_type = \\\"movie_2\\\", e.desc = e.subject_title + \\\"•\\\" + e.create_time, e.img = e.cover_url, e.url = e.video_url\\r\\n    }));\\r\\n\\r\\n    let r = i.filter((e => \\\"A\\\" === e.type));\\r\\n    let l = i.filter((e => \\\"B\\\" === e.type));\\r\\n    let o = i.filter((e => \\\"C\\\" === e.type));\\r\\n\\r\\n    if (r.length > 0) {\\r\\n        r.unshift({\\r\\n            title: \\\"预告\\\",\\r\\n            col_type: \\\"rich_text\\\"\\r\\n        })\\r\\n    }\\r\\n    if (l.length > 0) {\\r\\n        l.unshift({\\r\\n            title: \\\"片段\\\",\\r\\n            col_type: \\\"rich_text\\\"\\r\\n        })\\r\\n    }\\r\\n    if (o.length > 0) {\\r\\n        o.unshift({\\r\\n            title: \\\"花絮\\\",\\r\\n            col_type: \\\"rich_text\\\"\\r\\n        })\\r\\n    }\\r\\n\\r\\n    setHomeResult({\\r\\n        data: r.concat(l)\\r\\n            .concat(o)\\r\\n    })\\r\\n}\\r\\n\\r\\n//视频评论页面\\r\\nfunction videoComment(type, id) {\\r\\n    let i = getDoubanRes(\\\"https://frodo.douban.com/api/v2/\\\" + type + \\\"/\\\" + id + \\\"/videos\\\").videos;\\r\\n    i.forEach((e => {\\r\\n        e.col_type = \\\"movie_2\\\", e.desc = e.author.name + \\\"•\\\" + e.create_time, e.img = e.cover_url + \\\"@Referer=\\\" + e.cover_url, e.url = e.video_url\\r\\n    }))\\r\\n    if (i.length > 0) {\\r\\n        i.unshift({\\r\\n            title: \\\"视频评论\\\",\\r\\n            col_type: \\\"rich_text\\\"\\r\\n        })\\r\\n    }\\r\\n    setHomeResult({\\r\\n        data: i\\r\\n    })\\r\\n}\\r\\n\\r\\n//演职人员详情页面\\r\\nfunction elessarView(id, pid, name) {\\r\\n    setPageTitle(name);\\r\\n    let i = getDoubanRes(\\\"https://frodo.douban.com/api/v2/elessar/subject/\\\" + id);\\r\\n    let a = [];\\r\\n    a.push({\\r\\n        title: '““””' + (i.title + '(' + i.latin_title + ')').big().bold(),\\r\\n        desc: '““””' + i.desc.match(/\\\\<p\\\\>.*\\\\<\\\\/p\\\\>/)[0],\\r\\n        img: i.cover.normal.url + '@Referer=' + i.cover.normal.url,\\r\\n        col_type: 'movie_1_vertical_pic_blur',\\r\\n        url: $('hiker://empty').rule((desc, extra, name) => {\\r\\n            let info = extra.info.map(e => e.join(':&nbsp;'));\\r\\n            setResult([{\\r\\n                title: '<h2>' + name + '</h2>' + info.join('<br/>') + desc.match(/\\\\<p\\\\>.*\\\\<\\\\/p\\\\>/)[0],\\r\\n                col_type: 'rich_text'\\r\\n            }])\\r\\n        }, i.desc, i.extra, i.title)\\r\\n    })\\r\\n    \\r\\n    let index = i.modules.findIndex(cur => cur.type == \\\"award_result_collection\\\");\\r\\n    if (index > -1) {\\r\\n        let e = i.modules[index].payload;\\r\\n        a.push({\\r\\n            title: '““””' + '获奖记录'.big().bold() + '<small>(共' + e.total + '项)</small>',\\r\\n            desc: '““””<strong>' + e.awards[0].ceremony.title + '</strong>\\\\n' + e.awards[0].category.title + (e.awards[0].is_won ? '' : '(提名)'),\\r\\n            col_type: 'text_center_1',\\r\\n            url: $('hiker://empty/#/$page{fypage}#noHistory#').rule((id, count) => {\\r\\n                eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n                elessarAwards(id, count);\\r\\n            }, e.id, e.total),\\r\\n            extra: {\\r\\n                lineVisible: false\\r\\n            }\\r\\n        })\\r\\n    }\\r\\n    \\r\\n    index = i.modules.findIndex(cur => cur.type == \\\"work_collections\\\");\\r\\n    if (index > -1) {\\r\\n        let e2 = i.modules[index].payload;\\r\\n        a.push({\\r\\n            col_type: 'line'\\r\\n        })\\r\\n        a.push({\\r\\n            title: '““””' + '影视作品'.big().bold() + ('(共' + e2.collections[0].total + '部)').small(),\\r\\n            col_type: 'text_center_1',\\r\\n            url: $('hiker://empty/#/$page{fypage}#noHistory#').rule((id, type) => {\\r\\n                eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n                elessarWorks(id, type);\\r\\n            }, e2.id, e2.collections[0].title),\\r\\n            extra: {\\r\\n                lineVisible: false\\r\\n            }\\r\\n        })\\r\\n\\r\\n        let detailsViewConfigs = getConfig('detailsViewConfigs');\\r\\n        let works = e2.collections[0].works;\\r\\n        let length = works.length <= 3 ? works.length : 3;\\r\\n        for (let i = 0; i < length; i++) {\\r\\n            let e = works[i];\\r\\n            let rating = \\\"\\\";\\r\\n            if (e.subject.extra.rating_group.rating) {\\r\\n                rating = computeRating(e.subject.extra.rating_group.rating.max, e.subject.extra.rating_group.rating.value) + \\\" \\\" + e.subject.extra.rating_group.rating.value + \\\"分\\\";\\r\\n            }\\r\\n\\r\\n            let type = e.subject.subtype,\\r\\n                id = e.subject.id,\\r\\n                title = e.subject.title;\\r\\n            let useConfig = detailsViewConfigs[detailsViewConfigs.use].config;\\r\\n            let urlParams = {};\\r\\n            if (useConfig.startsWith('{')) {\\r\\n                eval('urlParams = ' + useConfig);\\r\\n            } else {\\r\\n                urlParams.url = $(\\\"hiker://empty#noHistory##immersiveTheme#\\\" + '?type=' + type + '&id=' + id).rule((type, id, title, useConfig) => {\\r\\n                    eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n                    if (type === \\\"playlist\\\") {\\r\\n                        douList(id, MY_PAGE, 50);\\r\\n                    } else {\\r\\n                        eval(useConfig);\\r\\n                    }\\r\\n                }, type, id, title, useConfig);\\r\\n            }\\r\\n            a.push({\\r\\n                title: title,\\r\\n                img: e.subject.cover.normal.url + \\\"@Referer=\\\" + e.subject.cover.normal.url,\\r\\n                desc: rating,\\r\\n                col_type: 'movie_3',\\r\\n                url: urlParams.url,\\r\\n                extra: urlParams.extra\\r\\n            })\\r\\n        }\\r\\n        /*a.push({\\r\\n            title: '查看更多',\\r\\n            img: 'https://joker-tx.coding.net/p/hikerimg/d/hiker/git/raw/master/img/more_ver.png?download=false',\\r\\n            col_type: 'movie_3',\\r\\n            url: $('hiker://empty/#/$page{fypage}#noHistory#')\\r\\n                .rule((id, type) => {\\r\\n                eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n                elessarWorks(id, type);\\r\\n            }, e2.id, e2.collections[0].title)\\r\\n        })*/\\r\\n    }\\r\\n    \\r\\n    index = i.modules.findIndex(cur => cur.type == \\\"photos\\\");\\r\\n    if (index > -1) {\\r\\n        let e3 = i.modules[index].payload;\\r\\n        a.push({\\r\\n            col_type: 'line'\\r\\n        })\\r\\n        a.push({\\r\\n            title: '““””' + '演员照片'.big().bold() + ('(共' + e3.total + '张)').small(),\\r\\n            col_type: 'text_center_1',\\r\\n            url: $('hiker://empty/#/$page{fypage}#noHistory#').rule((pid) => {\\r\\n                eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n                elessarPhotos(pid);\\r\\n            }, pid),\\r\\n            extra: {\\r\\n                lineVisible: false\\r\\n            }\\r\\n        })\\r\\n\\r\\n        let plength = e3.photos.length <= 2 ? e3.photos.length : 2;\\r\\n        for (let i = 0; i < plength; i++) {\\r\\n            a.push({\\r\\n                //title: e3.photos[0].description,\\r\\n                col_type: 'card_pic_2',\\r\\n                desc: '0',\\r\\n                img: e3.photos[i].image.normal.url + '@Referer=' + e3.photos[i].image.normal.url,\\r\\n                url: e3.photos[i].image.normal.url + '@Referer=' + e3.photos[i].image.normal.url\\r\\n            })\\r\\n        }\\r\\n\\r\\n        /*a.push({\\r\\n            //title: '查看更多',\\r\\n            img: 'https://joker-tx.coding.net/p/hikerimg/d/hiker/git/raw/master/img/more.png?download=false',\\r\\n            col_type: 'card_pic_2',\\r\\n            desc: '0',\\r\\n            url: $('hiker://empty/#/$page{fypage}#noHistory#')\\r\\n                .rule((pid) => {\\r\\n                eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n                elessarPhotos(pid);\\r\\n            }, pid)\\r\\n        })*/\\r\\n    }\\r\\n\\r\\n    setResult(a);\\r\\n}\\r\\n\\r\\n//演职人员获奖详情页面\\r\\nfunction elessarAwards(id, count) {\\r\\n    let i = getDoubanRes(\\\"https://frodo.douban.com/api/v2/elessar/award_result_collection/\\\" + id + \\\"/awards?start=\\\" + 30 * (MY_PAGE - 1) + \\\"&count=30\\\");\\r\\n    let l = [];\\r\\n    let detailsViewConfigs = getConfig('detailsViewConfigs');\\r\\n    i.awards.forEach(t => {\\r\\n        l.push({\\r\\n            title: (t.year+\\\"\\\").bold().big(),\\r\\n            col_type: 'rich_text'\\r\\n        })\\r\\n\\r\\n        for (let i = 0; i < t.modules.length; i++) {\\r\\n            let e = t.modules[i];\\r\\n            if (!e.ceremony || !e.category) {\\r\\n                let rating = \\\"\\\";\\r\\n                if (e.extra.rating_group.rating) {\\r\\n                    rating = computeRating(e.extra.rating_group.rating.max, e.extra.rating_group.rating.value) + \\\" \\\" + e.extra.rating_group.rating.value + \\\"分\\\";\\r\\n                }\\r\\n                let type = e.subtype,\\r\\n                    id = e.id,\\r\\n                    title = e.title;\\r\\n                let useConfig = detailsViewConfigs[detailsViewConfigs.use].config;\\r\\n                let urlParams = {};\\r\\n                if (useConfig.startsWith('{')) {\\r\\n                    eval('urlParams = ' + useConfig);\\r\\n                } else {\\r\\n                    urlParams.url = $(\\\"hiker://empty#noHistory##immersiveTheme#\\\" + '?type=' + type + '&id=' + id).rule((type, id, title, useConfig) => {\\r\\n                        eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n                        if (type === \\\"playlist\\\") {\\r\\n                            douList(id, MY_PAGE, 50);\\r\\n                        } else {\\r\\n                            eval(useConfig);\\r\\n                        }\\r\\n                    }, type, id, title, useConfig);\\r\\n                }\\r\\n                l.push({\\r\\n                    title: title,\\r\\n                    img: e.cover.normal.url + \\\"@Referer=\\\" + e.cover.normal.url,\\r\\n                    desc: rating + '\\\\n' + e.extra.short_info,\\r\\n                    url: urlParams.url,\\r\\n                    extra: urlParams.extra\\r\\n                })\\r\\n            } else {\\r\\n                l.push({\\r\\n                    title: e.ceremony.title.bold() + '<small>(<a href=\\\"hiker://empty#noHistory#@rule=js:eval(JSON.parse(fetch(`hiker://page/main`)).rule);awardView(`' + e.ceremony.id + '`,`' + e.ceremony.title + '`);\\\">查看详情</a>)</small>' + '<br/>' + (e.category.title + (e.is_won ? '' : '(提名)')).small(),\\r\\n                    col_type: 'rich_text'\\r\\n                })\\r\\n            }\\r\\n        }\\r\\n    })\\r\\n\\r\\n    if (MY_PAGE == 1) {\\r\\n        l.unshift({\\r\\n            col_type: \\\"blank_block\\\"\\r\\n        })\\r\\n        l.unshift({\\r\\n            title: \\\"<big>共<strong> \\\" + count + \\\" </strong>项获奖记录</big>\\\",\\r\\n            col_type: \\\"rich_text\\\"\\r\\n        })\\r\\n    }\\r\\n    setResult(l);\\r\\n}\\r\\n\\r\\n//演职人员作品页面\\r\\nfunction elessarWorks(id, type) {\\r\\n    let i = getDoubanRes(\\\"https://frodo.douban.com/api/v2/elessar/work_collections/\\\" + id + \\\"/works?start=\\\" + 30 * (MY_PAGE - 1) + \\\"&count=30&collection_title=\\\" + type);\\r\\n\\r\\n    let l = [];\\r\\n    let detailsViewConfigs = getConfig('detailsViewConfigs');\\r\\n    i.works.forEach((e => {\\r\\n        let rating = \\\"\\\";\\r\\n        if (e.subject.extra.rating_group.rating) {\\r\\n            rating = computeRating(e.subject.extra.rating_group.rating.max, e.subject.extra.rating_group.rating.value) + \\\" \\\" + e.subject.extra.rating_group.rating.value + \\\"分\\\";\\r\\n        }\\n        \\n        let year = e.subject.extra ? (e.subject.extra.year ? '('+e.subject.extra.year+')' : '') : '';\\r\\n\\r\\n        let type = e.subject.subtype,\\r\\n            id = e.subject.id,\\r\\n            title = e.subject.title;\\r\\n        let useConfig = detailsViewConfigs[detailsViewConfigs.use].config;\\r\\n        let urlParams = {};\\r\\n        if (useConfig.startsWith('{')) {\\r\\n            eval('urlParams = ' + useConfig);\\r\\n        } else {\\r\\n            urlParams.url = $(\\\"hiker://empty#noHistory##immersiveTheme#\\\" + '?type=' + type + '&id=' + id).rule((type, id, title, useConfig) => {\\r\\n                eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n                if (type === \\\"playlist\\\") {\\r\\n                    douList(id, MY_PAGE, 50);\\r\\n                } else {\\r\\n                    eval(useConfig);\\r\\n                }\\r\\n            }, type, id, title, useConfig);\\r\\n        }\\r\\n        l.push({\\r\\n            title: title + year,\\r\\n            img: e.subject.cover.normal.url + \\\"@Referer=\\\" + e.subject.cover.normal.url,\\r\\n            desc: e.roles.join(\\\"•\\\") + \\\"\\\\n\\\" + rating + '\\\\n' + e.subject.extra.short_info,\\r\\n            col_type: 'movie_1_vertical_pic',\\r\\n            url: urlParams.url,\\r\\n            extra: urlParams.extra\\r\\n        })\\r\\n    }))\\r\\n\\r\\n    if (MY_PAGE == 1) {\\r\\n        l.unshift({\\r\\n            col_type: \\\"blank_block\\\"\\r\\n        })\\r\\n        l.unshift({\\r\\n            title: \\\"<big>共<strong> \\\" + i.total + \\\" </strong>部作品</big>\\\",\\r\\n            col_type: \\\"rich_text\\\"\\r\\n        })\\r\\n    }\\r\\n    setHomeResult({\\r\\n        data: l\\r\\n    })\\r\\n}\\r\\n\\r\\n//演职人员照片页面\\r\\nfunction elessarPhotos(pid) {\\r\\n    let i = getDoubanRes(\\\"https://frodo.douban.com/api/v2/celebrity/\\\" + pid + \\\"/photos?start=\\\" + 30 * (MY_PAGE - 1) + \\\"&count=30\\\");\\r\\n    let l = [];\\r\\n    i.photos.forEach(e => {\\r\\n        l.push({\\r\\n            col_type: 'card_pic_2',\\r\\n            desc: '0',\\r\\n            img: e.image.normal.url + '@Referer=' + e.image.normal.url,\\r\\n            url: e.image.normal.url + '@Referer=' + e.image.normal.url\\r\\n        })\\r\\n    })\\r\\n    if (MY_PAGE == 1) {\\r\\n        l.unshift({\\r\\n            col_type: \\\"blank_block\\\"\\r\\n        })\\r\\n        l.unshift({\\r\\n            title: \\\"<big>共<strong> \\\" + i.total + \\\" </strong>张照片</big>\\\",\\r\\n            col_type: \\\"rich_text\\\"\\r\\n        })\\r\\n    }\\r\\n    setResult(l);\\r\\n}\\r\\n\\r\\n//剧评详情页面\\r\\nfunction dramaReviewView(id) {\\r\\n    setPageTitle('剧评详情');\\r\\n    let i = getDoubanRes(\\\"https://frodo.douban.com/api/v2/review/\\\" + id);\\r\\n\\r\\n    i.photos.forEach((e => {\\r\\n        i.content = i.content.replace('id=\\\"' + e.tag_name + '\\\"', 'src=\\\"' + e.image.large.url + \\\"@Referer=\\\" + e.image.large.url + '\\\"')\\r\\n    }));\\r\\n\\r\\n    let l = getDoubanRes(\\\"https://frodo.douban.com/api/v2/review/\\\" + id + \\\"/comments\\\");\\r\\n    let o = [{\\r\\n        col_type: \\\"blank_block\\\"\\r\\n    }, {\\r\\n        title: \\\"<big><strong>评论：</strong></big>\\\",\\r\\n        col_type: \\\"rich_text\\\"\\r\\n    }];\\r\\n\\r\\n    l.comments.length > 0 ? l.comments.forEach((e => {\\r\\n        o.push({\\r\\n            title: e.author.name,\\r\\n            img: e.author.avatar,\\r\\n            url: e.author.url,\\r\\n            col_type: \\\"avatar\\\"\\r\\n        })\\r\\n        o.push({\\r\\n            title: e.text + (e.replies.length > 0 ? ' <small><a href=\\\"hiker://empty#noHistory#@rule=js:eval(JSON.parse(fetch(`hiker://page/main`)).rule);dramaReviewReplyView(' + e.id + ');\\\">[查看回复]</a></small>' : \\\"\\\"),\\r\\n            col_type: \\\"rich_text\\\"\\r\\n        })\\r\\n        o.push({\\r\\n            col_type: \\\"line\\\"\\r\\n        })\\r\\n    })) : o.push({\\r\\n        title: '<font color=\\\"grey\\\">( •̥́ ˍ •̀ू )还没有人评论...</font>',\\r\\n        col_type: \\\"rich_text\\\"\\r\\n    });\\r\\n\\r\\n    let a = \\\"\\\";\\r\\n    if (i.rating) {\\r\\n        a = computeRating(i.rating.max, i.rating.value);\\r\\n    }\\r\\n    let color = JSON.parse(fetch(getMyVar('qdb_config')))\\r\\n        .starColor || \\\"#ffac2d\\\";\\r\\n    let s = [{\\r\\n        title: \\\"<big><strong>\\\" + i.title + \\\"</strong></big>\\\",\\r\\n        col_type: \\\"rich_text\\\"\\r\\n    }, {\\r\\n        title: i.user.name + \\\" 的剧评\\\",\\r\\n        img: i.user.avatar,\\r\\n        url: i.user.url,\\r\\n        col_type: \\\"avatar\\\"\\r\\n    }, {\\r\\n        title: (i.spoiler ? \\\"<small><font color=#f20c00>这篇影评可能有剧透</font></small><br/>\\\" : \\\"\\\") + (a ? '<small>看过 <font color=' + color + '>' + a + \\\"</font><br/></small>\\\" : \\\"\\\") + '<small><font color=\\\"grey\\\">' + /\\\\d{4}-\\\\d{1,2}-\\\\d{1,2}/g.exec(i.create_time) + \\\"</font></small>\\\",\\r\\n        col_type: \\\"rich_text\\\"\\r\\n    }, {\\r\\n        col_type: \\\"line_blank\\\"\\r\\n    }, {\\r\\n        title: i.content.replace(/<div\\\\s*[^>]*>(.*?)<\\\\/div>/g, \\\"$1\\\") + (i.is_original ? '<small><font color=\\\"grey\\\">&copy;本文版权归该作者所有，任何形式转载请联系作者。</font></small>' : \\\"\\\"),\\r\\n        col_type: \\\"rich_text\\\"\\r\\n    }];\\r\\n\\r\\n    setHomeResult({\\r\\n        data: s.concat(o)\\r\\n    })\\r\\n}\\r\\n\\r\\n//剧评回复页面\\r\\nfunction dramaReviewReplyView(id) {\\r\\n    setPageTitle('回复详情');\\r\\n    let t = getDoubanRes(\\\"https://frodo.douban.com/api/v2/review/comment/\\\" + id + \\\"/replies\\\");\\r\\n    let i = [];\\r\\n    t.replies.forEach((e => {\\r\\n        i.push({\\r\\n            title: e.author.name,\\r\\n            img: e.author.avatar,\\r\\n            url: e.author.url,\\r\\n            col_type: \\\"avatar\\\"\\r\\n        })\\r\\n        i.push({\\r\\n            title: (e.ref_comment.has_ref ? '回复@<font color=\\\"blue\\\">' + e.ref_comment.author.name + \\\"</font>：\\\" : \\\"\\\") + e.text,\\r\\n            col_type: \\\"rich_text\\\"\\r\\n        })\\r\\n        i.push({\\r\\n            col_type: \\\"line\\\"\\r\\n        })\\r\\n    }))\\r\\n\\r\\n    setHomeResult({\\r\\n        data: i\\r\\n    })\\r\\n}\\r\\n\\r\\n//相关推荐页面\\r\\nfunction recommendations(type, id){\\r\\n    setPageTitle('相关推荐');\\r\\n    let res = getDoubanRes(\\\"https://frodo.douban.com/api/v2/\\\"+ type + \\\"/\\\" + id + \\\"/recommendations\\\");\\r\\n    let detailsViewConfigs = getConfig('detailsViewConfigs');\\r\\n    let i = res.map((e => {\\r\\n        let type = e.type,\\r\\n            id = e.id,\\r\\n            title = e.title;\\r\\n        let useConfig = detailsViewConfigs[detailsViewConfigs.use].config;\\r\\n        let urlParams = {};\\r\\n        if (useConfig.startsWith('{')) {\\r\\n            eval('urlParams = ' + useConfig);\\r\\n        } else {\\r\\n            urlParams.url = $(\\\"hiker://empty#noHistory##immersiveTheme#\\\" + '?type=' + type + '&id=' + id).rule((type, id, title, useConfig) => {\\r\\n                eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n                if (type === \\\"playlist\\\") {\\r\\n                    douList(id, MY_PAGE, 50);\\r\\n                } else {\\r\\n                    eval(useConfig);\\r\\n                }\\r\\n            }, type, id, title, useConfig);\\r\\n        }\\r\\n        return {\\r\\n            title: title,\\r\\n            url: urlParams.url,\\r\\n            extra: urlParams.extra,\\r\\n            col_type: 'movie_3',\\r\\n            img: e.pic ? e.pic.normal + \\\"@Referer=\\\" + e.pic.normal : e.cover.url + '@Referer=' + e.cover.url,\\r\\n            desc: e.null_rating_reason || e.rating.value\\r\\n        }\\r\\n    }));\\r\\n\\r\\n    setHomeResult({\\r\\n        data: i\\r\\n    })\\r\\n}\\r\\n\\r\\n//影片详情页面\\r\\nfunction detailsView(type, id) {\\r\\n    let i = getDoubanRes(\\\"https://frodo.douban.com/api/v2/\\\" + type + \\\"/\\\" + id);\\r\\n    setPageTitle(i.title);\\r\\n    let info = \\\"\\\";\\r\\n    if (i.is_tv) {\\r\\n        info = [i.countries ? i.countries.join(\\\" \\\") : null, i.genres ? i.genres.join(\\\" \\\") : null, i.pubdate ? i.pubdate[0] + \\\"首播\\\" : null, i.episodes_count ? \\\"共\\\" + i.episodes_count + \\\"集\\\" : null, i.durations ? \\\"单集片长\\\" + i.durations : null].filter((e => null !== e)).join(\\\" / \\\");\\r\\n    } else {\\r\\n        info = [i.countries ? i.countries.join(\\\" \\\") : null, i.genres ? i.genres.join(\\\" \\\") : null, i.pubdate ? i.pubdate[0] + \\\"首播\\\" : null, i.durations ? \\\"片长\\\" + i.durations : null].filter((e => null !== e)).join(\\\" / \\\");\\r\\n    }\\r\\n    let infoItems = [{\\r\\n        title: i.title + \\\"\\\\n\\\" + i.original_title + \\\"(\\\" + i.year + \\\")\\\",\\r\\n        desc: info || i.card_subtitle,\\r\\n        img: i.pic.normal + \\\"@Referer=\\\" + i.pic.normal,\\r\\n        col_type: \\\"movie_1_vertical_pic_blur\\\",\\r\\n        url: 'hiker://page/settingPage?view=analysisSettingModule#noHistory#',\\r\\n        extra: {\\r\\n            newWindow: true,\\r\\n            windowId: '高级功能',\\r\\n            gradient: true\\r\\n        }\\r\\n    }];\\r\\n\\r\\n    let rating = \\\"\\\";\\r\\n    if (i.rating) {\\r\\n        rating = computeRating(i.rating.max, i.rating.value);\\r\\n    }\\r\\n    let ratingItems = [];\\r\\n    let color = getConfig('starColor');\\r\\n    let ratingTitle = ''\\r\\n    if (rating) {\\r\\n        ratingTitle = '豆瓣评分™'.big().bold() + '<br>' + rating.fontcolor(color) + '&nbsp;&nbsp;' + (i.rating.value.toFixed(1) + '分').big().bold();\\r\\n    } else {\\r\\n        ratingTitle = '暂无评分'.big().bold() + '<br>' + '点我查看影片信息'.fontcolor('grey');\\r\\n    }\\r\\n    ratingItems = [{\\r\\n        title: '““””' + ratingTitle,\\r\\n        col_type: \\\"text_center_1\\\",\\r\\n        extra: {\\r\\n            lineVisible: false\\r\\n        },\\r\\n        url: $('hiker://empty/#/$page{fypage}#noHistory#').rule((type, id, ratingCount) => {\\r\\n            eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n            rating(type, id, ratingCount);\\r\\n        }, i.subtype, i.id, i.rating ? i.rating.count : 0)\\r\\n    }];\\r\\n\\r\\n    let relatedItems = [{\\r\\n        title: \\\"剧照\\\",\\r\\n        img: \\\"https://gitcode.net/qq_41846756/hiker/-/raw/master/img/剧照.png\\\",\\r\\n        url: $('hiker://empty/#/$page{fypage}#noHistory#').rule((t) => {\\r\\n            eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n            stillsList(t[0], t[1]);\\r\\n        }, [i.subtype, i.id]),\\r\\n        col_type: \\\"icon_round_small_4\\\"\\r\\n    }, {\\r\\n        title: \\\"演职\\\",\\r\\n        img: \\\"https://gitcode.net/qq_41846756/hiker/-/raw/master/img/演职.png\\\",\\r\\n        url: $('hiker://empty/#/$page{fypage}#noHistory#').rule((t) => {\\r\\n            eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n            credits(t[0], t[1]);\\r\\n        }, [i.subtype, i.id]),\\r\\n        col_type: \\\"icon_round_small_4\\\"\\r\\n    }, {\\r\\n        title: \\\"短评\\\",\\r\\n        img: \\\"https://gitcode.net/qq_41846756/hiker/-/raw/master/img/短评.png\\\",\\r\\n        url: $('hiker://empty/#/$page{fypage}#noHistory#').rule((t) => {\\r\\n            eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n            shortCommentList(t[0], t[1]);\\r\\n        }, [i.subtype, i.id]),\\r\\n        col_type: \\\"icon_round_small_4\\\"\\r\\n    }, {\\r\\n        title: \\\"剧评\\\",\\r\\n        img: \\\"https://gitcode.net/qq_41846756/hiker/-/raw/master/img/剧评.png\\\",\\r\\n        url: $('hiker://empty/#/$page{fypage}#noHistory#').rule((t) => {\\r\\n            eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n            dramaReviewList(t[0], t[1]);\\r\\n        }, [i.subtype, i.id]),\\r\\n        col_type: \\\"icon_round_small_4\\\"\\r\\n    }];\\r\\n\\r\\n    let introItems = [];\\r\\n    if (i.intro) {\\r\\n        introItems = [{\\r\\n            title: \\\"““””<big><strong>剧情简介</strong></big>\\\",\\r\\n            col_type: \\\"text_center_1\\\",\\r\\n            extra: {\\r\\n                lineVisible: false\\r\\n            },\\r\\n            url: 'hiker://empty'\\r\\n        }, {\\r\\n            title: \\\"&nbsp;&nbsp;&nbsp;&nbsp;\\\" + i.intro.replace(/\\\\n/g, \\\"<br/>&nbsp;&nbsp;&nbsp;&nbsp;\\\").replace(/\\\\s/g, \\\" \\\").replace(/\\\\t/g, \\\" \\\"),\\r\\n            col_type: \\\"rich_text\\\"\\r\\n        }]\\r\\n    }\\r\\n\\r\\n    let videoRelatedItems = [];\\r\\n    if (i.trailer) {\\r\\n        videoRelatedItems.push({\\r\\n            title: \\\"““””<big><strong>预告</strong></big>\\\",\\r\\n            col_type: \\\"text_center_1\\\",\\r\\n            extra: {\\r\\n                lineVisible: false\\r\\n            },\\r\\n            url: 'hiker://empty'\\r\\n        });\\r\\n        videoRelatedItems.push({\\r\\n            title: i.trailer.title,\\r\\n            img: i.trailer.cover_url,\\r\\n            url: i.trailer.video_url,\\r\\n            desc: i.trailer.subject_title + \\\"•\\\" + i.trailer.create_time,\\r\\n            col_type: \\\"movie_2\\\"\\r\\n        });\\r\\n        videoRelatedItems.push({\\r\\n            title: '查看更多',\\r\\n            img: \\\"https://gitcode.net/qq_41846756/hiker/-/raw/master/img/more.png\\\",\\r\\n            col_type: \\\"movie_2\\\",\\r\\n            url: $('hiker://empty/#/$page{fypage}#noHistory#').rule((t) => {\\r\\n                eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n                trailers(t[0], t[1]);\\r\\n            }, [i.subtype, i.id]),\\r\\n        });\\r\\n    }\\r\\n    if (i.video) {\\r\\n        videoRelatedItems.push({\\r\\n            title: \\\"““””<big><strong>视频评论</strong></big>\\\",\\r\\n            col_type: \\\"text_center_1\\\",\\r\\n            extra: {\\r\\n                lineVisible: false\\r\\n            },\\r\\n            url: 'hiker://empty'\\r\\n        });\\r\\n        videoRelatedItems.push({\\r\\n            title: i.video.title,\\r\\n            img: i.video.cover_url + \\\"@Referer=\\\" + i.video.cover_url,\\r\\n            url: i.video.video_url,\\r\\n            desc: i.video.author.name + \\\"•\\\" + i.video.create_time,\\r\\n            col_type: \\\"movie_2\\\"\\r\\n        });\\r\\n        videoRelatedItems.push({\\r\\n            title: '查看更多',\\r\\n            img: \\\"https://gitcode.net/qq_41846756/hiker/-/raw/master/img/more.png\\\",\\r\\n            col_type: \\\"movie_2\\\",\\r\\n            url: $('hiker://empty/#/$page{fypage}#noHistory#').rule((t) => {\\r\\n                eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n                videoComment(t[0], t[1]);\\r\\n            }, [i.subtype, i.id]),\\r\\n        });\\r\\n    }\\r\\n\\r\\n    let config = JSON.parse(fetch(getMyVar('qdb_config')));\\r\\n\\r\\n    let analysisConfigs = getConfig('analysisConfigs', config);\\r\\n    let extraConfig = analysisConfigs[analysisConfigs.use].extra || '{}';\\r\\n    let extra = {};\\r\\n    try {\\r\\n        if (extraConfig.startsWith('{')) eval('extra=' + extraConfig);\\r\\n    } catch (e) {}\\r\\n    let videoItems = [];\\r\\n    videoUrlsModule(videoItems, type, id, ['icon_2', 'icon_small_4'], parseVideoUrlLazy, i, extra);\\r\\n    if (videoItems.length > 0) {\\r\\n        videoItems.unshift({\\r\\n            title: \\\"““””<big><strong>在线观看</strong></big>\\\",\\r\\n            col_type: \\\"text_center_1\\\",\\r\\n            extra: {\\r\\n                lineVisible: false\\r\\n            },\\r\\n            url: 'hiker://empty'\\r\\n        })\\r\\n    } else {\\r\\n        videoItems.unshift({\\r\\n            title: \\\"““””<big><strong>尚无片源</strong></big>\\\",\\r\\n            col_type: \\\"text_center_1\\\",\\r\\n            extra: {\\r\\n                lineVisible: false\\r\\n            },\\r\\n            url: 'toast://真的没片源'\\r\\n        })\\r\\n    }\\r\\n\\r\\n    let quickSearchConfigs = getConfig('quickSearchConfigs', config);\\r\\n    let quickSearchItems = [];\\r\\n    quickSearchConfigs.order.forEach(quickSearchItem => {\\r\\n        if (quickSearchConfigs[quickSearchItem]) {\\r\\n            quickSearchItems.push({\\r\\n                title: quickSearchItem,\\r\\n                img: quickSearchConfigs[quickSearchItem].pic,\\r\\n                col_type: quickSearchConfigs.mode || 'icon_small_4',\\r\\n                url: 'hiker://search?s=' + i.title + '&rule=' + quickSearchConfigs[quickSearchItem].name\\r\\n            })\\r\\n        }\\r\\n    })\\r\\n    if (quickSearchItems.length > 0) {\\r\\n        quickSearchItems.unshift({\\r\\n                title: '““””<strong><big>快速搜索</big></strong>',\\r\\n                col_type: 'text_center_1',\\r\\n                extra: {\\r\\n                    lineVisible: false\\r\\n                },\\r\\n                url: 'hiker://empty'\\r\\n            })\\r\\n            /*quickSearchItems.unshift({\\r\\n                col_type: 'line'\\r\\n            })*/\\r\\n    }\\r\\n\\r\\n    setHomeResult({\\r\\n        data: infoItems.concat(ratingItems)\\r\\n            .concat(relatedItems)\\r\\n            .concat({\\r\\n                col_type: 'line'\\r\\n            })\\r\\n            .concat(quickSearchItems)\\r\\n            .concat({\\r\\n                col_type: 'line'\\r\\n            })\\r\\n            .concat(videoItems)\\r\\n            .concat({\\r\\n                col_type: 'line'\\r\\n            })\\r\\n            .concat(videoRelatedItems)\\r\\n            .concat({\\r\\n                col_type: 'line'\\r\\n            })\\r\\n            .concat(introItems)\\r\\n            .concat({\\r\\n                col_type: 'line',\\r\\n                extra:{\\r\\n                  id: 'recommendations'\\r\\n                }\\r\\n            })\\r\\n            .concat({\\r\\n                col_type: 'text_center_1',\\r\\n                title: '““””<small><font color=#871f78>以上数据来源于豆瓣，如您喜欢，请下载官方app</font></small>',\\r\\n                desc: '““””<small><font color=#f20c00>此规则仅限学习交流使用，请于导入后24小时内删除，任何组织或个人不得以任何方式方法传播此规则的整体或部分！</font></small>',\\r\\n                url: 'https://movie.douban.com/subject/' + id + '/',\\r\\n                extra: {\\r\\n                    lineVisible: false\\r\\n                }\\r\\n            })\\r\\n    })\\r\\n    be([{\\r\\n        func: function(obj){\\r\\n            eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n            let res = getDoubanRes(obj.url);\\r\\n            \\r\\n            let detailsViewConfigs = getConfig('detailsViewConfigs');\\r\\n            let l = [res[0],res[1],res[2]];\\r\\n            let i = l.map((e => {\\r\\n                let type = e.type,\\r\\n                    id = e.id,\\r\\n                    title = e.title;\\r\\n                let useConfig = detailsViewConfigs[detailsViewConfigs.use].config;\\r\\n                let urlParams = {};\\r\\n                if (useConfig.startsWith('{')) {\\r\\n                    eval('urlParams = ' + useConfig);\\r\\n                } else {\\r\\n                    urlParams.url = $(\\\"hiker://empty#noHistory##immersiveTheme#\\\" + '?type=' + type + '&id=' + id).rule((type, id, title, useConfig) => {\\r\\n                        eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n                        if (type === \\\"playlist\\\") {\\r\\n                            douList(id, MY_PAGE, 50);\\r\\n                        } else {\\r\\n                            eval(useConfig);\\r\\n                        }\\r\\n                    }, type, id, title, useConfig);\\r\\n                }\\r\\n                return {\\r\\n                    title: title,\\r\\n                    url: urlParams.url,\\r\\n                    extra: urlParams.extra,\\r\\n                    img: e.pic ? e.pic.normal + \\\"@Referer=\\\" + e.pic.normal : e.cover.url + '@Referer=' + e.cover.url,\\r\\n                    desc: e.null_rating_reason || e.rating.value\\r\\n                }\\r\\n            }));\\r\\n            addItemAfter('recommendations', i[2]);\\r\\n            addItemAfter('recommendations', i[1]);\\r\\n            addItemAfter('recommendations', i[0]);\\r\\n            addItemAfter('recommendations', {\\r\\n                title: \\\"““””<big><strong>相关推荐</strong></big>\\\",\\r\\n                col_type: \\\"text_center_1\\\",\\r\\n                url: $('hiker://empty/#noHistory#').rule((t) => {\\r\\n                    eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n                    recommendations(t[0], t[1]);\\r\\n                }, [obj.type, obj.id]),\\r\\n                extra: {\\r\\n                    lineVisible: false\\r\\n                }\\r\\n            })\\r\\n            updateItem('recommendations',{col_type: 'line',extra:{id:'nooop'}})\\r\\n        },\\r\\n        param: {\\r\\n            url: \\\"https://frodo.douban.com/api/v2/\\\" + type + \\\"/\\\" + id + \\\"/recommendations\\\",\\r\\n            type: type,\\r\\n            id: id\\r\\n        }\\r\\n    }])\\r\\n}\\r\\n\\r\\n//推荐\\r\\nfunction findList(page, count) {\\r\\n    if (!getMyVar('findList')) putMyVar('findList', '{\\\"item\\\":\\\"movie\\\",\\\"playable\\\":\\\"0\\\",\\\"score\\\":\\\"0,10\\\"}');\\r\\n    let a = [];\\r\\n    let temp = JSON.parse(getMyVar('findList'));\\r\\n    let color = getConfig('chooseColor');\\r\\n\\r\\n    let items = {\\r\\n        电影: 'movie',\\r\\n        电视剧: 'tv'\\r\\n    }\\r\\n    for (i in items) {\\r\\n        a.push({\\r\\n            title: temp.item === items[i] ? '““””<b> <font color=' + color + '>' + i + ' </font></b>' : i,\\r\\n            col_type: 'scroll_button',\\r\\n            url: $('hiker: //empty#noLoading#').lazyRule((e) => {\\r\\n                let temp = JSON.parse(getMyVar('findList'));\\r\\n                temp.item = e;\\r\\n                putMyVar(\\\"findList\\\", JSON.stringify(temp));\\r\\n                refreshPage();\\r\\n                return 'hiker://empty'\\r\\n            }, items[i])\\r\\n        })\\r\\n    }\\r\\n\\r\\n    a.push({\\r\\n        col_type: 'blank_block'\\r\\n    })\\r\\n\\r\\n    let playable = {\\r\\n        全部影片: '0',\\r\\n        仅有片源: '1'\\r\\n    }\\r\\n    for (let r in playable) {\\r\\n        a.push({\\r\\n            title: temp.playable == playable[r] ? '““””<b> <font color=' + color + '>' + r + ' </font></b>' : r,\\r\\n            col_type: 'scroll_button',\\r\\n            url: $('hiker: //empty#noLoading#').lazyRule((e) => {\\r\\n                let temp = JSON.parse(getMyVar('findList'));\\r\\n                temp.playable = e;\\r\\n                putMyVar(\\\"findList\\\", JSON.stringify(temp));\\r\\n                refreshPage();\\r\\n                return 'hiker://empty'\\r\\n            }, playable[r])\\r\\n        })\\r\\n    }\\r\\n\\r\\n    a.push({\\r\\n        title: '““””<b> <font color=' + color + '>评分区间:' + temp.score.replace(',', '-') + ' </font></b>',\\r\\n        col_type: 'scroll_button',\\r\\n        url: $(temp.score.replace(',', '-'), '评分应在0-10之间').input(() => {\\r\\n            let temp = JSON.parse(getMyVar('findList'));\\r\\n            let inputs = input.split('-');\\r\\n            if (inputs.length == 2 && inputs.every(e => e >= 0 && e <= 10) && parseFloat(inputs[0]) < inputs[1]) {\\r\\n                temp.score = input.replace('-', ',');\\r\\n                putMyVar(\\\"findList\\\", JSON.stringify(temp));\\r\\n                refreshPage();\\r\\n                return 'hiker://empty'\\r\\n            } else {\\r\\n                return 'toast://请正确输入'\\r\\n            }\\r\\n        })\\r\\n    })\\r\\n\\r\\n    let s = getDoubanRes(\\\"https://frodo.douban.com/api/v2/\\\" + temp.item + \\\"/recommend\\\" + '?playable=' + temp.playable + '&score_range=' + temp.score + (page ? \\\"&start=\\\" + (page - 1) * count + \\\"&count=\\\" + count : \\\"&start=0&count=8\\\"));\\r\\n    let l = s.items;\\r\\n    l = l.filter(e => e.type !== \\\"ad\\\" && e.type !== \\\"tags\\\");\\r\\n\\r\\n    let detailsViewConfigs = getConfig('detailsViewConfigs');\\r\\n    let i = l.map((e => {\\r\\n        let type = e.type,\\r\\n            id = e.id,\\r\\n            title = e.subtitle || e.title;\\r\\n        let baseUrl = e.type === \\\"playlist\\\" ? 'hiker://empty/$page{fypage}' : 'hiker://empty#immersiveTheme#';\\r\\n        let useConfig = detailsViewConfigs[detailsViewConfigs.use].config;\\r\\n        let urlParams = {};\\r\\n        if (useConfig.startsWith('{')) {\\r\\n            eval('urlParams = ' + useConfig);\\r\\n        } else {\\r\\n            urlParams.url = $(baseUrl + \\\"#noHistory#\\\" + '?type=' + type + '&id=' + id).rule((type, id, title, useConfig) => {\\r\\n                eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n                if (type === \\\"playlist\\\") {\\r\\n                    douList(id, MY_PAGE, 50);\\r\\n                } else {\\r\\n                    eval(useConfig);\\r\\n                }\\r\\n            }, type, id, title, useConfig);\\r\\n        }\\r\\n        return {\\r\\n            title: title + (type === \\\"playlist\\\" ? \\\"\\\" : \\\"（\\\" + e.year + \\\"）\\\"),\\r\\n            url: urlParams.url,\\r\\n            extra: urlParams.extra,\\r\\n            img: e.pic ? e.pic.normal + \\\"@Referer=\\\" + e.pic.normal : e.cover_url + \\\"@Referer=\\\" + e.cover_url,\\r\\n            desc: e.type !== \\\"playlist\\\" ? (e.tags.map((e => e.name)).join(\\\",\\\") + \\\"\\\\n\\\" + (e.rating ? computeRating(e.rating.max, e.rating.value) + \\\" \\\" + e.rating.value.toFixed(1) + \\\"分\\\" : \\\"暂无评分\\\")) : (e.title + \\\"\\\\n\\\" + e.tags.join(\\\",\\\") + \\\"\\\\n共\\\" + e.items_count + \\\"部\\\")\\r\\n        }\\r\\n    }));\\r\\n\\r\\n    return page > 1 ? i : a.concat(i);\\r\\n}\\r\\n\\r\\n//热门\\r\\nfunction hotList(page, count) {\\r\\n    if (!getMyVar('hotList')) putMyVar('hotList', '{\\\"item\\\":\\\"movie_showing?area=全部\\\",\\\"playable\\\":\\\"0\\\",\\\"sort\\\":\\\"recommend\\\",\\\"score\\\":\\\"0,10\\\"}');\\r\\n    let a = [];\\r\\n    let temp = JSON.parse(getMyVar('hotList'));\\r\\n    let color = getConfig('chooseColor');\\r\\n\\r\\n    let items = {\\r\\n        电影: {\\r\\n            影院热映电影: 'movie_showing?area=全部',\\r\\n            豆瓣热门电影: 'hot_gaia?area=全部',\\r\\n            热门华语电影: 'hot_gaia?area=华语',\\r\\n            热门欧美电影: 'hot_gaia?area=欧美',\\r\\n            热门韩国电影: 'hot_gaia?area=韩国',\\r\\n            热门日本电影: 'hot_gaia?area=日本'\\r\\n        },\\r\\n        电视剧: {\\r\\n            热播电视剧: 'tv_hot',\\r\\n            热播国产剧: 'tv_domestic',\\r\\n            热播欧美剧: 'tv_american',\\r\\n            热播日剧: 'tv_japanese',\\r\\n            热播韩剧: 'tv_korean',\\r\\n            热播动画: 'tv_animation'\\r\\n        },\\r\\n        综艺: {\\r\\n            热播综艺: 'show_hot',\\r\\n            国内综艺: 'show_domestic',\\r\\n            国外综艺: 'show_foreign'\\r\\n        }\\r\\n    }\\r\\n    for (let i in items) {\\r\\n        for (let j in items[i]) {\\r\\n            a.push({\\r\\n                title: temp.item == items[i][j] ? '““””<b> <font color=' + color + '>' + j + ' </font></b>' : j,\\r\\n                col_type: 'scroll_button',\\r\\n                url: $('hiker://empty#noLoading#').lazyRule((e) => {\\r\\n                    let temp = JSON.parse(getMyVar('hotList'));\\r\\n                    temp.item = e;\\r\\n                    putMyVar('hotList', JSON.stringify(temp));\\r\\n                    refreshPage();\\r\\n                    return 'hiker://empty'\\r\\n                }, items[i][j])\\r\\n            })\\r\\n        }\\r\\n        a.push({\\r\\n            col_type: \\\"blank_block\\\"\\r\\n        })\\r\\n    }\\r\\n\\r\\n    let sort = {\\r\\n        热度排序: 'recommend',\\r\\n        时间排序: 'time',\\r\\n        评分排序: 'rank'\\r\\n    }\\r\\n    for (let r in sort) {\\r\\n        a.push({\\r\\n            title: temp.sort == sort[r] ? '““””<b> <font color=' + color + '>' + r + ' </font></b>' : r,\\r\\n            col_type: 'scroll_button',\\r\\n            url: $('hiker: //empty#noLoading#').lazyRule((e) => {\\r\\n                let temp = JSON.parse(getMyVar('hotList'));\\r\\n                temp.sort = e;\\r\\n                putMyVar(\\\"hotList\\\", JSON.stringify(temp));\\r\\n                refreshPage();\\r\\n                return 'hiker://empty'\\r\\n            }, sort[r])\\r\\n        })\\r\\n    }\\r\\n\\r\\n    a.push({\\r\\n        col_type: \\\"blank_block\\\"\\r\\n    })\\r\\n\\r\\n    let playable = {\\r\\n        全部影片: '0',\\r\\n        仅有片源: '1'\\r\\n    }\\r\\n    for (let r in playable) {\\r\\n        a.push({\\r\\n            title: temp.playable == playable[r] ? '““””<b> <font color=' + color + '>' + r + ' </font></b>' : r,\\r\\n            col_type: 'scroll_button',\\r\\n            url: $('hiker: //empty#noLoading#').lazyRule((e) => {\\r\\n                let temp = JSON.parse(getMyVar('hotList'));\\r\\n                temp.playable = e;\\r\\n                putMyVar(\\\"hotList\\\", JSON.stringify(temp));\\r\\n                refreshPage();\\r\\n                return 'hiker://empty'\\r\\n            }, playable[r])\\r\\n        })\\r\\n    }\\r\\n\\r\\n    a.push({\\r\\n        title: '““””<b> <font color=' + color + '>评分区间:' + temp.score.replace(',', '-') + ' </font></b>',\\r\\n        col_type: 'scroll_button',\\r\\n        url: $(temp.score.replace(',', '-'), '评分应在0-10之间').input(() => {\\r\\n            let temp = JSON.parse(getMyVar('hotList'));\\r\\n            let inputs = input.split('-');\\r\\n            if (inputs.length == 2 && inputs.every(e => e >= 0 && e <= 10) && parseFloat(inputs[0]) < inputs[1]) {\\r\\n                temp.score = input.replace('-', ',');\\r\\n                putMyVar(\\\"hotList\\\", JSON.stringify(temp));\\r\\n                refreshPage();\\r\\n                return 'hiker://empty'\\r\\n            } else {\\r\\n                return 'toast://请正确输入'\\r\\n            }\\r\\n        })\\r\\n    })\\r\\n\\r\\n    let l = [];\\r\\n    if (temp.item.indexOf('?') != -1) {\\r\\n        let s = getDoubanRes(\\\"https://frodo.douban.com/api/v2/movie/\\\" + temp.item + '&playable=' + temp.playable + '&sort=' + temp.sort + '&score_range=' + temp.score + (page ? \\\"&start=\\\" + (page - 1) * count + \\\"&count=\\\" + count : \\\"&start=0&count=30\\\") + '&loc_id=108288');\\r\\n        l = s.items;\\r\\n    } else {\\r\\n        let s = getDoubanRes(\\\"https://frodo.douban.com/api/v2/subject_collection/\\\" + temp.item + '/items' + '?playable=' + temp.playable + '&sort=' + temp.sort + '&score_range=' + temp.score + (page ? \\\"&start=\\\" + (page - 1) * count + \\\"&count=\\\" + count : \\\"&start=0&count=30\\\"));\\r\\n        l = s.subject_collection_items;\\r\\n    }\\r\\n\\r\\n    let detailsViewConfigs = getConfig('detailsViewConfigs');\\r\\n    let i = l.map((e => {\\r\\n        let type = e.type,\\r\\n            id = e.id,\\r\\n            title = e.title;\\r\\n        let useConfig = detailsViewConfigs[detailsViewConfigs.use].config;\\r\\n        let urlParams = {};\\r\\n        if (useConfig.startsWith('{')) {\\r\\n            eval('urlParams = ' + useConfig);\\r\\n        } else {\\r\\n            urlParams.url = $(\\\"hiker://empty#noHistory##immersiveTheme#\\\" + '?type=' + type + '&id=' + id).rule((type, id, title, useConfig) => {\\r\\n                eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n                if (type === \\\"playlist\\\") {\\r\\n                    douList(id, MY_PAGE, 50);\\r\\n                } else {\\r\\n                    eval(useConfig);\\r\\n                }\\r\\n            }, type, id, title, useConfig);\\r\\n        }\\r\\n        return {\\r\\n            title: title + \\\"（\\\" + e.year + \\\"）\\\",\\r\\n            url: urlParams.url,\\r\\n            extra: urlParams.extra,\\r\\n            img: e.pic ? e.pic.normal + \\\"@Referer=\\\" + e.pic.normal : e.cover.url + '@Referer=' + e.cover.url,\\r\\n            desc: (e.tags ? e.tags.map((e => e.name)).join(\\\",\\\") : e.card_subtitle) + \\\"\\\\n\\\" + (e.rating ? computeRating(e.rating.max, e.rating.value) + \\\" \\\" + e.rating.value.toFixed(1) + \\\"分\\\" : \\\"暂无评分\\\")\\r\\n        }\\r\\n    }));\\r\\n\\r\\n    return page > 1 ? i : a.concat(i);\\r\\n}\\r\\n\\r\\n//分类\\r\\nfunction classList(page, count) {\\r\\n    if (!getMyVar('classlist')){\\r\\n        putMyVar('classlist', JSON.stringify({subtype:\\\"\\\",local:\\\"\\\",year:\\\"\\\",class:\\\"\\\",rank:\\\"U\\\",type:\\\"\\\",filter:\\\"\\\",score:\\\"0,10\\\"}));\\r\\n    }\\r\\n    let a = [];\\r\\n    let temp = JSON.parse(getMyVar('classlist'));\\r\\n    let color = getConfig('chooseColor');\\r\\n\\r\\n    let items = {\\r\\n        subtype: [\\\"全部形式\\\", \\\"电影\\\", \\\"电视剧\\\", \\\"综艺\\\", \\\"动漫\\\", \\\"纪录片\\\", \\\"短片\\\"],\\r\\n        local: [\\\"全部地区\\\", \\\"自定义地区\\\", \\\"中国大陆\\\", \\\"美国\\\", \\\"中国香港\\\", \\\"中国台湾\\\", \\\"日本\\\", \\\"韩国\\\", \\\"英国\\\", \\\"法国\\\", \\\"德国\\\", \\\"意大利\\\", \\\"西班牙\\\", \\\"印度\\\", \\\"泰国\\\", \\\"俄罗斯\\\", \\\"伊朗\\\", \\\"加拿大\\\", \\\"澳大利亚\\\", \\\"爱尔兰\\\", \\\"瑞典\\\", \\\"巴西\\\", \\\"丹麦\\\"],\\r\\n        type: [\\\"全部类型\\\", \\\"自定义类型\\\", \\\"剧情\\\", \\\"喜剧\\\", \\\"动作\\\", \\\"爱情\\\", \\\"科幻\\\", \\\"动画\\\", \\\"悬疑\\\", \\\"惊悚\\\", \\\"恐怖\\\", \\\"犯罪\\\", \\\"同性\\\", \\\"音乐\\\", \\\"歌舞\\\", \\\"传记\\\", \\\"历史\\\", \\\"战争\\\", \\\"西部\\\", \\\"奇幻\\\", \\\"冒险\\\", \\\"灾难\\\", \\\"武侠\\\", \\\"\\\\u60c5\\\\u8272\\\"],\\r\\n        year: [\\\"全部年代\\\", \\\"自定义年份\\\", \\\"2020年代\\\", \\\"2010年代\\\", \\\"2000年代\\\", \\\"90年代\\\", \\\"80年代\\\", \\\"70年代\\\", \\\"60年代\\\", \\\"更早\\\"],\\r\\n        class: [\\\"全部特色\\\", \\\"自定义标签\\\", \\\"经典\\\", \\\"青春\\\", \\\"文艺\\\", \\\"搞笑\\\", \\\"励志\\\", \\\"魔幻\\\", \\\"感人\\\", \\\"女性\\\", \\\"黑帮\\\", \\\"治愈\\\", \\\"美食\\\", \\\"宗教\\\", \\\"小说改编\\\", \\\"超级英雄\\\"]\\r\\n    }\\r\\n    for (item in items) {\\r\\n        for (let i = 0; i < items[item].length; i++) {\\r\\n            let title = \\\"\\\";\\r\\n            if(temp[item] == items[item][i] || (temp[item] == \\\"\\\" && i == 0)){\\r\\n                title = '““””<b> <font color=' + color + '>' + items[item][i] + ' </font></b>';\\r\\n            }else{\\r\\n                title = items[item][i];\\r\\n            }\\r\\n            let url = $('hiker://empty#noLoading#').lazyRule((text,item) => {\\r\\n                        let temp = JSON.parse(getMyVar('classlist'));\\r\\n                        temp[item] = text.indexOf(\\\"全部\\\") != -1 ? \\\"\\\" : text;\\r\\n                        putMyVar(\\\"classlist\\\", JSON.stringify(temp));\\r\\n                        refreshPage();\\r\\n                        return 'hiker://empty'\\r\\n                    }, items[item][i], item);\\r\\n            \\r\\n            if(items[item][i] == \\\"自定义年份\\\"){\\r\\n                if(temp.year == \\\"自定义年份\\\"){\\r\\n                    title = '““””<b> <font color=' + color + '>自定义年份:' + temp.customYear + ' </font></b>';\\r\\n                }\\r\\n                \\r\\n                url = $(temp.customYear, '直接输入具体年份,例如2000').input(() => {\\r\\n                    let temp = JSON.parse(getMyVar('classlist'));\\r\\n                    if(input.length == 4){\\r\\n                        temp.customYear = input;\\r\\n                        temp.year = \\\"自定义年份\\\";\\r\\n                        putMyVar(\\\"classlist\\\", JSON.stringify(temp));\\r\\n                        refreshPage();\\r\\n                        return 'hiker://empty'\\r\\n                    }else{\\r\\n                        return 'toast://请正确输入'\\r\\n                    }\\r\\n                });\\r\\n            }else if(items[item][i] == \\\"自定义地区\\\"){\\r\\n                if(temp.local == \\\"自定义地区\\\"){\\r\\n                    title = '““””<b> <font color=' + color + '>自定义地区:' + temp.customLocal + ' </font></b>';\\r\\n                }\\r\\n                \\r\\n                url = $(temp.customLocal, '直接输入具体地区,例如中国大陆').input(() => {\\r\\n                    let temp = JSON.parse(getMyVar('classlist'));\\r\\n                    if(input.length > 0){\\r\\n                        temp.customLocal = input;\\r\\n                        temp.local = \\\"自定义地区\\\";\\r\\n                        putMyVar(\\\"classlist\\\", JSON.stringify(temp));\\r\\n                        refreshPage();\\r\\n                        return 'hiker://empty'\\r\\n                    }else{\\r\\n                        return 'toast://请正确输入'\\r\\n                    }\\r\\n                });\\r\\n            }else if(items[item][i] == \\\"自定义类型\\\"){\\r\\n                if(temp.type == \\\"自定义类型\\\"){\\r\\n                    title = '““””<b> <font color=' + color + '>自定义类型:' + temp.customType + ' </font></b>';\\r\\n                }\\r\\n                \\r\\n                url = $(temp.customType, '直接输入具体类型,例如剧情').input(() => {\\r\\n                    let temp = JSON.parse(getMyVar('classlist'));\\r\\n                    if(input.length > 0){\\r\\n                        temp.customType = input;\\r\\n                        temp.type = \\\"自定义类型\\\";\\r\\n                        putMyVar(\\\"classlist\\\", JSON.stringify(temp));\\r\\n                        refreshPage();\\r\\n                        return 'hiker://empty'\\r\\n                    }else{\\r\\n                        return 'toast://请正确输入'\\r\\n                    }\\r\\n                });\\r\\n            }else if(items[item][i] == \\\"自定义标签\\\"){\\r\\n                if(temp.class == \\\"自定义标签\\\"){\\r\\n                    title = '““””<b> <font color=' + color + '>自定义标签:' + temp.customClass + ' </font></b>';\\r\\n                }\\r\\n                \\r\\n                url = $(temp.customClass, '直接输入具体标签,例如经典\\\\n可写多个标签,使用\\\"英文逗号\\\"分隔').input(() => {\\r\\n                    let temp = JSON.parse(getMyVar('classlist'));\\r\\n                    if(input.length > 0){\\r\\n                        temp.customClass = input;\\r\\n                        temp.class = \\\"自定义标签\\\";\\r\\n                        putMyVar(\\\"classlist\\\", JSON.stringify(temp));\\r\\n                        refreshPage();\\r\\n                        return 'hiker://empty'\\r\\n                    }else{\\r\\n                        return 'toast://请正确输入'\\r\\n                    }\\r\\n                });\\r\\n            }\\r\\n            a.push({\\r\\n                title: title,\\r\\n                col_type: 'scroll_button',\\r\\n                url: url\\r\\n            })\\r\\n        }\\r\\n        a.push({\\r\\n            col_type: 'blank_block'\\r\\n        })\\r\\n    }\\r\\n\\r\\n    let rank = {\\r\\n        默认排序: \\\"U\\\",\\r\\n        热度: \\\"T\\\",\\r\\n        评分: \\\"S\\\",\\r\\n        时间: \\\"R\\\"\\r\\n    }\\r\\n    for (let r in rank) {\\r\\n        a.push({\\r\\n            title: temp.rank === rank[r] ? '““””<b> <font color=' + color + '>' + r + ' </font></b>' : r,\\r\\n            col_type: 'scroll_button',\\r\\n            url: $('hiker: //empty#noLoading#').lazyRule((e) => {\\r\\n                let temp = JSON.parse(getMyVar('classlist'));\\r\\n                temp.rank = e;\\r\\n                putMyVar(\\\"classlist\\\", JSON.stringify(temp));\\r\\n                refreshPage();\\r\\n                return 'hiker://empty'\\r\\n            }, rank[r])\\r\\n        })\\r\\n    }\\r\\n\\r\\n    a.push({\\r\\n        col_type: 'blank_block'\\r\\n    })\\r\\n\\r\\n    let filter = {\\r\\n        全部影片: '',\\r\\n        仅有片源: 'playable'\\r\\n    }\\r\\n    for (let r in filter) {\\r\\n        a.push({\\r\\n            title: temp.filter === filter[r] ? '““””<b> <font color=' + color + '>' + r + ' </font></b>' : r,\\r\\n            col_type: 'scroll_button',\\r\\n            url: $('hiker: //empty#noLoading#').lazyRule((e) => {\\r\\n                let temp = JSON.parse(getMyVar('classlist'));\\r\\n                temp.filter = e;\\r\\n                putMyVar(\\\"classlist\\\", JSON.stringify(temp));\\r\\n                refreshPage();\\r\\n                return 'hiker://empty'\\r\\n            }, filter[r])\\r\\n        })\\r\\n    }\\r\\n\\r\\n    a.push({\\r\\n        title: '““””<b> <font color=' + color + '>评分区间:' + temp.score.replace(',', '-') + ' </font></b>',\\r\\n        col_type: 'scroll_button',\\r\\n        url: $(temp.score.replace(',', '-'), '评分应在0-10之间').input(() => {\\r\\n            let temp = JSON.parse(getMyVar('classlist'));\\r\\n            let inputs = input.split('-');\\r\\n            if (inputs.length == 2 && inputs.every(e => e >= 0 && e <= 10) && parseFloat(inputs[0]) < inputs[1]) {\\r\\n                temp.score = input.replace('-', ',');\\r\\n                putMyVar(\\\"classlist\\\", JSON.stringify(temp));\\r\\n                refreshPage();\\r\\n                return 'hiker://empty'\\r\\n            } else {\\r\\n                return 'toast://请正确输入'\\r\\n            }\\r\\n        })\\r\\n    })\\r\\n\\r\\n    let s = getDoubanRes(\\\"https://frodo.douban.com/api/v2/movie/tag?\\\"\\r\\n            + (page ? \\\"start=\\\" + (page - 1) * count\\r\\n            + \\\"&count=\\\" + count : \\\"start=0&count=30\\\")\\r\\n            + \\\"&q=\\\" + temp.subtype\\r\\n            + \\\",\\\" + (temp.local==\\\"自定义地区\\\" ? temp.customLocal : temp.local)\\r\\n            + \\\",\\\" + (temp.type==\\\"自定义类型\\\" ? temp.customType : temp.type)\\r\\n            + \\\",\\\" + (temp.year==\\\"自定义年份\\\" ? temp.customYear : temp.year)\\r\\n            + \\\",\\\" + (temp.class==\\\"自定义标签\\\" ? temp.customClass : temp.class)\\r\\n            + \\\"&sort=\\\" + temp.rank + \\\"&score_range=\\\" + temp.score + '&filter=' + temp.filter);\\r\\n    let l = s.data;\\r\\n\\r\\n    let detailsViewConfigs = getConfig('detailsViewConfigs');\\r\\n    let i = l.map((e => {\\r\\n        let type = e.type,\\r\\n            id = e.id,\\r\\n            title = e.title;\\r\\n        let useConfig = detailsViewConfigs[detailsViewConfigs.use].config;\\r\\n        let urlParams = {};\\r\\n        if (useConfig.startsWith('{')) {\\r\\n            eval('urlParams = ' + useConfig);\\r\\n        } else {\\r\\n            urlParams.url = $(\\\"hiker://empty#noHistory##immersiveTheme#\\\" + '?type=' + type + '&id=' + id).rule((type, id, title, useConfig) => {\\r\\n                eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n                if (type === \\\"playlist\\\") {\\r\\n                    douList(id, MY_PAGE, 50);\\r\\n                } else {\\r\\n                    eval(useConfig);\\r\\n                }\\r\\n            }, type, id, title, useConfig);\\r\\n        }\\r\\n        return {\\r\\n            title: title,\\r\\n            col_type: 'movie_3',\\r\\n            url: urlParams.url,\\r\\n            extra: urlParams.extra,\\r\\n            img: e.cover_url + \\\"@Referer=\\\" + e.cover_url,\\r\\n            desc: e.null_rating_reason || e.rating.value\\r\\n        }\\r\\n    }));\\r\\n\\r\\n    return page > 1 ? i : a.concat(i);\\r\\n}\\r\\n\\r\\n//片单\\r\\nfunction playList(page, count) {\\r\\n    if (!getMyVar('playlist')) putMyVar('playlist', '{\\\"subtype\\\":\\\"\\\",\\\"type\\\":\\\"all\\\"}');\\r\\n    let a = [];\\r\\n    let temp = JSON.parse(getMyVar('playlist', '{\\\"subtype\\\":\\\"\\\",\\\"type\\\":\\\"all\\\"}'));\\r\\n    let color = getConfig('chooseColor');\\r\\n\\r\\n    let items = {\\r\\n        type: {\\r\\n            全部: \\\"all\\\",\\r\\n            豆瓣片单: \\\"official\\\",\\r\\n            精选: \\\"selected\\\",\\r\\n            经典: \\\"classical\\\",\\r\\n            获奖: \\\"prize\\\",\\r\\n            高分: \\\"high_score\\\",\\r\\n            榜单: \\\"movie_list\\\",\\r\\n            冷门佳片: \\\"dark_horse\\\",\\r\\n            主题: \\\"topic\\\",\\r\\n            导演: \\\"director\\\",\\r\\n            演员: \\\"actor\\\",\\r\\n            系列: \\\"series\\\",\\r\\n            华语: \\\"chinese\\\",\\r\\n            欧美: \\\"western\\\",\\r\\n            日本: \\\"japanese\\\",\\r\\n            韩国: \\\"korea\\\",\\r\\n            喜剧: \\\"comedy\\\",\\r\\n            动作: \\\"action\\\",\\r\\n            爱情: \\\"love\\\",\\r\\n            科幻: \\\"science_fiction\\\",\\r\\n            动画: \\\"cartoon\\\",\\r\\n            悬疑: \\\"mystery\\\",\\r\\n            惊悚: \\\"panic\\\",\\r\\n            恐怖: \\\"horrible\\\",\\r\\n            犯罪: \\\"criminal\\\",\\r\\n            同性: \\\"lgbt\\\",\\r\\n            战争: \\\"war\\\",\\r\\n            奇幻: \\\"fantasy\\\",\\r\\n            \\\"\\\\u60c5\\\\u8272\\\": \\\"erotica\\\",\\r\\n            音乐: \\\"music\\\",\\r\\n            纪录片: \\\"documentary\\\",\\r\\n            治愈: \\\"cure\\\",\\r\\n            艺术: \\\"art\\\",\\r\\n            黑色幽默: \\\"dark_humor\\\",\\r\\n            青春: \\\"youth\\\",\\r\\n            女性: \\\"female\\\",\\r\\n            真实事件改编: \\\"real_event\\\",\\r\\n            暴力: \\\"violence\\\",\\r\\n            黑白: \\\"black_white\\\",\\r\\n            美食: \\\"food\\\",\\r\\n            旅行: \\\"travel\\\",\\r\\n            儿童: \\\"child\\\",\\r\\n            人性: \\\"humanity\\\",\\r\\n            家庭: \\\"family\\\",\\r\\n            文艺: \\\"literary_art\\\",\\r\\n            小说改编: \\\"novel\\\",\\r\\n            感人: \\\"moving\\\",\\r\\n            励志: \\\"inspiration\\\"\\r\\n        },\\r\\n        subtype: {\\r\\n            全部: \\\"\\\",\\r\\n            电影: \\\"movie\\\",\\r\\n            电视剧: \\\"tv\\\"\\r\\n        }\\r\\n    }\\r\\n    for (let i in items) {\\r\\n        for (let j in items[i]) {\\r\\n            a.push({\\r\\n                title: temp[i] === items[i][j] ? '““””<b> <font color=' + color + '>' + j + ' </font></b>' : j,\\r\\n                col_type: 'scroll_button',\\r\\n                url: $('hiker://empty#noLoading#').lazyRule((t) => {\\r\\n                    let temp = JSON.parse(getMyVar('playlist', '{\\\"subtype\\\":\\\"\\\",\\\"type\\\":\\\"all\\\"}'));\\r\\n                    temp[t[0]] = t[1];\\r\\n                    putMyVar(\\\"playlist\\\", JSON.stringify(temp));\\r\\n                    refreshPage();\\r\\n                    return 'hiker://empty'\\r\\n                }, [i, items[i][j]])\\r\\n            })\\r\\n        }\\r\\n        a.push({\\r\\n            col_type: \\\"blank_block\\\"\\r\\n        })\\r\\n    }\\r\\n\\r\\n    let s = getDoubanRes(\\\"https://frodo.douban.com/api/v2/skynet/new_playlists\\\" + \\\"?category=\\\" + temp.type + \\\"&subject_type=\\\" + temp.subtype + (page ? \\\"&start=\\\" + (page - 1) * count + \\\"&count=\\\" + count : \\\"&start=0&count=10\\\"));\\r\\n    let l = s.data[0].items;\\r\\n\\r\\n    let i = l.map((e => ({\\r\\n        title: e.title,\\r\\n        url: $('hiker://empty/$page{fypage}#noHistory#').rule((type, id) => {\\r\\n            eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n            if (type === \\\"playlist\\\") {\\r\\n                douList(id, MY_PAGE, 50);\\r\\n            } else {\\r\\n                subjectCollectionList(MY_PAGE, 50, id);\\r\\n            }\\r\\n        }, e.type, e.id),\\r\\n        img: e.cover_url + \\\"@Referer=\\\" + e.cover_url,\\r\\n        desc: \\\"共\\\" + e.items_count + \\\"部\\\"\\r\\n    })));\\r\\n\\r\\n    return page > 1 ? i : a.concat(i);\\r\\n}\\r\\n\\r\\n//榜单\\r\\nfunction rankList(page, count) {\\r\\n    if (!getMyVar('rankList')) putMyVar('rankList', '{\\\"type\\\":\\\"movie\\\",\\\"list\\\":\\\"rank_list\\\",\\\"year_lists\\\":[],\\\"category_lists\\\":[],\\\"year\\\":\\\"\\\",\\\"category\\\":\\\"\\\"}');\\r\\n    let a = [];\\r\\n    let temp = JSON.parse(getMyVar('rankList'));\\r\\n    let color = getConfig('chooseColor');\\r\\n\\r\\n    let items = {\\r\\n        电影: 'movie',\\r\\n        电视剧: 'tv'\\r\\n    }\\r\\n    for (let i in items) {\\r\\n        a.push({\\r\\n            title: temp.type == items[i] ? '““””<b> <font color=' + color + '>' + i + ' </font></b>' : i,\\r\\n            col_type: 'scroll_button',\\r\\n            url: $('hiker://empty#noLoading#').lazyRule((e) => {\\r\\n                let temp = JSON.parse(getMyVar('rankList'));\\r\\n                temp.type = e;\\r\\n                putMyVar(\\\"rankList\\\", JSON.stringify(temp));\\r\\n                refreshPage();\\r\\n                return 'hiker://empty'\\r\\n            }, items[i])\\r\\n        })\\r\\n    }\\r\\n\\r\\n    a.push({\\r\\n        col_type: \\\"blank_block\\\"\\r\\n    })\\r\\n\\r\\n    let list = {\\r\\n        口碑榜单: 'rank_list',\\r\\n        年度榜单: 'year_ranks',\\r\\n        类型榜单: 'category_ranks'\\r\\n    }\\r\\n    for (let i in list) {\\r\\n        a.push({\\r\\n            title: temp.list == list[i] ? '““””<b> <font color=' + color + '>' + i + ' </font></b>' : i,\\r\\n            col_type: 'scroll_button',\\r\\n            url: $('hiker://empty#noLoading#').lazyRule((e) => {\\r\\n                let temp = JSON.parse(getMyVar('rankList'));\\r\\n                temp.list = e;\\r\\n                putMyVar(\\\"rankList\\\", JSON.stringify(temp));\\r\\n                refreshPage();\\r\\n                return 'hiker://empty'\\r\\n            }, list[i])\\r\\n        })\\r\\n    }\\r\\n\\r\\n    if (temp.list == 'year_ranks' && temp.year_lists.length == 0) {\\r\\n        let t = getDoubanRes(\\\"https://frodo.douban.com/api/v2/\\\" + temp.type + '/rank_list');\\r\\n        temp.year_lists = t.groups[1].tabs;\\r\\n        putMyVar('rankList', JSON.stringify(temp));\\r\\n    } else if (temp.list == 'category_ranks' && temp.category_lists.length == 0) {\\r\\n        let t = getDoubanRes(\\\"https://frodo.douban.com/api/v2/\\\" + temp.type + '/rank_list');\\r\\n        temp.category_lists = t.groups[2].tabs;\\r\\n        putMyVar('rankList', JSON.stringify(temp));\\r\\n    }\\r\\n\\r\\n    if (temp.list == 'year_ranks') {\\r\\n        a.push({\\r\\n            col_type: \\\"blank_block\\\"\\r\\n        })\\r\\n        if (!temp.year) temp.year = temp.year_lists[0].key;\\r\\n        for (let t of temp.year_lists) {\\r\\n            a.push({\\r\\n                title: temp.year == t.key ? '““””<b> <font color=' + color + '>' + t.title + ' </font></b>' : t.title,\\r\\n                col_type: 'scroll_button',\\r\\n                url: $('hiker://empty#noLoading#').lazyRule((e) => {\\r\\n                    let temp = JSON.parse(getMyVar('rankList'));\\r\\n                    temp.year = e;\\r\\n                    putMyVar(\\\"rankList\\\", JSON.stringify(temp));\\r\\n                    refreshPage();\\r\\n                    return 'hiker://empty'\\r\\n                }, t.key)\\r\\n            })\\r\\n        }\\r\\n    } else if (temp.list == 'category_ranks') {\\r\\n        a.push({\\r\\n            col_type: \\\"blank_block\\\"\\r\\n        })\\r\\n        if (!temp.category) temp.category = temp.category_lists[0].key;\\r\\n        for (let t of temp.category_lists) {\\r\\n            a.push({\\r\\n                title: temp.category == t.key ? '““””<b> <font color=' + color + '>' + t.title + ' </font></b>' : t.title,\\r\\n                col_type: 'scroll_button',\\r\\n                url: $('hiker://empty#noLoading#').lazyRule((e) => {\\r\\n                    let temp = JSON.parse(getMyVar('rankList'));\\r\\n                    temp.category = e;\\r\\n                    putMyVar(\\\"rankList\\\", JSON.stringify(temp));\\r\\n                    refreshPage();\\r\\n                    return 'hiker://empty'\\r\\n                }, t.key)\\r\\n            })\\r\\n        }\\r\\n    }\\r\\n\\r\\n    let l = [];\\r\\n    if (temp.list == 'rank_list' && MY_PAGE == 1) {\\r\\n        let s = getDoubanRes(\\\"https://frodo.douban.com/api/v2/\\\" + temp.type + '/' + temp.list + (page ? \\\"?start=\\\" + (page - 1) * count + \\\"&count=\\\" + count : \\\"?start=0&count=10\\\"));\\r\\n        l = s.groups[0].selected_collections;\\r\\n    } else if (temp.list == 'year_ranks' && MY_PAGE == 1) {\\r\\n        let s = getDoubanRes(\\\"https://frodo.douban.com/api/v2/\\\" + temp.type + '/' + temp.list + '?year=' + temp.year + (page ? \\\"&start=\\\" + (page - 1) * count + \\\"&count=\\\" + count : \\\"&start=0&count=10\\\"));\\r\\n        l = s.groups[0].selected_collections;\\r\\n    } else if (temp.list == 'category_ranks') {\\r\\n        let s = getDoubanRes(\\\"https://frodo.douban.com/api/v2/\\\" + temp.type + '/' + temp.list + '?category=' + temp.category + (page ? \\\"&start=\\\" + (page - 1) * count + \\\"&count=\\\" + count : \\\"&start=0&count=10\\\"));\\r\\n        l = s.selected_collections;\\r\\n    }\\r\\n\\r\\n    let i = [];\\r\\n    if (temp.list == 'category_ranks') {\\r\\n        i = l.map((e => ({\\r\\n            title: '““””' + e.title.bold(),\\r\\n            url: $('hiker://empty/$page{fypage}#noHistory#').rule((type, id) => {\\r\\n                eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n                if (type === \\\"playlist\\\") {\\r\\n                    douList(id, MY_PAGE, 50);\\r\\n                } else {\\r\\n                    subjectCollectionList(MY_PAGE, 50, id);\\r\\n                }\\r\\n            }, e.type, e.id),\\r\\n            img: e.cover_url + \\\"@Referer=\\\" + e.cover_url,\\r\\n            desc: \\\"共\\\" + e.total + \\\"部\\\"\\r\\n        })));\\r\\n    } else {\\r\\n        i = l.map((e => ({\\r\\n            title: '' /*'““””' + e.medium_name + '\\\\n' + getStrongText(e.title)*/ ,\\r\\n            col_type: 'card_pic_2',\\r\\n            url: $('hiker://empty/$page{fypage}#noHistory#').rule((type, id, stitle) => {\\r\\n                setPageTitle(stitle);\\r\\n                eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n                if (type === \\\"playlist\\\") {\\r\\n                    douList(id, MY_PAGE, 50);\\r\\n                } else {\\r\\n                    subjectCollectionList(MY_PAGE, 50, id);\\r\\n                }\\r\\n            }, e.type, e.id, e.title),\\r\\n            img: e.cover_url + \\\"@Referer=\\\" + e.cover_url,\\r\\n            desc: \\\"0\\\"\\r\\n        })));\\r\\n    }\\r\\n\\r\\n    return page > 1 ? i : a.concat(i);\\r\\n}\\r\\n\\r\\n//将上映\\r\\nfunction comingList(page, count) {\\r\\n    if (!getMyVar('coming')) putMyVar('coming', '{\\\"type\\\":\\\"movie\\\",\\\"rank\\\":\\\"&sortby=hot\\\",\\\"local\\\":\\\"domestic\\\",\\\"area\\\":\\\"\\\",\\\"filter\\\":\\\"\\\"}');\\r\\n    let a = [];\\r\\n    let temp = JSON.parse(getMyVar('coming'));\\r\\n    let color = getConfig('chooseColor');\\r\\n\\r\\n    let items = {\\r\\n        电影: 'movie',\\r\\n        电视剧: 'tv'\\r\\n    }\\r\\n    for (let i in items) {\\r\\n        a.push({\\r\\n            title: temp.type === items[i] ? '““””<b> <font color=' + color + '>' + i + ' </font></b>' : i,\\r\\n            col_type: 'scroll_button',\\r\\n            url: $('hiker://empty#noLoading#').lazyRule((e) => {\\r\\n                let temp = JSON.parse(getMyVar('coming'));\\r\\n                temp.type = e;\\r\\n                putMyVar(\\\"coming\\\", JSON.stringify(temp));\\r\\n                refreshPage();\\r\\n                return 'hiker://empty'\\r\\n            }, items[i])\\r\\n        })\\r\\n    }\\r\\n    let rank = {\\r\\n        热度: '&sortby=hot',\\r\\n        时间: ''\\r\\n    }\\r\\n    a.push({\\r\\n        col_type: \\\"blank_block\\\"\\r\\n    })\\r\\n    for (let i in rank) {\\r\\n        a.push({\\r\\n            title: temp.rank === rank[i] ? '““””<b> <font color=' + color + '>' + i + ' </font></b>' : i,\\r\\n            col_type: 'scroll_button',\\r\\n            url: $('hiker://empty#noLoading#').lazyRule((e) => {\\r\\n                let temp = JSON.parse(getMyVar('coming'));\\r\\n                temp.rank = e;\\r\\n                putMyVar(\\\"coming\\\", JSON.stringify(temp));\\r\\n                refreshPage();\\r\\n                return 'hiker://empty'\\r\\n            }, rank[i])\\r\\n        })\\r\\n    }\\r\\n    let local = {\\r\\n        国内: 'domestic',\\r\\n        全球: 'international'\\r\\n    }\\r\\n    if (temp.type == 'movie') {\\r\\n        a.push({\\r\\n            col_type: \\\"blank_block\\\"\\r\\n        })\\r\\n        for (let i in local) {\\r\\n            a.push({\\r\\n                title: temp.local === local[i] ? '““””<b> <font color=' + color + '>' + i + ' </font></b>' : i,\\r\\n                col_type: 'scroll_button',\\r\\n                url: $('hiker://empty#noLoading#').lazyRule((e) => {\\r\\n                    let temp = JSON.parse(getMyVar('coming'));\\r\\n                    temp.local = e;\\r\\n                    putMyVar(\\\"coming\\\", JSON.stringify(temp));\\r\\n                    refreshPage();\\r\\n                    return 'hiker://empty'\\r\\n                }, local[i])\\r\\n            })\\r\\n        }\\r\\n    }\\r\\n    let area = {\\r\\n        全部: '',\\r\\n        美国: '&area_filter=american',\\r\\n        欧洲: '&area_filter=europe',\\r\\n        日本: '&area_filter=japanese',\\r\\n        韩国: '&area_filter=korean'\\r\\n    }\\r\\n    if (temp.type == 'movie' && temp.local == 'international') {\\r\\n        a.push({\\r\\n            col_type: \\\"blank_block\\\"\\r\\n        })\\r\\n        for (let i in area) {\\r\\n            a.push({\\r\\n                title: temp.area === area[i] ? '““””<b> <font color=' + color + '>' + i + ' </font></b>' : i,\\r\\n                col_type: 'scroll_button',\\r\\n                url: $('hiker://empty#noLoading#').lazyRule((e) => {\\r\\n                    let temp = JSON.parse(getMyVar('coming'));\\r\\n                    temp.area = e;\\r\\n                    putMyVar(\\\"coming\\\", JSON.stringify(temp));\\r\\n                    refreshPage();\\r\\n                    return 'hiker://empty'\\r\\n                }, area[i])\\r\\n            })\\r\\n        }\\r\\n    }\\r\\n    let filter = {\\r\\n        全部: '',\\r\\n        国产剧: '&type_filter=tv_domestic',\\r\\n        欧美剧: '&type_filter=tv_american',\\r\\n        日剧: '&type_filter=tv_japanese',\\r\\n        韩剧: '&type_filter=tv_korean',\\r\\n        动画: '&type_filter=tv_animation',\\r\\n        国内综艺: '&type_filter=show_domestic',\\r\\n        国外综艺: '&type_filter=show_foreign'\\r\\n    }\\r\\n    if (temp.type == 'tv') {\\r\\n        a.push({\\r\\n            col_type: \\\"blank_block\\\"\\r\\n        })\\r\\n        for (let i in filter) {\\r\\n            a.push({\\r\\n                title: temp.filter === filter[i] ? '““””<b> <font color=' + color + '>' + i + ' </font></b>' : i,\\r\\n                col_type: 'scroll_button',\\r\\n                url: $('hiker://empty#noLoading#').lazyRule((e) => {\\r\\n                    let temp = JSON.parse(getMyVar('coming'));\\r\\n                    temp.filter = e;\\r\\n                    putMyVar(\\\"coming\\\", JSON.stringify(temp));\\r\\n                    refreshPage();\\r\\n                    return 'hiker://empty'\\r\\n                }, filter[i])\\r\\n            })\\r\\n        }\\r\\n    }\\r\\n\\r\\n    let s = getDoubanRes(\\\"https://frodo.douban.com/api/v2/\\\" + temp.type + \\\"/coming_soon\\\" + \\\"?area=\\\" + temp.local + temp.rank + temp.area + temp.filter + (page ? \\\"&start=\\\" + (page - 1) * count + \\\"&count=\\\" + count : \\\"&start=0&count=10\\\"));\\r\\n    let l = s.subjects;\\r\\n    let detailsViewConfigs = getConfig('detailsViewConfigs');\\r\\n\\r\\n    let i = l.map((e => {\\r\\n        let type = e.type,\\r\\n            id = e.id,\\r\\n            title = e.title;\\r\\n        let useConfig = detailsViewConfigs[detailsViewConfigs.use].config;\\r\\n        let urlParams = {};\\r\\n        if (useConfig.startsWith('{')) {\\r\\n            eval('urlParams = ' + useConfig);\\r\\n        } else {\\r\\n            urlParams.url = $(\\\"hiker://empty#noHistory##immersiveTheme#\\\" + '?type=' + type + '&id=' + id).rule((type, id, title, useConfig) => {\\r\\n                eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n                if (type === \\\"playlist\\\") {\\r\\n                    douList(id, MY_PAGE, 50);\\r\\n                } else {\\r\\n                    eval(useConfig);\\r\\n                }\\r\\n            }, type, id, title, useConfig);\\r\\n        }\\r\\n        return {\\r\\n            title: title + \\\"（\\\" + e.year + \\\"）\\\",\\r\\n            url: urlParams.url,\\r\\n            extra: urlParams.extra,\\r\\n            img: e.cover_url + \\\"@Referer=\\\" + e.cover_url,\\r\\n            desc: \\\"上映日期:\\\" + e.pubdate + \\\"\\\\n\\\" + e.wish_count + \\\"人想看\\\" + \\\"\\\\n\\\" + e.null_rating_reason\\r\\n        }\\r\\n    }));\\r\\n\\r\\n    return page > 1 ? i : a.concat(i);\\r\\n}\\r\\n\\r\\n//片单详情\\r\\nfunction subjectCollectionList(page, count, id) {\\r\\n    if (!getMyVar('ranking')) putMyVar('ranking', '{\\\"item\\\":\\\"movie_real_time_hotest\\\",\\\"playable\\\":\\\"0\\\",\\\"score\\\":\\\"0-10\\\"}');\\r\\n    let a = [];\\r\\n    let temp = JSON.parse(getMyVar('ranking'));\\r\\n    let color = getConfig('chooseColor');\\r\\n\\r\\n    let items = {\\r\\n        电影: {\\r\\n            实时热门电影: 'movie_real_time_hotest',\\r\\n            一周口碑电影: 'movie_weekly_best',\\r\\n            top250电影: 'movie_top250'\\r\\n        },\\r\\n        电视剧: {\\r\\n            实时热门剧集: 'tv_real_time_hotest',\\r\\n            华语口碑剧集: 'tv_chinese_best_weekly',\\r\\n            全球口碑剧集: 'tv_global_best_weekly'\\r\\n        },\\r\\n        综艺: {\\r\\n            国内口碑综艺: 'show_chinese_best_weekly',\\r\\n            国外口碑综艺: 'show_global_best_weekly'\\r\\n        }\\r\\n    }\\r\\n    for (let i in items) {\\r\\n        for (let j in items[i]) {\\r\\n            a.push({\\r\\n                title: temp.item == items[i][j] ? '““””<b> <font color=' + color + '>' + j + ' </font></b>' : j,\\r\\n                col_type: 'scroll_button',\\r\\n                url: $('hiker://empty#noLoading#').lazyRule((e) => {\\r\\n                    let temp = JSON.parse(getMyVar('ranking'));\\r\\n                    temp.item = e;\\r\\n                    putMyVar(\\\"ranking\\\", JSON.stringify(temp));\\r\\n                    refreshPage();\\r\\n                    return 'hiker://empty'\\r\\n                }, items[i][j])\\r\\n            })\\r\\n        }\\r\\n        a.push({\\r\\n            col_type: \\\"blank_block\\\"\\r\\n        })\\r\\n    }\\r\\n\\r\\n    a.push({\\r\\n        col_type: 'blank_block'\\r\\n    })\\r\\n\\r\\n    let i = [];\\r\\n    let playable = {\\r\\n        全部影片: '0',\\r\\n        仅有片源: '1'\\r\\n    }\\r\\n    for (let r in playable) {\\r\\n        i.push({\\r\\n            title: temp.playable == playable[r] ? '““””<b> <font color=' + color + '>' + r + ' </font></b>' : r,\\r\\n            col_type: 'scroll_button',\\r\\n            url: $('hiker: //empty#noLoading#').lazyRule((e) => {\\r\\n                let temp = JSON.parse(getMyVar('ranking'));\\r\\n                temp.playable = e;\\r\\n                putMyVar(\\\"ranking\\\", JSON.stringify(temp));\\r\\n                refreshPage();\\r\\n                return 'hiker://empty'\\r\\n            }, playable[r])\\r\\n        })\\r\\n    }\\r\\n\\r\\n    i.push({\\r\\n        title: '““””<b> <font color=' + color + '>评分区间:' + temp.score + ' </font></b>',\\r\\n        col_type: 'scroll_button',\\r\\n        url: $(temp.score, '评分应在0-10之间').input(() => {\\r\\n            let temp = JSON.parse(getMyVar('ranking'));\\r\\n            let inputs = input.split('-');\\r\\n            if (inputs.length == 2 && inputs.every(e => e >= 0 && e <= 10) && parseFloat(inputs[0]) < inputs[1]) {\\r\\n                temp.score = input;\\r\\n                putMyVar(\\\"ranking\\\", JSON.stringify(temp));\\r\\n                refreshPage();\\r\\n                return 'hiker://empty'\\r\\n            } else {\\r\\n                return 'toast://请正确输入'\\r\\n            }\\r\\n        })\\r\\n    })\\r\\n\\r\\n    let t = getDoubanRes(\\\"https://frodo.douban.com/api/v2/subject_collection/\\\" + (id || temp.item));\\r\\n    i.push({\\r\\n        title: t.title + '(共' + t.total + '部)',\\r\\n        desc: t.description,\\r\\n        /*img: t.header_bg_image + \\\"@Referer=\\\" + t.header_bg_image,\\r\\n        url: t.header_bg_image + \\\"?type=.jpg@Referer=\\\" + t.header_bg_image + \\\"?type=.jpg\\\",*/\\r\\n        url: 'toast://点我干嘛',\\r\\n        col_type: \\\"text_1\\\"\\r\\n    })\\r\\n\\r\\n    let s = getDoubanRes(\\\"https://frodo.douban.com/api/v2/subject_collection/\\\" + (id || temp.item) + \\\"/items?\\\" + (page ? \\\"start=\\\" + (page - 1) * count + \\\"&count=\\\" + count : \\\"start=0&count=50\\\"));\\r\\n    let l = s.subject_collection_items;\\r\\n    if (temp.playable == '1') l = l.filter(e => !!e.has_linewatch);\\r\\n    if (temp.score != '0-10') {\\r\\n        l = l.filter(e => {\\r\\n            let r = temp.score.split('-');\\r\\n            return e.rating && e.rating.value < r[1] && e.rating.value > r[0];\\r\\n        });\\r\\n    }\\r\\n\\r\\n    let detailsViewConfigs = getConfig('detailsViewConfigs');\\r\\n    let r = l.map((e => {\\r\\n        let type = e.type,\\r\\n            id = e.id,\\r\\n            title = e.title;\\r\\n        let useConfig = detailsViewConfigs[detailsViewConfigs.use].config;\\r\\n        let urlParams = {};\\r\\n        if (useConfig.startsWith('{')) {\\r\\n            eval('urlParams = ' + useConfig);\\r\\n        } else {\\r\\n            urlParams.url = $(\\\"hiker://empty#noHistory##immersiveTheme#\\\" + '?type=' + type + '&id=' + id).rule((type, id, title, useConfig) => {\\r\\n                eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n                if (type === \\\"playlist\\\") {\\r\\n                    douList(id, MY_PAGE, 50);\\r\\n                } else {\\r\\n                    eval(useConfig);\\r\\n                }\\r\\n            }, type, id, title, useConfig);\\r\\n        }\\r\\n        return {\\r\\n            title: title,\\r\\n            col_type: 'movie_1_vertical_pic',\\r\\n            url: urlParams.url,\\r\\n            extra: urlParams.extra,\\r\\n            img: e.pic.normal + \\\"@Referer=\\\" + e.pic.normal,\\r\\n            desc: e.card_subtitle.split(\\\"/\\\").filter(((e, t) => {\\r\\n                if (t < 3) return e\\r\\n            })).join(\\\",\\\") + \\\"\\\\n\\\" + (e.rating ? computeRating(e.rating.max, e.rating.value) + \\\" \\\" + e.rating.value.toFixed(1) + \\\"分\\\" : \\\"暂无评分\\\")\\r\\n        }\\r\\n    }));\\r\\n\\r\\n    setHomeResult({\\r\\n        data: page > 1 ? r : (id ? i.concat(r) : a.concat(i).concat(r))\\r\\n    })\\r\\n}\\r\\n\\r\\n//豆列详情\\r\\nfunction douList(id, page, count) {\\r\\n    addListener('onClose', 'clearMyVar(\\\"douList\\\")');\\r\\n    if (!getMyVar('douList')) putMyVar('douList', '{\\\"playable\\\":\\\"0\\\",\\\"score\\\":\\\"0-10\\\"}');\\r\\n    let i = [];\\r\\n    let temp = JSON.parse(getMyVar('douList'));\\r\\n    let color = getConfig('chooseColor');\\r\\n\\r\\n    let playable = {\\r\\n        全部影片: '0',\\r\\n        仅有片源: '1'\\r\\n    }\\r\\n    for (let r in playable) {\\r\\n        i.push({\\r\\n            title: temp.playable == playable[r] ? '““””<b> <font color=' + color + '>' + r + ' </font></b>' : r,\\r\\n            col_type: 'scroll_button',\\r\\n            url: $('hiker: //empty#noLoading#').lazyRule((e) => {\\r\\n                let temp = JSON.parse(getMyVar('douList'));\\r\\n                temp.playable = e;\\r\\n                putMyVar(\\\"douList\\\", JSON.stringify(temp));\\r\\n                refreshPage();\\r\\n                return 'hiker://empty'\\r\\n            }, playable[r])\\r\\n        })\\r\\n    }\\r\\n\\r\\n    i.push({\\r\\n        title: '““””<b> <font color=' + color + '>评分区间:' + temp.score + ' </font></b>',\\r\\n        col_type: 'scroll_button',\\r\\n        url: $(temp.score, '评分应在0-10之间').input(() => {\\r\\n            let temp = JSON.parse(getMyVar('douList'));\\r\\n            let inputs = input.split('-');\\r\\n            if (inputs.length == 2 && inputs.every(e => e >= 0 && e <= 10) && parseFloat(inputs[0]) < inputs[1]) {\\r\\n                temp.score = input;\\r\\n                putMyVar(\\\"douList\\\", JSON.stringify(temp));\\r\\n                refreshPage();\\r\\n                return 'hiker://empty'\\r\\n            } else {\\r\\n                return 'toast://请正确输入'\\r\\n            }\\r\\n        })\\r\\n    })\\r\\n\\r\\n    let t = getDoubanRes(\\\"https://frodo.douban.com/api/v2/doulist/\\\" + id);\\r\\n    i.push({\\r\\n        title: t.title,\\r\\n        desc: '共' + t.items_count + '部(' + t.playable_count + '部可播放)',\\r\\n        /*img: t.header_bg_image + \\\"@Referer=\\\" + t.header_bg_image,\\r\\n        url: t.header_bg_image + \\\"?type=.jpg@Referer=\\\" + t.header_bg_image + \\\"?type=.jpg\\\",*/\\r\\n        url: 'toast://别点我',\\r\\n        col_type: \\\"text_1\\\"\\r\\n    });\\r\\n\\r\\n    let s = getDoubanRes(\\\"https://frodo.douban.com/api/v2/doulist/\\\" + id + \\\"/posts\\\" + '?playable=' + temp.playable + (page ? \\\"&start=\\\" + (page - 1) * count + \\\"&count=\\\" + count : \\\"&start=0&count=50\\\"));\\r\\n    let l = s.items;\\r\\n    if (temp.score != '0-10') {\\r\\n        l = l.filter(e => {\\r\\n            let r = temp.score.split('-');\\r\\n            return e.content.subject.rating && e.content.subject.rating.value < r[1] && e.content.subject.rating.value > r[0];\\r\\n        });\\r\\n    }\\r\\n\\r\\n    let detailsViewConfigs = getConfig('detailsViewConfigs');\\r\\n    let r = l.map((e => {\\r\\n        let type = e.content.subject.type,\\r\\n            id = e.content.subject.id,\\r\\n            title = e.content.subject.title;\\r\\n        let useConfig = detailsViewConfigs[detailsViewConfigs.use].config;\\r\\n        let urlParams = {};\\r\\n        if (useConfig.startsWith('{')) {\\r\\n            eval('urlParams = ' + useConfig);\\r\\n        } else {\\r\\n            urlParams.url = $(\\\"hiker://empty#noHistory##immersiveTheme#\\\" + '?type=' + type + '&id=' + id).rule((type, id, title, useConfig) => {\\r\\n                eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n                if (type === \\\"playlist\\\") {\\r\\n                    douList(id, MY_PAGE, 50);\\r\\n                } else {\\r\\n                    eval(useConfig);\\r\\n                }\\r\\n            }, type, id, title, useConfig);\\r\\n        }\\r\\n        return {\\r\\n            title: title,\\r\\n            url: urlParams.url,\\r\\n            extra: urlParams.extra,\\r\\n            img: e.content.subject.pic.normal + \\\"@Referer=\\\" + e.content.subject.pic.normal,\\r\\n            desc: e.content.subject.card_subtitle.split(\\\"/\\\").filter(((e, t) => {\\r\\n                if (t < 3) return e\\r\\n            })).join(\\\",\\\") + \\\"\\\\n\\\" + (e.content.subject.rating ? computeRating(e.content.subject.rating.max, e.content.subject.rating.value) + \\\" \\\" + e.content.subject.rating.value.toFixed(1) + \\\"分\\\" : \\\"暂无评分\\\")\\r\\n        }\\r\\n    }));\\r\\n\\r\\n    setHomeResult({\\r\\n        data: page > 1 ? r : i.concat(r)\\r\\n    })\\r\\n}\\r\\n\\r\\n\\r\\n\\r\\n//视频模块\\r\\nfunction videoUrlsModule(d, type, id, col, lazy, _res, extra) {\\r\\n    //col是样式col[0],col[1]分别是tv和movie的样式(tv会有分集信息title会很长)\\r\\n    if (!col) col = ['icon_2', 'icon_small_4'];\\r\\n    if (!lazy) lazy = 'return input';\\r\\n    let res = _res || getDoubanRes(\\\"https://frodo.douban.com/api/v2/\\\" + type + \\\"/\\\" + id);\\r\\n    for (let item in res.vendors) {\\r\\n        let e = res.vendors[item];\\r\\n        if (type === \\\"tv\\\") {\\r\\n            d.push({\\r\\n                title: e.title + (e.episodes_info ? \\\"•\\\" + e.episodes_info : \\\"\\\"),\\r\\n                img: e.icon,\\r\\n                col_type: col[0] || \\\"icon_2\\\",\\r\\n                url: $('hiker://empty?id=' + id + '&type=' + type + '&title=' + e.title).rule((res, id, e, lazy, extra) => {\\r\\n                    let title = res.title,\\r\\n                        pic = res.pic.normal + \\\"@Referer=\\\" + res.pic.normal;\\r\\n                    setPageTitle(e.title + '-' + title);\\r\\n                    try {\\r\\n                        setPagePicUrl(pic);\\r\\n                    } catch (e) {}\\r\\n                    eval(JSON.parse(request('hiker://page/main')).rule);\\r\\n                    let urls = getTvUrls(id, e.id);\\r\\n                    lazy = $(\\\"\\\").lazyRule(lazy => {\\r\\n                        let resultUrl = \\\"toast://解析失败\\\";\\r\\n                        try {\\r\\n                            if (lazy.startsWith(\\\"(\\\")) {\\r\\n                                eval('resultUrl = ' + lazy)\\r\\n                            } else {\\r\\n                                eval('resultUrl = ' + '(() => {' + lazy + '})()')\\r\\n                            }\\r\\n                        } catch (e) {\\r\\n                            log(e.message)\\r\\n                        }\\r\\n                        return resultUrl\\r\\n                    }, lazy)\\r\\n                    let d = [];\\r\\n                    if (typeof(urls) == \\\"object\\\") {\\r\\n                        let d = [];\\r\\n                        for (let i = 0; i < urls.length; i++) {\\r\\n                            d.push({\\r\\n                                title: '第' + (i + 1) + '集',\\r\\n                                col_type: 'text_4',\\r\\n                                url: lazy ? urls[i] + lazy : urls[i],\\r\\n                                extra: extra\\r\\n                            })\\r\\n                        }\\r\\n                        setResult(d);\\r\\n                    } else if (typeof(urls) == \\\"string\\\" && urls == '被封ip') {\\r\\n                        let rule = JSON.parse(request(\\\"hiker://page/releaseIP?rule=青豆\\\"))\\r\\n                            .rule;\\r\\n                        eval(rule);\\r\\n                    } else if (typeof(urls) == 'string' && urls == '没有收录') {\\r\\n                        let d = [];\\r\\n                        d.push({\\r\\n                            title: '豆瓣没有收录此视频源的详细信息',\\r\\n                            desc: '点我可以去视频源网站看看',\\r\\n                            col_type: 'text_center_1',\\r\\n                            url: e.url\\r\\n                        })\\r\\n                        setResult(d);\\r\\n                    }\\r\\n                }, res, id, e, lazy, extra)\\r\\n            })\\r\\n        } else if (type === 'movie') {\\r\\n            let mLazy = $(\\\"\\\").lazyRule(lazy => {\\r\\n                let resultUrl = \\\"toast://解析失败\\\";\\r\\n                try {\\r\\n                    if (lazy.startsWith(\\\"(\\\")) {\\r\\n                        eval('resultUrl = ' + lazy)\\r\\n                    } else {\\r\\n                        eval('resultUrl = ' + '(() => {' + lazy + '})()')\\r\\n                    }\\r\\n                } catch (e) {\\r\\n                    log(e.message)\\r\\n                }\\r\\n                return resultUrl\\r\\n            }, lazy)\\r\\n            d.push({\\r\\n                title: e.title + (e.episodes_info ? \\\"•\\\" + e.episodes_info : \\\"\\\"),\\r\\n                img: e.icon,\\r\\n                col_type: col[1] || \\\"icon_small_4\\\",\\r\\n                url: mLazy ? e.url + mLazy : e.url,\\r\\n                extra: extra\\r\\n            })\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\n//获取电视剧分集链接,id是片子编号,uid是视频源编号\\r\\nfunction getTvUrls(id, uid) {\\r\\n    let cookieCache = 'hiker://files/cache/doubancookie.txt';\\r\\n    let mUrl = 'https://movie.douban.com/subject/' + id + '/';\\r\\n    let headers = {\\r\\n        \\\"User-Agent\\\": PC_UA,\\r\\n    }\\r\\n    if (fileExist(cookieCache)) {\\r\\n        headers[\\\"Cookie\\\"] = fetch(cookieCache)\\r\\n    }\\r\\n    let html = request(mUrl, {\\r\\n        headers: headers\\r\\n    })\\r\\n    if ((html.includes(\\\"登录跳转\\\") && html.includes(\\\"异常请求\\\")) || (html.includes(\\\"window.location.href\\\") && html.includes(\\\"sec.douban\\\"))) {\\r\\n        return '被封ip';\\r\\n    } else {\\r\\n        let s = {\\r\\n            qq: 1,\\r\\n            youku: 3,\\r\\n            letv: 6,\\r\\n            mgtv: 7,\\r\\n            bilibili: 8,\\r\\n            iqiyi: 9,\\r\\n            cntv: 12,\\r\\n            cctv6: 13,\\r\\n            miguvideo: 15,\\r\\n            xigua: 17,\\r\\n            acfun: 18,\\r\\n            maiduidui: 19\\r\\n        };\\r\\n        let num = s[uid];\\r\\n\\r\\n        var sources = {};\\r\\n        let sl = html.match(/sources\\\\[[1-9]{1,2}\\\\][\\\\s\\\\S]*?\\\\]/g);\\r\\n        if (sl) {\\r\\n            for (var i in sl) {\\r\\n                eval(sl[i]);\\r\\n            }\\r\\n        } else {\\r\\n            let script_list = parseDomForArray(html, 'body&&script[src]');\\r\\n            let sources_url = \\\"\\\";\\r\\n            for (let i in script_list) {\\r\\n                let url = parseDomForHtml(script_list[i], 'script&&src');\\r\\n                if (url.indexOf('mixed_static') !== -1) {\\r\\n                    sources_url = url;\\r\\n                }\\r\\n            }\\r\\n            let sources_list = request(sources_url).match(/sources\\\\[[1-9]{1,2}\\\\][\\\\s\\\\S]*?\\\\]/g);\\r\\n            for (var i in sources_list) {\\r\\n                eval(sources_list[i]);\\r\\n            }\\r\\n        }\\r\\n\\r\\n        let ren = sources[num];\\r\\n        if (ren && ren.length > 0) {\\r\\n            /*var r = ren.map(e => unescape(e.play_link.replace(/(https|http):\\\\/\\\\/www.douban.com\\\\/link2\\\\/\\\\?url=/, '')\\r\\n                .split(';')[0].split('.html')[0] + '.html'))*/\\r\\n            var r = ren.map(e => unescape(e.play_link.split('?url=')[1].split('&')[0]))\\r\\n\\r\\n        }\\r\\n        return r || '没有收录';\\r\\n    }\\r\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"设置页\",\"path\":\"settingPage\",\"rule\":\"js:\\neval(JSON.parse(request('hiker://page/utils')).rule);\\n\\n//影片详情配置模块\\nfunction detailViewModeModule(d, detailsViewConfigs) {\\n    let detailsViewConfigs = getConfig('detailsViewConfigs');\\n    d.push({\\n        title: '自定义影片详情页面'.bold(),\\n        col_type: \\\"rich_text\\\"\\n    })\\n    for (let configKey of Object.keys(detailsViewConfigs)) {\\n        if (configKey === 'use') continue;\\n        d.push({\\n            title: configKey === detailsViewConfigs.use ? \\\"““\\\" + configKey + \\\"””\\\" : configKey,\\n            url: $(\\\"hiker://empty#noLoading#\\\").lazyRule(configKey => {\\n                let config = JSON.parse(request(getMyVar('qdb_config')))\\n                if (config.detailsViewConfigs.use === configKey) {\\n                    //putMyVar(\\\"input_config_type\\\", '影片详情页面配置')\\n                    putMyVar(\\\"input_name\\\", configKey);\\n                    putMyVar(\\\"input_code\\\", config.detailsViewConfigs[configKey].config);\\n                    putMyVar(\\\"input_setting_code\\\", config.detailsViewConfigs[configKey].setting || \\\"\\\");\\n                    return 'hiker://page/setting-editor?rule=青豆&view=detailViewModeEditPage';\\n                }\\n                config.detailsViewConfigs.use = configKey\\n                writeFile(getMyVar('qdb_config'), JSON.stringify(config))\\n                refreshPage(false);\\n                return 'toast://切换成功'\\n            }, configKey),\\n            col_type: 'flex_button'\\n        })\\n    }\\n    d.push({\\n        col_type: 'blank_block'\\n    })\\n    d.push({\\n        title: '➕',\\n        col_type: 'flex_button',\\n        url: 'hiker://page/setting-editor?rule=青豆&view=detailViewModeEditPage'\\n    });\\n    d.push({\\n        title: '➖',\\n        col_type: 'flex_button',\\n        url: $(Object.keys(detailsViewConfigs).filter(configKey => configKey !== 'use' && configKey !== '默认'), 2)\\n            .select(() => {\\n                if (input === '默认') return 'toast://默认配置无法删除！'\\n                let config = JSON.parse(request(getMyVar('qdb_config')))\\n                if (input === config.detailsViewConfigs.use) return 'toast://该配置正在使用，无法删除！'\\n                return $('确认删除\\\"' + input + '\\\"？').confirm((config) => {\\n                    delete config.detailsViewConfigs[configKey]\\n                    writeFile(getMyVar('qdb_config'), JSON.stringify(config))\\n                    refreshPage(false);\\n                    return 'toast://删除' + configKey + '成功'\\n                }, config, input)\\n            })\\n    })\\n    d.push({\\n        title: '📝',\\n        col_type: 'flex_button',\\n        url: $(Object.keys(detailsViewConfigs).filter(configKey => configKey !== 'use'), 2).select(() => {\\n            // if (input === '默认') return 'toast://默认配置无法编辑！'\\n            let config = JSON.parse(request(getMyVar('qdb_config')))\\n            putMyVar(\\\"input_name\\\", configKey);\\n            putMyVar(\\\"input_code\\\", config.detailsViewConfigs[configKey].config);\\n            putMyVar(\\\"input_setting_code\\\", config.detailsViewConfigs[configKey].setting || \\\"\\\");\\n            return 'hiker://page/setting-editor?rule=青豆&view=detailViewModeEditPage'\\n        })\\n    })\\n    d.push({\\n        title: '📥',\\n        col_type: 'flex_button',\\n        url: $(\\\"\\\", \\\"请输入口令\\\").input(() => {\\n            if (!input.includes(\\\"影片详情页面配置\\\")) return \\\"toast://该口令不是影片详情页面配置\\\";\\n            eval(JSON.parse(request('hiker://page/utils')).rule)\\n            let importConfigs = ConfigTool.import(input);\\n            if (!importConfigs) return \\\"toast://似乎出了错，请尝试再次导入～\\\";\\n            putMyVar(\\\"input_name\\\", importConfigs.name);\\n            putMyVar(\\\"input_code\\\", importConfigs.data.config);\\n            putMyVar(\\\"input_setting_code\\\", importConfigs.data.setting || \\\"\\\");\\n            return 'hiker://page/setting-editor?rule=青豆&view=detailViewModeEditPage';\\n        })\\n    })\\n    d.push({\\n        title: '📤',\\n        col_type: 'flex_button',\\n        url: $(Object.keys(detailsViewConfigs).filter(configKey => configKey !== 'use'), 2).select(() => {\\n            // if (input === '默认') return 'toast://默认配置无法编辑！'\\n            eval(JSON.parse(request('hiker://page/utils')).rule)\\n            let config = getConfig();\\n            let selectConfig = {\\n                name: input,\\n                data: config.detailsViewConfigs[input]\\n            }\\n            return $(ConfigTool.encTypeList, 2).select((selectConfig) => {\\n                eval(JSON.parse(request('hiker://page/utils')).rule)\\n                return ConfigTool.toClipboard(ConfigTool.export(selectConfig.name, selectConfig, \\\"影片详情页面配置\\\", input))\\n            }, selectConfig)\\n        })\\n    })\\n}\\n// 详情页设置模块\\nfunction detailViewSettingModule(d) {\\n    let detailsViewConfigs = getConfig('detailsViewConfigs');\\n    detailViewModeModule(d, detailsViewConfigs)\\n    let detailViewSetting = detailsViewConfigs[detailsViewConfigs.use].setting\\n    let result = \\\"toast://该详情页无设置页面\\\";\\n    if (detailViewSetting) {\\n        try {\\n            if (detailViewSetting.indexOf('return') == -1) throw new Error('必须 return @rule=js: 或 $().rule');\\n            if (detailViewSetting.startsWith(\\\"(\\\")) {\\n                eval('result = ' + detailViewSetting)\\n            } else {\\n                eval('result = ' + '(() => {' + detailViewSetting + '})()')\\n            }\\n        } catch (e) {\\n            log(e.message);\\n            result = \\\"toast://错误的设置页面代码,请前往 日志 查看错误原因\\\"\\n        }\\n    }\\n    d.push({\\n        title: '⚙️',\\n        col_type: 'flex_button',\\n        url: result\\n    })\\n}\\n\\n// 首页设置模块\\nfunction homePageSettingModule(d) {\\n    let homePageConfigs = getConfig('homePageConfigs');\\n    d.push({\\n        title: '自定义首页'.bold(),\\n        col_type: \\\"rich_text\\\"\\n    })\\n    for (let configKey of Object.keys(homePageConfigs)) {\\n        if (configKey === 'use') continue;\\n        d.push({\\n            title: configKey === homePageConfigs.use ? \\\"““\\\" + configKey + \\\"””\\\" : configKey,\\n            url: $(\\\"hiker://empty#noLoading#\\\").lazyRule((configKey) => {\\n                let config = JSON.parse(request(getMyVar('qdb_config')))\\n                if (config.homePageConfigs.use === configKey) {\\n                    //putMyVar(\\\"input_config_type\\\", '首页配置')\\n                    putMyVar(\\\"input_name\\\", configKey);\\n                    putMyVar(\\\"input_code\\\", config.homePageConfigs[configKey].config);\\n                    return 'hiker://page/setting-editor?rule=青豆&view=homePageModeEditPage'\\n                }\\n                config.homePageConfigs.use = configKey\\n                writeFile(getMyVar('qdb_config'), JSON.stringify(config))\\n                refreshPage(false);\\n                return 'toast://切换成功'\\n            }, configKey),\\n            col_type: 'flex_button'\\n        })\\n    }\\n    d.push({\\n        col_type: 'blank_block'\\n    })\\n    d.push({\\n        title: '➕',\\n        col_type: 'flex_button',\\n        url: 'hiker://page/setting-editor?view=homePageModeEditPage'\\n    });\\n    d.push({\\n        title: '➖',\\n        col_type: 'flex_button',\\n        url: $(Object.keys(homePageConfigs).filter(configKey => configKey !== 'use' && configKey !== '默认'), 2).select(() => {\\n                if (input === '默认') return 'toast://默认配置无法删除！'\\n                let config = JSON.parse(request(getMyVar('qdb_config')))\\n                if (input === config.homePageConfigs.use) return 'toast://该配置正在使用，无法删除！'\\n                return $('确认删除\\\"' + input + '\\\"？').confirm((config) => {\\n                    delete config.homePageConfigs[configKey]\\n                    writeFile(getMyVar('qdb_config'), JSON.stringify(config))\\n                    refreshPage(false);\\n                    return 'toast://删除' + configKey + '成功'\\n                }, config)\\n            }),\\n    })\\n    d.push({\\n        title: '📝',\\n        col_type: 'flex_button',\\n        url: $(Object.keys(homePageConfigs).filter(configKey => configKey !== 'use'), 2).select(() => {\\n            // if (input === '默认') return 'toast://默认配置无法编辑！'\\n            let config = JSON.parse(request(getMyVar('qdb_config')));\\n            let configKey = input;\\n            putMyVar(\\\"input_name\\\", configKey);\\n            putMyVar(\\\"input_code\\\", config.homePageConfigs[configKey].config);\\n            return 'hiker://page/setting-editor?rule=青豆&view=homePageModeEditPage';\\n        })\\n    })\\n    d.push({\\n        title: '📥',\\n        col_type: 'flex_button',\\n        url: $(\\\"\\\", \\\"请输入口令\\\").input(() => {\\n            if (!input.includes(\\\"首页配置\\\")) return \\\"toast://该口令不是首页配置\\\";\\n            eval(JSON.parse(request('hiker://page/utils')).rule)\\n            let importConfigs = ConfigTool.import(input);\\n            if (!importConfigs) return \\\"toast://似乎出了错，请尝试再次导入～\\\";\\n            putMyVar(\\\"input_name\\\", importConfigs.name);\\n            putMyVar(\\\"input_code\\\", importConfigs.data.config);\\n            return 'hiker://page/setting-editor?rule=青豆&view=homePageModeEditPage';\\n        })\\n    })\\n    d.push({\\n        title: '📤',\\n        col_type: 'flex_button',\\n        url: $(Object.keys(homePageConfigs).filter(configKey => configKey !== 'use'), 2).select(() => {\\n            // if (input === '默认') return 'toast://默认配置无法编辑！'\\n            eval(JSON.parse(request('hiker://page/utils')).rule)\\n            let config = getConfig();\\n            let selectConfig = {\\n                name: input,\\n                data: config.homePageConfigs[input]\\n            }\\n            return $(ConfigTool.encTypeList, 2).select((selectConfig) => {\\n                eval(JSON.parse(request('hiker://page/utils')).rule)\\n                return ConfigTool.toClipboard(ConfigTool.export(selectConfig.name, selectConfig, \\\"首页配置\\\", input))\\n            }, selectConfig)\\n        })\\n    })\\n}\\n\\n// 解析配置模块\\nfunction analysisModeModule(d, analysisConfigs) {\\n    d.push({\\n        title: '自定义解析插件'.bold(),\\n        col_type: \\\"rich_text\\\"\\n    })\\n    for (let configKey of Object.keys(analysisConfigs)) {\\n        if (configKey === 'use') continue;\\n        d.push({\\n            title: configKey === analysisConfigs.use ? \\\"““\\\" + configKey + \\\"””\\\" : configKey,\\n            url: $(\\\"hiker://empty#noLoading#\\\").lazyRule(configKey => {\\n                let config = JSON.parse(request(getMyVar('qdb_config')))\\n                if (config.analysisConfigs.use === configKey) {\\n                    //putMyVar(\\\"input_config_type\\\", '解析插件配置')\\n                    putMyVar(\\\"input_name\\\", configKey);\\n                    putMyVar(\\\"input_code\\\", config.analysisConfigs[configKey].config);\\n                    putMyVar(\\\"input_extra\\\", config.analysisConfigs[configKey].extra || \\\"\\\");\\n                    putMyVar(\\\"input_setting_code\\\", config.analysisConfigs[configKey].setting || \\\"\\\");\\n                    return 'hiker://page/setting-editor?rule=青豆&view=analysisModeEditPage';\\n                }\\n                config.analysisConfigs.use = configKey\\n                writeFile(getMyVar('qdb_config'), JSON.stringify(config))\\n                refreshPage(false);\\n                return 'toast://切换成功'\\n            }, configKey),\\n            col_type: 'flex_button'\\n        })\\n    }\\n    d.push({\\n        col_type: 'blank_block'\\n    })\\n    d.push({\\n        title: '➕',\\n        col_type: 'flex_button',\\n        url: 'hiker://page/setting-editor?rule=青豆&view=analysisModeEditPage'\\n    });\\n    d.push({\\n        title: '➖',\\n        col_type: 'flex_button',\\n        url: $(Object.keys(analysisConfigs).filter(configKey => configKey !== 'use' && configKey !== '不解析' && configKey !== '断插'), 2)\\n            .select(() => {\\n                if (input === '不解析' && input === '断插') return 'toast://默认解析无法删除！'\\n                let config = JSON.parse(request(getMyVar('qdb_config')))\\n                if (input === config.analysisConfigs.use) return 'toast://该解析正在使用，无法删除！'\\n                return $('确认删除\\\"' + input + '\\\"？').confirm((config, configKey) => {\\n                    delete config.analysisConfigs[configKey]\\n                    writeFile(getMyVar('qdb_config'), JSON.stringify(config))\\n                    refreshPage(false);\\n                    return 'toast://删除' + configKey + '成功'\\n                }, config, input)\\n            })\\n    })\\n    d.push({\\n        title: '📝',\\n        col_type: 'flex_button',\\n        url: $(Object.keys(analysisConfigs).filter(configKey => configKey !== 'use'), 2)\\n            .select(() => {\\n                // if (input === '不解析' && input === '断插') return 'toast://默认解析无法编辑！'\\n                let config = JSON.parse(request(getMyVar('qdb_config')));\\n                let configKey = input;\\n                putMyVar(\\\"input_name\\\", configKey);\\n                putMyVar(\\\"input_code\\\", config.analysisConfigs[configKey].config);\\n                putMyVar(\\\"input_extra\\\", config.analysisConfigs[configKey].extra || \\\"\\\");\\n                putMyVar(\\\"input_setting_code\\\", config.analysisConfigs[configKey].setting || \\\"\\\");\\n                return 'hiker://page/setting-editor?rule=青豆&view=analysisModeEditPage';\\n            })\\n    })\\n    d.push({\\n        title: '📥',\\n        col_type: 'flex_button',\\n        url: $(\\\"\\\", \\\"请输入口令\\\").input(() => {\\n            if (!input.includes(\\\"解析插件配置\\\")) return \\\"toast://该口令不是解析插件配置\\\";\\n            eval(JSON.parse(request('hiker://page/utils')).rule)\\n            let importConfigs = ConfigTool.import(input);\\n            if (!importConfigs) return \\\"toast://似乎出了错，请尝试再次导入～\\\";\\n            putMyVar(\\\"input_name\\\", importConfigs.name);\\n            putMyVar(\\\"input_code\\\", importConfigs.data.config);\\n            putMyVar(\\\"input_extra\\\", importConfigs.data.extra || \\\"\\\");\\n            putMyVar(\\\"input_setting_code\\\", importConfigs.data.setting || \\\"\\\");\\n            return 'hiker://page/setting-editor?rule=青豆&view=analysisModeEditPage';\\n        })\\n    })\\n    d.push({\\n        title: '📤',\\n        col_type: 'flex_button',\\n        url: $(Object.keys(analysisConfigs).filter(configKey => configKey !== 'use'), 2).select(() => {\\n            // if (input === '默认') return 'toast://默认配置无法编辑！'\\n            eval(JSON.parse(request('hiker://page/utils')).rule)\\n            let config = getConfig();\\n            let selectConfig = {\\n                name: input,\\n                data: config.analysisConfigs[input]\\n            }\\n            return $(ConfigTool.encTypeList, 2).select((selectConfig) => {\\n                eval(JSON.parse(request('hiker://page/utils')).rule)\\n                return ConfigTool.toClipboard(ConfigTool.export(selectConfig.name, selectConfig, \\\"解析插件配置\\\", input))\\n            }, selectConfig)\\n        })\\n    })\\n}\\n\\n// 解析设置模块\\nfunction analysisSettingModule(d) {\\n    let analysisConfigs = getConfig('analysisConfigs');\\n    analysisModeModule(d, analysisConfigs);\\n    /**\\n     * 这下面的都是拿设置页面的配置出来 eval 执行，最终获得插件设置页面的 url，这个 url 可以是网页也可以是二级界面\\n     */\\n    let analysisSetting = analysisConfigs[analysisConfigs.use].setting;\\n    let result = \\\"toast://该插件无设置页面\\\";\\n    if (analysisSetting) {\\n        try {\\n            if (analysisSetting.indexOf('return') == -1) throw new Error('必须 return @rule=js: 或 $().rule');\\n            if (analysisSetting.startsWith(\\\"(\\\")) {\\n                eval('result = ' + analysisSetting);\\n            } else {\\n                eval('result = ' + '(() => {' + analysisSetting + '})()');\\n            }\\n        } catch (e) {\\n            log(e.message);\\n            result = \\\"toast://错误的设置页面代码,请前往 日志 查看错误原因\\\"\\n        }\\n    }\\n    d.push({\\n        title: '⚙️',\\n        col_type: 'flex_button',\\n        url: result\\n    })\\n}\\n\\n//自定义快速搜索模块\\nfunction quickSearchDIYModule(d, config) {\\n    let quickSearchConfigs = getConfig('quickSearchConfigs', config);\\n    d.push({\\n        title: '自定义快速搜索'.bold(),\\n        col_type: \\\"rich_text\\\"\\n    })\\n    for (let configKey of quickSearchConfigs.order) {\\n        d.push({\\n            title: configKey,\\n            url: $('➕是添加\\\\n➖是删除\\\\n📝是修改\\\\n🔁是排序\\\\n⚙️是设置样式').confirm(() => {\\n                return 'toast://下次不要再点我了'\\n            }),\\n            col_type: 'flex_button'\\n        })\\n    }\\n    d.push({\\n        col_type: 'blank_block'\\n    })\\n    d.push({\\n        title: '➕️',\\n        col_type: 'flex_button',\\n        url: $('显示名@@小程序名@@图片链接', '根据提示输入就好了\\\\n小程序名为空则为海阔搜索').input(() => {\\n            let config = JSON.parse(fetch(getMyVar('qdb_config')));\\n            input = input.split('@@');\\n            if (input.length != 3 || input[0] === \\\"\\\") return \\\"toast://格式不对，按格式输入!\\\";\\n            if (config.quickSearchConfigs.order.indexOf(input[0]) == -1) config.quickSearchConfigs.order.push(input[0]);\\n            config.quickSearchConfigs[input[0]] = {\\n                name: input[1],\\n                pic: input[2]\\n            };\\n            writeFile(getMyVar('qdb_config'), JSON.stringify(config));\\n            refreshPage(false);\\n            return 'toast://添加成功';\\n        })\\n    });\\n    d.push({\\n        title: '➖',\\n        col_type: 'flex_button',\\n        url: $(quickSearchConfigs.order, 2).select(() => {\\n            let config = JSON.parse(request(getMyVar('qdb_config')))\\n            return $('确认删除\\\"' + input + '\\\"？').confirm((config, configKey) => {\\n                let index = config.quickSearchConfigs.order.indexOf(configKey);\\n                config.quickSearchConfigs.order.splice(index, 1);\\n                delete config.quickSearchConfigs[configKey]\\n                writeFile(getMyVar('qdb_config'), JSON.stringify(config))\\n                refreshPage(false);\\n                return 'toast://删除' + configKey + '成功'\\n            }, config, input)\\n        })\\n    })\\n    d.push({\\n        title: '📝',\\n        col_type: 'flex_button',\\n        url: $(quickSearchConfigs.order, 2).select(() => {\\n            let config = JSON.parse(request(getMyVar('qdb_config')));\\n            let quickSearchConfigs = config.quickSearchConfigs;\\n            let dtext = input + '@@' + quickSearchConfigs[input].name + '@@' + quickSearchConfigs[input].pic;\\n            return $(dtext, '请修改').input((config, raw) => {\\n                input = input.split('@@');\\n                if (raw != input[0]) {\\n                    let index = config.quickSearchConfigs.order.indexOf(raw);\\n                    config.quickSearchConfigs.order[index] = input[0];\\n                    delete config.quickSearchConfigs[raw];\\n                }\\n                if (config.quickSearchConfigs.order.indexOf(input[0]) == -1) config.quickSearchConfigs.order.push(input[0]);\\n                config.quickSearchConfigs[input[0]] = {\\n                    name: input[1],\\n                    pic: input[2]\\n                };\\n                writeFile(getMyVar('qdb_config'), JSON.stringify(config));\\n                refreshPage(false);\\n                return 'toast://修改成功';\\n            }, config, input)\\n        })\\n    })\\n    d.push({\\n        title: '🔁',\\n        col_type: 'flex_button',\\n        url: $('hiker://empty#noHistory#').rule(() => {\\n            addListener('onClose', $.toString(() => {\\n                clearMyVar('json');\\n                clearMyVar('op');\\n            }))\\n            if (getMyVar('json') == \\\"\\\") {\\n                let config = JSON.parse(request(getMyVar('qdb_config')));\\n                let quickSearchConfigs = config.quickSearchConfigs;\\n                putMyVar('json', JSON.stringify(quickSearchConfigs));\\n            }\\n\\n            let old = JSON.parse(getMyVar('json'));\\n            let d = [];\\n            d.push({\\n                title: '分别点击两项以交换顺序\\\\n‘‘排序完毕后点我保存排序,否则排序不生效’’',\\n                col_type: 'text_center_1',\\n                url: $('#noLoading#').lazyRule(() => {\\n                    let config = JSON.parse(fetch(getMyVar('qdb_config')));\\n                    config.quickSearchConfigs = JSON.parse(getMyVar('json'));\\n                    writeFile(getMyVar('qdb_config'), JSON.stringify(config));\\n                    back(true);\\n                    return 'toast://修改成功'\\n                })\\n            })\\n            old.order.forEach((value, index) => {\\n                d.push({\\n                    title: getMyVar('op') == value ? value + '‘‘(当前选中)’’' : value,\\n                    col_type: 'text_1',\\n                    url: $().lazyRule((key, index) => {\\n                        let op = getMyVar('op');\\n                        if (op == '') {\\n                            putMyVar('op', key);\\n                            refreshPage();\\n                            return 'hiker://empty'\\n                        } else if (op == key) {\\n                            clearMyVar('op');\\n                            refreshPage();\\n                            return 'hiker://empty'\\n                        } else {\\n                            let old = JSON.parse(getMyVar('json'));\\n                            let newa = {\\n                                mode: old.mode,\\n                                order: old.order\\n                            };\\n                            let opindex = newa.order.indexOf(op);\\n                            if (Math.abs(opindex - index) == 1) {\\n                                newa.order[opindex] = key;\\n                                newa.order[index] = op;\\n                            } else if (opindex > index) {\\n                                newa.order.splice(opindex, 1);\\n                                newa.order.splice(index, 0, op);\\n                            } else {\\n                                newa.order.splice(opindex, 1);\\n                                newa.order.splice(index - 1, 0, op);\\n                            }\\n                            newa.order.forEach(value => newa[value] = old[value])\\n                            putMyVar('json', JSON.stringify(newa));\\n                            clearMyVar('op');\\n                            refreshPage();\\n                            return 'hiker://empty'\\n                        }\\n                    }, value, index)\\n                })\\n            })\\n            setResult(d);\\n        })\\n    })\\n    d.push({\\n        title: '⚙️',\\n        col_type: 'flex_button',\\n        url: $(quickSearchConfigs['mode'] || \\\"\\\", '请正确输入组件样式\\\\n建议值:flex_button scroll_button icon_round_small_4 icon_small_4').input(() => {\\n            let config = JSON.parse(request(getMyVar('qdb_config')));\\n            config.quickSearchConfigs.mode = input;\\n            writeFile(getMyVar('qdb_config'), JSON.stringify(config));\\n            refreshPage(false);\\n            return 'toast://样式修改成功'\\n        })\\n    })\\n}\\n\\n//设置页面\\nfunction settingPage() {\\n    let conf = getConfig();\\n    let d = [];\\n\\n    let starColor = conf.starColor || '#ffac2d';\\n    d.push({\\n        title: '““””' + '自定义星星颜色'.bold(),\\n        desc: '““””<font color=' + starColor + '>' + '★★★★★</font>',\\n        col_type: 'text_1',\\n        url: $(starColor, '别忘了#').input(() => {\\n            let config = JSON.parse(fetch(getMyVar('qdb_config')));\\n            config.starColor = input;\\n            writeFile(getMyVar('qdb_config'), JSON.stringify(config));\\n            refreshPage();\\n            return \\\"toast://设置更改已保存\\\";\\n        })\\n    })\\n    let chooseColor = conf.chooseColor || '#FA7298';\\n    d.push({\\n        title: '““””' + '自定义选中标签颜色'.bold(),\\n        desc: '““””<font color=' + chooseColor + '>' + '我是预览效果</font>',\\n        col_type: 'text_1',\\n        url: $(chooseColor, '别忘了#').input(() => {\\n            let config = JSON.parse(fetch(getMyVar('qdb_config')));\\n            config.chooseColor = input;\\n            writeFile(getMyVar('qdb_config'), JSON.stringify(config));\\n            refreshPage();\\n            return \\\"toast://设置更改已保存\\\";\\n        })\\n    })\\n\\n    homePageSettingModule(d);\\n    d.push({\\n        col_type: 'line'\\n    })\\n\\n    quickSearchDIYModule(d, conf);\\n    d.push({\\n        col_type: 'line'\\n    })\\n\\n    detailViewSettingModule(d);\\n    d.push({\\n        col_type: 'line'\\n    })\\n\\n    if (true /*getItem('password') == 'true'*/ ) {\\n        analysisSettingModule(d);\\n        d.push({\\n            col_type: 'line'\\n        })\\n    }\\n\\n    d.push({\\n        title: '““””' + '恢复默认设置'.bold(),\\n        desc: '重生',\\n        col_type: 'text_1',\\n        url: $(['重置星星颜色', '重置选中标签颜色', '重置快速搜索', '重置首页为默认', '重置详情页', '清除全部设置'], 1).select(() => {\\n            return $(\\\"确定要\\\" + input + \\\"？\\\").confirm((sel) => {\\n                let item = '';\\n                switch (sel) {\\n                    case '重置星星颜色':\\n                        item = 'starColor';\\n                        break;\\n                    case '重置选中标签颜色':\\n                        item = 'chooseColor';\\n                        break;\\n                    case '重置快速搜索':\\n                        item = 'quickSearchConfigs';\\n                        break;\\n                    case '重置首页为默认':\\n                        item = 'homePageConfigs';\\n                        break;\\n                    case '重置详情页':\\n                        item = 'detailViewConfigs';\\n                        break;\\n                    case '清除全部设置':\\n                        item = 'all';\\n                        break;\\n                }\\n                // eval(JSON.parse(request('hiker://page/settingPage')).rule);\\n                let defaultConfigs = $.require(\\\"hiker://page/defaultConfigs\\\");\\n                if (item == 'all') {\\n                    writeFile(getMyVar('qdb_config'), JSON.stringify(defaultConfigs));\\n                    refreshPage();\\n                    return \\\"toast://已\\\" + sel;\\n                } else if (item == \\\"homePageConfigs\\\") {\\n                    let config = JSON.parse(fetch(getMyVar('qdb_config')));\\n                    config[item][\\\"默认\\\"] = defaultConfigs[item][\\\"默认\\\"];\\n                    config[item].use = \\\"默认\\\";\\n                    writeFile(getMyVar('qdb_config'), JSON.stringify(config));\\n                    refreshPage();\\n                    return \\\"toast://已\\\" + sel;\\n                } else {\\n                    let config = JSON.parse(fetch(getMyVar('qdb_config')));\\n                    config[item] = defaultConfigs[item];\\n                    writeFile(getMyVar('qdb_config'), JSON.stringify(config));\\n                    refreshPage();\\n                    return \\\"toast://已\\\" + sel;\\n                }\\n            }, input)\\n        })\\n    })\\n    setResult(d);\\n}\\n\\nlet view = getParam(\\\"view\\\", \\\"\\\");\\nif (view == \\\"\\\") {\\n    setPageTitle(\\\"设置\\\")\\n    settingPage();\\n} else if (view == \\\"analysisSettingModule\\\") {\\n    let d = [];\\n    setPageTitle(\\\"解析设置\\\")\\n    analysisSettingModule(d);\\n    setResult(d);\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"默认配置\",\"path\":\"defaultConfigs\",\"rule\":\"js:\\r\\nlet defaultConfigs = {\\r\\n    starColor: \\\"#ffac2d\\\",\\r\\n    chooseColor: \\\"#FA7298\\\",\\r\\n    quickSearchConfigs: {\\r\\n        mode: \\\"scroll_button\\\",\\r\\n        order: [\\\"海阔搜索\\\"],\\r\\n        \\\"海阔搜索\\\": {\\r\\n            name: \\\"\\\",\\r\\n            pic: \\\"\\\"\\r\\n        }\\r\\n    },\\r\\n    detailsViewConfigs: {\\r\\n        use: \\\"默认\\\",\\r\\n        \\\"默认\\\": {\\r\\n            config: \\\"eval(JSON.parse(request('hiker://page/main')).rule);detailsView(type, id);\\\"\\r\\n        }\\r\\n    },\\r\\n    homePageConfigs:{\\r\\n        use: \\\"默认\\\",\\r\\n        \\\"默认\\\": {\\r\\n            config: `let d = [];\\r\\nd.push({\\r\\n    title: '',\\r\\n    img: 'https://gitcode.net/qq_41846756/hiker/-/raw/master/img/豆瓣.png',\\r\\n    desc: '0',\\r\\n    col_type: 'card_pic_1',\\r\\n    url: 'hiker://page/settingPage'\\r\\n})\\r\\n\\r\\nlet s = [\\\"推荐\\\", \\\"热门\\\", \\\"分类\\\", \\\"片单\\\", \\\"榜单\\\", \\\"将上映\\\"];\\r\\nlet img = \\\"https://gitcode.net/qq_41846756/hiker/-/raw/master/img/\\\";\\r\\nfor (let i in s) {\\r\\n    d.push({\\r\\n        title: s[i],\\r\\n        img: img + s[i] + '.jpg',\\r\\n        col_type: 'icon_2',\\r\\n        url: \\\"hiker://empty\\\" + '$page{fypage}/#/' + s[i] + \\\"#noHistory#\\\"\\r\\n    })\\r\\n}\\r\\nreturn d;`\\r\\n        }\\r\\n    },\\r\\n    analysisConfigs: {\\r\\n        use: \\\"不解析\\\",\\r\\n        \\\"不解析\\\": {\\r\\n            config: $.toString(() => {\\r\\n                return input;\\r\\n            }),\\r\\n            setting: $.toString(() => {\\r\\n                return \\\"toast://该插件无设置页面\\\";\\r\\n            })\\r\\n        },\\r\\n        \\\"断插\\\": {\\r\\n            config: $.toString(() => {\\r\\n                let file = \\\"hiker://files/rules/DuanNian/MyParse.json\\\";\\r\\n                let oldfile = \\\"hiker://files/cache/MyParseSet.json\\\";\\r\\n                if (fileExist(file)) {\\r\\n                    eval('json=' + fetch(file));\\r\\n                    let jsUrl = json.settings.cj;\\r\\n                    eval(fetch(jsUrl));\\r\\n                    return aytmParse(input);\\r\\n                } else if (fileExist(oldfile)) {\\r\\n                    let jsUrl = JSON.parse(fetch(oldfile)).cj;\\r\\n                    eval(fetch(jsUrl));\\r\\n                    return aytmParse(input);\\r\\n                } else {\\r\\n                    return 'toast://没找到断插配置文件';\\r\\n                }\\r\\n            }),\\r\\n            setting: $.toString(() => {\\r\\n                let file = \\\"hiker://files/rules/DuanNian/MyParse.json\\\";\\r\\n                let oldfile = \\\"hiker://files/cache/MyParseSet.json\\\";\\r\\n                if (fileExist(file)) {\\r\\n                    eval('json=' + fetch(file));\\r\\n                    let jsUrl = json.settings.cj;\\r\\n                    eval(fetch(jsUrl));\\r\\n                    return setUrl;\\r\\n                } else if (fileExist(oldfile)) {\\r\\n                    let jsUrl = JSON.parse(fetch(oldfile)).cj;\\r\\n                    eval(fetch(jsUrl));\\r\\n                    return setUrl;\\r\\n                } else {\\r\\n                    return \\\"hiker://page/Route?rule=MyFieldᴰⁿ&type=设置\\\";\\r\\n                }\\r\\n            })\\r\\n        }\\r\\n    }\\r\\n}\\r\\n$.exports = defaultConfigs;\"},{\"col_type\":\"movie_3\",\"name\":\"工具集\",\"path\":\"utils\",\"rule\":\"js:\\r\\n//初始化配置,name为配置项名称\\r\\nfunction initConfigs(name, config) {\\r\\n    if (!config) {\\r\\n        config = JSON.parse(fetch(getMyVar('qdb_config')));\\r\\n    }\\r\\n    if (config[name] == null) {\\r\\n        let defaultConfigs = $.require(\\\"hiker://page/defaultConfigs\\\");\\r\\n        config[name] = defaultConfigs[name] ? defaultConfigs[name] : {};\\r\\n        writeFile(getMyVar('qdb_config'), JSON.stringify(config));\\r\\n    }\\r\\n    return config;\\r\\n}\\r\\n\\r\\n//获取配置项\\r\\nfunction getConfig(name, rootConfig) {\\r\\n    let config = rootConfig ? rootConfig : JSON.parse(fetch(getMyVar('qdb_config')));\\r\\n    if (name) {\\r\\n        if (config[name] == null) {\\r\\n            config = initConfigs(name, config);\\r\\n        }\\r\\n        return config[name];\\r\\n    } else {\\r\\n        return config;\\r\\n    }\\r\\n}\\r\\n\\r\\n//编码工具类\\r\\nlet ZipTool = {\\r\\n    dependence: 'https://unpkg.com/lz-string@1.4.4/libs/lz-string.min.js',\\r\\n    compress: {\\r\\n        size: {\\r\\n            key: \\\"text-compress-size\\\",\\r\\n            set: (newValue) => {\\r\\n                putMyVar(this.key, newValue.toString())\\r\\n            },\\r\\n            get: () => {\\r\\n                return parseInt(getMyVar(this.key, \\\"0\\\"))\\r\\n            }\\r\\n        },\\r\\n        exec: (input) => {\\r\\n            eval(request(ZipTool.dependence))\\r\\n            let result = LZString.compressToEncodedURIComponent(input)\\r\\n                // ZipTool.compress.size.set(result.length * 2)\\r\\n            return result\\r\\n        }\\r\\n    },\\r\\n    decompress: {\\r\\n        size: {\\r\\n            get: () => {\\r\\n                return getMyVar(\\\"text-decompress\\\", \\\"0\\\")\\r\\n                    .length\\r\\n            }\\r\\n        },\\r\\n        exec: (input) => {\\r\\n            eval(request(ZipTool.dependence))\\r\\n            let result = LZString.decompressFromEncodedURIComponent(input)\\r\\n            return result\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\n// 配置项工具类\\r\\nlet ConfigTool = {\\r\\n    encTypeList: ['Base64', 'Zipper'].concat(getPastes()),\\r\\n    toClipboard: (configCommand, name) => {\\r\\n        if (configCommand.startsWith('toast://')) return configCommand\\r\\n        if (!name) {\\r\\n            let commandSplits = configCommand.split(\\\"￥\\\")\\r\\n            name = commandSplits[2]\\r\\n            name = name ? (\\\"“\\\" + name + \\\"”\\\") : ''\\r\\n        }\\r\\n        refreshPage(false);\\r\\n        return \\\"copy://\\\" + configCommand + \\\".js:'toast://导出\\\" + name + \\\"成功！'\\\";\\r\\n    },\\r\\n    export: (name, config, remark, encType) => {\\r\\n        let symbol = \\\"青豆口令￥\\\" + remark + \\\"￥\\\" + name + \\\"￥\\\" + encType + \\\"￥\\\";\\r\\n        let result = config\\r\\n        if (typeof result === \\\"object\\\") {\\r\\n            result = JSON.stringify(config);\\r\\n        } else if (typeof result === \\\"string\\\") {\\r\\n            result = config;\\r\\n        } else {\\r\\n            throw \\\"导出数据不合法\\\"\\r\\n        }\\r\\n        switch (encType) {\\r\\n            case 'Base64':\\r\\n                result = base64Encode(result);\\r\\n                break;\\r\\n            case 'Zipper':\\r\\n                result = ZipTool.compress.exec(result)\\r\\n                break;\\r\\n            default :\\r\\n                if (getAppVersion() > 2070) {\\r\\n                    symbol = \\\"青豆口令￥\\\" + remark + \\\"￥\\\" + name\\r\\n                    result = sharePaste(ConfigTool.export(name, config, remark, 'Zipper'),encType);\\r\\n                    return result + '\\\\n\\\\n' + symbol\\r\\n                } else {\\r\\n                    return 'toast://请更新视界版本至 C2070 以上'\\r\\n                }\\r\\n                break;\\r\\n        }\\r\\n        result = symbol + result\\r\\n        return result;\\r\\n    },\\r\\n    import: (configCommand) => {\\r\\n        let result = ''\\r\\n        if (configCommand.startsWith('云')) {\\r\\n            if (getAppVersion() > 2070) {\\r\\n                result = configCommand.split('青豆')[0].replace(/\\\\\\\\n/, '')\\r\\n                configCommand = parsePaste(result)\\r\\n            } else {\\r\\n                return 'toast://请更新视界版本至 C2070 以上'\\r\\n            }\\r\\n        }\\r\\n        try {\\r\\n            let resultSplits = configCommand.split(\\\"￥\\\")\\r\\n            let encType = resultSplits[3]\\r\\n            result = resultSplits[4]\\r\\n            switch (encType) {\\r\\n                case 'Base64':\\r\\n                    result = base64Decode(result);\\r\\n                    break;\\r\\n                case 'Zipper':\\r\\n                    result = ZipTool.decompress.exec(result)\\r\\n                    break;\\r\\n            }\\r\\n            result = JSON.parse(result);\\r\\n        } catch (e) {\\r\\n            log(e.message)\\r\\n            throw \\\"导入数据不合法\\\"\\r\\n        }\\r\\n        return result;\\r\\n    }\\r\\n}\"}]","proxy":"","icon":"https://hikerfans.com/tubiao/more/89.png"},{"last_chapter_rule":"","pageList":[{"col_type":"movie_3","name":"依赖文件","path":"config","rule":"js:\nlet method;\nlet rely;\nlet cfgfile = \"hiker://files/rules/Src/Ju/config.json\";\nif (fileExist(cfgfile)) {\n    eval(\"let Juconfig=\" + fetch(cfgfile) + \";\");\n    method = Juconfig[\"依赖\"].match(/http(s)?:\\/\\/.*\\//)[0] + 'SrcJuMethod.js';\n    rely = Juconfig[\"依赖\"];\n}\n$.exports.method = method;\n$.exports.rely = rely;\n$.exports.version = 15;"},{"col_type":"movie_3","name":"接口代码","path":"jiekou","rule":"js:\nlet method;\nlet cfgfile = \"hiker://files/rules/Src/Ju/config.json\";\nif (fileExist(cfgfile)) {\n    eval(\"let Juconfig=\" + fetch(cfgfile) + \";\");\n    method = Juconfig[\"依赖\"].match(/http(s)?:\\/\\/.*\\//)[0] + 'SrcJuMethod2.js';\n}\nrequire(method);"},{"col_type":"movie_3","name":"云口令导入","path":"import","rule":"js:\nfunction cloudimport(title) {\n    let remotefile;\n    let cfgfile = \"hiker://files/rules/Src/Ju/config.json\";\n    if (!fileExist(cfgfile)) {\n        let JYCode = fetch(\"hiker://home@\"+title);\n        eval(JSON.parse(JYCode).preRule);\n    }\n    try{\n        eval(\"let Juconfig=\" + fetch(cfgfile) + \";\");\n        remotefile = Juconfig[\"依赖\"].match(/http(s)?:\\/\\/.*\\//)[0] + 'SrcJuSet.js';\n    }catch(e){}\n    \n    if(remotefile){\n        require(remotefile);\n        return JYimport(input,title);\n    }else{\n        return \"toast://依赖获取异常，需先打开聚阅√\";\n    }\n}\n$.exports = cloudimport(\"聚阅√\");"},{"col_type":"movie_3","name":"搜索页","path":"sousuopage","rule":"js:\nlet relyfile = $.require(\"hiker://page/config?rule=\"+MY_RULE.title).rely;\nrequire(relyfile);\nlet name = getParam(\"keyword\");\nlet type = getParam(\"type\");\nnewsousuopage(name,type,relyfile);"},{"col_type":"movie_3","name":"导入确认页","path":"importConfirm","rule":"js:\nlet rely = $.require(\"hiker://page/config?rule=\"+MY_RULE.title).rely;\n\nrequire(rely.match(/http(s)?:\\/\\/.*\\//)[0] + 'SrcJuSet.js');\nimportConfirm(MY_RULE.title);"}],"title":"聚阅√","author":"","version":15,"type":"read","url":"hiker://empty##fypage","col_type":"movie_3","class_name":"","class_url":"","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:\nrequire(config.依赖);\nyiji()","searchFind":"js:\nrequire(config.依赖);\nsousuo()","search_url":"hiker://empty##**##fypage","group":"①推荐","detail_col_type":"movie_3","detail_find_rule":"js:\nrequire(config.依赖);\nerji();","sdetail_col_type":"movie_1","sdetail_find_rule":"*","ua":"pc","preRule":"if (!config.依赖) {\n    //远程依赖索引文件代理地址列表\n    let requirelist = [{ url: 'https://ghproxy.net/https://raw.githubusercontent.com/', sort: 0 },  { url: 'https://raw.githubusercontent.com/', sort: 10 },  { url: 'https://github.jevons.vip/https://raw.githubusercontent.com/', sort: 20 }]\n    let requirefile = \"hiker://files/rules/Src/require.json\";\n    if (fetch(requirefile)) {\n        try {\n            eval(\"requirelist=\" + fetch(requirefile) + \";\");\n        } catch (e) { }\n    }\n    requirelist.sort(function (x, y) {\n        return x.sort-y.sort;\n    });\n    for (let i = 0; i < requirelist.length; i++) {\n        try { //远程依赖索引\n            require(requirelist[i].url + 'src48597962/hk/Ju/require.js', { timeout: 2000 });\n            if (relyfile) {\n                break;\n            }\n        } catch (e) {\n            requirelist[i].sort++;\n            log(e.message);\n        }\n    }\n    writeFile(requirefile, JSON.stringify(requirelist));\n    initConfig({\n        依赖: relyfile\n    });\n    let cfgfile = \"hiker://files/rules/Src/Ju/config.json\";\n    let Juconfig = {};\n    if (fetch(cfgfile)) {\n        try {\n            eval(\"Juconfig=\" + fetch(cfgfile) + \";\");\n        } catch (e) { }\n    }\n    Juconfig[\"依赖\"] = relyfile;\n    writeFile(cfgfile, JSON.stringify(Juconfig));\n}\n//by.帅√`人才","pages":"[{\"col_type\":\"movie_3\",\"name\":\"依赖文件\",\"path\":\"config\",\"rule\":\"js:\\nlet method;\\nlet rely;\\nlet cfgfile = \\\"hiker://files/rules/Src/Ju/config.json\\\";\\nif (fileExist(cfgfile)) {\\n    eval(\\\"let Juconfig=\\\" + fetch(cfgfile) + \\\";\\\");\\n    method = Juconfig[\\\"依赖\\\"].match(/http(s)?:\\\\/\\\\/.*\\\\//)[0] + 'SrcJuMethod.js';\\n    rely = Juconfig[\\\"依赖\\\"];\\n}\\n$.exports.method = method;\\n$.exports.rely = rely;\\n$.exports.version = 15;\"},{\"col_type\":\"movie_3\",\"name\":\"接口代码\",\"path\":\"jiekou\",\"rule\":\"js:\\nlet method;\\nlet cfgfile = \\\"hiker://files/rules/Src/Ju/config.json\\\";\\nif (fileExist(cfgfile)) {\\n    eval(\\\"let Juconfig=\\\" + fetch(cfgfile) + \\\";\\\");\\n    method = Juconfig[\\\"依赖\\\"].match(/http(s)?:\\\\/\\\\/.*\\\\//)[0] + 'SrcJuMethod2.js';\\n}\\nrequire(method);\"},{\"col_type\":\"movie_3\",\"name\":\"云口令导入\",\"path\":\"import\",\"rule\":\"js:\\nfunction cloudimport(title) {\\n    let remotefile;\\n    let cfgfile = \\\"hiker://files/rules/Src/Ju/config.json\\\";\\n    if (!fileExist(cfgfile)) {\\n        let JYCode = fetch(\\\"hiker://home@\\\"+title);\\n        eval(JSON.parse(JYCode).preRule);\\n    }\\n    try{\\n        eval(\\\"let Juconfig=\\\" + fetch(cfgfile) + \\\";\\\");\\n        remotefile = Juconfig[\\\"依赖\\\"].match(/http(s)?:\\\\/\\\\/.*\\\\//)[0] + 'SrcJuSet.js';\\n    }catch(e){}\\n    \\n    if(remotefile){\\n        require(remotefile);\\n        return JYimport(input,title);\\n    }else{\\n        return \\\"toast://依赖获取异常，需先打开聚阅√\\\";\\n    }\\n}\\n$.exports = cloudimport(\\\"聚阅√\\\");\"},{\"col_type\":\"movie_3\",\"name\":\"搜索页\",\"path\":\"sousuopage\",\"rule\":\"js:\\nlet relyfile = $.require(\\\"hiker://page/config?rule=\\\"+MY_RULE.title).rely;\\nrequire(relyfile);\\nlet name = getParam(\\\"keyword\\\");\\nlet type = getParam(\\\"type\\\");\\nnewsousuopage(name,type,relyfile);\"},{\"col_type\":\"movie_3\",\"name\":\"导入确认页\",\"path\":\"importConfirm\",\"rule\":\"js:\\nlet rely = $.require(\\\"hiker://page/config?rule=\\\"+MY_RULE.title).rely;\\n\\nrequire(rely.match(/http(s)?:\\\\/\\\\/.*\\\\//)[0] + 'SrcJuSet.js');\\nimportConfirm(MY_RULE.title);\"}]","proxy":"","icon":"https://s1.ax1x.com/2023/04/16/p99qbR0.png"},{"last_chapter_rule":"","pageList":[{"col_type":"movie_3","name":"导入口令","path":"import","rule":"evalPrivateJS(\"d4mn+GpLGKOpD7P5uBpKbWQJv85Hr98jh0RzlkMHm87n3uYyL94cyxtGUQBsWww3TFvfTvH+MK3KHqc6h6w6yHFccR+8iXECBwwzrNEJTVZSZzXY1TFxKUviFqvCoS4ezdjtwJDaBFYH5yDN2onV/2edk1IV2AMcRSNHLh0dztZ4bx2uM/hb16RmgUIQbLS3950KympTBqFoqRHFAiS2FfdHL4J8c2r1/Dl+m8lOt78qo+Iotlbvf8txv4jZNo8ldUtBvBG64KgbiqznnsFrALd4yQkumTuqKXiEGJhr0zaAnJKgoCRWw8pZiTQhjU6QMHOTAMQSfoGOtfUM1v4Lnjes2dmxFrYRy5VhZuM8BrBGyDuO5fujramgHjT76tscsLK4AMLyjwYcAtQ4ebn0jjmQSn45K59jaNXDPlwFN1iApDOtJEM+RM/s8owC/voXvfKukkrSSIVFz87sUD3c1XVbgLm09mDyyxajfF77j/3VjrpqUL/emS2Y35baQSPC\")"},{"col_type":"movie_3","name":"导入确认","path":"cfm","rule":"js:\nevalPrivateJS(\"/4EyZYvnWZvi2JiRLnfAnxocZQYtLtyFLY3q5zEWcE7cjpTl+Ux16+HZl756lHtEx3wTkwBmcUeTtSot+I3XhuyDbk0tOMGvUpxgZnMh0VJkmJcTLgmYTeH9eNYrqKqNvjePLG/m59TllpkTuz9ukw==\")"}],"title":"风影","author":"随风","version":240703,"type":"all","url":"hiker://empty##fypage","col_type":"movie_3","class_name":"","class_url":"","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:\n require(config.依赖);\n sy()","searchFind":"js:\n require(config.依赖);\n sou()","search_url":"hiker://empty##**","group":"①推荐","detail_col_type":"movie_1","detail_find_rule":"","sdetail_col_type":"movie_1","sdetail_find_rule":"*","ua":"mobile","preRule":"evalPrivateJS(\"sZhkjhEJlxowTti/AprFVJqNxwm/cDtNpg1vzgEGm8zQpZwBJrF5yo01d6D8+tprBRcMEh5pahpzpBIlXcaBC6R9YSDBE3LS4HXMKdHmY6zijTjZ4LwsKHhVrR6EQBwCdkhplSREOPeHu5orzEhVZLiZu5I6K/9XoUkomH5IskSaYVSDHXh0+dX0YvTa6SsNVOQApeBDq8KRBKYUHPAzRtsVe/11HXKMMHU9EyPy/P0=\")","pages":"[{\"col_type\":\"movie_3\",\"name\":\"导入口令\",\"path\":\"import\",\"rule\":\"evalPrivateJS(\\\"d4mn+GpLGKOpD7P5uBpKbWQJv85Hr98jh0RzlkMHm87n3uYyL94cyxtGUQBsWww3TFvfTvH+MK3KHqc6h6w6yHFccR+8iXECBwwzrNEJTVZSZzXY1TFxKUviFqvCoS4ezdjtwJDaBFYH5yDN2onV/2edk1IV2AMcRSNHLh0dztZ4bx2uM/hb16RmgUIQbLS3950KympTBqFoqRHFAiS2FfdHL4J8c2r1/Dl+m8lOt78qo+Iotlbvf8txv4jZNo8ldUtBvBG64KgbiqznnsFrALd4yQkumTuqKXiEGJhr0zaAnJKgoCRWw8pZiTQhjU6QMHOTAMQSfoGOtfUM1v4Lnjes2dmxFrYRy5VhZuM8BrBGyDuO5fujramgHjT76tscsLK4AMLyjwYcAtQ4ebn0jjmQSn45K59jaNXDPlwFN1iApDOtJEM+RM/s8owC/voXvfKukkrSSIVFz87sUD3c1XVbgLm09mDyyxajfF77j/3VjrpqUL/emS2Y35baQSPC\\\")\"},{\"col_type\":\"movie_3\",\"name\":\"导入确认\",\"path\":\"cfm\",\"rule\":\"js:\\nevalPrivateJS(\\\"/4EyZYvnWZvi2JiRLnfAnxocZQYtLtyFLY3q5zEWcE7cjpTl+Ux16+HZl756lHtEx3wTkwBmcUeTtSot+I3XhuyDbk0tOMGvUpxgZnMh0VJkmJcTLgmYTeH9eNYrqKqNvjePLG/m59TllpkTuz9ukw==\\\")\"}]","proxy":"","icon":"https://s1.ax1x.com/2022/10/15/xwTPdU.jpg"},{"last_chapter_rule":"","pageList":[{"col_type":"movie_3","name":"云口令导入","path":"cloudimport","rule":"function cloudimport() {\n    let remotefile;\n    let cfgfile = \"hiker://files/rules/Src/Juying/config.json\";\n    if (fileExist(cfgfile)) {\n        eval(\"let Juconfig=\" + fetch(cfgfile) + \";\");\n        remotefile = Juconfig[\"依赖\"].match(/http(s)?:\\/\\/.*\\//)[0] + 'SrcJySet.js';\n    }\n    if(remotefile){\n        require(remotefile);\n        return JYimport(input);\n    }else{\n        return \"toast://没有用过聚影√小程序？\";\n    }\n}\n$.exports = cloudimport();"},{"col_type":"movie_3","name":"依赖文件","path":"config","rule":"js:\n$.exports.version = 11;"}],"title":"聚影√","author":"","version":11,"type":"video","url":"hiker://empty##fypage","col_type":"movie_3","class_name":"","class_url":"","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:\nrequire(config.依赖);\nyiji()","searchFind":"js:require(config.依赖);\nsousuo()","search_url":"hiker://empty##**##fypage","group":"①推荐","detail_col_type":"movie_3","detail_find_rule":"js:require(config.依赖);\nerji()","sdetail_col_type":"movie_1","sdetail_find_rule":"*","ua":"pc","preRule":"if (!config.依赖) {\n    //远程依赖索引文件代理地址列表\n    let requirelist = [{ url: 'https://ghproxy.net/https://raw.githubusercontent.com/', sort: 0 }, { url: 'https://gh.con.sh/https://raw.githubusercontent.com/', sort: 0 }, { url: 'https://github.jevons.vip/https://raw.githubusercontent.com/', sort: 0 }]\n    let requirefile = \"hiker://files/rules/Src/require.json\";\n    if (fetch(requirefile)) {\n        try {\n            eval(\"requirelist=\" + fetch(requirefile) + \";\");\n        } catch (e) { }\n    }\n    requirelist.sort(function (x, y) {\n        if (x.sort < y.sort) {\n            return -1;\n        } else if (x.sort > y.sort) {\n            return 1;\n        } else {\n            return 0;\n        }\n    });\n    for (let i = 0; i < requirelist.length; i++) {\n        try { //远程依赖索引\n            require(requirelist[i].url + 'src48597962/hk/master/require.js', { timeout: 2000 });\n            if (relyfile) {\n                break;\n            }\n        } catch (e) {\n            requirelist[i].sort++;\n            log(e.message);\n        }\n    }\n    writeFile(requirefile, JSON.stringify(requirelist));\n    initConfig({\n        依赖: relyfile\n    });\n    let cfgfile = \"hiker://files/rules/Src/Juying/config.json\";\n    if (fileExist(cfgfile)) {\n        try {\n            eval(\"let Juconfig=\" + fetch(cfgfile) + \";\");\n            Juconfig[\"依赖\"] = relyfile;\n            writeFile(cfgfile, JSON.stringify(Juconfig));\n        } catch (e) { }\n    }\n}\n//by.帅√`人才 聚影模板！","pages":"[{\"col_type\":\"movie_3\",\"name\":\"云口令导入\",\"path\":\"cloudimport\",\"rule\":\"function cloudimport() {\\n    let remotefile;\\n    let cfgfile = \\\"hiker://files/rules/Src/Juying/config.json\\\";\\n    if (fileExist(cfgfile)) {\\n        eval(\\\"let Juconfig=\\\" + fetch(cfgfile) + \\\";\\\");\\n        remotefile = Juconfig[\\\"依赖\\\"].match(/http(s)?:\\\\/\\\\/.*\\\\//)[0] + 'SrcJySet.js';\\n    }\\n    if(remotefile){\\n        require(remotefile);\\n        return JYimport(input);\\n    }else{\\n        return \\\"toast://没有用过聚影√小程序？\\\";\\n    }\\n}\\n$.exports = cloudimport();\"},{\"col_type\":\"movie_3\",\"name\":\"依赖文件\",\"path\":\"config\",\"rule\":\"js:\\n$.exports.version = 11;\"}]","proxy":"","icon":"https://img.vinua.cn/images/QqyC.png"},{"last_chapter_rule":"","pageList":[{"col_type":"movie_3","name":"二级","path":"detail","rule":"js:\nlet d = [];\nlet s = [];\nlet Br = \"<br><br><br><br><br>\";\n$.require(\"public\").Loading(s, Br);\nsetPreResult(s);\n\nlet api = $.require(\"public\").Api;\nlet headers = $.require(\"public\").headers;\nlet uid = getItem(\"uid\", \"\");\nlet platform = getParam(\"platform\");\nlet roomid = getParam(\"roomId\");\n\nlet res = JSON.parse(request(api + \"getRoomInfo?uid=\" + uid + \"&platform=\" + platform + \"&roomId=\" + roomid, headers));\n\nif (platform == \"douyu\") {\n    var url = \"https://m.douyu.com/\" + roomid;\n} else if (platform == \"huya\") {\n    var url = \"https://m.huya.com/\" + roomid;\n} else if (platform == \"bilibili\") {\n    var url = \"https://live.bilibili.com/h5/\" + roomid;\n} else if (platform == \"douyin\") {\n    var url = \"https://live.douyin.com/\" + roomid;\n} else {\n    var url = \"https://h5.cc.163.com/cc/\" + roomid;\n};\n\nlet roompic = res.data.roomPic;\nlet ownerpic = res.data.ownerHeadPic;\nlet plat = platform.replace('huya', '虎牙').replace('douyu', '斗鱼').replace('cc', '网易CC').replace(\"bilibili\", \"哔哩\").replace(\"douyin\", \"抖音\");\nlet category = res.data.categoryName;\nlet Live = res.data.isLive == 1 ? \"直播中\" : \"未直播\";\nlet ccls = MY_PARAMS.cls;\nlet 万 = !/cls-home/.test(ccls) ? \"万粉丝\" : \"万\";\nlet 人 = !/cls-home/.test(ccls) ? \"粉丝\" : \"人\";\nlet online = res.data.online;\nlet line = online >= \"10000\" ? (online / 10000).toFixed(1) + 万 : online + 人;\n\nd.push({\n    title: res.data.ownerName,\n    img: (roompic !== \"\" ? roompic : ownerpic) + \"@Referer=\",\n    desc: \"分区：\" + plat + (category !== \"\" ? \"·\" + category : \"\") + \"\\n状态：\" + Live + \"·\" + line + \"\\n点击下方主播头像进入官网\",\n    url: (roompic !== \"\" ? roompic : ownerpic) + \"#ignoreVideo=true#\",\n    col_type: 'movie_1_vertical_pic_blur',\n    extra: {\n        gradient: true\n    }\n}, {\n    title: res.data.ownerName,\n    img: ownerpic + \"@Referer=\",\n    url: url,\n    col_type: \"icon_2_round\"\n});\n\nd.push({\n    title: getItem(platform + roomid, \"0\") == 1 ? \"已关注\" : \"未关注\",\n    url: $('#noLoading#').lazyRule((api, uid, headers, roomid, platform) => {\n        if (getItem(platform + roomid, \"0\") == \"0\") {\n            var foll = \"follow\";\n            setItem(platform + roomid, \"1\");\n        } else {\n            var foll = \"unFollow\";\n            clearItem(platform + roomid);\n        };\n        let tit = getItem(platform + roomid, \"0\");\n        updateItem(\"id_isFollowed\", {\n            title: tit == 1 ? \"已关注\" : \"未关注\"\n        });\n        let re = JSON.parse(request(api + foll + \"?platform=\" + platform + \"&roomId=\" + roomid + \"&uid=\" + uid, headers));\n\n        let list = findItemsByCls(\"cls_Subs\") || [];\n        if (list.length == 0) {\n            return \"toast://没有获取到列表\"\n        };\n        for (let i in list) {\n            let li = list[i];\n            let cls = li.extra.cls;\n            let js2 = li.extra.longClick[1].js;\n            updateItem(\"id_\" + platform + roomid, {\n                extra: {\n                    cls: cls,\n                    id: \"id_\" + platform + roomid,\n                    lineVisible: false,\n                    longClick: [{\n                        title: tit == \"1\" ? \"已关注\" : \"未关注\",\n                        js: $.require(\"public\").LongClick(api, uid, roomid, platform),\n                    }, {\n                        title: \"官网链接\",\n                        js: js2\n                    }]\n                }\n            });\n            if (getMyVar(\"sType\", \"\") !== \"\" && tit == 0) {\n                deleteItem(\"id_\" + platform + roomid);\n            };\n        };\n        return \"toast://\" + re.data;\n    }, api, uid, headers, roomid, platform),\n    col_type: \"text_2\",\n    extra: {\n        id: \"id_isFollowed\"\n    }\n}, {\n    col_type: \"line_blank\"\n}, {\n    title: \"选择线路\",\n    url: \"hiker://empty\",\n    col_type: \"text_center_1\"\n});\n\nfunction Lives(isLive) {\n    d.push({\n        desc: isLive == 0 ? \"直   播   已   结   束\" : \"直   播   已   结   束\\n\\n或  没  有  获  取  到  数  据\",\n        url: \"hiker://empty\",\n        col_type: \"text_center_1\",\n        extra: {\n            lineVisible: false\n        }\n    })\n};\nlet isLive = res.data.isLive;\nif (isLive == 0) {\n    Lives(isLive);\n} else {\n    let json = JSON.parse(fetch(api + \"getRealUrlMultiSource?platform=\" + platform + \"&roomId=\" + roomid, headers)).data || [];\n    if (Object.keys(json).length !== 0) {\n        for (let xl in json) {\n            d.push({\n                title: xl,\n                col_type: \"text_2\",\n                url: $('#noLoading#').lazyRule((list, mid) => {\n                    let name = [];\n                    let urls = []\n                    for (var i in list) {\n                        let li = list[i];\n                        name.push(li.qualityName)\n                        urls.push(li.playUrl)\n                    };\n                    return JSON.stringify(urls) !== '[\"\"]' ? JSON.stringify({\n                        names: name,\n                        urls: urls,\n                        danmu: /douyu暂无/.test(urls) ? \"web://http://douyu_danmu.dev.tyrantg.com/?rid=\" + mid + \"&ver=1\" : \"\"\n                    }) : \"toast://直播已结束或没有获取到数据\"\n                }, json[xl], roomid)\n            })\n        };\n    } else {\n        Lives(isLive);\n    };\n};\ndeleteItemByCls(\"cls_load\");\nsetResult(d);"},{"col_type":"movie_3","name":"关注列表","path":"history","rule":"js:\naddListener('onClose', $.toString(() => {\n    clearMyVar('sType');\n    clearMyVar('subs');\n}));\nlet s = [];\nlet d = [];\nlet api = $.require(\"public\").Api;\nlet uid = getItem(\"uid\", \"\");\nlet headers = $.require(\"public\").headers;\n/*\nlet off = \"https://hikerfans.com/tubiao/messy/63.svg\";\nlet on = \"https://hikerfans.com/tubiao/messy/55.svg\";\n*/\nlet zc = getMyVar(\"zuce\", \"注 册\");\ns.push({\n    title: getItem(\"nickname\", zc),\n    url: uid == \"\" ? $(\"#noLoading#\").lazyRule((zc) => {\n        putMyVar(\"zuce\", zc == \"注 册\" ? \"登 录\" : \"注 册\");\n        refreshPage(false);\n        return \"hiker://empty\";\n    }, zc) : $(\"是否注销？\").confirm(() => {\n        clearItem(\"uid\");\n        clearItem(\"account\");\n        clearItem(\"password\");\n        clearItem(\"nickname\");\n        clearItem(\"username\");\n        back(true);\n        return \"toast://注销成功\";\n    }),\n    img: \"https://hikerfans.com/tubiao/ke/73.png\",\n    col_type: \"icon_2\"\n}, {\n    title: getItem(\"multiline\", \"0\") == \"2\" ? \"备用\" : getItem(\"multiline\", \"0\") == \"1\" ? \"多线路\" : \"单线路\",\n    img: \"hiker://images/icon_setting6\",\n    col_type: \"icon_2\",\n    url: $([\"多线路\", \"单线路\", \"备用线路\"], 1, \"线路\").select((api) => {\n        return $(\"#noLoading#\").lazyRule((api, input) => {\n            if (/多线/.test(input)) {\n                setItem(\"multiline\", \"1\");\n            } else\n            if (/备用/.test(input)) {\n                setItem(\"multiline\", \"2\");\n            } else {\n                clearItem(\"multiline\");\n            };\n            let mul = getItem(\"multiline\", \"0\");\n            updateItem(\"id_multiline\", {\n                title: mul == \"2\" ? \"备用\" : mul == \"1\" ? \"多线路\" : \"单线路\"\n            });\n            let clls = getMyVar(\"Mykey\", \"\") !== \"\" ? \"cls-so\" : \"cls-home\";\n            let home = findItemsByCls(clls) || [];\n            let Subs = findItemsByCls(\"cls-Subs\") || [];\n\n            function dxlsx(S) {\n                let isLive = S.extra.isLive;\n                let form = S.url.match(/platform=(.*)&/)[1];\n                let mid = /hiker/.test(S.url) ? S.url.split(\"roomId=\")[1] : S.url.match(/roomId=(\\d+).*/)[1];\n                let real = mul == \"0\" ? \"getRealUrlMultiSource\" : mul == \"2\" ? \"getRealUrl\" : \"\";\n                let url = /0|2/.test(mul) ? api + real + \"?platform=\" + form + \"&roomId=\" + mid + $.require(\"public\").Lazy(isLive) : \"hiker://page/detail?#immersiveTheme#&platform=\" + form + \"&roomId=\" + mid;\n                updateItem(\"id_\" + form + mid, {\n                    url: url\n                });\n            };\n            for (let s in Subs) {\n                let S = Subs[s];\n                dxlsx(S);\n            };\n            for (let h in home) {\n                let H = home[h];\n                dxlsx(H);\n            };\n            return \"hiker://empty\";\n        }, api, input)\n    }, api),\n    extra: {\n        id: \"id_multiline\"\n    }\n})\n\nif (uid == \"\") {\n    if (zc == \"登 录\") {\n        s.push({\n            desc: \"昵称 （1-20位）\",\n            extra: {\n                onChange: \"setItem('nick', input)\",\n                titleVisible: false\n            },\n            col_type: \"input\"\n        })\n    };\n    s.push({\n        desc: \"账号 （6-20位数字或英文）\",\n        extra: {\n            onChange: \"setItem('account', input)\",\n            titleVisible: false\n        },\n        col_type: \"input\"\n    }, {\n        desc: \"密码 （6-20位数字或英文）\",\n        extra: {\n            onChange: \"setItem('password', input)\",\n            titleVisible: false\n        },\n        col_type: \"input\"\n    }, {\n        title: zc == \"注 册\" ? \"登  录\" : \"注 册\",\n        url: $('#noLoading#').lazyRule((zc) => {\n            let regin = zc == \"登 录\" ? \"register\" : \"login\";\n            let nick = zc == \"登 录\" ? \"&nickname=\" + getItem(\"nick\", \"\") : \"\";\n            let account = getItem(\"account\", \"\");\n            let password = getItem(\"password\", \"\");\n            if (account == \"\" || password == \"\") {\n                return \"toast://帐号或密码不能为空！\";\n            } else {\n                let cookies = JSON.parse(post($.require(\"public\").Api.replace(\"live/\", \"\") + regin + \"?username=\" + account + nick + \"&password=\" + md5(password), $.require(\"public\").headers));\n                //log(cookies)\n                if (cookies.code == 200) {\n                    setItem(\"uid\", cookies.data.uid);\n                    setItem(\"nickname\", cookies.data.nickName);\n                    setItem(\"username\", cookies.data.userName);\n                    back();\n                    clearItem(\"nick\");\n                    clearMyVar(\"zuce\");\n                    return zc == \"登 录\" ? \"toast://注册成功，已登录\" : \"toast://登录成功\";\n                } else {\n                    if (zc == \"登 录\") {\n                        return \"toast://\" + cookies.message;\n                    } else {\n                        clearItem(\"nickname\");\n                        clearItem(\"username\");\n                        clearItem(\"uid\");\n                        return \"toast://登陆失败，可能是用户名或密码有误\";\n                    }\n                };\n            };\n        }, zc),\n        col_type: \"text_center_1\",\n        extra: {\n            lineVisible: false\n        }\n    })\n};\ns.push({\n    col_type: \"big_blank_block\"\n}, {\n    col_type: \"line_blank\"\n}, {\n    col_type: \"big_blank_block\"\n});\nlet place = \"Subs\";\nlet sType = getMyVar(\"sType\");\n\ns.push({\n    title: \"我的关注\",\n    img: \"https://hikerfans.com/tubiao/q/103.png\",\n    desc: sType == \"living\" ? \"直播中\\t\" : \"未开播\\t\",\n    url: $(\"#noLoading#\").lazyRule((api, uid, place) => {\n        putMyVar(\"sType\", getMyVar(\"sType\") == \"living\" ? \"outline\" : \"living\");\n\n        let sTyp = getMyVar(\"sType\");\n        updateItem(\"id_gzbt\", {\n            desc: sTyp == \"living\" ? \"直播中\\t\" : \"未开播\\t\"\n        });\n\n        deleteItemByCls(\"cls-Subs\");\n        let res = storage0.getMyVar(\"subs\");\n        let su = [];\n        for (let i in res) {\n            let temp = res[i];\n            if (sTyp == \"living\") {\n                if (temp.isLive == 1) {\n                    if (temp.length !== 0) {\n                        $.require(\"public\").Lists(api, uid, place, su, temp.roomId, temp.platForm, temp.ownerName, temp.categoryName, temp.online, temp.roomPic, temp.isLive);\n                    } else {\n                        $.require(\"public\").Nys(su);\n                    };\n                };\n            } else\n            if (temp.isLive == 0 && temp.platForm !== null) {\n                $.require(\"public\").Lists(api, uid, place, su, temp.roomId, temp.platForm, temp.ownerName, temp.categoryName, temp.online, temp.ownerHeadPic, temp.isLive);\n            };\n        };\n        addItemAfter(\"id_gzlb\", su);\n        return \"hiker://empty\";\n    }, api, uid, place),\n    col_type: \"avatar\",\n    extra: {\n        id: \"id_gzbt\"\n    }\n});\n\ns.push({\n    col_type: \"line\",\n    extra: {\n        id: \"id_gzlb\"\n    }\n});\n$.require(\"public\").Loading(s, \"\");\nsetPreResult(s);\n\nfunction tips(desc) {\n    d.push({\n        col_type: 'rich_text'\n    }, {\n        desc: desc,\n        url: \"hiker://empty\",\n        col_type: \"text_center_1\",\n        extra: {\n            lineVisible: false\n        }\n    });\n};\nif (uid == \"\") {\n    let desc = \"登 录 后 查 看 关 注\";\n    $.require(\"public\").Empty(d, desc);\n} else {\n    let res = JSON.parse(request(api + \"getRoomsOn?uid=\" + uid, headers)).data;\n    if (res.length == 0) {\n        let desc = \"添 加 关 注 后 查 看\";\n        $.require(\"public\").Empty(d, desc);\n    } else {\n        storage0.putMyVar(\"subs\", res);\n        for (let i in res) {\n            let temp = res[i];\n            if (sType == \"living\") {\n                if (temp.isLive == 1) {\n                    if (temp.length !== 0) {\n                        $.require(\"public\").Lists(api, uid, place, d, temp.roomId, temp.platForm, temp.ownerName, temp.categoryName, temp.online, temp.roomPic, temp.isLive);\n                    } else {\n                        $.require(\"public\").Nys(d);\n                    };\n                };\n            } else\n            if (temp.isLive == 0 && temp.platForm !== null) {\n                $.require(\"public\").Lists(api, uid, place, d, temp.roomId, temp.platForm, temp.ownerName, temp.categoryName, temp.online, temp.ownerHeadPic, temp.isLive);\n            };\n        };\n    };\n};\ndeleteItemByCls(\"cls_load\");\nsetResult(d);"},{"col_type":"movie_3","name":"总分类","path":"newClass","rule":"js:\nvar d = [];\nlet s = [];\naddListener('onClose', $.toString(() => {\n    clearMyVar(\"Names\");\n}));\nlet api = $.require(\"public\").Api;\nlet headers = $.require(\"public\").headers;\n\nlet fro = \"Mypt\";\n$.require(\"public\").From(s, fro);\ns.push({\n    col_type: \"big_blank_block\"\n}, {\n    col_type: \"line_blank\"\n}, {\n    col_type: \"big_blank_block\"\n}, {\n    col_type: \"big_blank_block\"\n});\n\n$.require(\"public\").Loading(s, \"\");\nsetPreResult(s);\n\nvar url = api + \"getAreas?platform=\" + getMyVar(\"Mypt\", \"huya\");\nvar res = JSON.parse(request(url, headers)).data;\n//log(res)\n\nvar typeNames = [];\nvar bigList = [];\nvar smallList = [];\nputMyVar(\"typeNameVar\", !getMyVar('typeNameVar') ? '全部' : getMyVar('typeNameVar'));\nputMyVar('area', 'areaName')\n\nfor (let i in res) {\n    let r = res[i];\n    for (let x of r) {\n        if (!typeNames.includes(x.indexType)) {\n            typeNames.push(x.indexType);\n            bigList.push({\n                title: getMyVar('typeNameVar') == x.indexType ? \"‘‘’’<b>\" + x.indexType.fontcolor(\"#FA7298\") + \"</b>\" : x.indexType,\n                url: $('#noLoading#').lazyRule((typeNameVar, r, s, typeNames) => {\n                    putMyVar(\"typeNameVar\", typeNameVar);\n\n                    updateItem(\"id_justqb\", {\n                        title: getMyVar(\"typeNameVar\", \"全部\") == \"全部\" ? \"‘‘’’<b>\" + \"全部\".fontcolor(\"#FA7298\") + \"</b>\" : \"全部\"\n                    });\n\n                    let li = storage0.getMyVar(\"Names\");\n                    for (let j in li) {\n                        let lis = li[j];\n                        updateItem(\"id_just\" + j, {\n                            title: getMyVar(\"typeNameVar\", \"全部\") == lis ? \"‘‘’’<b>\" + lis.fontcolor(\"#FA7298\") + \"</b>\" : lis\n                        });\n                    };\n                    deleteItemByCls(\"cls_justxl\");\n                    smalList = r.map((li) => {\n                        return {\n                            title: li.areaName,\n                            img: (getMyVar(\"Mypt\") !== \"douyin\" ? li.areaPic : \"https://www.douyin.com/favicon.ico\") + \"@Referer=\",\n                            url: $(\"#noLoading#\").lazyRule((type, area) => {\n                putMyVar(\"Myfro\", getMyVar(\"Mypt\", \"huya\"));\n                return \"hiker://page/newClassList?typeName=\" + type + \"&areaName=\" + area + \"&page=fypage\"\n            }, li.typeName, li.areaName),\n                            col_type: \"icon_5\",\n                            typeName: li.indexType,\n                            extra: {\n                                cls: \"cls_justxl\",\n                                inheritTitle: false\n                            }\n                        }\n                    });\n                    addItemAfter(\"id_justxlz\", smalList);\n                    return \"hiker://empty\"\n                }, x.indexType, r, res, typeNames),\n                col_type: \"scroll_button\",\n                extra: {\n                    id: \"id_just\" + i\n                }\n            })\n        };\n\n        smallList.push({\n            title: x.areaName,\n            url: $(\"#noLoading#\").lazyRule((type, area) => {\n                putMyVar(\"Myfro\", getMyVar(\"Mypt\", \"huya\"));\n                return \"hiker://page/newClassList?typeName=\" + type + \"&areaName=\" + area + \"&page=fypage\"\n            }, x.typeName, x.areaName),\n            img: (getMyVar(\"Mypt\") !== \"douyin\" ? x.areaPic : \"https://www.douyin.com/favicon.ico\") + \"@Referer=\",\n            col_type: \"icon_5\",\n            typeName: x.indexType,\n            extra: {\n                cls: \"cls_justxl\",\n                inheritTitle: false\n            }\n        })\n    }\n};\n\nstorage0.putMyVar(\"Names\", typeNames);\nbigList.unshift({\n    title: getMyVar(\"typeNameVar\", \"全部\") == \"全部\" ? \"‘‘’’<b>\" + \"全部\".fontcolor(\"#FA7298\") + \"</b>\" : \"全部\",\n    url: $('#noLoading#').lazyRule((typeNameVar, smallList, s) => {\n        putMyVar(\"typeNameVar\", typeNameVar);\n\n        updateItem(\"id_justqb\", {\n            title: getMyVar(\"typeNameVar\", \"全部\") == \"全部\" ? \"‘‘’’<b>\" + \"全部\".fontcolor(\"#FA7298\") + \"</b>\" : \"全部\"\n        });\n\n        let li = storage0.getMyVar(\"Names\");\n        for (let j in li) {\n            let lis = li[j];\n            updateItem(\"id_just\" + j, {\n                title: getMyVar(\"typeNameVar\", \"全部\") == lis ? \"‘‘’’<b>\" + lis.fontcolor(\"#FA7298\") + \"</b>\" : lis\n            });\n        };\n        deleteItemByCls(\"cls_justxl\");\n        addItemAfter(\"id_justxlz\", smallList);\n        return \"hiker://empty\";\n    }, '全部', smallList, res),\n    col_type: \"scroll_button\",\n    extra: {\n        id: \"id_justqb\"\n    }\n})\nd = d.concat(bigList);\n\nd.push({\n    col_type: \"line\",\n    extra: {\n        id: \"id_justxlz\"\n    }\n});\n\nif (getMyVar('typeNameVar') == '全部') {\n    d = d.concat(smallList);\n} else {\n    d = d.concat(smallList.filter(s => s.typeName == getMyVar('typeNameVar')));\n};\n\ndeleteItemByCls(\"cls_load\");\nsetResult(d);"},{"col_type":"movie_3","name":"总列表","path":"newClassList","rule":"js:\nvar d = [];\nlet s = [];\naddListener('onClose', $.toString(() => {\n    clearMyVar('Myfro');\n    clearMyVar('home');\n}));\nlet api = $.require(\"public\").Api;\nlet uid = getItem(\"uid\", \"\");\nlet headers = $.require(\"public\").headers;\n//切换平台\nif (MY_PAGE == 1) {\n    let fro = \"Myfro\";\n    $.require(\"public\").From(s, fro);\n    s.push({\n        col_type: \"line_blank\"\n    }, {\n        col_type: \"big_blank_block\"\n    }, {\n        col_type: \"big_blank_block\"\n    })\n    $.require(\"public\").Loading(s, \"\");\n};\nsetPreResult(s);\n\n//列表\nlet Myfro = getMyVar(\"Myfro\", \"\");\nlet page = getParam(\"page\");\nlet zong = api + 'getRecommendByAreaAll?areaType=' + getParam(\"typeName\") + '&area=' + getParam(\"areaName\") + '&page=' + page;\n\nlet zf = api + \"getRecommendByPlatformArea?platform=\" + Myfro + \"&area=\" + getParam(\"areaName\") + \"&page=\" + page + \"&size=20\";\n\nlet pin = api + \"getRecommendByPlatformArea\" + MY_URL.replace(\"hiker://page/newClassList\", \"\") + \"&page=\" + page + \"&size=20\";\n//log(pin)\n\nlet pf = api + \"getRecommendByPlatformArea?platform=\" + Myfro + \"&area=\" + getMyVar(\"area\") + \"&page=\" + page + \"&size=20\";\n\ntry {\n    let area = pin.match(/area=(.*?)&/)[1];\n    //log(area)\n    putMyVar(\"area\", area);\n} catch (e) {\n    var area = \"\";\n};\nlet url = \"\";\nif (area == \"\") {\n    url = Myfro !== \"\" ? zf : zong;\n} else {\n    url = Myfro !== \"\" ? pf : pin;\n};\n\ntry {\n    let res = (JSON.parse(request(url, headers)).data || []);\n    if (res == (null || \"\") && page == \"1\") {\n        let desc = \"暂  无  房  间\\n\\n请  切  换  其  它  平  台\";\n        $.require(\"public\").Empty(d, desc);\n    };\n    let place = \"home\";\n    for (let i in res) {\n        let temp = res[i];\n        $.require(\"public\").Lists(api, uid, place, d, temp.roomId, temp.platForm, temp.ownerName, temp.categoryName, temp.online, temp.roomPic, temp.isLive);\n    };\n} catch (e) {\n    if (page == \"1\") {\n        let area = url.match(/area=(.*)&/)[1];\n        if (getMyVar(\"home\", \"0\") == \"1\") {\n            putMyVar(\"sarea\", area);\n        };\n        let desc = \"暂  无  房  间\\n\\n请  切  换  其  它  平  台\";\n        $.require(\"public\").Empty(d, desc);\n    };\n};\ndeleteItemByCls(\"cls_load\");\nsetResult(d);"},{"col_type":"movie_3","name":"搜索页面","path":"search","rule":"$.exports = {\n    engines: [\"所有平台\", \"虎牙直播\", \"斗鱼直播\", \"哔哩哔哩\", \"抖音直播\", \"网易CC\"],\n    search: function() {\n        //log(getParam(\"engine\"));\n        let api = $.require(\"public?&rule=\" + getMyVar(\"R_ule\")).Api;\n        let headers = $.require(\"public?&rule=\" + getMyVar(\"R_ule\")).headers;\n        let url = api + \"search?keyWords=\" + getParam(\"kw\") + \"&uid=\" + getItem(\"uid\", \"\") + \"&platform=\" + [\"all\", \"huya\", \"douyu\", \"bilibili\", \"douyin\", \"cc\"][\n            [\"所有平台\", \"虎牙直播\", \"斗鱼直播\", \"哔哩哔哩\", \"抖音直播\", \"网易CC\"].indexOf(getParam(\"engine\"))\n        ]\n        let json = JSON.parse(request(url, headers)).data;\n        d = json.map(data => ({\n            title: data.platform.replace('huya', '虎牙').replace('douyu', '斗鱼').replace('cc', '网易CC').replace(\"bilibili\", \"哔哩\").replace(\"douyin\", \"抖音\") + '·' + data.nickName,\n            desc: data.followers >= \"10000\" ? (data.followers / 10000).toFixed(1) + \"万粉丝\" : data.followers + \"粉丝\",\n            img: (data.headPic !== null && data.headPic.startsWith('/') ? 'https:' + data.headPic : data.headPic) + '@Referer=',\n            content: data.isLive == '1' ? '直播中' : '未开播',\n            url: getItem('multiline', '0') == \"0\" ? api + \"getRealUrlMultiSource?platform=\" + data.platform + \"&roomId=\" + data.roomId + $.require(\"public?&rule=JustLive\").Lazy(data.isLive) : \"hiker://page/detail?#immersiveTheme#&rule=JustLive&platform=\" + data.platform + \"&roomId=\" + data.roomId\n        }))\n        setResult(d);\n    }\n};"},{"col_type":"movie_3","name":"公用函数","path":"public","rule":"$.exports.Api = \"http://yj1211.work:8013/api/live/\";\n\n$.exports.headers = {\n    headers: {\n        \"User-Agent\": \"okhttp/3.12.13\"\n    }\n};\n\n$.exports.From = function(d, fro) {\n    let tit = [\"虎牙\", \"斗鱼\", \"哔哩\", \"抖音\", \"网易\"];\n    let furl = [\"huya\", \"douyu\", \"bilibili\", \"douyin\", \"cc\"];\n    let pic = [\"https://hikerfans.com/tubiao/erdi/68.png\", \"https://hikerfans.com/tubiao/erdi/1.png\", \"https://hikerfans.com/tubiao/erdi/320.png\", \"https://hikerfans.com/tubiao/erdi/160.png\", \"https://hikerfans.com/tubiao/erdi/214.png\"];\n    let titll = fro == \"Mypt\" ? getMyVar(fro, \"huya\") : getMyVar(fro);\n    for (let i in tit) {\n        let ti = tit[i];\n        d.push({\n            title: furl[i] == titll ? \"‘‘’’<b>\" + ti.fontcolor(\"#FA7298\") + \"</b>\" : ti,\n            url: $('#noLoading#').lazyRule((url, fro) => {\n                putMyVar(fro, url);\n                clearMyVar('typeNameVar');\n                refreshPage(false);\n                return \"hiker://empty\";\n            }, furl[i], fro),\n            img: pic[i] + \"@Referer=\",\n            col_type: \"icon_5\"\n        })\n    };\n};\n\n$.exports.Lists = function(api, uid, place, d, roomId, platForm, ownerName, categoryName, online, roomPic, isLive) {\n    let category = categoryName != \"\" ? categoryName + '·' : \"\";\n    let Live = (isLive == '1' ? '直播中' : '未开播') + '·';\n    let 万 = place == \"home\" ? \"万\" : \"万粉丝\";\n    let 人 = place == \"home\" ? \"人\" : \"粉丝\";\n    let line = online >= \"10000\" ? (online / 10000).toFixed(1) + 万 : online + 人;\n    let plat = platForm.replace('huya', '虎牙').replace('douyu', '斗鱼').replace('cc', '网易CC').replace(\"bilibili\", \"哔哩\").replace(\"douyin\", \"抖音\");\n    let roompic = roomPic != null && roomPic.startsWith('/') ? 'https:' + roomPic : roomPic;\n    let real = getItem('multiline', '0') == \"0\" ? \"getRealUrlMultiSource\" : getItem('multiline', '0') == \"2\" ? \"getRealUrl\" : \"\";\n    d.push({\n        title: plat + '·' + ownerName,\n        desc: (place == \"so\" ? Live : category) + line,\n        img: roompic + '@Referer=',\n        url: /0|2/.test(getItem('multiline', '0')) ? api + real + \"?platform=\" + platForm + \"&roomId=\" + roomId + $.require(\"public\").Lazy(isLive) : \"hiker://page/detail?#immersiveTheme#&platform=\" + platForm + \"&roomId=\" + roomId,\n        col_type: \"movie_2\",\n        extra: {\n            cls: \"cls_Subs \" + \"cls-\" + place,\n            id: \"id_\" + platForm + roomId,\n            isLive: isLive,\n            inheritTitle: false,\n            longClick: [{\n                title: getItem(platForm + roomId, \"0\") == \"1\" ? \"已关注\" : \"未关注\",\n                js: $.require(\"public\").LongClick(api, uid, roomId, platForm),\n            }, {\n                title: \"官网链接\",\n                js: $.toString((roomid, platform) => {\n                    switch (platform) {\n                        case \"douyu\":\n                            var url = \"https://m.douyu.com/\" + roomid\n                            break\n                        case \"bilibili\":\n                            var url = \"https://live.bilibili.com/h5/\" + roomid\n                            break\n                        case \"huya\":\n                            var url = \"https://m.huya.com/\" + roomid\n                            break\n                        case \"douyin\":\n                            var url = \"https://live.douyin.com/\" + roomid\n                            break\n                        case \"cc\":\n                            var url = \"https://h5.cc.163.com/cc/\" + roomid\n                            break\n                    }\n                    return url\n                }, roomId, platForm)\n            }]\n        }\n    })\n};\n\n$.exports.LongClick = function(api, uid, roomid, platform) {\n    return $.toString((api, uid, roomid, platform) => {\n        if (getItem(platform + roomid, \"0\") == \"0\") {\n            var foll = \"follow\";\n            setItem(platform + roomid, \"1\");\n        } else {\n            var foll = \"unFollow\";\n            clearItem(platform + roomid);\n        };\n        let res = JSON.parse(request(api + foll + \"?platform=\" + platform + \"&roomId=\" + roomid + \"&uid=\" + uid, $.require(\"public\").headers));\n\n        let subs = findItemsByCls(\"cls_Subs\") || [];\n        if (subs.length == 0) {\n            return \"toast://没有获取到关注列表\";\n        };\n        let tit = getItem(platform + roomid, \"0\");\n        for (let i in subs) {\n            let li = subs[i];\n            let cls = li.extra.cls;\n            let js2 = li.extra.longClick[1].js;\n            updateItem(\"id_\" + platform + roomid, {\n                extra: {\n                    cls: cls,\n                    id: \"id_\" + platform + roomid,\n                    inheritTitle: false,\n                    longClick: [{\n                        title: tit == \"1\" ? \"已关注\" : \"未关注\",\n                        js: $.require(\"public\").LongClick(api, uid, roomid, platform),\n                    }, {\n                        title: \"官网链接\",\n                        js: js2\n                    }]\n                }\n            });\n            if (getMyVar(\"sType\", \"\") !== \"\" && tit == 0) {\n                deleteItem(\"id_\" + platform + roomid);\n            };\n        };\n        return \"toast://\" + res.data;\n    }, api, uid, roomid, platform);\n};\n\n$.exports.Lazy = function(isLive) {\n    return $(\"\").lazyRule((isLive) => {\n        if (isLive == 0) return \"toast://直播已结束！\";\n        let json = JSON.parse(fetch(input, $.require(\"public?&rule=\" + getMyVar(\"R_ule\", MY_RULE.title)).headers)).data || [];\n        let toas = \"toast://直播已结束或没有获取到数据\";\n        if (Object.keys(json).length == 0) return toas;\n        let mid = input.split(\"roomId=\")[1];\n        let name = [];\n        let urls = [];\n        if (/getRealUrlMultiSource/.test(input)) {\n            for (let xl in json) {\n                let list = json[xl];\n                for (let i in list) {\n                    let li = list[i];\n                    name.push(li.qualityName)\n                    urls.push(li.playUrl)\n                };\n                return JSON.stringify(urls) == '[\"\"]' ? toas : JSON.stringify({\n                    names: name,\n                    urls: urls,\n                    danmu: /douyu暂无/.test(urls) ? \"web://http://douyu_danmu.dev.tyrantg.com/?rid=\" + mid + \"&ver=1\" : /huya/.test(urls) ? \"\" : \"\"\n                });\n            };\n        } else {\n            let names = {\n                \"OD\": \"原画\",\n                \"FD\": \"流畅\",\n                \"LD\": \"标清\",\n                \"SD\": \"高清\",\n                \"HD\": \"超清\",\n                \"2K\": \"2K\",\n                \"4K\": \"4K\",\n                \"FHD\": \"全高清\",\n                \"XLD\": \"极速\",\n                \"SQ\": \"普通音质\",\n                \"HQ\": \"高音质\"\n            };\n            for (let key in json) {\n                if (!/ayyuid|to/.test(key)) {\n                    urls.push(json[key])\n                    name.push(names[key])\n                }\n            };\n            return JSON.stringify(urls) == '[\"\"]' ? toas : JSON.stringify({\n                names: name,\n                urls: urls,\n                danmu: /douyu暂无/.test(urls) ? \"web://http://douyu_danmu.dev.tyrantg.com/?rid=\" + mid + \"&ver=1\" : /huya/.test(urls) ? \"\" : \"\"\n            });\n        };\n    }, isLive);\n};\n\n$.exports.Empty = function(d, desc) {\n    d.push({\n        title: \"<br><br>\",\n        col_type: 'rich_text'\n    }, {\n        desc: desc,\n        url: 'hiker://empty',\n        col_type: 'text_center_1',\n        extra: {\n            lineVisible: false\n        }\n    });\n};\n\n$.exports.Nys = function(d) {\n    d.push({\n        title: \"<br><br>\",\n        col_type: 'rich_text'\n    }, {\n        desc: \"关 注 的 主 播 未 开 播\",\n        url: \"hiker://empty\",\n        col_type: \"text_center_1\",\n        extra: {\n            lineVisible: false,\n            cls: \"cls-Subs\"\n        }\n    });\n};\n\n$.exports.Loading = function(s, title) {\n    s.push({\n        title: title,\n        col_type: \"rich_text\",\n        extra: {\n            cls: \"cls_load\"\n        }\n    }, {\n        img: \"https://hikerfans.com/weisyr/img/Loading1.gif\",\n        url: \"hiker://empty\",\n        col_type: \"pic_1_center\",\n        extra: {\n            cls: \"cls_load\"\n        }\n    });\n};"}],"title":"JustLive","author":"Joe&&随风&&发粪涂墙&&Rx&&Zruiry","version":20240417,"type":"video","url":"hiker://empty##fypage","col_type":"movie_3","class_name":"","class_url":"","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:\nlet s = [];\nlet d = [];\nlet api = $.require(\"public\").Api;\nlet headers = $.require(\"public\").headers;\nlet uid = getItem(\"uid\", \"\");\nlet clas = getMyVar(\"class\", \"all\");\n\nif (getMyVar(\"Vers\", \"0\") == \"0\") {\n    let vers = JSON.parse(fetch(api + \"versionUpdate\", headers)).data.latestVersion;\n    putMyVar(\"Vers\", vers);\n};\nlet putver = getMyVar(\"Vers\", \"0\");\nlet setver = getItem(\"Vers\", \"0.3.4\");\nlet psver = putver > setver ? \"new V \" + putver + \" > \" + \"V \" + setver : \"V \" + setver;\nif (MY_PAGE == 1) {\n    s.unshift({\n        title: getItem(\"nickname\", \"注册 / 登录\"),\n        desc: psver + \"\\t\\t\",\n        url: $(\"#noLoading#\").lazyRule((putver, setver) => {\n            putMyVar(\"sType\", \"living\");\n            if (putver > setver) {\n                setItem(\"Vers\", putver);\n            };\n            updateItem(\"id_justlive_version\", {\n                desc: \"V \" + getItem(\"Vers\", \"0.3.4\") + \"\\t\\t\"\n            });\n            return \"hiker://page/history#noHistory##noRecordHistory#\";\n        }, putver, setver),\n        img: \"https://hikerfans.com/tubiao/ke/73.png\",\n        col_type: \"avatar\",\n        extra: {\n            id: \"id_justlive_version\",\n            pageTitle: \"我的关注\"\n        }\n    });\n    s.push({\n        title: \"搜索\",\n        desc: uid == \"\" ? \"搜 索 需 先 登 录\" : \"可 以 少 字 ，不 可 错 字 ！\",\n        url: uid == \"\" ? \"'toast://搜索需先登录'\" : $.toString(() => {\n            if (input != \"\") {\n                putMyVar(\"Mykey\", input);\n                refreshPage(true)\n            } else {\n                return \"hiker://empty\";\n            };\n        }),\n        col_type: \"input\",\n        extra: {\n            defaultValue: getMyVar(\"Mykey\")\n        }\n    }, {\n        col_type: \"big_blank_block\"\n    }, {\n        col_type: \"big_blank_block\"\n    }, {\n        col_type: \"line_blank\"\n    });\n\n    //热门直播\n    s.push({\n        title: '<font color=\"#0aa344\">热门直播</font>',\n        desc: '<font color=\"#0aa344\">➮\\t\\t</font>',\n        url: $('#noLoading#').lazyRule(() => {\n            putMyVar(\"typeNameVar\", '全部');\n            return \"hiker://page/newClass\" + '#noHistory#';\n        }),\n        img: \"https://img1.baidu.com/it/u=1131331416,2666467354&fm=253&fmt=auto&app=120&f=PNG?w=500&h=500@Referer=\",\n        col_type: \"avatar\",\n        extra: {\n            pageTitle: \"版块分区\"\n        }\n    });\n\n    let CT = Date.now();\n    let LT = \"\";\n    try {\n        eval(\"var flb = \" + readFile(\"hiker://files/cache/justlive.js\"), 0);\n        LT = flb.lt;\n    } catch (e) {\n        LT = \"0\";\n    };\n    let sarea = getMyVar(\"sarea\", \"0\");\n    if (!fileExist(\"hiker://files/cache/justlive.js\") || CT > (LT + 2 * 24 * 60 * 60 * 1000) || sarea != \"0\") {\n        //游侠\n        let yxurl = \"https://app.ali213.net/top/hot.html\";\n        let area;\n        try {\n            area = sarea == \"0\" ? flb.area : flb.area + \"|\" + sarea;\n        } catch (e) {\n            area = \"画符能手|我的勇者|太空行动|志战略|弹壳特|地铁跑|忍者新世|拣爱\";\n        };\n\n        let lisf = pdfa(fetch(yxurl), \".main-container&&img\").filter(element => !new RegExp(area).test(element)).slice(0, 8);\n        let list = [];\n        for (let li of lisf) {\n            let title = pdfh(li, \"img&&alt\");\n            let pic = pdfh(li, \"img&&src\");\n            list.push(title + \"$\" + pic);\n        }\n        var fl = {\n            \"lt\": CT,\n            \"list\": list,\n            \"area\": area\n        };\n        saveFile(\"hiker://files/cache/justlive.js\", JSON.stringify(fl), 0);\n        clearMyVar(\"sarea\");\n    };\n\n    let list = typeof(fl) != \"undefined\" ? fl.list : flb.list;\n    for (let li of list) {\n        let title = li.split(\"$\")[0];\n        s.push({\n            title: title,\n            img: li.split(\"$\")[1],\n            col_type: \"icon_round_small_4\",\n            url: $(\"#noLoading#\").lazyRule((title) => {\n                putMyVar(\"home\", \"1\");\n                return \"hiker://page/newClassList?typeName=手游&areaName=\" + title + \"&page=fypage#noHistory#\";\n            }, title),\n            extra: {\n                inheritTitle: false\n            }\n        })\n    };\n\n    s.push({\n        col_type: \"big_blank_block\"\n    }, {\n        col_type: \"big_blank_block\"\n    }, {\n        col_type: \"line_blank\"\n    }, {\n        col_type: \"big_blank_block\"\n    }, {\n        col_type: \"big_blank_block\"\n    });\n\n    //全部分类\n    s.push({\n        title: getMyVar(\"Mykey\") ? '搜索直播' : \"全部直播\",\n        desc: getMyVar(\"Mykey\") ? '<font color=\"#0aa344\">返回\\t</font>' : \"\",\n        url: $('#noLoading#').lazyRule(() => {\n            if (getMyVar(\"Mykey\", \"\") == \"\") {\n                return 'hiker://empty';\n            } else {\n                clearMyVar(\"Mykey\");\n                clearMyVar(\"class\");\n                refreshPage(false);\n                return 'hiker://empty';\n            };\n        }),\n        img: getMyVar(\"Mykey\") ? \"https://hikerfans.com/tubiao/messy/25.svg@Referer=\" : \"https://img2.baidu.com/it/u=517893027,2474596697&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=594@Referer=\",\n        col_type: \"avatar\",\n    }, {\n        col_type: \"big_blank_block\"\n    }, {\n        col_type: \"big_blank_block\"\n    });\n\n    let lei = [\"全部\", \"虎牙\", \"斗鱼\", \"哔哩\", \"抖音\", \"网易\"];\n    let lurl = [\"all\", \"huya\", \"douyu\", \"bilibili\", \"douyin\", \"cc\"];\n    for (let i in lei) {\n        s.push({\n            title: lurl[i] == clas ? \"‘‘’’<b>\" + lei[i].fontcolor(\"#FA7298\") + \"</b>\" : lei[i],\n            url: $('#noLoading#').lazyRule((url) => {\n                putMyVar(\"class\", url);\n                refreshPage(false);\n                return \"hiker://empty\";\n            }, lurl[i]),\n            col_type: \"scroll_button\"\n        })\n    };\n    s.push({\n        col_type: \"big_blank_block\"\n    }, {\n        col_type: \"big_blank_block\"\n    });\n\n    s.push({\n        img: \"\",\n        url: \"hiker://empty\",\n        col_type: \"card_pic_3\",\n        extra: {\n            cls: \"cls_load\"\n        }\n    }, {\n        img: \"https://hikerfans.com/weisyr/img/Loading1.gif\",\n        url: \"hiker://empty\",\n        col_type: \"pic_3\",\n        extra: {\n            cls: \"cls_load\"\n        }\n    });\n    setPreResult(s);\n};\n\n//搜索列表\nif (getMyVar(\"Mykey\")) {\n    if (MY_PAGE == '1') {\n        if (uid == \"\") {\n            d.push({\n                title: \"登录后继续搜索\",\n                desc: \"点击登录\",\n                url: $('#noLoading#').lazyRule(() => {\n                    putMyVar(\"sType\", 'living');\n                    return 'hiker://page/history#noHistory##noRecordHistory#';\n                }),\n                col_type: \"text_center_1\"\n            });\n        } else {\n            try {\n                let ss_url = api + \"search?platform=\" + clas + \"&keyWords=\" + getMyVar(\"Mykey\") + \"&uid=\" + uid;\n                let json = JSON.parse(fetch(ss_url, headers)).data;\n                let place = \"so\";\n                for (let i in json) {\n                    let data = json[i];\n                    $.require(\"public\").Lists(api, uid, place, d, data.roomId, data.platform, data.nickName, data.cateName, data.followers, data.headPic, data.isLive);\n                };\n                d.push({\n                    title: \"““到底了呢””\",\n                    desc: '点击返回首页',\n                    url: $('#noLoading#').lazyRule(() => {\n                        refreshPage();\n                        clearMyVar(\"Mykey\")\n                        return 'hiker://empty'\n                    }),\n                    col_type: \"text_center_1\",\n                    extra: {\n                        lineVisible: false\n                    }\n                })\n            } catch (e) {\n                d.push({\n                    title: \"““搜索未知错误””\",\n                    url: 'hiker://empty',\n                    col_type: \"text_center_1\",\n                    extra: {\n                        lineVisible: false\n                    }\n                })\n                toast(\"搜索出现错误\");\n            };\n        };\n    };\n} else {\n    //主页列表\n    let home = api + \"getRecommend?page=\" + MY_PAGE + \"&size=20\";\n    let fen = api + \"getRecommendByPlatform?platform=\" + clas + \"&page=\" + MY_PAGE + \"&size=20\";\n    let url = clas == \"all\" ? home : fen;\n    let res = JSON.parse(request(url, headers)).data;\n    let place = \"home\";\n    for (let i in res) {\n        let temp = res[i];\n        $.require(\"public\").Lists(api, uid, place, d, temp.roomId, temp.platForm, temp.ownerName, temp.categoryName, temp.online, temp.roomPic, temp.isLive);\n    };\n};\ndeleteItemByCls(\"cls_load\");\nsetResult(d);","searchFind":"js:\nif (getItem(\"uid\", \"\") == \"\") {\n    var d = [];\n    d.push({\n        title: \"请先登陆\",\n        url: \"hiker://page/history\"\n    });\n} else {\n    putMyVar(\"R_ule\", MY_RULE.title);\n    setResult([{\n        url: 'hiker://search?s=' + getParam(\"kw\"),\n        extra: {\n            rules: $.toString(() => {\n                let data = []; $.require(\"search\").engines.forEach((Map, i) => {\n                    data.push({\n                        \"title\": Map,\n                        \"search_url\": buildUrl(\"hiker://empty\", {\n                            kw: \"**\",\n                            page: \"fypage\",\n                            engine: Map\n                        }),\n                        \"searchFind\": \"js:$.require('search?rule=\" + getMyVar(\"R_ule\") + \"').search()\"\n                    });\n                })\n                return JSON.stringify(data);\n            })\n        },\n        title: \"搜索：\" + getParam(\"kw\")\n    }])\n}\nsetResult(d);","search_url":"hiker://empty?kw=**","group":"①推荐","detail_col_type":"movie_1","detail_find_rule":"","sdetail_col_type":"movie_1","sdetail_find_rule":"","ua":"mobile","preRule":"","pages":"[{\"col_type\":\"movie_3\",\"name\":\"二级\",\"path\":\"detail\",\"rule\":\"js:\\nlet d = [];\\nlet s = [];\\nlet Br = \\\"<br><br><br><br><br>\\\";\\n$.require(\\\"public\\\").Loading(s, Br);\\nsetPreResult(s);\\n\\nlet api = $.require(\\\"public\\\").Api;\\nlet headers = $.require(\\\"public\\\").headers;\\nlet uid = getItem(\\\"uid\\\", \\\"\\\");\\nlet platform = getParam(\\\"platform\\\");\\nlet roomid = getParam(\\\"roomId\\\");\\n\\nlet res = JSON.parse(request(api + \\\"getRoomInfo?uid=\\\" + uid + \\\"&platform=\\\" + platform + \\\"&roomId=\\\" + roomid, headers));\\n\\nif (platform == \\\"douyu\\\") {\\n    var url = \\\"https://m.douyu.com/\\\" + roomid;\\n} else if (platform == \\\"huya\\\") {\\n    var url = \\\"https://m.huya.com/\\\" + roomid;\\n} else if (platform == \\\"bilibili\\\") {\\n    var url = \\\"https://live.bilibili.com/h5/\\\" + roomid;\\n} else if (platform == \\\"douyin\\\") {\\n    var url = \\\"https://live.douyin.com/\\\" + roomid;\\n} else {\\n    var url = \\\"https://h5.cc.163.com/cc/\\\" + roomid;\\n};\\n\\nlet roompic = res.data.roomPic;\\nlet ownerpic = res.data.ownerHeadPic;\\nlet plat = platform.replace('huya', '虎牙').replace('douyu', '斗鱼').replace('cc', '网易CC').replace(\\\"bilibili\\\", \\\"哔哩\\\").replace(\\\"douyin\\\", \\\"抖音\\\");\\nlet category = res.data.categoryName;\\nlet Live = res.data.isLive == 1 ? \\\"直播中\\\" : \\\"未直播\\\";\\nlet ccls = MY_PARAMS.cls;\\nlet 万 = !/cls-home/.test(ccls) ? \\\"万粉丝\\\" : \\\"万\\\";\\nlet 人 = !/cls-home/.test(ccls) ? \\\"粉丝\\\" : \\\"人\\\";\\nlet online = res.data.online;\\nlet line = online >= \\\"10000\\\" ? (online / 10000).toFixed(1) + 万 : online + 人;\\n\\nd.push({\\n    title: res.data.ownerName,\\n    img: (roompic !== \\\"\\\" ? roompic : ownerpic) + \\\"@Referer=\\\",\\n    desc: \\\"分区：\\\" + plat + (category !== \\\"\\\" ? \\\"·\\\" + category : \\\"\\\") + \\\"\\\\n状态：\\\" + Live + \\\"·\\\" + line + \\\"\\\\n点击下方主播头像进入官网\\\",\\n    url: (roompic !== \\\"\\\" ? roompic : ownerpic) + \\\"#ignoreVideo=true#\\\",\\n    col_type: 'movie_1_vertical_pic_blur',\\n    extra: {\\n        gradient: true\\n    }\\n}, {\\n    title: res.data.ownerName,\\n    img: ownerpic + \\\"@Referer=\\\",\\n    url: url,\\n    col_type: \\\"icon_2_round\\\"\\n});\\n\\nd.push({\\n    title: getItem(platform + roomid, \\\"0\\\") == 1 ? \\\"已关注\\\" : \\\"未关注\\\",\\n    url: $('#noLoading#').lazyRule((api, uid, headers, roomid, platform) => {\\n        if (getItem(platform + roomid, \\\"0\\\") == \\\"0\\\") {\\n            var foll = \\\"follow\\\";\\n            setItem(platform + roomid, \\\"1\\\");\\n        } else {\\n            var foll = \\\"unFollow\\\";\\n            clearItem(platform + roomid);\\n        };\\n        let tit = getItem(platform + roomid, \\\"0\\\");\\n        updateItem(\\\"id_isFollowed\\\", {\\n            title: tit == 1 ? \\\"已关注\\\" : \\\"未关注\\\"\\n        });\\n        let re = JSON.parse(request(api + foll + \\\"?platform=\\\" + platform + \\\"&roomId=\\\" + roomid + \\\"&uid=\\\" + uid, headers));\\n\\n        let list = findItemsByCls(\\\"cls_Subs\\\") || [];\\n        if (list.length == 0) {\\n            return \\\"toast://没有获取到列表\\\"\\n        };\\n        for (let i in list) {\\n            let li = list[i];\\n            let cls = li.extra.cls;\\n            let js2 = li.extra.longClick[1].js;\\n            updateItem(\\\"id_\\\" + platform + roomid, {\\n                extra: {\\n                    cls: cls,\\n                    id: \\\"id_\\\" + platform + roomid,\\n                    lineVisible: false,\\n                    longClick: [{\\n                        title: tit == \\\"1\\\" ? \\\"已关注\\\" : \\\"未关注\\\",\\n                        js: $.require(\\\"public\\\").LongClick(api, uid, roomid, platform),\\n                    }, {\\n                        title: \\\"官网链接\\\",\\n                        js: js2\\n                    }]\\n                }\\n            });\\n            if (getMyVar(\\\"sType\\\", \\\"\\\") !== \\\"\\\" && tit == 0) {\\n                deleteItem(\\\"id_\\\" + platform + roomid);\\n            };\\n        };\\n        return \\\"toast://\\\" + re.data;\\n    }, api, uid, headers, roomid, platform),\\n    col_type: \\\"text_2\\\",\\n    extra: {\\n        id: \\\"id_isFollowed\\\"\\n    }\\n}, {\\n    col_type: \\\"line_blank\\\"\\n}, {\\n    title: \\\"选择线路\\\",\\n    url: \\\"hiker://empty\\\",\\n    col_type: \\\"text_center_1\\\"\\n});\\n\\nfunction Lives(isLive) {\\n    d.push({\\n        desc: isLive == 0 ? \\\"直   播   已   结   束\\\" : \\\"直   播   已   结   束\\\\n\\\\n或  没  有  获  取  到  数  据\\\",\\n        url: \\\"hiker://empty\\\",\\n        col_type: \\\"text_center_1\\\",\\n        extra: {\\n            lineVisible: false\\n        }\\n    })\\n};\\nlet isLive = res.data.isLive;\\nif (isLive == 0) {\\n    Lives(isLive);\\n} else {\\n    let json = JSON.parse(fetch(api + \\\"getRealUrlMultiSource?platform=\\\" + platform + \\\"&roomId=\\\" + roomid, headers)).data || [];\\n    if (Object.keys(json).length !== 0) {\\n        for (let xl in json) {\\n            d.push({\\n                title: xl,\\n                col_type: \\\"text_2\\\",\\n                url: $('#noLoading#').lazyRule((list, mid) => {\\n                    let name = [];\\n                    let urls = []\\n                    for (var i in list) {\\n                        let li = list[i];\\n                        name.push(li.qualityName)\\n                        urls.push(li.playUrl)\\n                    };\\n                    return JSON.stringify(urls) !== '[\\\"\\\"]' ? JSON.stringify({\\n                        names: name,\\n                        urls: urls,\\n                        danmu: /douyu暂无/.test(urls) ? \\\"web://http://douyu_danmu.dev.tyrantg.com/?rid=\\\" + mid + \\\"&ver=1\\\" : \\\"\\\"\\n                    }) : \\\"toast://直播已结束或没有获取到数据\\\"\\n                }, json[xl], roomid)\\n            })\\n        };\\n    } else {\\n        Lives(isLive);\\n    };\\n};\\ndeleteItemByCls(\\\"cls_load\\\");\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"关注列表\",\"path\":\"history\",\"rule\":\"js:\\naddListener('onClose', $.toString(() => {\\n    clearMyVar('sType');\\n    clearMyVar('subs');\\n}));\\nlet s = [];\\nlet d = [];\\nlet api = $.require(\\\"public\\\").Api;\\nlet uid = getItem(\\\"uid\\\", \\\"\\\");\\nlet headers = $.require(\\\"public\\\").headers;\\n/*\\nlet off = \\\"https://hikerfans.com/tubiao/messy/63.svg\\\";\\nlet on = \\\"https://hikerfans.com/tubiao/messy/55.svg\\\";\\n*/\\nlet zc = getMyVar(\\\"zuce\\\", \\\"注 册\\\");\\ns.push({\\n    title: getItem(\\\"nickname\\\", zc),\\n    url: uid == \\\"\\\" ? $(\\\"#noLoading#\\\").lazyRule((zc) => {\\n        putMyVar(\\\"zuce\\\", zc == \\\"注 册\\\" ? \\\"登 录\\\" : \\\"注 册\\\");\\n        refreshPage(false);\\n        return \\\"hiker://empty\\\";\\n    }, zc) : $(\\\"是否注销？\\\").confirm(() => {\\n        clearItem(\\\"uid\\\");\\n        clearItem(\\\"account\\\");\\n        clearItem(\\\"password\\\");\\n        clearItem(\\\"nickname\\\");\\n        clearItem(\\\"username\\\");\\n        back(true);\\n        return \\\"toast://注销成功\\\";\\n    }),\\n    img: \\\"https://hikerfans.com/tubiao/ke/73.png\\\",\\n    col_type: \\\"icon_2\\\"\\n}, {\\n    title: getItem(\\\"multiline\\\", \\\"0\\\") == \\\"2\\\" ? \\\"备用\\\" : getItem(\\\"multiline\\\", \\\"0\\\") == \\\"1\\\" ? \\\"多线路\\\" : \\\"单线路\\\",\\n    img: \\\"hiker://images/icon_setting6\\\",\\n    col_type: \\\"icon_2\\\",\\n    url: $([\\\"多线路\\\", \\\"单线路\\\", \\\"备用线路\\\"], 1, \\\"线路\\\").select((api) => {\\n        return $(\\\"#noLoading#\\\").lazyRule((api, input) => {\\n            if (/多线/.test(input)) {\\n                setItem(\\\"multiline\\\", \\\"1\\\");\\n            } else\\n            if (/备用/.test(input)) {\\n                setItem(\\\"multiline\\\", \\\"2\\\");\\n            } else {\\n                clearItem(\\\"multiline\\\");\\n            };\\n            let mul = getItem(\\\"multiline\\\", \\\"0\\\");\\n            updateItem(\\\"id_multiline\\\", {\\n                title: mul == \\\"2\\\" ? \\\"备用\\\" : mul == \\\"1\\\" ? \\\"多线路\\\" : \\\"单线路\\\"\\n            });\\n            let clls = getMyVar(\\\"Mykey\\\", \\\"\\\") !== \\\"\\\" ? \\\"cls-so\\\" : \\\"cls-home\\\";\\n            let home = findItemsByCls(clls) || [];\\n            let Subs = findItemsByCls(\\\"cls-Subs\\\") || [];\\n\\n            function dxlsx(S) {\\n                let isLive = S.extra.isLive;\\n                let form = S.url.match(/platform=(.*)&/)[1];\\n                let mid = /hiker/.test(S.url) ? S.url.split(\\\"roomId=\\\")[1] : S.url.match(/roomId=(\\\\d+).*/)[1];\\n                let real = mul == \\\"0\\\" ? \\\"getRealUrlMultiSource\\\" : mul == \\\"2\\\" ? \\\"getRealUrl\\\" : \\\"\\\";\\n                let url = /0|2/.test(mul) ? api + real + \\\"?platform=\\\" + form + \\\"&roomId=\\\" + mid + $.require(\\\"public\\\").Lazy(isLive) : \\\"hiker://page/detail?#immersiveTheme#&platform=\\\" + form + \\\"&roomId=\\\" + mid;\\n                updateItem(\\\"id_\\\" + form + mid, {\\n                    url: url\\n                });\\n            };\\n            for (let s in Subs) {\\n                let S = Subs[s];\\n                dxlsx(S);\\n            };\\n            for (let h in home) {\\n                let H = home[h];\\n                dxlsx(H);\\n            };\\n            return \\\"hiker://empty\\\";\\n        }, api, input)\\n    }, api),\\n    extra: {\\n        id: \\\"id_multiline\\\"\\n    }\\n})\\n\\nif (uid == \\\"\\\") {\\n    if (zc == \\\"登 录\\\") {\\n        s.push({\\n            desc: \\\"昵称 （1-20位）\\\",\\n            extra: {\\n                onChange: \\\"setItem('nick', input)\\\",\\n                titleVisible: false\\n            },\\n            col_type: \\\"input\\\"\\n        })\\n    };\\n    s.push({\\n        desc: \\\"账号 （6-20位数字或英文）\\\",\\n        extra: {\\n            onChange: \\\"setItem('account', input)\\\",\\n            titleVisible: false\\n        },\\n        col_type: \\\"input\\\"\\n    }, {\\n        desc: \\\"密码 （6-20位数字或英文）\\\",\\n        extra: {\\n            onChange: \\\"setItem('password', input)\\\",\\n            titleVisible: false\\n        },\\n        col_type: \\\"input\\\"\\n    }, {\\n        title: zc == \\\"注 册\\\" ? \\\"登  录\\\" : \\\"注 册\\\",\\n        url: $('#noLoading#').lazyRule((zc) => {\\n            let regin = zc == \\\"登 录\\\" ? \\\"register\\\" : \\\"login\\\";\\n            let nick = zc == \\\"登 录\\\" ? \\\"&nickname=\\\" + getItem(\\\"nick\\\", \\\"\\\") : \\\"\\\";\\n            let account = getItem(\\\"account\\\", \\\"\\\");\\n            let password = getItem(\\\"password\\\", \\\"\\\");\\n            if (account == \\\"\\\" || password == \\\"\\\") {\\n                return \\\"toast://帐号或密码不能为空！\\\";\\n            } else {\\n                let cookies = JSON.parse(post($.require(\\\"public\\\").Api.replace(\\\"live/\\\", \\\"\\\") + regin + \\\"?username=\\\" + account + nick + \\\"&password=\\\" + md5(password), $.require(\\\"public\\\").headers));\\n                //log(cookies)\\n                if (cookies.code == 200) {\\n                    setItem(\\\"uid\\\", cookies.data.uid);\\n                    setItem(\\\"nickname\\\", cookies.data.nickName);\\n                    setItem(\\\"username\\\", cookies.data.userName);\\n                    back();\\n                    clearItem(\\\"nick\\\");\\n                    clearMyVar(\\\"zuce\\\");\\n                    return zc == \\\"登 录\\\" ? \\\"toast://注册成功，已登录\\\" : \\\"toast://登录成功\\\";\\n                } else {\\n                    if (zc == \\\"登 录\\\") {\\n                        return \\\"toast://\\\" + cookies.message;\\n                    } else {\\n                        clearItem(\\\"nickname\\\");\\n                        clearItem(\\\"username\\\");\\n                        clearItem(\\\"uid\\\");\\n                        return \\\"toast://登陆失败，可能是用户名或密码有误\\\";\\n                    }\\n                };\\n            };\\n        }, zc),\\n        col_type: \\\"text_center_1\\\",\\n        extra: {\\n            lineVisible: false\\n        }\\n    })\\n};\\ns.push({\\n    col_type: \\\"big_blank_block\\\"\\n}, {\\n    col_type: \\\"line_blank\\\"\\n}, {\\n    col_type: \\\"big_blank_block\\\"\\n});\\nlet place = \\\"Subs\\\";\\nlet sType = getMyVar(\\\"sType\\\");\\n\\ns.push({\\n    title: \\\"我的关注\\\",\\n    img: \\\"https://hikerfans.com/tubiao/q/103.png\\\",\\n    desc: sType == \\\"living\\\" ? \\\"直播中\\\\t\\\" : \\\"未开播\\\\t\\\",\\n    url: $(\\\"#noLoading#\\\").lazyRule((api, uid, place) => {\\n        putMyVar(\\\"sType\\\", getMyVar(\\\"sType\\\") == \\\"living\\\" ? \\\"outline\\\" : \\\"living\\\");\\n\\n        let sTyp = getMyVar(\\\"sType\\\");\\n        updateItem(\\\"id_gzbt\\\", {\\n            desc: sTyp == \\\"living\\\" ? \\\"直播中\\\\t\\\" : \\\"未开播\\\\t\\\"\\n        });\\n\\n        deleteItemByCls(\\\"cls-Subs\\\");\\n        let res = storage0.getMyVar(\\\"subs\\\");\\n        let su = [];\\n        for (let i in res) {\\n            let temp = res[i];\\n            if (sTyp == \\\"living\\\") {\\n                if (temp.isLive == 1) {\\n                    if (temp.length !== 0) {\\n                        $.require(\\\"public\\\").Lists(api, uid, place, su, temp.roomId, temp.platForm, temp.ownerName, temp.categoryName, temp.online, temp.roomPic, temp.isLive);\\n                    } else {\\n                        $.require(\\\"public\\\").Nys(su);\\n                    };\\n                };\\n            } else\\n            if (temp.isLive == 0 && temp.platForm !== null) {\\n                $.require(\\\"public\\\").Lists(api, uid, place, su, temp.roomId, temp.platForm, temp.ownerName, temp.categoryName, temp.online, temp.ownerHeadPic, temp.isLive);\\n            };\\n        };\\n        addItemAfter(\\\"id_gzlb\\\", su);\\n        return \\\"hiker://empty\\\";\\n    }, api, uid, place),\\n    col_type: \\\"avatar\\\",\\n    extra: {\\n        id: \\\"id_gzbt\\\"\\n    }\\n});\\n\\ns.push({\\n    col_type: \\\"line\\\",\\n    extra: {\\n        id: \\\"id_gzlb\\\"\\n    }\\n});\\n$.require(\\\"public\\\").Loading(s, \\\"\\\");\\nsetPreResult(s);\\n\\nfunction tips(desc) {\\n    d.push({\\n        col_type: 'rich_text'\\n    }, {\\n        desc: desc,\\n        url: \\\"hiker://empty\\\",\\n        col_type: \\\"text_center_1\\\",\\n        extra: {\\n            lineVisible: false\\n        }\\n    });\\n};\\nif (uid == \\\"\\\") {\\n    let desc = \\\"登 录 后 查 看 关 注\\\";\\n    $.require(\\\"public\\\").Empty(d, desc);\\n} else {\\n    let res = JSON.parse(request(api + \\\"getRoomsOn?uid=\\\" + uid, headers)).data;\\n    if (res.length == 0) {\\n        let desc = \\\"添 加 关 注 后 查 看\\\";\\n        $.require(\\\"public\\\").Empty(d, desc);\\n    } else {\\n        storage0.putMyVar(\\\"subs\\\", res);\\n        for (let i in res) {\\n            let temp = res[i];\\n            if (sType == \\\"living\\\") {\\n                if (temp.isLive == 1) {\\n                    if (temp.length !== 0) {\\n                        $.require(\\\"public\\\").Lists(api, uid, place, d, temp.roomId, temp.platForm, temp.ownerName, temp.categoryName, temp.online, temp.roomPic, temp.isLive);\\n                    } else {\\n                        $.require(\\\"public\\\").Nys(d);\\n                    };\\n                };\\n            } else\\n            if (temp.isLive == 0 && temp.platForm !== null) {\\n                $.require(\\\"public\\\").Lists(api, uid, place, d, temp.roomId, temp.platForm, temp.ownerName, temp.categoryName, temp.online, temp.ownerHeadPic, temp.isLive);\\n            };\\n        };\\n    };\\n};\\ndeleteItemByCls(\\\"cls_load\\\");\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"总分类\",\"path\":\"newClass\",\"rule\":\"js:\\nvar d = [];\\nlet s = [];\\naddListener('onClose', $.toString(() => {\\n    clearMyVar(\\\"Names\\\");\\n}));\\nlet api = $.require(\\\"public\\\").Api;\\nlet headers = $.require(\\\"public\\\").headers;\\n\\nlet fro = \\\"Mypt\\\";\\n$.require(\\\"public\\\").From(s, fro);\\ns.push({\\n    col_type: \\\"big_blank_block\\\"\\n}, {\\n    col_type: \\\"line_blank\\\"\\n}, {\\n    col_type: \\\"big_blank_block\\\"\\n}, {\\n    col_type: \\\"big_blank_block\\\"\\n});\\n\\n$.require(\\\"public\\\").Loading(s, \\\"\\\");\\nsetPreResult(s);\\n\\nvar url = api + \\\"getAreas?platform=\\\" + getMyVar(\\\"Mypt\\\", \\\"huya\\\");\\nvar res = JSON.parse(request(url, headers)).data;\\n//log(res)\\n\\nvar typeNames = [];\\nvar bigList = [];\\nvar smallList = [];\\nputMyVar(\\\"typeNameVar\\\", !getMyVar('typeNameVar') ? '全部' : getMyVar('typeNameVar'));\\nputMyVar('area', 'areaName')\\n\\nfor (let i in res) {\\n    let r = res[i];\\n    for (let x of r) {\\n        if (!typeNames.includes(x.indexType)) {\\n            typeNames.push(x.indexType);\\n            bigList.push({\\n                title: getMyVar('typeNameVar') == x.indexType ? \\\"‘‘’’<b>\\\" + x.indexType.fontcolor(\\\"#FA7298\\\") + \\\"</b>\\\" : x.indexType,\\n                url: $('#noLoading#').lazyRule((typeNameVar, r, s, typeNames) => {\\n                    putMyVar(\\\"typeNameVar\\\", typeNameVar);\\n\\n                    updateItem(\\\"id_justqb\\\", {\\n                        title: getMyVar(\\\"typeNameVar\\\", \\\"全部\\\") == \\\"全部\\\" ? \\\"‘‘’’<b>\\\" + \\\"全部\\\".fontcolor(\\\"#FA7298\\\") + \\\"</b>\\\" : \\\"全部\\\"\\n                    });\\n\\n                    let li = storage0.getMyVar(\\\"Names\\\");\\n                    for (let j in li) {\\n                        let lis = li[j];\\n                        updateItem(\\\"id_just\\\" + j, {\\n                            title: getMyVar(\\\"typeNameVar\\\", \\\"全部\\\") == lis ? \\\"‘‘’’<b>\\\" + lis.fontcolor(\\\"#FA7298\\\") + \\\"</b>\\\" : lis\\n                        });\\n                    };\\n                    deleteItemByCls(\\\"cls_justxl\\\");\\n                    smalList = r.map((li) => {\\n                        return {\\n                            title: li.areaName,\\n                            img: (getMyVar(\\\"Mypt\\\") !== \\\"douyin\\\" ? li.areaPic : \\\"https://www.douyin.com/favicon.ico\\\") + \\\"@Referer=\\\",\\n                            url: $(\\\"#noLoading#\\\").lazyRule((type, area) => {\\n                putMyVar(\\\"Myfro\\\", getMyVar(\\\"Mypt\\\", \\\"huya\\\"));\\n                return \\\"hiker://page/newClassList?typeName=\\\" + type + \\\"&areaName=\\\" + area + \\\"&page=fypage\\\"\\n            }, li.typeName, li.areaName),\\n                            col_type: \\\"icon_5\\\",\\n                            typeName: li.indexType,\\n                            extra: {\\n                                cls: \\\"cls_justxl\\\",\\n                                inheritTitle: false\\n                            }\\n                        }\\n                    });\\n                    addItemAfter(\\\"id_justxlz\\\", smalList);\\n                    return \\\"hiker://empty\\\"\\n                }, x.indexType, r, res, typeNames),\\n                col_type: \\\"scroll_button\\\",\\n                extra: {\\n                    id: \\\"id_just\\\" + i\\n                }\\n            })\\n        };\\n\\n        smallList.push({\\n            title: x.areaName,\\n            url: $(\\\"#noLoading#\\\").lazyRule((type, area) => {\\n                putMyVar(\\\"Myfro\\\", getMyVar(\\\"Mypt\\\", \\\"huya\\\"));\\n                return \\\"hiker://page/newClassList?typeName=\\\" + type + \\\"&areaName=\\\" + area + \\\"&page=fypage\\\"\\n            }, x.typeName, x.areaName),\\n            img: (getMyVar(\\\"Mypt\\\") !== \\\"douyin\\\" ? x.areaPic : \\\"https://www.douyin.com/favicon.ico\\\") + \\\"@Referer=\\\",\\n            col_type: \\\"icon_5\\\",\\n            typeName: x.indexType,\\n            extra: {\\n                cls: \\\"cls_justxl\\\",\\n                inheritTitle: false\\n            }\\n        })\\n    }\\n};\\n\\nstorage0.putMyVar(\\\"Names\\\", typeNames);\\nbigList.unshift({\\n    title: getMyVar(\\\"typeNameVar\\\", \\\"全部\\\") == \\\"全部\\\" ? \\\"‘‘’’<b>\\\" + \\\"全部\\\".fontcolor(\\\"#FA7298\\\") + \\\"</b>\\\" : \\\"全部\\\",\\n    url: $('#noLoading#').lazyRule((typeNameVar, smallList, s) => {\\n        putMyVar(\\\"typeNameVar\\\", typeNameVar);\\n\\n        updateItem(\\\"id_justqb\\\", {\\n            title: getMyVar(\\\"typeNameVar\\\", \\\"全部\\\") == \\\"全部\\\" ? \\\"‘‘’’<b>\\\" + \\\"全部\\\".fontcolor(\\\"#FA7298\\\") + \\\"</b>\\\" : \\\"全部\\\"\\n        });\\n\\n        let li = storage0.getMyVar(\\\"Names\\\");\\n        for (let j in li) {\\n            let lis = li[j];\\n            updateItem(\\\"id_just\\\" + j, {\\n                title: getMyVar(\\\"typeNameVar\\\", \\\"全部\\\") == lis ? \\\"‘‘’’<b>\\\" + lis.fontcolor(\\\"#FA7298\\\") + \\\"</b>\\\" : lis\\n            });\\n        };\\n        deleteItemByCls(\\\"cls_justxl\\\");\\n        addItemAfter(\\\"id_justxlz\\\", smallList);\\n        return \\\"hiker://empty\\\";\\n    }, '全部', smallList, res),\\n    col_type: \\\"scroll_button\\\",\\n    extra: {\\n        id: \\\"id_justqb\\\"\\n    }\\n})\\nd = d.concat(bigList);\\n\\nd.push({\\n    col_type: \\\"line\\\",\\n    extra: {\\n        id: \\\"id_justxlz\\\"\\n    }\\n});\\n\\nif (getMyVar('typeNameVar') == '全部') {\\n    d = d.concat(smallList);\\n} else {\\n    d = d.concat(smallList.filter(s => s.typeName == getMyVar('typeNameVar')));\\n};\\n\\ndeleteItemByCls(\\\"cls_load\\\");\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"总列表\",\"path\":\"newClassList\",\"rule\":\"js:\\nvar d = [];\\nlet s = [];\\naddListener('onClose', $.toString(() => {\\n    clearMyVar('Myfro');\\n    clearMyVar('home');\\n}));\\nlet api = $.require(\\\"public\\\").Api;\\nlet uid = getItem(\\\"uid\\\", \\\"\\\");\\nlet headers = $.require(\\\"public\\\").headers;\\n//切换平台\\nif (MY_PAGE == 1) {\\n    let fro = \\\"Myfro\\\";\\n    $.require(\\\"public\\\").From(s, fro);\\n    s.push({\\n        col_type: \\\"line_blank\\\"\\n    }, {\\n        col_type: \\\"big_blank_block\\\"\\n    }, {\\n        col_type: \\\"big_blank_block\\\"\\n    })\\n    $.require(\\\"public\\\").Loading(s, \\\"\\\");\\n};\\nsetPreResult(s);\\n\\n//列表\\nlet Myfro = getMyVar(\\\"Myfro\\\", \\\"\\\");\\nlet page = getParam(\\\"page\\\");\\nlet zong = api + 'getRecommendByAreaAll?areaType=' + getParam(\\\"typeName\\\") + '&area=' + getParam(\\\"areaName\\\") + '&page=' + page;\\n\\nlet zf = api + \\\"getRecommendByPlatformArea?platform=\\\" + Myfro + \\\"&area=\\\" + getParam(\\\"areaName\\\") + \\\"&page=\\\" + page + \\\"&size=20\\\";\\n\\nlet pin = api + \\\"getRecommendByPlatformArea\\\" + MY_URL.replace(\\\"hiker://page/newClassList\\\", \\\"\\\") + \\\"&page=\\\" + page + \\\"&size=20\\\";\\n//log(pin)\\n\\nlet pf = api + \\\"getRecommendByPlatformArea?platform=\\\" + Myfro + \\\"&area=\\\" + getMyVar(\\\"area\\\") + \\\"&page=\\\" + page + \\\"&size=20\\\";\\n\\ntry {\\n    let area = pin.match(/area=(.*?)&/)[1];\\n    //log(area)\\n    putMyVar(\\\"area\\\", area);\\n} catch (e) {\\n    var area = \\\"\\\";\\n};\\nlet url = \\\"\\\";\\nif (area == \\\"\\\") {\\n    url = Myfro !== \\\"\\\" ? zf : zong;\\n} else {\\n    url = Myfro !== \\\"\\\" ? pf : pin;\\n};\\n\\ntry {\\n    let res = (JSON.parse(request(url, headers)).data || []);\\n    if (res == (null || \\\"\\\") && page == \\\"1\\\") {\\n        let desc = \\\"暂  无  房  间\\\\n\\\\n请  切  换  其  它  平  台\\\";\\n        $.require(\\\"public\\\").Empty(d, desc);\\n    };\\n    let place = \\\"home\\\";\\n    for (let i in res) {\\n        let temp = res[i];\\n        $.require(\\\"public\\\").Lists(api, uid, place, d, temp.roomId, temp.platForm, temp.ownerName, temp.categoryName, temp.online, temp.roomPic, temp.isLive);\\n    };\\n} catch (e) {\\n    if (page == \\\"1\\\") {\\n        let area = url.match(/area=(.*)&/)[1];\\n        if (getMyVar(\\\"home\\\", \\\"0\\\") == \\\"1\\\") {\\n            putMyVar(\\\"sarea\\\", area);\\n        };\\n        let desc = \\\"暂  无  房  间\\\\n\\\\n请  切  换  其  它  平  台\\\";\\n        $.require(\\\"public\\\").Empty(d, desc);\\n    };\\n};\\ndeleteItemByCls(\\\"cls_load\\\");\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"搜索页面\",\"path\":\"search\",\"rule\":\"$.exports = {\\n    engines: [\\\"所有平台\\\", \\\"虎牙直播\\\", \\\"斗鱼直播\\\", \\\"哔哩哔哩\\\", \\\"抖音直播\\\", \\\"网易CC\\\"],\\n    search: function() {\\n        //log(getParam(\\\"engine\\\"));\\n        let api = $.require(\\\"public?&rule=\\\" + getMyVar(\\\"R_ule\\\")).Api;\\n        let headers = $.require(\\\"public?&rule=\\\" + getMyVar(\\\"R_ule\\\")).headers;\\n        let url = api + \\\"search?keyWords=\\\" + getParam(\\\"kw\\\") + \\\"&uid=\\\" + getItem(\\\"uid\\\", \\\"\\\") + \\\"&platform=\\\" + [\\\"all\\\", \\\"huya\\\", \\\"douyu\\\", \\\"bilibili\\\", \\\"douyin\\\", \\\"cc\\\"][\\n            [\\\"所有平台\\\", \\\"虎牙直播\\\", \\\"斗鱼直播\\\", \\\"哔哩哔哩\\\", \\\"抖音直播\\\", \\\"网易CC\\\"].indexOf(getParam(\\\"engine\\\"))\\n        ]\\n        let json = JSON.parse(request(url, headers)).data;\\n        d = json.map(data => ({\\n            title: data.platform.replace('huya', '虎牙').replace('douyu', '斗鱼').replace('cc', '网易CC').replace(\\\"bilibili\\\", \\\"哔哩\\\").replace(\\\"douyin\\\", \\\"抖音\\\") + '·' + data.nickName,\\n            desc: data.followers >= \\\"10000\\\" ? (data.followers / 10000).toFixed(1) + \\\"万粉丝\\\" : data.followers + \\\"粉丝\\\",\\n            img: (data.headPic !== null && data.headPic.startsWith('/') ? 'https:' + data.headPic : data.headPic) + '@Referer=',\\n            content: data.isLive == '1' ? '直播中' : '未开播',\\n            url: getItem('multiline', '0') == \\\"0\\\" ? api + \\\"getRealUrlMultiSource?platform=\\\" + data.platform + \\\"&roomId=\\\" + data.roomId + $.require(\\\"public?&rule=JustLive\\\").Lazy(data.isLive) : \\\"hiker://page/detail?#immersiveTheme#&rule=JustLive&platform=\\\" + data.platform + \\\"&roomId=\\\" + data.roomId\\n        }))\\n        setResult(d);\\n    }\\n};\"},{\"col_type\":\"movie_3\",\"name\":\"公用函数\",\"path\":\"public\",\"rule\":\"$.exports.Api = \\\"http://yj1211.work:8013/api/live/\\\";\\n\\n$.exports.headers = {\\n    headers: {\\n        \\\"User-Agent\\\": \\\"okhttp/3.12.13\\\"\\n    }\\n};\\n\\n$.exports.From = function(d, fro) {\\n    let tit = [\\\"虎牙\\\", \\\"斗鱼\\\", \\\"哔哩\\\", \\\"抖音\\\", \\\"网易\\\"];\\n    let furl = [\\\"huya\\\", \\\"douyu\\\", \\\"bilibili\\\", \\\"douyin\\\", \\\"cc\\\"];\\n    let pic = [\\\"https://hikerfans.com/tubiao/erdi/68.png\\\", \\\"https://hikerfans.com/tubiao/erdi/1.png\\\", \\\"https://hikerfans.com/tubiao/erdi/320.png\\\", \\\"https://hikerfans.com/tubiao/erdi/160.png\\\", \\\"https://hikerfans.com/tubiao/erdi/214.png\\\"];\\n    let titll = fro == \\\"Mypt\\\" ? getMyVar(fro, \\\"huya\\\") : getMyVar(fro);\\n    for (let i in tit) {\\n        let ti = tit[i];\\n        d.push({\\n            title: furl[i] == titll ? \\\"‘‘’’<b>\\\" + ti.fontcolor(\\\"#FA7298\\\") + \\\"</b>\\\" : ti,\\n            url: $('#noLoading#').lazyRule((url, fro) => {\\n                putMyVar(fro, url);\\n                clearMyVar('typeNameVar');\\n                refreshPage(false);\\n                return \\\"hiker://empty\\\";\\n            }, furl[i], fro),\\n            img: pic[i] + \\\"@Referer=\\\",\\n            col_type: \\\"icon_5\\\"\\n        })\\n    };\\n};\\n\\n$.exports.Lists = function(api, uid, place, d, roomId, platForm, ownerName, categoryName, online, roomPic, isLive) {\\n    let category = categoryName != \\\"\\\" ? categoryName + '·' : \\\"\\\";\\n    let Live = (isLive == '1' ? '直播中' : '未开播') + '·';\\n    let 万 = place == \\\"home\\\" ? \\\"万\\\" : \\\"万粉丝\\\";\\n    let 人 = place == \\\"home\\\" ? \\\"人\\\" : \\\"粉丝\\\";\\n    let line = online >= \\\"10000\\\" ? (online / 10000).toFixed(1) + 万 : online + 人;\\n    let plat = platForm.replace('huya', '虎牙').replace('douyu', '斗鱼').replace('cc', '网易CC').replace(\\\"bilibili\\\", \\\"哔哩\\\").replace(\\\"douyin\\\", \\\"抖音\\\");\\n    let roompic = roomPic != null && roomPic.startsWith('/') ? 'https:' + roomPic : roomPic;\\n    let real = getItem('multiline', '0') == \\\"0\\\" ? \\\"getRealUrlMultiSource\\\" : getItem('multiline', '0') == \\\"2\\\" ? \\\"getRealUrl\\\" : \\\"\\\";\\n    d.push({\\n        title: plat + '·' + ownerName,\\n        desc: (place == \\\"so\\\" ? Live : category) + line,\\n        img: roompic + '@Referer=',\\n        url: /0|2/.test(getItem('multiline', '0')) ? api + real + \\\"?platform=\\\" + platForm + \\\"&roomId=\\\" + roomId + $.require(\\\"public\\\").Lazy(isLive) : \\\"hiker://page/detail?#immersiveTheme#&platform=\\\" + platForm + \\\"&roomId=\\\" + roomId,\\n        col_type: \\\"movie_2\\\",\\n        extra: {\\n            cls: \\\"cls_Subs \\\" + \\\"cls-\\\" + place,\\n            id: \\\"id_\\\" + platForm + roomId,\\n            isLive: isLive,\\n            inheritTitle: false,\\n            longClick: [{\\n                title: getItem(platForm + roomId, \\\"0\\\") == \\\"1\\\" ? \\\"已关注\\\" : \\\"未关注\\\",\\n                js: $.require(\\\"public\\\").LongClick(api, uid, roomId, platForm),\\n            }, {\\n                title: \\\"官网链接\\\",\\n                js: $.toString((roomid, platform) => {\\n                    switch (platform) {\\n                        case \\\"douyu\\\":\\n                            var url = \\\"https://m.douyu.com/\\\" + roomid\\n                            break\\n                        case \\\"bilibili\\\":\\n                            var url = \\\"https://live.bilibili.com/h5/\\\" + roomid\\n                            break\\n                        case \\\"huya\\\":\\n                            var url = \\\"https://m.huya.com/\\\" + roomid\\n                            break\\n                        case \\\"douyin\\\":\\n                            var url = \\\"https://live.douyin.com/\\\" + roomid\\n                            break\\n                        case \\\"cc\\\":\\n                            var url = \\\"https://h5.cc.163.com/cc/\\\" + roomid\\n                            break\\n                    }\\n                    return url\\n                }, roomId, platForm)\\n            }]\\n        }\\n    })\\n};\\n\\n$.exports.LongClick = function(api, uid, roomid, platform) {\\n    return $.toString((api, uid, roomid, platform) => {\\n        if (getItem(platform + roomid, \\\"0\\\") == \\\"0\\\") {\\n            var foll = \\\"follow\\\";\\n            setItem(platform + roomid, \\\"1\\\");\\n        } else {\\n            var foll = \\\"unFollow\\\";\\n            clearItem(platform + roomid);\\n        };\\n        let res = JSON.parse(request(api + foll + \\\"?platform=\\\" + platform + \\\"&roomId=\\\" + roomid + \\\"&uid=\\\" + uid, $.require(\\\"public\\\").headers));\\n\\n        let subs = findItemsByCls(\\\"cls_Subs\\\") || [];\\n        if (subs.length == 0) {\\n            return \\\"toast://没有获取到关注列表\\\";\\n        };\\n        let tit = getItem(platform + roomid, \\\"0\\\");\\n        for (let i in subs) {\\n            let li = subs[i];\\n            let cls = li.extra.cls;\\n            let js2 = li.extra.longClick[1].js;\\n            updateItem(\\\"id_\\\" + platform + roomid, {\\n                extra: {\\n                    cls: cls,\\n                    id: \\\"id_\\\" + platform + roomid,\\n                    inheritTitle: false,\\n                    longClick: [{\\n                        title: tit == \\\"1\\\" ? \\\"已关注\\\" : \\\"未关注\\\",\\n                        js: $.require(\\\"public\\\").LongClick(api, uid, roomid, platform),\\n                    }, {\\n                        title: \\\"官网链接\\\",\\n                        js: js2\\n                    }]\\n                }\\n            });\\n            if (getMyVar(\\\"sType\\\", \\\"\\\") !== \\\"\\\" && tit == 0) {\\n                deleteItem(\\\"id_\\\" + platform + roomid);\\n            };\\n        };\\n        return \\\"toast://\\\" + res.data;\\n    }, api, uid, roomid, platform);\\n};\\n\\n$.exports.Lazy = function(isLive) {\\n    return $(\\\"\\\").lazyRule((isLive) => {\\n        if (isLive == 0) return \\\"toast://直播已结束！\\\";\\n        let json = JSON.parse(fetch(input, $.require(\\\"public?&rule=\\\" + getMyVar(\\\"R_ule\\\", MY_RULE.title)).headers)).data || [];\\n        let toas = \\\"toast://直播已结束或没有获取到数据\\\";\\n        if (Object.keys(json).length == 0) return toas;\\n        let mid = input.split(\\\"roomId=\\\")[1];\\n        let name = [];\\n        let urls = [];\\n        if (/getRealUrlMultiSource/.test(input)) {\\n            for (let xl in json) {\\n                let list = json[xl];\\n                for (let i in list) {\\n                    let li = list[i];\\n                    name.push(li.qualityName)\\n                    urls.push(li.playUrl)\\n                };\\n                return JSON.stringify(urls) == '[\\\"\\\"]' ? toas : JSON.stringify({\\n                    names: name,\\n                    urls: urls,\\n                    danmu: /douyu暂无/.test(urls) ? \\\"web://http://douyu_danmu.dev.tyrantg.com/?rid=\\\" + mid + \\\"&ver=1\\\" : /huya/.test(urls) ? \\\"\\\" : \\\"\\\"\\n                });\\n            };\\n        } else {\\n            let names = {\\n                \\\"OD\\\": \\\"原画\\\",\\n                \\\"FD\\\": \\\"流畅\\\",\\n                \\\"LD\\\": \\\"标清\\\",\\n                \\\"SD\\\": \\\"高清\\\",\\n                \\\"HD\\\": \\\"超清\\\",\\n                \\\"2K\\\": \\\"2K\\\",\\n                \\\"4K\\\": \\\"4K\\\",\\n                \\\"FHD\\\": \\\"全高清\\\",\\n                \\\"XLD\\\": \\\"极速\\\",\\n                \\\"SQ\\\": \\\"普通音质\\\",\\n                \\\"HQ\\\": \\\"高音质\\\"\\n            };\\n            for (let key in json) {\\n                if (!/ayyuid|to/.test(key)) {\\n                    urls.push(json[key])\\n                    name.push(names[key])\\n                }\\n            };\\n            return JSON.stringify(urls) == '[\\\"\\\"]' ? toas : JSON.stringify({\\n                names: name,\\n                urls: urls,\\n                danmu: /douyu暂无/.test(urls) ? \\\"web://http://douyu_danmu.dev.tyrantg.com/?rid=\\\" + mid + \\\"&ver=1\\\" : /huya/.test(urls) ? \\\"\\\" : \\\"\\\"\\n            });\\n        };\\n    }, isLive);\\n};\\n\\n$.exports.Empty = function(d, desc) {\\n    d.push({\\n        title: \\\"<br><br>\\\",\\n        col_type: 'rich_text'\\n    }, {\\n        desc: desc,\\n        url: 'hiker://empty',\\n        col_type: 'text_center_1',\\n        extra: {\\n            lineVisible: false\\n        }\\n    });\\n};\\n\\n$.exports.Nys = function(d) {\\n    d.push({\\n        title: \\\"<br><br>\\\",\\n        col_type: 'rich_text'\\n    }, {\\n        desc: \\\"关 注 的 主 播 未 开 播\\\",\\n        url: \\\"hiker://empty\\\",\\n        col_type: \\\"text_center_1\\\",\\n        extra: {\\n            lineVisible: false,\\n            cls: \\\"cls-Subs\\\"\\n        }\\n    });\\n};\\n\\n$.exports.Loading = function(s, title) {\\n    s.push({\\n        title: title,\\n        col_type: \\\"rich_text\\\",\\n        extra: {\\n            cls: \\\"cls_load\\\"\\n        }\\n    }, {\\n        img: \\\"https://hikerfans.com/weisyr/img/Loading1.gif\\\",\\n        url: \\\"hiker://empty\\\",\\n        col_type: \\\"pic_1_center\\\",\\n        extra: {\\n            cls: \\\"cls_load\\\"\\n        }\\n    });\\n};\"}]","proxy":"","icon":"https://s1.ax1x.com/2022/10/24/xRQZUf.jpg"},{"last_chapter_rule":"","pageList":[{"col_type":"movie_3","name":"页面","path":"Config.view","rule":"const apiview = {\n    color: (test) => {\n        return '<font color=\"#FA7298\">' + test + '</font>';\n    },\n    orange: (test) => {\n        return '<font color=\"#FFA500\">' + test + '</font>';\n    },\n    black: (test) => {\n        return '<font color=\"#000000\">' + test + '</font>';\n    },\n    strong: (test) => {\n        return \"<strong>\" + test + \"</strong>\";\n    },\n    small: (test) => {\n        return \"<small>\" + test + \"</small>\";\n    },\n    center: (test) => {\n        return '<p style=\"text-align: center;\">' + test + '</p>';\n    },\n    big: (test) => {\n        return \"<big>\" + test + \"</big>\";\n    },\n    gray: (test) => {\n        return '<font color=\"gray\">' + test + '</font>';\n    },\n    rich: (test) => {\n        return \"‘‘’’\" + test;\n    },\n    addressTag: (url, text) => {\n        return '<a href=\"' + url + '\">' + text + '</a>';\n    },\n    empty: \"hiker://empty\",\n    layout: [],\n    _Get_scription: \"hiker://files/rules/js/subscription.js\",\n    _fileUtil: (text) => {\n        if (!text.startsWith(\"http\") && !text.startsWith(\"https\")) {\n            return `https://api.coolapk.com${text}`;\n        };\n        return text;\n    },\n    _fileWebUtil: (text) => {\n        if (!text.startsWith(\"http\") && !text.startsWith(\"https\")) {\n            return `http://www.coolapk.com${text}`;\n        };\n        return text;\n    },\n    _Get_keyword: (kw, empty) => {\n        let mem = storage0.getItem(MY_RULE.title, []);\n        mem = mem.filter(it => it != kw);\n        if (mem.length >= 10) {\n            mem = mem.slice(1);\n        };\n        mem.push(kw);\n        storage0.setItem(MY_RULE.title, mem);\n        return empty;\n    },\n    _Position_tool: (data, array, choice, uuid) => {\n        let obj = {};\n        data.forEach((item, index) => {\n            if (item[uuid] === array[uuid]) {\n                obj = item;\n                data.splice(index, 1);\n                return;\n            };\n        });\n        switch (choice) {\n            case \"top\":\n                data.unshift(obj);\n                break;\n            case \"end\":\n                data.push(obj);\n                break;\n        };\n    },\n    _generateStars: (num) => {\n        let stars = \"★\".repeat(num);\n        let whitespaces = \"☆\".repeat(5 - num);\n        return stars + whitespaces;\n    },\n    _generateString: (str, maxLength) => {\n        if (str.length > maxLength) {\n            return str.substring(0, maxLength) + \"...\";\n        } else {\n            return str;\n        };\n    },\n    _formatTimestamp: (timestamp) => {\n        let now = Date.now() / 1000;\n        let secondsPerDay = 86400;\n        let secondsPerWeek = secondsPerDay * 7;\n        let diff = now - timestamp;\n        if (diff <= secondsPerWeek) {\n            if (diff < secondsPerDay) {\n                let hoursAgo = Math.floor(diff / 3600);\n                let minutesAgo = Math.floor((diff % 3600) / 60);\n                return `${hoursAgo === 0 ? `${minutesAgo}分钟前` : `${hoursAgo}小时前`}`;\n            } else {\n                let daysAgo = Math.floor(diff / secondsPerDay);\n                return `${daysAgo}天前`;\n            };\n        } else {\n            let date = new Date(timestamp * 1000);\n            let year = date.getFullYear();\n            let month = String(date.getMonth() + 1).padStart(2, \"0\");\n            let day = String(date.getDate()).padStart(2, \"0\");\n            return `${year}-${month}-${day}`;\n        };\n    },\n    _objectToQueryString: (obArr) => {\n        return Object.entries(obArr).map(([key, val]) => `${encodeURIComponent(key)}=${encodeURIComponent(val)}`).join(\"&\");\n    },\n    _generateRandomString: (length) => {\n        let result = \"\";\n        const characters = \"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n        const charactersLength = characters.length;\n        for (let i = 0; i < length; i++) {\n            result += characters.charAt(Math.floor(Math.random() * charactersLength));\n        };\n        return result;\n    },\n    _generateTokenString: () => {\n        function getRandomValues(array) {\n            let rand_max = 256;\n            if (array instanceof Uint8Array || array instanceof Int8Array) {\n                rand_max = 256;\n            } else if (array instanceof Uint16Array || array instanceof Int16Array) {\n                rand_max = 65536;\n            } else if (array instanceof Uint32Array || array instanceof Int32Array) {\n                rand_max = 4294967296;\n            };\n\n            for (let i = 0; i < array.length; i++) {\n                array[i] = getRandomInt(0, rand_max);\n            };\n        };\n\n        function getRandomInt(min, max) {\n            min = Math.ceil(min);\n            max = Math.floor(max);\n            return Math.floor(Math.random() * (max - min)) + min;\n        };\n        const bcrypt = $.require(\"https://unpkg.com/bcryptjs@2.4.3/dist/bcrypt.min.js\");\n\n        bcrypt.setRandomFallback(function(size) {\n            let array = new Uint32Array(size);\n            getRandomValues(array);\n            return array;\n        });\n        let randomString = getMyVar(\":string\", \"0\");\n        if (randomString == \"0\") {\n            showLoading(\"获取token中，请稍等...\");\n            randomString = apiview._generateRandomString(50);\n            putMyVar(\":string\", randomString);\n        };\n\n        function getV2Token(deviceCode) {\n            let tokenPart = \"token://com.coolapk.market/dcf01e569c1e3db93a3d0fcf191a622c?\";\n\n            function formatBase64(str) {\n                return str.replace(/[\\r\\n=]/g, \"\");\n            };\n            let deviceCodeMd5 = md5(deviceCode);\n            let timestamp = Math.floor(Date.now() / 1000);\n            let timestampMd5 = md5(timestamp.toString());\n            let timestampBase64 = formatBase64(base64Encode(timestamp.toString()));\n            let token = `${tokenPart}${timestampMd5}$${deviceCodeMd5}&com.coolapk.market`;\n            let tokenBase64 = formatBase64(base64Encode(token));\n            let tokenBase64Md5 = md5(tokenBase64);\n            let tokenMd5 = md5(token);\n            let arg = `\\$2y\\$10$${timestampBase64}/${tokenMd5}`;\n            let salt = arg.slice(0, 31) + \"u\";\n            let cryptStr = bcrypt.hashSync(tokenBase64Md5, salt);\n            let cryptBase64 = base64Encode(cryptStr);\n            return `v2${cryptBase64}`;\n        };\n        let tokenString = getMyVar(\":token\", \"0\");\n        if (tokenString == \"0\") {\n            tokenString = getV2Token(randomString);\n            toast(\"获取成功\");\n            hideLoading();\n            putMyVar(\":token\", tokenString);\n        };\n    },\n    _demol_Ajax: (_demol, _object, _next, _url) => {\n        let _demolMap = request(apiview._fileUtil(_demol + ($.type(_object) == \"object\" ? (\"?\" + apiview._objectToQueryString(_object)) : \"\")), Object.assign({\n            headers: {\n                \"X-App-Version\": \"13.3.6\",\n                \"X-App-Code\": \"2310232\",\n                \"X-Api-Version\": \"13\",\n                \"X-App-Id\": \"com.coolapk.market\",\n                \"X-App-Token\": getMyVar(\":token\", \"0\"),\n                \"X-App-Device\": getMyVar(\":string\", \"0\"),\n                \"X-Requested-With\": \"XMLHttpRequest\",\n                \"X-App-Channel\": \"coolapk\"\n            },\n            body: $.type(_next) == \"object\" ? apiview._objectToQueryString(_next) : \"\",\n            method: _next ? \"post\" : \"get\"\n        }, _url ? {\n            onlyHeaders: true\n        } : {}));\n        eval(\"_demolMap =\" + _demolMap);\n        if (_url) return _demolMap.url;\n        if (!_demolMap.data) {\n            if (_demolMap.message) {\n                toast(_demolMap.message);\n            };\n            return {};\n        };\n        return _demolMap.data;\n    },\n    _getRegExp: (_demolMap, _next) => {\n        let _type_ = _demolMap.entityType;\n        let _demol_ = _demolMap.extra_fromApi;\n        let _text_ = _demolMap.message;\n        let _id_ = _demolMap.id;\n        let _demolReply = _demolMap.replyRows;\n        if (!_next && (_type_ == \"feed\" || _type_ == \"nodeRating\") && _text_.search(\"查看更多\") == -1) {\n            _text_ += apiview.addressTag(\"\", \"查看更多\");\n        } else if (!_next && _type_ == \"feed_reply\" && _demolReply && $.type(_demolReply) == \"array\" && _demolReply.length > 0) {\n            _text_ += apiview.addressTag(\"\", \"查看更多\");\n        };\n        return _text_ ? (_text_\n            .replace(new RegExp(\"\\n\", \"g\"), \"<br>\")\n            .replace(/src=\"(.*?)\"/g, (match, group1) => {\n                return match.replace(group1, `${group1}#originalSize#`);\n            })\n            .replace(/\"t\\/(.*?)\"/g, (match, group1) => {\n                return $(apiview.empty + \"#noHistory##noRecordHistory##gameTheme#fypage\").b64().rule((group1) => {\n                    const apiview = $.require(\"Config.view\");\n                    apiview._layoutTabRuleParse(group1);\n                    setResult(apiview.layout);\n                }, group1);\n            })\n            .replace(/(<a class=\"feed-link-uname[\\S\\s]*?<\\/a>)/g, (match) => {\n                let _demolTag = pdfh(match, \"a&&Text\");\n                let _demolUrl = pdfh(match, \"a&&href\");\n                let _demol = _demolTag.split(\"@\")[1];\n                return match.replace(`\"${_demolUrl}\"`, () => $(\"#noLoading#\").b64().lazyRule((_demol) => {\n                    const apiview = $.require(\"Config.view\");\n                    let _demolMap = apiview._demol_Ajax(\"/v6/user/space\", {\n                        uid: _demol\n                    });\n                    if (Object.keys(_demolMap).length > 0) {\n                        return $(apiview.empty + \"#noHistory##noRecordHistory##gameTheme#fypage\").rule((_demolMap) => {\n                            const apiview = $.require(\"Config.view\");\n                            if (MY_PAGE == 1) {\n                                apiview._generateTop();\n                            };\n                            apiview._layoutUserRuleParse(_demolMap);\n                            setResult(apiview.layout);\n                        }, _demolMap)\n                    } else {\n                        return apiview.empty;\n                    };\n                }, _demol));\n            })\n            .replace(/(<a class=\"feed-link-tag\"[\\S\\s]*?<\\/a>)/g, (match) => {\n                let _demolTag = pdfh(match, \"a&&Text\");\n                let _demolUrl = pdfh(match, \"a&&href\");\n                let _demol_ = _demolTag.split(\"#\")[1];\n                return match.replace(`\"${_demolUrl}\"`, () => $(apiview.empty + \"#noHistory##noRecordHistory##gameTheme#fypage\").b64().rule((_demol_) => {\n                    const apiview = $.require(\"Config.view\");\n                    apiview._layoutTabRuleParse(_demol_);\n                    setResult(apiview.layout);\n                }, _demol_));\n            })\n            .replace(/\" \"/g, apiview.empty)\n            .replace(/\"\"/g, () => {\n                return $(apiview.empty + \"#noHistory##noRecordHistory##gameTheme#fypage\").b64().rule((_id_, _demol_, _type_) => {\n                    const apiview = $.require(\"Config.view\");\n                    let _demolpage = MY_PAGE;\n                    if (_type_ == \"feed_reply\") {\n                        if (_demolpage == 1) {\n                            apiview._generateTop();\n                        };\n                        let _demolMap = apiview._demol_Ajax(\"/v6/feed/replyList\", {\n                            id: _id_,\n                            listType: \"\",\n                            page: _demolpage,\n                            discussMode: 0,\n                            feedType: \"feed_reply\",\n                            blockStatus: 0,\n                            fromFeedAuthor: 0\n                        });\n                        apiview._layoutDetermineParse(_demolMap, _id_);\n                    } else if (_type_ == \"feed\" || _type_ == \"nodeRating\") {\n                        apiview._layoutRuleParse(_id_, _demol_);\n                    };\n                    setResult(apiview.layout);\n                }, _id_, _demol_, _type_);\n            })) : _text_;\n    },\n    _baseParse: () => {\n        apiview._generateTokenString();\n        let tooldown = apiview._Get_scription;\n        if (!fileExist(tooldown)) saveFile(tooldown, JSON.stringify({}), 0);\n        eval(\"ajax_map =\" + readFile(tooldown));\n        if (ajax_map[MY_RULE.title] == null) {\n            ajax_map[MY_RULE.title] = {};\n            saveFile(tooldown, JSON.stringify(ajax_map), 0);\n        };\n        [\"user\", \"topic\", \"card\", \"album\", \"product\", \"apk\", \"dyh\"][\"forEach\"](it => {\n            if (ajax_map[MY_RULE.title][it] == null) {\n                ajax_map[MY_RULE.title][it] = [];\n                saveFile(tooldown, JSON.stringify(ajax_map), 0);\n            };\n        });\n        let _demolpage = MY_PAGE;\n        let tindex = getMyVar(\":baseTag\", \"0\");\n        let xindex = getMyVar(tindex + \":baseTax\", \"0\");\n        let _objectArray = storage0.getMyVar(\":baseTab\", []);\n        if (_objectArray.length == 0) {\n            demolTime = parseInt(Date.now() / 1000).toString();\n            _objectArray = apiview._demol_Ajax(\"/v6/main/init\", {\n                exp: 0,\n                t: demolTime\n            });\n            _objectArray = _objectArray.filter(_ => _.entityTemplate == \"configCard\");\n            _objectArray = _objectArray.concat([{\n                title: \"订阅\",\n                entities: []\n            }, {\n                title: \"搜索\",\n                entities: []\n            }]);\n            storage0.putMyVar(\":baseTab\", _objectArray);\n        };\n        let _demolMap = storage0.getMyVar(tindex + \":baseTab\", []);\n        if (_demolMap.length == 0) {\n            _demolMap = _objectArray[tindex][\"entities\"];\n            _demolMap = _demolMap.filter(_ => _.title != \"关注\" && _.title != \"二手\");\n            storage0.putMyVar(tindex + \":baseTab\", _demolMap);\n        };\n        if (_demolpage == 1) {\n            apiview.layout = apiview.layout.concat(_objectArray.map((item, i) => ({\n                title: i == tindex ? apiview.rich(apiview.strong(apiview.color(item.title))) : item.title,\n                url: $(\"#noLoading#\").lazyRule((i, empty) => {\n                    clearMyVar(\":linkNext\");\n                    clearMyVar(\":linkTag\");\n                    putMyVar(\":baseTag\", i);\n                    refreshPage();\n                    return empty;\n                }, i, apiview.empty),\n                col_type: \"scroll_button\",\n                extra: {\n                    backgroundColor: i == tindex ? \"#20FA7298\" : \"\"\n                }\n            })));\n            apiview.layout.push({\n                title: \"设置\",\n                url: $(apiview.empty + \"#noHistory##noRecordHistory#\").rule(() => {\n                    const apiview = $.require(\"Config.view\");\n                    apiview._layoutMenuParse();\n                    setResult(apiview.layout);\n                }),\n                col_type: \"scroll_button\",\n                extra: {\n                    pageTitle: \"设置｜页面\"\n                }\n            });\n            apiview.layout.push({\n                col_type: \"blank_block\"\n            });\n            apiview.layout = apiview.layout.concat(_demolMap.map((item, i) => ({\n                title: i == xindex ? apiview.rich(apiview.strong(apiview.color(item.title))) : item.title,\n                url: $(\"#noLoading#\").lazyRule((i, empty, tindex) => {\n                    clearMyVar(\":linkNext\");\n                    clearMyVar(\":linkTag\");\n                    putMyVar(tindex + \":baseTax\", i);\n                    refreshPage();\n                    return empty;\n                }, i, apiview.empty, tindex),\n                col_type: \"scroll_button\",\n                extra: {\n                    backgroundColor: i == xindex ? \"#20FA7298\" : \"\",\n                }\n            })));\n            apiview.layout.push({\n                col_type: \"blank_block\"\n            });\n        };\n        let _demolLen = _objectArray.length;\n        switch (_objectArray[tindex]) {\n            case _objectArray[_demolLen - 1]:\n                apiview._searchParse();\n                break;\n            case _objectArray[_demolLen - 2]:\n                apiview._layoutSubscrParse();\n                break;\n            default:\n                apiview._firstpage_Parse(_demolMap[xindex]);\n                break;\n        };\n        setResult(apiview.layout);\n    },\n    _searchParse: () => {\n        let _demolpage = MY_PAGE;\n        let keyword = getMyVar(\":keyword\", \"\");\n        let type = getMyVar(\"searchType\", \"动态\");\n        if (_demolpage == 1) {\n            apiview.layout.push({\n                title: apiview.strong(apiview.big(\"搜索类型\")) + `<u>${type}</u>`,\n                url: $(\"#noLoading#\").lazyRule((type) => {\n                    return $([\"动态\", \"应用\", \"游戏\", \"用户\", \"话题\", \"数码\", \"二手\", \"问答\", \"应用集\", \"看看号\"], 3, \"搜索类型:\" + type).select(() => {\n                        putMyVar(\"searchType\", input);\n                        refreshPage();\n                        return \"toast://已切换为 \" + input;\n                    });\n                }, type),\n                img: $.require(\"icon.tool\").tabsearch,\n                col_type: \"avatar\"\n            }, {\n                title: \"搜索\",\n                desc: \"搜你想要的....\",\n                url: $.toString(() => {\n                    const apiview = $.require(\"Config.view\");\n                    let keywords = input.trim();\n                    putMyVar(\":keyword\", keywords);\n                    if (keywords) apiview._Get_keyword(input);\n                    refreshPage();\n                    return apiview.empty;\n                }),\n                col_type: \"input\",\n                extra: {\n                    defaultValue: getMyVar(\":keyword\")\n                }\n            });\n        };\n        if (keyword == \"\") {\n            let _objectArray = storage0.getMyVar(\":searchTag\", []);\n            if (_objectArray.length == 0) {\n                _objectArray = apiview._demol_Ajax(\"/v6/search\", {\n                    type: \"hotSearch\",\n                    refresh: 0,\n                    returnType: \"all\"\n                });\n                _objectArray = _objectArray.find(_ => _.entityTemplate == \"hotSearch\");\n                _objectArray = _objectArray.entities.map(it => it.title);\n                storage0.putMyVar(\":searchTag\", _objectArray);\n            };\n            if (_demolpage == 1) {\n                apiview.layout.push({\n                    title: apiview.big(\"📊 热门搜索\"),\n                    img: $.require(\"icon.tool\").hot,\n                    url: apiview.empty,\n                    col_type: \"text_icon\"\n                });\n                apiview.layout = apiview.layout.concat(_objectArray.slice(0, 10).map((it) => ({\n                    title: apiview.rich(apiview.small(apiview.gray(it))),\n                    url: $(\"#noLoading#\").lazyRule((it) => {\n                        const apiview = $.require(\"Config.view\");\n                        putMyVar(\":keyword\", it);\n                        apiview._Get_keyword(it);\n                        refreshPage();\n                        return apiview.empty;\n                    }, it),\n                    col_type: \"flex_button\"\n                })));\n                let mem = storage0.getItem(MY_RULE.title, []);\n                if (mem.length > 0) {\n                    apiview.layout.push({\n                        title: apiview.big(\"📝 搜索历史\"),\n                        img: $.require(\"icon.tool\").delete,\n                        url: $(\"是否清除搜索记录？\").confirm((id) => {\n                            clearItem(MY_RULE.title);\n                            refreshPage();\n                            toast(\"清除成功~\");\n                        }),\n                        col_type: \"text_icon\"\n                    });\n                };\n                for (let i = mem.length - 1; i >= 0; i--) {\n                    let it = mem[i];\n                    apiview.layout.push({\n                        title: apiview.rich(apiview.small(apiview.gray(it))),\n                        url: $(\"#noLoading#\").lazyRule((it) => {\n                            const apiview = $.require(\"Config.view\");\n                            putMyVar(\":keyword\", it);\n                            apiview._Get_keyword(it);\n                            refreshPage();\n                            return apiview.empty;\n                        }, it),\n                        col_type: \"flex_button\",\n                        extra: {\n                            longClick: apiview._extraSearch(it)\n                        }\n                    });\n                };\n            };\n        } else {\n            switch (type) {\n                case \"动态\":\n                    _demolMap = apiview._demol_Ajax(\"/v6/search\", {\n                        type: \"feed\",\n                        feedType: \"all\",\n                        sort: \"default\",\n                        searchValue: keyword,\n                        page: _demolpage,\n                        showAnonymous: \"-1\"\n                    });\n                    break;\n                case \"数码\":\n                    _demolMap = apiview._demol_Ajax(\"/v6/search\", {\n                        type: \"product\",\n                        searchValue: keyword,\n                        page: _demolpage,\n                        showAnonymous: \"-1\",\n                        category: \"\"\n                    });\n                    break;\n                case \"应用\":\n                    _demolMap = apiview._demol_Ajax(\"/v6/search\", {\n                        type: \"apk\",\n                        cat: \"\",\n                        sort: \"default\",\n                        searchValue: keyword,\n                        page: _demolpage\n                    });\n                    break;\n                case \"游戏\":\n                    _demolMap = apiview._demol_Ajax(\"/v6/search\", {\n                        type: \"game\",\n                        cat: \"\",\n                        sort: \"default\",\n                        searchValue: keyword,\n                        page: _demolpage\n                    });\n                    break;\n                case \"用户\":\n                    _demolMap = apiview._demol_Ajax(\"/v6/search\", {\n                        type: \"user\",\n                        searchValue: keyword,\n                        page: _demolpage,\n                        showAnonymous: \"-1\",\n                        category: \"\"\n                    });\n                    break;\n                case \"话题\":\n                    _demolMap = apiview._demol_Ajax(\"/v6/search\", {\n                        type: \"feedTopic\",\n                        searchValue: keyword,\n                        page: _demolpage,\n                        showAnonymous: \"-1\",\n                        category: \"\"\n                    });\n                    break;\n                case \"问答\":\n                    _demolMap = apiview._demol_Ajax(\"/v6/search\", {\n                        type: \"ask\",\n                        feedType: \"all\",\n                        searchValue: keyword,\n                        page: _demolpage\n                    });\n                    break;\n                case \"应用集\":\n                    _demolMap = apiview._demol_Ajax(\"/v6/search\", {\n                        type: \"album\",\n                        searchValue: keyword,\n                        page: _demolpage,\n                        showAnonymous: \"-1\",\n                        category: \"\"\n                    });\n                    break;\n                case \"看看号\":\n                    _demolMap = apiview._demol_Ajax(\"/v6/search\", {\n                        type: \"dyh\",\n                        searchValue: keyword,\n                        page: _demolpage,\n                        showAnonymous: \"-1\",\n                        category: \"\"\n                    });\n                    break;\n                case \"二手\":\n                    _demolMap = apiview._demol_Ajax(\"/v6/search\", {\n                        type: \"ershou\",\n                        sort: \"default\",\n                        searchValue: keyword,\n                        status: 1,\n                        deal_type: 0,\n                        city_code: \"\",\n                        is_link: \"\",\n                        exchange_type: \"\",\n                        ershou_type: \"\",\n                        product_id: \"\",\n                        tags: \"\",\n                        page: _demolpage\n                    });\n                    break;\n            };\n            if (_demolMap == null || $.type(_demolMap) == \"object\") {\n                _demolMap = [];\n            };\n            apiview._layoutDetermineParse(_demolMap);\n        };\n    },\n    _searchGoodsParse: () => {\n        let _demolpage = MY_PAGE;\n        let keyword = getMyVar(\":keywordGood\", \"\");\n        let type = getMyVar(\"searchGoodType\", \"京东\");\n        if (_demolpage == 1) {\n            apiview._generateTop();\n            apiview.layout.push({\n                title: apiview.strong(apiview.big(\"搜索类型\")) + `<u>${type}</u>`,\n                url: $(\"#noLoading#\").lazyRule((type) => {\n                    return $([\"京东\", \"淘宝\", \"拼多多\"], 3, \"搜索类型:\" + type).select(() => {\n                        putMyVar(\"searchGoodType\", input);\n                        refreshPage();\n                        return \"toast://已切换为 \" + input;\n                    });\n                }, type),\n                img: $.require(\"icon.tool\").tabsearch,\n                col_type: \"avatar\"\n            }, {\n                title: \"搜索\",\n                desc: \"搜你想要的....\",\n                url: $.toString(() => {\n                    const apiview = $.require(\"Config.view\");\n                    let keywords = input.trim();\n                    putMyVar(\":keywordGood\", keywords);\n                    if (keywords) apiview._Get_keyword(input);\n                    refreshPage();\n                    return apiview.empty;\n                }),\n                col_type: \"input\",\n                extra: {\n                    defaultValue: getMyVar(\":keywordGood\")\n                }\n            });\n        };\n        if (keyword == \"\") {\n            let _objectArray = storage0.getMyVar(\":searchGoodTag\", []);\n            if (_objectArray.length == 0) {\n                _objectArray = apiview._demol_Ajax(\"/v6/goods/searchHotWords\");\n                if ($.type(_objectArray) != \"array\") {\n                    _objectArray = _objectArray.split(\",\");\n                };\n                storage0.putMyVar(\":searchGoodTag\", _objectArray);\n            };\n            if (_demolpage == 1) {\n                if (_objectArray.length > 0) {\n                    apiview.layout.push({\n                        title: apiview.big(\"📊 热门搜索\"),\n                        img: $.require(\"icon.tool\").hot,\n                        url: apiview.empty,\n                        col_type: \"text_icon\"\n                    });\n                    apiview.layout = apiview.layout.concat(_objectArray.slice(0, 10).map((it) => ({\n                        title: apiview.rich(apiview.small(apiview.gray(it))),\n                        url: $(\"#noLoading#\").lazyRule((it) => {\n                            const apiview = $.require(\"Config.view\");\n                            putMyVar(\":keywordGood\", it);\n                            apiview._Get_keyword(it);\n                            refreshPage();\n                            return apiview.empty;\n                        }, it),\n                        col_type: \"flex_button\"\n                    })));\n                };\n                let mem = storage0.getItem(MY_RULE.title, []);\n                if (mem.length > 0) {\n                    apiview.layout.push({\n                        title: apiview.big(\"📝 搜索历史\"),\n                        img: $.require(\"icon.tool\").delete,\n                        url: $(\"是否清除搜索记录？\").confirm((id) => {\n                            clearItem(MY_RULE.title);\n                            refreshPage();\n                            toast(\"清除成功~\");\n                        }),\n                        col_type: \"text_icon\"\n                    });\n                };\n                for (let i = mem.length - 1; i >= 0; i--) {\n                    let it = mem[i];\n                    apiview.layout.push({\n                        title: apiview.rich(apiview.small(apiview.gray(it))),\n                        url: $(\"#noLoading#\").lazyRule((it) => {\n                            const apiview = $.require(\"Config.view\");\n                            putMyVar(\":keywordGood\", it);\n                            apiview._Get_keyword(it);\n                            refreshPage();\n                            return apiview.empty;\n                        }, it),\n                        col_type: \"flex_button\",\n                        extra: {\n                            longClick: apiview._extraSearch(it)\n                        }\n                    });\n                };\n            };\n        } else {\n            switch (type) {\n                case \"京东\":\n                    _demolMap = apiview._demol_Ajax(\"/v6/goods/search\", {\n                        keyword: keyword,\n                        sortName: \"inOrderCount30Days\",\n                        isCoupon: 1,\n                        page: _demolpage\n                    });\n                    break;\n                case \"淘宝\":\n                    _demolMap = apiview._demol_Ajax(\"/v6/goods/taobaoSearch\", {\n                        q: keyword,\n                        sort: \"total_sales\",\n                        page: _demolpage\n                    });\n                    break;\n                case \"拼多多\":\n                    _demolMap = apiview._demol_Ajax(\"/v6/page/dataList\", {\n                        url: \"/goods/searchPddGoodsList\",\n                        keyword: keyword,\n                        sortType: 6,\n                        page: _demolpage\n                    });\n                    break;\n            };\n            if (_demolMap == null || $.type(_demolMap) == \"object\") {\n                _demolMap = [];\n            };\n            apiview._layoutDetermineParse(_demolMap);\n        };\n    },\n    _firstpage_Parse: (_demolMap) => {\n        let _demolpage = MY_PAGE;\n        let demolTime = parseInt(Date.now() / 1000).toString();\n        let _demolUrl = _demolMap.url;\n        let _demolName = _demolMap.title;\n        if (_demolUrl.startsWith(\"/main/\")) {\n            apiview._layoutDetermineParse(apiview._demol_Ajax(\"/v6/main/indexV8\", {\n                page: _demolpage,\n                firstLaunch: 0,\n                installTime: demolTime,\n                ids: \"\"\n            }), \"false\");\n        };\n        if (_demolUrl.startsWith(\"/page\")) {\n            apiview._layoutDetermineParse(apiview._demol_Ajax(\"/v6/page/dataList\", {\n                url: _demolUrl,\n                title: _demolName,\n                subTitle: \"\",\n                page: _demolpage\n            }));\n        };\n        if (_demolUrl == \"/user/dyhSubscribe\") {\n            apiview._layoutDetermineParse(apiview._demol_Ajax(\"/v6/page/dataList\", {\n                url: \"/dyh/recommendList?&title=站内订阅\",\n                title: \"站内订阅\",\n                subTitle: \"\",\n                page: _demolpage\n            }));\n        };\n        if (_demolUrl == \"/product/categoryList\") {\n            apiview._layoutLinkTabParse(apiview._demol_Ajax(`/v6${_demolUrl}`));\n        };\n    },\n    _layoutDetermineParse: (_demolMap, _demol) => {\n        let _demol = _demol ? _demol : \"\";\n        let _linkNext = () => getMyVar(\":linkNext\" + _demol, \"\");\n        let _demolNext = _demolMap.some(it => it.entityTemplate === \"sortSelectCard\");\n        if (_demolNext) {\n            _demolMap = _demolMap.filter(it => it.entityTemplate === \"sortSelectCard\");\n        };\n        putMyVar(\":next\" + _demol, _demolNext ? \"true\" : \"\");\n        let _demolMap_ = (_linkNext() == \"true\" && !_demol) ? storage0.getMyVar(\":demolMap\" + _demol, []) : _demolMap;\n        let _demolMap = _demolMap.length > 0 ? _demolMap : _demolMap_;\n        if (_linkNext() == \"\" && _demolMap.length > 0) {\n            storage0.putMyVar(\":demolMap\" + _demol, _demolMap);\n        };\n        _demolMap.forEach((it, i) => {\n            _demolType = it.entityTemplate;\n            _type_ = it.entityType;\n            _demolMaps = it.entities;\n            if (_demolType == \"imageCarouselCard_1\") {\n                putVar(\":carouselMap\", JSON.stringify(_demolMaps));\n                putVar(\":ruleMap\", JSON.stringify(MY_RULE));\n                apiview.layout.push({\n                    url: getPath(\"hiker://files/rules/Carousel.html\"),\n                    desc: \"135&&list\",\n                    col_type: \"x5_webview_single\",\n                    extra: {\n                        ua: \"Dalvik/2.1.0 (Linux; U; Android 10; V2304A Build/UP1A.231005.007) (#Build; vivo; V2304A; UP1A.231005.007 release-keys; 10) +CoolMarket/13.3.6-2310232-universal\"\n                    }\n                });\n            } else if (_demolType == \"imageSquareScrollCard\") {\n                putVar(\":carouselMap\", JSON.stringify(_demolMaps));\n                putVar(\":ruleMap\", JSON.stringify(MY_RULE));\n                apiview.layout.push({\n                    url: getPath(\"hiker://files/rules/ScrollCard.html\"),\n                    desc: \"80&&list\",\n                    col_type: \"x5_webview_single\",\n                    extra: {\n                        ua: \"Dalvik/2.1.0 (Linux; U; Android 10; V2304A Build/UP1A.231005.007) (#Build; vivo; V2304A; UP1A.231005.007 release-keys; 10) +CoolMarket/13.3.6-2310232-universal\"\n                    }\n                });\n            } else if (_demolType == \"iconLinkGridCard\") {\n                apiview.layout = apiview.layout.concat(_demolMaps.map(_ => ({\n                    title: _.title,\n                    img: _.pic,\n                    url: (!_.url.startsWith(\"http\") && !_.url.startsWith(\"https\")) ? $(apiview.empty + \"#noHistory##noRecordHistory##gameTheme#fypage\").rule((_) => {\n                        const apiview = $.require(\"Config.view\");\n                        apiview._layoutLinkRuleParse(_);\n                        setResult(apiview.layout);\n                    }, _) : _.url,\n                    col_type: _demolMaps.length > 4 ? \"icon_5\" : \"icon_small_4\"\n                })));\n            } else if (_demolType == \"iconTabLinkGridCard\" || _demolType == \"verticalColumnsFullPageCard\" || _demolType == \"sortSelectCard\") {\n                putMyVar(\":linkNext\" + _demol, \"true\");\n                apiview._layoutLinkTabParse(_demolMaps, _demol);\n            } else if (_demolType == \"iconListCard\" || (_demolType == \"listCard\" && _demol != \"false\")) {\n                apiview._layoutDetermineParse(_demolMaps);\n            } else if (_demolType == \"imageTextGridCard\") {\n                apiview._layoutGridCardParse(_demolMaps);\n            } else if (_demolType == \"headCard\" && it.title && it.description) {\n                apiview._layoutHeadCardParse(it);\n            } else if (_demolType == \"textCard\" && it.title && it.description) {\n                apiview._layoutTextCardParse(it);\n            } else if (_demolType == \"noMoreDataCard\") {\n                apiview.layout.push({\n                    title: apiview.rich(apiview.small(apiview.gray(it.title))),\n                    url: apiview.empty,\n                    col_type: \"text_center_1\"\n                });\n            } else if (_demolType == null && _type_ == \"user\") {\n                apiview._layoutUserParse(it);\n            } else if (_type_ == \"collection\") {\n                apiview._layoutCollectionParse(it);\n            } else if (_type_ == \"album\") {\n                apiview._layoutAlbumParse(it);\n            } else if (_type_ == \"liveTopic\") {\n                apiview._layoutLiveParse(it);\n            } else if (_type_ == \"topic\" || _type_ == \"product\" || _type_ == \"apk\" || _type_ == \"dyh\") {\n                apiview._layoutTagParse(it);\n            } else if (_type_ == \"pear_goods\") {\n                apiview._layoutPearGoodParse(it);\n            } else if (_type_ == \"feed\" || _type_ == \"feed_reply\" || _type_ == \"nodeRating\") {\n                if (!it.extra_fromApi) {\n                    it.extra_fromApi = _demol;\n                };\n                if (!it.id) it.id = it.feed_id;\n                apiview._layoutFeedParse(it);\n            };\n        });\n        if (_demolMap.length == 0) {\n            apiview._End_Parse();\n        };\n    },\n    _layoutTextCardParse: (_demolMap) => {\n        _demolMap.message = `${apiview.big(apiview.strong(_demolMap.title))}${_demolMap.subTitle ? `<br>${_demolMap.subTitle}` : \"\"}<br><br>${_demolMap.description}`;\n        apiview.layout.push({\n            title: apiview._getRegExp(_demolMap, true),\n            col_type: \"rich_text\"\n        });\n    },\n    _layoutHeadCardParse: (_demolMap) => {\n        apiview._layoutTextCardParse(_demolMap);\n        apiview._generateEnd();\n    },\n    _layoutLiveParse: (_demolMap) => {\n        apiview.layout.push({\n            title: _demolMap.title,\n            desc: (_demolMap.live_status == -1 ? \"已结束 - \" : \"\") + _demolMap.description,\n            img: _demolMap.pic_url,\n            url: _demolMap.video_live_url,\n            col_type: \"movie_2\"\n        });\n    },\n    _layoutAlbumParse: (_demolMap) => {\n        apiview.layout.push({\n            title: _demolMap.title,\n            desc: `${_demolMap.description}\\n${_demolMap.apknum}个应用`,\n            img: _demolMap.logo,\n            url: $(apiview.empty + \"#noHistory##noRecordHistory##gameTheme#fypage\").rule((_demolUrl) => {\n                const apiview = $.require(\"Config.view\");\n                let _demolpage = MY_PAGE;\n                if (_demolpage == 1) {\n                    apiview._generateTop();\n                };\n                apiview._layoutAlbumRuleParse(apiview._demol_Ajax(\"/v6/album/apkList\", {\n                    id: _demolUrl,\n                    page: _demolpage\n                }));\n                setResult(apiview.layout);\n            }, _demolMap.id),\n            col_type: \"movie_1_left_pic\",\n            extra: {\n                longClick: apiview._extra_tool(_demolMap, \"album\", \"id\")\n            }\n        });\n    },\n    _layoutPearGoodParse: (_demolMap) => {\n        apiview.layout.push({\n            title: _demolMap.title,\n            desc: `${_demolMap.goods_buy_text}\\n${_demolMap.goods_promo_title}`,\n            img: _demolMap.goods_pic,\n            url: $(apiview.empty).lazyRule(({\n                goods_url,\n                goods_buy_url\n            }) => decodeURIComponent($.require(\"Config.view\")._demol_Ajax(\"/v6/goods/getBuyUrl\", null, {\n                goods_url: goods_url,\n                goods_buy_url: goods_buy_url\n            })), _demolMap),\n            col_type: \"movie_1_left_pic\"\n        });\n    },\n    _layoutCollectionParse: (_demolMap) => {\n        apiview.layout.push({\n            title: _demolMap.title,\n            desc: `${_demolMap.is_open_title}\\n${_demolMap.item_num}个内容`,\n            img: _demolMap.cover_pic,\n            url: _demolMap.is_open_title == \"公开\" ? $(apiview.empty + \"#noHistory##noRecordHistory##gameTheme#fypage\").rule((_demolUrl) => {\n                const apiview = $.require(\"Config.view\");\n                let _demolpage = MY_PAGE;\n                if (_demolpage == 1) {\n                    apiview._generateTop();\n                };\n                apiview._layoutDetermineParse(apiview._demol_Ajax(\"/v6/collection/itemList\", {\n                    id: _demolUrl,\n                    page: _demolpage\n                }), _demolUrl);\n                setResult(apiview.layout);\n            }, _demolMap.id) : `toast://${_demolMap.is_open_title}`,\n            col_type: \"movie_1_left_pic\"\n        });\n    },\n    _layoutGridCardParse: (_demolMap) => {\n        apiview.layout = apiview.layout.concat(_demolMap.map(_ => ({\n            title: _.title,\n            desc: \"0\",\n            img: _.pic,\n            url: $(apiview.empty + \"#noHistory##noRecordHistory##gameTheme#fypage\").rule((_) => {\n                const apiview = $.require(\"Config.view\");\n                let _demolpage = MY_PAGE;\n                let _demolName = _.title;\n                let _demolUrl = _.url;\n                if (_demolUrl.startsWith(\"/page\")) {\n                    _demolUrl = _demolUrl.split(\"=\")[1];\n                    if (_demolpage == 1) {\n                        apiview._generateTop();\n                        apiview._layoutDetermineParse(apiview._demol_Ajax(\"/v6/page/dataList\", {\n                            url: _demolUrl,\n                            title: _demolName,\n                            subTitle: \"\",\n                            page: _demolpage\n                        }));\n                    };\n                } else {\n                    _demolUrl = _demolUrl.split(\"/feed/\")[1];\n                    apiview._layoutRuleParse(_demolUrl);\n                };\n                setResult(apiview.layout);\n            }, _),\n            col_type: \"card_pic_1\"\n        })));\n        if (_demolMap.length == 0) {\n            apiview._End_Parse();\n        };\n    },\n    _layoutUserParse: (_demolMap) => {\n        _demolMap = _demolMap.userInfo || _demolMap;\n        let _demolMaps = {};\n        _demolMaps.username = _demolMap.username;\n        _demolMaps.userAvatar = _demolMap.userAvatar;\n        _demolMaps.uid = _demolMap.uid;\n        _demolMaps.entityType = _demolMap.entityType;\n        apiview.layout.push({\n            title: _demolMap.username,\n            img: _demolMap.userAvatar,\n            url: $(apiview.empty + \"#noHistory##noRecordHistory#fypage\").rule((_demolMaps) => {\n                const apiview = $.require(\"Config.view\");\n                apiview._layoutUserRuleParse(_demolMaps);\n                setResult(apiview.layout);\n            }, _demolMaps),\n            col_type: \"card_pic_3_center\",\n            extra: {\n                pageTitle: `用户/${_demolMap.username}`,\n                longClick: apiview._extra_tool(_demolMaps, \"user\", \"uid\", true)\n            }\n        });\n    },\n    _layoutTagParse: (_demolMap) => {\n        let _demolMaps = {};\n        _demolMaps.title = _demolMap.title;\n        _demolMaps.logo = _demolMap.logo;\n        _demolMaps.url = _demolMap.url;\n        _demolMaps.id = _demolMap.id;\n        _demolMaps.entityType = _demolMap.entityType;\n        switch (_demolMaps.entityType) {\n            case \"topic\":\n                _tag = \"topic\";\n                break;\n            case \"product\":\n                _tag = \"product\";\n                break;\n            case \"dyh\":\n                _tag = \"dyh\";\n                break;\n            default:\n                _tag = \"apk\";\n                break;\n        };\n        apiview.layout.push({\n            title: _demolMap.title,\n            img: _demolMap.logo,\n            url: $(apiview.empty + \"#noHistory##noRecordHistory##gameTheme#fypage\").rule((_demolMaps) => {\n                const apiview = $.require(\"Config.view\");\n\n                if (_demolMaps.url) {\n                    apiview._layoutLinkRuleParse(_demolMaps);\n                } else {\n                    apiview._layoutTabRuleParse(_demolMaps.id);\n                };\n                setResult(apiview.layout);\n            }, _demolMaps),\n            col_type: \"card_pic_3_center\",\n            extra: {\n                longClick: apiview._extra_tool(_demolMaps, _tag, \"title\")\n            }\n        });\n    },\n    _layoutAlbumRuleParse: (_demolMap) => {\n        apiview.layout = apiview.layout.concat(_demolMap.map(_ => ({\n            title: _.title,\n            desc: _.note,\n            img: _.pic,\n            url: $(apiview.empty + \"#noHistory##noRecordHistory##gameTheme#fypage\").rule((_) => {\n                const apiview = $.require(\"Config.view\");\n                let _demolUrl = _.url\n                if (_demolUrl.startsWith(\"http\") || _demolUrl.startsWith(\"https\")) {\n                    _.url = _demolUrl.split(apiview._fileWebUtil(\"\"))[1];\n                } else if (_demolUrl.startsWith(\"market:\")) {\n                    _.url = `/apk/${_demolUrl.split(\"=\")[1]}`;\n                };\n                apiview._layoutLinkRuleParse(_);\n                setResult(apiview.layout);\n            }, _),\n            col_type: \"movie_1_left_pic\"\n        })));\n        if (_demolMap.length == 0) {\n            apiview._End_Parse();\n        };\n    },\n    _layoutFeedParse: (_demolMap) => {\n        _type_ = _demolMap.entityType;\n        rusername = _demolMap.rusername;\n        userMap = _demolMap.userInfo || _demolMap;\n        infoHtml = _demolMap.infoHtml;\n        feedTypeName = _demolMap.feedTypeName;\n        _numberCard = Number(getItem(\":number\", \"3\"));\n        apiview.layout.push({\n            title: userMap.username + \"\\t\\t\" + apiview.small(apiview._formatTimestamp(_demolMap.dateline || _demolMap.regdate)),\n            desc: apiview.small((infoHtml ? infoHtml : \"\") + (feedTypeName ? feedTypeName : \"\") + (rusername ? rusername : \"\")),\n            img: userMap.userAvatar,\n            url: $(apiview.empty + \"#noHistory##noRecordHistory#fypage\").rule((_demolMap) => {\n                const apiview = $.require(\"Config.view\");\n                apiview._layoutUserRuleParse(_demolMap);\n                setResult(apiview.layout);\n            }, userMap),\n            col_type: \"avatar\",\n            extra: {\n                pageTitle: `用户/${userMap.username}`,\n                longClick: apiview._extra_tool(_demolMap, \"card\", \"id\")\n            }\n        });\n        apiview.layout.push({\n            col_type: \"line\"\n        });\n        if (_demolMap.star) {\n            apiview.layout.push({\n                title: `评分：${apiview.orange(apiview._generateStars(_demolMap.star)) + _demolMap.star * 2}分`,\n                col_type: \"rich_text\"\n            });\n        };\n        if (_demolMap.message_title) {\n            apiview.layout.push({\n                title: apiview.big(_demolMap.message_title),\n                col_type: \"rich_text\"\n            });\n        };\n        if (_demolMap.comment_good) {\n            _demolMap.message = apiview._generateString(_demolMap.comment_good, 30);\n        };\n        if (_demolMap.message) {\n            apiview.layout.push({\n                title: apiview._getRegExp(_demolMap),\n                col_type: \"rich_text\"\n            });\n        };\n        _demolPicMap = _demolMap.picArr;\n        if (_demolPicMap && $.type(_demolPicMap) == \"array\") {\n            _demolPicMap.forEach((_, i) => {\n                if (_type_ == \"feed_reply\" ? true : (i < _numberCard)) apiview.layout.push({\n                    img: _,\n                    url: _,\n                    col_type: \"pic_3_square\"\n                });\n            });\n        };\n        apiview.layout.push({\n            col_type: \"blank_block\"\n        });\n        if (_demolMap.target_info) {\n            apiview.layout.push({\n                title: _demolMap.target_info.title,\n                img: _demolMap.target_info.logo,\n                url: $(apiview.empty + \"#noHistory##noRecordHistory##gameTheme#fypage\").rule((_demolMap) => {\n                    const apiview = $.require(\"Config.view\");\n                    apiview._layoutLinkRuleParse(_demolMap, \"title\", \"url\");\n                    setResult(apiview.layout);\n                }, _demolMap.target_info),\n                col_type: \"avatar\"\n            });\n        };\n        if (_demolMap.ttitle) {\n            apiview.layout.push({\n                title: _demolMap.ttitle,\n                img: _demolMap.tpic,\n                url: $(apiview.empty + \"#noHistory##noRecordHistory##gameTheme#fypage\").rule((_demolMap) => {\n                    const apiview = $.require(\"Config.view\");\n                    apiview._layoutLinkRuleParse(_demolMap, \"ttitle\", \"turl\");\n                    setResult(apiview.layout);\n                }, _demolMap),\n                col_type: \"avatar\"\n            });\n        };\n        apiview.layout.push({\n            col_type: \"blank_block\"\n        });\n        if (_demolMap.share_num != null) {\n            apiview.layout.push({\n                title: String(_demolMap.likenum),\n                img: $.require(\"icon.tool\").good,\n                url: apiview.empty,\n                col_type: \"icon_small_3\"\n            }, {\n                title: String(_demolMap.replynum),\n                img: $.require(\"icon.tool\").discuss,\n                url: _demolMap.replynum > 0 ? $(apiview.empty + \"#noHistory##noRecordHistory##gameTheme#fypage\").rule((_id_) => {\n                    const apiview = $.require(\"Config.view\");\n                    if (MY_PAGE == 1) apiview._generateTop();\n                    apiview._layoutRemarkParse(_id_);\n                    setResult(apiview.layout);\n                }, _demolMap.id) : apiview.empty,\n                col_type: \"icon_small_3\"\n            }, {\n                title: String(_demolMap.share_num),\n                img: $.require(\"icon.tool\").share,\n                url: apiview.empty,\n                col_type: \"icon_small_3\"\n            });\n        };\n        apiview.layout.push({\n            col_type: \"line_blank\"\n        });\n    },\n    _layoutRemarkParse: (_id_) => {\n        let _demolpage = MY_PAGE;\n        addListener(\"onClose\", $.toString(() => {\n            clearMyVar(\":replyListType\");\n            clearMyVar(\":replyNext\");\n        }));\n        let _demoltype = getMyVar(\":replyListType\", \"默认\");\n        let fromFeedAuthor = null;\n        switch (_demoltype) {\n            case \"默认\":\n                _type_ = \"lastupdate_desc\";\n                break;\n            case \"最新\":\n                _type_ = \"dateline_desc\";\n                break;\n            case \"热门\":\n                _type_ = \"popular\";\n                break;\n            case \"楼主\":\n                _type_ = \"\";\n                fromFeedAuthor = 1;\n                break;\n        };\n        let _demolReplyMap = apiview._demol_Ajax(buildUrl(\"/v6/feed/replyList\", {\n            id: _id_,\n            listType: _type_,\n            page: _demolpage,\n            discussMode: 1,\n            feedType: \"feed\",\n            blockStatus: 0,\n            fromFeedAuthor: fromFeedAuthor ? fromFeedAuthor : 0\n        }), true);\n        let _next = _demolReplyMap && $.type(_demolReplyMap) == \"array\" && _demolReplyMap.length > 0;\n        if (_next) putMyVar(\":replyNext\", \"true\");\n        _next = getMyVar(\":replyNext\", \"\");\n        if (_demolpage == 1 && _next == \"true\") {\n            apiview.layout.push({\n                title: apiview.strong(apiview.big(\"评论区\")),\n                desc: `<u>${_demoltype}</u>`,\n                url: $([\"默认\", \"最新\", \"热门\", \"楼主\"], 2, \"排序:\" + _demoltype).select(() => {\n                    putMyVar(\":replyListType\", input);\n                    refreshPage(false);\n                    return \"toast://已切换为 \" + input;\n                }),\n                img: $.require(\"icon.tool\").replysort,\n                col_type: \"avatar\"\n            });\n        };\n        if (_next == \"true\") {\n            apiview._layoutDetermineParse(_demolReplyMap, _id_);\n        };\n    },\n    _layoutLinkRuleParse: (_demolMap, title, url) => {\n        let _demolpage = MY_PAGE;\n        let _demolUrl = _demolMap[url ? url : \"url\"];\n        _demolUrl = decodeURIComponent(_demolUrl);\n        let _demolName = _demolMap[title ? title : \"title\"];\n        if (!_demolUrl.startsWith(\"/page\") && _demolUrl.includes(\"/t/\")) {\n            _demolUrl = _demolUrl.split(\"/t/\")[1];\n            if (_demolMap.entityType == \"picCategory\") {\n                _demolUrl = _demolUrl.split(\"?\")[0];\n                apiview._layoutPictureRuleParse(_demolUrl);\n            } else {\n                apiview._layoutTabRuleParse(_demolUrl);\n            };\n        } else if (!_demolUrl.startsWith(\"/page\") && _demolUrl.includes(\"/product/\")) {\n            _demolUrls = _demolUrl.split(\"/product/\")[1];\n            if (_demolMap.entityType == \"picCategory\") {\n                _demolUrl = _demolUrls.split(\"?\")[0];\n                apiview._layoutPictureRuleParse(_demolUrl);\n            } else if (_demolUrls.startsWith(\"categoryList\")) {\n                if (_demolpage == 1) {\n                    apiview._generateTop();\n                };\n                _demolUrl = _demolUrl.split(\"?\")[0];\n                apiview._layoutLinkTabParse(apiview._demol_Ajax(`/v6${_demolUrl}`));\n            } else {\n                apiview._layoutTabRuleParse(_demolUrls);\n            };\n        } else if (!_demolUrl.startsWith(\"/page\") && _demolUrl.includes(\"/dyh/\")) {\n            _demolUrls = _demolUrl.split(\"/dyh/\")[1];\n            apiview._layoutDyhRuleParse(_demolUrls);\n        } else if (_demolUrl.endsWith(\"couponSearch\")) {\n            apiview._searchGoodsParse();\n        } else if (_demolUrl.startsWith(\"/apk/\") || _demolUrl.startsWith(\"/game/\")) {\n            if (_demolUrl.startsWith(\"/apk/\")) {\n                _demolUrl = _demolUrl.split(\"/apk/\")[1];\n            } else {\n                _demolUrl = _demolUrl.split(\"/game/\")[1];\n            };\n            apiview._layoutApkRuleParse(_demolUrl);\n        } else {\n            if (_demolpage == 1) apiview._generateTop();\n            if (_demolUrl.includes(\"/page\")) {\n                _demolUrl = _demolUrl.split(\"/page?url=\")[1];\n                if (_demolUrl.includes(\"selectedTab\")) {\n                    _demolUrl = _demolUrl.split(\"&\")[0];\n                };\n            } else {\n                _demolUrl = _demolUrl.split(\"#\")[1];\n            };\n            apiview._layoutDetermineParse(apiview._demol_Ajax(\"/v6/page/dataList\", {\n                url: _demolUrl,\n                title: _demolName,\n                subTitle: \"\",\n                page: _demolpage\n            }));\n        };\n    },\n    _layoutLinkTabParse: (_demolMap, _demol) => {\n        let _demol = _demol ? _demol : \"\";\n        addListener(\"onClose\", $.toString((_demol) => {\n            clearMyVar(\":linkNext\" + _demol);\n            clearMyVar(\":linkTag\" + _demol);\n        }, _demol));\n        let _demolpage = MY_PAGE;\n        let tindex = getMyVar(\":linkTag\" + _demol, \"0\");\n        let _demolMap = _demolMap.filter(_ => _.title != \"关注\" && _.title != \"品牌\");\n        if (_demolpage == 1) {\n            apiview.layout.push({\n                col_type: \"blank_block\"\n            });\n            apiview.layout = apiview.layout.concat(_demolMap.map((_, i) => ({\n                title: i == tindex ? apiview.rich(apiview.strong(apiview.color(_.title))) : _.title,\n                url: $(\"#noLoading#\").lazyRule((i, empty, _demol) => {\n                    putMyVar(\":linkTag\" + _demol, i);\n                    refreshPage();\n                    return empty;\n                }, i, apiview.empty, _demol),\n                col_type: \"scroll_button\",\n                extra: {\n                    backgroundColor: i == tindex ? \"#20FA7298\" : \"\"\n                }\n            })));\n        };\n        _demolMap = _demolMap[tindex];\n        let _demolUrl = _demolMap.url;\n        let _demolName = _demolMap.title;\n        let _linkNext = () => getMyVar(\":next\" + _demolUrl, \"\");\n        if (!_demolUrl.startsWith(\"http\") && !_demolUrl.startsWith(\"https\")) {\n            apiview._layoutDetermineParse(apiview._demol_Ajax(\"/v6/page/dataList\", {\n                url: _demolUrl,\n                title: _demolName,\n                subTitle: \"\",\n                page: _linkNext() ? 1 : _demolpage\n            }), _demolUrl);\n        } else {\n            apiview.layout.push({\n                desc: \"auto\",\n                url: _demolUrl,\n                col_type: \"x5_webview_single\",\n                extra: {\n                    canBack: true,\n                        urlInterceptor: $.toString((MY_RULE) => {\n                        if (input.includes(\"/t/\")) {\n                            let array = {\n                                url: input,\n                                title: \"\"\n                            };\n                            return $.toString((array, MY_RULE) => {\n                                fba.open(JSON.stringify({\n                                    rule: MY_RULE.title,\n                                    url: `hiker://page/Carousel.view?rule=酷安&page=fypage&array=${encodeURIComponent(JSON.stringify(array))}&hiker=#noHistory##noRecordHistory##gameTheme#fypage`,\n                                    findRule: MY_RULE.detail_find_rule,\n                                    extra: {\n                                        newWindow: true,\n                                        windowId: MY_RULE.title\n                                    }\n                                }));\n                            }, array, MY_RULE)\n                        }\n                    }, MY_RULE),\n                    ua: \"Mozilla/5.0 (Linux; Android 10; V2304A Build/UP1A.231005.007; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/74.0.3729.186 Mobile Safari/537.36 (#Build; vivo; V2304A; UP1A.231005.007 release-keys; 10) +CoolMarket/13.3.6-2310232-universal\"\n                }\n            });\n        };\n    },\n    _layoutRuleParse: (_id_, _demol_) => {\n        let _demolpage = MY_PAGE;\n        let _demolMap = storage0.getMyVar(`${_id_}:feedDetail`, []);\n        if (_demolMap.length == 0) {\n            _demolMap = apiview._demol_Ajax(\"/v6/feed/detail\", Object.assign({\n                id: _id_\n            }, _demol_ ? {\n                fromApi: _demol_\n            } : {}), true);\n            storage0.putMyVar(`${_id_}:feedDetail`, _demolMap);\n        };\n        let _demolPics = _demolMap.picArr;\n        if (_demolpage == 1) {\n            apiview._generateTop();\n            if (_demolPics && $.type(_demolPics) == \"array\") {\n                apiview.layout = apiview.layout.concat(_demolPics.map(_ => ({\n                    img: _,\n                    url: _,\n                    col_type: \"pic_3_square\"\n                })));\n            };\n            let _demolMsg = apiview._getRegExp(_demolMap, true);\n            if (_demolMsg) {\n                apiview.layout.push({\n                    title: _demolMsg,\n                    col_type: \"rich_text\"\n                });\n                apiview.layout.push({\n                    col_type: \"line_blank\"\n                });\n            };\n        };\n        apiview._layoutRemarkParse(_id_);\n        if (getMyVar(\":replyNext\", \"\") == \"\") {\n            apiview._generateEnd();\n        };\n    },\n    _layoutAppRuleParse: (_demolMap) => {\n        let _demolpage = MY_PAGE;\n        let _demolPics = _demolMap.screenList;\n        if (_demolpage == 1) {\n            if (_demolPics && $.type(_demolPics) == \"array\") {\n                apiview.layout = apiview.layout.concat(_demolPics.map(_ => ({\n                    img: _,\n                    url: _ + \"#.png\",\n                    col_type: \"pic_3_square\"\n                })));\n                _demolMap.message = (_demolMap.changelog ? `${apiview.strong(apiview.big(apiview.big(\"新版特性：\")))}<br>${_demolMap.changelog}` : \"\") + ((_demolMap.changelog && _demolMap.introduce) ? \"<br><br>\" : \"\") + (_demolMap.introduce ? `${apiview.strong(apiview.big(apiview.big(\"应用介绍：\")))}<br>${_demolMap.introduce}` : \"\");\n                let _demolMsg = apiview._getRegExp(_demolMap, true);\n                apiview.layout.push({\n                    title: _demolMsg,\n                    col_type: \"rich_text\"\n                });\n                apiview.layout.push({\n                    col_type: \"line_blank\"\n                });\n            };\n            apiview._generateEnd();\n        };\n    },\n    _layoutPictureRuleParse: (_demol) => {\n        addListener(\"onClose\", $.toString(() => {\n            clearMyVar(\":pictureTag\");\n        }));\n        let _demolpage = MY_PAGE;\n        let _demolMap = [\"精选\", \"热门\", \"最新\"];\n        let tindex = getMyVar(\":pictureTag\", \"0\");\n        if (_demolpage == 1) {\n            apiview._generateTop();\n            apiview.layout = apiview.layout.concat(_demolMap.map((item, i) => ({\n                title: i == tindex ? apiview.rich(apiview.strong(apiview.color(item))) : item,\n                url: $(\"#noLoading#\").lazyRule((i, empty) => {\n                    putMyVar(\":pictureTag\", i);\n                    refreshPage();\n                    return empty;\n                }, i, apiview.empty),\n                col_type: \"scroll_button\",\n                extra: {\n                    backgroundColor: i == tindex ? \"#20FA7298\" : \"\"\n                }\n            })));\n        };\n        switch (_demolMap[tindex]) {\n            case _demolMap[0]:\n                _type_ = \"recommend\";\n                break;\n            case _demolMap[1]:\n                _type_ = \"hot\";\n                break;\n            case _demolMap[2]:\n                _type_ = \"newest\";\n                break;\n        };\n        apiview._layoutDetermineParse(apiview._demol_Ajax(\"/v6/picture/list\", {\n            tag: _demol,\n            type: _type_,\n            page: _demolpage\n        }));\n    },\n    _layoutUserRuleParse: (_demolMap) => {\n        addListener(\"onClose\", $.toString(() => {\n            clearMyVar(\":userTag\");\n        }));\n        _demolMap = _demolMap.userInfo || _demolMap;\n        let _demolMaps = {};\n        _demolMaps.username = _demolMap.username;\n        _demolMaps.userAvatar = _demolMap.userAvatar;\n        _demolMaps.uid = _demolMap.uid;\n        _demolMaps.entityType = _demolMap.entityType;\n        let _demolpage = MY_PAGE;\n        let down = apiview._Get_scription;\n        let abreak = false;\n        eval(\"file_map =\" + readFile(down));\n        file_map[MY_RULE.title][\"user\"].forEach(_ => {\n            if (_[\"uid\"] == _demolMap.uid) {\n                abreak = true;\n                return;\n            };\n        });\n        let _tabMap = [\"动态\", \"点评\", \"图文\", \"问答\", \"酷图\", \"好物\", \"收藏单\", \"应用集\"];\n        let tindex = getMyVar(\":userTag\", \"0\");\n        if (_demolpage == 1) {\n            apiview.layout.push({\n                col_type: \"rich_text\"\n            });\n            apiview.layout.push({\n                col_type: \"card_pic_3\",\n                url: apiview.empty\n            });\n            apiview.layout.push({\n                img: _demolMap.userAvatar,\n                url: apiview.empty,\n                col_type: \"card_pic_3\"\n            });\n            apiview.layout.push({\n                title: apiview.rich(apiview.big(_demolMap.username)),\n                col_type: \"text_center_1\",\n                url: apiview.empty,\n                extra: {\n                    lineVisible: false\n                }\n            });\n            apiview.layout.push({\n                title: apiview.rich(apiview.strong(apiview.big(abreak ? \"取关\" : \"关注\"))),\n                col_type: \"scroll_button\",\n                url: abreak ? $(apiview.empty).lazyRule((_demolMaps) => {\n                    const apiview = $.require(\"Config.view\");\n                    let down = apiview._Get_scription;\n                    let abreak = false;\n                    eval(\"ajax_map =\" + readFile(down));\n                    ajax_map[MY_RULE.title][\"user\"].forEach((Item, i) => {\n                        if (Item[\"uid\"] == _demolMaps.uid) {\n                            tindex = i;\n                            abreak = true;\n                            return;\n                        };\n                    });\n                    if (abreak) {\n                        ajax_map[MY_RULE.title][\"user\"].splice(tindex, 1);\n                        saveFile(down, JSON.stringify(ajax_map), 0);\n                        toast(\"操作成功\");\n                        refreshPage(false);\n                    } else {\n                        toast(\"操作失败\");\n                    };\n                    return apiview.empty;\n                }, _demolMaps) : $(apiview.empty).lazyRule((_demolMaps) => {\n                    const apiview = $.require(\"Config.view\");\n                    let down = apiview._Get_scription;\n                    eval(\"ajax_map =\" + readFile(down));\n                    ajax_map[MY_RULE.title][\"user\"].push(_demolMaps);\n                    saveFile(down, JSON.stringify(ajax_map), 0);\n                    toast(\"操作成功\");\n                    refreshPage(false);\n                    return apiview.empty;\n                }, _demolMaps)\n            });\n            apiview.layout = apiview.layout.concat(_tabMap.map((_, i) => ({\n                title: i == tindex ? apiview.rich(apiview.big(apiview.strong(_))) : _,\n                url: $(\"#noLoading#\").lazyRule((i, empty) => {\n                    putMyVar(\":userTag\", i);\n                    refreshPage();\n                    return empty;\n                }, i, apiview.empty),\n                col_type: \"scroll_button\"\n            })));\n        };\n        switch (_tabMap[tindex]) {\n            case _tabMap[0]:\n                _demolMaps = apiview._demol_Ajax(\"/v6/user/feedList\", {\n                    uid: _demolMap.uid,\n                    page: _demolpage,\n                    showAnonymous: 0,\n                    isIncludeTop: 1,\n                    showDoing: 1\n                });\n                break;\n            case _tabMap[1]:\n                _demol_ = buildUrl(\"/feed/nodeRatingList\", {\n                    uid: _demolMap.uid,\n                    targetType: \"all\",\n                    parseRatingToFeed: 1\n                });\n                _demolMaps = apiview._demol_Ajax(\"/v6/page/dataList\", {\n                    url: _demol_,\n                    title: \"\",\n                    subTitle: \"\",\n                    page: _demolpage\n                });\n                break;\n            case _tabMap[2]:\n                _demolMaps = apiview._demol_Ajax(\"/v6/user/htmlFeedList\", {\n                    uid: _demolMap.uid,\n                    page: _demolpage\n                });\n                break;\n            case _tabMap[3]:\n                _demolMaps = apiview._demol_Ajax(\"/v6/user/questionAndAnswerList\", {\n                    uid: _demolMap.uid,\n                    page: _demolpage\n                });\n                break;\n            case _tabMap[4]:\n                _demol_ = buildUrl(\"/feed/userCoolPictureFeedList\", {\n                    fragmentTemplate: \"flex\",\n                    uid: String(_demolMap.uid)\n                });\n                _demolMaps = apiview._demol_Ajax(\"/v6/page/dataList\", {\n                    url: _demol_,\n                    page: _demolpage\n                });\n                break;\n            case _tabMap[5]:\n                _demol_ = buildUrl(\"/goods/goodsFeedList\", {\n                    fragmentTemplate: \"flex\",\n                    uid: _demolMap.uid\n                });\n                _demolMaps = apiview._demol_Ajax(\"/v6/page/dataList\", {\n                    url: _demol_,\n                    page: _demolpage\n                });\n                break;\n            case _tabMap[6]:\n                _demolMaps = apiview._demol_Ajax(\"/v6/collection/list\", {\n                    uid: _demolMap.uid,\n                    showDefault: 0,\n                    page: _demolpage\n                });\n                break;\n            case _tabMap[7]:\n                _demolMaps = apiview._demol_Ajax(\"/v6/user/albumList\", {\n                    uid: _demolMap.uid,\n                    page: _demolpage\n                });\n                break;\n        };\n        if (_demolMaps == null || $.type(_demolMaps) == \"object\") {\n            _demolMaps = [];\n        };\n        apiview._layoutDetermineParse(_demolMaps, _demolMap.uid);\n    },\n    _layoutDyhRuleParse: (_demol) => {\n        let _demolpage = MY_PAGE;\n        let down = apiview._Get_scription;\n        let abreak = false;\n        eval(\"file_map =\" + readFile(down));\n        let _demolMap = storage0.getMyVar(_demol + \":dyhTag\", []);\n        if (_demolMap.length == 0) {\n            _demolMap = apiview._demol_Ajax(\"/v6/dyh/detail\", {\n                dyhId: _demol\n            });\n            storage0.putMyVar(_demol + \":dyhTag\", _demolMap);\n        };\n        let _demolMaps = {};\n        _demolMaps.title = _demolMap.title;\n        _demolMaps.id = _demol;\n        _demolMaps.logo = _demolMap.logo;\n        _demolMaps.entityType = _demolMap.entityType;\n        _demolMaps.url = `/dyh/${_demol}`;\n        file_map[MY_RULE.title][\"dyh\"].forEach(_ => {\n            if (_.title == _demolMap.title) {\n                abreak = true;\n                return;\n            };\n        });\n        if (_demolpage == 1) {\n            apiview._generateTop();\n            apiview.layout.push({\n                col_type: \"rich_text\"\n            });\n            apiview.layout.push({\n                col_type: \"card_pic_3\",\n                url: apiview.empty\n            });\n            apiview.layout.push({\n                img: _demolMaps.logo,\n                url: apiview.empty,\n                col_type: \"card_pic_3\"\n            });\n            apiview.layout.push({\n                title: apiview.rich(apiview.big(_demolMaps.title)),\n                col_type: \"text_center_1\",\n                url: apiview.empty,\n                extra: {\n                    lineVisible: false\n                }\n            });\n            apiview.layout.push({\n                title: apiview.rich(apiview.gray(abreak ? \"取关\" : \"关注\")),\n                col_type: \"text_center_1\",\n                url: abreak ? $(apiview.empty).lazyRule((_demolMaps) => {\n                    const apiview = $.require(\"Config.view\");\n                    let down = apiview._Get_scription;\n                    let abreak = false;\n                    eval(\"ajax_map =\" + readFile(down));\n                    ajax_map[MY_RULE.title][\"dyh\"].forEach((Item, i) => {\n                        if (Item.title == _demolMaps.title) {\n                            tindex = i;\n                            abreak = true;\n                            return;\n                        };\n                    });\n                    if (abreak) {\n                        ajax_map[MY_RULE.title][\"dyh\"].splice(tindex, 1);\n                        saveFile(down, JSON.stringify(ajax_map), 0);\n                        toast(\"操作成功\");\n                        refreshPage(false);\n                    } else {\n                        toast(\"操作失败\");\n                    };\n                    return apiview.empty;\n                }, _demolMaps) : $(apiview.empty).lazyRule((_demolMaps) => {\n                    const apiview = $.require(\"Config.view\");\n                    let down = apiview._Get_scription;\n                    eval(\"ajax_map =\" + readFile(down));\n                    ajax_map[MY_RULE.title][\"dyh\"].push(_demolMaps);\n                    saveFile(down, JSON.stringify(ajax_map), 0);\n                    toast(\"操作成功\");\n                    refreshPage(false);\n                    return apiview.empty;\n                }, _demolMaps)\n            });\n        };\n        _demolMap = apiview._demol_Ajax(\"/v6/dyhArticle/list\", {\n            dyhId: _demolMap.id,\n            type: \"all\",\n            page: _demolpage\n        });\n        apiview._layoutDetermineParse(_demolMap, _demol);\n    },\n    _layoutTabRuleParse: (_demol) => {\n        addListener(\"onClose\", $.toString((_demol) => {\n            clearMyVar(\":newTag\" + _demol);\n        }, _demol));\n        let _demolpage = MY_PAGE;\n        let down = apiview._Get_scription;\n        let abreak = false;\n        eval(\"file_map =\" + readFile(down));\n        let _demol = $.type(_demol) == \"object\" ? decodeURIComponent(_demol.title) : _demol;\n        let _demolMap = storage0.getMyVar(_demol + \":newTag\", []);\n        if (_demolMap.length == 0) {\n            if (!isNaN(_demol) && !isNaN(parseFloat(_demol))) {\n                _demolMap = apiview._demol_Ajax(\"/v6/product/detail\", {\n                    id: _demol\n                });\n            } else {\n                _demolMap = apiview._demol_Ajax(\"/v6/topic/newTagDetail\", {\n                    tag: _demol\n                });\n            };\n            storage0.putMyVar(_demol + \":newTag\", _demolMap);\n        };\n        let _demolMaps = {};\n        _demolMaps.title = _demolMap.title;\n        _demolMaps.id = _demol;\n        _demolMaps.logo = _demolMap.logo;\n        _demolMaps.entityType = _demolMap.entityType;\n        switch (_demolMaps.entityType) {\n            case \"topic\":\n                _tag = \"topic\";\n                break;\n            case \"product\":\n                _tag = \"product\";\n                break;\n        };\n        file_map[MY_RULE.title][_tag].forEach(_ => {\n            if (_.title == _demolMap.title) {\n                abreak = true;\n                return;\n            };\n        });\n        let tindex = getMyVar(\":newTag\" + _demol, \"0\");\n        _demolMap = _demolMap.tabList.filter(_ => _.title != \"全部\" && _.title != \"来投票\");\n        if (_demolpage == 1) {\n            apiview._generateTop();\n            apiview.layout.push({\n                col_type: \"rich_text\"\n            });\n            apiview.layout.push({\n                col_type: \"card_pic_3\",\n                url: apiview.empty\n            });\n            apiview.layout.push({\n                img: _demolMaps.logo,\n                url: apiview.empty,\n                col_type: \"card_pic_3\"\n            });\n            apiview.layout.push({\n                title: apiview.rich(apiview.big(_demolMaps.title)),\n                col_type: \"text_center_1\",\n                url: apiview.empty,\n                extra: {\n                    lineVisible: false\n                }\n            });\n            apiview.layout.push({\n                title: apiview.rich(apiview.gray(abreak ? \"取关\" : \"关注\")),\n                col_type: \"scroll_button\",\n                url: abreak ? $(apiview.empty).lazyRule((_demolMaps, _tag) => {\n                    const apiview = $.require(\"Config.view\");\n                    let down = apiview._Get_scription;\n                    let abreak = false;\n                    eval(\"ajax_map =\" + readFile(down));\n                    ajax_map[MY_RULE.title][_tag].forEach((Item, i) => {\n                        if (Item.title == _demolMaps.title) {\n                            tindex = i;\n                            abreak = true;\n                            return;\n                        };\n                    });\n                    if (abreak) {\n                        ajax_map[MY_RULE.title][_tag].splice(tindex, 1);\n                        saveFile(down, JSON.stringify(ajax_map), 0);\n                        toast(\"操作成功\");\n                        refreshPage(false);\n                    } else {\n                        toast(\"操作失败\");\n                    };\n                    return apiview.empty;\n                }, _demolMaps, _tag) : $(apiview.empty).lazyRule((_demolMaps, _tag) => {\n                    const apiview = $.require(\"Config.view\");\n                    let down = apiview._Get_scription;\n                    eval(\"ajax_map =\" + readFile(down));\n                    ajax_map[MY_RULE.title][_tag].push(_demolMaps);\n                    saveFile(down, JSON.stringify(ajax_map), 0);\n                    toast(\"操作成功\");\n                    refreshPage(false);\n                    return apiview.empty;\n                }, _demolMaps, _tag)\n            });\n            apiview.layout = apiview.layout.concat(_demolMap.map((_, i) => ({\n                title: i == tindex ? apiview.rich(apiview.strong(apiview.color(_.title))) : _.title,\n                url: $(\"#noLoading#\").lazyRule((i, empty, _demol) => {\n                    putMyVar(\":newTag\" + _demol, i);\n                    refreshPage();\n                    return empty;\n                }, i, apiview.empty, _demol),\n                col_type: \"scroll_button\",\n                extra: {\n                    backgroundColor: i == tindex ? \"#20FA7298\" : \"\"\n                }\n            })));\n        };\n        let _linkNext = () => getMyVar(\":next\" + _demol, \"\");\n        _demolMap = _demolMap[tindex];\n        _demolMap = apiview._demol_Ajax(\"/v6/page/dataList\", {\n            url: _demolMap.url,\n            title: _demolMap.title,\n            subTitle: \"\",\n            page: _linkNext() ? 1 : _demolpage\n        });\n        apiview._layoutDetermineParse(_demolMap, _demol);\n    },\n    _layoutApkRuleParse: (_demol) => {\n        addListener(\"onClose\", $.toString(() => {\n            clearMyVar(\":apkTag\");\n        }));\n        let _demolpage = MY_PAGE;\n        let down = apiview._Get_scription;\n        let abreak = false;\n        eval(\"file_map =\" + readFile(down));\n        let _demolMap = storage0.getMyVar(_demol + \":apkTag\", []);\n        if (_demolMap.length == 0) {\n            _demolMap = apiview._demol_Ajax(\"/v6/apk/detail\", {\n                id: _demol,\n                installed: \"\"\n            });\n            storage0.putMyVar(_demol + \":apkTag\", _demolMap);\n        };\n        let _demolMaps = {};\n        _demolMaps.entityType = _demolMap.entityType || \"apk\";\n        _demolMaps.logo = _demolMap.logo;\n        _demolMaps.title = _demolMap.title;\n        _demolMaps.url = `/apk/${_demol}`;\n        file_map[MY_RULE.title][\"apk\"].forEach(_ => {\n            if (_.title == _demolMap.title) {\n                abreak = true;\n                return;\n            };\n        });\n        let tindex = getMyVar(\":apkTag\", \"0\");\n        let _demolMap_ = [\"详情\", \"讨论\"];\n        if (_demolpage == 1) {\n            apiview._generateTop();\n            switch (getItem(\":application\", \"默认\")) {\n                case \"默认\":\n                    apiview.layout.push({\n                        desc: \"0\",\n                        img: _demolMap.logo,\n                        url: apiview.empty,\n                        col_type: \"card_pic_2\"\n                    });\n                    apiview.layout.push({\n                        title: apiview.rich(apiview.black(`${apiview.big(_demolMap.title)}<br><br>${_demolMap.version}<br><br>${_demolMap.catName}<br>${_demolMap.commentStatusText ? _demolMap.commentStatusText : \"\"}`)),\n                        desc: \"0\",\n                        url: apiview.empty,\n                        col_type: \"card_pic_2\"\n                    });\n                    break;\n                default:\n                    apiview.layout.push({\n                        col_type: \"rich_text\"\n                    });\n                    apiview.layout.push({\n                        url: apiview.empty,\n                        col_type: \"card_pic_3\"\n                    });\n                    apiview.layout.push({\n                        img: _demolMap.logo,\n                        url: apiview.empty,\n                        col_type: \"card_pic_3\"\n                    });\n                    apiview.layout.push({\n                        title: apiview.rich(apiview.big(_demolMaps.title)),\n                        col_type: \"text_center_1\",\n                        url: apiview.empty,\n                        extra: {\n                            lineVisible: false\n                        }\n                    });\n                    break;\n            };\n            apiview.layout.push({\n                title: \"下载\",\n                url: _demolMap.apkfile ? ((_demolMap.apkfile && !_demolMap.apkfile.startsWith(\"http\") && !_demolMap.apkfile.startsWith(\"https\")) ? $(apiview.empty).lazyRule(({\n                    id,\n                    apkname,\n                    apkversioncode\n                }) => \"download://\" + decodeURIComponent($.require(\"Config.view\")._demol_Ajax(\"/v6/apk/download\", {\n                    pn: apkname,\n                    aid: id,\n                    vc: apkversioncode,\n                    extra: \"\"\n                }, true, true)), _demolMap) : \"download://\" + _demolMap.apkfile) : \"toast://无下载链接\",\n                col_type: \"text_4\"\n            });\n            apiview.layout.push({\n                title: abreak ? \"取关\" : \"关注\",\n                col_type: \"text_4\",\n                url: abreak ? $(apiview.empty).lazyRule((_demolMaps) => {\n                    const apiview = $.require(\"Config.view\");\n                    let down = apiview._Get_scription;\n                    let abreak = false;\n                    eval(\"ajax_map =\" + readFile(down));\n                    ajax_map[MY_RULE.title][\"apk\"].forEach((Item, i) => {\n                        if (Item.title == _demolMaps.title) {\n                            tindex = i;\n                            abreak = true;\n                            return;\n                        };\n                    });\n                    if (abreak) {\n                        ajax_map[MY_RULE.title][\"apk\"].splice(tindex, 1);\n                        saveFile(down, JSON.stringify(ajax_map), 0);\n                        toast(\"操作成功\");\n                        refreshPage(false);\n                    } else {\n                        toast(\"操作失败\");\n                    };\n                    return apiview.empty;\n                }, _demolMaps) : $(apiview.empty).lazyRule((_demolMaps) => {\n                    const apiview = $.require(\"Config.view\");\n                    let down = apiview._Get_scription;\n                    eval(\"ajax_map =\" + readFile(down));\n                    ajax_map[MY_RULE.title][\"apk\"].push(_demolMaps);\n                    saveFile(down, JSON.stringify(ajax_map), 0);\n                    toast(\"操作成功\");\n                    refreshPage(false);\n                    return apiview.empty;\n                }, _demolMaps)\n            });\n            apiview.layout = apiview.layout.concat(_demolMap_.map((_, i) => ({\n                title: i == tindex ? apiview.rich(apiview.color(apiview.strong(_))) : _,\n                url: $(\"#noLoading#\").lazyRule((i, empty) => {\n                    putMyVar(\":apkTag\", i);\n                    refreshPage();\n                    return empty;\n                }, i, apiview.empty),\n                col_type: \"text_4\"\n            })));\n        };\n        let _linkNext = () => getMyVar(\":next\" + _demol, \"\");\n        switch (_demolMap_[tindex]) {\n            case _demolMap_[0]:\n                apiview._layoutAppRuleParse(_demolMap);\n                break;\n            case _demolMap_[1]:\n                _demolMap = apiview._demol_Ajax(\"/v6/page/dataList\", {\n                    url: `#/feed/apkCommentList?isIncludeTop=1&withSortCard=1&id=${_demolMap.id}`,\n                    title: \"讨论\",\n                    subTitle: \"\",\n                    page: _linkNext() ? 1 : _demolpage\n                });\n                apiview._layoutDetermineParse(_demolMap, _demol);\n                break;\n        };\n    },\n    _layoutSubscrParse: () => {\n        eval(\"ajax_map =\" + readFile(apiview._Get_scription));\n        let ajax_maps = ajax_map[MY_RULE.title];\n        let objectMap = [\"用户\", \"帖子\", \"话题\", \"数码\", \"应用\", \"应用集\", \"看看号\"];\n        let _demolpage = MY_PAGE;\n        let tindex = getMyVar(\":subscrTab\", \"0\");\n        if (_demolpage == 1) {\n            apiview.layout = apiview.layout.concat(objectMap.map((item, i) => ({\n                title: i == tindex ? apiview.rich(apiview.strong(apiview.color(item))) : item,\n                url: $(\"#noLoading#\").lazyRule((i, empty) => {\n                    putMyVar(\":subscrTab\", i);\n                    refreshPage();\n                    return empty;\n                }, i, apiview.empty),\n                col_type: \"scroll_button\",\n                extra: {\n                    backgroundColor: i == tindex ? \"#20FA7298\" : \"\"\n                }\n            })));\n            switch (objectMap[tindex]) {\n                case objectMap[0]:\n                    apiview._layoutDetermineParse(ajax_maps[\"user\"], \"user\");\n                    break;\n                case objectMap[1]:\n                    apiview._layoutDetermineParse(ajax_maps[\"card\"], \"card\");\n                    break;\n                case objectMap[2]:\n                    apiview._layoutDetermineParse(ajax_maps[\"topic\"], \"topic\");\n                    break;\n                case objectMap[3]:\n                    apiview._layoutDetermineParse(ajax_maps[\"product\"], \"product\");\n                    break;\n                case objectMap[4]:\n                    apiview._layoutDetermineParse(ajax_maps[\"apk\"], \"apk\");\n                    break;\n                case objectMap[5]:\n                    apiview._layoutDetermineParse(ajax_maps[\"album\"], \"album\");\n                    break;\n                case objectMap[6]:\n                    apiview._layoutDetermineParse(ajax_maps[\"dyh\"], \"dyh\");\n                    break;\n            };\n        };\n    },\n    _layoutMenuParse: () => {\n        apiview.layout.push({\n            col_type: \"line_blank\"\n        });\n        apiview.layout.push({\n            title: \"帖子预览\",\n            img: $.require(\"icon.tool\").post,\n            url: apiview.empty,\n            col_type: \"avatar\"\n        });\n        apiview.layout.push({\n            title: \"显示图片张数\",\n            img: $.require(\"icon.tool\").number,\n            url: $(\"#noLoading#\").lazyRule(() => {\n                const hikerPop = $.require(\"http://hiker.nokia.press/hikerule/rulelist.json?id=6966\", 24);\n                hikerPop.inputAutoRow({\n                    hint: `当前预览显示${getItem(\":number\", \"3\")}张`,\n                    title: \"请输入数字(1-9)\",\n                    defaultValue: \"\",\n                    noAutoSoft: true,\n                    confirm(text) {\n                        text = text.trim();\n                        const apiview = $.require(\"Config.view\");\n                        if (text && !isNaN(text) && Number.isInteger(Number(text))) {\n                            setItem(\":number\", text);\n                        } else {\n                            toast(\"请输入数字！！！\");\n                        };\n                        return apiview.empty;\n                    }\n                });\n                return \"hiker://empty\";\n            }),\n            col_type: \"text_icon\"\n        });\n        apiview.layout.push({\n            col_type: \"line_blank\"\n        });\n        apiview.layout.push({\n            title: \"应用界面\",\n            img: $.require(\"icon.tool\").application,\n            url: apiview.empty,\n            col_type: \"avatar\"\n        });\n        apiview.layout.push({\n            title: `默认${apiview.small(\"(长按可预览)\")}`,\n            img: $.require(\"icon.tool\")[getItem(\":application\", \"默认\") == \"默认\" ? \"on\" : \"off\"],\n            url: $(\"#noLoading#\").lazyRule(() => {\n                const apiview = $.require(\"Config.view\");\n                if (getItem(\":application\", \"默认\") == \"默认\") {\n                    setItem(\":application\", \"默认2\");\n                    updateItem(\"application1\", {\n                        img: $.require(\"icon.tool\").off\n                    });\n                    updateItem(\"application2\", {\n                        img: $.require(\"icon.tool\").on\n                    });\n                } else {\n                    setItem(\":application\", \"默认\");\n                    updateItem(\"application1\", {\n                        img: $.require(\"icon.tool\").on\n                    });\n                    updateItem(\"application2\", {\n                        img: $.require(\"icon.tool\").off\n                    });\n                };\n                return apiview.empty;\n            }),\n            col_type: \"text_icon\",\n            extra: {\n                id: \"application1\",\n                longClick: [{\n                    title: \"预览\",\n                    js: $.toString(() => $($.require(\"Config.view\").empty + \"#noHistory##noRecordHistory##gameTheme#fypage\").rule(() => {\n                        addListener(\"onClose\", $.toString((text) => {\n                            setItem(\":application\", text);\n                        }, getItem(\":application\", \"默认\")));\n                        setItem(\":application\", \"默认\");\n                        const apiview = $.require(\"Config.view\");\n                        apiview._layoutLinkRuleParse({\n                            \"title\": \"酷安\",\n                            \"logo\": \"http://pp.myapp.com/ma_icon/0/icon_10401327_1611306222/256\",\n                            \"url\": \"/apk/com.coolapk.market\",\n                            \"id\": undefined,\n                            \"entityType\": \"apk\"\n                        });\n                        setResult(apiview.layout);\n                    }))\n                }]\n            }\n        });\n        apiview.layout.push({\n            title: `同用户界面${apiview.small(\"(长按可预览)\")}`,\n            img: $.require(\"icon.tool\")[getItem(\":application\", \"默认\") == \"默认\" ? \"off\" : \"on\"],\n            url: $(\"#noLoading#\").lazyRule(() => {\n                const apiview = $.require(\"Config.view\");\n                if (getItem(\":application\", \"默认\") == \"默认\") {\n                    setItem(\":application\", \"默认2\");\n                    updateItem(\"application1\", {\n                        img: $.require(\"icon.tool\").off\n                    });\n                    updateItem(\"application2\", {\n                        img: $.require(\"icon.tool\").on\n                    });\n                } else {\n                    setItem(\":application\", \"默认\");\n                    updateItem(\"application1\", {\n                        img: $.require(\"icon.tool\").on\n                    });\n                    updateItem(\"application2\", {\n                        img: $.require(\"icon.tool\").off\n                    });\n                };\n                return apiview.empty;\n            }),\n            col_type: \"text_icon\",\n            extra: {\n                id: \"application2\",\n                longClick: [{\n                    title: \"预览\",\n                    js: $.toString(() => $($.require(\"Config.view\").empty + \"#noHistory##noRecordHistory##gameTheme#fypage\").rule(() => {\n                        addListener(\"onClose\", $.toString((text) => {\n                            setItem(\":application\", text);\n                        }, getItem(\":application\", \"默认\")));\n                        setItem(\":application\", \"默认2\");\n                        const apiview = $.require(\"Config.view\");\n                        apiview._layoutLinkRuleParse({\n                            \"title\": \"酷安\",\n                            \"logo\": \"http://pp.myapp.com/ma_icon/0/icon_10401327_1611306222/256\",\n                            \"url\": \"/apk/com.coolapk.market\",\n                            \"id\": undefined,\n                            \"entityType\": \"apk\"\n                        });\n                        setResult(apiview.layout);\n                    }))\n                }]\n            }\n        });\n        apiview.layout.push({\n            col_type: \"line_blank\"\n        });\n        apiview.layout.push({\n            title: \"反馈BUG\",\n            img: $.require(\"icon.tool\").bug,\n            url: \"mqqwpa://im/chat?chat_type=wpa&uin=862347205\",\n            col_type: \"avatar\"\n        });\n        apiview.layout.push({\n            title: \"更新日志\",\n            img: $.require(\"icon.tool\").logs,\n            url: $(\"#noLoading#\").lazyRule(() => {\n                const apiview = $.require(\"Config.view\");\n                const hikerPop = $.require(\"https://hikerfans.com/weisyr/js/hikerPop.js\");\n                hikerPop.updateRecordsBottom(apiview._updateData);\n                return \"hiker://empty\";\n            }),\n            col_type: \"avatar\"\n        });\n        apiview.layout.push({\n            col_type: \"line_blank\"\n        });\n        apiview.layout.push({\n            title: \"关于作者\",\n            img: $.require(\"icon.tool\").about,\n            url: \"hiker://page/rules?rule=道长仓库Pro&#noHistory#\",\n            col_type: \"avatar\",\n            extra: {\n                avatarUrl: \"http://q1.qlogo.cn/g?b=qq&nk=862347205&s=640\",\n                can_upload: true,\n                id: 284,\n                qq: \"862347205\",\n                inheritTitle: false\n            }\n        });\n        apiview.layout.push({\n            title: \"支持一下\",\n            img: $.require(\"icon.tool\").support,\n            url: $(apiview.empty + \"#noHistory##noRecordHistory#\").rule(() => {\n                const apiview = $.require(\"Config.view\");\n                apiview._donate_Parse();\n                setResult(apiview.layout);\n            }),\n            col_type: \"avatar\"\n        });\n        apiview.layout.push({\n            col_type: \"line_blank\"\n        });\n        apiview.layout.push({\n            title: \"免责声明\",\n            img: $.require(\"icon.tool\").disclaimer,\n            url: apiview.empty,\n            col_type: \"avatar\"\n        });\n        apiview.layout.push({\n            title: `<small>1. 本小程序所有代码全部开源，且本规则为学习目的，请于导入24小时内删除！！！<br>2. 本小程序<b>完全免费</b>，如果你是付费购买的恭喜你被骗了。<br>3. 如果出现底线，请<b>刷新一下</b>也许有东西呢。<br>4. 出现BUG了<b>请录屏</b>发给${apiview.addressTag(\"mqqwpa://im/chat?chat_type=wpa&uin=862347205\", \"作者\")}哦<br>5. 不写<b>登录</b>可能会封号！！！<br><b>开始使用本规则即代表遵守规则</b></small>`,\n            col_type: \"rich_text\"\n        });\n    },\n    _End_Parse: () => {\n        apiview.layout.push({\n            title: apiview.rich(apiview.small(apiview.gray(\"～～～我是有底线的～～～\"))),\n            url: apiview.empty,\n            col_type: \"text_center_1\"\n        });\n    },\n    _generateTop: () => {\n        apiview.layout.push({\n            img: $.require(\"icon.tool\").top,\n            url: apiview.empty,\n            col_type: \"pic_1_full\"\n        });\n    },\n    _generateEnd: () => {\n        let tips = \"该文章来源于酷安，如您喜欢，请下载APP\";\n        let warning = \"此规则仅限学习使用，如有不妥，请本吧主联系我删除\";\n        apiview.layout.push({\n            title: apiview.center(`${apiview.strong(tips)}<br>${apiview.small(apiview.gray(warning))}`),\n            col_type: \"rich_text\"\n        });\n    },\n    _getsMind: () => {\n        if (MY_PAGE == 1) {\n            const hikerPop = $.require(\"https://hikerfans.com/weisyr/js/hikerPop.js\");\n            if (getMyVar(\":updateData\", \"\") == \"\") {\n                hikerPop.updateRecordsBottom(apiview._updateData);\n                putMyVar(\":updateData\", \"true\");\n            };\n            let time = 15;\n            let id = Date.now();\n            apiview.layout.push({\n                title: apiview.big(apiview.strong(\"““使用前须知““\")),\n                col_type: \"text_center_1\",\n                url: apiview.empty,\n                extra: {\n                    lineVisible: false\n                }\n            });\n            apiview.layout.push({\n                title: `1. 本小程序所有代码全部开源，且本规则为学习目的，请于导入24小时内删除！！！<br>2. 本小程序<b>完全免费</b>，如果你是付费购买的恭喜你被骗了。<br>当然如果有能力想鼓励作者的可以${\"支持一下\".link($(apiview.empty + \"#noHistory##noRecordHistory#\").b64(\"\").rule(() => {\n                const apiview = $.require(\"Config.view\");\n                apiview._donate_Parse();\n                setResult(apiview.layout);\n            }))}<small>(点击可进入捐赠)。</small><br>3. 如果出现底线，请<b>刷新一下</b>也许有东西呢。<br>4. 出现BUG了<b>请录屏</b>发给${apiview.addressTag(\"mqqwpa://im/chat?chat_type=wpa&uin=862347205\", \"作者\")}哦<br>5. 不写<b>登录</b>可能会封号！！！<br><br><b>开始使用本规则即代表遵守规则</b><br>当前版本：` + MY_RULE.version,\n                col_type: \"rich_text\"\n            }, {\n                col_type: \"line\"\n            }, {\n                title: \"更新日志\",\n                url: $(\"#noLoading#\").lazyRule(() => {\n                    const apiview = $.require(\"Config.view\");\n                    const hikerPop = $.require(\"https://hikerfans.com/weisyr/js/hikerPop.js\");\n                    hikerPop.updateRecordsBottom(apiview._updateData);\n                    return \"hiker://empty\";\n                }),\n                col_type: \"text_1\"\n            }, {\n                title: time + \"秒后继续\",\n                url: \"toast://请认真阅读以上内容\",\n                col_type: \"text_center_1\",\n                extra: {\n                    id: id + \"timer\"\n                }\n            });\n            setResult(apiview.layout);\n            while (time != 0) {\n                java.lang.Thread.sleep(1000);\n                time -= 1;\n                updateItem(id + \"timer\", {\n                    title: time + \"秒后继续\"\n                });\n            }\n            updateItem(id + \"timer\", {\n                title: \"““我同意以上要求““\",\n                url: $(\"#noLoading#\").lazyRule((v) => {\n                    setItem(\"first\", String(v));\n                    refreshPage();\n                    return \"toast://感谢您的理解\";\n                }, MY_RULE.version),\n                col_type: \"text_center_1\"\n            });\n        };\n    },\n    _donate_Parse: () => {\n        setPageTitle(\"捐赠/支持\");\n        apiview.layout.push({\n            title: \"捐赠/支持\",\n            desc: \"这个捐赠不能为你带来特权，但您的支持是我更新创作的动力。\",\n            col_type: \"text_center_1\",\n            url: \"toast://感谢您的支持\"\n        });\n        apiview.layout.push({\n            col_type: \"pic_1_full\",\n            url: $.require(\"icon.tool\").donate,\n            pic_url: $.require(\"icon.tool\").donate\n        });\n        apiview.layout.push({\n            col_type: \"text_center_1\",\n            title: \"““””\" + \"图片加载缓慢请稍等\".small().fontcolor(\"Gray\"),\n            url: \"hiker://empty\",\n            extra: {\n                lineVisible: false\n            }\n        });\n    },\n    _extra_tool: (_, _tab, _tag, _next) => [{\n        title: `📬${_next ? \"关注\" : \"收藏\"}`,\n        js: $.toString((_, _tab, _tag) => {\n            const apiview = $.require(\"Config.view\");\n            let tooldown = apiview._Get_scription;\n            let abreak = true;\n            eval(\"ajax_map =\" + readFile(tooldown));\n            ajax_map[MY_RULE.title][_tab].forEach(Item => {\n                if (Item[_tag] == _[_tag]) {\n                    toast(\"重复了哦\");\n                    abreak = false;\n                    return;\n                };\n            });\n            if (abreak) {\n                ajax_map[MY_RULE.title][_tab].push(_);\n                saveFile(tooldown, JSON.stringify(ajax_map), 0);\n                toast(\"操作成功\");\n            };\n            return apiview.empty;\n        }, _, _tab, _tag)\n    }, {\n        title: `📭取消${_next ? \"关注\" : \"收藏\"}`,\n        js: $.toString((_, _tab, _tag) => {\n            const apiview = $.require(\"Config.view\");\n            let tooldown = apiview._Get_scription;\n            let abreak = false;\n            eval(\"ajax_map =\" + readFile(tooldown));\n            ajax_map[MY_RULE.title][_tab].forEach((Item, i) => {\n                if (Item[_tag] == _[_tag]) {\n                    tindex = i;\n                    abreak = true;\n                    return;\n                };\n            });\n            if (abreak) {\n                ajax_map[MY_RULE.title][_tab].splice(tindex, 1);\n                saveFile(tooldown, JSON.stringify(ajax_map), 0);\n                toast(\"操作成功\");\n                refreshPage(false);\n            } else {\n                toast(\"操作失败\");\n            };\n            return apiview.empty;\n        }, _, _tab, _tag)\n    }, {\n        title: \"⬆️置顶\",\n        js: $.toString((_, _tab, _tag) => {\n            const apiview = $.require(\"Config.view\");\n            let tooldown = apiview._Get_scription;\n            let abreak = false;\n            eval(\"ajax_map =\" + readFile(tooldown));\n            ajax_map[MY_RULE.title][_tab].forEach(Item => {\n                if (Item[_tag] == _[_tag]) {\n                    abreak = true;\n                    return;\n                };\n            });\n            if (abreak) {\n                apiview._Position_tool(ajax_map[MY_RULE.title][_tab], _, \"top\", _tag);\n                saveFile(tooldown, JSON.stringify(ajax_map), 0);\n                toast(\"操作成功\");\n                refreshPage(false);\n            } else {\n                toast(\"操作失败\");\n            };\n            return apiview.empty;\n        }, _, _tab, _tag)\n    }, {\n        title: \"⬇️置底\",\n        js: $.toString((_, _tab, _tag) => {\n            const apiview = $.require(\"Config.view\");\n            let tooldown = apiview._Get_scription;\n            let abreak = false;\n            eval(\"ajax_map =\" + readFile(tooldown));\n            ajax_map[MY_RULE.title][_tab].forEach(Item => {\n                if (Item[_tag] == _[_tag]) {\n                    abreak = true;\n                    return;\n                };\n            });\n            if (abreak) {\n                apiview._Position_tool(ajax_map[MY_RULE.title][_tab], _, \"end\", _tag);\n                saveFile(tooldown, JSON.stringify(ajax_map), 0);\n                toast(\"操作成功\");\n                refreshPage(false);\n            } else {\n                toast(\"操作失败\");\n            };\n            return apiview.empty;\n        }, _, _tab, _tag)\n    }],\n    _extraSearch: (it) => [{\n        title: `删除「${it}」`,\n        js: $.toString((it) => {\n            const apiview = $.require(\"Config.view\");\n            let mem = storage0.getItem(MY_RULE.title, []);\n            mem.forEach((_, i) => {\n                if (_ == it) {\n                    tindex = i;\n                    abreak = true;\n                    return;\n                };\n            });\n            mem.splice(tindex, 1);\n            storage0.setItem(MY_RULE.title, mem);\n            toast(\"操作成功\");\n            refreshPage(false);\n            return apiview.empty;\n        }, it)\n    }],\n    _updateData: [{\n        title: \"2024/09/05\",\n        records: [\n            \"‘‘优化’’:页面\"\n        ]\n    }, {\n        title: \"2024/09/03\",\n        records: [\n            \"““更新””:轮播图UA\",\n            \"““更新””:token方法\",\n            \"‘‘说明’’:由于酷安不在使用旧版token方法，将使用最新方法，感谢@zetalpha 大佬提供的bcrypt方法\"\n        ]\n    }, {\n        title: \"2024/08/31\",\n        records: [\n            \"‘‘优化’’:输入框细节\"\n        ]\n    }, {\n        title: \"2024/08/30\",\n        records: [\n            \"““更新””:设置界面\",\n            \"‘‘优化’’:帖子与帖子之间分割线\"\n        ]\n    }, {\n        title: \"2024/08/22\",\n        records: [\n            \"‘‘优化’’:应用界面\"\n        ]\n    }, {\n        title: \"2024/08/21\",\n        records: [\n            \"““支持””:textCard\"\n        ]\n    }, {\n        title: \"2024/08/19\",\n        records: [\n            \"““更新””:hikerPop链接\"\n        ]\n    }, {\n        title: \"2024/08/17\",\n        records: [\n            \"‘‘优化’’:下载\",\n            \"‘‘优化’’:判断链接\"\n        ]\n    }, {\n        title: \"2024/08/15\",\n        records: [\n            \"‘‘优化’’:帖子详细时间（如：几分钟前）\"\n        ]\n    }, {\n        title: \"2024/08/11\",\n        records: [\n            \"‘‘优化’’:用户主页显示效果\"\n        ]\n    }, {\n        title: \"2024/08/10\",\n        records: [\n            \"‘‘优化’’:判断逻辑\"\n        ]\n    }, {\n        title: \"2024/08/07\",\n        records: [\n            \"‘‘优化’’:给骚粉加个背景色\",\n            \"‘‘优化’’:收藏单判断\",\n            \"‘‘修复’’:酷品链接\"\n        ]\n    }, {\n        title: \"2024/08/05\",\n        records: [\n            \"““支持””:看看号\",\n            \"““更新””:长按第一排分类可反馈BUG(要录屏哦)\",\n            \"‘‘优化’’:细分标签/话题/app，之前的收藏的没了请重新收藏，为后续更好维护\"\n        ]\n    }, {\n        title: \"2024/08/03\",\n        records: [\n            \"‘‘优化’’:评论切换不再回顶部\",\n            \"‘‘优化’’:订阅切换Loading\"\n        ]\n    }, {\n        title: \"2024/08/02\",\n        records: [\n            \"‘‘优化’’:帖子标签\",\n            \"‘‘修复’’:当没搜索到资源时报错\",\n            \"‘‘修复’’:逻辑错误导致内容重复....\"\n        ]\n    }, {\n        title: \"2024/08/01\",\n        records: [\n            \"‘‘优化’’:添加发帖时间\",\n            \"‘‘优化’’:头条不显示酷品（部分人认为是广告）\"\n        ]\n    }, {\n        title: \"2024/07/31\",\n        records: [\n            \"‘‘修复’’:酷品搜索页面无热搜时报错\",\n            \"‘‘修复’’:逻辑错误导致内容重复\",\n            \"‘‘修复’’:评论无限叠加\",\n            \"‘‘修复’’:app页面取关，订阅页无效果\",\n            \"‘‘优化’’:由@链接进入用户主页，增加一层渐变美化\",\n            \"‘‘优化’’:关注存储在本地过多不必要的数据\"\n        ]\n    }, {\n        title: \"2024/07/30\",\n        records: [\n            \"““更新””:更新n个内容，就不细细说了\"\n        ]\n    }, {\n        title: \"2024/07/29\",\n        records: [\n            \"““支持””:话题\",\n\n            \"““支持””:发现=>酷图x5\",\n\n            \"‘‘修复’’:逻辑错误导致无限循环访问链接\"\n        ]\n    }, {\n        title: \"2024/07/28\",\n        records: [\n            \"““支持””:分类\",\n            \"‘‘修复’’:判断页面不准确\"\n        ]\n    }]\n}\n\n$.exports = apiview;"},{"col_type":"movie_3","name":"图标","path":"icon.tool","rule":"js:\n$.exports = {\n    delete: \"https://iconfont.tyrantg.com/api/illustrate.svg?svg_string=%3Csvg%20class%3D%22icon%22%20style%3D%22width%3A%201em%3Bheight%3A%201em%3Bvertical-align%3A%20middle%3Bfill%3A%20currentColor%3Boverflow%3A%20hidden%3B%22%20viewBox%3D%220%200%201024%201024%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M686.08%20921.6h-327.68C268.288%20921.6%20184.32%20837.632%20184.32%20743.424V327.68c0-22.528%2018.432-40.96%2040.96-40.96s40.96%2018.432%2040.96%2040.96v415.744c0%2047.104%2047.104%2096.256%2092.16%2096.256h327.68c45.056%200%2071.68-49.152%2071.68-96.256V327.68c0-22.528%2018.432-40.96%2040.96-40.96s40.96%2018.432%2040.96%2040.96v415.744c0%2088.064-57.344%20178.176-153.6%20178.176z%22%20fill%3D%22%23333333%22%20%2F%3E%3Cpath%20d%3D%22M921.6%20348.16H102.4c-22.528%200-40.96-18.432-40.96-40.96s18.432-40.96%2040.96-40.96h819.2c22.528%200%2040.96%2018.432%2040.96%2040.96s-18.432%2040.96-40.96%2040.96zM757.76%20184.32H266.24c-22.528%200-40.96-18.432-40.96-40.96s18.432-40.96%2040.96-40.96h491.52c22.528%200%2040.96%2018.432%2040.96%2040.96s-18.432%2040.96-40.96%2040.96z%22%20fill%3D%22%23333333%22%20%2F%3E%3Cpath%20d%3D%22M593.92%20716.8c-22.528%200-40.96-18.432-40.96-40.96V430.08c0-22.528%2018.432-40.96%2040.96-40.96s40.96%2018.432%2040.96%2040.96v245.76c0%2022.528-18.432%2040.96-40.96%2040.96zM430.08%20716.8c-22.528%200-40.96-18.432-40.96-40.96V430.08c0-22.528%2018.432-40.96%2040.96-40.96s40.96%2018.432%2040.96%2040.96v245.76c0%2022.528-18.432%2040.96-40.96%2040.96z%22%20fill%3D%22%23E5BD41%22%20%2F%3E%3C%2Fsvg%3E\",\n    tabsearch: \"https://iconfont.tyrantg.com/api/illustrate.svg?svg_string=%3Csvg%20class%3D%22icon%22%20style%3D%22width%3A%201em%3Bheight%3A%201em%3Bvertical-align%3A%20middle%3Bfill%3A%20currentColor%3Boverflow%3A%20hidden%3B%22%20viewBox%3D%220%200%201024%201024%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M327.5264%20160H118.8352c-3.7888%200-6.8608%203.584-6.8608%207.9872v204.4928c0%204.4032%203.072%207.9872%206.8608%207.9872h208.6912c3.7376%200%206.8096-3.584%206.8096-7.9872V167.936c0-4.4032-3.072-7.9872-6.8096-7.9872z%20m551.168%20294.4c18.432%200%2033.28%2011.1104%2033.2288%2024.832v359.936c0%2013.7216-14.8992%2024.832-33.28%2024.832H145.2544c-18.432%200-33.28-11.1104-33.28-24.832V479.232c0-13.7216%2014.848-24.832%2033.28-24.832h733.3888z%20m-38.5024%2071.68H183.7056v266.24H840.192v-266.24zM616.2944%20160c3.7888%200%206.8096%203.584%206.8096%207.9872v204.4928c0%204.4032-3.072%207.9872-6.8096%207.9872H407.6032c-3.7376%200-6.8096-3.584-6.8096-7.9872V167.936c0-4.4032%203.072-7.9872%206.8096-7.9872h208.6912z%20m-44.3904%2051.2H451.9936V329.216h119.9104V211.2z%20m333.1584-51.2c3.7888%200%206.8608%203.584%206.8608%207.9872v204.4928c0%204.4032-3.072%207.9872-6.8608%207.9872h-208.6912c-3.7376%200-6.8096-3.584-6.8096-7.9872V167.936c0-4.4032%203.072-7.9872%206.8096-7.9872h208.6912z%20m-44.3904%2051.2h-119.9104V329.216h119.9104V211.2z%22%20%2F%3E%3C%2Fsvg%3E\",\n    hot: \"https://iconfont.tyrantg.com/api/illustrate.svg?svg_string=%3Csvg%20class%3D%22icon%22%20style%3D%22width%3A%201em%3Bheight%3A%201em%3Bvertical-align%3A%20middle%3Bfill%3A%20currentColor%3Boverflow%3A%20hidden%3B%22%20viewBox%3D%220%200%201024%201024%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M528.58%20622.07q-17.88%200-28.15%2013.27t-10.28%2034.37q0%2020.82%2010%2034t27.6%2013.29q17.87%200%2027.83-12.67t9.94-34q0-22.31-9.66-35.25t-27.28-13.01z%22%20fill%3D%22%23FF716E%22%20%2F%3E%3Cpath%20d%3D%22M874.24%20586.38C865.3%20486.14%20779%20409.72%20772.85%20311.4c-29.19%2053.77-32.26%2089.1-35.33%20142.87-89.1-110.61-182.81-256.55-161.3-390.19%200%200-170.52%2050.69-239.65%20316.45-43-35.33-39.94-110.61-18.43-155.15C271%20257.91-3.28%20574.56%20257.88%20838.05%20311.82%20891.76%20402.54%20962%20522.43%20959.86h0.67c8.63%200.41%20166.84%202%20294.61-148.69%2059.68-86.17%2064.9-130.88%2056.53-224.79zM433.76%20731.65a9.2%209.2%200%200%201-9.2%209.2h-12a9.2%209.2%200%200%201-9.21-9.2V682h-60.81v49.69a9.2%209.2%200%200%201-9.21%209.2h-12a9.2%209.2%200%200%201-9.2-9.2V605.57a7.45%207.45%200%200%201%207.45-7.45h15.5a7.45%207.45%200%200%201%207.46%207.45v50.14h60.81v-50.14a7.45%207.45%200%200%201%207.46-7.45h15.5a7.45%207.45%200%200%201%207.45%207.45zM578%20722.56q-19.38%2020.78-50.81%2020.78-30.69%200-49.86-20.14t-19.16-51.83q0-33.54%2019.58-54.6t51.74-21q30.6%200%2049.25%2020.36t18.66%2052.34q0.01%2033.31-19.4%2054.09z%20m133.86-105.21a5.65%205.65%200%200%201-5.65%205.65h-35.08v110a7.84%207.84%200%200%201-7.84%207.84h-14.83a7.84%207.84%200%200%201-7.84-7.84V623h-33.44a7.19%207.19%200%200%201-7.19-7.19V605.3a7.18%207.18%200%200%201%207.19-7.18h99a5.64%205.64%200%200%201%205.65%205.64z%22%20fill%3D%22%23FF716E%22%20%2F%3E%3Cpath%20d%3D%22M737.52%20454.27C705.06%20414%20672%20369%20644.11%20321.63%20442.76%20344.42%20286.3%20515.32%20286.3%20722.76a402.15%20402.15%200%200%200%2038.25%20171.73c51.64%2036.33%20118.34%2066.76%20197.88%2065.37h0.67c8.63%200.41%20166.84%202%20294.61-148.69%2059.68-86.23%2064.9-130.89%2056.53-224.8-8.44-94.55-85.68-167.91-99.59-258.44q-4.65-1-9.34-1.87c-22.23%2045.94-25.01%2079.48-27.79%20128.21zM433.76%20731.65a9.2%209.2%200%200%201-9.2%209.2h-12a9.2%209.2%200%200%201-9.21-9.2V682h-60.81v49.69a9.2%209.2%200%200%201-9.21%209.2h-12a9.2%209.2%200%200%201-9.2-9.2V605.57a7.45%207.45%200%200%201%207.45-7.45h15.5a7.45%207.45%200%200%201%207.46%207.45v50.14h60.81v-50.14a7.45%207.45%200%200%201%207.46-7.45h15.5a7.45%207.45%200%200%201%207.45%207.45zM578%20722.56q-19.38%2020.78-50.81%2020.78-30.69%200-49.86-20.14t-19.16-51.83q0-33.54%2019.58-54.6t51.74-21q30.6%200%2049.25%2020.36t18.66%2052.34q0.01%2033.31-19.4%2054.09z%20m133.86-105.21a5.65%205.65%200%200%201-5.65%205.65h-35.08v110a7.84%207.84%200%200%201-7.84%207.84h-14.83a7.84%207.84%200%200%201-7.84-7.84V623h-33.44a7.19%207.19%200%200%201-7.19-7.19V605.3a7.18%207.18%200%200%201%207.19-7.18h99a5.64%205.64%200%200%201%205.65%205.64z%22%20fill%3D%22%23FF5C64%22%20%2F%3E%3Cpath%20d%3D%22M528.58%20622.07q-17.88%200-28.15%2013.27t-10.28%2034.37q0%2020.82%2010%2034t27.6%2013.29q17.87%200%2027.83-12.67t9.94-34q0-22.31-9.66-35.25t-27.28-13.01z%22%20fill%3D%22%23FC4956%22%20%2F%3E%3Cpath%20d%3D%22M874.24%20586.38c-5.84-65.46-44.67-120.77-72.62-178.64a404%20404%200%200%200-61.32%208.36c-1.21%2011.93-2%2024.45-2.78%2038.17Q725.27%20439.06%20713%20423c-137.63%2040-244.93%20151.3-279.24%20291.26v17.39a9.19%209.19%200%200%201-5.43%208.38%20406.31%20406.31%200%200%200%2019.11%20211.62%20299.75%20299.75%200%200%200%2075%208.21h0.67c8.63%200.41%20166.84%202%20294.61-148.69%2059.67-86.17%2064.89-130.88%2056.52-224.79zM578%20722.56q-19.38%2020.78-50.81%2020.78-30.69%200-49.86-20.14t-19.16-51.83q0-33.54%2019.58-54.6t51.74-21q30.6%200%2049.25%2020.36t18.66%2052.34q0.01%2033.31-19.4%2054.09z%20m133.86-105.21a5.65%205.65%200%200%201-5.65%205.65h-35.08v110a7.84%207.84%200%200%201-7.84%207.84h-14.83a7.84%207.84%200%200%201-7.84-7.84V623h-33.44a7.19%207.19%200%200%201-7.19-7.19V605.3a7.18%207.18%200%200%201%207.19-7.18h99a5.64%205.64%200%200%201%205.65%205.64z%22%20fill%3D%22%23FC4956%22%20%2F%3E%3Cpath%20d%3D%22M711.86%20615.36v2a5.65%205.65%200%200%201-5.65%205.65h-1.35a404.54%20404.54%200%200%200-33.73%2043.33V733a7.84%207.84%200%200%201-7.84%207.84h-14.83a7.84%207.84%200%200%201-7.84-7.84v-13a402.12%20402.12%200%200%200-38.29%20171.83A407.43%20407.43%200%200%200%20606.2%20948c59-15.85%20140-52.48%20211.51-136.78%2059.68-86.23%2064.9-130.89%2056.53-224.8-2.18-24.38-8.93-47.34-18-69.55a404.38%20404.38%200%200%200-144.38%2098.49z%22%20fill%3D%22%23F23D4F%22%20%2F%3E%3Cpath%20d%3D%22M604.36%20421.12c0%2013.65-40.9%203.37-91.35%203.52s-91.33%2010.66-91.37-3%2040.81-33.29%2091.26-33.44%2091.42%2019.27%2091.46%2032.92z%22%20fill%3D%22%23FFFFFF%22%20%2F%3E%3C%2Fsvg%3E\",\n    good: \"https://iconfont.tyrantg.com/api/illustrate.svg?svg_string=%3Csvg%20class%3D%22icon%22%20style%3D%22width%3A%201em%3Bheight%3A%201em%3Bvertical-align%3A%20middle%3Bfill%3A%20currentColor%3Boverflow%3A%20hidden%3B%22%20viewBox%3D%220%200%201024%201024%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M591.62819%20121.904762c7.68%200%2021.187048%201.633524%2031.524572%204.973714%2050.907429%2016.505905%2080.213333%2070.582857%2068.339809%20124.708572l-1.219047%205.071238-45.372953%20170.179047h179.736381c21.820952%200%2043.398095%208.094476%2058.026667%2024.283429%2016.335238%2018.090667%2022.698667%2042.032762%2017.846857%2065.267809l-1.219047%204.973715-94.768762%20337.432381a59.294476%2059.294476%200%200%201-52.662857%2043.154285l-4.388572%200.146286H268.190476V444.001524c97.084952-21.016381%20239.079619-279.28381%20239.079619-279.28381C527.457524%20137.337905%20551.936%20121.904762%20591.62819%20121.904762zM828.952381%20501.126095c0-0.316952-0.146286-0.512-0.560762-0.975238%200.341333%200.390095-0.975238-0.170667-3.754667-0.170667H549.692952l69.900191-262.217142c5.022476-18.773333-4.144762-36.498286-18.968381-41.301334a52.589714%2052.589714%200%200%200-9.020952-1.414095c-10.922667%200-15.457524%201.26781-21.065143%207.558095l-1.950477%202.29181-9.216%2016.091428-9.874285%2016.700953a1534.683429%201534.683429%200%200%201-72.216381%20110.201905c-28.013714%2038.765714-55.53981%2072.167619-82.553905%2098.816-17.968762%2017.724952-35.59619%2032.49981-53.394286%2043.958857V828.952381h395.605334L828.952381%20501.126095zM121.904762%20438.857143h73.142857v463.238095H121.904762z%22%20%2F%3E%3C%2Fsvg%3E\",\n    discuss: \"https://iconfont.tyrantg.com/api/illustrate.svg?svg_string=%3Csvg%20class%3D%22icon%22%20style%3D%22width%3A%201em%3Bheight%3A%201em%3Bvertical-align%3A%20middle%3Bfill%3A%20currentColor%3Boverflow%3A%20hidden%3B%22%20viewBox%3D%220%200%201024%201024%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M731.428571%20268.190476a73.142857%2073.142857%200%200%201%2073.142858%2073.142857v365.714286a73.142857%2073.142857%200%200%201-73.142858%2073.142857H479.47581l-165.376%20114.492953A29.257143%2029.257143%200%200%201%20268.190476%20870.64381V780.190476H170.666667a73.142857%2073.142857%200%200%201-73.142857-73.142857V341.333333a73.142857%2073.142857%200%200%201%2073.142857-73.142857h560.761904z%20m0%2073.142857H170.666667v365.714286h170.666666v79.798857L456.630857%20707.047619H731.428571V341.333333z%20m-285.744761%20219.428572v73.142857H243.809524v-73.142857h201.874286zM853.333333%20146.285714a73.142857%2073.142857%200%200%201%2073.142857%2073.142857v390.095239h-73.142857V219.428571H292.571429V146.285714h560.761904zM585.142857%20414.47619v73.142858H243.809524v-73.142858h341.333333z%22%20%2F%3E%3C%2Fsvg%3E\",\n    share: \"https://iconfont.tyrantg.com/api/illustrate.svg?svg_string=%3Csvg%20class%3D%22icon%22%20style%3D%22width%3A%201em%3Bheight%3A%201em%3Bvertical-align%3A%20middle%3Bfill%3A%20currentColor%3Boverflow%3A%20hidden%3B%22%20viewBox%3D%220%200%201024%201024%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M354.986667%20219.428571v73.142858H195.047619v536.380952h585.142857V548.571429h73.142857V828.952381a73.142857%2073.142857%200%200%201-73.142857%2073.142857H195.047619a73.142857%2073.142857%200%200%201-73.142857-73.142857V292.571429a73.142857%2073.142857%200%200%201%2073.142857-73.142858h159.939048z%20m383.829333-100.473904l172.397714%20172.373333-181.00419%20181.028571-51.736381-51.712L757.784381%20341.333333H670.47619c-139.068952%200-252.245333%20110.884571-255.902476%20249.07581L414.47619%20597.333333v97.52381h-73.142857v-97.52381C341.333333%20415.548952%20488.69181%20268.190476%20670.47619%20268.190476h114.127239l-97.499429-97.523809%2051.712-51.712z%22%20%2F%3E%3C%2Fsvg%3E\",\n    replysort: \"https://iconfont.tyrantg.com/api/illustrate.svg?svg_string=%3Csvg%20class%3D%22icon%22%20style%3D%22width%3A%201em%3Bheight%3A%201em%3Bvertical-align%3A%20middle%3Bfill%3A%20currentColor%3Boverflow%3A%20hidden%3B%22%20viewBox%3D%220%200%201024%201024%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M146.285714%20609.52381h121.904762v243.809523H146.285714z%20m195.047619-195.04762h121.904762v438.857143h-121.904762z%20m195.047619%2048.761905h121.904762v390.095238h-121.904762z%20m195.047619-292.571428h121.904762v682.666666h-121.904762z%22%20%2F%3E%3C%2Fsvg%3E\",\n    application: \"https://iconfont.tyrantg.com/api/illustrate.svg?svg_string=%3Csvg%20class%3D%22icon%22%20style%3D%22width%3A%201em%3Bheight%3A%201em%3Bvertical-align%3A%20middle%3Bfill%3A%20currentColor%3Boverflow%3A%20hidden%3B%22%20viewBox%3D%220%200%201024%201024%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M512%20512m-512%200a512%20512%200%201%200%201024%200%20512%20512%200%201%200-1024%200Z%22%20fill%3D%22%23B2DB48%22%20%2F%3E%3Cpath%20d%3D%22M252.586667%20301.397333c0-26.965333%2021.942857-48.810667%2048.810666-48.810666h149.455238c26.940952%200%2048.786286%2021.942857%2048.786286%2048.810666v149.455238c0%2026.940952-21.918476%2048.786286-48.810667%2048.786286h-149.430857c-26.965333%200-48.810667-21.918476-48.810666-48.810667v-149.430857z%20m0%20285.42781c0-26.965333%2021.942857-48.810667%2048.810666-48.810667h149.455238c26.940952%200%2048.786286%2021.918476%2048.786286%2048.810667v149.430857c0%2026.965333-21.918476%2048.810667-48.810667%2048.810667h-149.430857c-26.965333%200-48.810667-21.942857-48.810666-48.810667v-149.455238z%20m285.427809-285.42781c0-26.965333%2021.918476-48.810667%2048.810667-48.810666h149.430857c26.965333%200%2048.810667%2021.942857%2048.810667%2048.810666v149.455238c0%2026.940952-21.942857%2048.786286-48.810667%2048.786286h-149.455238c-26.940952%200-48.786286-21.918476-48.786286-48.810667v-149.430857z%20m0%20285.42781c0-26.965333%2021.918476-48.810667%2048.810667-48.810667h149.430857c26.965333%200%2048.810667%2021.918476%2048.810667%2048.810667v149.430857c0%2026.965333-21.942857%2048.810667-48.810667%2048.810667h-149.455238c-26.940952%200-48.786286-21.942857-48.786286-48.810667v-149.455238z%22%20fill%3D%22%23FFFFFF%22%20%2F%3E%3C%2Fsvg%3E\",\n    post: \"https://iconfont.tyrantg.com/api/illustrate.svg?svg_string=%3Csvg%20class%3D%22icon%22%20style%3D%22width%3A%201em%3Bheight%3A%201em%3Bvertical-align%3A%20middle%3Bfill%3A%20currentColor%3Boverflow%3A%20hidden%3B%22%20viewBox%3D%220%200%201024%201024%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M700.42889122%20483.67495251h-77.14260619v-85.78906382h77.14260619a8.06920734%208.06920734%200%200%200%208.59732945-8.59732946v-17.09640253a8.06920734%208.06920734%200%200%200-8.59732945-8.59732945h-77.14260619V320.76784659a8.06920734%208.06920734%200%200%200-8.59732945-8.59732945h-17.09640253a8.06920734%208.06920734%200%200%200-8.59732946%208.59732945v162.90710592h-25.65688682a8.06920734%208.06920734%200%200%200-8.59732847%208.59732847v171.45530817a8.08148939%208.08148939%200%200%200%208.59732847%208.59732847h94.27585584a51.58397475%2051.58397475%200%200%200%2051.4488742-51.46115526V492.23543583a8.16746273%208.16746273%200%200%200-8.63417559-8.56048332z%20m-25.69373199%20137.16424575a17.19465792%2017.19465792%200%200%201-17.12096662%2017.13324868h-63.43600725c-3.41436769%200-5.14611563-1.74402998-5.14611563-5.15839768v-109.73876582c0-3.40208564%201.73174794-5.14611563%205.14611563-5.14611563h75.41085825c3.40208564%200%205.14611563%201.74402998%205.14611562%205.14611563zM513.5475192%20637.97244694c-6.89014561-1.74402998-17.13324867-6.82873538-32.58387759-17.13324868-32.58387759-25.69373198-30.85212966-51.4488742-30.85212966-51.4488742V389.32540537a8.06920734%208.06920734%200%200%200-8.59732945-8.59732945h-17.09640253a8.06920734%208.06920734%200%200%200-8.59732945%208.59732945l-1.74402999%20180.06491869s0%2034.31562553-24.01111223%2053.11921191c-13.71888098%208.59732945-27.43776197%2013.71888098-34.38931683%2015.46291097a7.36913953%207.36913953%200%200%200-6.89014463%206.8901456v17.12096663c0%205.15839767%205.15839767%208.59732945%2010.3045133%208.59732945%2011.974851-1.74402998%2030.85212966-5.15839767%2042.90067195-13.71888098%2027.42547992-17.19465792%2032.58387759-34.38931683%2032.5838776-34.38931683s5.14611563%2015.46291097%2034.32790758%2032.58387759c15.46291097%2010.3045133%2030.83984761%2013.71888098%2041.1443609%2013.71888099%205.15839767%200%2010.31679534-3.41436769%2010.31679535-8.59732945v-17.05955738c0.08597334-1.73174794-3.35295844-3.41436769-6.81645432-5.14611562z%22%20fill%3D%22%231296db%22%20%2F%3E%3Cpath%20d%3D%22M511.45959683%203.30532523C237.65922645%203.30532523%2014.96383691%20222.03366187%208.54040317%20494.28651305V518.50641712c6.42343275%20272.24056912%20229.1188223%20490.96890577%20502.91919366%20490.96890577%20277.84111556%200%20503.06657527-225.22546069%20503.06657526-503.06657625S789.30071141%203.30532523%20511.45959683%203.30532523zM808.09201672%20677.59385273a78.29710481%2078.29710481%200%200%201-78.30938686%2078.30938686H367.60171527l-121.06267622%2066.03976969V305.71023825A78.29710481%2078.29710481%200%200%201%20324.84842591%20227.42541548h404.97105009A78.28482277%2078.28482277%200%200%201%20808.09201672%20305.71023825z%22%20fill%3D%22%231296db%22%20%2F%3E%3Cpath%20d%3D%22M357.5059948%20586.51129069h17.13324867a8.08148939%208.08148939%200%200%200%208.59732945-8.59732847V353.32716009a7.36913953%207.36913953%200%200%201%206.90242667-6.90242765h89.19114947a7.36913953%207.36913953%200%200%201%206.81645432%206.90242765V577.95080737a8.08148939%208.08148939%200%200%200%208.59732846%208.59732946h17.12096761a8.08148939%208.08148939%200%200%200%208.59732847-8.59732946V329.36517506a17.09640352%2017.09640352%200%200%200-17.21922201-17.19465792h-102.83633818c-29.18179195%200-51.46115625%2022.2793643-51.46115625%2051.4488742V577.95080737a8.08148939%208.08148939%200%200%200%208.56048332%208.56048332z%22%20fill%3D%22%231296db%22%20%2F%3E%3C%2Fsvg%3E\",\n    number: \"https://iconfont.tyrantg.com/api/illustrate.svg?svg_string=%3Csvg%20class%3D%22icon%22%20style%3D%22width%3A%201em%3Bheight%3A%201em%3Bvertical-align%3A%20middle%3Bfill%3A%20currentColor%3Boverflow%3A%20hidden%3B%22%20viewBox%3D%220%200%201024%201024%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M896%20224H128c-35.2%200-64%2028.8-64%2064v448c0%2035.2%2028.8%2064%2064%2064h768c35.2%200%2064-28.8%2064-64V288c0-35.2-28.8-64-64-64z%20m0%20480c0%2019.2-12.8%2032-32%2032H160c-19.2%200-32-12.8-32-32V320c0-19.2%2012.8-32%2032-32h704c19.2%200%2032%2012.8%2032%2032v384z%22%20fill%3D%22%23333333%22%20%2F%3E%3Cpath%20d%3D%22M291.2%20412.8c-12.8%206.4-22.4%2012.8-35.2%2016v41.6c22.4-6.4%2041.6-16%2054.4-28.8V640h38.4V393.6H320c-6.4%203.2-19.2%2012.8-28.8%2019.2zM489.6%20560c22.4-16%2041.6-28.8%2048-38.4%2016-16%2022.4-38.4%2022.4-57.6%200-22.4-6.4-38.4-22.4-54.4-16-12.8-35.2-19.2-57.6-19.2-25.6%200-48%209.6-60.8%2025.6-16%2016-22.4%2038.4-22.4%2067.2h38.4c0-19.2%203.2-35.2%2012.8-44.8%206.4-9.6%2019.2-16%2032-16s25.6%203.2%2032%209.6c6.4%206.4%209.6%2016%209.6%2028.8s-6.4%2025.6-16%2038.4c-6.4%206.4-16%2016-32%2028.8-28.8%2019.2-44.8%2035.2-54.4%2044.8-16%2019.2-22.4%2041.6-22.4%2064h166.4v-35.2H444.8c6.4-12.8%2022.4-25.6%2044.8-41.6z%20m233.6-54.4c25.6-9.6%2038.4-25.6%2038.4-54.4%200-22.4-6.4-38.4-22.4-51.2-16-12.8-35.2-19.2-57.6-19.2S640%20387.2%20624%20400c-16%2012.8-25.6%2032-25.6%2057.6h38.4c0-16%206.4-25.6%2012.8-32%206.4-6.4%2019.2-9.6%2032-9.6s25.6%203.2%2032%209.6c6.4%206.4%209.6%2016%209.6%2028.8s-3.2%2022.4-9.6%2028.8c-6.4%206.4-19.2%209.6-32%209.6h-16v28.8h16c16%200%2025.6%203.2%2035.2%209.6%209.6%206.4%2012.8%2016%2012.8%2032%200%2012.8-3.2%2022.4-12.8%2028.8-9.6%209.6-19.2%2012.8-35.2%2012.8-12.8%200-25.6-3.2-32-12.8-9.6-9.6-12.8-22.4-16-38.4h-38.4c3.2%2028.8%2012.8%2048%2028.8%2064%2016%2012.8%2035.2%2019.2%2060.8%2019.2%2025.6%200%2048-6.4%2064-22.4%2016-16%2022.4-32%2022.4-54.4%200-16-3.2-25.6-12.8-35.2-9.6-6.4-22.4-16-35.2-19.2z%22%20fill%3D%22%23333333%22%20%2F%3E%3C%2Fsvg%3E\",\n    disclaimer: \"https://iconfont.tyrantg.com/api/illustrate.svg?svg_string=%3Csvg%20class%3D%22icon%22%20style%3D%22width%3A%201em%3Bheight%3A%201em%3Bvertical-align%3A%20middle%3Bfill%3A%20currentColor%3Boverflow%3A%20hidden%3B%22%20viewBox%3D%220%200%201024%201024%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M512%20512m-470.373984%200a470.373984%20470.373984%200%201%200%20940.747968%200%20470.373984%20470.373984%200%201%200-940.747968%200Z%22%20fill%3D%22%23EB8A98%22%20%2F%3E%3Cpath%20d%3D%22M499.512195%20491.186992m-391.284553%200a391.284553%20391.284553%200%201%200%20782.569106%200%20391.284553%20391.284553%200%201%200-782.569106%200Z%22%20fill%3D%22%23FF96A5%22%20%2F%3E%3Cpath%20d%3D%22M512%2062.439024c247.891252%200%20449.560976%20201.673886%20449.560976%20449.560976%200%20247.891252-201.669724%20449.560976-449.560976%20449.560976-247.887089%200-449.560976-201.669724-449.560976-449.560976C62.439024%20264.112911%20264.112911%2062.439024%20512%2062.439024zM20.813008%20512c0%20270.835512%20220.347317%20491.186992%20491.186992%20491.186992%20270.835512%200%20491.186992-220.35148%20491.186992-491.186992C1003.186992%20241.160325%20782.835512%2020.813008%20512%2020.813008%20241.160325%2020.813008%2020.813008%20241.160325%2020.813008%20512z%22%20fill%3D%22%236E6E96%22%20%2F%3E%3Cpath%20d%3D%22M470.711154%20299.803057v235.291057a34.899252%2034.899252%200%200%200%2069.802667%200V299.803057c0-19.277008-15.626407-34.899252-34.903414-34.899252s-34.899252%2015.626407-34.899253%2034.899252zM470.711154%20651.942504v36.510179a34.903415%2034.903415%200%200%200%2069.802667%200v-36.510179a34.907577%2034.907577%200%200%200-69.802667%200z%22%20fill%3D%22%236E6E96%22%20%2F%3E%3C%2Fsvg%3E\",\n    logs: \"https://iconfont.tyrantg.com/api/illustrate.svg?svg_string=%3Csvg%20class%3D%22icon%22%20style%3D%22width%3A%201em%3Bheight%3A%201em%3Bvertical-align%3A%20middle%3Bfill%3A%20currentColor%3Boverflow%3A%20hidden%3B%22%20viewBox%3D%220%200%201024%201024%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M726.9%20267.7H297.1c-16.2%200-29.4%2013.2-29.4%2029.4V727c0%2016.2%2013.2%2029.4%2029.4%2029.4H727c16.2%200%2029.4-13.2%2029.4-29.4V297.1c-0.1-16.2-13.2-29.4-29.5-29.4z%20m-370%2070.5h148c11.9%200%2021.6%209.6%2021.6%2021.6%200%2011.9-9.6%2021.6-21.6%2021.6h-148c-11.9%200-21.6-9.6-21.6-21.6%200-12%209.6-21.6%2021.6-21.6z%20m-21.6%20224.6c0-11.9%209.6-21.6%2021.6-21.6h245.7c11.9%200%2021.6%209.6%2021.6%2021.6%200%2011.9-9.7%2021.6-21.6%2021.6H356.9c-12-0.1-21.6-9.7-21.6-21.6z%20m331.8%20123H504.8c-11.9%200-21.6-9.6-21.6-21.6%200-11.9%209.6-21.6%2021.6-21.6h162.3c11.9%200%2021.6%209.6%2021.6%2021.6%200%2012-9.6%2021.6-21.6%2021.6z%20m0-202.9H421.4c-11.9%200-21.6-9.6-21.6-21.6s9.6-21.6%2021.6-21.6h245.7c11.9%200%2021.6%209.6%2021.6%2021.6%200%2011.9-9.6%2021.6-21.6%2021.6z%22%20fill%3D%22%23F5CF5D%22%20%2F%3E%3Cpath%20d%3D%22M512%200C229.2%200%200%20229.2%200%20512s229.2%20512%20512%20512%20512-229.2%20512-512S794.8%200%20512%200z%20m287.4%20726.9c0%2040-32.5%2072.5-72.5%2072.5H297.1c-40%200-72.5-32.5-72.5-72.5V297.1c0-40%2032.5-72.5%2072.5-72.5H727c40%200%2072.5%2032.5%2072.5%2072.5v429.8z%22%20fill%3D%22%23F5CF5D%22%20%2F%3E%3C%2Fsvg%3E\",\n    about: \"https://iconfont.tyrantg.com/api/illustrate.svg?svg_string=%3Csvg%20class%3D%22icon%22%20style%3D%22width%3A%201em%3Bheight%3A%201em%3Bvertical-align%3A%20middle%3Bfill%3A%20currentColor%3Boverflow%3A%20hidden%3B%22%20viewBox%3D%220%200%201024%201024%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M881.6%20512.1c0%20203.7-165.7%20369.5-369.5%20369.5S142.6%20715.8%20142.6%20512.1s165.7-369.5%20369.5-369.5%20369.5%20165.8%20369.5%20369.5m77.7%200c0-246.6-200.6-447.2-447.2-447.2S64.9%20265.5%2064.9%20512.1s200.6%20447.2%20447.2%20447.2%20447.2-200.6%20447.2-447.2M582.5%20318.2c9-9%2014.2-21.6%2014.2-34.3%200-12.8-5.2-25.4-14.2-34.4s-21.6-14.2-34.4-14.2c-12.7%200-25.3%205.2-34.3%2014.2-9.1%209-14.3%2021.6-14.3%2034.4%200%2012.7%205.2%2025.3%2014.3%2034.3%209%209%2021.5%2014.3%2034.3%2014.3s25.3-5.3%2034.4-14.3m-96.6%20464.3c-7.6%200-15.2-2.6-21.3-7.5-9.9-7.9-14.5-20.7-12.1-33.1l47.9-243.1-26.4%2014.8c-16.4%209.2-37.1%203.4-46.3-13-9.2-16.4-3.4-37.1%2012.9-46.3l90.7-51.1c11.6-6.5%2025.9-5.7%2036.6%202.1%2010.8%207.8%2016%2021.1%2013.4%2034.1l-49.6%20251.9%2040.7-17.7c17.2-7.5%2037.3%200.4%2044.8%2017.6%207.5%2017.2-0.4%2037.3-17.6%2044.8l-100.2%2043.7c-4.3%201.9-8.9%202.8-13.5%202.8%22%20%2F%3E%3C%2Fsvg%3E\",\n    support: \"https://iconfont.tyrantg.com/api/illustrate.svg?svg_string=%3Csvg%20class%3D%22icon%22%20style%3D%22width%3A%201em%3Bheight%3A%201em%3Bvertical-align%3A%20middle%3Bfill%3A%20currentColor%3Boverflow%3A%20hidden%3B%22%20viewBox%3D%220%200%201024%201024%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M720.1%20346.5m-93%200a93%2093%200%201%200%20186%200%2093%2093%200%201%200-186%200Z%22%20fill%3D%22%23F76260%22%20%2F%3E%3Cpath%20d%3D%22M719.9%20382.3m-7.2%200a7.2%207.2%200%201%200%2014.4%200%207.2%207.2%200%201%200-14.4%200Z%22%20fill%3D%22%23FFFFFF%22%20%2F%3E%3Cpath%20d%3D%22M713.1%20303.5h14l-2.7%2062.8h-9.2%22%20fill%3D%22%23FFFFFF%22%20%2F%3E%3Cpath%20d%3D%22M719.9%20632.5m-93%200a93%2093%200%201%200%20186%200%2093%2093%200%201%200-186%200Z%22%20fill%3D%22%2310AEFF%22%20%2F%3E%3Cpath%20d%3D%22M719.9%20593.9m-8.3%200a8.3%208.3%200%201%200%2016.6%200%208.3%208.3%200%201%200-16.6%200Z%22%20fill%3D%22%23FFFFFF%22%20%2F%3E%3Cpath%20d%3D%22M713.9%20611.3h12l-1.1%2067.2H715%22%20fill%3D%22%23FFFFFF%22%20%2F%3E%3Cpath%20d%3D%22M511.3%20512.2m-448%200a448%20448%200%201%200%20896%200%20448%20448%200%201%200-896%200Z%22%20fill%3D%22%2309BB07%22%20%2F%3E%3Cpath%20d%3D%22M312.2%20503.8l-26.4%2032.8%20153.7%20160.3%20324.2-319.7-26-26.4-298%20251z%22%20fill%3D%22%23FFFFFF%22%20%2F%3E%3C%2Fsvg%3E\",\n    bug: \"https://iconfont.tyrantg.com/api/illustrate.svg?svg_string=%3Csvg%20class%3D%22icon%22%20style%3D%22width%3A%201em%3Bheight%3A%201em%3Bvertical-align%3A%20middle%3Bfill%3A%20currentColor%3Boverflow%3A%20hidden%3B%22%20viewBox%3D%220%200%201024%201024%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M512%20512m-512%200a512%20512%200%201%200%201024%200%20512%20512%200%201%200-1024%200Z%22%20fill%3D%22%23FF3E3E%22%20%2F%3E%3Cpath%20d%3D%22M353.166222%20240.207644h119.876267v82.7392H353.166222v-82.7392z%20m94.754134%2059.528534v-36.590934h-69.358934v36.590934h69.358934z%20m-103.2192%2044.2368h137.352533v23.483733h-57.344v28.398933h48.878933v23.210667h-48.878933v30.3104h63.8976v24.576h-154.282667v-24.576h64.170667v-30.3104h-47.5136v-23.210667h47.5136v-28.398933h-53.794133v-23.483733z%20m-102.126934-40.1408h37.6832V270.791111c-12.743111%201.6384-23.483733%202.912711-32.221866%203.822933L242.847289%20250.311111c32.950044-2.730667%2063.0784-8.283022%2090.385067-16.657067l9.0112%2024.576c-10.922667%203.094756-23.301689%205.916444-37.137067%208.465067v37.137067h31.402667v24.849066h-31.402667v11.4688c10.376533%209.8304%2022.755556%2022.482489%2037.137067%2037.956267l-14.472534%2021.845333a816.036978%20816.036978%200%200%200-22.664533-35.2256v117.418667h-24.849067v-113.8688a281.304178%20281.304178%200%200%201-33.041066%2063.351467l-11.4688-28.945067a202.069333%20202.069333%200%200%200%2041.506133-74.001067H242.574222v-24.849066z%20m431.263289-74.274134c4.187022%208.374044%207.554844%2015.746844%2010.103467%2022.1184h97.211733v24.029867h-199.338667v63.624533c-1.092267%2060.074667-10.740622%20108.043378-28.945066%20143.906134l-19.6608-17.476267c14.7456-30.401422%2022.391467-72.544711%2022.9376-126.429867V251.676444h101.307733a146.614044%20146.614044%200%200%200-9.8304-17.749333l26.2144-4.369067z%20m-26.2144%2093.3888a539.989333%20539.989333%200%200%201%2034.952533%2019.387734%20267.605333%20267.605333%200%200%200%2039.594667-27.579734h-115.780267v-22.1184h148.2752v18.568534a288.039822%20288.039822%200%200%201-52.974933%2043.690666l9.0112%206.5536-3.549867%203.549867h69.905067v20.206933c-11.4688%2021.2992-23.938844%2038.957511-37.410133%2052.974934l-19.387734-15.5648a169.710933%20169.710933%200%200%200%2028.672-33.860267h-54.613333v67.447467c0%2018.386489-9.0112%2027.579733-27.0336%2027.579733h-40.686933l-5.461334-24.576c15.291733%201.274311%2027.761778%201.911467%2037.410134%201.911467%206.735644%200%2010.103467-3.640889%2010.103466-10.922667v-61.44h-78.097066V364.999111h89.565866a452.039111%20452.039111%200%200%200-47.786666-27.0336l15.291733-15.018667zM266.695111%20574.896356h28.945067v78.6432c11.4688-16.566044%2025.850311-24.849067%2043.144533-24.849067%2020.206933%200%2036.135822%207.3728%2047.786667%2022.1184%2010.740622%2013.835378%2016.110933%2031.038578%2016.110933%2051.6096%200%2021.663289-5.461333%2039.3216-16.384%2052.974933-12.014933%2014.7456-28.307911%2022.1184-48.878933%2022.1184-19.114667%200-33.678222-6.917689-43.690667-20.753066V773.688889H266.695111v-198.792533z%20m65.536%2077.277866c-11.104711%200-19.842844%204.278044-26.2144%2012.834134-7.463822%209.102222-11.195733%2021.390222-11.195733%2036.864v2.4576c0%2014.017422%203.003733%2025.577244%209.0112%2034.679466%206.917689%2010.012444%2016.657067%2015.018667%2029.218133%2015.018667%2014.017422%200%2024.484978-5.097244%2031.402667-15.291733%205.643378-9.102222%208.465067-21.208178%208.465066-36.317867%200-15.655822-3.003733-27.579733-9.0112-35.771733-6.735644-9.648356-17.294222-14.472533-31.675733-14.472534z%20m120.513422-19.6608h28.945067v86.016c0%2012.196978%202.548622%2020.935111%207.645867%2026.2144%205.097244%205.643378%2013.198222%208.465067%2024.302933%208.465067%207.281778%200%2014.290489-3.094756%2021.026133-9.284267%206.5536-6.371556%2011.104711-14.7456%2013.653334-25.122133v-86.289067h28.945066V773.688889h-28.945066v-19.114667c-12.014933%2015.291733-26.851556%2022.9376-44.509867%2022.9376-34.042311%200-51.063467-19.023644-51.063467-57.070933v-87.927467z%20m239.024356-3.822933c18.568533%200%2032.950044%207.554844%2043.144533%2022.664533v-18.8416h28.945067v131.8912c0%2044.782933-21.936356%2067.1744-65.809067%2067.1744-19.478756%200-34.497422-3.731911-45.056-11.195733-10.194489-7.463822-16.657067-19.023644-19.387733-34.679467h28.945067c1.6384%208.374044%205.097244%2014.290489%2010.376533%2017.749334%205.461333%203.458844%2013.835378%205.188267%2025.122133%205.188266%2024.576%200%2036.864-13.289244%2036.864-39.867733v-21.845333c-10.376533%2015.655822-24.758044%2023.483733-43.144533%2023.483733-19.114667%200-34.588444-6.462578-46.421333-19.387733-11.832889-12.561067-17.749333-29.582222-17.749334-51.063467%200-21.2992%205.916444-38.411378%2017.749334-51.336533%2011.650844-13.289244%2027.124622-19.933867%2046.421333-19.933867z%20m4.369067%2023.483733c-12.561067%200-22.027378%204.278044-28.398934%2012.834134-6.917689%208.009956-10.376533%2019.6608-10.376533%2034.952533%200%2013.653333%202.730667%2024.484978%208.192%2032.494933%206.371556%209.466311%2016.566044%2014.199467%2030.583467%2014.199467%2012.196978%200%2021.845333-4.096%2028.945066-12.288%206.735644-8.738133%2010.103467-20.206933%2010.103467-34.4064%200-14.563556-3.367822-26.2144-10.103467-34.952533-6.917689-8.556089-16.566044-12.834133-28.945066-12.834134z%22%20fill%3D%22%23FFFFFF%22%20%2F%3E%3C%2Fsvg%3E\",\n    donate: \"https://s2.loli.net/2024/07/28/FwqQiWtNr1uPIGK.png\",\n    top: \"https://hikerfans.com/img/top.png\",\n    on: \"https://hikerfans.com/tubiao/messy/55.svg\",\n    off: \"https://hikerfans.com/tubiao/messy/63.svg\"\n};"},{"col_type":"movie_3","name":"轮播页面","path":"Carousel.view","rule":"js:\n(function() {\n    const apiview = $.require(\"Config.view\");\n    let array = decodeURIComponent(getParam(\"array\"));\n    eval(\"array =\" + array);\n    apiview._layoutLinkRuleParse(array);\n    setResult(apiview.layout);\n})();"}],"title":"酷安","author":"旧巷陌人","version":2024090500,"type":"video","url":"hiker://empty$$fypage","col_type":"movie_3","class_name":"","class_url":"","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:\nconst setTimeout;\nif (getItem(\"first\") == MY_RULE.version) {\n    $.require(\"Config.view\")._baseParse();\n} else {\n    $.require(\"Config.view\")._getsMind();\n};","searchFind":"","search_url":"","group":"①推荐","detail_col_type":"movie_1","detail_find_rule":"","sdetail_col_type":"movie_1","sdetail_find_rule":"","ua":"mobile","preRule":"let Carousel = \"hiker://files/rules/Carousel.html\";\nlet CarouselUrl = \"http://hiker.nokia.press/hikerule/rulelist.json?id=6997\";\nlet ScrollCard = \"hiker://files/rules/ScrollCard.html\";\nlet ScrollCardUrl = \"http://hiker.nokia.press/hikerule/rulelist.json?id=7000\";\nlet _demolRuleUrl = \"http://hiker.nokia.press/hikerule/rulelist.json?id=6999\";\nlet hikerPop = $.require(\"http://hiker.nokia.press/hikerule/rulelist.json?id=6966\");\nif (!fileExist(Carousel)) saveFile(Carousel, request(CarouselUrl), 0);\nif (!fileExist(ScrollCard)) saveFile(ScrollCard, request(ScrollCardUrl), 0);\nlet _demolRuleVr = getMyVar(\":ruleVr\", \"0\");\nif (_demolRuleVr == 0) {\n    let _demolRuleMap = JSON.parse(request(_demolRuleUrl));\n    if (MY_RULE.version < _demolRuleMap.version) {\n        hikerPop.confirm({\n            title: \"发现新版本\",\n            okTitle: \"更新\",\n            hideCancel: true,\n            confirm() {\n                return `海阔视界规则分享，当前分享的是：小程序￥home_rule_v2￥base64://@酷安@${base64Encode(JSON.stringify(_demolRuleMap))}`;\n            }\n        });\n    };\n    putMyVar(\":ruleVr\", \"1\");\n};","pages":"[{\"col_type\":\"movie_3\",\"name\":\"页面\",\"path\":\"Config.view\",\"rule\":\"const apiview = {\\n    color: (test) => {\\n        return '<font color=\\\"#FA7298\\\">' + test + '</font>';\\n    },\\n    orange: (test) => {\\n        return '<font color=\\\"#FFA500\\\">' + test + '</font>';\\n    },\\n    black: (test) => {\\n        return '<font color=\\\"#000000\\\">' + test + '</font>';\\n    },\\n    strong: (test) => {\\n        return \\\"<strong>\\\" + test + \\\"</strong>\\\";\\n    },\\n    small: (test) => {\\n        return \\\"<small>\\\" + test + \\\"</small>\\\";\\n    },\\n    center: (test) => {\\n        return '<p style=\\\"text-align: center;\\\">' + test + '</p>';\\n    },\\n    big: (test) => {\\n        return \\\"<big>\\\" + test + \\\"</big>\\\";\\n    },\\n    gray: (test) => {\\n        return '<font color=\\\"gray\\\">' + test + '</font>';\\n    },\\n    rich: (test) => {\\n        return \\\"‘‘’’\\\" + test;\\n    },\\n    addressTag: (url, text) => {\\n        return '<a href=\\\"' + url + '\\\">' + text + '</a>';\\n    },\\n    empty: \\\"hiker://empty\\\",\\n    layout: [],\\n    _Get_scription: \\\"hiker://files/rules/js/subscription.js\\\",\\n    _fileUtil: (text) => {\\n        if (!text.startsWith(\\\"http\\\") && !text.startsWith(\\\"https\\\")) {\\n            return `https://api.coolapk.com${text}`;\\n        };\\n        return text;\\n    },\\n    _fileWebUtil: (text) => {\\n        if (!text.startsWith(\\\"http\\\") && !text.startsWith(\\\"https\\\")) {\\n            return `http://www.coolapk.com${text}`;\\n        };\\n        return text;\\n    },\\n    _Get_keyword: (kw, empty) => {\\n        let mem = storage0.getItem(MY_RULE.title, []);\\n        mem = mem.filter(it => it != kw);\\n        if (mem.length >= 10) {\\n            mem = mem.slice(1);\\n        };\\n        mem.push(kw);\\n        storage0.setItem(MY_RULE.title, mem);\\n        return empty;\\n    },\\n    _Position_tool: (data, array, choice, uuid) => {\\n        let obj = {};\\n        data.forEach((item, index) => {\\n            if (item[uuid] === array[uuid]) {\\n                obj = item;\\n                data.splice(index, 1);\\n                return;\\n            };\\n        });\\n        switch (choice) {\\n            case \\\"top\\\":\\n                data.unshift(obj);\\n                break;\\n            case \\\"end\\\":\\n                data.push(obj);\\n                break;\\n        };\\n    },\\n    _generateStars: (num) => {\\n        let stars = \\\"★\\\".repeat(num);\\n        let whitespaces = \\\"☆\\\".repeat(5 - num);\\n        return stars + whitespaces;\\n    },\\n    _generateString: (str, maxLength) => {\\n        if (str.length > maxLength) {\\n            return str.substring(0, maxLength) + \\\"...\\\";\\n        } else {\\n            return str;\\n        };\\n    },\\n    _formatTimestamp: (timestamp) => {\\n        let now = Date.now() / 1000;\\n        let secondsPerDay = 86400;\\n        let secondsPerWeek = secondsPerDay * 7;\\n        let diff = now - timestamp;\\n        if (diff <= secondsPerWeek) {\\n            if (diff < secondsPerDay) {\\n                let hoursAgo = Math.floor(diff / 3600);\\n                let minutesAgo = Math.floor((diff % 3600) / 60);\\n                return `${hoursAgo === 0 ? `${minutesAgo}分钟前` : `${hoursAgo}小时前`}`;\\n            } else {\\n                let daysAgo = Math.floor(diff / secondsPerDay);\\n                return `${daysAgo}天前`;\\n            };\\n        } else {\\n            let date = new Date(timestamp * 1000);\\n            let year = date.getFullYear();\\n            let month = String(date.getMonth() + 1).padStart(2, \\\"0\\\");\\n            let day = String(date.getDate()).padStart(2, \\\"0\\\");\\n            return `${year}-${month}-${day}`;\\n        };\\n    },\\n    _objectToQueryString: (obArr) => {\\n        return Object.entries(obArr).map(([key, val]) => `${encodeURIComponent(key)}=${encodeURIComponent(val)}`).join(\\\"&\\\");\\n    },\\n    _generateRandomString: (length) => {\\n        let result = \\\"\\\";\\n        const characters = \\\"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\\\";\\n        const charactersLength = characters.length;\\n        for (let i = 0; i < length; i++) {\\n            result += characters.charAt(Math.floor(Math.random() * charactersLength));\\n        };\\n        return result;\\n    },\\n    _generateTokenString: () => {\\n        function getRandomValues(array) {\\n            let rand_max = 256;\\n            if (array instanceof Uint8Array || array instanceof Int8Array) {\\n                rand_max = 256;\\n            } else if (array instanceof Uint16Array || array instanceof Int16Array) {\\n                rand_max = 65536;\\n            } else if (array instanceof Uint32Array || array instanceof Int32Array) {\\n                rand_max = 4294967296;\\n            };\\n\\n            for (let i = 0; i < array.length; i++) {\\n                array[i] = getRandomInt(0, rand_max);\\n            };\\n        };\\n\\n        function getRandomInt(min, max) {\\n            min = Math.ceil(min);\\n            max = Math.floor(max);\\n            return Math.floor(Math.random() * (max - min)) + min;\\n        };\\n        const bcrypt = $.require(\\\"https://unpkg.com/bcryptjs@2.4.3/dist/bcrypt.min.js\\\");\\n\\n        bcrypt.setRandomFallback(function(size) {\\n            let array = new Uint32Array(size);\\n            getRandomValues(array);\\n            return array;\\n        });\\n        let randomString = getMyVar(\\\":string\\\", \\\"0\\\");\\n        if (randomString == \\\"0\\\") {\\n            showLoading(\\\"获取token中，请稍等...\\\");\\n            randomString = apiview._generateRandomString(50);\\n            putMyVar(\\\":string\\\", randomString);\\n        };\\n\\n        function getV2Token(deviceCode) {\\n            let tokenPart = \\\"token://com.coolapk.market/dcf01e569c1e3db93a3d0fcf191a622c?\\\";\\n\\n            function formatBase64(str) {\\n                return str.replace(/[\\\\r\\\\n=]/g, \\\"\\\");\\n            };\\n            let deviceCodeMd5 = md5(deviceCode);\\n            let timestamp = Math.floor(Date.now() / 1000);\\n            let timestampMd5 = md5(timestamp.toString());\\n            let timestampBase64 = formatBase64(base64Encode(timestamp.toString()));\\n            let token = `${tokenPart}${timestampMd5}$${deviceCodeMd5}&com.coolapk.market`;\\n            let tokenBase64 = formatBase64(base64Encode(token));\\n            let tokenBase64Md5 = md5(tokenBase64);\\n            let tokenMd5 = md5(token);\\n            let arg = `\\\\$2y\\\\$10$${timestampBase64}/${tokenMd5}`;\\n            let salt = arg.slice(0, 31) + \\\"u\\\";\\n            let cryptStr = bcrypt.hashSync(tokenBase64Md5, salt);\\n            let cryptBase64 = base64Encode(cryptStr);\\n            return `v2${cryptBase64}`;\\n        };\\n        let tokenString = getMyVar(\\\":token\\\", \\\"0\\\");\\n        if (tokenString == \\\"0\\\") {\\n            tokenString = getV2Token(randomString);\\n            toast(\\\"获取成功\\\");\\n            hideLoading();\\n            putMyVar(\\\":token\\\", tokenString);\\n        };\\n    },\\n    _demol_Ajax: (_demol, _object, _next, _url) => {\\n        let _demolMap = request(apiview._fileUtil(_demol + ($.type(_object) == \\\"object\\\" ? (\\\"?\\\" + apiview._objectToQueryString(_object)) : \\\"\\\")), Object.assign({\\n            headers: {\\n                \\\"X-App-Version\\\": \\\"13.3.6\\\",\\n                \\\"X-App-Code\\\": \\\"2310232\\\",\\n                \\\"X-Api-Version\\\": \\\"13\\\",\\n                \\\"X-App-Id\\\": \\\"com.coolapk.market\\\",\\n                \\\"X-App-Token\\\": getMyVar(\\\":token\\\", \\\"0\\\"),\\n                \\\"X-App-Device\\\": getMyVar(\\\":string\\\", \\\"0\\\"),\\n                \\\"X-Requested-With\\\": \\\"XMLHttpRequest\\\",\\n                \\\"X-App-Channel\\\": \\\"coolapk\\\"\\n            },\\n            body: $.type(_next) == \\\"object\\\" ? apiview._objectToQueryString(_next) : \\\"\\\",\\n            method: _next ? \\\"post\\\" : \\\"get\\\"\\n        }, _url ? {\\n            onlyHeaders: true\\n        } : {}));\\n        eval(\\\"_demolMap =\\\" + _demolMap);\\n        if (_url) return _demolMap.url;\\n        if (!_demolMap.data) {\\n            if (_demolMap.message) {\\n                toast(_demolMap.message);\\n            };\\n            return {};\\n        };\\n        return _demolMap.data;\\n    },\\n    _getRegExp: (_demolMap, _next) => {\\n        let _type_ = _demolMap.entityType;\\n        let _demol_ = _demolMap.extra_fromApi;\\n        let _text_ = _demolMap.message;\\n        let _id_ = _demolMap.id;\\n        let _demolReply = _demolMap.replyRows;\\n        if (!_next && (_type_ == \\\"feed\\\" || _type_ == \\\"nodeRating\\\") && _text_.search(\\\"查看更多\\\") == -1) {\\n            _text_ += apiview.addressTag(\\\"\\\", \\\"查看更多\\\");\\n        } else if (!_next && _type_ == \\\"feed_reply\\\" && _demolReply && $.type(_demolReply) == \\\"array\\\" && _demolReply.length > 0) {\\n            _text_ += apiview.addressTag(\\\"\\\", \\\"查看更多\\\");\\n        };\\n        return _text_ ? (_text_\\n            .replace(new RegExp(\\\"\\\\n\\\", \\\"g\\\"), \\\"<br>\\\")\\n            .replace(/src=\\\"(.*?)\\\"/g, (match, group1) => {\\n                return match.replace(group1, `${group1}#originalSize#`);\\n            })\\n            .replace(/\\\"t\\\\/(.*?)\\\"/g, (match, group1) => {\\n                return $(apiview.empty + \\\"#noHistory##noRecordHistory##gameTheme#fypage\\\").b64().rule((group1) => {\\n                    const apiview = $.require(\\\"Config.view\\\");\\n                    apiview._layoutTabRuleParse(group1);\\n                    setResult(apiview.layout);\\n                }, group1);\\n            })\\n            .replace(/(<a class=\\\"feed-link-uname[\\\\S\\\\s]*?<\\\\/a>)/g, (match) => {\\n                let _demolTag = pdfh(match, \\\"a&&Text\\\");\\n                let _demolUrl = pdfh(match, \\\"a&&href\\\");\\n                let _demol = _demolTag.split(\\\"@\\\")[1];\\n                return match.replace(`\\\"${_demolUrl}\\\"`, () => $(\\\"#noLoading#\\\").b64().lazyRule((_demol) => {\\n                    const apiview = $.require(\\\"Config.view\\\");\\n                    let _demolMap = apiview._demol_Ajax(\\\"/v6/user/space\\\", {\\n                        uid: _demol\\n                    });\\n                    if (Object.keys(_demolMap).length > 0) {\\n                        return $(apiview.empty + \\\"#noHistory##noRecordHistory##gameTheme#fypage\\\").rule((_demolMap) => {\\n                            const apiview = $.require(\\\"Config.view\\\");\\n                            if (MY_PAGE == 1) {\\n                                apiview._generateTop();\\n                            };\\n                            apiview._layoutUserRuleParse(_demolMap);\\n                            setResult(apiview.layout);\\n                        }, _demolMap)\\n                    } else {\\n                        return apiview.empty;\\n                    };\\n                }, _demol));\\n            })\\n            .replace(/(<a class=\\\"feed-link-tag\\\"[\\\\S\\\\s]*?<\\\\/a>)/g, (match) => {\\n                let _demolTag = pdfh(match, \\\"a&&Text\\\");\\n                let _demolUrl = pdfh(match, \\\"a&&href\\\");\\n                let _demol_ = _demolTag.split(\\\"#\\\")[1];\\n                return match.replace(`\\\"${_demolUrl}\\\"`, () => $(apiview.empty + \\\"#noHistory##noRecordHistory##gameTheme#fypage\\\").b64().rule((_demol_) => {\\n                    const apiview = $.require(\\\"Config.view\\\");\\n                    apiview._layoutTabRuleParse(_demol_);\\n                    setResult(apiview.layout);\\n                }, _demol_));\\n            })\\n            .replace(/\\\" \\\"/g, apiview.empty)\\n            .replace(/\\\"\\\"/g, () => {\\n                return $(apiview.empty + \\\"#noHistory##noRecordHistory##gameTheme#fypage\\\").b64().rule((_id_, _demol_, _type_) => {\\n                    const apiview = $.require(\\\"Config.view\\\");\\n                    let _demolpage = MY_PAGE;\\n                    if (_type_ == \\\"feed_reply\\\") {\\n                        if (_demolpage == 1) {\\n                            apiview._generateTop();\\n                        };\\n                        let _demolMap = apiview._demol_Ajax(\\\"/v6/feed/replyList\\\", {\\n                            id: _id_,\\n                            listType: \\\"\\\",\\n                            page: _demolpage,\\n                            discussMode: 0,\\n                            feedType: \\\"feed_reply\\\",\\n                            blockStatus: 0,\\n                            fromFeedAuthor: 0\\n                        });\\n                        apiview._layoutDetermineParse(_demolMap, _id_);\\n                    } else if (_type_ == \\\"feed\\\" || _type_ == \\\"nodeRating\\\") {\\n                        apiview._layoutRuleParse(_id_, _demol_);\\n                    };\\n                    setResult(apiview.layout);\\n                }, _id_, _demol_, _type_);\\n            })) : _text_;\\n    },\\n    _baseParse: () => {\\n        apiview._generateTokenString();\\n        let tooldown = apiview._Get_scription;\\n        if (!fileExist(tooldown)) saveFile(tooldown, JSON.stringify({}), 0);\\n        eval(\\\"ajax_map =\\\" + readFile(tooldown));\\n        if (ajax_map[MY_RULE.title] == null) {\\n            ajax_map[MY_RULE.title] = {};\\n            saveFile(tooldown, JSON.stringify(ajax_map), 0);\\n        };\\n        [\\\"user\\\", \\\"topic\\\", \\\"card\\\", \\\"album\\\", \\\"product\\\", \\\"apk\\\", \\\"dyh\\\"][\\\"forEach\\\"](it => {\\n            if (ajax_map[MY_RULE.title][it] == null) {\\n                ajax_map[MY_RULE.title][it] = [];\\n                saveFile(tooldown, JSON.stringify(ajax_map), 0);\\n            };\\n        });\\n        let _demolpage = MY_PAGE;\\n        let tindex = getMyVar(\\\":baseTag\\\", \\\"0\\\");\\n        let xindex = getMyVar(tindex + \\\":baseTax\\\", \\\"0\\\");\\n        let _objectArray = storage0.getMyVar(\\\":baseTab\\\", []);\\n        if (_objectArray.length == 0) {\\n            demolTime = parseInt(Date.now() / 1000).toString();\\n            _objectArray = apiview._demol_Ajax(\\\"/v6/main/init\\\", {\\n                exp: 0,\\n                t: demolTime\\n            });\\n            _objectArray = _objectArray.filter(_ => _.entityTemplate == \\\"configCard\\\");\\n            _objectArray = _objectArray.concat([{\\n                title: \\\"订阅\\\",\\n                entities: []\\n            }, {\\n                title: \\\"搜索\\\",\\n                entities: []\\n            }]);\\n            storage0.putMyVar(\\\":baseTab\\\", _objectArray);\\n        };\\n        let _demolMap = storage0.getMyVar(tindex + \\\":baseTab\\\", []);\\n        if (_demolMap.length == 0) {\\n            _demolMap = _objectArray[tindex][\\\"entities\\\"];\\n            _demolMap = _demolMap.filter(_ => _.title != \\\"关注\\\" && _.title != \\\"二手\\\");\\n            storage0.putMyVar(tindex + \\\":baseTab\\\", _demolMap);\\n        };\\n        if (_demolpage == 1) {\\n            apiview.layout = apiview.layout.concat(_objectArray.map((item, i) => ({\\n                title: i == tindex ? apiview.rich(apiview.strong(apiview.color(item.title))) : item.title,\\n                url: $(\\\"#noLoading#\\\").lazyRule((i, empty) => {\\n                    clearMyVar(\\\":linkNext\\\");\\n                    clearMyVar(\\\":linkTag\\\");\\n                    putMyVar(\\\":baseTag\\\", i);\\n                    refreshPage();\\n                    return empty;\\n                }, i, apiview.empty),\\n                col_type: \\\"scroll_button\\\",\\n                extra: {\\n                    backgroundColor: i == tindex ? \\\"#20FA7298\\\" : \\\"\\\"\\n                }\\n            })));\\n            apiview.layout.push({\\n                title: \\\"设置\\\",\\n                url: $(apiview.empty + \\\"#noHistory##noRecordHistory#\\\").rule(() => {\\n                    const apiview = $.require(\\\"Config.view\\\");\\n                    apiview._layoutMenuParse();\\n                    setResult(apiview.layout);\\n                }),\\n                col_type: \\\"scroll_button\\\",\\n                extra: {\\n                    pageTitle: \\\"设置｜页面\\\"\\n                }\\n            });\\n            apiview.layout.push({\\n                col_type: \\\"blank_block\\\"\\n            });\\n            apiview.layout = apiview.layout.concat(_demolMap.map((item, i) => ({\\n                title: i == xindex ? apiview.rich(apiview.strong(apiview.color(item.title))) : item.title,\\n                url: $(\\\"#noLoading#\\\").lazyRule((i, empty, tindex) => {\\n                    clearMyVar(\\\":linkNext\\\");\\n                    clearMyVar(\\\":linkTag\\\");\\n                    putMyVar(tindex + \\\":baseTax\\\", i);\\n                    refreshPage();\\n                    return empty;\\n                }, i, apiview.empty, tindex),\\n                col_type: \\\"scroll_button\\\",\\n                extra: {\\n                    backgroundColor: i == xindex ? \\\"#20FA7298\\\" : \\\"\\\",\\n                }\\n            })));\\n            apiview.layout.push({\\n                col_type: \\\"blank_block\\\"\\n            });\\n        };\\n        let _demolLen = _objectArray.length;\\n        switch (_objectArray[tindex]) {\\n            case _objectArray[_demolLen - 1]:\\n                apiview._searchParse();\\n                break;\\n            case _objectArray[_demolLen - 2]:\\n                apiview._layoutSubscrParse();\\n                break;\\n            default:\\n                apiview._firstpage_Parse(_demolMap[xindex]);\\n                break;\\n        };\\n        setResult(apiview.layout);\\n    },\\n    _searchParse: () => {\\n        let _demolpage = MY_PAGE;\\n        let keyword = getMyVar(\\\":keyword\\\", \\\"\\\");\\n        let type = getMyVar(\\\"searchType\\\", \\\"动态\\\");\\n        if (_demolpage == 1) {\\n            apiview.layout.push({\\n                title: apiview.strong(apiview.big(\\\"搜索类型\\\")) + `<u>${type}</u>`,\\n                url: $(\\\"#noLoading#\\\").lazyRule((type) => {\\n                    return $([\\\"动态\\\", \\\"应用\\\", \\\"游戏\\\", \\\"用户\\\", \\\"话题\\\", \\\"数码\\\", \\\"二手\\\", \\\"问答\\\", \\\"应用集\\\", \\\"看看号\\\"], 3, \\\"搜索类型:\\\" + type).select(() => {\\n                        putMyVar(\\\"searchType\\\", input);\\n                        refreshPage();\\n                        return \\\"toast://已切换为 \\\" + input;\\n                    });\\n                }, type),\\n                img: $.require(\\\"icon.tool\\\").tabsearch,\\n                col_type: \\\"avatar\\\"\\n            }, {\\n                title: \\\"搜索\\\",\\n                desc: \\\"搜你想要的....\\\",\\n                url: $.toString(() => {\\n                    const apiview = $.require(\\\"Config.view\\\");\\n                    let keywords = input.trim();\\n                    putMyVar(\\\":keyword\\\", keywords);\\n                    if (keywords) apiview._Get_keyword(input);\\n                    refreshPage();\\n                    return apiview.empty;\\n                }),\\n                col_type: \\\"input\\\",\\n                extra: {\\n                    defaultValue: getMyVar(\\\":keyword\\\")\\n                }\\n            });\\n        };\\n        if (keyword == \\\"\\\") {\\n            let _objectArray = storage0.getMyVar(\\\":searchTag\\\", []);\\n            if (_objectArray.length == 0) {\\n                _objectArray = apiview._demol_Ajax(\\\"/v6/search\\\", {\\n                    type: \\\"hotSearch\\\",\\n                    refresh: 0,\\n                    returnType: \\\"all\\\"\\n                });\\n                _objectArray = _objectArray.find(_ => _.entityTemplate == \\\"hotSearch\\\");\\n                _objectArray = _objectArray.entities.map(it => it.title);\\n                storage0.putMyVar(\\\":searchTag\\\", _objectArray);\\n            };\\n            if (_demolpage == 1) {\\n                apiview.layout.push({\\n                    title: apiview.big(\\\"📊 热门搜索\\\"),\\n                    img: $.require(\\\"icon.tool\\\").hot,\\n                    url: apiview.empty,\\n                    col_type: \\\"text_icon\\\"\\n                });\\n                apiview.layout = apiview.layout.concat(_objectArray.slice(0, 10).map((it) => ({\\n                    title: apiview.rich(apiview.small(apiview.gray(it))),\\n                    url: $(\\\"#noLoading#\\\").lazyRule((it) => {\\n                        const apiview = $.require(\\\"Config.view\\\");\\n                        putMyVar(\\\":keyword\\\", it);\\n                        apiview._Get_keyword(it);\\n                        refreshPage();\\n                        return apiview.empty;\\n                    }, it),\\n                    col_type: \\\"flex_button\\\"\\n                })));\\n                let mem = storage0.getItem(MY_RULE.title, []);\\n                if (mem.length > 0) {\\n                    apiview.layout.push({\\n                        title: apiview.big(\\\"📝 搜索历史\\\"),\\n                        img: $.require(\\\"icon.tool\\\").delete,\\n                        url: $(\\\"是否清除搜索记录？\\\").confirm((id) => {\\n                            clearItem(MY_RULE.title);\\n                            refreshPage();\\n                            toast(\\\"清除成功~\\\");\\n                        }),\\n                        col_type: \\\"text_icon\\\"\\n                    });\\n                };\\n                for (let i = mem.length - 1; i >= 0; i--) {\\n                    let it = mem[i];\\n                    apiview.layout.push({\\n                        title: apiview.rich(apiview.small(apiview.gray(it))),\\n                        url: $(\\\"#noLoading#\\\").lazyRule((it) => {\\n                            const apiview = $.require(\\\"Config.view\\\");\\n                            putMyVar(\\\":keyword\\\", it);\\n                            apiview._Get_keyword(it);\\n                            refreshPage();\\n                            return apiview.empty;\\n                        }, it),\\n                        col_type: \\\"flex_button\\\",\\n                        extra: {\\n                            longClick: apiview._extraSearch(it)\\n                        }\\n                    });\\n                };\\n            };\\n        } else {\\n            switch (type) {\\n                case \\\"动态\\\":\\n                    _demolMap = apiview._demol_Ajax(\\\"/v6/search\\\", {\\n                        type: \\\"feed\\\",\\n                        feedType: \\\"all\\\",\\n                        sort: \\\"default\\\",\\n                        searchValue: keyword,\\n                        page: _demolpage,\\n                        showAnonymous: \\\"-1\\\"\\n                    });\\n                    break;\\n                case \\\"数码\\\":\\n                    _demolMap = apiview._demol_Ajax(\\\"/v6/search\\\", {\\n                        type: \\\"product\\\",\\n                        searchValue: keyword,\\n                        page: _demolpage,\\n                        showAnonymous: \\\"-1\\\",\\n                        category: \\\"\\\"\\n                    });\\n                    break;\\n                case \\\"应用\\\":\\n                    _demolMap = apiview._demol_Ajax(\\\"/v6/search\\\", {\\n                        type: \\\"apk\\\",\\n                        cat: \\\"\\\",\\n                        sort: \\\"default\\\",\\n                        searchValue: keyword,\\n                        page: _demolpage\\n                    });\\n                    break;\\n                case \\\"游戏\\\":\\n                    _demolMap = apiview._demol_Ajax(\\\"/v6/search\\\", {\\n                        type: \\\"game\\\",\\n                        cat: \\\"\\\",\\n                        sort: \\\"default\\\",\\n                        searchValue: keyword,\\n                        page: _demolpage\\n                    });\\n                    break;\\n                case \\\"用户\\\":\\n                    _demolMap = apiview._demol_Ajax(\\\"/v6/search\\\", {\\n                        type: \\\"user\\\",\\n                        searchValue: keyword,\\n                        page: _demolpage,\\n                        showAnonymous: \\\"-1\\\",\\n                        category: \\\"\\\"\\n                    });\\n                    break;\\n                case \\\"话题\\\":\\n                    _demolMap = apiview._demol_Ajax(\\\"/v6/search\\\", {\\n                        type: \\\"feedTopic\\\",\\n                        searchValue: keyword,\\n                        page: _demolpage,\\n                        showAnonymous: \\\"-1\\\",\\n                        category: \\\"\\\"\\n                    });\\n                    break;\\n                case \\\"问答\\\":\\n                    _demolMap = apiview._demol_Ajax(\\\"/v6/search\\\", {\\n                        type: \\\"ask\\\",\\n                        feedType: \\\"all\\\",\\n                        searchValue: keyword,\\n                        page: _demolpage\\n                    });\\n                    break;\\n                case \\\"应用集\\\":\\n                    _demolMap = apiview._demol_Ajax(\\\"/v6/search\\\", {\\n                        type: \\\"album\\\",\\n                        searchValue: keyword,\\n                        page: _demolpage,\\n                        showAnonymous: \\\"-1\\\",\\n                        category: \\\"\\\"\\n                    });\\n                    break;\\n                case \\\"看看号\\\":\\n                    _demolMap = apiview._demol_Ajax(\\\"/v6/search\\\", {\\n                        type: \\\"dyh\\\",\\n                        searchValue: keyword,\\n                        page: _demolpage,\\n                        showAnonymous: \\\"-1\\\",\\n                        category: \\\"\\\"\\n                    });\\n                    break;\\n                case \\\"二手\\\":\\n                    _demolMap = apiview._demol_Ajax(\\\"/v6/search\\\", {\\n                        type: \\\"ershou\\\",\\n                        sort: \\\"default\\\",\\n                        searchValue: keyword,\\n                        status: 1,\\n                        deal_type: 0,\\n                        city_code: \\\"\\\",\\n                        is_link: \\\"\\\",\\n                        exchange_type: \\\"\\\",\\n                        ershou_type: \\\"\\\",\\n                        product_id: \\\"\\\",\\n                        tags: \\\"\\\",\\n                        page: _demolpage\\n                    });\\n                    break;\\n            };\\n            if (_demolMap == null || $.type(_demolMap) == \\\"object\\\") {\\n                _demolMap = [];\\n            };\\n            apiview._layoutDetermineParse(_demolMap);\\n        };\\n    },\\n    _searchGoodsParse: () => {\\n        let _demolpage = MY_PAGE;\\n        let keyword = getMyVar(\\\":keywordGood\\\", \\\"\\\");\\n        let type = getMyVar(\\\"searchGoodType\\\", \\\"京东\\\");\\n        if (_demolpage == 1) {\\n            apiview._generateTop();\\n            apiview.layout.push({\\n                title: apiview.strong(apiview.big(\\\"搜索类型\\\")) + `<u>${type}</u>`,\\n                url: $(\\\"#noLoading#\\\").lazyRule((type) => {\\n                    return $([\\\"京东\\\", \\\"淘宝\\\", \\\"拼多多\\\"], 3, \\\"搜索类型:\\\" + type).select(() => {\\n                        putMyVar(\\\"searchGoodType\\\", input);\\n                        refreshPage();\\n                        return \\\"toast://已切换为 \\\" + input;\\n                    });\\n                }, type),\\n                img: $.require(\\\"icon.tool\\\").tabsearch,\\n                col_type: \\\"avatar\\\"\\n            }, {\\n                title: \\\"搜索\\\",\\n                desc: \\\"搜你想要的....\\\",\\n                url: $.toString(() => {\\n                    const apiview = $.require(\\\"Config.view\\\");\\n                    let keywords = input.trim();\\n                    putMyVar(\\\":keywordGood\\\", keywords);\\n                    if (keywords) apiview._Get_keyword(input);\\n                    refreshPage();\\n                    return apiview.empty;\\n                }),\\n                col_type: \\\"input\\\",\\n                extra: {\\n                    defaultValue: getMyVar(\\\":keywordGood\\\")\\n                }\\n            });\\n        };\\n        if (keyword == \\\"\\\") {\\n            let _objectArray = storage0.getMyVar(\\\":searchGoodTag\\\", []);\\n            if (_objectArray.length == 0) {\\n                _objectArray = apiview._demol_Ajax(\\\"/v6/goods/searchHotWords\\\");\\n                if ($.type(_objectArray) != \\\"array\\\") {\\n                    _objectArray = _objectArray.split(\\\",\\\");\\n                };\\n                storage0.putMyVar(\\\":searchGoodTag\\\", _objectArray);\\n            };\\n            if (_demolpage == 1) {\\n                if (_objectArray.length > 0) {\\n                    apiview.layout.push({\\n                        title: apiview.big(\\\"📊 热门搜索\\\"),\\n                        img: $.require(\\\"icon.tool\\\").hot,\\n                        url: apiview.empty,\\n                        col_type: \\\"text_icon\\\"\\n                    });\\n                    apiview.layout = apiview.layout.concat(_objectArray.slice(0, 10).map((it) => ({\\n                        title: apiview.rich(apiview.small(apiview.gray(it))),\\n                        url: $(\\\"#noLoading#\\\").lazyRule((it) => {\\n                            const apiview = $.require(\\\"Config.view\\\");\\n                            putMyVar(\\\":keywordGood\\\", it);\\n                            apiview._Get_keyword(it);\\n                            refreshPage();\\n                            return apiview.empty;\\n                        }, it),\\n                        col_type: \\\"flex_button\\\"\\n                    })));\\n                };\\n                let mem = storage0.getItem(MY_RULE.title, []);\\n                if (mem.length > 0) {\\n                    apiview.layout.push({\\n                        title: apiview.big(\\\"📝 搜索历史\\\"),\\n                        img: $.require(\\\"icon.tool\\\").delete,\\n                        url: $(\\\"是否清除搜索记录？\\\").confirm((id) => {\\n                            clearItem(MY_RULE.title);\\n                            refreshPage();\\n                            toast(\\\"清除成功~\\\");\\n                        }),\\n                        col_type: \\\"text_icon\\\"\\n                    });\\n                };\\n                for (let i = mem.length - 1; i >= 0; i--) {\\n                    let it = mem[i];\\n                    apiview.layout.push({\\n                        title: apiview.rich(apiview.small(apiview.gray(it))),\\n                        url: $(\\\"#noLoading#\\\").lazyRule((it) => {\\n                            const apiview = $.require(\\\"Config.view\\\");\\n                            putMyVar(\\\":keywordGood\\\", it);\\n                            apiview._Get_keyword(it);\\n                            refreshPage();\\n                            return apiview.empty;\\n                        }, it),\\n                        col_type: \\\"flex_button\\\",\\n                        extra: {\\n                            longClick: apiview._extraSearch(it)\\n                        }\\n                    });\\n                };\\n            };\\n        } else {\\n            switch (type) {\\n                case \\\"京东\\\":\\n                    _demolMap = apiview._demol_Ajax(\\\"/v6/goods/search\\\", {\\n                        keyword: keyword,\\n                        sortName: \\\"inOrderCount30Days\\\",\\n                        isCoupon: 1,\\n                        page: _demolpage\\n                    });\\n                    break;\\n                case \\\"淘宝\\\":\\n                    _demolMap = apiview._demol_Ajax(\\\"/v6/goods/taobaoSearch\\\", {\\n                        q: keyword,\\n                        sort: \\\"total_sales\\\",\\n                        page: _demolpage\\n                    });\\n                    break;\\n                case \\\"拼多多\\\":\\n                    _demolMap = apiview._demol_Ajax(\\\"/v6/page/dataList\\\", {\\n                        url: \\\"/goods/searchPddGoodsList\\\",\\n                        keyword: keyword,\\n                        sortType: 6,\\n                        page: _demolpage\\n                    });\\n                    break;\\n            };\\n            if (_demolMap == null || $.type(_demolMap) == \\\"object\\\") {\\n                _demolMap = [];\\n            };\\n            apiview._layoutDetermineParse(_demolMap);\\n        };\\n    },\\n    _firstpage_Parse: (_demolMap) => {\\n        let _demolpage = MY_PAGE;\\n        let demolTime = parseInt(Date.now() / 1000).toString();\\n        let _demolUrl = _demolMap.url;\\n        let _demolName = _demolMap.title;\\n        if (_demolUrl.startsWith(\\\"/main/\\\")) {\\n            apiview._layoutDetermineParse(apiview._demol_Ajax(\\\"/v6/main/indexV8\\\", {\\n                page: _demolpage,\\n                firstLaunch: 0,\\n                installTime: demolTime,\\n                ids: \\\"\\\"\\n            }), \\\"false\\\");\\n        };\\n        if (_demolUrl.startsWith(\\\"/page\\\")) {\\n            apiview._layoutDetermineParse(apiview._demol_Ajax(\\\"/v6/page/dataList\\\", {\\n                url: _demolUrl,\\n                title: _demolName,\\n                subTitle: \\\"\\\",\\n                page: _demolpage\\n            }));\\n        };\\n        if (_demolUrl == \\\"/user/dyhSubscribe\\\") {\\n            apiview._layoutDetermineParse(apiview._demol_Ajax(\\\"/v6/page/dataList\\\", {\\n                url: \\\"/dyh/recommendList?&title=站内订阅\\\",\\n                title: \\\"站内订阅\\\",\\n                subTitle: \\\"\\\",\\n                page: _demolpage\\n            }));\\n        };\\n        if (_demolUrl == \\\"/product/categoryList\\\") {\\n            apiview._layoutLinkTabParse(apiview._demol_Ajax(`/v6${_demolUrl}`));\\n        };\\n    },\\n    _layoutDetermineParse: (_demolMap, _demol) => {\\n        let _demol = _demol ? _demol : \\\"\\\";\\n        let _linkNext = () => getMyVar(\\\":linkNext\\\" + _demol, \\\"\\\");\\n        let _demolNext = _demolMap.some(it => it.entityTemplate === \\\"sortSelectCard\\\");\\n        if (_demolNext) {\\n            _demolMap = _demolMap.filter(it => it.entityTemplate === \\\"sortSelectCard\\\");\\n        };\\n        putMyVar(\\\":next\\\" + _demol, _demolNext ? \\\"true\\\" : \\\"\\\");\\n        let _demolMap_ = (_linkNext() == \\\"true\\\" && !_demol) ? storage0.getMyVar(\\\":demolMap\\\" + _demol, []) : _demolMap;\\n        let _demolMap = _demolMap.length > 0 ? _demolMap : _demolMap_;\\n        if (_linkNext() == \\\"\\\" && _demolMap.length > 0) {\\n            storage0.putMyVar(\\\":demolMap\\\" + _demol, _demolMap);\\n        };\\n        _demolMap.forEach((it, i) => {\\n            _demolType = it.entityTemplate;\\n            _type_ = it.entityType;\\n            _demolMaps = it.entities;\\n            if (_demolType == \\\"imageCarouselCard_1\\\") {\\n                putVar(\\\":carouselMap\\\", JSON.stringify(_demolMaps));\\n                putVar(\\\":ruleMap\\\", JSON.stringify(MY_RULE));\\n                apiview.layout.push({\\n                    url: getPath(\\\"hiker://files/rules/Carousel.html\\\"),\\n                    desc: \\\"135&&list\\\",\\n                    col_type: \\\"x5_webview_single\\\",\\n                    extra: {\\n                        ua: \\\"Dalvik/2.1.0 (Linux; U; Android 10; V2304A Build/UP1A.231005.007) (#Build; vivo; V2304A; UP1A.231005.007 release-keys; 10) +CoolMarket/13.3.6-2310232-universal\\\"\\n                    }\\n                });\\n            } else if (_demolType == \\\"imageSquareScrollCard\\\") {\\n                putVar(\\\":carouselMap\\\", JSON.stringify(_demolMaps));\\n                putVar(\\\":ruleMap\\\", JSON.stringify(MY_RULE));\\n                apiview.layout.push({\\n                    url: getPath(\\\"hiker://files/rules/ScrollCard.html\\\"),\\n                    desc: \\\"80&&list\\\",\\n                    col_type: \\\"x5_webview_single\\\",\\n                    extra: {\\n                        ua: \\\"Dalvik/2.1.0 (Linux; U; Android 10; V2304A Build/UP1A.231005.007) (#Build; vivo; V2304A; UP1A.231005.007 release-keys; 10) +CoolMarket/13.3.6-2310232-universal\\\"\\n                    }\\n                });\\n            } else if (_demolType == \\\"iconLinkGridCard\\\") {\\n                apiview.layout = apiview.layout.concat(_demolMaps.map(_ => ({\\n                    title: _.title,\\n                    img: _.pic,\\n                    url: (!_.url.startsWith(\\\"http\\\") && !_.url.startsWith(\\\"https\\\")) ? $(apiview.empty + \\\"#noHistory##noRecordHistory##gameTheme#fypage\\\").rule((_) => {\\n                        const apiview = $.require(\\\"Config.view\\\");\\n                        apiview._layoutLinkRuleParse(_);\\n                        setResult(apiview.layout);\\n                    }, _) : _.url,\\n                    col_type: _demolMaps.length > 4 ? \\\"icon_5\\\" : \\\"icon_small_4\\\"\\n                })));\\n            } else if (_demolType == \\\"iconTabLinkGridCard\\\" || _demolType == \\\"verticalColumnsFullPageCard\\\" || _demolType == \\\"sortSelectCard\\\") {\\n                putMyVar(\\\":linkNext\\\" + _demol, \\\"true\\\");\\n                apiview._layoutLinkTabParse(_demolMaps, _demol);\\n            } else if (_demolType == \\\"iconListCard\\\" || (_demolType == \\\"listCard\\\" && _demol != \\\"false\\\")) {\\n                apiview._layoutDetermineParse(_demolMaps);\\n            } else if (_demolType == \\\"imageTextGridCard\\\") {\\n                apiview._layoutGridCardParse(_demolMaps);\\n            } else if (_demolType == \\\"headCard\\\" && it.title && it.description) {\\n                apiview._layoutHeadCardParse(it);\\n            } else if (_demolType == \\\"textCard\\\" && it.title && it.description) {\\n                apiview._layoutTextCardParse(it);\\n            } else if (_demolType == \\\"noMoreDataCard\\\") {\\n                apiview.layout.push({\\n                    title: apiview.rich(apiview.small(apiview.gray(it.title))),\\n                    url: apiview.empty,\\n                    col_type: \\\"text_center_1\\\"\\n                });\\n            } else if (_demolType == null && _type_ == \\\"user\\\") {\\n                apiview._layoutUserParse(it);\\n            } else if (_type_ == \\\"collection\\\") {\\n                apiview._layoutCollectionParse(it);\\n            } else if (_type_ == \\\"album\\\") {\\n                apiview._layoutAlbumParse(it);\\n            } else if (_type_ == \\\"liveTopic\\\") {\\n                apiview._layoutLiveParse(it);\\n            } else if (_type_ == \\\"topic\\\" || _type_ == \\\"product\\\" || _type_ == \\\"apk\\\" || _type_ == \\\"dyh\\\") {\\n                apiview._layoutTagParse(it);\\n            } else if (_type_ == \\\"pear_goods\\\") {\\n                apiview._layoutPearGoodParse(it);\\n            } else if (_type_ == \\\"feed\\\" || _type_ == \\\"feed_reply\\\" || _type_ == \\\"nodeRating\\\") {\\n                if (!it.extra_fromApi) {\\n                    it.extra_fromApi = _demol;\\n                };\\n                if (!it.id) it.id = it.feed_id;\\n                apiview._layoutFeedParse(it);\\n            };\\n        });\\n        if (_demolMap.length == 0) {\\n            apiview._End_Parse();\\n        };\\n    },\\n    _layoutTextCardParse: (_demolMap) => {\\n        _demolMap.message = `${apiview.big(apiview.strong(_demolMap.title))}${_demolMap.subTitle ? `<br>${_demolMap.subTitle}` : \\\"\\\"}<br><br>${_demolMap.description}`;\\n        apiview.layout.push({\\n            title: apiview._getRegExp(_demolMap, true),\\n            col_type: \\\"rich_text\\\"\\n        });\\n    },\\n    _layoutHeadCardParse: (_demolMap) => {\\n        apiview._layoutTextCardParse(_demolMap);\\n        apiview._generateEnd();\\n    },\\n    _layoutLiveParse: (_demolMap) => {\\n        apiview.layout.push({\\n            title: _demolMap.title,\\n            desc: (_demolMap.live_status == -1 ? \\\"已结束 - \\\" : \\\"\\\") + _demolMap.description,\\n            img: _demolMap.pic_url,\\n            url: _demolMap.video_live_url,\\n            col_type: \\\"movie_2\\\"\\n        });\\n    },\\n    _layoutAlbumParse: (_demolMap) => {\\n        apiview.layout.push({\\n            title: _demolMap.title,\\n            desc: `${_demolMap.description}\\\\n${_demolMap.apknum}个应用`,\\n            img: _demolMap.logo,\\n            url: $(apiview.empty + \\\"#noHistory##noRecordHistory##gameTheme#fypage\\\").rule((_demolUrl) => {\\n                const apiview = $.require(\\\"Config.view\\\");\\n                let _demolpage = MY_PAGE;\\n                if (_demolpage == 1) {\\n                    apiview._generateTop();\\n                };\\n                apiview._layoutAlbumRuleParse(apiview._demol_Ajax(\\\"/v6/album/apkList\\\", {\\n                    id: _demolUrl,\\n                    page: _demolpage\\n                }));\\n                setResult(apiview.layout);\\n            }, _demolMap.id),\\n            col_type: \\\"movie_1_left_pic\\\",\\n            extra: {\\n                longClick: apiview._extra_tool(_demolMap, \\\"album\\\", \\\"id\\\")\\n            }\\n        });\\n    },\\n    _layoutPearGoodParse: (_demolMap) => {\\n        apiview.layout.push({\\n            title: _demolMap.title,\\n            desc: `${_demolMap.goods_buy_text}\\\\n${_demolMap.goods_promo_title}`,\\n            img: _demolMap.goods_pic,\\n            url: $(apiview.empty).lazyRule(({\\n                goods_url,\\n                goods_buy_url\\n            }) => decodeURIComponent($.require(\\\"Config.view\\\")._demol_Ajax(\\\"/v6/goods/getBuyUrl\\\", null, {\\n                goods_url: goods_url,\\n                goods_buy_url: goods_buy_url\\n            })), _demolMap),\\n            col_type: \\\"movie_1_left_pic\\\"\\n        });\\n    },\\n    _layoutCollectionParse: (_demolMap) => {\\n        apiview.layout.push({\\n            title: _demolMap.title,\\n            desc: `${_demolMap.is_open_title}\\\\n${_demolMap.item_num}个内容`,\\n            img: _demolMap.cover_pic,\\n            url: _demolMap.is_open_title == \\\"公开\\\" ? $(apiview.empty + \\\"#noHistory##noRecordHistory##gameTheme#fypage\\\").rule((_demolUrl) => {\\n                const apiview = $.require(\\\"Config.view\\\");\\n                let _demolpage = MY_PAGE;\\n                if (_demolpage == 1) {\\n                    apiview._generateTop();\\n                };\\n                apiview._layoutDetermineParse(apiview._demol_Ajax(\\\"/v6/collection/itemList\\\", {\\n                    id: _demolUrl,\\n                    page: _demolpage\\n                }), _demolUrl);\\n                setResult(apiview.layout);\\n            }, _demolMap.id) : `toast://${_demolMap.is_open_title}`,\\n            col_type: \\\"movie_1_left_pic\\\"\\n        });\\n    },\\n    _layoutGridCardParse: (_demolMap) => {\\n        apiview.layout = apiview.layout.concat(_demolMap.map(_ => ({\\n            title: _.title,\\n            desc: \\\"0\\\",\\n            img: _.pic,\\n            url: $(apiview.empty + \\\"#noHistory##noRecordHistory##gameTheme#fypage\\\").rule((_) => {\\n                const apiview = $.require(\\\"Config.view\\\");\\n                let _demolpage = MY_PAGE;\\n                let _demolName = _.title;\\n                let _demolUrl = _.url;\\n                if (_demolUrl.startsWith(\\\"/page\\\")) {\\n                    _demolUrl = _demolUrl.split(\\\"=\\\")[1];\\n                    if (_demolpage == 1) {\\n                        apiview._generateTop();\\n                        apiview._layoutDetermineParse(apiview._demol_Ajax(\\\"/v6/page/dataList\\\", {\\n                            url: _demolUrl,\\n                            title: _demolName,\\n                            subTitle: \\\"\\\",\\n                            page: _demolpage\\n                        }));\\n                    };\\n                } else {\\n                    _demolUrl = _demolUrl.split(\\\"/feed/\\\")[1];\\n                    apiview._layoutRuleParse(_demolUrl);\\n                };\\n                setResult(apiview.layout);\\n            }, _),\\n            col_type: \\\"card_pic_1\\\"\\n        })));\\n        if (_demolMap.length == 0) {\\n            apiview._End_Parse();\\n        };\\n    },\\n    _layoutUserParse: (_demolMap) => {\\n        _demolMap = _demolMap.userInfo || _demolMap;\\n        let _demolMaps = {};\\n        _demolMaps.username = _demolMap.username;\\n        _demolMaps.userAvatar = _demolMap.userAvatar;\\n        _demolMaps.uid = _demolMap.uid;\\n        _demolMaps.entityType = _demolMap.entityType;\\n        apiview.layout.push({\\n            title: _demolMap.username,\\n            img: _demolMap.userAvatar,\\n            url: $(apiview.empty + \\\"#noHistory##noRecordHistory#fypage\\\").rule((_demolMaps) => {\\n                const apiview = $.require(\\\"Config.view\\\");\\n                apiview._layoutUserRuleParse(_demolMaps);\\n                setResult(apiview.layout);\\n            }, _demolMaps),\\n            col_type: \\\"card_pic_3_center\\\",\\n            extra: {\\n                pageTitle: `用户/${_demolMap.username}`,\\n                longClick: apiview._extra_tool(_demolMaps, \\\"user\\\", \\\"uid\\\", true)\\n            }\\n        });\\n    },\\n    _layoutTagParse: (_demolMap) => {\\n        let _demolMaps = {};\\n        _demolMaps.title = _demolMap.title;\\n        _demolMaps.logo = _demolMap.logo;\\n        _demolMaps.url = _demolMap.url;\\n        _demolMaps.id = _demolMap.id;\\n        _demolMaps.entityType = _demolMap.entityType;\\n        switch (_demolMaps.entityType) {\\n            case \\\"topic\\\":\\n                _tag = \\\"topic\\\";\\n                break;\\n            case \\\"product\\\":\\n                _tag = \\\"product\\\";\\n                break;\\n            case \\\"dyh\\\":\\n                _tag = \\\"dyh\\\";\\n                break;\\n            default:\\n                _tag = \\\"apk\\\";\\n                break;\\n        };\\n        apiview.layout.push({\\n            title: _demolMap.title,\\n            img: _demolMap.logo,\\n            url: $(apiview.empty + \\\"#noHistory##noRecordHistory##gameTheme#fypage\\\").rule((_demolMaps) => {\\n                const apiview = $.require(\\\"Config.view\\\");\\n\\n                if (_demolMaps.url) {\\n                    apiview._layoutLinkRuleParse(_demolMaps);\\n                } else {\\n                    apiview._layoutTabRuleParse(_demolMaps.id);\\n                };\\n                setResult(apiview.layout);\\n            }, _demolMaps),\\n            col_type: \\\"card_pic_3_center\\\",\\n            extra: {\\n                longClick: apiview._extra_tool(_demolMaps, _tag, \\\"title\\\")\\n            }\\n        });\\n    },\\n    _layoutAlbumRuleParse: (_demolMap) => {\\n        apiview.layout = apiview.layout.concat(_demolMap.map(_ => ({\\n            title: _.title,\\n            desc: _.note,\\n            img: _.pic,\\n            url: $(apiview.empty + \\\"#noHistory##noRecordHistory##gameTheme#fypage\\\").rule((_) => {\\n                const apiview = $.require(\\\"Config.view\\\");\\n                let _demolUrl = _.url\\n                if (_demolUrl.startsWith(\\\"http\\\") || _demolUrl.startsWith(\\\"https\\\")) {\\n                    _.url = _demolUrl.split(apiview._fileWebUtil(\\\"\\\"))[1];\\n                } else if (_demolUrl.startsWith(\\\"market:\\\")) {\\n                    _.url = `/apk/${_demolUrl.split(\\\"=\\\")[1]}`;\\n                };\\n                apiview._layoutLinkRuleParse(_);\\n                setResult(apiview.layout);\\n            }, _),\\n            col_type: \\\"movie_1_left_pic\\\"\\n        })));\\n        if (_demolMap.length == 0) {\\n            apiview._End_Parse();\\n        };\\n    },\\n    _layoutFeedParse: (_demolMap) => {\\n        _type_ = _demolMap.entityType;\\n        rusername = _demolMap.rusername;\\n        userMap = _demolMap.userInfo || _demolMap;\\n        infoHtml = _demolMap.infoHtml;\\n        feedTypeName = _demolMap.feedTypeName;\\n        _numberCard = Number(getItem(\\\":number\\\", \\\"3\\\"));\\n        apiview.layout.push({\\n            title: userMap.username + \\\"\\\\t\\\\t\\\" + apiview.small(apiview._formatTimestamp(_demolMap.dateline || _demolMap.regdate)),\\n            desc: apiview.small((infoHtml ? infoHtml : \\\"\\\") + (feedTypeName ? feedTypeName : \\\"\\\") + (rusername ? rusername : \\\"\\\")),\\n            img: userMap.userAvatar,\\n            url: $(apiview.empty + \\\"#noHistory##noRecordHistory#fypage\\\").rule((_demolMap) => {\\n                const apiview = $.require(\\\"Config.view\\\");\\n                apiview._layoutUserRuleParse(_demolMap);\\n                setResult(apiview.layout);\\n            }, userMap),\\n            col_type: \\\"avatar\\\",\\n            extra: {\\n                pageTitle: `用户/${userMap.username}`,\\n                longClick: apiview._extra_tool(_demolMap, \\\"card\\\", \\\"id\\\")\\n            }\\n        });\\n        apiview.layout.push({\\n            col_type: \\\"line\\\"\\n        });\\n        if (_demolMap.star) {\\n            apiview.layout.push({\\n                title: `评分：${apiview.orange(apiview._generateStars(_demolMap.star)) + _demolMap.star * 2}分`,\\n                col_type: \\\"rich_text\\\"\\n            });\\n        };\\n        if (_demolMap.message_title) {\\n            apiview.layout.push({\\n                title: apiview.big(_demolMap.message_title),\\n                col_type: \\\"rich_text\\\"\\n            });\\n        };\\n        if (_demolMap.comment_good) {\\n            _demolMap.message = apiview._generateString(_demolMap.comment_good, 30);\\n        };\\n        if (_demolMap.message) {\\n            apiview.layout.push({\\n                title: apiview._getRegExp(_demolMap),\\n                col_type: \\\"rich_text\\\"\\n            });\\n        };\\n        _demolPicMap = _demolMap.picArr;\\n        if (_demolPicMap && $.type(_demolPicMap) == \\\"array\\\") {\\n            _demolPicMap.forEach((_, i) => {\\n                if (_type_ == \\\"feed_reply\\\" ? true : (i < _numberCard)) apiview.layout.push({\\n                    img: _,\\n                    url: _,\\n                    col_type: \\\"pic_3_square\\\"\\n                });\\n            });\\n        };\\n        apiview.layout.push({\\n            col_type: \\\"blank_block\\\"\\n        });\\n        if (_demolMap.target_info) {\\n            apiview.layout.push({\\n                title: _demolMap.target_info.title,\\n                img: _demolMap.target_info.logo,\\n                url: $(apiview.empty + \\\"#noHistory##noRecordHistory##gameTheme#fypage\\\").rule((_demolMap) => {\\n                    const apiview = $.require(\\\"Config.view\\\");\\n                    apiview._layoutLinkRuleParse(_demolMap, \\\"title\\\", \\\"url\\\");\\n                    setResult(apiview.layout);\\n                }, _demolMap.target_info),\\n                col_type: \\\"avatar\\\"\\n            });\\n        };\\n        if (_demolMap.ttitle) {\\n            apiview.layout.push({\\n                title: _demolMap.ttitle,\\n                img: _demolMap.tpic,\\n                url: $(apiview.empty + \\\"#noHistory##noRecordHistory##gameTheme#fypage\\\").rule((_demolMap) => {\\n                    const apiview = $.require(\\\"Config.view\\\");\\n                    apiview._layoutLinkRuleParse(_demolMap, \\\"ttitle\\\", \\\"turl\\\");\\n                    setResult(apiview.layout);\\n                }, _demolMap),\\n                col_type: \\\"avatar\\\"\\n            });\\n        };\\n        apiview.layout.push({\\n            col_type: \\\"blank_block\\\"\\n        });\\n        if (_demolMap.share_num != null) {\\n            apiview.layout.push({\\n                title: String(_demolMap.likenum),\\n                img: $.require(\\\"icon.tool\\\").good,\\n                url: apiview.empty,\\n                col_type: \\\"icon_small_3\\\"\\n            }, {\\n                title: String(_demolMap.replynum),\\n                img: $.require(\\\"icon.tool\\\").discuss,\\n                url: _demolMap.replynum > 0 ? $(apiview.empty + \\\"#noHistory##noRecordHistory##gameTheme#fypage\\\").rule((_id_) => {\\n                    const apiview = $.require(\\\"Config.view\\\");\\n                    if (MY_PAGE == 1) apiview._generateTop();\\n                    apiview._layoutRemarkParse(_id_);\\n                    setResult(apiview.layout);\\n                }, _demolMap.id) : apiview.empty,\\n                col_type: \\\"icon_small_3\\\"\\n            }, {\\n                title: String(_demolMap.share_num),\\n                img: $.require(\\\"icon.tool\\\").share,\\n                url: apiview.empty,\\n                col_type: \\\"icon_small_3\\\"\\n            });\\n        };\\n        apiview.layout.push({\\n            col_type: \\\"line_blank\\\"\\n        });\\n    },\\n    _layoutRemarkParse: (_id_) => {\\n        let _demolpage = MY_PAGE;\\n        addListener(\\\"onClose\\\", $.toString(() => {\\n            clearMyVar(\\\":replyListType\\\");\\n            clearMyVar(\\\":replyNext\\\");\\n        }));\\n        let _demoltype = getMyVar(\\\":replyListType\\\", \\\"默认\\\");\\n        let fromFeedAuthor = null;\\n        switch (_demoltype) {\\n            case \\\"默认\\\":\\n                _type_ = \\\"lastupdate_desc\\\";\\n                break;\\n            case \\\"最新\\\":\\n                _type_ = \\\"dateline_desc\\\";\\n                break;\\n            case \\\"热门\\\":\\n                _type_ = \\\"popular\\\";\\n                break;\\n            case \\\"楼主\\\":\\n                _type_ = \\\"\\\";\\n                fromFeedAuthor = 1;\\n                break;\\n        };\\n        let _demolReplyMap = apiview._demol_Ajax(buildUrl(\\\"/v6/feed/replyList\\\", {\\n            id: _id_,\\n            listType: _type_,\\n            page: _demolpage,\\n            discussMode: 1,\\n            feedType: \\\"feed\\\",\\n            blockStatus: 0,\\n            fromFeedAuthor: fromFeedAuthor ? fromFeedAuthor : 0\\n        }), true);\\n        let _next = _demolReplyMap && $.type(_demolReplyMap) == \\\"array\\\" && _demolReplyMap.length > 0;\\n        if (_next) putMyVar(\\\":replyNext\\\", \\\"true\\\");\\n        _next = getMyVar(\\\":replyNext\\\", \\\"\\\");\\n        if (_demolpage == 1 && _next == \\\"true\\\") {\\n            apiview.layout.push({\\n                title: apiview.strong(apiview.big(\\\"评论区\\\")),\\n                desc: `<u>${_demoltype}</u>`,\\n                url: $([\\\"默认\\\", \\\"最新\\\", \\\"热门\\\", \\\"楼主\\\"], 2, \\\"排序:\\\" + _demoltype).select(() => {\\n                    putMyVar(\\\":replyListType\\\", input);\\n                    refreshPage(false);\\n                    return \\\"toast://已切换为 \\\" + input;\\n                }),\\n                img: $.require(\\\"icon.tool\\\").replysort,\\n                col_type: \\\"avatar\\\"\\n            });\\n        };\\n        if (_next == \\\"true\\\") {\\n            apiview._layoutDetermineParse(_demolReplyMap, _id_);\\n        };\\n    },\\n    _layoutLinkRuleParse: (_demolMap, title, url) => {\\n        let _demolpage = MY_PAGE;\\n        let _demolUrl = _demolMap[url ? url : \\\"url\\\"];\\n        _demolUrl = decodeURIComponent(_demolUrl);\\n        let _demolName = _demolMap[title ? title : \\\"title\\\"];\\n        if (!_demolUrl.startsWith(\\\"/page\\\") && _demolUrl.includes(\\\"/t/\\\")) {\\n            _demolUrl = _demolUrl.split(\\\"/t/\\\")[1];\\n            if (_demolMap.entityType == \\\"picCategory\\\") {\\n                _demolUrl = _demolUrl.split(\\\"?\\\")[0];\\n                apiview._layoutPictureRuleParse(_demolUrl);\\n            } else {\\n                apiview._layoutTabRuleParse(_demolUrl);\\n            };\\n        } else if (!_demolUrl.startsWith(\\\"/page\\\") && _demolUrl.includes(\\\"/product/\\\")) {\\n            _demolUrls = _demolUrl.split(\\\"/product/\\\")[1];\\n            if (_demolMap.entityType == \\\"picCategory\\\") {\\n                _demolUrl = _demolUrls.split(\\\"?\\\")[0];\\n                apiview._layoutPictureRuleParse(_demolUrl);\\n            } else if (_demolUrls.startsWith(\\\"categoryList\\\")) {\\n                if (_demolpage == 1) {\\n                    apiview._generateTop();\\n                };\\n                _demolUrl = _demolUrl.split(\\\"?\\\")[0];\\n                apiview._layoutLinkTabParse(apiview._demol_Ajax(`/v6${_demolUrl}`));\\n            } else {\\n                apiview._layoutTabRuleParse(_demolUrls);\\n            };\\n        } else if (!_demolUrl.startsWith(\\\"/page\\\") && _demolUrl.includes(\\\"/dyh/\\\")) {\\n            _demolUrls = _demolUrl.split(\\\"/dyh/\\\")[1];\\n            apiview._layoutDyhRuleParse(_demolUrls);\\n        } else if (_demolUrl.endsWith(\\\"couponSearch\\\")) {\\n            apiview._searchGoodsParse();\\n        } else if (_demolUrl.startsWith(\\\"/apk/\\\") || _demolUrl.startsWith(\\\"/game/\\\")) {\\n            if (_demolUrl.startsWith(\\\"/apk/\\\")) {\\n                _demolUrl = _demolUrl.split(\\\"/apk/\\\")[1];\\n            } else {\\n                _demolUrl = _demolUrl.split(\\\"/game/\\\")[1];\\n            };\\n            apiview._layoutApkRuleParse(_demolUrl);\\n        } else {\\n            if (_demolpage == 1) apiview._generateTop();\\n            if (_demolUrl.includes(\\\"/page\\\")) {\\n                _demolUrl = _demolUrl.split(\\\"/page?url=\\\")[1];\\n                if (_demolUrl.includes(\\\"selectedTab\\\")) {\\n                    _demolUrl = _demolUrl.split(\\\"&\\\")[0];\\n                };\\n            } else {\\n                _demolUrl = _demolUrl.split(\\\"#\\\")[1];\\n            };\\n            apiview._layoutDetermineParse(apiview._demol_Ajax(\\\"/v6/page/dataList\\\", {\\n                url: _demolUrl,\\n                title: _demolName,\\n                subTitle: \\\"\\\",\\n                page: _demolpage\\n            }));\\n        };\\n    },\\n    _layoutLinkTabParse: (_demolMap, _demol) => {\\n        let _demol = _demol ? _demol : \\\"\\\";\\n        addListener(\\\"onClose\\\", $.toString((_demol) => {\\n            clearMyVar(\\\":linkNext\\\" + _demol);\\n            clearMyVar(\\\":linkTag\\\" + _demol);\\n        }, _demol));\\n        let _demolpage = MY_PAGE;\\n        let tindex = getMyVar(\\\":linkTag\\\" + _demol, \\\"0\\\");\\n        let _demolMap = _demolMap.filter(_ => _.title != \\\"关注\\\" && _.title != \\\"品牌\\\");\\n        if (_demolpage == 1) {\\n            apiview.layout.push({\\n                col_type: \\\"blank_block\\\"\\n            });\\n            apiview.layout = apiview.layout.concat(_demolMap.map((_, i) => ({\\n                title: i == tindex ? apiview.rich(apiview.strong(apiview.color(_.title))) : _.title,\\n                url: $(\\\"#noLoading#\\\").lazyRule((i, empty, _demol) => {\\n                    putMyVar(\\\":linkTag\\\" + _demol, i);\\n                    refreshPage();\\n                    return empty;\\n                }, i, apiview.empty, _demol),\\n                col_type: \\\"scroll_button\\\",\\n                extra: {\\n                    backgroundColor: i == tindex ? \\\"#20FA7298\\\" : \\\"\\\"\\n                }\\n            })));\\n        };\\n        _demolMap = _demolMap[tindex];\\n        let _demolUrl = _demolMap.url;\\n        let _demolName = _demolMap.title;\\n        let _linkNext = () => getMyVar(\\\":next\\\" + _demolUrl, \\\"\\\");\\n        if (!_demolUrl.startsWith(\\\"http\\\") && !_demolUrl.startsWith(\\\"https\\\")) {\\n            apiview._layoutDetermineParse(apiview._demol_Ajax(\\\"/v6/page/dataList\\\", {\\n                url: _demolUrl,\\n                title: _demolName,\\n                subTitle: \\\"\\\",\\n                page: _linkNext() ? 1 : _demolpage\\n            }), _demolUrl);\\n        } else {\\n            apiview.layout.push({\\n                desc: \\\"auto\\\",\\n                url: _demolUrl,\\n                col_type: \\\"x5_webview_single\\\",\\n                extra: {\\n                    canBack: true,\\n                        urlInterceptor: $.toString((MY_RULE) => {\\n                        if (input.includes(\\\"/t/\\\")) {\\n                            let array = {\\n                                url: input,\\n                                title: \\\"\\\"\\n                            };\\n                            return $.toString((array, MY_RULE) => {\\n                                fba.open(JSON.stringify({\\n                                    rule: MY_RULE.title,\\n                                    url: `hiker://page/Carousel.view?rule=酷安&page=fypage&array=${encodeURIComponent(JSON.stringify(array))}&hiker=#noHistory##noRecordHistory##gameTheme#fypage`,\\n                                    findRule: MY_RULE.detail_find_rule,\\n                                    extra: {\\n                                        newWindow: true,\\n                                        windowId: MY_RULE.title\\n                                    }\\n                                }));\\n                            }, array, MY_RULE)\\n                        }\\n                    }, MY_RULE),\\n                    ua: \\\"Mozilla/5.0 (Linux; Android 10; V2304A Build/UP1A.231005.007; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/74.0.3729.186 Mobile Safari/537.36 (#Build; vivo; V2304A; UP1A.231005.007 release-keys; 10) +CoolMarket/13.3.6-2310232-universal\\\"\\n                }\\n            });\\n        };\\n    },\\n    _layoutRuleParse: (_id_, _demol_) => {\\n        let _demolpage = MY_PAGE;\\n        let _demolMap = storage0.getMyVar(`${_id_}:feedDetail`, []);\\n        if (_demolMap.length == 0) {\\n            _demolMap = apiview._demol_Ajax(\\\"/v6/feed/detail\\\", Object.assign({\\n                id: _id_\\n            }, _demol_ ? {\\n                fromApi: _demol_\\n            } : {}), true);\\n            storage0.putMyVar(`${_id_}:feedDetail`, _demolMap);\\n        };\\n        let _demolPics = _demolMap.picArr;\\n        if (_demolpage == 1) {\\n            apiview._generateTop();\\n            if (_demolPics && $.type(_demolPics) == \\\"array\\\") {\\n                apiview.layout = apiview.layout.concat(_demolPics.map(_ => ({\\n                    img: _,\\n                    url: _,\\n                    col_type: \\\"pic_3_square\\\"\\n                })));\\n            };\\n            let _demolMsg = apiview._getRegExp(_demolMap, true);\\n            if (_demolMsg) {\\n                apiview.layout.push({\\n                    title: _demolMsg,\\n                    col_type: \\\"rich_text\\\"\\n                });\\n                apiview.layout.push({\\n                    col_type: \\\"line_blank\\\"\\n                });\\n            };\\n        };\\n        apiview._layoutRemarkParse(_id_);\\n        if (getMyVar(\\\":replyNext\\\", \\\"\\\") == \\\"\\\") {\\n            apiview._generateEnd();\\n        };\\n    },\\n    _layoutAppRuleParse: (_demolMap) => {\\n        let _demolpage = MY_PAGE;\\n        let _demolPics = _demolMap.screenList;\\n        if (_demolpage == 1) {\\n            if (_demolPics && $.type(_demolPics) == \\\"array\\\") {\\n                apiview.layout = apiview.layout.concat(_demolPics.map(_ => ({\\n                    img: _,\\n                    url: _ + \\\"#.png\\\",\\n                    col_type: \\\"pic_3_square\\\"\\n                })));\\n                _demolMap.message = (_demolMap.changelog ? `${apiview.strong(apiview.big(apiview.big(\\\"新版特性：\\\")))}<br>${_demolMap.changelog}` : \\\"\\\") + ((_demolMap.changelog && _demolMap.introduce) ? \\\"<br><br>\\\" : \\\"\\\") + (_demolMap.introduce ? `${apiview.strong(apiview.big(apiview.big(\\\"应用介绍：\\\")))}<br>${_demolMap.introduce}` : \\\"\\\");\\n                let _demolMsg = apiview._getRegExp(_demolMap, true);\\n                apiview.layout.push({\\n                    title: _demolMsg,\\n                    col_type: \\\"rich_text\\\"\\n                });\\n                apiview.layout.push({\\n                    col_type: \\\"line_blank\\\"\\n                });\\n            };\\n            apiview._generateEnd();\\n        };\\n    },\\n    _layoutPictureRuleParse: (_demol) => {\\n        addListener(\\\"onClose\\\", $.toString(() => {\\n            clearMyVar(\\\":pictureTag\\\");\\n        }));\\n        let _demolpage = MY_PAGE;\\n        let _demolMap = [\\\"精选\\\", \\\"热门\\\", \\\"最新\\\"];\\n        let tindex = getMyVar(\\\":pictureTag\\\", \\\"0\\\");\\n        if (_demolpage == 1) {\\n            apiview._generateTop();\\n            apiview.layout = apiview.layout.concat(_demolMap.map((item, i) => ({\\n                title: i == tindex ? apiview.rich(apiview.strong(apiview.color(item))) : item,\\n                url: $(\\\"#noLoading#\\\").lazyRule((i, empty) => {\\n                    putMyVar(\\\":pictureTag\\\", i);\\n                    refreshPage();\\n                    return empty;\\n                }, i, apiview.empty),\\n                col_type: \\\"scroll_button\\\",\\n                extra: {\\n                    backgroundColor: i == tindex ? \\\"#20FA7298\\\" : \\\"\\\"\\n                }\\n            })));\\n        };\\n        switch (_demolMap[tindex]) {\\n            case _demolMap[0]:\\n                _type_ = \\\"recommend\\\";\\n                break;\\n            case _demolMap[1]:\\n                _type_ = \\\"hot\\\";\\n                break;\\n            case _demolMap[2]:\\n                _type_ = \\\"newest\\\";\\n                break;\\n        };\\n        apiview._layoutDetermineParse(apiview._demol_Ajax(\\\"/v6/picture/list\\\", {\\n            tag: _demol,\\n            type: _type_,\\n            page: _demolpage\\n        }));\\n    },\\n    _layoutUserRuleParse: (_demolMap) => {\\n        addListener(\\\"onClose\\\", $.toString(() => {\\n            clearMyVar(\\\":userTag\\\");\\n        }));\\n        _demolMap = _demolMap.userInfo || _demolMap;\\n        let _demolMaps = {};\\n        _demolMaps.username = _demolMap.username;\\n        _demolMaps.userAvatar = _demolMap.userAvatar;\\n        _demolMaps.uid = _demolMap.uid;\\n        _demolMaps.entityType = _demolMap.entityType;\\n        let _demolpage = MY_PAGE;\\n        let down = apiview._Get_scription;\\n        let abreak = false;\\n        eval(\\\"file_map =\\\" + readFile(down));\\n        file_map[MY_RULE.title][\\\"user\\\"].forEach(_ => {\\n            if (_[\\\"uid\\\"] == _demolMap.uid) {\\n                abreak = true;\\n                return;\\n            };\\n        });\\n        let _tabMap = [\\\"动态\\\", \\\"点评\\\", \\\"图文\\\", \\\"问答\\\", \\\"酷图\\\", \\\"好物\\\", \\\"收藏单\\\", \\\"应用集\\\"];\\n        let tindex = getMyVar(\\\":userTag\\\", \\\"0\\\");\\n        if (_demolpage == 1) {\\n            apiview.layout.push({\\n                col_type: \\\"rich_text\\\"\\n            });\\n            apiview.layout.push({\\n                col_type: \\\"card_pic_3\\\",\\n                url: apiview.empty\\n            });\\n            apiview.layout.push({\\n                img: _demolMap.userAvatar,\\n                url: apiview.empty,\\n                col_type: \\\"card_pic_3\\\"\\n            });\\n            apiview.layout.push({\\n                title: apiview.rich(apiview.big(_demolMap.username)),\\n                col_type: \\\"text_center_1\\\",\\n                url: apiview.empty,\\n                extra: {\\n                    lineVisible: false\\n                }\\n            });\\n            apiview.layout.push({\\n                title: apiview.rich(apiview.strong(apiview.big(abreak ? \\\"取关\\\" : \\\"关注\\\"))),\\n                col_type: \\\"scroll_button\\\",\\n                url: abreak ? $(apiview.empty).lazyRule((_demolMaps) => {\\n                    const apiview = $.require(\\\"Config.view\\\");\\n                    let down = apiview._Get_scription;\\n                    let abreak = false;\\n                    eval(\\\"ajax_map =\\\" + readFile(down));\\n                    ajax_map[MY_RULE.title][\\\"user\\\"].forEach((Item, i) => {\\n                        if (Item[\\\"uid\\\"] == _demolMaps.uid) {\\n                            tindex = i;\\n                            abreak = true;\\n                            return;\\n                        };\\n                    });\\n                    if (abreak) {\\n                        ajax_map[MY_RULE.title][\\\"user\\\"].splice(tindex, 1);\\n                        saveFile(down, JSON.stringify(ajax_map), 0);\\n                        toast(\\\"操作成功\\\");\\n                        refreshPage(false);\\n                    } else {\\n                        toast(\\\"操作失败\\\");\\n                    };\\n                    return apiview.empty;\\n                }, _demolMaps) : $(apiview.empty).lazyRule((_demolMaps) => {\\n                    const apiview = $.require(\\\"Config.view\\\");\\n                    let down = apiview._Get_scription;\\n                    eval(\\\"ajax_map =\\\" + readFile(down));\\n                    ajax_map[MY_RULE.title][\\\"user\\\"].push(_demolMaps);\\n                    saveFile(down, JSON.stringify(ajax_map), 0);\\n                    toast(\\\"操作成功\\\");\\n                    refreshPage(false);\\n                    return apiview.empty;\\n                }, _demolMaps)\\n            });\\n            apiview.layout = apiview.layout.concat(_tabMap.map((_, i) => ({\\n                title: i == tindex ? apiview.rich(apiview.big(apiview.strong(_))) : _,\\n                url: $(\\\"#noLoading#\\\").lazyRule((i, empty) => {\\n                    putMyVar(\\\":userTag\\\", i);\\n                    refreshPage();\\n                    return empty;\\n                }, i, apiview.empty),\\n                col_type: \\\"scroll_button\\\"\\n            })));\\n        };\\n        switch (_tabMap[tindex]) {\\n            case _tabMap[0]:\\n                _demolMaps = apiview._demol_Ajax(\\\"/v6/user/feedList\\\", {\\n                    uid: _demolMap.uid,\\n                    page: _demolpage,\\n                    showAnonymous: 0,\\n                    isIncludeTop: 1,\\n                    showDoing: 1\\n                });\\n                break;\\n            case _tabMap[1]:\\n                _demol_ = buildUrl(\\\"/feed/nodeRatingList\\\", {\\n                    uid: _demolMap.uid,\\n                    targetType: \\\"all\\\",\\n                    parseRatingToFeed: 1\\n                });\\n                _demolMaps = apiview._demol_Ajax(\\\"/v6/page/dataList\\\", {\\n                    url: _demol_,\\n                    title: \\\"\\\",\\n                    subTitle: \\\"\\\",\\n                    page: _demolpage\\n                });\\n                break;\\n            case _tabMap[2]:\\n                _demolMaps = apiview._demol_Ajax(\\\"/v6/user/htmlFeedList\\\", {\\n                    uid: _demolMap.uid,\\n                    page: _demolpage\\n                });\\n                break;\\n            case _tabMap[3]:\\n                _demolMaps = apiview._demol_Ajax(\\\"/v6/user/questionAndAnswerList\\\", {\\n                    uid: _demolMap.uid,\\n                    page: _demolpage\\n                });\\n                break;\\n            case _tabMap[4]:\\n                _demol_ = buildUrl(\\\"/feed/userCoolPictureFeedList\\\", {\\n                    fragmentTemplate: \\\"flex\\\",\\n                    uid: String(_demolMap.uid)\\n                });\\n                _demolMaps = apiview._demol_Ajax(\\\"/v6/page/dataList\\\", {\\n                    url: _demol_,\\n                    page: _demolpage\\n                });\\n                break;\\n            case _tabMap[5]:\\n                _demol_ = buildUrl(\\\"/goods/goodsFeedList\\\", {\\n                    fragmentTemplate: \\\"flex\\\",\\n                    uid: _demolMap.uid\\n                });\\n                _demolMaps = apiview._demol_Ajax(\\\"/v6/page/dataList\\\", {\\n                    url: _demol_,\\n                    page: _demolpage\\n                });\\n                break;\\n            case _tabMap[6]:\\n                _demolMaps = apiview._demol_Ajax(\\\"/v6/collection/list\\\", {\\n                    uid: _demolMap.uid,\\n                    showDefault: 0,\\n                    page: _demolpage\\n                });\\n                break;\\n            case _tabMap[7]:\\n                _demolMaps = apiview._demol_Ajax(\\\"/v6/user/albumList\\\", {\\n                    uid: _demolMap.uid,\\n                    page: _demolpage\\n                });\\n                break;\\n        };\\n        if (_demolMaps == null || $.type(_demolMaps) == \\\"object\\\") {\\n            _demolMaps = [];\\n        };\\n        apiview._layoutDetermineParse(_demolMaps, _demolMap.uid);\\n    },\\n    _layoutDyhRuleParse: (_demol) => {\\n        let _demolpage = MY_PAGE;\\n        let down = apiview._Get_scription;\\n        let abreak = false;\\n        eval(\\\"file_map =\\\" + readFile(down));\\n        let _demolMap = storage0.getMyVar(_demol + \\\":dyhTag\\\", []);\\n        if (_demolMap.length == 0) {\\n            _demolMap = apiview._demol_Ajax(\\\"/v6/dyh/detail\\\", {\\n                dyhId: _demol\\n            });\\n            storage0.putMyVar(_demol + \\\":dyhTag\\\", _demolMap);\\n        };\\n        let _demolMaps = {};\\n        _demolMaps.title = _demolMap.title;\\n        _demolMaps.id = _demol;\\n        _demolMaps.logo = _demolMap.logo;\\n        _demolMaps.entityType = _demolMap.entityType;\\n        _demolMaps.url = `/dyh/${_demol}`;\\n        file_map[MY_RULE.title][\\\"dyh\\\"].forEach(_ => {\\n            if (_.title == _demolMap.title) {\\n                abreak = true;\\n                return;\\n            };\\n        });\\n        if (_demolpage == 1) {\\n            apiview._generateTop();\\n            apiview.layout.push({\\n                col_type: \\\"rich_text\\\"\\n            });\\n            apiview.layout.push({\\n                col_type: \\\"card_pic_3\\\",\\n                url: apiview.empty\\n            });\\n            apiview.layout.push({\\n                img: _demolMaps.logo,\\n                url: apiview.empty,\\n                col_type: \\\"card_pic_3\\\"\\n            });\\n            apiview.layout.push({\\n                title: apiview.rich(apiview.big(_demolMaps.title)),\\n                col_type: \\\"text_center_1\\\",\\n                url: apiview.empty,\\n                extra: {\\n                    lineVisible: false\\n                }\\n            });\\n            apiview.layout.push({\\n                title: apiview.rich(apiview.gray(abreak ? \\\"取关\\\" : \\\"关注\\\")),\\n                col_type: \\\"text_center_1\\\",\\n                url: abreak ? $(apiview.empty).lazyRule((_demolMaps) => {\\n                    const apiview = $.require(\\\"Config.view\\\");\\n                    let down = apiview._Get_scription;\\n                    let abreak = false;\\n                    eval(\\\"ajax_map =\\\" + readFile(down));\\n                    ajax_map[MY_RULE.title][\\\"dyh\\\"].forEach((Item, i) => {\\n                        if (Item.title == _demolMaps.title) {\\n                            tindex = i;\\n                            abreak = true;\\n                            return;\\n                        };\\n                    });\\n                    if (abreak) {\\n                        ajax_map[MY_RULE.title][\\\"dyh\\\"].splice(tindex, 1);\\n                        saveFile(down, JSON.stringify(ajax_map), 0);\\n                        toast(\\\"操作成功\\\");\\n                        refreshPage(false);\\n                    } else {\\n                        toast(\\\"操作失败\\\");\\n                    };\\n                    return apiview.empty;\\n                }, _demolMaps) : $(apiview.empty).lazyRule((_demolMaps) => {\\n                    const apiview = $.require(\\\"Config.view\\\");\\n                    let down = apiview._Get_scription;\\n                    eval(\\\"ajax_map =\\\" + readFile(down));\\n                    ajax_map[MY_RULE.title][\\\"dyh\\\"].push(_demolMaps);\\n                    saveFile(down, JSON.stringify(ajax_map), 0);\\n                    toast(\\\"操作成功\\\");\\n                    refreshPage(false);\\n                    return apiview.empty;\\n                }, _demolMaps)\\n            });\\n        };\\n        _demolMap = apiview._demol_Ajax(\\\"/v6/dyhArticle/list\\\", {\\n            dyhId: _demolMap.id,\\n            type: \\\"all\\\",\\n            page: _demolpage\\n        });\\n        apiview._layoutDetermineParse(_demolMap, _demol);\\n    },\\n    _layoutTabRuleParse: (_demol) => {\\n        addListener(\\\"onClose\\\", $.toString((_demol) => {\\n            clearMyVar(\\\":newTag\\\" + _demol);\\n        }, _demol));\\n        let _demolpage = MY_PAGE;\\n        let down = apiview._Get_scription;\\n        let abreak = false;\\n        eval(\\\"file_map =\\\" + readFile(down));\\n        let _demol = $.type(_demol) == \\\"object\\\" ? decodeURIComponent(_demol.title) : _demol;\\n        let _demolMap = storage0.getMyVar(_demol + \\\":newTag\\\", []);\\n        if (_demolMap.length == 0) {\\n            if (!isNaN(_demol) && !isNaN(parseFloat(_demol))) {\\n                _demolMap = apiview._demol_Ajax(\\\"/v6/product/detail\\\", {\\n                    id: _demol\\n                });\\n            } else {\\n                _demolMap = apiview._demol_Ajax(\\\"/v6/topic/newTagDetail\\\", {\\n                    tag: _demol\\n                });\\n            };\\n            storage0.putMyVar(_demol + \\\":newTag\\\", _demolMap);\\n        };\\n        let _demolMaps = {};\\n        _demolMaps.title = _demolMap.title;\\n        _demolMaps.id = _demol;\\n        _demolMaps.logo = _demolMap.logo;\\n        _demolMaps.entityType = _demolMap.entityType;\\n        switch (_demolMaps.entityType) {\\n            case \\\"topic\\\":\\n                _tag = \\\"topic\\\";\\n                break;\\n            case \\\"product\\\":\\n                _tag = \\\"product\\\";\\n                break;\\n        };\\n        file_map[MY_RULE.title][_tag].forEach(_ => {\\n            if (_.title == _demolMap.title) {\\n                abreak = true;\\n                return;\\n            };\\n        });\\n        let tindex = getMyVar(\\\":newTag\\\" + _demol, \\\"0\\\");\\n        _demolMap = _demolMap.tabList.filter(_ => _.title != \\\"全部\\\" && _.title != \\\"来投票\\\");\\n        if (_demolpage == 1) {\\n            apiview._generateTop();\\n            apiview.layout.push({\\n                col_type: \\\"rich_text\\\"\\n            });\\n            apiview.layout.push({\\n                col_type: \\\"card_pic_3\\\",\\n                url: apiview.empty\\n            });\\n            apiview.layout.push({\\n                img: _demolMaps.logo,\\n                url: apiview.empty,\\n                col_type: \\\"card_pic_3\\\"\\n            });\\n            apiview.layout.push({\\n                title: apiview.rich(apiview.big(_demolMaps.title)),\\n                col_type: \\\"text_center_1\\\",\\n                url: apiview.empty,\\n                extra: {\\n                    lineVisible: false\\n                }\\n            });\\n            apiview.layout.push({\\n                title: apiview.rich(apiview.gray(abreak ? \\\"取关\\\" : \\\"关注\\\")),\\n                col_type: \\\"scroll_button\\\",\\n                url: abreak ? $(apiview.empty).lazyRule((_demolMaps, _tag) => {\\n                    const apiview = $.require(\\\"Config.view\\\");\\n                    let down = apiview._Get_scription;\\n                    let abreak = false;\\n                    eval(\\\"ajax_map =\\\" + readFile(down));\\n                    ajax_map[MY_RULE.title][_tag].forEach((Item, i) => {\\n                        if (Item.title == _demolMaps.title) {\\n                            tindex = i;\\n                            abreak = true;\\n                            return;\\n                        };\\n                    });\\n                    if (abreak) {\\n                        ajax_map[MY_RULE.title][_tag].splice(tindex, 1);\\n                        saveFile(down, JSON.stringify(ajax_map), 0);\\n                        toast(\\\"操作成功\\\");\\n                        refreshPage(false);\\n                    } else {\\n                        toast(\\\"操作失败\\\");\\n                    };\\n                    return apiview.empty;\\n                }, _demolMaps, _tag) : $(apiview.empty).lazyRule((_demolMaps, _tag) => {\\n                    const apiview = $.require(\\\"Config.view\\\");\\n                    let down = apiview._Get_scription;\\n                    eval(\\\"ajax_map =\\\" + readFile(down));\\n                    ajax_map[MY_RULE.title][_tag].push(_demolMaps);\\n                    saveFile(down, JSON.stringify(ajax_map), 0);\\n                    toast(\\\"操作成功\\\");\\n                    refreshPage(false);\\n                    return apiview.empty;\\n                }, _demolMaps, _tag)\\n            });\\n            apiview.layout = apiview.layout.concat(_demolMap.map((_, i) => ({\\n                title: i == tindex ? apiview.rich(apiview.strong(apiview.color(_.title))) : _.title,\\n                url: $(\\\"#noLoading#\\\").lazyRule((i, empty, _demol) => {\\n                    putMyVar(\\\":newTag\\\" + _demol, i);\\n                    refreshPage();\\n                    return empty;\\n                }, i, apiview.empty, _demol),\\n                col_type: \\\"scroll_button\\\",\\n                extra: {\\n                    backgroundColor: i == tindex ? \\\"#20FA7298\\\" : \\\"\\\"\\n                }\\n            })));\\n        };\\n        let _linkNext = () => getMyVar(\\\":next\\\" + _demol, \\\"\\\");\\n        _demolMap = _demolMap[tindex];\\n        _demolMap = apiview._demol_Ajax(\\\"/v6/page/dataList\\\", {\\n            url: _demolMap.url,\\n            title: _demolMap.title,\\n            subTitle: \\\"\\\",\\n            page: _linkNext() ? 1 : _demolpage\\n        });\\n        apiview._layoutDetermineParse(_demolMap, _demol);\\n    },\\n    _layoutApkRuleParse: (_demol) => {\\n        addListener(\\\"onClose\\\", $.toString(() => {\\n            clearMyVar(\\\":apkTag\\\");\\n        }));\\n        let _demolpage = MY_PAGE;\\n        let down = apiview._Get_scription;\\n        let abreak = false;\\n        eval(\\\"file_map =\\\" + readFile(down));\\n        let _demolMap = storage0.getMyVar(_demol + \\\":apkTag\\\", []);\\n        if (_demolMap.length == 0) {\\n            _demolMap = apiview._demol_Ajax(\\\"/v6/apk/detail\\\", {\\n                id: _demol,\\n                installed: \\\"\\\"\\n            });\\n            storage0.putMyVar(_demol + \\\":apkTag\\\", _demolMap);\\n        };\\n        let _demolMaps = {};\\n        _demolMaps.entityType = _demolMap.entityType || \\\"apk\\\";\\n        _demolMaps.logo = _demolMap.logo;\\n        _demolMaps.title = _demolMap.title;\\n        _demolMaps.url = `/apk/${_demol}`;\\n        file_map[MY_RULE.title][\\\"apk\\\"].forEach(_ => {\\n            if (_.title == _demolMap.title) {\\n                abreak = true;\\n                return;\\n            };\\n        });\\n        let tindex = getMyVar(\\\":apkTag\\\", \\\"0\\\");\\n        let _demolMap_ = [\\\"详情\\\", \\\"讨论\\\"];\\n        if (_demolpage == 1) {\\n            apiview._generateTop();\\n            switch (getItem(\\\":application\\\", \\\"默认\\\")) {\\n                case \\\"默认\\\":\\n                    apiview.layout.push({\\n                        desc: \\\"0\\\",\\n                        img: _demolMap.logo,\\n                        url: apiview.empty,\\n                        col_type: \\\"card_pic_2\\\"\\n                    });\\n                    apiview.layout.push({\\n                        title: apiview.rich(apiview.black(`${apiview.big(_demolMap.title)}<br><br>${_demolMap.version}<br><br>${_demolMap.catName}<br>${_demolMap.commentStatusText ? _demolMap.commentStatusText : \\\"\\\"}`)),\\n                        desc: \\\"0\\\",\\n                        url: apiview.empty,\\n                        col_type: \\\"card_pic_2\\\"\\n                    });\\n                    break;\\n                default:\\n                    apiview.layout.push({\\n                        col_type: \\\"rich_text\\\"\\n                    });\\n                    apiview.layout.push({\\n                        url: apiview.empty,\\n                        col_type: \\\"card_pic_3\\\"\\n                    });\\n                    apiview.layout.push({\\n                        img: _demolMap.logo,\\n                        url: apiview.empty,\\n                        col_type: \\\"card_pic_3\\\"\\n                    });\\n                    apiview.layout.push({\\n                        title: apiview.rich(apiview.big(_demolMaps.title)),\\n                        col_type: \\\"text_center_1\\\",\\n                        url: apiview.empty,\\n                        extra: {\\n                            lineVisible: false\\n                        }\\n                    });\\n                    break;\\n            };\\n            apiview.layout.push({\\n                title: \\\"下载\\\",\\n                url: _demolMap.apkfile ? ((_demolMap.apkfile && !_demolMap.apkfile.startsWith(\\\"http\\\") && !_demolMap.apkfile.startsWith(\\\"https\\\")) ? $(apiview.empty).lazyRule(({\\n                    id,\\n                    apkname,\\n                    apkversioncode\\n                }) => \\\"download://\\\" + decodeURIComponent($.require(\\\"Config.view\\\")._demol_Ajax(\\\"/v6/apk/download\\\", {\\n                    pn: apkname,\\n                    aid: id,\\n                    vc: apkversioncode,\\n                    extra: \\\"\\\"\\n                }, true, true)), _demolMap) : \\\"download://\\\" + _demolMap.apkfile) : \\\"toast://无下载链接\\\",\\n                col_type: \\\"text_4\\\"\\n            });\\n            apiview.layout.push({\\n                title: abreak ? \\\"取关\\\" : \\\"关注\\\",\\n                col_type: \\\"text_4\\\",\\n                url: abreak ? $(apiview.empty).lazyRule((_demolMaps) => {\\n                    const apiview = $.require(\\\"Config.view\\\");\\n                    let down = apiview._Get_scription;\\n                    let abreak = false;\\n                    eval(\\\"ajax_map =\\\" + readFile(down));\\n                    ajax_map[MY_RULE.title][\\\"apk\\\"].forEach((Item, i) => {\\n                        if (Item.title == _demolMaps.title) {\\n                            tindex = i;\\n                            abreak = true;\\n                            return;\\n                        };\\n                    });\\n                    if (abreak) {\\n                        ajax_map[MY_RULE.title][\\\"apk\\\"].splice(tindex, 1);\\n                        saveFile(down, JSON.stringify(ajax_map), 0);\\n                        toast(\\\"操作成功\\\");\\n                        refreshPage(false);\\n                    } else {\\n                        toast(\\\"操作失败\\\");\\n                    };\\n                    return apiview.empty;\\n                }, _demolMaps) : $(apiview.empty).lazyRule((_demolMaps) => {\\n                    const apiview = $.require(\\\"Config.view\\\");\\n                    let down = apiview._Get_scription;\\n                    eval(\\\"ajax_map =\\\" + readFile(down));\\n                    ajax_map[MY_RULE.title][\\\"apk\\\"].push(_demolMaps);\\n                    saveFile(down, JSON.stringify(ajax_map), 0);\\n                    toast(\\\"操作成功\\\");\\n                    refreshPage(false);\\n                    return apiview.empty;\\n                }, _demolMaps)\\n            });\\n            apiview.layout = apiview.layout.concat(_demolMap_.map((_, i) => ({\\n                title: i == tindex ? apiview.rich(apiview.color(apiview.strong(_))) : _,\\n                url: $(\\\"#noLoading#\\\").lazyRule((i, empty) => {\\n                    putMyVar(\\\":apkTag\\\", i);\\n                    refreshPage();\\n                    return empty;\\n                }, i, apiview.empty),\\n                col_type: \\\"text_4\\\"\\n            })));\\n        };\\n        let _linkNext = () => getMyVar(\\\":next\\\" + _demol, \\\"\\\");\\n        switch (_demolMap_[tindex]) {\\n            case _demolMap_[0]:\\n                apiview._layoutAppRuleParse(_demolMap);\\n                break;\\n            case _demolMap_[1]:\\n                _demolMap = apiview._demol_Ajax(\\\"/v6/page/dataList\\\", {\\n                    url: `#/feed/apkCommentList?isIncludeTop=1&withSortCard=1&id=${_demolMap.id}`,\\n                    title: \\\"讨论\\\",\\n                    subTitle: \\\"\\\",\\n                    page: _linkNext() ? 1 : _demolpage\\n                });\\n                apiview._layoutDetermineParse(_demolMap, _demol);\\n                break;\\n        };\\n    },\\n    _layoutSubscrParse: () => {\\n        eval(\\\"ajax_map =\\\" + readFile(apiview._Get_scription));\\n        let ajax_maps = ajax_map[MY_RULE.title];\\n        let objectMap = [\\\"用户\\\", \\\"帖子\\\", \\\"话题\\\", \\\"数码\\\", \\\"应用\\\", \\\"应用集\\\", \\\"看看号\\\"];\\n        let _demolpage = MY_PAGE;\\n        let tindex = getMyVar(\\\":subscrTab\\\", \\\"0\\\");\\n        if (_demolpage == 1) {\\n            apiview.layout = apiview.layout.concat(objectMap.map((item, i) => ({\\n                title: i == tindex ? apiview.rich(apiview.strong(apiview.color(item))) : item,\\n                url: $(\\\"#noLoading#\\\").lazyRule((i, empty) => {\\n                    putMyVar(\\\":subscrTab\\\", i);\\n                    refreshPage();\\n                    return empty;\\n                }, i, apiview.empty),\\n                col_type: \\\"scroll_button\\\",\\n                extra: {\\n                    backgroundColor: i == tindex ? \\\"#20FA7298\\\" : \\\"\\\"\\n                }\\n            })));\\n            switch (objectMap[tindex]) {\\n                case objectMap[0]:\\n                    apiview._layoutDetermineParse(ajax_maps[\\\"user\\\"], \\\"user\\\");\\n                    break;\\n                case objectMap[1]:\\n                    apiview._layoutDetermineParse(ajax_maps[\\\"card\\\"], \\\"card\\\");\\n                    break;\\n                case objectMap[2]:\\n                    apiview._layoutDetermineParse(ajax_maps[\\\"topic\\\"], \\\"topic\\\");\\n                    break;\\n                case objectMap[3]:\\n                    apiview._layoutDetermineParse(ajax_maps[\\\"product\\\"], \\\"product\\\");\\n                    break;\\n                case objectMap[4]:\\n                    apiview._layoutDetermineParse(ajax_maps[\\\"apk\\\"], \\\"apk\\\");\\n                    break;\\n                case objectMap[5]:\\n                    apiview._layoutDetermineParse(ajax_maps[\\\"album\\\"], \\\"album\\\");\\n                    break;\\n                case objectMap[6]:\\n                    apiview._layoutDetermineParse(ajax_maps[\\\"dyh\\\"], \\\"dyh\\\");\\n                    break;\\n            };\\n        };\\n    },\\n    _layoutMenuParse: () => {\\n        apiview.layout.push({\\n            col_type: \\\"line_blank\\\"\\n        });\\n        apiview.layout.push({\\n            title: \\\"帖子预览\\\",\\n            img: $.require(\\\"icon.tool\\\").post,\\n            url: apiview.empty,\\n            col_type: \\\"avatar\\\"\\n        });\\n        apiview.layout.push({\\n            title: \\\"显示图片张数\\\",\\n            img: $.require(\\\"icon.tool\\\").number,\\n            url: $(\\\"#noLoading#\\\").lazyRule(() => {\\n                const hikerPop = $.require(\\\"http://hiker.nokia.press/hikerule/rulelist.json?id=6966\\\", 24);\\n                hikerPop.inputAutoRow({\\n                    hint: `当前预览显示${getItem(\\\":number\\\", \\\"3\\\")}张`,\\n                    title: \\\"请输入数字(1-9)\\\",\\n                    defaultValue: \\\"\\\",\\n                    noAutoSoft: true,\\n                    confirm(text) {\\n                        text = text.trim();\\n                        const apiview = $.require(\\\"Config.view\\\");\\n                        if (text && !isNaN(text) && Number.isInteger(Number(text))) {\\n                            setItem(\\\":number\\\", text);\\n                        } else {\\n                            toast(\\\"请输入数字！！！\\\");\\n                        };\\n                        return apiview.empty;\\n                    }\\n                });\\n                return \\\"hiker://empty\\\";\\n            }),\\n            col_type: \\\"text_icon\\\"\\n        });\\n        apiview.layout.push({\\n            col_type: \\\"line_blank\\\"\\n        });\\n        apiview.layout.push({\\n            title: \\\"应用界面\\\",\\n            img: $.require(\\\"icon.tool\\\").application,\\n            url: apiview.empty,\\n            col_type: \\\"avatar\\\"\\n        });\\n        apiview.layout.push({\\n            title: `默认${apiview.small(\\\"(长按可预览)\\\")}`,\\n            img: $.require(\\\"icon.tool\\\")[getItem(\\\":application\\\", \\\"默认\\\") == \\\"默认\\\" ? \\\"on\\\" : \\\"off\\\"],\\n            url: $(\\\"#noLoading#\\\").lazyRule(() => {\\n                const apiview = $.require(\\\"Config.view\\\");\\n                if (getItem(\\\":application\\\", \\\"默认\\\") == \\\"默认\\\") {\\n                    setItem(\\\":application\\\", \\\"默认2\\\");\\n                    updateItem(\\\"application1\\\", {\\n                        img: $.require(\\\"icon.tool\\\").off\\n                    });\\n                    updateItem(\\\"application2\\\", {\\n                        img: $.require(\\\"icon.tool\\\").on\\n                    });\\n                } else {\\n                    setItem(\\\":application\\\", \\\"默认\\\");\\n                    updateItem(\\\"application1\\\", {\\n                        img: $.require(\\\"icon.tool\\\").on\\n                    });\\n                    updateItem(\\\"application2\\\", {\\n                        img: $.require(\\\"icon.tool\\\").off\\n                    });\\n                };\\n                return apiview.empty;\\n            }),\\n            col_type: \\\"text_icon\\\",\\n            extra: {\\n                id: \\\"application1\\\",\\n                longClick: [{\\n                    title: \\\"预览\\\",\\n                    js: $.toString(() => $($.require(\\\"Config.view\\\").empty + \\\"#noHistory##noRecordHistory##gameTheme#fypage\\\").rule(() => {\\n                        addListener(\\\"onClose\\\", $.toString((text) => {\\n                            setItem(\\\":application\\\", text);\\n                        }, getItem(\\\":application\\\", \\\"默认\\\")));\\n                        setItem(\\\":application\\\", \\\"默认\\\");\\n                        const apiview = $.require(\\\"Config.view\\\");\\n                        apiview._layoutLinkRuleParse({\\n                            \\\"title\\\": \\\"酷安\\\",\\n                            \\\"logo\\\": \\\"http://pp.myapp.com/ma_icon/0/icon_10401327_1611306222/256\\\",\\n                            \\\"url\\\": \\\"/apk/com.coolapk.market\\\",\\n                            \\\"id\\\": undefined,\\n                            \\\"entityType\\\": \\\"apk\\\"\\n                        });\\n                        setResult(apiview.layout);\\n                    }))\\n                }]\\n            }\\n        });\\n        apiview.layout.push({\\n            title: `同用户界面${apiview.small(\\\"(长按可预览)\\\")}`,\\n            img: $.require(\\\"icon.tool\\\")[getItem(\\\":application\\\", \\\"默认\\\") == \\\"默认\\\" ? \\\"off\\\" : \\\"on\\\"],\\n            url: $(\\\"#noLoading#\\\").lazyRule(() => {\\n                const apiview = $.require(\\\"Config.view\\\");\\n                if (getItem(\\\":application\\\", \\\"默认\\\") == \\\"默认\\\") {\\n                    setItem(\\\":application\\\", \\\"默认2\\\");\\n                    updateItem(\\\"application1\\\", {\\n                        img: $.require(\\\"icon.tool\\\").off\\n                    });\\n                    updateItem(\\\"application2\\\", {\\n                        img: $.require(\\\"icon.tool\\\").on\\n                    });\\n                } else {\\n                    setItem(\\\":application\\\", \\\"默认\\\");\\n                    updateItem(\\\"application1\\\", {\\n                        img: $.require(\\\"icon.tool\\\").on\\n                    });\\n                    updateItem(\\\"application2\\\", {\\n                        img: $.require(\\\"icon.tool\\\").off\\n                    });\\n                };\\n                return apiview.empty;\\n            }),\\n            col_type: \\\"text_icon\\\",\\n            extra: {\\n                id: \\\"application2\\\",\\n                longClick: [{\\n                    title: \\\"预览\\\",\\n                    js: $.toString(() => $($.require(\\\"Config.view\\\").empty + \\\"#noHistory##noRecordHistory##gameTheme#fypage\\\").rule(() => {\\n                        addListener(\\\"onClose\\\", $.toString((text) => {\\n                            setItem(\\\":application\\\", text);\\n                        }, getItem(\\\":application\\\", \\\"默认\\\")));\\n                        setItem(\\\":application\\\", \\\"默认2\\\");\\n                        const apiview = $.require(\\\"Config.view\\\");\\n                        apiview._layoutLinkRuleParse({\\n                            \\\"title\\\": \\\"酷安\\\",\\n                            \\\"logo\\\": \\\"http://pp.myapp.com/ma_icon/0/icon_10401327_1611306222/256\\\",\\n                            \\\"url\\\": \\\"/apk/com.coolapk.market\\\",\\n                            \\\"id\\\": undefined,\\n                            \\\"entityType\\\": \\\"apk\\\"\\n                        });\\n                        setResult(apiview.layout);\\n                    }))\\n                }]\\n            }\\n        });\\n        apiview.layout.push({\\n            col_type: \\\"line_blank\\\"\\n        });\\n        apiview.layout.push({\\n            title: \\\"反馈BUG\\\",\\n            img: $.require(\\\"icon.tool\\\").bug,\\n            url: \\\"mqqwpa://im/chat?chat_type=wpa&uin=862347205\\\",\\n            col_type: \\\"avatar\\\"\\n        });\\n        apiview.layout.push({\\n            title: \\\"更新日志\\\",\\n            img: $.require(\\\"icon.tool\\\").logs,\\n            url: $(\\\"#noLoading#\\\").lazyRule(() => {\\n                const apiview = $.require(\\\"Config.view\\\");\\n                const hikerPop = $.require(\\\"https://hikerfans.com/weisyr/js/hikerPop.js\\\");\\n                hikerPop.updateRecordsBottom(apiview._updateData);\\n                return \\\"hiker://empty\\\";\\n            }),\\n            col_type: \\\"avatar\\\"\\n        });\\n        apiview.layout.push({\\n            col_type: \\\"line_blank\\\"\\n        });\\n        apiview.layout.push({\\n            title: \\\"关于作者\\\",\\n            img: $.require(\\\"icon.tool\\\").about,\\n            url: \\\"hiker://page/rules?rule=道长仓库Pro&#noHistory#\\\",\\n            col_type: \\\"avatar\\\",\\n            extra: {\\n                avatarUrl: \\\"http://q1.qlogo.cn/g?b=qq&nk=862347205&s=640\\\",\\n                can_upload: true,\\n                id: 284,\\n                qq: \\\"862347205\\\",\\n                inheritTitle: false\\n            }\\n        });\\n        apiview.layout.push({\\n            title: \\\"支持一下\\\",\\n            img: $.require(\\\"icon.tool\\\").support,\\n            url: $(apiview.empty + \\\"#noHistory##noRecordHistory#\\\").rule(() => {\\n                const apiview = $.require(\\\"Config.view\\\");\\n                apiview._donate_Parse();\\n                setResult(apiview.layout);\\n            }),\\n            col_type: \\\"avatar\\\"\\n        });\\n        apiview.layout.push({\\n            col_type: \\\"line_blank\\\"\\n        });\\n        apiview.layout.push({\\n            title: \\\"免责声明\\\",\\n            img: $.require(\\\"icon.tool\\\").disclaimer,\\n            url: apiview.empty,\\n            col_type: \\\"avatar\\\"\\n        });\\n        apiview.layout.push({\\n            title: `<small>1. 本小程序所有代码全部开源，且本规则为学习目的，请于导入24小时内删除！！！<br>2. 本小程序<b>完全免费</b>，如果你是付费购买的恭喜你被骗了。<br>3. 如果出现底线，请<b>刷新一下</b>也许有东西呢。<br>4. 出现BUG了<b>请录屏</b>发给${apiview.addressTag(\\\"mqqwpa://im/chat?chat_type=wpa&uin=862347205\\\", \\\"作者\\\")}哦<br>5. 不写<b>登录</b>可能会封号！！！<br><b>开始使用本规则即代表遵守规则</b></small>`,\\n            col_type: \\\"rich_text\\\"\\n        });\\n    },\\n    _End_Parse: () => {\\n        apiview.layout.push({\\n            title: apiview.rich(apiview.small(apiview.gray(\\\"～～～我是有底线的～～～\\\"))),\\n            url: apiview.empty,\\n            col_type: \\\"text_center_1\\\"\\n        });\\n    },\\n    _generateTop: () => {\\n        apiview.layout.push({\\n            img: $.require(\\\"icon.tool\\\").top,\\n            url: apiview.empty,\\n            col_type: \\\"pic_1_full\\\"\\n        });\\n    },\\n    _generateEnd: () => {\\n        let tips = \\\"该文章来源于酷安，如您喜欢，请下载APP\\\";\\n        let warning = \\\"此规则仅限学习使用，如有不妥，请本吧主联系我删除\\\";\\n        apiview.layout.push({\\n            title: apiview.center(`${apiview.strong(tips)}<br>${apiview.small(apiview.gray(warning))}`),\\n            col_type: \\\"rich_text\\\"\\n        });\\n    },\\n    _getsMind: () => {\\n        if (MY_PAGE == 1) {\\n            const hikerPop = $.require(\\\"https://hikerfans.com/weisyr/js/hikerPop.js\\\");\\n            if (getMyVar(\\\":updateData\\\", \\\"\\\") == \\\"\\\") {\\n                hikerPop.updateRecordsBottom(apiview._updateData);\\n                putMyVar(\\\":updateData\\\", \\\"true\\\");\\n            };\\n            let time = 15;\\n            let id = Date.now();\\n            apiview.layout.push({\\n                title: apiview.big(apiview.strong(\\\"““使用前须知““\\\")),\\n                col_type: \\\"text_center_1\\\",\\n                url: apiview.empty,\\n                extra: {\\n                    lineVisible: false\\n                }\\n            });\\n            apiview.layout.push({\\n                title: `1. 本小程序所有代码全部开源，且本规则为学习目的，请于导入24小时内删除！！！<br>2. 本小程序<b>完全免费</b>，如果你是付费购买的恭喜你被骗了。<br>当然如果有能力想鼓励作者的可以${\\\"支持一下\\\".link($(apiview.empty + \\\"#noHistory##noRecordHistory#\\\").b64(\\\"\\\").rule(() => {\\n                const apiview = $.require(\\\"Config.view\\\");\\n                apiview._donate_Parse();\\n                setResult(apiview.layout);\\n            }))}<small>(点击可进入捐赠)。</small><br>3. 如果出现底线，请<b>刷新一下</b>也许有东西呢。<br>4. 出现BUG了<b>请录屏</b>发给${apiview.addressTag(\\\"mqqwpa://im/chat?chat_type=wpa&uin=862347205\\\", \\\"作者\\\")}哦<br>5. 不写<b>登录</b>可能会封号！！！<br><br><b>开始使用本规则即代表遵守规则</b><br>当前版本：` + MY_RULE.version,\\n                col_type: \\\"rich_text\\\"\\n            }, {\\n                col_type: \\\"line\\\"\\n            }, {\\n                title: \\\"更新日志\\\",\\n                url: $(\\\"#noLoading#\\\").lazyRule(() => {\\n                    const apiview = $.require(\\\"Config.view\\\");\\n                    const hikerPop = $.require(\\\"https://hikerfans.com/weisyr/js/hikerPop.js\\\");\\n                    hikerPop.updateRecordsBottom(apiview._updateData);\\n                    return \\\"hiker://empty\\\";\\n                }),\\n                col_type: \\\"text_1\\\"\\n            }, {\\n                title: time + \\\"秒后继续\\\",\\n                url: \\\"toast://请认真阅读以上内容\\\",\\n                col_type: \\\"text_center_1\\\",\\n                extra: {\\n                    id: id + \\\"timer\\\"\\n                }\\n            });\\n            setResult(apiview.layout);\\n            while (time != 0) {\\n                java.lang.Thread.sleep(1000);\\n                time -= 1;\\n                updateItem(id + \\\"timer\\\", {\\n                    title: time + \\\"秒后继续\\\"\\n                });\\n            }\\n            updateItem(id + \\\"timer\\\", {\\n                title: \\\"““我同意以上要求““\\\",\\n                url: $(\\\"#noLoading#\\\").lazyRule((v) => {\\n                    setItem(\\\"first\\\", String(v));\\n                    refreshPage();\\n                    return \\\"toast://感谢您的理解\\\";\\n                }, MY_RULE.version),\\n                col_type: \\\"text_center_1\\\"\\n            });\\n        };\\n    },\\n    _donate_Parse: () => {\\n        setPageTitle(\\\"捐赠/支持\\\");\\n        apiview.layout.push({\\n            title: \\\"捐赠/支持\\\",\\n            desc: \\\"这个捐赠不能为你带来特权，但您的支持是我更新创作的动力。\\\",\\n            col_type: \\\"text_center_1\\\",\\n            url: \\\"toast://感谢您的支持\\\"\\n        });\\n        apiview.layout.push({\\n            col_type: \\\"pic_1_full\\\",\\n            url: $.require(\\\"icon.tool\\\").donate,\\n            pic_url: $.require(\\\"icon.tool\\\").donate\\n        });\\n        apiview.layout.push({\\n            col_type: \\\"text_center_1\\\",\\n            title: \\\"““””\\\" + \\\"图片加载缓慢请稍等\\\".small().fontcolor(\\\"Gray\\\"),\\n            url: \\\"hiker://empty\\\",\\n            extra: {\\n                lineVisible: false\\n            }\\n        });\\n    },\\n    _extra_tool: (_, _tab, _tag, _next) => [{\\n        title: `📬${_next ? \\\"关注\\\" : \\\"收藏\\\"}`,\\n        js: $.toString((_, _tab, _tag) => {\\n            const apiview = $.require(\\\"Config.view\\\");\\n            let tooldown = apiview._Get_scription;\\n            let abreak = true;\\n            eval(\\\"ajax_map =\\\" + readFile(tooldown));\\n            ajax_map[MY_RULE.title][_tab].forEach(Item => {\\n                if (Item[_tag] == _[_tag]) {\\n                    toast(\\\"重复了哦\\\");\\n                    abreak = false;\\n                    return;\\n                };\\n            });\\n            if (abreak) {\\n                ajax_map[MY_RULE.title][_tab].push(_);\\n                saveFile(tooldown, JSON.stringify(ajax_map), 0);\\n                toast(\\\"操作成功\\\");\\n            };\\n            return apiview.empty;\\n        }, _, _tab, _tag)\\n    }, {\\n        title: `📭取消${_next ? \\\"关注\\\" : \\\"收藏\\\"}`,\\n        js: $.toString((_, _tab, _tag) => {\\n            const apiview = $.require(\\\"Config.view\\\");\\n            let tooldown = apiview._Get_scription;\\n            let abreak = false;\\n            eval(\\\"ajax_map =\\\" + readFile(tooldown));\\n            ajax_map[MY_RULE.title][_tab].forEach((Item, i) => {\\n                if (Item[_tag] == _[_tag]) {\\n                    tindex = i;\\n                    abreak = true;\\n                    return;\\n                };\\n            });\\n            if (abreak) {\\n                ajax_map[MY_RULE.title][_tab].splice(tindex, 1);\\n                saveFile(tooldown, JSON.stringify(ajax_map), 0);\\n                toast(\\\"操作成功\\\");\\n                refreshPage(false);\\n            } else {\\n                toast(\\\"操作失败\\\");\\n            };\\n            return apiview.empty;\\n        }, _, _tab, _tag)\\n    }, {\\n        title: \\\"⬆️置顶\\\",\\n        js: $.toString((_, _tab, _tag) => {\\n            const apiview = $.require(\\\"Config.view\\\");\\n            let tooldown = apiview._Get_scription;\\n            let abreak = false;\\n            eval(\\\"ajax_map =\\\" + readFile(tooldown));\\n            ajax_map[MY_RULE.title][_tab].forEach(Item => {\\n                if (Item[_tag] == _[_tag]) {\\n                    abreak = true;\\n                    return;\\n                };\\n            });\\n            if (abreak) {\\n                apiview._Position_tool(ajax_map[MY_RULE.title][_tab], _, \\\"top\\\", _tag);\\n                saveFile(tooldown, JSON.stringify(ajax_map), 0);\\n                toast(\\\"操作成功\\\");\\n                refreshPage(false);\\n            } else {\\n                toast(\\\"操作失败\\\");\\n            };\\n            return apiview.empty;\\n        }, _, _tab, _tag)\\n    }, {\\n        title: \\\"⬇️置底\\\",\\n        js: $.toString((_, _tab, _tag) => {\\n            const apiview = $.require(\\\"Config.view\\\");\\n            let tooldown = apiview._Get_scription;\\n            let abreak = false;\\n            eval(\\\"ajax_map =\\\" + readFile(tooldown));\\n            ajax_map[MY_RULE.title][_tab].forEach(Item => {\\n                if (Item[_tag] == _[_tag]) {\\n                    abreak = true;\\n                    return;\\n                };\\n            });\\n            if (abreak) {\\n                apiview._Position_tool(ajax_map[MY_RULE.title][_tab], _, \\\"end\\\", _tag);\\n                saveFile(tooldown, JSON.stringify(ajax_map), 0);\\n                toast(\\\"操作成功\\\");\\n                refreshPage(false);\\n            } else {\\n                toast(\\\"操作失败\\\");\\n            };\\n            return apiview.empty;\\n        }, _, _tab, _tag)\\n    }],\\n    _extraSearch: (it) => [{\\n        title: `删除「${it}」`,\\n        js: $.toString((it) => {\\n            const apiview = $.require(\\\"Config.view\\\");\\n            let mem = storage0.getItem(MY_RULE.title, []);\\n            mem.forEach((_, i) => {\\n                if (_ == it) {\\n                    tindex = i;\\n                    abreak = true;\\n                    return;\\n                };\\n            });\\n            mem.splice(tindex, 1);\\n            storage0.setItem(MY_RULE.title, mem);\\n            toast(\\\"操作成功\\\");\\n            refreshPage(false);\\n            return apiview.empty;\\n        }, it)\\n    }],\\n    _updateData: [{\\n        title: \\\"2024/09/05\\\",\\n        records: [\\n            \\\"‘‘优化’’:页面\\\"\\n        ]\\n    }, {\\n        title: \\\"2024/09/03\\\",\\n        records: [\\n            \\\"““更新””:轮播图UA\\\",\\n            \\\"““更新””:token方法\\\",\\n            \\\"‘‘说明’’:由于酷安不在使用旧版token方法，将使用最新方法，感谢@zetalpha 大佬提供的bcrypt方法\\\"\\n        ]\\n    }, {\\n        title: \\\"2024/08/31\\\",\\n        records: [\\n            \\\"‘‘优化’’:输入框细节\\\"\\n        ]\\n    }, {\\n        title: \\\"2024/08/30\\\",\\n        records: [\\n            \\\"““更新””:设置界面\\\",\\n            \\\"‘‘优化’’:帖子与帖子之间分割线\\\"\\n        ]\\n    }, {\\n        title: \\\"2024/08/22\\\",\\n        records: [\\n            \\\"‘‘优化’’:应用界面\\\"\\n        ]\\n    }, {\\n        title: \\\"2024/08/21\\\",\\n        records: [\\n            \\\"““支持””:textCard\\\"\\n        ]\\n    }, {\\n        title: \\\"2024/08/19\\\",\\n        records: [\\n            \\\"““更新””:hikerPop链接\\\"\\n        ]\\n    }, {\\n        title: \\\"2024/08/17\\\",\\n        records: [\\n            \\\"‘‘优化’’:下载\\\",\\n            \\\"‘‘优化’’:判断链接\\\"\\n        ]\\n    }, {\\n        title: \\\"2024/08/15\\\",\\n        records: [\\n            \\\"‘‘优化’’:帖子详细时间（如：几分钟前）\\\"\\n        ]\\n    }, {\\n        title: \\\"2024/08/11\\\",\\n        records: [\\n            \\\"‘‘优化’’:用户主页显示效果\\\"\\n        ]\\n    }, {\\n        title: \\\"2024/08/10\\\",\\n        records: [\\n            \\\"‘‘优化’’:判断逻辑\\\"\\n        ]\\n    }, {\\n        title: \\\"2024/08/07\\\",\\n        records: [\\n            \\\"‘‘优化’’:给骚粉加个背景色\\\",\\n            \\\"‘‘优化’’:收藏单判断\\\",\\n            \\\"‘‘修复’’:酷品链接\\\"\\n        ]\\n    }, {\\n        title: \\\"2024/08/05\\\",\\n        records: [\\n            \\\"““支持””:看看号\\\",\\n            \\\"““更新””:长按第一排分类可反馈BUG(要录屏哦)\\\",\\n            \\\"‘‘优化’’:细分标签/话题/app，之前的收藏的没了请重新收藏，为后续更好维护\\\"\\n        ]\\n    }, {\\n        title: \\\"2024/08/03\\\",\\n        records: [\\n            \\\"‘‘优化’’:评论切换不再回顶部\\\",\\n            \\\"‘‘优化’’:订阅切换Loading\\\"\\n        ]\\n    }, {\\n        title: \\\"2024/08/02\\\",\\n        records: [\\n            \\\"‘‘优化’’:帖子标签\\\",\\n            \\\"‘‘修复’’:当没搜索到资源时报错\\\",\\n            \\\"‘‘修复’’:逻辑错误导致内容重复....\\\"\\n        ]\\n    }, {\\n        title: \\\"2024/08/01\\\",\\n        records: [\\n            \\\"‘‘优化’’:添加发帖时间\\\",\\n            \\\"‘‘优化’’:头条不显示酷品（部分人认为是广告）\\\"\\n        ]\\n    }, {\\n        title: \\\"2024/07/31\\\",\\n        records: [\\n            \\\"‘‘修复’’:酷品搜索页面无热搜时报错\\\",\\n            \\\"‘‘修复’’:逻辑错误导致内容重复\\\",\\n            \\\"‘‘修复’’:评论无限叠加\\\",\\n            \\\"‘‘修复’’:app页面取关，订阅页无效果\\\",\\n            \\\"‘‘优化’’:由@链接进入用户主页，增加一层渐变美化\\\",\\n            \\\"‘‘优化’’:关注存储在本地过多不必要的数据\\\"\\n        ]\\n    }, {\\n        title: \\\"2024/07/30\\\",\\n        records: [\\n            \\\"““更新””:更新n个内容，就不细细说了\\\"\\n        ]\\n    }, {\\n        title: \\\"2024/07/29\\\",\\n        records: [\\n            \\\"““支持””:话题\\\",\\n\\n            \\\"““支持””:发现=>酷图x5\\\",\\n\\n            \\\"‘‘修复’’:逻辑错误导致无限循环访问链接\\\"\\n        ]\\n    }, {\\n        title: \\\"2024/07/28\\\",\\n        records: [\\n            \\\"““支持””:分类\\\",\\n            \\\"‘‘修复’’:判断页面不准确\\\"\\n        ]\\n    }]\\n}\\n\\n$.exports = apiview;\"},{\"col_type\":\"movie_3\",\"name\":\"图标\",\"path\":\"icon.tool\",\"rule\":\"js:\\n$.exports = {\\n    delete: \\\"https://iconfont.tyrantg.com/api/illustrate.svg?svg_string=%3Csvg%20class%3D%22icon%22%20style%3D%22width%3A%201em%3Bheight%3A%201em%3Bvertical-align%3A%20middle%3Bfill%3A%20currentColor%3Boverflow%3A%20hidden%3B%22%20viewBox%3D%220%200%201024%201024%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M686.08%20921.6h-327.68C268.288%20921.6%20184.32%20837.632%20184.32%20743.424V327.68c0-22.528%2018.432-40.96%2040.96-40.96s40.96%2018.432%2040.96%2040.96v415.744c0%2047.104%2047.104%2096.256%2092.16%2096.256h327.68c45.056%200%2071.68-49.152%2071.68-96.256V327.68c0-22.528%2018.432-40.96%2040.96-40.96s40.96%2018.432%2040.96%2040.96v415.744c0%2088.064-57.344%20178.176-153.6%20178.176z%22%20fill%3D%22%23333333%22%20%2F%3E%3Cpath%20d%3D%22M921.6%20348.16H102.4c-22.528%200-40.96-18.432-40.96-40.96s18.432-40.96%2040.96-40.96h819.2c22.528%200%2040.96%2018.432%2040.96%2040.96s-18.432%2040.96-40.96%2040.96zM757.76%20184.32H266.24c-22.528%200-40.96-18.432-40.96-40.96s18.432-40.96%2040.96-40.96h491.52c22.528%200%2040.96%2018.432%2040.96%2040.96s-18.432%2040.96-40.96%2040.96z%22%20fill%3D%22%23333333%22%20%2F%3E%3Cpath%20d%3D%22M593.92%20716.8c-22.528%200-40.96-18.432-40.96-40.96V430.08c0-22.528%2018.432-40.96%2040.96-40.96s40.96%2018.432%2040.96%2040.96v245.76c0%2022.528-18.432%2040.96-40.96%2040.96zM430.08%20716.8c-22.528%200-40.96-18.432-40.96-40.96V430.08c0-22.528%2018.432-40.96%2040.96-40.96s40.96%2018.432%2040.96%2040.96v245.76c0%2022.528-18.432%2040.96-40.96%2040.96z%22%20fill%3D%22%23E5BD41%22%20%2F%3E%3C%2Fsvg%3E\\\",\\n    tabsearch: \\\"https://iconfont.tyrantg.com/api/illustrate.svg?svg_string=%3Csvg%20class%3D%22icon%22%20style%3D%22width%3A%201em%3Bheight%3A%201em%3Bvertical-align%3A%20middle%3Bfill%3A%20currentColor%3Boverflow%3A%20hidden%3B%22%20viewBox%3D%220%200%201024%201024%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M327.5264%20160H118.8352c-3.7888%200-6.8608%203.584-6.8608%207.9872v204.4928c0%204.4032%203.072%207.9872%206.8608%207.9872h208.6912c3.7376%200%206.8096-3.584%206.8096-7.9872V167.936c0-4.4032-3.072-7.9872-6.8096-7.9872z%20m551.168%20294.4c18.432%200%2033.28%2011.1104%2033.2288%2024.832v359.936c0%2013.7216-14.8992%2024.832-33.28%2024.832H145.2544c-18.432%200-33.28-11.1104-33.28-24.832V479.232c0-13.7216%2014.848-24.832%2033.28-24.832h733.3888z%20m-38.5024%2071.68H183.7056v266.24H840.192v-266.24zM616.2944%20160c3.7888%200%206.8096%203.584%206.8096%207.9872v204.4928c0%204.4032-3.072%207.9872-6.8096%207.9872H407.6032c-3.7376%200-6.8096-3.584-6.8096-7.9872V167.936c0-4.4032%203.072-7.9872%206.8096-7.9872h208.6912z%20m-44.3904%2051.2H451.9936V329.216h119.9104V211.2z%20m333.1584-51.2c3.7888%200%206.8608%203.584%206.8608%207.9872v204.4928c0%204.4032-3.072%207.9872-6.8608%207.9872h-208.6912c-3.7376%200-6.8096-3.584-6.8096-7.9872V167.936c0-4.4032%203.072-7.9872%206.8096-7.9872h208.6912z%20m-44.3904%2051.2h-119.9104V329.216h119.9104V211.2z%22%20%2F%3E%3C%2Fsvg%3E\\\",\\n    hot: \\\"https://iconfont.tyrantg.com/api/illustrate.svg?svg_string=%3Csvg%20class%3D%22icon%22%20style%3D%22width%3A%201em%3Bheight%3A%201em%3Bvertical-align%3A%20middle%3Bfill%3A%20currentColor%3Boverflow%3A%20hidden%3B%22%20viewBox%3D%220%200%201024%201024%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M528.58%20622.07q-17.88%200-28.15%2013.27t-10.28%2034.37q0%2020.82%2010%2034t27.6%2013.29q17.87%200%2027.83-12.67t9.94-34q0-22.31-9.66-35.25t-27.28-13.01z%22%20fill%3D%22%23FF716E%22%20%2F%3E%3Cpath%20d%3D%22M874.24%20586.38C865.3%20486.14%20779%20409.72%20772.85%20311.4c-29.19%2053.77-32.26%2089.1-35.33%20142.87-89.1-110.61-182.81-256.55-161.3-390.19%200%200-170.52%2050.69-239.65%20316.45-43-35.33-39.94-110.61-18.43-155.15C271%20257.91-3.28%20574.56%20257.88%20838.05%20311.82%20891.76%20402.54%20962%20522.43%20959.86h0.67c8.63%200.41%20166.84%202%20294.61-148.69%2059.68-86.17%2064.9-130.88%2056.53-224.79zM433.76%20731.65a9.2%209.2%200%200%201-9.2%209.2h-12a9.2%209.2%200%200%201-9.21-9.2V682h-60.81v49.69a9.2%209.2%200%200%201-9.21%209.2h-12a9.2%209.2%200%200%201-9.2-9.2V605.57a7.45%207.45%200%200%201%207.45-7.45h15.5a7.45%207.45%200%200%201%207.46%207.45v50.14h60.81v-50.14a7.45%207.45%200%200%201%207.46-7.45h15.5a7.45%207.45%200%200%201%207.45%207.45zM578%20722.56q-19.38%2020.78-50.81%2020.78-30.69%200-49.86-20.14t-19.16-51.83q0-33.54%2019.58-54.6t51.74-21q30.6%200%2049.25%2020.36t18.66%2052.34q0.01%2033.31-19.4%2054.09z%20m133.86-105.21a5.65%205.65%200%200%201-5.65%205.65h-35.08v110a7.84%207.84%200%200%201-7.84%207.84h-14.83a7.84%207.84%200%200%201-7.84-7.84V623h-33.44a7.19%207.19%200%200%201-7.19-7.19V605.3a7.18%207.18%200%200%201%207.19-7.18h99a5.64%205.64%200%200%201%205.65%205.64z%22%20fill%3D%22%23FF716E%22%20%2F%3E%3Cpath%20d%3D%22M737.52%20454.27C705.06%20414%20672%20369%20644.11%20321.63%20442.76%20344.42%20286.3%20515.32%20286.3%20722.76a402.15%20402.15%200%200%200%2038.25%20171.73c51.64%2036.33%20118.34%2066.76%20197.88%2065.37h0.67c8.63%200.41%20166.84%202%20294.61-148.69%2059.68-86.23%2064.9-130.89%2056.53-224.8-8.44-94.55-85.68-167.91-99.59-258.44q-4.65-1-9.34-1.87c-22.23%2045.94-25.01%2079.48-27.79%20128.21zM433.76%20731.65a9.2%209.2%200%200%201-9.2%209.2h-12a9.2%209.2%200%200%201-9.21-9.2V682h-60.81v49.69a9.2%209.2%200%200%201-9.21%209.2h-12a9.2%209.2%200%200%201-9.2-9.2V605.57a7.45%207.45%200%200%201%207.45-7.45h15.5a7.45%207.45%200%200%201%207.46%207.45v50.14h60.81v-50.14a7.45%207.45%200%200%201%207.46-7.45h15.5a7.45%207.45%200%200%201%207.45%207.45zM578%20722.56q-19.38%2020.78-50.81%2020.78-30.69%200-49.86-20.14t-19.16-51.83q0-33.54%2019.58-54.6t51.74-21q30.6%200%2049.25%2020.36t18.66%2052.34q0.01%2033.31-19.4%2054.09z%20m133.86-105.21a5.65%205.65%200%200%201-5.65%205.65h-35.08v110a7.84%207.84%200%200%201-7.84%207.84h-14.83a7.84%207.84%200%200%201-7.84-7.84V623h-33.44a7.19%207.19%200%200%201-7.19-7.19V605.3a7.18%207.18%200%200%201%207.19-7.18h99a5.64%205.64%200%200%201%205.65%205.64z%22%20fill%3D%22%23FF5C64%22%20%2F%3E%3Cpath%20d%3D%22M528.58%20622.07q-17.88%200-28.15%2013.27t-10.28%2034.37q0%2020.82%2010%2034t27.6%2013.29q17.87%200%2027.83-12.67t9.94-34q0-22.31-9.66-35.25t-27.28-13.01z%22%20fill%3D%22%23FC4956%22%20%2F%3E%3Cpath%20d%3D%22M874.24%20586.38c-5.84-65.46-44.67-120.77-72.62-178.64a404%20404%200%200%200-61.32%208.36c-1.21%2011.93-2%2024.45-2.78%2038.17Q725.27%20439.06%20713%20423c-137.63%2040-244.93%20151.3-279.24%20291.26v17.39a9.19%209.19%200%200%201-5.43%208.38%20406.31%20406.31%200%200%200%2019.11%20211.62%20299.75%20299.75%200%200%200%2075%208.21h0.67c8.63%200.41%20166.84%202%20294.61-148.69%2059.67-86.17%2064.89-130.88%2056.52-224.79zM578%20722.56q-19.38%2020.78-50.81%2020.78-30.69%200-49.86-20.14t-19.16-51.83q0-33.54%2019.58-54.6t51.74-21q30.6%200%2049.25%2020.36t18.66%2052.34q0.01%2033.31-19.4%2054.09z%20m133.86-105.21a5.65%205.65%200%200%201-5.65%205.65h-35.08v110a7.84%207.84%200%200%201-7.84%207.84h-14.83a7.84%207.84%200%200%201-7.84-7.84V623h-33.44a7.19%207.19%200%200%201-7.19-7.19V605.3a7.18%207.18%200%200%201%207.19-7.18h99a5.64%205.64%200%200%201%205.65%205.64z%22%20fill%3D%22%23FC4956%22%20%2F%3E%3Cpath%20d%3D%22M711.86%20615.36v2a5.65%205.65%200%200%201-5.65%205.65h-1.35a404.54%20404.54%200%200%200-33.73%2043.33V733a7.84%207.84%200%200%201-7.84%207.84h-14.83a7.84%207.84%200%200%201-7.84-7.84v-13a402.12%20402.12%200%200%200-38.29%20171.83A407.43%20407.43%200%200%200%20606.2%20948c59-15.85%20140-52.48%20211.51-136.78%2059.68-86.23%2064.9-130.89%2056.53-224.8-2.18-24.38-8.93-47.34-18-69.55a404.38%20404.38%200%200%200-144.38%2098.49z%22%20fill%3D%22%23F23D4F%22%20%2F%3E%3Cpath%20d%3D%22M604.36%20421.12c0%2013.65-40.9%203.37-91.35%203.52s-91.33%2010.66-91.37-3%2040.81-33.29%2091.26-33.44%2091.42%2019.27%2091.46%2032.92z%22%20fill%3D%22%23FFFFFF%22%20%2F%3E%3C%2Fsvg%3E\\\",\\n    good: \\\"https://iconfont.tyrantg.com/api/illustrate.svg?svg_string=%3Csvg%20class%3D%22icon%22%20style%3D%22width%3A%201em%3Bheight%3A%201em%3Bvertical-align%3A%20middle%3Bfill%3A%20currentColor%3Boverflow%3A%20hidden%3B%22%20viewBox%3D%220%200%201024%201024%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M591.62819%20121.904762c7.68%200%2021.187048%201.633524%2031.524572%204.973714%2050.907429%2016.505905%2080.213333%2070.582857%2068.339809%20124.708572l-1.219047%205.071238-45.372953%20170.179047h179.736381c21.820952%200%2043.398095%208.094476%2058.026667%2024.283429%2016.335238%2018.090667%2022.698667%2042.032762%2017.846857%2065.267809l-1.219047%204.973715-94.768762%20337.432381a59.294476%2059.294476%200%200%201-52.662857%2043.154285l-4.388572%200.146286H268.190476V444.001524c97.084952-21.016381%20239.079619-279.28381%20239.079619-279.28381C527.457524%20137.337905%20551.936%20121.904762%20591.62819%20121.904762zM828.952381%20501.126095c0-0.316952-0.146286-0.512-0.560762-0.975238%200.341333%200.390095-0.975238-0.170667-3.754667-0.170667H549.692952l69.900191-262.217142c5.022476-18.773333-4.144762-36.498286-18.968381-41.301334a52.589714%2052.589714%200%200%200-9.020952-1.414095c-10.922667%200-15.457524%201.26781-21.065143%207.558095l-1.950477%202.29181-9.216%2016.091428-9.874285%2016.700953a1534.683429%201534.683429%200%200%201-72.216381%20110.201905c-28.013714%2038.765714-55.53981%2072.167619-82.553905%2098.816-17.968762%2017.724952-35.59619%2032.49981-53.394286%2043.958857V828.952381h395.605334L828.952381%20501.126095zM121.904762%20438.857143h73.142857v463.238095H121.904762z%22%20%2F%3E%3C%2Fsvg%3E\\\",\\n    discuss: \\\"https://iconfont.tyrantg.com/api/illustrate.svg?svg_string=%3Csvg%20class%3D%22icon%22%20style%3D%22width%3A%201em%3Bheight%3A%201em%3Bvertical-align%3A%20middle%3Bfill%3A%20currentColor%3Boverflow%3A%20hidden%3B%22%20viewBox%3D%220%200%201024%201024%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M731.428571%20268.190476a73.142857%2073.142857%200%200%201%2073.142858%2073.142857v365.714286a73.142857%2073.142857%200%200%201-73.142858%2073.142857H479.47581l-165.376%20114.492953A29.257143%2029.257143%200%200%201%20268.190476%20870.64381V780.190476H170.666667a73.142857%2073.142857%200%200%201-73.142857-73.142857V341.333333a73.142857%2073.142857%200%200%201%2073.142857-73.142857h560.761904z%20m0%2073.142857H170.666667v365.714286h170.666666v79.798857L456.630857%20707.047619H731.428571V341.333333z%20m-285.744761%20219.428572v73.142857H243.809524v-73.142857h201.874286zM853.333333%20146.285714a73.142857%2073.142857%200%200%201%2073.142857%2073.142857v390.095239h-73.142857V219.428571H292.571429V146.285714h560.761904zM585.142857%20414.47619v73.142858H243.809524v-73.142858h341.333333z%22%20%2F%3E%3C%2Fsvg%3E\\\",\\n    share: \\\"https://iconfont.tyrantg.com/api/illustrate.svg?svg_string=%3Csvg%20class%3D%22icon%22%20style%3D%22width%3A%201em%3Bheight%3A%201em%3Bvertical-align%3A%20middle%3Bfill%3A%20currentColor%3Boverflow%3A%20hidden%3B%22%20viewBox%3D%220%200%201024%201024%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M354.986667%20219.428571v73.142858H195.047619v536.380952h585.142857V548.571429h73.142857V828.952381a73.142857%2073.142857%200%200%201-73.142857%2073.142857H195.047619a73.142857%2073.142857%200%200%201-73.142857-73.142857V292.571429a73.142857%2073.142857%200%200%201%2073.142857-73.142858h159.939048z%20m383.829333-100.473904l172.397714%20172.373333-181.00419%20181.028571-51.736381-51.712L757.784381%20341.333333H670.47619c-139.068952%200-252.245333%20110.884571-255.902476%20249.07581L414.47619%20597.333333v97.52381h-73.142857v-97.52381C341.333333%20415.548952%20488.69181%20268.190476%20670.47619%20268.190476h114.127239l-97.499429-97.523809%2051.712-51.712z%22%20%2F%3E%3C%2Fsvg%3E\\\",\\n    replysort: \\\"https://iconfont.tyrantg.com/api/illustrate.svg?svg_string=%3Csvg%20class%3D%22icon%22%20style%3D%22width%3A%201em%3Bheight%3A%201em%3Bvertical-align%3A%20middle%3Bfill%3A%20currentColor%3Boverflow%3A%20hidden%3B%22%20viewBox%3D%220%200%201024%201024%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M146.285714%20609.52381h121.904762v243.809523H146.285714z%20m195.047619-195.04762h121.904762v438.857143h-121.904762z%20m195.047619%2048.761905h121.904762v390.095238h-121.904762z%20m195.047619-292.571428h121.904762v682.666666h-121.904762z%22%20%2F%3E%3C%2Fsvg%3E\\\",\\n    application: \\\"https://iconfont.tyrantg.com/api/illustrate.svg?svg_string=%3Csvg%20class%3D%22icon%22%20style%3D%22width%3A%201em%3Bheight%3A%201em%3Bvertical-align%3A%20middle%3Bfill%3A%20currentColor%3Boverflow%3A%20hidden%3B%22%20viewBox%3D%220%200%201024%201024%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M512%20512m-512%200a512%20512%200%201%200%201024%200%20512%20512%200%201%200-1024%200Z%22%20fill%3D%22%23B2DB48%22%20%2F%3E%3Cpath%20d%3D%22M252.586667%20301.397333c0-26.965333%2021.942857-48.810667%2048.810666-48.810666h149.455238c26.940952%200%2048.786286%2021.942857%2048.786286%2048.810666v149.455238c0%2026.940952-21.918476%2048.786286-48.810667%2048.786286h-149.430857c-26.965333%200-48.810667-21.918476-48.810666-48.810667v-149.430857z%20m0%20285.42781c0-26.965333%2021.942857-48.810667%2048.810666-48.810667h149.455238c26.940952%200%2048.786286%2021.918476%2048.786286%2048.810667v149.430857c0%2026.965333-21.918476%2048.810667-48.810667%2048.810667h-149.430857c-26.965333%200-48.810667-21.942857-48.810666-48.810667v-149.455238z%20m285.427809-285.42781c0-26.965333%2021.918476-48.810667%2048.810667-48.810666h149.430857c26.965333%200%2048.810667%2021.942857%2048.810667%2048.810666v149.455238c0%2026.940952-21.942857%2048.786286-48.810667%2048.786286h-149.455238c-26.940952%200-48.786286-21.918476-48.786286-48.810667v-149.430857z%20m0%20285.42781c0-26.965333%2021.918476-48.810667%2048.810667-48.810667h149.430857c26.965333%200%2048.810667%2021.918476%2048.810667%2048.810667v149.430857c0%2026.965333-21.942857%2048.810667-48.810667%2048.810667h-149.455238c-26.940952%200-48.786286-21.942857-48.786286-48.810667v-149.455238z%22%20fill%3D%22%23FFFFFF%22%20%2F%3E%3C%2Fsvg%3E\\\",\\n    post: \\\"https://iconfont.tyrantg.com/api/illustrate.svg?svg_string=%3Csvg%20class%3D%22icon%22%20style%3D%22width%3A%201em%3Bheight%3A%201em%3Bvertical-align%3A%20middle%3Bfill%3A%20currentColor%3Boverflow%3A%20hidden%3B%22%20viewBox%3D%220%200%201024%201024%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M700.42889122%20483.67495251h-77.14260619v-85.78906382h77.14260619a8.06920734%208.06920734%200%200%200%208.59732945-8.59732946v-17.09640253a8.06920734%208.06920734%200%200%200-8.59732945-8.59732945h-77.14260619V320.76784659a8.06920734%208.06920734%200%200%200-8.59732945-8.59732945h-17.09640253a8.06920734%208.06920734%200%200%200-8.59732946%208.59732945v162.90710592h-25.65688682a8.06920734%208.06920734%200%200%200-8.59732847%208.59732847v171.45530817a8.08148939%208.08148939%200%200%200%208.59732847%208.59732847h94.27585584a51.58397475%2051.58397475%200%200%200%2051.4488742-51.46115526V492.23543583a8.16746273%208.16746273%200%200%200-8.63417559-8.56048332z%20m-25.69373199%20137.16424575a17.19465792%2017.19465792%200%200%201-17.12096662%2017.13324868h-63.43600725c-3.41436769%200-5.14611563-1.74402998-5.14611563-5.15839768v-109.73876582c0-3.40208564%201.73174794-5.14611563%205.14611563-5.14611563h75.41085825c3.40208564%200%205.14611563%201.74402998%205.14611562%205.14611563zM513.5475192%20637.97244694c-6.89014561-1.74402998-17.13324867-6.82873538-32.58387759-17.13324868-32.58387759-25.69373198-30.85212966-51.4488742-30.85212966-51.4488742V389.32540537a8.06920734%208.06920734%200%200%200-8.59732945-8.59732945h-17.09640253a8.06920734%208.06920734%200%200%200-8.59732945%208.59732945l-1.74402999%20180.06491869s0%2034.31562553-24.01111223%2053.11921191c-13.71888098%208.59732945-27.43776197%2013.71888098-34.38931683%2015.46291097a7.36913953%207.36913953%200%200%200-6.89014463%206.8901456v17.12096663c0%205.15839767%205.15839767%208.59732945%2010.3045133%208.59732945%2011.974851-1.74402998%2030.85212966-5.15839767%2042.90067195-13.71888098%2027.42547992-17.19465792%2032.58387759-34.38931683%2032.5838776-34.38931683s5.14611563%2015.46291097%2034.32790758%2032.58387759c15.46291097%2010.3045133%2030.83984761%2013.71888098%2041.1443609%2013.71888099%205.15839767%200%2010.31679534-3.41436769%2010.31679535-8.59732945v-17.05955738c0.08597334-1.73174794-3.35295844-3.41436769-6.81645432-5.14611562z%22%20fill%3D%22%231296db%22%20%2F%3E%3Cpath%20d%3D%22M511.45959683%203.30532523C237.65922645%203.30532523%2014.96383691%20222.03366187%208.54040317%20494.28651305V518.50641712c6.42343275%20272.24056912%20229.1188223%20490.96890577%20502.91919366%20490.96890577%20277.84111556%200%20503.06657527-225.22546069%20503.06657526-503.06657625S789.30071141%203.30532523%20511.45959683%203.30532523zM808.09201672%20677.59385273a78.29710481%2078.29710481%200%200%201-78.30938686%2078.30938686H367.60171527l-121.06267622%2066.03976969V305.71023825A78.29710481%2078.29710481%200%200%201%20324.84842591%20227.42541548h404.97105009A78.28482277%2078.28482277%200%200%201%20808.09201672%20305.71023825z%22%20fill%3D%22%231296db%22%20%2F%3E%3Cpath%20d%3D%22M357.5059948%20586.51129069h17.13324867a8.08148939%208.08148939%200%200%200%208.59732945-8.59732847V353.32716009a7.36913953%207.36913953%200%200%201%206.90242667-6.90242765h89.19114947a7.36913953%207.36913953%200%200%201%206.81645432%206.90242765V577.95080737a8.08148939%208.08148939%200%200%200%208.59732846%208.59732946h17.12096761a8.08148939%208.08148939%200%200%200%208.59732847-8.59732946V329.36517506a17.09640352%2017.09640352%200%200%200-17.21922201-17.19465792h-102.83633818c-29.18179195%200-51.46115625%2022.2793643-51.46115625%2051.4488742V577.95080737a8.08148939%208.08148939%200%200%200%208.56048332%208.56048332z%22%20fill%3D%22%231296db%22%20%2F%3E%3C%2Fsvg%3E\\\",\\n    number: \\\"https://iconfont.tyrantg.com/api/illustrate.svg?svg_string=%3Csvg%20class%3D%22icon%22%20style%3D%22width%3A%201em%3Bheight%3A%201em%3Bvertical-align%3A%20middle%3Bfill%3A%20currentColor%3Boverflow%3A%20hidden%3B%22%20viewBox%3D%220%200%201024%201024%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M896%20224H128c-35.2%200-64%2028.8-64%2064v448c0%2035.2%2028.8%2064%2064%2064h768c35.2%200%2064-28.8%2064-64V288c0-35.2-28.8-64-64-64z%20m0%20480c0%2019.2-12.8%2032-32%2032H160c-19.2%200-32-12.8-32-32V320c0-19.2%2012.8-32%2032-32h704c19.2%200%2032%2012.8%2032%2032v384z%22%20fill%3D%22%23333333%22%20%2F%3E%3Cpath%20d%3D%22M291.2%20412.8c-12.8%206.4-22.4%2012.8-35.2%2016v41.6c22.4-6.4%2041.6-16%2054.4-28.8V640h38.4V393.6H320c-6.4%203.2-19.2%2012.8-28.8%2019.2zM489.6%20560c22.4-16%2041.6-28.8%2048-38.4%2016-16%2022.4-38.4%2022.4-57.6%200-22.4-6.4-38.4-22.4-54.4-16-12.8-35.2-19.2-57.6-19.2-25.6%200-48%209.6-60.8%2025.6-16%2016-22.4%2038.4-22.4%2067.2h38.4c0-19.2%203.2-35.2%2012.8-44.8%206.4-9.6%2019.2-16%2032-16s25.6%203.2%2032%209.6c6.4%206.4%209.6%2016%209.6%2028.8s-6.4%2025.6-16%2038.4c-6.4%206.4-16%2016-32%2028.8-28.8%2019.2-44.8%2035.2-54.4%2044.8-16%2019.2-22.4%2041.6-22.4%2064h166.4v-35.2H444.8c6.4-12.8%2022.4-25.6%2044.8-41.6z%20m233.6-54.4c25.6-9.6%2038.4-25.6%2038.4-54.4%200-22.4-6.4-38.4-22.4-51.2-16-12.8-35.2-19.2-57.6-19.2S640%20387.2%20624%20400c-16%2012.8-25.6%2032-25.6%2057.6h38.4c0-16%206.4-25.6%2012.8-32%206.4-6.4%2019.2-9.6%2032-9.6s25.6%203.2%2032%209.6c6.4%206.4%209.6%2016%209.6%2028.8s-3.2%2022.4-9.6%2028.8c-6.4%206.4-19.2%209.6-32%209.6h-16v28.8h16c16%200%2025.6%203.2%2035.2%209.6%209.6%206.4%2012.8%2016%2012.8%2032%200%2012.8-3.2%2022.4-12.8%2028.8-9.6%209.6-19.2%2012.8-35.2%2012.8-12.8%200-25.6-3.2-32-12.8-9.6-9.6-12.8-22.4-16-38.4h-38.4c3.2%2028.8%2012.8%2048%2028.8%2064%2016%2012.8%2035.2%2019.2%2060.8%2019.2%2025.6%200%2048-6.4%2064-22.4%2016-16%2022.4-32%2022.4-54.4%200-16-3.2-25.6-12.8-35.2-9.6-6.4-22.4-16-35.2-19.2z%22%20fill%3D%22%23333333%22%20%2F%3E%3C%2Fsvg%3E\\\",\\n    disclaimer: \\\"https://iconfont.tyrantg.com/api/illustrate.svg?svg_string=%3Csvg%20class%3D%22icon%22%20style%3D%22width%3A%201em%3Bheight%3A%201em%3Bvertical-align%3A%20middle%3Bfill%3A%20currentColor%3Boverflow%3A%20hidden%3B%22%20viewBox%3D%220%200%201024%201024%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M512%20512m-470.373984%200a470.373984%20470.373984%200%201%200%20940.747968%200%20470.373984%20470.373984%200%201%200-940.747968%200Z%22%20fill%3D%22%23EB8A98%22%20%2F%3E%3Cpath%20d%3D%22M499.512195%20491.186992m-391.284553%200a391.284553%20391.284553%200%201%200%20782.569106%200%20391.284553%20391.284553%200%201%200-782.569106%200Z%22%20fill%3D%22%23FF96A5%22%20%2F%3E%3Cpath%20d%3D%22M512%2062.439024c247.891252%200%20449.560976%20201.673886%20449.560976%20449.560976%200%20247.891252-201.669724%20449.560976-449.560976%20449.560976-247.887089%200-449.560976-201.669724-449.560976-449.560976C62.439024%20264.112911%20264.112911%2062.439024%20512%2062.439024zM20.813008%20512c0%20270.835512%20220.347317%20491.186992%20491.186992%20491.186992%20270.835512%200%20491.186992-220.35148%20491.186992-491.186992C1003.186992%20241.160325%20782.835512%2020.813008%20512%2020.813008%20241.160325%2020.813008%2020.813008%20241.160325%2020.813008%20512z%22%20fill%3D%22%236E6E96%22%20%2F%3E%3Cpath%20d%3D%22M470.711154%20299.803057v235.291057a34.899252%2034.899252%200%200%200%2069.802667%200V299.803057c0-19.277008-15.626407-34.899252-34.903414-34.899252s-34.899252%2015.626407-34.899253%2034.899252zM470.711154%20651.942504v36.510179a34.903415%2034.903415%200%200%200%2069.802667%200v-36.510179a34.907577%2034.907577%200%200%200-69.802667%200z%22%20fill%3D%22%236E6E96%22%20%2F%3E%3C%2Fsvg%3E\\\",\\n    logs: \\\"https://iconfont.tyrantg.com/api/illustrate.svg?svg_string=%3Csvg%20class%3D%22icon%22%20style%3D%22width%3A%201em%3Bheight%3A%201em%3Bvertical-align%3A%20middle%3Bfill%3A%20currentColor%3Boverflow%3A%20hidden%3B%22%20viewBox%3D%220%200%201024%201024%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M726.9%20267.7H297.1c-16.2%200-29.4%2013.2-29.4%2029.4V727c0%2016.2%2013.2%2029.4%2029.4%2029.4H727c16.2%200%2029.4-13.2%2029.4-29.4V297.1c-0.1-16.2-13.2-29.4-29.5-29.4z%20m-370%2070.5h148c11.9%200%2021.6%209.6%2021.6%2021.6%200%2011.9-9.6%2021.6-21.6%2021.6h-148c-11.9%200-21.6-9.6-21.6-21.6%200-12%209.6-21.6%2021.6-21.6z%20m-21.6%20224.6c0-11.9%209.6-21.6%2021.6-21.6h245.7c11.9%200%2021.6%209.6%2021.6%2021.6%200%2011.9-9.7%2021.6-21.6%2021.6H356.9c-12-0.1-21.6-9.7-21.6-21.6z%20m331.8%20123H504.8c-11.9%200-21.6-9.6-21.6-21.6%200-11.9%209.6-21.6%2021.6-21.6h162.3c11.9%200%2021.6%209.6%2021.6%2021.6%200%2012-9.6%2021.6-21.6%2021.6z%20m0-202.9H421.4c-11.9%200-21.6-9.6-21.6-21.6s9.6-21.6%2021.6-21.6h245.7c11.9%200%2021.6%209.6%2021.6%2021.6%200%2011.9-9.6%2021.6-21.6%2021.6z%22%20fill%3D%22%23F5CF5D%22%20%2F%3E%3Cpath%20d%3D%22M512%200C229.2%200%200%20229.2%200%20512s229.2%20512%20512%20512%20512-229.2%20512-512S794.8%200%20512%200z%20m287.4%20726.9c0%2040-32.5%2072.5-72.5%2072.5H297.1c-40%200-72.5-32.5-72.5-72.5V297.1c0-40%2032.5-72.5%2072.5-72.5H727c40%200%2072.5%2032.5%2072.5%2072.5v429.8z%22%20fill%3D%22%23F5CF5D%22%20%2F%3E%3C%2Fsvg%3E\\\",\\n    about: \\\"https://iconfont.tyrantg.com/api/illustrate.svg?svg_string=%3Csvg%20class%3D%22icon%22%20style%3D%22width%3A%201em%3Bheight%3A%201em%3Bvertical-align%3A%20middle%3Bfill%3A%20currentColor%3Boverflow%3A%20hidden%3B%22%20viewBox%3D%220%200%201024%201024%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M881.6%20512.1c0%20203.7-165.7%20369.5-369.5%20369.5S142.6%20715.8%20142.6%20512.1s165.7-369.5%20369.5-369.5%20369.5%20165.8%20369.5%20369.5m77.7%200c0-246.6-200.6-447.2-447.2-447.2S64.9%20265.5%2064.9%20512.1s200.6%20447.2%20447.2%20447.2%20447.2-200.6%20447.2-447.2M582.5%20318.2c9-9%2014.2-21.6%2014.2-34.3%200-12.8-5.2-25.4-14.2-34.4s-21.6-14.2-34.4-14.2c-12.7%200-25.3%205.2-34.3%2014.2-9.1%209-14.3%2021.6-14.3%2034.4%200%2012.7%205.2%2025.3%2014.3%2034.3%209%209%2021.5%2014.3%2034.3%2014.3s25.3-5.3%2034.4-14.3m-96.6%20464.3c-7.6%200-15.2-2.6-21.3-7.5-9.9-7.9-14.5-20.7-12.1-33.1l47.9-243.1-26.4%2014.8c-16.4%209.2-37.1%203.4-46.3-13-9.2-16.4-3.4-37.1%2012.9-46.3l90.7-51.1c11.6-6.5%2025.9-5.7%2036.6%202.1%2010.8%207.8%2016%2021.1%2013.4%2034.1l-49.6%20251.9%2040.7-17.7c17.2-7.5%2037.3%200.4%2044.8%2017.6%207.5%2017.2-0.4%2037.3-17.6%2044.8l-100.2%2043.7c-4.3%201.9-8.9%202.8-13.5%202.8%22%20%2F%3E%3C%2Fsvg%3E\\\",\\n    support: \\\"https://iconfont.tyrantg.com/api/illustrate.svg?svg_string=%3Csvg%20class%3D%22icon%22%20style%3D%22width%3A%201em%3Bheight%3A%201em%3Bvertical-align%3A%20middle%3Bfill%3A%20currentColor%3Boverflow%3A%20hidden%3B%22%20viewBox%3D%220%200%201024%201024%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M720.1%20346.5m-93%200a93%2093%200%201%200%20186%200%2093%2093%200%201%200-186%200Z%22%20fill%3D%22%23F76260%22%20%2F%3E%3Cpath%20d%3D%22M719.9%20382.3m-7.2%200a7.2%207.2%200%201%200%2014.4%200%207.2%207.2%200%201%200-14.4%200Z%22%20fill%3D%22%23FFFFFF%22%20%2F%3E%3Cpath%20d%3D%22M713.1%20303.5h14l-2.7%2062.8h-9.2%22%20fill%3D%22%23FFFFFF%22%20%2F%3E%3Cpath%20d%3D%22M719.9%20632.5m-93%200a93%2093%200%201%200%20186%200%2093%2093%200%201%200-186%200Z%22%20fill%3D%22%2310AEFF%22%20%2F%3E%3Cpath%20d%3D%22M719.9%20593.9m-8.3%200a8.3%208.3%200%201%200%2016.6%200%208.3%208.3%200%201%200-16.6%200Z%22%20fill%3D%22%23FFFFFF%22%20%2F%3E%3Cpath%20d%3D%22M713.9%20611.3h12l-1.1%2067.2H715%22%20fill%3D%22%23FFFFFF%22%20%2F%3E%3Cpath%20d%3D%22M511.3%20512.2m-448%200a448%20448%200%201%200%20896%200%20448%20448%200%201%200-896%200Z%22%20fill%3D%22%2309BB07%22%20%2F%3E%3Cpath%20d%3D%22M312.2%20503.8l-26.4%2032.8%20153.7%20160.3%20324.2-319.7-26-26.4-298%20251z%22%20fill%3D%22%23FFFFFF%22%20%2F%3E%3C%2Fsvg%3E\\\",\\n    bug: \\\"https://iconfont.tyrantg.com/api/illustrate.svg?svg_string=%3Csvg%20class%3D%22icon%22%20style%3D%22width%3A%201em%3Bheight%3A%201em%3Bvertical-align%3A%20middle%3Bfill%3A%20currentColor%3Boverflow%3A%20hidden%3B%22%20viewBox%3D%220%200%201024%201024%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M512%20512m-512%200a512%20512%200%201%200%201024%200%20512%20512%200%201%200-1024%200Z%22%20fill%3D%22%23FF3E3E%22%20%2F%3E%3Cpath%20d%3D%22M353.166222%20240.207644h119.876267v82.7392H353.166222v-82.7392z%20m94.754134%2059.528534v-36.590934h-69.358934v36.590934h69.358934z%20m-103.2192%2044.2368h137.352533v23.483733h-57.344v28.398933h48.878933v23.210667h-48.878933v30.3104h63.8976v24.576h-154.282667v-24.576h64.170667v-30.3104h-47.5136v-23.210667h47.5136v-28.398933h-53.794133v-23.483733z%20m-102.126934-40.1408h37.6832V270.791111c-12.743111%201.6384-23.483733%202.912711-32.221866%203.822933L242.847289%20250.311111c32.950044-2.730667%2063.0784-8.283022%2090.385067-16.657067l9.0112%2024.576c-10.922667%203.094756-23.301689%205.916444-37.137067%208.465067v37.137067h31.402667v24.849066h-31.402667v11.4688c10.376533%209.8304%2022.755556%2022.482489%2037.137067%2037.956267l-14.472534%2021.845333a816.036978%20816.036978%200%200%200-22.664533-35.2256v117.418667h-24.849067v-113.8688a281.304178%20281.304178%200%200%201-33.041066%2063.351467l-11.4688-28.945067a202.069333%20202.069333%200%200%200%2041.506133-74.001067H242.574222v-24.849066z%20m431.263289-74.274134c4.187022%208.374044%207.554844%2015.746844%2010.103467%2022.1184h97.211733v24.029867h-199.338667v63.624533c-1.092267%2060.074667-10.740622%20108.043378-28.945066%20143.906134l-19.6608-17.476267c14.7456-30.401422%2022.391467-72.544711%2022.9376-126.429867V251.676444h101.307733a146.614044%20146.614044%200%200%200-9.8304-17.749333l26.2144-4.369067z%20m-26.2144%2093.3888a539.989333%20539.989333%200%200%201%2034.952533%2019.387734%20267.605333%20267.605333%200%200%200%2039.594667-27.579734h-115.780267v-22.1184h148.2752v18.568534a288.039822%20288.039822%200%200%201-52.974933%2043.690666l9.0112%206.5536-3.549867%203.549867h69.905067v20.206933c-11.4688%2021.2992-23.938844%2038.957511-37.410133%2052.974934l-19.387734-15.5648a169.710933%20169.710933%200%200%200%2028.672-33.860267h-54.613333v67.447467c0%2018.386489-9.0112%2027.579733-27.0336%2027.579733h-40.686933l-5.461334-24.576c15.291733%201.274311%2027.761778%201.911467%2037.410134%201.911467%206.735644%200%2010.103467-3.640889%2010.103466-10.922667v-61.44h-78.097066V364.999111h89.565866a452.039111%20452.039111%200%200%200-47.786666-27.0336l15.291733-15.018667zM266.695111%20574.896356h28.945067v78.6432c11.4688-16.566044%2025.850311-24.849067%2043.144533-24.849067%2020.206933%200%2036.135822%207.3728%2047.786667%2022.1184%2010.740622%2013.835378%2016.110933%2031.038578%2016.110933%2051.6096%200%2021.663289-5.461333%2039.3216-16.384%2052.974933-12.014933%2014.7456-28.307911%2022.1184-48.878933%2022.1184-19.114667%200-33.678222-6.917689-43.690667-20.753066V773.688889H266.695111v-198.792533z%20m65.536%2077.277866c-11.104711%200-19.842844%204.278044-26.2144%2012.834134-7.463822%209.102222-11.195733%2021.390222-11.195733%2036.864v2.4576c0%2014.017422%203.003733%2025.577244%209.0112%2034.679466%206.917689%2010.012444%2016.657067%2015.018667%2029.218133%2015.018667%2014.017422%200%2024.484978-5.097244%2031.402667-15.291733%205.643378-9.102222%208.465067-21.208178%208.465066-36.317867%200-15.655822-3.003733-27.579733-9.0112-35.771733-6.735644-9.648356-17.294222-14.472533-31.675733-14.472534z%20m120.513422-19.6608h28.945067v86.016c0%2012.196978%202.548622%2020.935111%207.645867%2026.2144%205.097244%205.643378%2013.198222%208.465067%2024.302933%208.465067%207.281778%200%2014.290489-3.094756%2021.026133-9.284267%206.5536-6.371556%2011.104711-14.7456%2013.653334-25.122133v-86.289067h28.945066V773.688889h-28.945066v-19.114667c-12.014933%2015.291733-26.851556%2022.9376-44.509867%2022.9376-34.042311%200-51.063467-19.023644-51.063467-57.070933v-87.927467z%20m239.024356-3.822933c18.568533%200%2032.950044%207.554844%2043.144533%2022.664533v-18.8416h28.945067v131.8912c0%2044.782933-21.936356%2067.1744-65.809067%2067.1744-19.478756%200-34.497422-3.731911-45.056-11.195733-10.194489-7.463822-16.657067-19.023644-19.387733-34.679467h28.945067c1.6384%208.374044%205.097244%2014.290489%2010.376533%2017.749334%205.461333%203.458844%2013.835378%205.188267%2025.122133%205.188266%2024.576%200%2036.864-13.289244%2036.864-39.867733v-21.845333c-10.376533%2015.655822-24.758044%2023.483733-43.144533%2023.483733-19.114667%200-34.588444-6.462578-46.421333-19.387733-11.832889-12.561067-17.749333-29.582222-17.749334-51.063467%200-21.2992%205.916444-38.411378%2017.749334-51.336533%2011.650844-13.289244%2027.124622-19.933867%2046.421333-19.933867z%20m4.369067%2023.483733c-12.561067%200-22.027378%204.278044-28.398934%2012.834134-6.917689%208.009956-10.376533%2019.6608-10.376533%2034.952533%200%2013.653333%202.730667%2024.484978%208.192%2032.494933%206.371556%209.466311%2016.566044%2014.199467%2030.583467%2014.199467%2012.196978%200%2021.845333-4.096%2028.945066-12.288%206.735644-8.738133%2010.103467-20.206933%2010.103467-34.4064%200-14.563556-3.367822-26.2144-10.103467-34.952533-6.917689-8.556089-16.566044-12.834133-28.945066-12.834134z%22%20fill%3D%22%23FFFFFF%22%20%2F%3E%3C%2Fsvg%3E\\\",\\n    donate: \\\"https://s2.loli.net/2024/07/28/FwqQiWtNr1uPIGK.png\\\",\\n    top: \\\"https://hikerfans.com/img/top.png\\\",\\n    on: \\\"https://hikerfans.com/tubiao/messy/55.svg\\\",\\n    off: \\\"https://hikerfans.com/tubiao/messy/63.svg\\\"\\n};\"},{\"col_type\":\"movie_3\",\"name\":\"轮播页面\",\"path\":\"Carousel.view\",\"rule\":\"js:\\n(function() {\\n    const apiview = $.require(\\\"Config.view\\\");\\n    let array = decodeURIComponent(getParam(\\\"array\\\"));\\n    eval(\\\"array =\\\" + array);\\n    apiview._layoutLinkRuleParse(array);\\n    setResult(apiview.layout);\\n})();\"}]","proxy":"","icon":"https://static.coolapk.com/static/web/v8/images/header-logo.png"},{"last_chapter_rule":"","pageList":[{"col_type":"movie_3","name":"页面","path":"config.html","rule":"const empty = 'hiker://empty'\nconst page = MY_PAGE;\n\nconst Color = (test) => {\n    return '<font color=\"#FA7298\">' + test + '</front>';\n}\n\nconst SpringGreen = (test) => {\n    return '<font color=\"#3CB371\">' + test + '</front>';\n}\n\nconst Strong = (test) => {\n    return '<strong>' + test + '</strong>';\n}\n\nconst Small = (test) => {\n    return '<small>' + test + '</small>';\n}\n\nconst Center = (test) => {\n    return \"<h4 style='text-align:center'>\" + test + \"</h4>\"\n}\n\nconst Big = (test) => {\n    return '<b><font color=#000>' + test + '</font></b>'\n}\n\nconst Gray = (test) => {\n    return \"<font color='gray'>\" + test + \"</font>\";\n}\n\nconst Rich = (test) => {\n    return \"‘‘’’\" + test;\n}\n\nconst getFormat = (oldTime) => {\n    const add0 = (m) => {\n        return m < 10 ? '0' + m : m\n    }\n    let time = new Date(oldTime);\n    let y = time.getFullYear();\n    let m = time.getMonth() + 1;\n    let d = time.getDate();\n    let h = time.getHours();\n    let mm = time.getMinutes();\n    let s = time.getSeconds();\n    return y + '-' + add0(m) + '-' + add0(d) + ' ' + add0(h) + ':' + add0(mm) + ':' + add0(s);\n}\n\nif (!getMyVar('UUID')) {\n    const generateUUID = () => {\n        let d = new Date().getTime()\n        let uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n            let r = (d + Math.random() * 16) % 16 | 0 d = Math.floor(d / 16)\n            return (c == 'x' ? r : (r & 0x3 | 0x8)).toString(36)\n        })\n        return uuid\n    }\n    putMyVar('UUID', generateUUID())\n}\n\nconst getSearchUrl = (kw, empty) => {\n    let mem = storage0.getItem(\"葫芦侠\", []);\n    mem = mem.filter(it => it != kw);\n    if (mem.length >= 10) {\n        mem = mem.slice(1);\n    }\n    mem.push(kw);\n    storage0.setItem(\"葫芦侠\", mem);\n    return empty;\n};\n\nif (!getMyVar('域名')) {\n    域名 = 'http://floor.huluxia.com'\n    putMyVar('域名', 域名)\n}\n\nconst getConfigUrl = (path, body) => {\n    path = getMyVar('域名') + path\n    body = '?platform=2&gkey=000000&app_version=4.2.0.1&versioncode=20141465&market_id=floor_baidu&_key=' + getItem('葫芦侠TOKEN', '') + '&device_code=%5Bw%5D02%3A00%3A00%3A00%3A00%3A00-%5Bi%5DA00000A49D3B6A-%5Bs%5D898602A51317F3030582&phone_brand_type=OP' + body\n    return JSON.parse(request(path + body, {\n        headers: {\n            'User-Agent': 'okhttp/3.8.1'\n        }\n    }))\n}\n\nconst loginConfigUrl = (path, body) => {\n    path = getMyVar('域名') + path + '?platform=2&gkey=000000&app_version=4.2.0.1&versioncode=20141465&market_id=floor_baidu&_key=&device_code=%5Bd%5D' + getMyVar('UUID') + '&phone_brand_type=UN'\n    return JSON.parse(request(path, {\n        headers: {\n            'User-Agent': 'okhttp/3.8.1'\n        },\n        body: body,\n        method: 'POST'\n    }))\n}\n\nconst RegExpParse = (text) => {\n    centers = text\n        .replace(/<text>|<\\/text>/g, '')\n        .replace(/\\n/g, '<br>')\n        .replace(/<image>(.*?),.*?<\\/image>/g, '<img src=\"$1\">')\n        .replace(/([^\"])(http[^<\\s\"]+)/g, '$1<a href=\"$2\">$2</a>')\n    return centers\n}\n\nconst getConfirm = () => {\n    confirm({\n        title: \"清除记录\",\n        content: \"确定好了吗？记录将会不复存在~\",\n        confirm: () => {\n            clearItem(\"葫芦侠\");\n            refreshPage();\n            toast('清除成功~');\n        }\n    })\n}\n\nconst getIconSearch = (d) => {\n    d.push({\n        title: \"请输入帖子名称/关键词\",\n        url: $(empty + 'fypage' + '#noHistory##noRecordHistory#').rule(() => {\n            const d = [];\n            require(\"hiker://page/config.html\")\n            if (getItem('葫芦侠TOKEN', '') == '') {\n                getLoginParse(d)\n            } else {\n                getSearchParse(d)\n            }\n            setResult(d)\n        }),\n        col_type: \"icon_1_search\"\n    })\n}\n\nconst time = new Date().getTime()\n\nif (Number(time - getItem('葫芦侠TOKEN-Time', '0')) > 259200000) {\n    setItem('葫芦侠TOKEN-Time', '' + time + '')\n    clearItem('葫芦侠TOKEN')\n}\n\nconst getLoginUrl = () => {\n    account = getItem('葫芦侠账号')\n    password = md5(getItem('葫芦侠密码'))\n    sign = 'account' + account + 'device_code[d]' + getMyVar('UUID') + 'password' + password + 'voice_codefa1c28a5b62e79c3e63d9030b6142e4b'\n    path = '/account/login/ANDROID/4.1.8'\n    body = 'account=' + account + '&login_type=2&password=' + password + '&sign=' + md5(sign).toUpperCase()\n    data = loginConfigUrl(path, body)\n    if (data._key != null) {\n        avatar = data.user.avatar\n        nick = data.user.nick\n        setItem('葫芦侠avatar', avatar)\n        setItem('葫芦侠nick', nick)\n        token = data._key\n        setItem('葫芦侠TOKEN', token)\n        refreshPage()\n        toast(\"登录成功\")\n    } else {\n        clearItem(\"葫芦侠账号\")\n        clearItem(\"葫芦侠密码\")\n        toast(data.msg)\n    }\n    return empty\n}\n\nconst getBaseParse = () => {\n    let iTag = getMyVar(\":iTag\", \"\");\n    if (iTag) {\n        iTag = JSON.parse(iTag);\n    } else {\n        try {\n            path = '/category/list/ANDROID/2.0'\n            body = '&is_hidden=1'\n            iTag = getConfigUrl(path, body).categories\n            putMyVar(\":iTag\", JSON.stringify(iTag));\n        } catch (e) {\n            iTag = [];\n        }\n    }\n    const d = []\n    const contlist = [];\n    const tabs = iTag.slice(3, iTag.length - 3)\n    tabs.forEach((tab, i) => {\n        if (page == 1) {\n            name = tab.title\n            id = tab.categoryID\n            d.push({\n                title: getMyVar('分类', '0') == i ? Rich(Strong(Color(name))) : name,\n                url: $('#noLoading#').lazyRule((empty, i, id) => {\n                    clearMyVar('Page')\n                    putMyVar('分类', i);\n                    putMyVar('类ID', id);\n                    refreshPage()\n                    return empty;\n                }, empty, i, id),\n                col_type: 'scroll_button'\n            });\n        }\n        contlist[i] = [];\n        conts = tab.tags;\n        conts.forEach(cont => {\n            contlist[i].push({\n                title: cont.name,\n                url: cont.ID\n            });\n        })\n    })\n    const category = getMyVar('类ID', '' + tabs[0].categoryID + '')\n    const index = getMyVar('分类', '0')\n    if (contlist[index].length) {\n        if (page == 1) {\n            d.push({\n                col_type: 'blank_block'\n            })\n            contlist[index].forEach((contslist, i) => {\n                d.push({\n                    title: getMyVar(index, '0') == i ? Rich(Strong(Color(contslist.title))) : contslist.title,\n                    url: $('#noLoading#').lazyRule((index, empty, i) => {\n                        clearMyVar('Page')\n                        putMyVar(index, i);\n                        refreshPage();\n                        return empty;\n                    }, index, empty, i),\n                    col_type: 'scroll_button'\n                });\n            })\n        }\n        id = contlist[index][getMyVar(index, '0')].url\n    } else {\n        id = ''\n    }\n    sortTypeParse(d)\n    if (page == 1) {\n        getIconSearch(d)\n        path = '/post/list/ANDROID/4.1.8'\n        body = '&start=0&count=20&cat_id=' + category + '&tag_id=' + id + '&sort_by=' + sortType\n        date = getConfigUrl(path, body)\n        layoutParse(d, date, id, sortType, category)\n    }\n    setResult(d)\n}\n\nconst sortTypeParse = (d) => {\n    排序 = ['按回复时间', '按本版精华', '按发布时间'];\n    if (page == 1) {\n        d.push({\n            col_type: 'blank_block'\n        })\n        排序.forEach(item => {\n            d.push({\n                title: item == getMyVar('排序', 排序[0]) ? Rich(Strong(Color(item))) : item,\n                url: $('#noLoading#').lazyRule((item, empty) => {\n                    clearMyVar('Page')\n                    putMyVar('排序', item);\n                    refreshPage();\n                    return empty;\n                }, item, empty),\n                col_type: 'scroll_button'\n            })\n        })\n    }\n    switch (getMyVar('排序', 排序[0])) {\n        case 排序[0]:\n            sortType = 0\n            break;\n        case 排序[1]:\n            sortType = 2\n            break;\n        case 排序[2]:\n            sortType = 1\n            break;\n    }\n}\n\nconst layoutParse = (d, data, id, sortType, category) => {\n    addListener('onRefresh', () => {\n        clearMyVar('Page')\n    })\n    if (data.posts.length) {\n        data.posts.forEach(date => {\n            userID = date.user.userID\n            nick = date.user.nick\n            d.push({\n                title: nick + '\\t\\t' + Small(Color(getFormat(date.createTime))),\n                pic_url: date.user.avatar,\n                url: $(empty).rule((userID, nick) => {\n                    MY_PAGE = 1\n                    sortType = ''\n                    category = ''\n                    clearMyVar('Page')\n                    setPageTitle(nick)\n                    require('hiker://page/config.html')\n                    path = '/post/create/list/ANDROID/4.1.8'\n                    body = '&start=0&count=20&user_id=' + userID\n                    date = getConfigUrl(path, body)\n                    const d = []\n                    layoutParse(d, date, userID, sortType, category)\n                    setResult(d)\n                }, userID, nick),\n                col_type: 'avatar'\n            })\n            postID = date.postID\n            d.push({\n                title: Rich(Gray(date.title)),\n                url: $(empty + 'fypage' + '#autoCache##gameTheme#').rule((postID) => {\n                    require('hiker://page/config.html')\n                    const d = []\n                    playUrlParse(d, postID)\n                    setResult(d)\n                }, postID),\n                col_type: 'text_1',\n                extra: {\n                    lineVisible: false\n                }\n            })\n            try {\n                images = date.detail.match(/<image>(.*?)<\\/image>/g)\n                images = images.map(item => item.match(/<image>(.*?),.*?<\\/image>/)[1])\n            } catch (e) {\n                images = date.images\n            }\n            if (images.length) {\n                for (let i = 0; i < 3; i++) {\n                    if (images[i] != null) {\n                        d.push({\n                            pic_url: images[i],\n                            url: images[i],\n                            col_type: 'card_pic_3'\n                        })\n                    }\n                }\n            }\n            d.push({\n                col_type: 'line_blank'\n            })\n        })\n        if (getMyVar('Page', '') == '') {\n            d.push({\n                title: Rich(Small(SpringGreen('～～～加载更多～～～'))),\n                url: $(\"#noLoading#\").lazyRule((data, id, sortType, category) => {\n                    MY_PAGE = 1\n                    require('hiker://page/config.html')\n                    if (sortType == '' && category == '') {\n                        path = '/post/create/list/ANDROID/4.1.8'\n                        body = '&start=' + getMyVar('Page', data.start) + '&count=20&user_id=' + id\n                        date = getConfigUrl(path, body)\n                    } else {\n                        path = '/post/list/ANDROID/4.1.8'\n                        body = '&start=' + getMyVar('Page', data.start) + '&count=20&cat_id=' + category + '&tag_id=' + id + '&sort_by=' + sortType\n                        date = getConfigUrl(path, body)\n                    }\n                    putMyVar('Page', date.start)\n                    const d = []\n                    layoutParse(d, date, id, sortType, category)\n                    addItemBefore('Page' + id, d);\n                    if (!date.posts.length) {\n                        deleteItemByCls('PageCls' + id)\n                    }\n                    return empty\n                }, data, id, sortType, category),\n                col_type: 'text_center_1',\n                extra: {\n                    id: 'Page' + id,\n                    cls: 'PageCls' + id,\n                    lineVisible: false\n                }\n            })\n        }\n    } else {\n        d.push({\n            title: Rich(Small(Gray('～～～我是有底线的～～～'))),\n            url: empty,\n            col_type: 'text_center_1',\n            extra: {\n                lineVisible: false\n            }\n        })\n    }\n}\n\nconst layoutSearchParse = (d, data) => {\n    if (data.length) {\n        data.forEach(date => {\n            userID = date.user.userID\n            nick = date.user.nick\n            d.push({\n                title: nick + '\\t\\t' + Small(Color(getFormat(date.createTime))),\n                pic_url: date.user.avatar,\n                url: $(empty).rule((userID, nick) => {\n                    MY_PAGE = 1\n                    sortType = ''\n                    category = ''\n                    clearMyVar('Page')\n                    setPageTitle(nick)\n                    require('hiker://page/config.html')\n                    path = '/post/create/list/ANDROID/4.1.8'\n                    body = '&start=0&count=20&user_id=' + userID\n                    date = getConfigUrl(path, body)\n                    const d = []\n                    layoutParse(d, date, userID, sortType, category)\n                    setResult(d)\n                }, userID, nick),\n                col_type: 'avatar'\n            })\n            postID = date.postID\n            d.push({\n                title: Rich(Gray(date.title)),\n                url: $(empty + 'fypage' + '#autoCache##gameTheme#').rule((postID) => {\n                    require('hiker://page/config.html')\n                    const d = []\n                    playUrlParse(d, postID)\n                    setResult(d)\n                }, postID),\n                col_type: 'text_1',\n                extra: {\n                    lineVisible: false\n                }\n            })\n            try {\n                images = date.detail.match(/<image>(.*?)<\\/image>/g)\n                images = images.map(item => item.match(/<image>(.*?),.*?<\\/image>/)[1])\n            } catch (e) {\n                images = date.images\n            }\n            if (images.length) {\n                for (let i = 0; i < 3; i++) {\n                    if (images[i] != null) {\n                        d.push({\n                            pic_url: images[i],\n                            url: images[i],\n                            col_type: 'card_pic_3'\n                        })\n                    }\n                }\n            }\n            d.push({\n                col_type: 'line_blank'\n            })\n        })\n    } else {\n        d.push({\n            title: Rich(Small(Gray('～～～我是有底线的～～～'))),\n            url: empty,\n            col_type: 'text_center_1',\n            extra: {\n                lineVisible: false\n            }\n        })\n    }\n}\n\nconst playUrlParse = (d, postID) => {\n    setPageTitle('详情页面')\n    path = '/post/detail/ANDROID/4.1.8'\n    body = '&post_id=' + postID + '&page_no=' + page + '&page_size=20&doc=1'\n    data = getConfigUrl(path, body)\n    if (page == 1) {\n        for (let i = 0; i < 60; i++) {\n            d.push({\n                col_type: 'blank_block'\n            })\n        }\n        centers = RegExpParse(data.post.detail)\n        d.push({\n            title: '<h1>' + data.post.title + '</h1>' + Small(Gray(centers)),\n            col_type: 'rich_text'\n        })\n        voice = data.post.voice\n        if (voice.length) {\n            voice = JSON.parse(voice)\n            video = voice.videohost + voice.videofid\n            d.push({\n                title: '<p><a href=\"' + video + '#isVideo=true#\">[点击查看视频]</a></p>',\n                col_type: 'rich_text'\n            })\n        }\n        images = data.post.images\n        if (images.length) {\n            images.forEach(image => {\n                d.push({\n                    pic_url: image,\n                    url: image,\n                    col_type: 'pic_1_full'\n                })\n            })\n        }\n        for (let i = 0; i < 20; i++) {\n            d.push({\n                col_type: 'blank_block'\n            })\n        }\n    }\n    if (data.comments.length) {\n        if (page == 1) {\n            d.push({\n                title: Rich(Strong(Big('全部评论#' + data.post.commentCount + '条'))),\n                url: empty,\n                col_type: 'text_1',\n                extra: {\n                    lineVisible: false\n                }\n            })\n        }\n        data.comments.forEach(date => {\n            refComment = date.refComment\n            if (refComment != null) {\n                nickComment = refComment.nick\n                refComment = '回复\\t' + nickComment + '：<br>' + RegExpParse(refComment.text)\n                refComment = \"<blockquote>\" + Small(Gray(refComment)) + \"</blockquote>\"\n            } else {\n                refComment = ''\n            }\n            isTop = '顶置'\n            if (date.isTop != 1) isTop = date.seq + '楼'\n            centers = RegExpParse(date.text)\n            userID = date.user.userID\n            nick = date.user.nick\n            d.push({\n                title: nick + '\\t\\t' + Small(SpringGreen(isTop)) + '\\t\\t' + Small(Color(getFormat(date.createTime))),\n                pic_url: date.user.avatar,\n                url: $(empty).rule((userID, nick) => {\n                    MY_PAGE = 1\n                    sortType = ''\n                    category = ''\n                    clearMyVar('Page')\n                    setPageTitle(nick)\n                    require('hiker://page/config.html')\n                    path = '/post/create/list/ANDROID/4.1.8'\n                    body = '&start=0&count=20&user_id=' + userID\n                    date = getConfigUrl(path, body)\n                    const d = []\n                    layoutParse(d, date, userID, sortType, category)\n                    setResult(d)\n                }, userID, nick),\n                col_type: 'avatar'\n            }, {\n                title: refComment + Small(Gray(centers)),\n                url: empty,\n                col_type: 'rich_text',\n                extra: {\n                    lineVisible: false\n                }\n            })\n            if (date.images.length) {\n                date.images.forEach(image => {\n                    d.push({\n                        pic_url: image,\n                        url: image,\n                        col_type: 'pic_1_full'\n                    })\n                })\n            }\n            d.push({\n                col_type: 'line_blank'\n            })\n        })\n    } else {\n        d.push({\n            title: Rich(Small(Gray('～～～我是有底线的～～～'))),\n            url: empty,\n            col_type: 'text_center_1',\n            extra: {\n                lineVisible: false\n            }\n        })\n    }\n}\n\nconst getLoginParse = (d) => {\n    setPageTitle('葫芦侠·登录')\n    d.push({\n        desc: \"请输入您的手机号/邮箱\",\n        col_type: \"input\",\n        extra: {\n            onChange: \"setItem('葫芦侠账号', input)\",\n            titleVisible: false\n        }\n    }, {\n        desc: \"请输入您的密码\",\n        col_type: \"input\",\n        extra: {\n            onChange: \"setItem('葫芦侠密码', input)\",\n            type: \"password\",\n            titleVisible: false\n        }\n    }, {\n        title: Rich(Center(\"登录账号\")),\n        url: $(empty).lazyRule(() => {\n            MY_PAGE = 1\n            require('hiker://page/config.html')\n            return getLoginUrl()\n        }),\n        col_type: \"text_center_1\",\n        extra: {\n            lineVisible: false\n        }\n    })\n}\n\nconst getSearchParse = (d) => {\n    setPageTitle('葫芦侠·搜索')\n    addListener('onClose', () => {\n        clearMyVar(\"搜索关键词\")\n    })\n    if (page == 1) {\n        d.push({\n            title: getItem('葫芦侠nick'),\n            pic_url: getItem('葫芦侠avatar'),\n            url: $(empty).lazyRule(() => {\n                confirm({\n                    title: \"退出登录\",\n                    content: \"确定好了吗？当前账号将会退出~\",\n                    confirm: () => {\n                        clearItem('葫芦侠TOKEN');\n                        refreshPage();\n                        toast('退出成功~');\n                    }\n                })\n                return input\n            }),\n            col_type: 'avatar'\n        }, {\n            title: '🔍',\n            desc: '请输入帖子名称/关键词',\n            url: $.toString((getSearchUrl, empty) => {\n                putMyVar('搜索关键词', input);\n                if (input != '') getSearchUrl(input);\n                refreshPage();\n                return empty;\n            }, getSearchUrl, empty),\n            col_type: 'input',\n            extra: {\n                defaultValue: getMyVar('搜索关键词')\n            }\n        })\n    }\n    if (getMyVar('搜索关键词') == '') {\n        if (page == 1) {\n            let mem = storage0.getItem(\"葫芦侠\", []);\n            if (mem.length > 0) {\n                d.push({\n                    title: Rich(Big('📝 搜索历史')),\n                    url: $(\"#noLoading#\").lazyRule((empty, getConfirm) => {\n                        getConfirm()\n                        return empty;\n                    }, empty, getConfirm),\n                    col_type: 'text_1',\n                    extra: {\n                        lineVisible: false\n                    }\n                })\n            } else {\n                d.push({\n                    title: Rich(Center(\"喂喂~还没搜索呢～(￣▽￣～)~\")),\n                    url: empty,\n                    col_type: 'text_1',\n                    extra: {\n                        lineVisible: false\n                    }\n                })\n            }\n            for (let i = mem.length - 1; i >= 0; i--) {\n                let it = mem[i];\n                d.push({\n                    title: it,\n                    url: $(\"#noLoading#\").lazyRule((it, getSearchUrl, empty) => {\n                        putMyVar('搜索关键词', it);\n                        getSearchUrl(it)\n                        refreshPage();\n                        return empty;\n                    }, it, getSearchUrl, empty),\n                    col_type: \"flex_button\"\n                })\n            }\n        }\n    } else {\n        path = '/post/search/ANDROID/4.1.8'\n        body = '&start=' + (page - 1) * 20 + '&count=20&cat_id=43&keyword=' + getMyVar('搜索关键词') + '&flag=0'\n        date = getConfigUrl(path, body)\n        try {\n            layoutSearchParse(d, date.posts)\n        } catch (e) {\n            if (page == 1) {\n                d.push({\n                    title: Rich(Center(date.msg)),\n                    url: empty,\n                    col_type: 'text_1',\n                    extra: {\n                        lineVisible: false\n                    }\n                })\n            }\n        }\n    }\n}"}],"title":"葫芦侠","author":"旧巷陌人","version":0,"type":"video","url":"hiker://empty##fypage","col_type":"movie_3","class_name":"","class_url":"","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:\nrequire('hiker://page/config.html')\ngetBaseParse()","searchFind":"","search_url":"","group":"①推荐","detail_col_type":"movie_1","detail_find_rule":"","sdetail_col_type":"movie_1","sdetail_find_rule":"","ua":"mobile","preRule":"","pages":"[{\"col_type\":\"movie_3\",\"name\":\"页面\",\"path\":\"config.html\",\"rule\":\"const empty = 'hiker://empty'\\nconst page = MY_PAGE;\\n\\nconst Color = (test) => {\\n    return '<font color=\\\"#FA7298\\\">' + test + '</front>';\\n}\\n\\nconst SpringGreen = (test) => {\\n    return '<font color=\\\"#3CB371\\\">' + test + '</front>';\\n}\\n\\nconst Strong = (test) => {\\n    return '<strong>' + test + '</strong>';\\n}\\n\\nconst Small = (test) => {\\n    return '<small>' + test + '</small>';\\n}\\n\\nconst Center = (test) => {\\n    return \\\"<h4 style='text-align:center'>\\\" + test + \\\"</h4>\\\"\\n}\\n\\nconst Big = (test) => {\\n    return '<b><font color=#000>' + test + '</font></b>'\\n}\\n\\nconst Gray = (test) => {\\n    return \\\"<font color='gray'>\\\" + test + \\\"</font>\\\";\\n}\\n\\nconst Rich = (test) => {\\n    return \\\"‘‘’’\\\" + test;\\n}\\n\\nconst getFormat = (oldTime) => {\\n    const add0 = (m) => {\\n        return m < 10 ? '0' + m : m\\n    }\\n    let time = new Date(oldTime);\\n    let y = time.getFullYear();\\n    let m = time.getMonth() + 1;\\n    let d = time.getDate();\\n    let h = time.getHours();\\n    let mm = time.getMinutes();\\n    let s = time.getSeconds();\\n    return y + '-' + add0(m) + '-' + add0(d) + ' ' + add0(h) + ':' + add0(mm) + ':' + add0(s);\\n}\\n\\nif (!getMyVar('UUID')) {\\n    const generateUUID = () => {\\n        let d = new Date().getTime()\\n        let uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\\n            let r = (d + Math.random() * 16) % 16 | 0 d = Math.floor(d / 16)\\n            return (c == 'x' ? r : (r & 0x3 | 0x8)).toString(36)\\n        })\\n        return uuid\\n    }\\n    putMyVar('UUID', generateUUID())\\n}\\n\\nconst getSearchUrl = (kw, empty) => {\\n    let mem = storage0.getItem(\\\"葫芦侠\\\", []);\\n    mem = mem.filter(it => it != kw);\\n    if (mem.length >= 10) {\\n        mem = mem.slice(1);\\n    }\\n    mem.push(kw);\\n    storage0.setItem(\\\"葫芦侠\\\", mem);\\n    return empty;\\n};\\n\\nif (!getMyVar('域名')) {\\n    域名 = 'http://floor.huluxia.com'\\n    putMyVar('域名', 域名)\\n}\\n\\nconst getConfigUrl = (path, body) => {\\n    path = getMyVar('域名') + path\\n    body = '?platform=2&gkey=000000&app_version=4.2.0.1&versioncode=20141465&market_id=floor_baidu&_key=' + getItem('葫芦侠TOKEN', '') + '&device_code=%5Bw%5D02%3A00%3A00%3A00%3A00%3A00-%5Bi%5DA00000A49D3B6A-%5Bs%5D898602A51317F3030582&phone_brand_type=OP' + body\\n    return JSON.parse(request(path + body, {\\n        headers: {\\n            'User-Agent': 'okhttp/3.8.1'\\n        }\\n    }))\\n}\\n\\nconst loginConfigUrl = (path, body) => {\\n    path = getMyVar('域名') + path + '?platform=2&gkey=000000&app_version=4.2.0.1&versioncode=20141465&market_id=floor_baidu&_key=&device_code=%5Bd%5D' + getMyVar('UUID') + '&phone_brand_type=UN'\\n    return JSON.parse(request(path, {\\n        headers: {\\n            'User-Agent': 'okhttp/3.8.1'\\n        },\\n        body: body,\\n        method: 'POST'\\n    }))\\n}\\n\\nconst RegExpParse = (text) => {\\n    centers = text\\n        .replace(/<text>|<\\\\/text>/g, '')\\n        .replace(/\\\\n/g, '<br>')\\n        .replace(/<image>(.*?),.*?<\\\\/image>/g, '<img src=\\\"$1\\\">')\\n        .replace(/([^\\\"])(http[^<\\\\s\\\"]+)/g, '$1<a href=\\\"$2\\\">$2</a>')\\n    return centers\\n}\\n\\nconst getConfirm = () => {\\n    confirm({\\n        title: \\\"清除记录\\\",\\n        content: \\\"确定好了吗？记录将会不复存在~\\\",\\n        confirm: () => {\\n            clearItem(\\\"葫芦侠\\\");\\n            refreshPage();\\n            toast('清除成功~');\\n        }\\n    })\\n}\\n\\nconst getIconSearch = (d) => {\\n    d.push({\\n        title: \\\"请输入帖子名称/关键词\\\",\\n        url: $(empty + 'fypage' + '#noHistory##noRecordHistory#').rule(() => {\\n            const d = [];\\n            require(\\\"hiker://page/config.html\\\")\\n            if (getItem('葫芦侠TOKEN', '') == '') {\\n                getLoginParse(d)\\n            } else {\\n                getSearchParse(d)\\n            }\\n            setResult(d)\\n        }),\\n        col_type: \\\"icon_1_search\\\"\\n    })\\n}\\n\\nconst time = new Date().getTime()\\n\\nif (Number(time - getItem('葫芦侠TOKEN-Time', '0')) > 259200000) {\\n    setItem('葫芦侠TOKEN-Time', '' + time + '')\\n    clearItem('葫芦侠TOKEN')\\n}\\n\\nconst getLoginUrl = () => {\\n    account = getItem('葫芦侠账号')\\n    password = md5(getItem('葫芦侠密码'))\\n    sign = 'account' + account + 'device_code[d]' + getMyVar('UUID') + 'password' + password + 'voice_codefa1c28a5b62e79c3e63d9030b6142e4b'\\n    path = '/account/login/ANDROID/4.1.8'\\n    body = 'account=' + account + '&login_type=2&password=' + password + '&sign=' + md5(sign).toUpperCase()\\n    data = loginConfigUrl(path, body)\\n    if (data._key != null) {\\n        avatar = data.user.avatar\\n        nick = data.user.nick\\n        setItem('葫芦侠avatar', avatar)\\n        setItem('葫芦侠nick', nick)\\n        token = data._key\\n        setItem('葫芦侠TOKEN', token)\\n        refreshPage()\\n        toast(\\\"登录成功\\\")\\n    } else {\\n        clearItem(\\\"葫芦侠账号\\\")\\n        clearItem(\\\"葫芦侠密码\\\")\\n        toast(data.msg)\\n    }\\n    return empty\\n}\\n\\nconst getBaseParse = () => {\\n    let iTag = getMyVar(\\\":iTag\\\", \\\"\\\");\\n    if (iTag) {\\n        iTag = JSON.parse(iTag);\\n    } else {\\n        try {\\n            path = '/category/list/ANDROID/2.0'\\n            body = '&is_hidden=1'\\n            iTag = getConfigUrl(path, body).categories\\n            putMyVar(\\\":iTag\\\", JSON.stringify(iTag));\\n        } catch (e) {\\n            iTag = [];\\n        }\\n    }\\n    const d = []\\n    const contlist = [];\\n    const tabs = iTag.slice(3, iTag.length - 3)\\n    tabs.forEach((tab, i) => {\\n        if (page == 1) {\\n            name = tab.title\\n            id = tab.categoryID\\n            d.push({\\n                title: getMyVar('分类', '0') == i ? Rich(Strong(Color(name))) : name,\\n                url: $('#noLoading#').lazyRule((empty, i, id) => {\\n                    clearMyVar('Page')\\n                    putMyVar('分类', i);\\n                    putMyVar('类ID', id);\\n                    refreshPage()\\n                    return empty;\\n                }, empty, i, id),\\n                col_type: 'scroll_button'\\n            });\\n        }\\n        contlist[i] = [];\\n        conts = tab.tags;\\n        conts.forEach(cont => {\\n            contlist[i].push({\\n                title: cont.name,\\n                url: cont.ID\\n            });\\n        })\\n    })\\n    const category = getMyVar('类ID', '' + tabs[0].categoryID + '')\\n    const index = getMyVar('分类', '0')\\n    if (contlist[index].length) {\\n        if (page == 1) {\\n            d.push({\\n                col_type: 'blank_block'\\n            })\\n            contlist[index].forEach((contslist, i) => {\\n                d.push({\\n                    title: getMyVar(index, '0') == i ? Rich(Strong(Color(contslist.title))) : contslist.title,\\n                    url: $('#noLoading#').lazyRule((index, empty, i) => {\\n                        clearMyVar('Page')\\n                        putMyVar(index, i);\\n                        refreshPage();\\n                        return empty;\\n                    }, index, empty, i),\\n                    col_type: 'scroll_button'\\n                });\\n            })\\n        }\\n        id = contlist[index][getMyVar(index, '0')].url\\n    } else {\\n        id = ''\\n    }\\n    sortTypeParse(d)\\n    if (page == 1) {\\n        getIconSearch(d)\\n        path = '/post/list/ANDROID/4.1.8'\\n        body = '&start=0&count=20&cat_id=' + category + '&tag_id=' + id + '&sort_by=' + sortType\\n        date = getConfigUrl(path, body)\\n        layoutParse(d, date, id, sortType, category)\\n    }\\n    setResult(d)\\n}\\n\\nconst sortTypeParse = (d) => {\\n    排序 = ['按回复时间', '按本版精华', '按发布时间'];\\n    if (page == 1) {\\n        d.push({\\n            col_type: 'blank_block'\\n        })\\n        排序.forEach(item => {\\n            d.push({\\n                title: item == getMyVar('排序', 排序[0]) ? Rich(Strong(Color(item))) : item,\\n                url: $('#noLoading#').lazyRule((item, empty) => {\\n                    clearMyVar('Page')\\n                    putMyVar('排序', item);\\n                    refreshPage();\\n                    return empty;\\n                }, item, empty),\\n                col_type: 'scroll_button'\\n            })\\n        })\\n    }\\n    switch (getMyVar('排序', 排序[0])) {\\n        case 排序[0]:\\n            sortType = 0\\n            break;\\n        case 排序[1]:\\n            sortType = 2\\n            break;\\n        case 排序[2]:\\n            sortType = 1\\n            break;\\n    }\\n}\\n\\nconst layoutParse = (d, data, id, sortType, category) => {\\n    addListener('onRefresh', () => {\\n        clearMyVar('Page')\\n    })\\n    if (data.posts.length) {\\n        data.posts.forEach(date => {\\n            userID = date.user.userID\\n            nick = date.user.nick\\n            d.push({\\n                title: nick + '\\\\t\\\\t' + Small(Color(getFormat(date.createTime))),\\n                pic_url: date.user.avatar,\\n                url: $(empty).rule((userID, nick) => {\\n                    MY_PAGE = 1\\n                    sortType = ''\\n                    category = ''\\n                    clearMyVar('Page')\\n                    setPageTitle(nick)\\n                    require('hiker://page/config.html')\\n                    path = '/post/create/list/ANDROID/4.1.8'\\n                    body = '&start=0&count=20&user_id=' + userID\\n                    date = getConfigUrl(path, body)\\n                    const d = []\\n                    layoutParse(d, date, userID, sortType, category)\\n                    setResult(d)\\n                }, userID, nick),\\n                col_type: 'avatar'\\n            })\\n            postID = date.postID\\n            d.push({\\n                title: Rich(Gray(date.title)),\\n                url: $(empty + 'fypage' + '#autoCache##gameTheme#').rule((postID) => {\\n                    require('hiker://page/config.html')\\n                    const d = []\\n                    playUrlParse(d, postID)\\n                    setResult(d)\\n                }, postID),\\n                col_type: 'text_1',\\n                extra: {\\n                    lineVisible: false\\n                }\\n            })\\n            try {\\n                images = date.detail.match(/<image>(.*?)<\\\\/image>/g)\\n                images = images.map(item => item.match(/<image>(.*?),.*?<\\\\/image>/)[1])\\n            } catch (e) {\\n                images = date.images\\n            }\\n            if (images.length) {\\n                for (let i = 0; i < 3; i++) {\\n                    if (images[i] != null) {\\n                        d.push({\\n                            pic_url: images[i],\\n                            url: images[i],\\n                            col_type: 'card_pic_3'\\n                        })\\n                    }\\n                }\\n            }\\n            d.push({\\n                col_type: 'line_blank'\\n            })\\n        })\\n        if (getMyVar('Page', '') == '') {\\n            d.push({\\n                title: Rich(Small(SpringGreen('～～～加载更多～～～'))),\\n                url: $(\\\"#noLoading#\\\").lazyRule((data, id, sortType, category) => {\\n                    MY_PAGE = 1\\n                    require('hiker://page/config.html')\\n                    if (sortType == '' && category == '') {\\n                        path = '/post/create/list/ANDROID/4.1.8'\\n                        body = '&start=' + getMyVar('Page', data.start) + '&count=20&user_id=' + id\\n                        date = getConfigUrl(path, body)\\n                    } else {\\n                        path = '/post/list/ANDROID/4.1.8'\\n                        body = '&start=' + getMyVar('Page', data.start) + '&count=20&cat_id=' + category + '&tag_id=' + id + '&sort_by=' + sortType\\n                        date = getConfigUrl(path, body)\\n                    }\\n                    putMyVar('Page', date.start)\\n                    const d = []\\n                    layoutParse(d, date, id, sortType, category)\\n                    addItemBefore('Page' + id, d);\\n                    if (!date.posts.length) {\\n                        deleteItemByCls('PageCls' + id)\\n                    }\\n                    return empty\\n                }, data, id, sortType, category),\\n                col_type: 'text_center_1',\\n                extra: {\\n                    id: 'Page' + id,\\n                    cls: 'PageCls' + id,\\n                    lineVisible: false\\n                }\\n            })\\n        }\\n    } else {\\n        d.push({\\n            title: Rich(Small(Gray('～～～我是有底线的～～～'))),\\n            url: empty,\\n            col_type: 'text_center_1',\\n            extra: {\\n                lineVisible: false\\n            }\\n        })\\n    }\\n}\\n\\nconst layoutSearchParse = (d, data) => {\\n    if (data.length) {\\n        data.forEach(date => {\\n            userID = date.user.userID\\n            nick = date.user.nick\\n            d.push({\\n                title: nick + '\\\\t\\\\t' + Small(Color(getFormat(date.createTime))),\\n                pic_url: date.user.avatar,\\n                url: $(empty).rule((userID, nick) => {\\n                    MY_PAGE = 1\\n                    sortType = ''\\n                    category = ''\\n                    clearMyVar('Page')\\n                    setPageTitle(nick)\\n                    require('hiker://page/config.html')\\n                    path = '/post/create/list/ANDROID/4.1.8'\\n                    body = '&start=0&count=20&user_id=' + userID\\n                    date = getConfigUrl(path, body)\\n                    const d = []\\n                    layoutParse(d, date, userID, sortType, category)\\n                    setResult(d)\\n                }, userID, nick),\\n                col_type: 'avatar'\\n            })\\n            postID = date.postID\\n            d.push({\\n                title: Rich(Gray(date.title)),\\n                url: $(empty + 'fypage' + '#autoCache##gameTheme#').rule((postID) => {\\n                    require('hiker://page/config.html')\\n                    const d = []\\n                    playUrlParse(d, postID)\\n                    setResult(d)\\n                }, postID),\\n                col_type: 'text_1',\\n                extra: {\\n                    lineVisible: false\\n                }\\n            })\\n            try {\\n                images = date.detail.match(/<image>(.*?)<\\\\/image>/g)\\n                images = images.map(item => item.match(/<image>(.*?),.*?<\\\\/image>/)[1])\\n            } catch (e) {\\n                images = date.images\\n            }\\n            if (images.length) {\\n                for (let i = 0; i < 3; i++) {\\n                    if (images[i] != null) {\\n                        d.push({\\n                            pic_url: images[i],\\n                            url: images[i],\\n                            col_type: 'card_pic_3'\\n                        })\\n                    }\\n                }\\n            }\\n            d.push({\\n                col_type: 'line_blank'\\n            })\\n        })\\n    } else {\\n        d.push({\\n            title: Rich(Small(Gray('～～～我是有底线的～～～'))),\\n            url: empty,\\n            col_type: 'text_center_1',\\n            extra: {\\n                lineVisible: false\\n            }\\n        })\\n    }\\n}\\n\\nconst playUrlParse = (d, postID) => {\\n    setPageTitle('详情页面')\\n    path = '/post/detail/ANDROID/4.1.8'\\n    body = '&post_id=' + postID + '&page_no=' + page + '&page_size=20&doc=1'\\n    data = getConfigUrl(path, body)\\n    if (page == 1) {\\n        for (let i = 0; i < 60; i++) {\\n            d.push({\\n                col_type: 'blank_block'\\n            })\\n        }\\n        centers = RegExpParse(data.post.detail)\\n        d.push({\\n            title: '<h1>' + data.post.title + '</h1>' + Small(Gray(centers)),\\n            col_type: 'rich_text'\\n        })\\n        voice = data.post.voice\\n        if (voice.length) {\\n            voice = JSON.parse(voice)\\n            video = voice.videohost + voice.videofid\\n            d.push({\\n                title: '<p><a href=\\\"' + video + '#isVideo=true#\\\">[点击查看视频]</a></p>',\\n                col_type: 'rich_text'\\n            })\\n        }\\n        images = data.post.images\\n        if (images.length) {\\n            images.forEach(image => {\\n                d.push({\\n                    pic_url: image,\\n                    url: image,\\n                    col_type: 'pic_1_full'\\n                })\\n            })\\n        }\\n        for (let i = 0; i < 20; i++) {\\n            d.push({\\n                col_type: 'blank_block'\\n            })\\n        }\\n    }\\n    if (data.comments.length) {\\n        if (page == 1) {\\n            d.push({\\n                title: Rich(Strong(Big('全部评论#' + data.post.commentCount + '条'))),\\n                url: empty,\\n                col_type: 'text_1',\\n                extra: {\\n                    lineVisible: false\\n                }\\n            })\\n        }\\n        data.comments.forEach(date => {\\n            refComment = date.refComment\\n            if (refComment != null) {\\n                nickComment = refComment.nick\\n                refComment = '回复\\\\t' + nickComment + '：<br>' + RegExpParse(refComment.text)\\n                refComment = \\\"<blockquote>\\\" + Small(Gray(refComment)) + \\\"</blockquote>\\\"\\n            } else {\\n                refComment = ''\\n            }\\n            isTop = '顶置'\\n            if (date.isTop != 1) isTop = date.seq + '楼'\\n            centers = RegExpParse(date.text)\\n            userID = date.user.userID\\n            nick = date.user.nick\\n            d.push({\\n                title: nick + '\\\\t\\\\t' + Small(SpringGreen(isTop)) + '\\\\t\\\\t' + Small(Color(getFormat(date.createTime))),\\n                pic_url: date.user.avatar,\\n                url: $(empty).rule((userID, nick) => {\\n                    MY_PAGE = 1\\n                    sortType = ''\\n                    category = ''\\n                    clearMyVar('Page')\\n                    setPageTitle(nick)\\n                    require('hiker://page/config.html')\\n                    path = '/post/create/list/ANDROID/4.1.8'\\n                    body = '&start=0&count=20&user_id=' + userID\\n                    date = getConfigUrl(path, body)\\n                    const d = []\\n                    layoutParse(d, date, userID, sortType, category)\\n                    setResult(d)\\n                }, userID, nick),\\n                col_type: 'avatar'\\n            }, {\\n                title: refComment + Small(Gray(centers)),\\n                url: empty,\\n                col_type: 'rich_text',\\n                extra: {\\n                    lineVisible: false\\n                }\\n            })\\n            if (date.images.length) {\\n                date.images.forEach(image => {\\n                    d.push({\\n                        pic_url: image,\\n                        url: image,\\n                        col_type: 'pic_1_full'\\n                    })\\n                })\\n            }\\n            d.push({\\n                col_type: 'line_blank'\\n            })\\n        })\\n    } else {\\n        d.push({\\n            title: Rich(Small(Gray('～～～我是有底线的～～～'))),\\n            url: empty,\\n            col_type: 'text_center_1',\\n            extra: {\\n                lineVisible: false\\n            }\\n        })\\n    }\\n}\\n\\nconst getLoginParse = (d) => {\\n    setPageTitle('葫芦侠·登录')\\n    d.push({\\n        desc: \\\"请输入您的手机号/邮箱\\\",\\n        col_type: \\\"input\\\",\\n        extra: {\\n            onChange: \\\"setItem('葫芦侠账号', input)\\\",\\n            titleVisible: false\\n        }\\n    }, {\\n        desc: \\\"请输入您的密码\\\",\\n        col_type: \\\"input\\\",\\n        extra: {\\n            onChange: \\\"setItem('葫芦侠密码', input)\\\",\\n            type: \\\"password\\\",\\n            titleVisible: false\\n        }\\n    }, {\\n        title: Rich(Center(\\\"登录账号\\\")),\\n        url: $(empty).lazyRule(() => {\\n            MY_PAGE = 1\\n            require('hiker://page/config.html')\\n            return getLoginUrl()\\n        }),\\n        col_type: \\\"text_center_1\\\",\\n        extra: {\\n            lineVisible: false\\n        }\\n    })\\n}\\n\\nconst getSearchParse = (d) => {\\n    setPageTitle('葫芦侠·搜索')\\n    addListener('onClose', () => {\\n        clearMyVar(\\\"搜索关键词\\\")\\n    })\\n    if (page == 1) {\\n        d.push({\\n            title: getItem('葫芦侠nick'),\\n            pic_url: getItem('葫芦侠avatar'),\\n            url: $(empty).lazyRule(() => {\\n                confirm({\\n                    title: \\\"退出登录\\\",\\n                    content: \\\"确定好了吗？当前账号将会退出~\\\",\\n                    confirm: () => {\\n                        clearItem('葫芦侠TOKEN');\\n                        refreshPage();\\n                        toast('退出成功~');\\n                    }\\n                })\\n                return input\\n            }),\\n            col_type: 'avatar'\\n        }, {\\n            title: '🔍',\\n            desc: '请输入帖子名称/关键词',\\n            url: $.toString((getSearchUrl, empty) => {\\n                putMyVar('搜索关键词', input);\\n                if (input != '') getSearchUrl(input);\\n                refreshPage();\\n                return empty;\\n            }, getSearchUrl, empty),\\n            col_type: 'input',\\n            extra: {\\n                defaultValue: getMyVar('搜索关键词')\\n            }\\n        })\\n    }\\n    if (getMyVar('搜索关键词') == '') {\\n        if (page == 1) {\\n            let mem = storage0.getItem(\\\"葫芦侠\\\", []);\\n            if (mem.length > 0) {\\n                d.push({\\n                    title: Rich(Big('📝 搜索历史')),\\n                    url: $(\\\"#noLoading#\\\").lazyRule((empty, getConfirm) => {\\n                        getConfirm()\\n                        return empty;\\n                    }, empty, getConfirm),\\n                    col_type: 'text_1',\\n                    extra: {\\n                        lineVisible: false\\n                    }\\n                })\\n            } else {\\n                d.push({\\n                    title: Rich(Center(\\\"喂喂~还没搜索呢～(￣▽￣～)~\\\")),\\n                    url: empty,\\n                    col_type: 'text_1',\\n                    extra: {\\n                        lineVisible: false\\n                    }\\n                })\\n            }\\n            for (let i = mem.length - 1; i >= 0; i--) {\\n                let it = mem[i];\\n                d.push({\\n                    title: it,\\n                    url: $(\\\"#noLoading#\\\").lazyRule((it, getSearchUrl, empty) => {\\n                        putMyVar('搜索关键词', it);\\n                        getSearchUrl(it)\\n                        refreshPage();\\n                        return empty;\\n                    }, it, getSearchUrl, empty),\\n                    col_type: \\\"flex_button\\\"\\n                })\\n            }\\n        }\\n    } else {\\n        path = '/post/search/ANDROID/4.1.8'\\n        body = '&start=' + (page - 1) * 20 + '&count=20&cat_id=43&keyword=' + getMyVar('搜索关键词') + '&flag=0'\\n        date = getConfigUrl(path, body)\\n        try {\\n            layoutSearchParse(d, date.posts)\\n        } catch (e) {\\n            if (page == 1) {\\n                d.push({\\n                    title: Rich(Center(date.msg)),\\n                    url: empty,\\n                    col_type: 'text_1',\\n                    extra: {\\n                        lineVisible: false\\n                    }\\n                })\\n            }\\n        }\\n    }\\n}\"}]","proxy":"","icon":"https://img0.baidu.com/it/u=3575742157,1794658985&fm=253&fmt=auto&app=138&f=JPEG"},{"last_chapter_rule":"","pageList":[{"col_type":"movie_3","name":"🔢首页列表","path":"首页列表","rule":"var tips_title = getMyVar(\"主标题\", '分类作品库')\nvar D = [];\nif (tips_title.indexOf(\"作品\") > -1) {\n    for (let i = 0; i < XPC.length; i++) {\n        var vm = XPC[i];\n        var app_links = vm.url.replace(/newstudios/, 'https');\n        var ID = app_links.split('id=')[1]\n        D.push({\n            title: vm.category_name,\n            img: vm.cover,\n            url: $('#noLoading#'+app_links).lazyRule(() => {\n                return eval(JSON.parse(fetch(\"hiker://page/app_二级列表\")).rule);\n            }),\n            col_type: 'card_pic_3_center',\n            desc: '0',\n            extra: {\n                cls: '首页'\n            }\n        })\n    }\n    putMyVar('首页_分类', JSON.stringify(D))\n} else {\n    var appurl;\n    if (tips_title == '推荐') {\n        //appurl = 'https://app.xinpianchang.com/home/creativeRecommend';\n        appurl = 'https://app.xinpianchang.com/home/cateRecommend';\n    }\n    if (tips_title == '精选') {\n        appurl = 'https://app.xinpianchang.com/home/selection';\n    }\n    if (tips_title == '本地周边') {\n        appurl = 'https://app.xinpianchang.com/home/sameCity';\n    }\n\n    var vmjson = JSON.parse(request(appurl, {\n        headers: {\n            'User-Agent': \"NewStudios/2.4.2 (com.xinpianchang.newstudios; build:1260; Android 14; Xiaomi/2211133C/Android 14)\"\n        },\n        method: 'GET'\n    })).data;\n    if (tips_title == '推荐') {\n       // vmjson = vmjson.children.slice(1, vmjson.length);\n        vmjson = vmjson.list.slice(1);\n    } else if (tips_title == '精选') {\n        vmjson = vmjson.list.slice(1);\n    } else if (tips_title == '本地周边') {\n        vmjson = vmjson.children;\n    }\n    D.push({\n        col_type: 'line',\n        extra: {\n            id: '首页_空格',\n            cls: '首页'\n        }\n    })\n    for (let i = 0; i < vmjson.length; i++) {\n        if (['推荐','精选'].includes(tips_title)) {\n            var vm = vmjson[i].data.resource;\n        } else if (['本地周边'].includes(tips_title)) {\n            var vm = vmjson[i].children[0].model.resource;\n        }\n        var PLAY_LINKS = vm.url.replace(/newstudios/, 'https');\n        var USER_HOME = 'https://app.xinpianchang.com/user/' + vm.user_id;\n        D.push({\n            title: vm.author.userinfo.username,\n            pic_url: vm.author.userinfo.avatar,\n            url: $('#noLoading#'+USER_HOME).lazyRule(() => {\n                return eval(JSON.parse(fetch(\"hiker://page/创作人首页\")).rule);\n            }),\n            col_type: 'avatar',\n            extra: {\n                cls: '首页'\n            }\n        })\n        D.push({\n            title: vm.title,\n            url: $('#noLoading#'+PLAY_LINKS).lazyRule(() => {\n                putMyVar('详细类别', '简介');\n                return eval(JSON.parse(fetch(\"hiker://page/视频详情页\")).rule);\n            }),\n            col_type: 'text_1',\n            extra: {\n                cls: '首页'\n            }\n        })\n        D.push({\n            title: vm.title,\n            img: vm.cover,\n            url: $('#noLoading#'+PLAY_LINKS).lazyRule(() => {\n                return eval(JSON.parse(fetch(\"hiker://page/app播放链接\")).rule);\n            }),\n            col_type: 'pic_1_full',\n            extra: {\n                id: vm.title,\n                cls: '首页'\n            }\n        })\n        D.push({\n            title: vm.count.count_collect,\n            img: 'https://hikerfans.com/weisyr/icon/bbs收藏.svg',\n            url: \"hiker://empty\",\n            col_type: 'icon_small_3',\n            extra: {\n                cls: '首页'\n            }\n        })\n        D.push({\n            title: vm.count.count_comment,\n            img: 'https://hikerfans.com/weisyr/icon/bbs回复.svg',\n            url: $('#noLoading#'+PLAY_LINKS).lazyRule(() => {\n                putMyVar('详细类别', '评论');\n                return eval(JSON.parse(fetch(\"hiker://page/视频详情页\")).rule);\n            }),\n            col_type: 'icon_small_3',\n            extra: {\n                cls: '首页'\n            }\n        })\n        D.push({\n            title: vm.count.count_like,\n            img: 'https://hikerfans.com/weisyr/icon/bbs点赞.svg',\n            url: \"hiker://empty\",\n            col_type: 'icon_small_3',\n            extra: {\n                cls: '首页'\n            }\n        })\n        D.push({\n            col_type: 'line_blank',\n            extra: {\n                cls: '首页'\n            }\n        })\n    }\n    if (tips_title == '推荐') putMyVar('首页_推荐', JSON.stringify(D));\n    if (tips_title == '精选') putMyVar('首页_精选', JSON.stringify(D));\n}"},{"col_type":"movie_3","name":"app分类与搜索列表","path":"app分类与搜索列表","rule":"var D = [];\nif (app_lists.length >0) {\n    for (let i = 0; i < app_lists.length; i++) {\n        var PLAY_LINKS = app_lists[i].url.replace(/newstudios/, 'https');\n        var like = app_lists[i].count.count_like;\n        var view = app_lists[i].count.count_view;\n        if (like > 1000) like = (like / 1000).toFixed(1) + 'k';\n        if (view > 10000) view = (view / 10000).toFixed(1) + 'w';\n        D.push({\n            img: app_lists[i].cover,\n            title: app_lists[i].title,\n            desc: \"““”” <small><font color='grey'>\" + '播放量 ' + view + ' · ' + '喜欢 ' + like + '\\n' + app_lists[i]\n                .author.userinfo.username + \"</font> </small>\",\n            url: $('#noLoading#'+PLAY_LINKS).lazyRule(() => {\n                putMyVar('详细类别', '简介');\n                return eval(JSON.parse(fetch(\"hiker://page/视频详情页\")).rule);\n            }),\n            col_type: 'movie_1_left_pic',\n            extra: {\n                cls: '搜索'\n            }\n        })\n    }\n} else {\n    eval(JSON.parse(fetch(\"hiker://page/END\")).rule)(D)\n}"},{"col_type":"movie_3","name":"搜索页上部","path":"搜索页上部","rule":"if (PAGE == 1) {\n    eval(JSON.parse(fetch(\"hiker://page/TopImg\")).rule)\n    d.push({\n        /*url: $().lazyRule(() => {\n            putMyVar('搜关键字', input);\n            var tips_title = getMyVar('搜关键字');\n            var localData = request('hiker://files/cache/新片场历史搜索.json') || '[]';\n            var lishi = JSON.parse(localData);\n            let ccc = lishi.indexOf(input);\n            if (ccc > -1) {\n                lishi.splice(ccc, 1)\n            };\n            lishi.push(tips_title);\n            lishi = lishi.slice(-28);\n            writeFile('hiker://files/cache/新片场历史搜索.json', JSON.stringify(lishi));\n            refreshPage(false)\n        }),*/\n        url: \"putMyVar('搜关键字',input);var tips_title = getMyVar('搜关键字');var localData = request('hiker://files/cache/新片场历史搜索.json')||'[]';var lishi=JSON.parse(localData);let ccc = lishi.indexOf(input);if(ccc >-1){lishi.splice(ccc,1)};lishi.push(tips_title);lishi=lishi.slice(-28);writeFile('hiker://files/cache/新片场历史搜索.json', JSON.stringify(lishi));refreshPage(false)\",\n        desc: '搜索作品、创作人',\n        extra: {\n            defaultValue: tips_title,\n            onChange: \"putVar('搜关键字',input)\"\n        },\n        col_type: \"input\",\n        title: '搜索',\n    });\n    d.push({\n        col_type: 'line',\n    })\n\n    if (!tips_title) {\n        if (request('hiker://files/cache/新片场历史搜索.json')) {\n            for (let i = 0; i < 10; i++) {\n                d.push({\n                    col_type: \"blank_block\"\n                })\n            }\n            d.push({\n                title: '““””<b><font color=gray>' + '🗑️ 历史搜索' + '</font></b>',\n                url: $().lazyRule(() => {\n                    writeFile('hiker://files/cache/新片场历史搜索.json', '');\n                    refreshPage(false);\n                    return \"hiker://empty\";\n                }),\n                col_type: \"text_1\",\n                extra: {\n                    lineVisible: false\n                }\n            });\n            var localData = request('hiker://files/cache/新片场历史搜索.json');\n            if (!localData) localData = \"[]\";\n            var lishi = JSON.parse(localData).slice(-28);\n            var History = \"\";\n            for (let i = lishi.length - 1; i >= 0; i--) {\n                var cclishi = lishi[i];\n                d.push({\n                    title: cclishi,\n                    col_type: \"flex_button\",\n                    url: $('#noLoading#').lazyRule((cclishi) => {\n                        putMyVar('搜关键字', cclishi);\n                        refreshPage();\n                        return \"hiker://empty\";\n                    }, cclishi),\n                });\n            }\n        }\n        for (let i = 0; i < 20; i++) {\n            d.push({\n                col_type: \"blank_block\"\n            })\n        }\n        d.push({\n            title: '““””<b><font color=gray>' + '🔥 热门内容' + '</font></b>',\n            url: \"hiker://empty\",\n            col_type: \"text_1\",\n            extra: {\n                lineVisible: false\n            }\n        });\n        let Rmurl = 'https://app.xinpianchang.com/v2/search/hotContents';\n        Rmjson = JSON.parse(request(Rmurl)).data.list;\n        for (let i in Rmjson) {\n            var tips = (parseInt(i) + 1) + ' ' + Rmjson[i].title;\n            var PLAY_LINKS = Rmjson[i].link.replace(/newstudios/, 'https');\n            var url = Rmjson[i].link;\n            d.push({\n                title: tips,\n                col_type: \"text_1\",\n                url: $('#noLoading#'+PLAY_LINKS).lazyRule(() => {\n                    putMyVar('详细类别', '简介');\n                    return eval(JSON.parse(fetch(\"hiker://page/视频详情页\")).rule);\n                }),\n                extra: {\n                    lineVisible: false\n                },\n            });\n        }\n        d.push({\n            title: '““””<b><font color=gray>' + '🔥 热门搜索' + '</font></b>',\n            url: \"hiker://empty\",\n            col_type: \"text_1\",\n            extra: {\n                lineVisible: false\n            }\n        });\n        var url = 'https://app.xinpianchang.com/search_recommend_kws';\n        var Hotjson = JSON.parse(fetch(url)).data.list;\n        for (let i in Hotjson) {\n            var tips = Hotjson[i].name;\n            d.push({\n                title: tips,\n                col_type: \"flex_button\",\n                extra: {\n                    lineVisible: false\n                },\n                url: $('#noLoading#').lazyRule((tips) => {\n                    putMyVar('搜关键字', tips);\n                    refreshPage();\n                    return \"hiker://empty\";\n                }, tips),\n            });\n        }\n    }\n    var Color = \"#FA7298\";\n\n    function getHead(titles) {\n        return '‘‘’’<strong><font color=\"' + Color + '\">' + titles + '</front></strong>';\n    }\n    if (tips_title) {\n        for (let i = 0; i < 5; i++) {\n            d.push({\n                col_type: \"blank_block\"\n            })\n        }\n        d.push({\n            title: tips_select == 'article' ? getHead('作品') : '作品',\n            col_type: 'text_2',\n            url: $('#noLoading#').lazyRule((Color, PAGE) => {\n\n                putMyVar('页码', '1');\n                if (getMyVar(\"作/创/文\") != 'article') {\n                    putMyVar('作/创/文', 'article');\n                    deleteItemByCls('搜索')\n                    deleteItem('end')\n                    updateItem('搜索_作品', {\n                        title: '‘‘’’<strong><font color=\"' + Color + '\">' + '作品' + '</front></strong>'\n                    })\n                    updateItem('搜索_创作人', {\n                        title: '创作人'\n                    })\n                    var APP_URL = \"https://app.xinpianchang.com/v2/search?type=article\" + \"&kw=\" + getMyVar(\"搜关键字\") + '&page=' + PAGE;\n                    var app_lists = JSON.parse(request(APP_URL)).data.list;\n                    eval(JSON.parse(fetch(\"hiker://page/app分类与搜索列表\")).rule)\n                    addItemAfter('搜索_创作人', D)\n                }\n                //refreshPage();\n                return \"hiker://empty\";\n            }, Color, PAGE),\n            extra: {\n                id: '搜索_作品'\n            }\n        })\n        d.push({\n            title: tips_select == 'creator' ? getHead('创作人') : '创作人',\n            col_type: 'text_2',\n            url: $('#noLoading#').lazyRule((Color, PAGE) => {\n                //putMyVar('作/创/文', 'creator');\n                putMyVar('页码', '1');\n                if (getMyVar(\"作/创/文\") != 'creator') {\n                    putMyVar('作/创/文', 'creator');\n                    deleteItemByCls('搜索')\n                    deleteItem('end')\n                    updateItem('搜索_创作人', {\n                        title: '‘‘’’<strong><font color=\"' + Color + '\">' + '创作人' + '</front></strong>'\n                    })\n                    updateItem('搜索_作品', {\n                        title: '作品'\n                    })\n                    eval(JSON.parse(fetch(\"hiker://page/app创作人搜索列表\")).rule)\n                    addItemAfter('搜索_创作人', D)\n                }\n                return \"hiker://empty\";\n            }, Color, PAGE),\n            extra: {\n                id: '搜索_创作人'\n            }\n        })\n    }\n}"},{"col_type":"text_icon","name":"首页四大按钮","path":"首页四大按钮","rule":"tips_title = getMyVar(\"主标题\", '分类作品库')\naddListener('onClose', $.toString(() => {\n    clearMyVar('首页_分类');\n    clearMyVar('首页_精选');\n    clearMyVar('首页_热门');\n}))\nd.push({\n    title: \"发现\",\n    pic_url: 'https://oss-xpc0.xpccdn.com/Upload/edu/2023/03/24641d733b8df84.png',\n    col_type: 'icon_small_4',\n    url: $(\"#noLoading#\").lazyRule((XPC) => {\n        if (getMyVar('主标题') != '分类作品库') {\n            putMyVar('主标题', '分类作品库');\n            if (!getMyVar('首页_分类')) eval(JSON.parse(fetch(\"hiker://page/首页列表\")).rule);\n            deleteItemByCls('首页');\n            updateItem(\"四大金刚\", {\n                title: '<big><b><font color=#000>分类作品库</font></b></big>'\n            });\n            addItemAfter('四大金刚', JSON.parse(getMyVar('首页_分类')))\n        }\n        return \"hiker://empty\";\n    },XPC)\n})\n\nd.push({\n    title: \"推荐\",\n    pic_url: 'https://oss-xpc6.xpccdn.com/default/O9njC35iecU0qt3zdvk7TqaNAnhU6o0VkaePtymy.png',\n    col_type: 'icon_small_4',\n    url: $(\"#noLoading#\").lazyRule(() => {\n        if (getMyVar('主标题') != '推荐') {\n            putMyVar('主标题', '推荐');\n            if (!getMyVar('首页_推荐')) eval(JSON.parse(fetch(\"hiker://page/首页列表\")).rule);\n            deleteItemByCls('首页');\n            updateItem(\"四大金刚\", {\n                title: '<big><b><font color=#000>短片推荐</font></b></big>'\n            });\n            addItemAfter('四大金刚', JSON.parse(getMyVar('首页_推荐')))\n        }\n        return \"hiker://empty\";\n    }),\n})\n\nd.push({\n    title: '精选',\n    pic_url: 'https://oss-xpc0.xpccdn.com/Upload/edu/2023/03/24641d733b935b3.png',\n    col_type: 'icon_small_4',\n    url: $(\"#noLoading#\").lazyRule(() => {\n        if (getMyVar('主标题') != '精选') {\n            putMyVar('主标题', '精选');\n            if (!getMyVar('首页_精选')) eval(JSON.parse(fetch(\"hiker://page/首页列表\")).rule);\n            deleteItemByCls('首页');\n            updateItem(\"四大金刚\", {\n                title: '<big><b><font color=#000>编辑精选</font></b></big>'\n            });\n            addItemAfter('四大金刚', JSON.parse(getMyVar('首页_精选')))\n        }\n        //refreshPage();\n        return \"hiker://empty\";\n    }),\n})\n\nlet city;\nlet str=fetch('http://whois.pconline.com.cn/ipJson.jsp?callback=testJson&ip=');\nconst matchedJson = str.match(/\\s*testJson\\s*\\((\\{.*?\\})\\)/);\nif (matchedJson && matchedJson.length > 1) {\n    const jsonObj = JSON.parse(matchedJson[1]);\n    const province = jsonObj.pro.replace('省', '');\n    city=province;\n    //log(province);\n} else {\n    console.error(\"获取位置出错\");\n    city='北京';\n}\nd.push({\n    title: city,\n    pic_url: 'https://oss-xpc0.xpccdn.com/Upload/edu/2023/03/24641d733b80079.png',\n    col_type: 'icon_small_4',\n    url: $(\"#noLoading#\").lazyRule(() => {\n        if (getMyVar('主标题') != '本地周边false') {\n            putMyVar('主标题', '本地周边');\n            eval(JSON.parse(fetch(\"hiker://page/首页列表\")).rule)\n            deleteItemByCls('首页');\n            updateItem(\"四大金刚\", {\n                title: '<big><b><font color=#000>本地周边</font></b></big>'\n            });\n            addItemAfter(\"四大金刚\", D);\n        }\n        return \"hiker://empty\";\n    }),\n})\n\nd.push({\n    title: '<big><b><font color=#000>' + tips_title + '</font></b></big>',\n    url: $().lazyRule(() => {\n        return eval(JSON.parse(fetch(\"hiker://page/进入搜索页\")).rule)\n    }),\n    img: \"https://hikerfans.com/weisyr/icon/search.svg\",\n    col_type: \"text_icon\",\n    extra: {\n        lineVisible: false,\n        id: '四大金刚',\n        newWindow: true,\n        windowId: \"新片场搜索\"\n    }\n});"},{"col_type":"movie_3","name":"🔎进入搜索页","path":"进入搜索页","rule":"$('hiker://empty#fypage#gameTheme##noHistory##noRecordHistory##autoCache##noRefresh##noLoading#').rule(() => {\n    setPageTitle('新片场·搜索')\n    var d = [];\n    var PAGE = MY_PAGE;//MY_URL.split('#')[1]\n            /*\n    for (let i = 0; i < 30; i++) {\n        d.push({\n            col_type: \"blank_block\"\n        })\n    }\n    */\n    addListener('onClose', $.toString(() => {\n        clearMyVar('搜关键字');\n        clearMyVar('作/创/文');\n        clearMyVar('页码');\n    }))\n    var tips_title = getMyVar(\"搜关键字\")\n    var tips_select = getMyVar(\"作/创/文\", 'article');\n    //log(tips_select)\n    eval(JSON.parse(fetch(\"hiker://page/搜索页上部\")).rule)\n    //showLoading('Loading');\n    if (tips_title) {\n        if (tips_select == 'article') {\n            //搜作品\n            var APP_URL = \"https://app.xinpianchang.com/v2/search?type=\" + getMyVar(\"作/创/文\", 'article') + \"&kw=\" + getMyVar(\"搜关键字\") + '&page=' + PAGE;\n            var app_lists = JSON.parse(request(APP_URL)).data.list;\n            eval(JSON.parse(fetch(\"hiker://page/app分类与搜索列表\")).rule)\n        } else if (tips_select == 'creator') {\n            //搜人\n            eval(JSON.parse(fetch(\"hiker://page/app创作人搜索列表\")).rule)\n        }\n        d = d.concat(D)\n    }\n    //hideLoading();\n    setResult(d)\n})"},{"col_type":"movie_3","name":"app播放链接","path":"app播放链接","rule":"$('#noLoading#'+input).lazyRule(() => {\n    try {\n        showLoading('Loading');\n        var play_url_json = JSON.parse(request(input)).data;\n        let mid = play_url_json.video_library_id;\n        let play_urls = JSON.parse(request('https://mod-api.xinpianchang.com/mod/api/v2/media/'+mid+'?appKey=61a2f329348b3bf77')).data.resource.progressive;\n        // 开始获取弹幕\n        let danmu = 'https://oss-danmaku12.xpccdn.com/' + mid + '.txt';\n        let code = request(danmu);\n        let arr = code.split(\"\\n\");\n        let r = []\n        for (let i = 0; i < arr.length; i++) {\n            try {\n                var line = JSON.parse(arr[i])\n                if (line.content) {\n                    r.push({\n                        text: line.content,\n                        time: line.offset\n                    })\n                }\n            } catch (e) {}\n        }\n        writeFile(\"hiker://files/cache/danmu.json\", JSON.stringify(r))\n        // 结束弹幕获取\n        let urls = [];\n        let names = [];\n        let head = [];\n        for (let i in play_urls) {\n            urls.push(play_urls[i].url)\n            names.push(play_urls[i].profile)\n            head.push({'User-Agent': 'ExoPlayerLib'})\n        }\n        let all_url = JSON.stringify({\n            urls: urls,\n            names: names,\n            danmu: \"hiker://files/cache/danmu.json\",\n            headers: head\n        });\n        hideLoading();\n        return all_url\n    } catch (e) {\n        let url = input.split('url=')[1]\n        url = unescape(url)\n        return 'web://' + url\n    }\n})"},{"col_type":"movie_3","name":"app创作人搜索列表","path":"app创作人搜索列表","rule":"var D = [];\nvar APP_URL = \"https://app.xinpianchang.com/v2/search?type=\" + getMyVar(\"作/创/文\", 'creator') + \"&kw=\" + getMyVar(\"搜关键字\") + '&page=' + PAGE;\nvar app_lists = JSON.parse(request(APP_URL)).data.list;\nif (app_lists.length > 0) {\n    for (let i = 0; i < app_lists.length; i++) {\n        setPageTitle(app_lists[i].username)\n        var USER_HOME = app_lists[i].url.replace(/newstudios/, 'https')\n        for (let i = 0; i < 10; i++) {\n            D.push({\n                col_type: \"blank_block\",\n                extra: {\n                    cls: '搜索'\n                }\n            })\n        }\n        var url = $('#noLoading#' + USER_HOME).lazyRule(() => {\n            return eval(JSON.parse(fetch(\"hiker://page/创作人首页\")).rule);\n        });\n        D.push({\n            img: app_lists[i].avatar + '@Referer=' + app_lists[i].avatar,\n            title: app_lists[i].username,\n            desc: '',\n            url: url,\n            col_type: 'avatar',\n            extra: {\n                cls: '搜索'\n            }\n        })\n\n        var occupation = app_lists[i].occupation;\n        var follower = '粉丝 ' + app_lists[i].count.count_follower;\n        if (!occupation) {\n            occupation = ''\n        } else {\n            occupation = occupation + ' · '\n        }\n        D.push({\n            title: \"““”” <small><font color='grey'>\" + '\t\t\t\t\t' + occupation + follower + \"</font> </small>\",\n            url: url,\n            col_type: 'text_1',\n            extra: {\n                cls: '搜索'\n            }\n        })\n    }\n} else {\n    eval(JSON.parse(fetch(\"hiker://page/END\")).rule)(D)\n}"},{"col_type":"movie_3","name":"创作人首页","path":"创作人首页","rule":"$('hiker://empty#fypage#immersiveTheme#noHistory##noRecordHistory##noRefresh#').rule((input) => {\n    addListener('onClose', $.toString(() => {\n        clearMyVar('主页类别');\n    }))\n    var tips_select = getMyVar(\"主页类别\", 'new');\n    try {\n        var PAGE = MY_PAGE;\n        var d = [];\n        // 头部\n        var USER_JSON = JSON.parse(request(input)).data;\n        var ID = USER_JSON.id;\n        var app_background = USER_JSON.app_background;\n        if (!app_background) app_background = 'https://hikerfans.com/weisyr/img/xinpianchang.jpg';\n        var user_avatar = USER_JSON.avatar;\n        var user_name = USER_JSON.username;\n        setPageTitle(user_name)\n        var user_desc = USER_JSON.verify_description;\n        var user_about = USER_JSON.about;\n        //人气\n        var count_popularity = USER_JSON.count.count_popularity;\n        if (count_popularity > 10000) count_popularity = (count_popularity / 10000).toFixed(1) + 'w';\n        //粉丝\n        var count_follower = USER_JSON.count.count_follower;\n        if (count_follower > 1000) count_follower = (count_follower / 1000).toFixed(1) + 'k';\n        if (PAGE == 1) {\n            d.push({\n                col_type: 'pic_1_full',\n                title: '0',\n                img: app_background,\n                url: 'hiker://empty',\n            });\n            d.push({\n                col_type: 'avatar',\n                title: user_name + '\\t\\t\\t\\t' + \"<font color=grey>\" + '人气 ' + count_popularity + ' · ' + '粉丝 ' + count_follower + \"</font>\",\n                img: user_avatar,\n                url: 'hiker://empty',\n            });\n            d.push({\n                col_type: 'line',\n            });\n            for (let i = 0; i < 5; i++) {\n                d.push({\n                    col_type: \"blank_block\",\n                })\n            }\n            var Color = \"#FA7298\";\n\n            function getHead(titles) {\n                return '‘‘’’<strong><font color=\"' + Color + '\">' + titles + '</front></strong>';\n            }\n            d.push({\n                col_type: 'text_3',\n                title: tips_select == 'new' ? getHead(\"最新\") : '最新',\n                url: $('#noLoading#' + input).lazyRule((PAGE) => {\n                    if (getMyVar('主页类别') != 'new') {\n                        putMyVar('主页类别', 'new');\n                        updateItem('主页热门', {\n                            title: \"热门\"\n                        })\n                        updateItem('主页专辑', {\n                            title: \"专辑\"\n                        });\n                        updateItem('主页最新', {\n                            title: '‘‘’’<strong><font color=\"#FA7298\">最新</front></strong>'\n                        });\n                        showLoading('Loading');\n                        deleteItemByCls('end');\n                        //eval(JSON.parse(fetch(\"hiker://page/创作人作品列表\")).rule)\n                        deleteItemByCls('主页');\n                        hideLoading();\n                        //addItemAfter('主页专辑', D);\n                        addItemAfter('主页专辑', JSON.parse(getMyVar('作品new' + input)));\n                    }\n                    return \"hiker://empty\";\n                }, PAGE),\n                extra: {\n                    id: '主页最新'\n                }\n            });\n            d.push({\n                col_type: 'text_3',\n                title: tips_select == 'view' ? getHead(\"热门\") : '热门',\n                url: $('#noLoading#' + input).lazyRule((PAGE) => {\n                    if (getMyVar('主页类别') != 'view') {\n                        putMyVar('主页类别', 'view');\n                        updateItem('主页最新', {\n                            title: \"最新\"\n                        });\n                        updateItem('主页专辑', {\n                            title: \"专辑\"\n                        });\n                        updateItem('主页热门', {\n                            title: '‘‘’’<strong><font color=\"#FA7298\">热门</front></strong>'\n                        });\n\n                        deleteItemByCls('end');\n                        if (!getMyVar('作品view' + input)) {\n                            showLoading('Loading');\n                            eval(JSON.parse(fetch(\"hiker://page/创作人作品列表\")).rule);\n                            deleteItemByCls('主页');\n                            hideLoading();\n                            addItemAfter('主页专辑', D);\n                        } else {\n                            deleteItemByCls('主页');\n                            addItemAfter('主页专辑', JSON.parse(getMyVar('作品view' + input)));\n                        }\n                    }\n                    return \"hiker://empty\";\n                }, PAGE),\n                extra: {\n                    id: '主页热门'\n                }\n            });\n            d.push({\n                col_type: 'text_3',\n                title: tips_select == 'collections' ? getHead(\"专辑\") : '专辑',\n                url: $('#noLoading#' + input).lazyRule((PAGE) => {\n                    if (getMyVar('主页类别') != 'collections') {\n                        putMyVar('主页类别', 'collections');\n                        updateItem('主页热门', {\n                            title: \"热门\"\n                        });\n                        updateItem('主页最新', {\n                            title: \"最新\"\n                        });\n                        updateItem('主页专辑', {\n                            title: '‘‘’’<strong><font color=\"#FA7298\">专辑</front></strong>'\n                        });\n\n                        deleteItemByCls('end');\n                        if (!getMyVar('专辑' + input)) {\n                            showLoading('Loading');\n                            eval(JSON.parse(fetch(\"hiker://page/创作人专辑列表\")).rule)\n\n                            deleteItemByCls('主页');\n                            hideLoading();\n                            addItemAfter('主页专辑', D);\n                        } else {\n                            deleteItemByCls('主页');\n                            addItemAfter('主页专辑', JSON.parse(getMyVar('专辑' + input)));\n                        }\n                    }\n                    return \"hiker://empty\";\n                }, PAGE),\n                extra: {\n                    id: '主页专辑'\n                }\n            });\n\n            d.push({\n                col_type: 'pic_1_full',\n                title: '0',\n                img: 'https://hikerfans.com/weisyr/img/Loading2.gif',\n                url: 'hiker://empty',\n                extra: {\n                    id: 'loading'\n                }\n            });\n        }\n        // 列表部分\n        if (['new', 'view'].includes(tips_select) && PAGE > 1) {\n            eval(JSON.parse(fetch(\"hiker://page/创作人作品列表\")).rule)\n            d = d.concat(D)\n        }\n        if (tips_select == 'collections' && PAGE > 1) {\n            eval(JSON.parse(fetch(\"hiker://page/创作人专辑列表\")).rule)\n            d = d.concat(D)\n        }\n\n        setResult(d);\n        if (['new', 'view'].includes(tips_select) && PAGE == 1) {\n            eval(JSON.parse(fetch(\"hiker://page/创作人作品列表_多线程\")).rule)\n        }\n    } catch (e) {\n        back(false)\n    }\n}, input)"},{"col_type":"movie_3","name":"♨️首页固定JSON","path":"首页固定JSON","rule":"var index_url = 'https://app.xinpianchang.com/page/discovery';\nvar index_JSON = JSON.parse(request(index_url, {\n    headers: {\n        'User-Agent': \"NewStudios/2.3.5 (com.xinpianchang.newstudios; build:1150; Android 13)\"\n    },\n    method: 'GET'\n})).data;\nlet XPC = index_JSON.categories;\nlet banners = index_JSON.banners;\nvar t = Math.floor(Math.random() * banners.length);\nbanners_0 = banners[t];\nvar PLAY_LINKS = banners_0.url.replace(/newstudios/, 'https');\n\nregisterTask('新片场', 3000, $.toString((banners) => {\n    let i = getVar('新片场计时', '0');\n    if (i == banners.length) i = 0;\n    updateItem(\"banners\", {\n        img: banners[i].cover,\n        url: $('#noLoading#'+ banners[i].url.replace(/newstudios/, 'https')).lazyRule(() => {\n            return eval(JSON.parse(fetch(\"hiker://page/app播放链接\")).rule);\n        }),\n    });\n    i++\n    putVar('新片场计时', i);\n}, banners))\n\nd.push({\n    //title:banners.title,\n    img: banners_0.cover,\n    col_type: 'card_pic_1',\n    desc: '0',\n    url: $('#noLoading#'+PLAY_LINKS).lazyRule(() => {\n        return eval(JSON.parse(fetch(\"hiker://page/app播放链接\")).rule);\n    }),\n    extra: {\n        id: 'banners'\n    }\n})\neval(JSON.parse(fetch(\"hiker://page/首页四大按钮\")).rule)"},{"col_type":"movie_3","name":"创作人作品列表","path":"创作人作品列表","rule":"// 时间戳转换\neval(JSON.parse(fetch(\"hiker://page/时间戳转换\")).rule);\nvar list_url = input + '/articles?is_hide_in_space=0&order=' + getMyVar(\"主页类别\", 'new') + '&return_struct_type=user_home&type=public&page=' + PAGE;\n//log(list_url)\nvar D = [];\nvar APP_JSON = JSON.parse(request(list_url)).data;\n/*var total = APP_JSON.total;\nputMyVar('作品数量',total);*/\nAPP_JSON = APP_JSON.list;\nif (APP_JSON.length > 0) {\n    for (let i = 0; i < APP_JSON.length; i++){\n        var app_cache = APP_JSON[i].resource;\n        var PLAY_LINKS = app_cache.url.replace(/newstudios/, 'https');\n        var like = app_cache.count.count_like;\n        var view = app_cache.count.count_view;\n        if (like > 1000) like = (like / 1000).toFixed(1) + 'k';\n        if (view > 10000) view = (view / 10000).toFixed(1) + 'w';\n        //var img = app_cache.cover;\n        var img = $(app_cache.cover).image(() => $.require(\"Img?rule=\" + MY_TITLE).compress());\n        var title = app_cache.title;\n        var publish_time = app_cache.publish_time;\n        // 时间戳转年月日\n        publish_time = timestampToTime(tm = publish_time, ts = 0)\n        D.push({\n            col_type: 'movie_1_left_pic',\n            title: title,\n            desc: \"““”” <small><font color='grey'>\" + publish_time + '\\n' + like + ' 喜欢' + ' · ' + view + ' 观看' + \"</font> </small>\",\n            img: img,\n            url: $(PLAY_LINKS).lazyRule(() => {\n                putMyVar('详细类别', '简介');\n                return eval(JSON.parse(fetch(\"hiker://page/视频详情页\")).rule);\n            }),\n            extra: {\n                cls: '主页'\n            }\n        });\n    }\n} else {\n    eval(JSON.parse(fetch(\"hiker://page/END\")).rule)(D)\n}\nif(PAGE == 1) putMyVar('作品'+getMyVar(\"主页类别\", 'new')+input, JSON.stringify(D));"},{"col_type":"movie_3","name":"创作人专辑列表","path":"创作人专辑列表","rule":"var D = [];\nvar list_url = input + '/collections?page=' + PAGE;\nvar APP_JSON = JSON.parse(request(list_url)).data;\nvar total = APP_JSON.total;\nAPP_JSON = APP_JSON.list\nif (total == '0' &&  PAGE == 1) {\n    for (let i = 0; i < 30; i++) {\n        D.push({\n            col_type: \"blank_block\",\n            extra: {\n                cls: '主页',\n            }\n        })\n    }\n    D.push({\n        title: \"““”” <small><font color='grey'>\" + '——   还没有创建专辑   ——' + \"</font> </small>\",\n        col_type: \"text_center_1\",\n        url: 'hiker://empty',\n        extra: {\n            lineVisible: false,\n            cls: '主页',\n        }\n    })\n}\nif (APP_JSON.length>0) {\n    for (let i = 0; i < APP_JSON.length; i++) {\n        var app_cache = APP_JSON[i];\n        var Album_url = app_cache.url.replace(/newstudios/, 'https') + '/articles?is_detail=true&page=';\n        var bg_img = app_cache.cover_url;\n        var desc = app_cache.description;\n        var article = app_cache.count.count_article;\n        var like = app_cache.count.count_liked;\n        var view = app_cache.count.count_viewed;\n        if (like > 1000) like = (like / 1000).toFixed(1) + 'k';\n        if (view > 10000) view = (view / 10000).toFixed(1) + 'w';\n        var img = app_cache.cover_url;\n        var title = app_cache.title;\n        var put_title = \"““”” <small><font color='grey'>\" + '作品 ' + article + ' · ' + '浏览 ' + view + ' · ' + '赞 ' + like + \"</font> </small>\";\n        D.push({\n            col_type: 'pic_1_card',\n            title: title,\n            img: bg_img + '@Referer=' + bg_img,\n            desc: '作品 ' + article + '  ·  ' + '浏览 ' + view + '  ·  ' + '赞 ' + like,\n            url: $('hiker://empty#fypage#immersiveTheme#noHistory##noRecordHistory##autoCache##noRefresh#').rule((bg_img, put_title, desc, Album_url) => {\n                var PAGE = MY_PAGE;\n                var d = [];\n                var url = Album_url + PAGE;\n                var APP_JSON = JSON.parse(request(url)).data.list;\n                if (PAGE == 1) {\n                    d.push({\n                        col_type: 'pic_1_full',\n                        url: 'hiker://empty',\n                        img: bg_img,\n                    });\n                    d.push({\n                        col_type: 'text_1',\n                        title: put_title,\n                        url: 'hiker://empty',\n                        extra: {\n                            lineVisible: false\n                        }\n                    });\n                    d.push({\n                        col_type: 'rich_text',\n                        title: \"<small><font color='grey'>\" + desc + \"</font> </small>\",\n                        url: 'hiker://empty',\n                    });\n                }\n                if (APP_JSON.length != \"\") {\n                    for (let i in APP_JSON) {\n                        var PLAY_LINKS = APP_JSON[i].url.replace(/newstudios/, 'https');\n                        var title = APP_JSON[i].title;\n                        var img = APP_JSON[i].cover;\n                        var cat = APP_JSON[i].categories;\n                        var cat_all = []\n                        for (var i in cat) {\n                            var cat_1 = cat[i].category_name;\n                            var cat_2 = cat[i].sub.category_name;\n                            cat_all.push(\n                                cat_1 + '-' + cat_2 + ' \t'\n                            )\n                        }\n                        cat_all = cat_all.join(\"\")\n                        var cat_title = '““””<small><font color=grey>' + cat_all + '</font></small>';\n                        d.push({\n                            col_type: 'movie_1_left_pic',\n                            title: title,\n                            desc: cat_title,\n                            img: img,\n                            url: $(PLAY_LINKS).lazyRule(() => {\n                                putMyVar('详细类别', '简介');\n                                return eval(JSON.parse(fetch(\"hiker://page/视频详情页\")).rule);\n                            }),\n                        });\n                    }\n                }\n                setResult(d);\n            }, bg_img, put_title, desc, Album_url),\n            extra: {\n                cls: '主页',\n            }\n        });\n    }\n} else if (total!= '0'){\n    eval(JSON.parse(fetch(\"hiker://page/END\")).rule)(D)\n}\nif(PAGE == 1) putMyVar('专辑'+input, JSON.stringify(D));"},{"col_type":"movie_3","name":"END","path":"END","rule":"function(arr){\narr.push({\n    title: \"““”” <small><font color='grey'>\" + '——   END   ——' + \"</font> </small>\",\n    col_type: \"text_center_1\",\n    url: 'hiker://empty',\n    extra: {\n        lineVisible: false,\n        id: 'end',\n        cls:'end'\n    }\n})\n}"},{"col_type":"movie_3","name":"时间戳转换","path":"时间戳转换","rule":"function timestampToTime(tm, ts) {\n\t\tundefined\n\t\tvar date = new Date(tm * 1000); //时间戳为10位需*1000，时间戳为13位的话不需乘1000\n\t\tvar Y = date.getFullYear() + '-';\n\t\tvar M = (date.getMonth() + 1 < 10 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1) + '-';\n\t\tvar D = date.getDate();\n\t\tvar h = ' | ' + date.getHours() + ':';\n\t\tvar m = date.getMinutes();\n\t\tif(m<10) m = '0'+m;\n\t\tm = m + ':'\n\t\tvar s = date.getSeconds();\n\t\tif(s<10) s = '0'+s;\n\t\tif (ts == 0) return Y + M + D;\n\t\tif (ts == 1) return Y + M + D + h + m + s;\n\t}"},{"col_type":"movie_3","name":"app_二级列表","path":"app_二级列表","rule":"$('hiker://empty#fypage##noHistory##autoCache##noRecordHistory##immersiveTheme##noRefresh##noLoading#').rule((input) => {\n    var d = [];\n    //var PAGE = MY_URL.split('#')[1];\n    // 进入二级清空重置一次\n    addListener('onClose', $.toString(() => {\n        clearVar('cate_2');\n        clearVar('current_url')\n    }))\n    // 当前 url\n    const CURRENT_URL = getVar('current_url', input)\n    const CATE_LEVEL_2 = getVar(\"cate_2\", \"0\")\n    // 获取页面内容\n    let App_Json = JSON.parse(request(CURRENT_URL + '&page=' + MY_PAGE)).data;\n    // 第一页独占\n    if (MY_PAGE == 1) {\n        eval(JSON.parse(fetch(\"hiker://page/TopImg\")).rule)\n        d.push({\n            col_type: \"blank_block\"\n        })\n        let categorie_level_2 = App_Json.header;\n        // 遍历二级标签\n        categorie_level_2.categories.forEach((cate_2, index_2) => {\n            let title = cate_2['title'];\n            if (title == getPageTitle()) {\n                for (let i in cate_2.sub) {\n                    title = cate_2.sub[i];\n                    let link = title.value;\n                    title = title.title;\n                    d.push({\n                        title: CATE_LEVEL_2 == title ? \"““\" + title + \"””\" : title,\n                        col_type: 'scroll_button',\n                        url: $().lazyRule((title, link) => {\n                            putVar('cate_2', title)\n                            putVar('current_url', \"https://app.xinpianchang.com/articles?category_id=\" + link);\n                            refreshPage()\n                            return \"hiker://empty\"\n                        }, title, link)\n                    })\n\n                }\n\n            }\n\n        })\n        d.push({\n            col_type: \"blank_block\"\n        })\n    }\n    // var APP_URL ='';\n    var app_lists = App_Json.list;\n    eval(JSON.parse(fetch(\"hiker://page/app分类与搜索列表\")).rule)\n    d = d.concat(D)\n    setResult(d)\n},input)"},{"col_type":"text_1","name":"视频详情页","path":"视频详情页","rule":"$('hiker://empty#fypage##gameTheme##noHistory##noRefresh#').rule((input) => {\n    //clearMyVar('评论' + getMyVar('cache_link'));\n    putMyVar('cache' + input, input);\n    //getMyVar('cache'+input);\n    addListener('onClose', $.toString(() => {\n        clearMyVar('页码');\n        clearMyVar('详情');\n        clearMyVar('详细类别');\n        clearMyVar('相似视频'+input);\n    }))\n    var PAGE = MY_PAGE;\n    var d = [];\n    try {\n        var tips_select = getMyVar(\"详细类别\", '简介');\n        var DATA_JSON = JSON.parse(request(input)).data;\n        //评论数\n        var total = DATA_JSON.count.count_comment;\n        //视频id\n        var ID = DATA_JSON.id;\n        var bg_img = DATA_JSON.cover;\n        var title = DATA_JSON.title;\n        setPageTitle(DATA_JSON.title)\n        // 分类[i].category_name.sub.category_name\n        var cat = DATA_JSON.categories;\n        // 时间戳转换\n        eval(JSON.parse(fetch(\"hiker://page/时间戳转换\")).rule);\n        // 发布时间\n        var publish_time = DATA_JSON.publish_time;\n        publish_time = timestampToTime(tm = publish_time, ts = 0)\n        // 播放量\n        var view = DATA_JSON.count.count_view;\n        if (view > 10000) view = (view / 10000).toFixed(1) + 'w';\n        // 简介\n        var content = DATA_JSON.content;\n        // 喜欢点赞\n        var like = DATA_JSON.count.count_like;\n        if (like > 1000) like = (like / 1000).toFixed(1) + 'k';\n        // 收藏\n        var collect = DATA_JSON.count.count_collect;\n        if (collect > 1000) collect = (collect / 1000).toFixed(1) + 'k';\n        // 分享\n        var share = DATA_JSON.count.count_share;\n        if (share > 1000) share = (share / 1000).toFixed(1) + 'k';\n        // 标签[i].name\n        var tags = DATA_JSON.tags;\n        // 创作人.url(主页).username(名字).avatar(名字)\n        var user = DATA_JSON.author.userinfo;\n        putMyVar('作者', user.username);\n        var Color = \"#FA7298\";\n\n        function getHead(titles) {\n            return '‘‘’’<strong><font color=\"' + Color + '\">' + titles + '</front></strong>';\n        }\n\n        if (PAGE == 1) {\n            d.push({\n                col_type: 'pic_1_full',\n                title: '0',\n                img: bg_img,\n                url: $('#noLoading#' + input).lazyRule(() => {\n                    return eval(JSON.parse(fetch(\"hiker://page/app播放链接\")).rule);\n                }),\n                extra: {\n                    id: title\n                }\n            });\n            for (let i = 0; i < 10; i++) {\n                d.push({\n                    col_type: \"blank_block\",\n                })\n            }\n            var 评论tips = '评论 ' + '‘‘' + total + '’’';\n            d.push({\n                col_type: 'text_2',\n                title: tips_select == '简介' ? getHead(\"简介\") : '简介',\n                url: $('#noLoading#' + input).lazyRule((Color, 评论tips) => {\n                    putMyVar('页码', '1');\n                    if (getMyVar(\"详细类别\") != '简介') {\n                        putMyVar('详细类别', '简介');\n                        updateItem('简介', {\n                            title: '‘‘’’<strong><font color=\"' + Color + '\">' + '简介' + '</front></strong>'\n                        });\n                        updateItem('评论'+input, {\n                            title: 评论tips\n                        });\n                        deleteItemByCls('详情页'+input);\n                        deleteItemByCls('end');\n                        addItemAfter('评论'+input, JSON.parse(getMyVar('详情' + getMyVar('cache' + input))));\n                    }\n                    return \"hiker://empty\";\n                }, Color, 评论tips),\n                extra: {\n                    id: '简介'\n                }\n            });\n            d.push({\n                col_type: 'text_2',\n                title: tips_select == '评论' ? getHead(评论tips) : 评论tips,\n                url: $('#noLoading#' + input).lazyRule((Color, 评论tips, ID, PAGE) => {\n                    putMyVar('相似视频'+input, '0');\n                    if (getMyVar(\"详细类别\") != '评论') {\n                        putMyVar('详细类别', '评论');\n                        deleteItemByCls('详情页'+input)\n                        deleteItemByCls('end')\n                        deleteItemByCls('相似列表'+input)\n                        if (!getMyVar('评论' + getMyVar('cache' + input))) {\n                            eval(JSON.parse(fetch(\"hiker://page/视频评论\")).rule)\n                            addItemAfter('评论'+input, D);\n                        } else {\n                            addItemAfter('评论'+input, JSON.parse(getMyVar('评论' + getMyVar('cache' + input))));\n                        }\n                        updateItem('简介', {\n                            title: \"简介\"\n                        });\n                        updateItem('评论'+input, {\n                            title: '‘‘’’<strong><font color=\"' + Color + '\">' + 评论tips + '</front></strong>'\n                        });\n\n                    }\n                    return \"hiker://empty\";\n                }, Color, 评论tips, ID, PAGE),\n                extra: {\n                    id: '评论'+input\n                }\n            });\n            \n            eval(JSON.parse(fetch(\"hiker://page/视频信息\")).rule)\n            if (tips_select == '简介') d = d.concat(D);\n            \n        }\n        if (tips_select == '评论') {\n            eval(JSON.parse(fetch(\"hiker://page/视频评论\")).rule)\n            d = d.concat(D)\n        }\n        setResult(d);\n    } catch (e) {\n        back(false)\n    }\n}, input)"},{"col_type":"movie_3","name":"视频信息","path":"视频信息","rule":"var D = []\nvar user = DATA_JSON.author.userinfo;\nvar USER_HOME = user.url.replace(/newstudios/, 'https');\nvar download_ID =DATA_JSON.video_library_id;\nD.push({\n    col_type: 'text_1',\n    title: '““””<b><font color=#000>' + title + '</font></b>',\n    url: \"hiker://empty\",\n    extra: {\n        lineVisible: false,\n        cls: '详情页'+input\n    }\n});\nvar cat_all = []\nfor (var i in cat) {\n    var cat_1 = cat[i].category_name;\n    var cat_2 = cat[i].sub.category_name;\n    cat_all.push(\n        cat_1 + '-' + cat_2 + ' \t')\n}\ncat_all = cat_all.join(\"\")\nvar cat_title = '““””<small><font color=grey>' + cat_all + ' \t' + publish_time + ' \t\t' + view + '次播放' + '</font></small>';\nD.push({\n    title: cat_title,\n    url: 'hiker://empty',\n    col_type: 'text_1',\n    extra: {\n        lineVisible: false,\n        cls: '详情页'+input\n    }\n});\nD.push({\n    col_type: 'rich_text',\n    title: \"<small><font color=000>\" + content + \"</font> </small>\",\n    url: \"hiker://empty\",\n    extra: {\n        cls: '详情页'+input\n    }\n});\nD.push({\n    title: like,\n    pic_url: 'https://hikerfans.com/weisyr/icon/bbs点赞.svg',\n    url: \"hiker://empty\",\n    col_type: 'icon_small_4',\n    extra: {\n        cls: '详情页'+input\n    }\n})\nD.push({\n    title: collect,\n    pic_url: 'https://hikerfans.com/weisyr/icon/bbs收藏.svg',\n    url: \"hiker://empty\",\n    col_type: 'icon_small_4',\n    extra: {\n        cls: '详情页'+input\n    }\n})\nD.push({\n    title: share,\n    pic_url: 'https://hikerfans.com/weisyr/icon/bbs分享.svg',\n    url: \"hiker://empty\",\n    col_type: 'icon_small_4',\n    extra: {\n        cls: '详情页'+input\n    }\n})\nD.push({\n    title: '下载',\n    pic_url: 'https://hikerfans.com/weisyr/icon/bbs下载.svg',\n    url: $('#noLoading#'+download_ID).lazyRule(() => {\n            let play_Url =JSON.parse(request('https://mod-api.xinpianchang.com/mod/api/v2/media/'+input+'?appKey=61a2f329348b3bf77')).data.resource.progressive[0].url;\n            return 'download://' + play_Url+';{User-Agent@ExoPlayerLib}'\n        }),\n    col_type: 'icon_small_4',\n    extra: {\n        cls: '详情页'+input\n    }\n})\nD.push({\n    col_type: 'line',\n    extra: {\n        cls: '详情页'+input\n    }\n});\nfor (let i = 0; i < 2; i++) {\n    D.push({\n        col_type: \"blank_block\",\n        extra: {\n            cls: '详情页'+input\n        }\n    })\n}\n\nfor (let i in tags) {\n  var tag = tags[i].name;\n  D.push({\n      title: '““””<small><font color=grey>' + tag + '</font></small>',\n      col_type: 'flex_button',\n      url: $().lazyRule((tag) => {\n          putMyVar('搜关键字', tag);\n          return eval(JSON.parse(fetch(\"hiker://page/进入搜索页\")).rule);\n      }, tag),\n      extra: {\n          cls: '详情页'+input\n      }\n  })\n}\nD.push({\n  col_type: \"blank_block\",\n  extra: {\n      cls: '详情页'+input\n  }\n})\nD.push({\n  col_type: 'line',\n  extra: {\n      cls: '详情页'+input\n  }\n});\n\nfor (let i = 0; i < 10; i++) {\n    D.push({\n        col_type: \"blank_block\",\n        extra: {\n            cls: '详情页'+input\n        }\n    })\n}\nD.push({\n    col_type: 'text_1',\n    title: '““””<b><font color=#000>' + '创作人' + '</font></b>',\n    url: \"hiker://empty\",\n    extra: {\n        lineVisible: false,\n        cls: '详情页'+input\n    }\n});\nD.push({\n    title: user.username,\n    img: user.avatar + '@Referer=' + user.avatar,\n    url: $(USER_HOME).lazyRule(() => {\n        return eval(JSON.parse(fetch(\"hiker://page/创作人首页\")).rule);\n    }),\n    col_type: 'icon_2_round',\n    extra: {\n        cls: '详情页'+input\n    }\n})\n/*\nfor (let i = 0; i < 10; i++) {\n    D.push({\n        col_type: \"blank_block\",\n        extra: {\n            cls: '详情页'+input\n        }\n    })\n}\nD.push({\n    col_type: 'line',\n    extra: {\n        cls: '详情页'+input\n    }\n});\nfor (let i = 0; i < 10; i++) {\n    D.push({\n        col_type: \"blank_block\",\n        extra: {\n            cls: '详情页'+input\n        }\n    })\n}\n*/\nD.push({\n    col_type: 'text_2',\n    //title: '““””<b><font color=#000>' + '相似视频' + '</font></b>',\n    title: '相似视频',\n    url: $('#noLoading#' + input).lazyRule((PAGE) => {\n        if (getMyVar('相似视频'+input, '0') == '0') {\n            if (!getMyVar('相似' + getMyVar('cache'+input))) {\n                showLoading('匹配此类视频中');\n                eval(JSON.parse(fetch(\"hiker://page/相似视频\")).rule)\n                hideLoading();\n                addItemAfter('相似视频'+input, D);\n            } else {\n                addItemAfter('相似视频'+input, JSON.parse(getMyVar('相似' + getMyVar('cache'+input))));\n            }\n            putMyVar('相似视频'+input, '1');\n            //putMyVar('详细类别', '相似视频');\n        } else {\n            deleteItemByCls('相似列表'+input);\n            deleteItemByCls('end');\n            putMyVar('相似视频'+input, '0');\n        }\n        return \"hiker://empty\"\n    },PAGE),\n    extra: {\n        lineVisible: false,\n        cls: '详情页'+input,\n        id: '相似视频'+input\n    }\n});\nputMyVar('详情'+getMyVar('cache'+input), JSON.stringify(D))"},{"col_type":"movie_3","name":"视频评论","path":"视频评论","rule":"var D = [];\nvar myPage =JSON.parse(getMyVar('页码','1'));\nif(PAGE > myPage && getMyVar(\"详细类别\") == '评论') {\n    myPage++;\n    putMyVar('页码',JSON.stringify(myPage));\n    //log('新'+myPage)\n}\neval(JSON.parse(fetch(\"hiker://page/时间戳转换\")).rule);\nlet comment_url = \"https://app.xinpianchang.com/comments?resource_id=\" + ID + \"&type=article&page=\" + Number(myPage);\nvar COMMENT_JSON = JSON.parse(request(comment_url)).data;\n// 评论总数\n//log(COMMENT_JSON)\nvar total = COMMENT_JSON.total;\nvar cache_json = COMMENT_JSON.list;\n//无评论\nif (!total || total == 0 && myPage == 1) {\n    for (let i = 0; i < 30; i++) {\n        D.push({\n            col_type: \"blank_block\",\n            extra: {\n                cls: '详情页'+input\n            }\n        })\n    }\n    D.push({\n        title: \"““”” <small><font color='grey'>\" + '——   暂无评论   ——' + \"</font> </small>\",\n        col_type: \"text_center_1\",\n        url: 'hiker://empty',\n        extra: {\n            lineVisible: false,\n            cls: '详情页'+input\n        }\n    })\n}\nif (cache_json.length > 0) {\n    for (let i = 0; i < cache_json.length; i++) {\n        var USER_HOME = 'https://app.xinpianchang.com/user/' + cache_json[i].userid;\n        var user_avatar = cache_json[i].userInfo.avatar;\n        var user_username = cache_json[i].userInfo.username;\n        if (getMyVar('作者') == user_username) user_username = '<font color=#ed9a41>' + user_username +\n            '</font>';\n        // 评论内容\n        var content = cache_json[i].content;\n        // 评论时间\n        var addtime = cache_json[i].addtime;\n        addtime = timestampToTime(tm = addtime, ts = 1)\n        // 回复\n        if (cache_json[i].referer) {\n            var re_name = cache_json[i].referer.userInfo.username;\n            var re_content = cache_json[i].referer.content;\n            var referer = \"<blockquote><font color='grey'>\" + '<code>' + re_name + '</code>' + '<br>' +\n                re_content + \"</font></blockquote>\";\n        } else {\n            var referer = \"\"\n        }\n        for (let i = 0; i < 10; i++) {\n            D.push({\n                col_type: \"blank_block\",\n                extra: {\n                    cls: '详情页'+input\n                }\n            })\n        }\n        D.push({\n            title: user_username + \"<small><font color='grey'>\" + '\\t\\t' + addtime +\n                \"</font></small>\",\n            img: user_avatar + '@Referer=' + user_avatar,\n            url: $(USER_HOME).lazyRule(() => {\n                return eval(JSON.parse(fetch(\"hiker://page/创作人首页\")).rule);\n            }),\n            col_type: 'avatar',\n            extra: {\n                cls: '详情页'+input\n            }\n        });\n        D.push({\n            title: referer + \"<font color='000'>\" + '\\t\\t\\t\\t\\t' + content + \"</font>\",\n            url: 'hiker://empty',\n            col_type: 'rich_text',\n            extra: {\n                cls: '详情页'+input\n            }\n        })\n        D.push({\n            col_type: 'line',\n            extra: {\n                cls: '详情页'+input\n            }\n        });\n    }\n    D.push({\n        col_type: 'blank_block',\n        extra: {\n            cls: '详情页'+input,\n            id: '结束评论'\n        }\n    });\n} else if(total!= 0 ){\n    eval(JSON.parse(fetch(\"hiker://page/END\")).rule)(D)\n}\nif(PAGE == 1) putMyVar('评论'+getMyVar('cache'+input), JSON.stringify(D));"},{"col_type":"movie_3","name":"相似视频","path":"相似视频","rule":"var next_url = input + '/next';\nvar NEXT_JSON = JSON.parse(request(next_url)).data.list;\nvar D = [];\nif (NEXT_JSON.length > 0) {\n    for (let i = 0; i < NEXT_JSON.length; i++) {\n        var PLAY_LINKS = NEXT_JSON[i].data.url.replace(/newstudios/, 'https');\n        var next_title = NEXT_JSON[i].data.title;\n        var next_cover = NEXT_JSON[i].data.cover;\n        var next_view = NEXT_JSON[i].data.count.count_view;\n        if (next_view > 10000) next_view = (next_view / 10000)\n            .toFixed(1) + 'w';\n        var next_like = NEXT_JSON[i].data.count.count_like;\n        if (next_like > 1000) next_like = (next_like / 1000)\n            .toFixed(1) + 'k';\n        var next_user = NEXT_JSON[i].data.author.userinfo.username;\n        let cache_link = input;\n        D.push({\n            col_type: 'movie_1_left_pic',\n            title: next_title,\n            desc: \"““”” <small><font color='grey'>\" + '播放量 ' + next_view + ' · 喜欢 ' + next_like + '\\n' + next_user + \"</font> </small>\",\n            img: next_cover,\n            url: $(PLAY_LINKS).lazyRule((cache_link) => {\n                    clearMyVar('评论' + getMyVar('cache'+cache_link));\n                    putMyVar('详细类别', '简介');\n                    //putMyVar('相似视频', '1');\n                    return eval(JSON.parse(fetch(\"hiker://page/视频详情页\")).rule);\n                },cache_link),\n            extra: {\n                cls: '相似列表'+input\n            }\n        });\n    }\n    eval(JSON.parse(fetch(\"hiker://page/END\")).rule)(D)\n} else {\n    //eval(JSON.parse(fetch(\"hiker://page/END\")).rule)(D)\n}\nif(PAGE == 1) putMyVar('相似'+getMyVar('cache'+input), JSON.stringify(D));"},{"col_type":"movie_3","name":"TopImg","path":"TopImg","rule":"d.push({\n    col_type: 'pic_1_full',\n    title: '0',\n    img: \"https://hikerfans.com/weisyr/img/TopImg0.png\",\n    url: 'hiker://empty',\n});"},{"col_type":"movie_3","name":"创作人作品列表_多线程","path":"创作人作品列表_多线程","rule":"// 时间戳转换\neval(JSON.parse(fetch(\"hiker://page/时间戳转换\")).rule);\nvar list_url = input + '/articles?is_hide_in_space=0&order=' + getMyVar(\"主页类别\", 'new') + '&return_struct_type=user_home&type=public&page=' + PAGE;\n\nvar task = function(obj) {\n    D = [];\n    var APP_JSON = JSON.parse(request(obj.url)).data;\n    APP_JSON = APP_JSON.list;\n    if (APP_JSON.length > 0) {\n        for (let i = 0; i < APP_JSON.length; i++) {\n            var app_cache = APP_JSON[i].resource;\n            var PLAY_LINKS = app_cache.url.replace(/newstudios/, 'https');\n            var like = app_cache.count.count_like;\n            var view = app_cache.count.count_view;\n            if (like > 1000) like = (like / 1000)\n                .toFixed(1) + 'k';\n            if (view > 10000) view = (view / 10000)\n                .toFixed(1) + 'w';\n            var img = app_cache.cover;\n            var title = app_cache.title;\n            var publish_time = app_cache.publish_time;\n            // 时间戳转年月日\n            publish_time = timestampToTime(tm = publish_time, ts = 0)\n            Arr = {\n                col_type: 'movie_1_left_pic',\n                title: title,\n                desc: \"““”” <small><font color='grey'>\" + publish_time + '\\n' + like + ' 喜欢' + ' · ' + view + ' 观看' + \"</font> </small>\",\n                img: img,\n                url: $(PLAY_LINKS).lazyRule(() => {\n                    putMyVar('详细类别', '简介');\n                    return eval(JSON.parse(fetch(\"hiker://page/视频详情页\")).rule);\n                }),\n                extra: {\n                    cls: '主页'\n                }\n            };\n            D.push(Arr);\n        }\n\n    } else {\n        //eval(JSON.parse(fetch(\"hiker://page/END\")).rule)(D)\n    }\n    deleteItem('loading');\n    addItemAfter('主页专辑', D);\n    if(PAGE == 1) putMyVar('作品new'+input, JSON.stringify(D));\n    return D\n};\n\nvar tasks = [{\n    func: task,\n    param: {\n        url: list_url\n    },\n    id: '1'\n}];\n\nbe(tasks);"},{"col_type":"movie_3","name":"图片处理","path":"Img","rule":"js:\nconst ByteArrayOutputStream = java.io.ByteArrayOutputStream;\nconst ByteArrayInputStream = java.io.ByteArrayInputStream;\nconst Bitmap = android.graphics.Bitmap;\nconst BitmapFactory = android.graphics.BitmapFactory;\nconst Canvas = android.graphics.Canvas;\nconst Color = android.graphics.Color;\nconst ColorMatrix = android.graphics.ColorMatrix;\nconst ColorMatrixColorFilter = android.graphics.ColorMatrixColorFilter;\nconst Paint = android.graphics.Paint;\n\nfunction toGrayscale(bmpOriginal) {\n    bmpOriginal = BitmapFactory.decodeStream(bmpOriginal, null, getOptions());\n    let width, height;\n    height = bmpOriginal.getHeight();\n    width = bmpOriginal.getWidth();\n\n    let bmpGrayscale = Bitmap.createBitmap(width, height, Bitmap.Config.RGB_565);\n    let c = new Canvas(bmpGrayscale);\n    let paint = new Paint();\n    let cm = new ColorMatrix();\n    cm.setSaturation(0);\n    let f = new ColorMatrixColorFilter(cm);\n    paint.setColorFilter(f);\n    c.drawBitmap(bmpOriginal, 0, 0, paint);\n    return outInput(bmpGrayscale);\n}\n\nfunction getOptions() {\n    let options = new BitmapFactory.Options();\n    options.inSampleSize = 2.5;\n    return options;\n}\nfunction outInput(bitmap){\n    let baos = new ByteArrayOutputStream();\n    bitmap.compress(Bitmap.CompressFormat.JPEG, 85, baos);\n    return new ByteArrayInputStream(baos.toByteArray());\n}\nfunction compress(bmpOriginal) {\n    bmpOriginal = BitmapFactory.decodeStream(bmpOriginal, null, getOptions());\n    return outInput(bmpOriginal);\n}\n$.exports.compress = () => compress(input);\n$.exports.toGrayscale = () => toGrayscale(input);"}],"title":"新片场","author":"顺","version":20240425,"type":"video","url":"hiker://empty##noRefresh#","col_type":"movie_3","class_name":"","class_url":"","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:\nvar d = [];\nif (MY_PAGE == 1) {\n    eval(JSON.parse(fetch(\"hiker://page/首页固定JSON\")).rule)\n    eval(JSON.parse(fetch(\"hiker://page/首页列表\")).rule)\n    d = d.concat(D)\n}\nsetResult(d);","searchFind":"","search_url":"","group":"①推荐","detail_col_type":"movie_1","detail_find_rule":"","sdetail_col_type":"movie_1","sdetail_find_rule":"indexOf","ua":"mobile","preRule":"","pages":"[{\"col_type\":\"movie_3\",\"name\":\"🔢首页列表\",\"path\":\"首页列表\",\"rule\":\"var tips_title = getMyVar(\\\"主标题\\\", '分类作品库')\\nvar D = [];\\nif (tips_title.indexOf(\\\"作品\\\") > -1) {\\n    for (let i = 0; i < XPC.length; i++) {\\n        var vm = XPC[i];\\n        var app_links = vm.url.replace(/newstudios/, 'https');\\n        var ID = app_links.split('id=')[1]\\n        D.push({\\n            title: vm.category_name,\\n            img: vm.cover,\\n            url: $('#noLoading#'+app_links).lazyRule(() => {\\n                return eval(JSON.parse(fetch(\\\"hiker://page/app_二级列表\\\")).rule);\\n            }),\\n            col_type: 'card_pic_3_center',\\n            desc: '0',\\n            extra: {\\n                cls: '首页'\\n            }\\n        })\\n    }\\n    putMyVar('首页_分类', JSON.stringify(D))\\n} else {\\n    var appurl;\\n    if (tips_title == '推荐') {\\n        //appurl = 'https://app.xinpianchang.com/home/creativeRecommend';\\n        appurl = 'https://app.xinpianchang.com/home/cateRecommend';\\n    }\\n    if (tips_title == '精选') {\\n        appurl = 'https://app.xinpianchang.com/home/selection';\\n    }\\n    if (tips_title == '本地周边') {\\n        appurl = 'https://app.xinpianchang.com/home/sameCity';\\n    }\\n\\n    var vmjson = JSON.parse(request(appurl, {\\n        headers: {\\n            'User-Agent': \\\"NewStudios/2.4.2 (com.xinpianchang.newstudios; build:1260; Android 14; Xiaomi/2211133C/Android 14)\\\"\\n        },\\n        method: 'GET'\\n    })).data;\\n    if (tips_title == '推荐') {\\n       // vmjson = vmjson.children.slice(1, vmjson.length);\\n        vmjson = vmjson.list.slice(1);\\n    } else if (tips_title == '精选') {\\n        vmjson = vmjson.list.slice(1);\\n    } else if (tips_title == '本地周边') {\\n        vmjson = vmjson.children;\\n    }\\n    D.push({\\n        col_type: 'line',\\n        extra: {\\n            id: '首页_空格',\\n            cls: '首页'\\n        }\\n    })\\n    for (let i = 0; i < vmjson.length; i++) {\\n        if (['推荐','精选'].includes(tips_title)) {\\n            var vm = vmjson[i].data.resource;\\n        } else if (['本地周边'].includes(tips_title)) {\\n            var vm = vmjson[i].children[0].model.resource;\\n        }\\n        var PLAY_LINKS = vm.url.replace(/newstudios/, 'https');\\n        var USER_HOME = 'https://app.xinpianchang.com/user/' + vm.user_id;\\n        D.push({\\n            title: vm.author.userinfo.username,\\n            pic_url: vm.author.userinfo.avatar,\\n            url: $('#noLoading#'+USER_HOME).lazyRule(() => {\\n                return eval(JSON.parse(fetch(\\\"hiker://page/创作人首页\\\")).rule);\\n            }),\\n            col_type: 'avatar',\\n            extra: {\\n                cls: '首页'\\n            }\\n        })\\n        D.push({\\n            title: vm.title,\\n            url: $('#noLoading#'+PLAY_LINKS).lazyRule(() => {\\n                putMyVar('详细类别', '简介');\\n                return eval(JSON.parse(fetch(\\\"hiker://page/视频详情页\\\")).rule);\\n            }),\\n            col_type: 'text_1',\\n            extra: {\\n                cls: '首页'\\n            }\\n        })\\n        D.push({\\n            title: vm.title,\\n            img: vm.cover,\\n            url: $('#noLoading#'+PLAY_LINKS).lazyRule(() => {\\n                return eval(JSON.parse(fetch(\\\"hiker://page/app播放链接\\\")).rule);\\n            }),\\n            col_type: 'pic_1_full',\\n            extra: {\\n                id: vm.title,\\n                cls: '首页'\\n            }\\n        })\\n        D.push({\\n            title: vm.count.count_collect,\\n            img: 'https://hikerfans.com/weisyr/icon/bbs收藏.svg',\\n            url: \\\"hiker://empty\\\",\\n            col_type: 'icon_small_3',\\n            extra: {\\n                cls: '首页'\\n            }\\n        })\\n        D.push({\\n            title: vm.count.count_comment,\\n            img: 'https://hikerfans.com/weisyr/icon/bbs回复.svg',\\n            url: $('#noLoading#'+PLAY_LINKS).lazyRule(() => {\\n                putMyVar('详细类别', '评论');\\n                return eval(JSON.parse(fetch(\\\"hiker://page/视频详情页\\\")).rule);\\n            }),\\n            col_type: 'icon_small_3',\\n            extra: {\\n                cls: '首页'\\n            }\\n        })\\n        D.push({\\n            title: vm.count.count_like,\\n            img: 'https://hikerfans.com/weisyr/icon/bbs点赞.svg',\\n            url: \\\"hiker://empty\\\",\\n            col_type: 'icon_small_3',\\n            extra: {\\n                cls: '首页'\\n            }\\n        })\\n        D.push({\\n            col_type: 'line_blank',\\n            extra: {\\n                cls: '首页'\\n            }\\n        })\\n    }\\n    if (tips_title == '推荐') putMyVar('首页_推荐', JSON.stringify(D));\\n    if (tips_title == '精选') putMyVar('首页_精选', JSON.stringify(D));\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"app分类与搜索列表\",\"path\":\"app分类与搜索列表\",\"rule\":\"var D = [];\\nif (app_lists.length >0) {\\n    for (let i = 0; i < app_lists.length; i++) {\\n        var PLAY_LINKS = app_lists[i].url.replace(/newstudios/, 'https');\\n        var like = app_lists[i].count.count_like;\\n        var view = app_lists[i].count.count_view;\\n        if (like > 1000) like = (like / 1000).toFixed(1) + 'k';\\n        if (view > 10000) view = (view / 10000).toFixed(1) + 'w';\\n        D.push({\\n            img: app_lists[i].cover,\\n            title: app_lists[i].title,\\n            desc: \\\"““”” <small><font color='grey'>\\\" + '播放量 ' + view + ' · ' + '喜欢 ' + like + '\\\\n' + app_lists[i]\\n                .author.userinfo.username + \\\"</font> </small>\\\",\\n            url: $('#noLoading#'+PLAY_LINKS).lazyRule(() => {\\n                putMyVar('详细类别', '简介');\\n                return eval(JSON.parse(fetch(\\\"hiker://page/视频详情页\\\")).rule);\\n            }),\\n            col_type: 'movie_1_left_pic',\\n            extra: {\\n                cls: '搜索'\\n            }\\n        })\\n    }\\n} else {\\n    eval(JSON.parse(fetch(\\\"hiker://page/END\\\")).rule)(D)\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"搜索页上部\",\"path\":\"搜索页上部\",\"rule\":\"if (PAGE == 1) {\\n    eval(JSON.parse(fetch(\\\"hiker://page/TopImg\\\")).rule)\\n    d.push({\\n        /*url: $().lazyRule(() => {\\n            putMyVar('搜关键字', input);\\n            var tips_title = getMyVar('搜关键字');\\n            var localData = request('hiker://files/cache/新片场历史搜索.json') || '[]';\\n            var lishi = JSON.parse(localData);\\n            let ccc = lishi.indexOf(input);\\n            if (ccc > -1) {\\n                lishi.splice(ccc, 1)\\n            };\\n            lishi.push(tips_title);\\n            lishi = lishi.slice(-28);\\n            writeFile('hiker://files/cache/新片场历史搜索.json', JSON.stringify(lishi));\\n            refreshPage(false)\\n        }),*/\\n        url: \\\"putMyVar('搜关键字',input);var tips_title = getMyVar('搜关键字');var localData = request('hiker://files/cache/新片场历史搜索.json')||'[]';var lishi=JSON.parse(localData);let ccc = lishi.indexOf(input);if(ccc >-1){lishi.splice(ccc,1)};lishi.push(tips_title);lishi=lishi.slice(-28);writeFile('hiker://files/cache/新片场历史搜索.json', JSON.stringify(lishi));refreshPage(false)\\\",\\n        desc: '搜索作品、创作人',\\n        extra: {\\n            defaultValue: tips_title,\\n            onChange: \\\"putVar('搜关键字',input)\\\"\\n        },\\n        col_type: \\\"input\\\",\\n        title: '搜索',\\n    });\\n    d.push({\\n        col_type: 'line',\\n    })\\n\\n    if (!tips_title) {\\n        if (request('hiker://files/cache/新片场历史搜索.json')) {\\n            for (let i = 0; i < 10; i++) {\\n                d.push({\\n                    col_type: \\\"blank_block\\\"\\n                })\\n            }\\n            d.push({\\n                title: '““””<b><font color=gray>' + '🗑️ 历史搜索' + '</font></b>',\\n                url: $().lazyRule(() => {\\n                    writeFile('hiker://files/cache/新片场历史搜索.json', '');\\n                    refreshPage(false);\\n                    return \\\"hiker://empty\\\";\\n                }),\\n                col_type: \\\"text_1\\\",\\n                extra: {\\n                    lineVisible: false\\n                }\\n            });\\n            var localData = request('hiker://files/cache/新片场历史搜索.json');\\n            if (!localData) localData = \\\"[]\\\";\\n            var lishi = JSON.parse(localData).slice(-28);\\n            var History = \\\"\\\";\\n            for (let i = lishi.length - 1; i >= 0; i--) {\\n                var cclishi = lishi[i];\\n                d.push({\\n                    title: cclishi,\\n                    col_type: \\\"flex_button\\\",\\n                    url: $('#noLoading#').lazyRule((cclishi) => {\\n                        putMyVar('搜关键字', cclishi);\\n                        refreshPage();\\n                        return \\\"hiker://empty\\\";\\n                    }, cclishi),\\n                });\\n            }\\n        }\\n        for (let i = 0; i < 20; i++) {\\n            d.push({\\n                col_type: \\\"blank_block\\\"\\n            })\\n        }\\n        d.push({\\n            title: '““””<b><font color=gray>' + '🔥 热门内容' + '</font></b>',\\n            url: \\\"hiker://empty\\\",\\n            col_type: \\\"text_1\\\",\\n            extra: {\\n                lineVisible: false\\n            }\\n        });\\n        let Rmurl = 'https://app.xinpianchang.com/v2/search/hotContents';\\n        Rmjson = JSON.parse(request(Rmurl)).data.list;\\n        for (let i in Rmjson) {\\n            var tips = (parseInt(i) + 1) + ' ' + Rmjson[i].title;\\n            var PLAY_LINKS = Rmjson[i].link.replace(/newstudios/, 'https');\\n            var url = Rmjson[i].link;\\n            d.push({\\n                title: tips,\\n                col_type: \\\"text_1\\\",\\n                url: $('#noLoading#'+PLAY_LINKS).lazyRule(() => {\\n                    putMyVar('详细类别', '简介');\\n                    return eval(JSON.parse(fetch(\\\"hiker://page/视频详情页\\\")).rule);\\n                }),\\n                extra: {\\n                    lineVisible: false\\n                },\\n            });\\n        }\\n        d.push({\\n            title: '““””<b><font color=gray>' + '🔥 热门搜索' + '</font></b>',\\n            url: \\\"hiker://empty\\\",\\n            col_type: \\\"text_1\\\",\\n            extra: {\\n                lineVisible: false\\n            }\\n        });\\n        var url = 'https://app.xinpianchang.com/search_recommend_kws';\\n        var Hotjson = JSON.parse(fetch(url)).data.list;\\n        for (let i in Hotjson) {\\n            var tips = Hotjson[i].name;\\n            d.push({\\n                title: tips,\\n                col_type: \\\"flex_button\\\",\\n                extra: {\\n                    lineVisible: false\\n                },\\n                url: $('#noLoading#').lazyRule((tips) => {\\n                    putMyVar('搜关键字', tips);\\n                    refreshPage();\\n                    return \\\"hiker://empty\\\";\\n                }, tips),\\n            });\\n        }\\n    }\\n    var Color = \\\"#FA7298\\\";\\n\\n    function getHead(titles) {\\n        return '‘‘’’<strong><font color=\\\"' + Color + '\\\">' + titles + '</front></strong>';\\n    }\\n    if (tips_title) {\\n        for (let i = 0; i < 5; i++) {\\n            d.push({\\n                col_type: \\\"blank_block\\\"\\n            })\\n        }\\n        d.push({\\n            title: tips_select == 'article' ? getHead('作品') : '作品',\\n            col_type: 'text_2',\\n            url: $('#noLoading#').lazyRule((Color, PAGE) => {\\n\\n                putMyVar('页码', '1');\\n                if (getMyVar(\\\"作/创/文\\\") != 'article') {\\n                    putMyVar('作/创/文', 'article');\\n                    deleteItemByCls('搜索')\\n                    deleteItem('end')\\n                    updateItem('搜索_作品', {\\n                        title: '‘‘’’<strong><font color=\\\"' + Color + '\\\">' + '作品' + '</front></strong>'\\n                    })\\n                    updateItem('搜索_创作人', {\\n                        title: '创作人'\\n                    })\\n                    var APP_URL = \\\"https://app.xinpianchang.com/v2/search?type=article\\\" + \\\"&kw=\\\" + getMyVar(\\\"搜关键字\\\") + '&page=' + PAGE;\\n                    var app_lists = JSON.parse(request(APP_URL)).data.list;\\n                    eval(JSON.parse(fetch(\\\"hiker://page/app分类与搜索列表\\\")).rule)\\n                    addItemAfter('搜索_创作人', D)\\n                }\\n                //refreshPage();\\n                return \\\"hiker://empty\\\";\\n            }, Color, PAGE),\\n            extra: {\\n                id: '搜索_作品'\\n            }\\n        })\\n        d.push({\\n            title: tips_select == 'creator' ? getHead('创作人') : '创作人',\\n            col_type: 'text_2',\\n            url: $('#noLoading#').lazyRule((Color, PAGE) => {\\n                //putMyVar('作/创/文', 'creator');\\n                putMyVar('页码', '1');\\n                if (getMyVar(\\\"作/创/文\\\") != 'creator') {\\n                    putMyVar('作/创/文', 'creator');\\n                    deleteItemByCls('搜索')\\n                    deleteItem('end')\\n                    updateItem('搜索_创作人', {\\n                        title: '‘‘’’<strong><font color=\\\"' + Color + '\\\">' + '创作人' + '</front></strong>'\\n                    })\\n                    updateItem('搜索_作品', {\\n                        title: '作品'\\n                    })\\n                    eval(JSON.parse(fetch(\\\"hiker://page/app创作人搜索列表\\\")).rule)\\n                    addItemAfter('搜索_创作人', D)\\n                }\\n                return \\\"hiker://empty\\\";\\n            }, Color, PAGE),\\n            extra: {\\n                id: '搜索_创作人'\\n            }\\n        })\\n    }\\n}\"},{\"col_type\":\"text_icon\",\"name\":\"首页四大按钮\",\"path\":\"首页四大按钮\",\"rule\":\"tips_title = getMyVar(\\\"主标题\\\", '分类作品库')\\naddListener('onClose', $.toString(() => {\\n    clearMyVar('首页_分类');\\n    clearMyVar('首页_精选');\\n    clearMyVar('首页_热门');\\n}))\\nd.push({\\n    title: \\\"发现\\\",\\n    pic_url: 'https://oss-xpc0.xpccdn.com/Upload/edu/2023/03/24641d733b8df84.png',\\n    col_type: 'icon_small_4',\\n    url: $(\\\"#noLoading#\\\").lazyRule((XPC) => {\\n        if (getMyVar('主标题') != '分类作品库') {\\n            putMyVar('主标题', '分类作品库');\\n            if (!getMyVar('首页_分类')) eval(JSON.parse(fetch(\\\"hiker://page/首页列表\\\")).rule);\\n            deleteItemByCls('首页');\\n            updateItem(\\\"四大金刚\\\", {\\n                title: '<big><b><font color=#000>分类作品库</font></b></big>'\\n            });\\n            addItemAfter('四大金刚', JSON.parse(getMyVar('首页_分类')))\\n        }\\n        return \\\"hiker://empty\\\";\\n    },XPC)\\n})\\n\\nd.push({\\n    title: \\\"推荐\\\",\\n    pic_url: 'https://oss-xpc6.xpccdn.com/default/O9njC35iecU0qt3zdvk7TqaNAnhU6o0VkaePtymy.png',\\n    col_type: 'icon_small_4',\\n    url: $(\\\"#noLoading#\\\").lazyRule(() => {\\n        if (getMyVar('主标题') != '推荐') {\\n            putMyVar('主标题', '推荐');\\n            if (!getMyVar('首页_推荐')) eval(JSON.parse(fetch(\\\"hiker://page/首页列表\\\")).rule);\\n            deleteItemByCls('首页');\\n            updateItem(\\\"四大金刚\\\", {\\n                title: '<big><b><font color=#000>短片推荐</font></b></big>'\\n            });\\n            addItemAfter('四大金刚', JSON.parse(getMyVar('首页_推荐')))\\n        }\\n        return \\\"hiker://empty\\\";\\n    }),\\n})\\n\\nd.push({\\n    title: '精选',\\n    pic_url: 'https://oss-xpc0.xpccdn.com/Upload/edu/2023/03/24641d733b935b3.png',\\n    col_type: 'icon_small_4',\\n    url: $(\\\"#noLoading#\\\").lazyRule(() => {\\n        if (getMyVar('主标题') != '精选') {\\n            putMyVar('主标题', '精选');\\n            if (!getMyVar('首页_精选')) eval(JSON.parse(fetch(\\\"hiker://page/首页列表\\\")).rule);\\n            deleteItemByCls('首页');\\n            updateItem(\\\"四大金刚\\\", {\\n                title: '<big><b><font color=#000>编辑精选</font></b></big>'\\n            });\\n            addItemAfter('四大金刚', JSON.parse(getMyVar('首页_精选')))\\n        }\\n        //refreshPage();\\n        return \\\"hiker://empty\\\";\\n    }),\\n})\\n\\nlet city;\\nlet str=fetch('http://whois.pconline.com.cn/ipJson.jsp?callback=testJson&ip=');\\nconst matchedJson = str.match(/\\\\s*testJson\\\\s*\\\\((\\\\{.*?\\\\})\\\\)/);\\nif (matchedJson && matchedJson.length > 1) {\\n    const jsonObj = JSON.parse(matchedJson[1]);\\n    const province = jsonObj.pro.replace('省', '');\\n    city=province;\\n    //log(province);\\n} else {\\n    console.error(\\\"获取位置出错\\\");\\n    city='北京';\\n}\\nd.push({\\n    title: city,\\n    pic_url: 'https://oss-xpc0.xpccdn.com/Upload/edu/2023/03/24641d733b80079.png',\\n    col_type: 'icon_small_4',\\n    url: $(\\\"#noLoading#\\\").lazyRule(() => {\\n        if (getMyVar('主标题') != '本地周边false') {\\n            putMyVar('主标题', '本地周边');\\n            eval(JSON.parse(fetch(\\\"hiker://page/首页列表\\\")).rule)\\n            deleteItemByCls('首页');\\n            updateItem(\\\"四大金刚\\\", {\\n                title: '<big><b><font color=#000>本地周边</font></b></big>'\\n            });\\n            addItemAfter(\\\"四大金刚\\\", D);\\n        }\\n        return \\\"hiker://empty\\\";\\n    }),\\n})\\n\\nd.push({\\n    title: '<big><b><font color=#000>' + tips_title + '</font></b></big>',\\n    url: $().lazyRule(() => {\\n        return eval(JSON.parse(fetch(\\\"hiker://page/进入搜索页\\\")).rule)\\n    }),\\n    img: \\\"https://hikerfans.com/weisyr/icon/search.svg\\\",\\n    col_type: \\\"text_icon\\\",\\n    extra: {\\n        lineVisible: false,\\n        id: '四大金刚',\\n        newWindow: true,\\n        windowId: \\\"新片场搜索\\\"\\n    }\\n});\"},{\"col_type\":\"movie_3\",\"name\":\"🔎进入搜索页\",\"path\":\"进入搜索页\",\"rule\":\"$('hiker://empty#fypage#gameTheme##noHistory##noRecordHistory##autoCache##noRefresh##noLoading#').rule(() => {\\n    setPageTitle('新片场·搜索')\\n    var d = [];\\n    var PAGE = MY_PAGE;//MY_URL.split('#')[1]\\n            /*\\n    for (let i = 0; i < 30; i++) {\\n        d.push({\\n            col_type: \\\"blank_block\\\"\\n        })\\n    }\\n    */\\n    addListener('onClose', $.toString(() => {\\n        clearMyVar('搜关键字');\\n        clearMyVar('作/创/文');\\n        clearMyVar('页码');\\n    }))\\n    var tips_title = getMyVar(\\\"搜关键字\\\")\\n    var tips_select = getMyVar(\\\"作/创/文\\\", 'article');\\n    //log(tips_select)\\n    eval(JSON.parse(fetch(\\\"hiker://page/搜索页上部\\\")).rule)\\n    //showLoading('Loading');\\n    if (tips_title) {\\n        if (tips_select == 'article') {\\n            //搜作品\\n            var APP_URL = \\\"https://app.xinpianchang.com/v2/search?type=\\\" + getMyVar(\\\"作/创/文\\\", 'article') + \\\"&kw=\\\" + getMyVar(\\\"搜关键字\\\") + '&page=' + PAGE;\\n            var app_lists = JSON.parse(request(APP_URL)).data.list;\\n            eval(JSON.parse(fetch(\\\"hiker://page/app分类与搜索列表\\\")).rule)\\n        } else if (tips_select == 'creator') {\\n            //搜人\\n            eval(JSON.parse(fetch(\\\"hiker://page/app创作人搜索列表\\\")).rule)\\n        }\\n        d = d.concat(D)\\n    }\\n    //hideLoading();\\n    setResult(d)\\n})\"},{\"col_type\":\"movie_3\",\"name\":\"app播放链接\",\"path\":\"app播放链接\",\"rule\":\"$('#noLoading#'+input).lazyRule(() => {\\n    try {\\n        showLoading('Loading');\\n        var play_url_json = JSON.parse(request(input)).data;\\n        let mid = play_url_json.video_library_id;\\n        let play_urls = JSON.parse(request('https://mod-api.xinpianchang.com/mod/api/v2/media/'+mid+'?appKey=61a2f329348b3bf77')).data.resource.progressive;\\n        // 开始获取弹幕\\n        let danmu = 'https://oss-danmaku12.xpccdn.com/' + mid + '.txt';\\n        let code = request(danmu);\\n        let arr = code.split(\\\"\\\\n\\\");\\n        let r = []\\n        for (let i = 0; i < arr.length; i++) {\\n            try {\\n                var line = JSON.parse(arr[i])\\n                if (line.content) {\\n                    r.push({\\n                        text: line.content,\\n                        time: line.offset\\n                    })\\n                }\\n            } catch (e) {}\\n        }\\n        writeFile(\\\"hiker://files/cache/danmu.json\\\", JSON.stringify(r))\\n        // 结束弹幕获取\\n        let urls = [];\\n        let names = [];\\n        let head = [];\\n        for (let i in play_urls) {\\n            urls.push(play_urls[i].url)\\n            names.push(play_urls[i].profile)\\n            head.push({'User-Agent': 'ExoPlayerLib'})\\n        }\\n        let all_url = JSON.stringify({\\n            urls: urls,\\n            names: names,\\n            danmu: \\\"hiker://files/cache/danmu.json\\\",\\n            headers: head\\n        });\\n        hideLoading();\\n        return all_url\\n    } catch (e) {\\n        let url = input.split('url=')[1]\\n        url = unescape(url)\\n        return 'web://' + url\\n    }\\n})\"},{\"col_type\":\"movie_3\",\"name\":\"app创作人搜索列表\",\"path\":\"app创作人搜索列表\",\"rule\":\"var D = [];\\nvar APP_URL = \\\"https://app.xinpianchang.com/v2/search?type=\\\" + getMyVar(\\\"作/创/文\\\", 'creator') + \\\"&kw=\\\" + getMyVar(\\\"搜关键字\\\") + '&page=' + PAGE;\\nvar app_lists = JSON.parse(request(APP_URL)).data.list;\\nif (app_lists.length > 0) {\\n    for (let i = 0; i < app_lists.length; i++) {\\n        setPageTitle(app_lists[i].username)\\n        var USER_HOME = app_lists[i].url.replace(/newstudios/, 'https')\\n        for (let i = 0; i < 10; i++) {\\n            D.push({\\n                col_type: \\\"blank_block\\\",\\n                extra: {\\n                    cls: '搜索'\\n                }\\n            })\\n        }\\n        var url = $('#noLoading#' + USER_HOME).lazyRule(() => {\\n            return eval(JSON.parse(fetch(\\\"hiker://page/创作人首页\\\")).rule);\\n        });\\n        D.push({\\n            img: app_lists[i].avatar + '@Referer=' + app_lists[i].avatar,\\n            title: app_lists[i].username,\\n            desc: '',\\n            url: url,\\n            col_type: 'avatar',\\n            extra: {\\n                cls: '搜索'\\n            }\\n        })\\n\\n        var occupation = app_lists[i].occupation;\\n        var follower = '粉丝 ' + app_lists[i].count.count_follower;\\n        if (!occupation) {\\n            occupation = ''\\n        } else {\\n            occupation = occupation + ' · '\\n        }\\n        D.push({\\n            title: \\\"““”” <small><font color='grey'>\\\" + '\\t\\t\\t\\t\\t' + occupation + follower + \\\"</font> </small>\\\",\\n            url: url,\\n            col_type: 'text_1',\\n            extra: {\\n                cls: '搜索'\\n            }\\n        })\\n    }\\n} else {\\n    eval(JSON.parse(fetch(\\\"hiker://page/END\\\")).rule)(D)\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"创作人首页\",\"path\":\"创作人首页\",\"rule\":\"$('hiker://empty#fypage#immersiveTheme#noHistory##noRecordHistory##noRefresh#').rule((input) => {\\n    addListener('onClose', $.toString(() => {\\n        clearMyVar('主页类别');\\n    }))\\n    var tips_select = getMyVar(\\\"主页类别\\\", 'new');\\n    try {\\n        var PAGE = MY_PAGE;\\n        var d = [];\\n        // 头部\\n        var USER_JSON = JSON.parse(request(input)).data;\\n        var ID = USER_JSON.id;\\n        var app_background = USER_JSON.app_background;\\n        if (!app_background) app_background = 'https://hikerfans.com/weisyr/img/xinpianchang.jpg';\\n        var user_avatar = USER_JSON.avatar;\\n        var user_name = USER_JSON.username;\\n        setPageTitle(user_name)\\n        var user_desc = USER_JSON.verify_description;\\n        var user_about = USER_JSON.about;\\n        //人气\\n        var count_popularity = USER_JSON.count.count_popularity;\\n        if (count_popularity > 10000) count_popularity = (count_popularity / 10000).toFixed(1) + 'w';\\n        //粉丝\\n        var count_follower = USER_JSON.count.count_follower;\\n        if (count_follower > 1000) count_follower = (count_follower / 1000).toFixed(1) + 'k';\\n        if (PAGE == 1) {\\n            d.push({\\n                col_type: 'pic_1_full',\\n                title: '0',\\n                img: app_background,\\n                url: 'hiker://empty',\\n            });\\n            d.push({\\n                col_type: 'avatar',\\n                title: user_name + '\\\\t\\\\t\\\\t\\\\t' + \\\"<font color=grey>\\\" + '人气 ' + count_popularity + ' · ' + '粉丝 ' + count_follower + \\\"</font>\\\",\\n                img: user_avatar,\\n                url: 'hiker://empty',\\n            });\\n            d.push({\\n                col_type: 'line',\\n            });\\n            for (let i = 0; i < 5; i++) {\\n                d.push({\\n                    col_type: \\\"blank_block\\\",\\n                })\\n            }\\n            var Color = \\\"#FA7298\\\";\\n\\n            function getHead(titles) {\\n                return '‘‘’’<strong><font color=\\\"' + Color + '\\\">' + titles + '</front></strong>';\\n            }\\n            d.push({\\n                col_type: 'text_3',\\n                title: tips_select == 'new' ? getHead(\\\"最新\\\") : '最新',\\n                url: $('#noLoading#' + input).lazyRule((PAGE) => {\\n                    if (getMyVar('主页类别') != 'new') {\\n                        putMyVar('主页类别', 'new');\\n                        updateItem('主页热门', {\\n                            title: \\\"热门\\\"\\n                        })\\n                        updateItem('主页专辑', {\\n                            title: \\\"专辑\\\"\\n                        });\\n                        updateItem('主页最新', {\\n                            title: '‘‘’’<strong><font color=\\\"#FA7298\\\">最新</front></strong>'\\n                        });\\n                        showLoading('Loading');\\n                        deleteItemByCls('end');\\n                        //eval(JSON.parse(fetch(\\\"hiker://page/创作人作品列表\\\")).rule)\\n                        deleteItemByCls('主页');\\n                        hideLoading();\\n                        //addItemAfter('主页专辑', D);\\n                        addItemAfter('主页专辑', JSON.parse(getMyVar('作品new' + input)));\\n                    }\\n                    return \\\"hiker://empty\\\";\\n                }, PAGE),\\n                extra: {\\n                    id: '主页最新'\\n                }\\n            });\\n            d.push({\\n                col_type: 'text_3',\\n                title: tips_select == 'view' ? getHead(\\\"热门\\\") : '热门',\\n                url: $('#noLoading#' + input).lazyRule((PAGE) => {\\n                    if (getMyVar('主页类别') != 'view') {\\n                        putMyVar('主页类别', 'view');\\n                        updateItem('主页最新', {\\n                            title: \\\"最新\\\"\\n                        });\\n                        updateItem('主页专辑', {\\n                            title: \\\"专辑\\\"\\n                        });\\n                        updateItem('主页热门', {\\n                            title: '‘‘’’<strong><font color=\\\"#FA7298\\\">热门</front></strong>'\\n                        });\\n\\n                        deleteItemByCls('end');\\n                        if (!getMyVar('作品view' + input)) {\\n                            showLoading('Loading');\\n                            eval(JSON.parse(fetch(\\\"hiker://page/创作人作品列表\\\")).rule);\\n                            deleteItemByCls('主页');\\n                            hideLoading();\\n                            addItemAfter('主页专辑', D);\\n                        } else {\\n                            deleteItemByCls('主页');\\n                            addItemAfter('主页专辑', JSON.parse(getMyVar('作品view' + input)));\\n                        }\\n                    }\\n                    return \\\"hiker://empty\\\";\\n                }, PAGE),\\n                extra: {\\n                    id: '主页热门'\\n                }\\n            });\\n            d.push({\\n                col_type: 'text_3',\\n                title: tips_select == 'collections' ? getHead(\\\"专辑\\\") : '专辑',\\n                url: $('#noLoading#' + input).lazyRule((PAGE) => {\\n                    if (getMyVar('主页类别') != 'collections') {\\n                        putMyVar('主页类别', 'collections');\\n                        updateItem('主页热门', {\\n                            title: \\\"热门\\\"\\n                        });\\n                        updateItem('主页最新', {\\n                            title: \\\"最新\\\"\\n                        });\\n                        updateItem('主页专辑', {\\n                            title: '‘‘’’<strong><font color=\\\"#FA7298\\\">专辑</front></strong>'\\n                        });\\n\\n                        deleteItemByCls('end');\\n                        if (!getMyVar('专辑' + input)) {\\n                            showLoading('Loading');\\n                            eval(JSON.parse(fetch(\\\"hiker://page/创作人专辑列表\\\")).rule)\\n\\n                            deleteItemByCls('主页');\\n                            hideLoading();\\n                            addItemAfter('主页专辑', D);\\n                        } else {\\n                            deleteItemByCls('主页');\\n                            addItemAfter('主页专辑', JSON.parse(getMyVar('专辑' + input)));\\n                        }\\n                    }\\n                    return \\\"hiker://empty\\\";\\n                }, PAGE),\\n                extra: {\\n                    id: '主页专辑'\\n                }\\n            });\\n\\n            d.push({\\n                col_type: 'pic_1_full',\\n                title: '0',\\n                img: 'https://hikerfans.com/weisyr/img/Loading2.gif',\\n                url: 'hiker://empty',\\n                extra: {\\n                    id: 'loading'\\n                }\\n            });\\n        }\\n        // 列表部分\\n        if (['new', 'view'].includes(tips_select) && PAGE > 1) {\\n            eval(JSON.parse(fetch(\\\"hiker://page/创作人作品列表\\\")).rule)\\n            d = d.concat(D)\\n        }\\n        if (tips_select == 'collections' && PAGE > 1) {\\n            eval(JSON.parse(fetch(\\\"hiker://page/创作人专辑列表\\\")).rule)\\n            d = d.concat(D)\\n        }\\n\\n        setResult(d);\\n        if (['new', 'view'].includes(tips_select) && PAGE == 1) {\\n            eval(JSON.parse(fetch(\\\"hiker://page/创作人作品列表_多线程\\\")).rule)\\n        }\\n    } catch (e) {\\n        back(false)\\n    }\\n}, input)\"},{\"col_type\":\"movie_3\",\"name\":\"♨️首页固定JSON\",\"path\":\"首页固定JSON\",\"rule\":\"var index_url = 'https://app.xinpianchang.com/page/discovery';\\nvar index_JSON = JSON.parse(request(index_url, {\\n    headers: {\\n        'User-Agent': \\\"NewStudios/2.3.5 (com.xinpianchang.newstudios; build:1150; Android 13)\\\"\\n    },\\n    method: 'GET'\\n})).data;\\nlet XPC = index_JSON.categories;\\nlet banners = index_JSON.banners;\\nvar t = Math.floor(Math.random() * banners.length);\\nbanners_0 = banners[t];\\nvar PLAY_LINKS = banners_0.url.replace(/newstudios/, 'https');\\n\\nregisterTask('新片场', 3000, $.toString((banners) => {\\n    let i = getVar('新片场计时', '0');\\n    if (i == banners.length) i = 0;\\n    updateItem(\\\"banners\\\", {\\n        img: banners[i].cover,\\n        url: $('#noLoading#'+ banners[i].url.replace(/newstudios/, 'https')).lazyRule(() => {\\n            return eval(JSON.parse(fetch(\\\"hiker://page/app播放链接\\\")).rule);\\n        }),\\n    });\\n    i++\\n    putVar('新片场计时', i);\\n}, banners))\\n\\nd.push({\\n    //title:banners.title,\\n    img: banners_0.cover,\\n    col_type: 'card_pic_1',\\n    desc: '0',\\n    url: $('#noLoading#'+PLAY_LINKS).lazyRule(() => {\\n        return eval(JSON.parse(fetch(\\\"hiker://page/app播放链接\\\")).rule);\\n    }),\\n    extra: {\\n        id: 'banners'\\n    }\\n})\\neval(JSON.parse(fetch(\\\"hiker://page/首页四大按钮\\\")).rule)\"},{\"col_type\":\"movie_3\",\"name\":\"创作人作品列表\",\"path\":\"创作人作品列表\",\"rule\":\"// 时间戳转换\\neval(JSON.parse(fetch(\\\"hiker://page/时间戳转换\\\")).rule);\\nvar list_url = input + '/articles?is_hide_in_space=0&order=' + getMyVar(\\\"主页类别\\\", 'new') + '&return_struct_type=user_home&type=public&page=' + PAGE;\\n//log(list_url)\\nvar D = [];\\nvar APP_JSON = JSON.parse(request(list_url)).data;\\n/*var total = APP_JSON.total;\\nputMyVar('作品数量',total);*/\\nAPP_JSON = APP_JSON.list;\\nif (APP_JSON.length > 0) {\\n    for (let i = 0; i < APP_JSON.length; i++){\\n        var app_cache = APP_JSON[i].resource;\\n        var PLAY_LINKS = app_cache.url.replace(/newstudios/, 'https');\\n        var like = app_cache.count.count_like;\\n        var view = app_cache.count.count_view;\\n        if (like > 1000) like = (like / 1000).toFixed(1) + 'k';\\n        if (view > 10000) view = (view / 10000).toFixed(1) + 'w';\\n        //var img = app_cache.cover;\\n        var img = $(app_cache.cover).image(() => $.require(\\\"Img?rule=\\\" + MY_TITLE).compress());\\n        var title = app_cache.title;\\n        var publish_time = app_cache.publish_time;\\n        // 时间戳转年月日\\n        publish_time = timestampToTime(tm = publish_time, ts = 0)\\n        D.push({\\n            col_type: 'movie_1_left_pic',\\n            title: title,\\n            desc: \\\"““”” <small><font color='grey'>\\\" + publish_time + '\\\\n' + like + ' 喜欢' + ' · ' + view + ' 观看' + \\\"</font> </small>\\\",\\n            img: img,\\n            url: $(PLAY_LINKS).lazyRule(() => {\\n                putMyVar('详细类别', '简介');\\n                return eval(JSON.parse(fetch(\\\"hiker://page/视频详情页\\\")).rule);\\n            }),\\n            extra: {\\n                cls: '主页'\\n            }\\n        });\\n    }\\n} else {\\n    eval(JSON.parse(fetch(\\\"hiker://page/END\\\")).rule)(D)\\n}\\nif(PAGE == 1) putMyVar('作品'+getMyVar(\\\"主页类别\\\", 'new')+input, JSON.stringify(D));\"},{\"col_type\":\"movie_3\",\"name\":\"创作人专辑列表\",\"path\":\"创作人专辑列表\",\"rule\":\"var D = [];\\nvar list_url = input + '/collections?page=' + PAGE;\\nvar APP_JSON = JSON.parse(request(list_url)).data;\\nvar total = APP_JSON.total;\\nAPP_JSON = APP_JSON.list\\nif (total == '0' &&  PAGE == 1) {\\n    for (let i = 0; i < 30; i++) {\\n        D.push({\\n            col_type: \\\"blank_block\\\",\\n            extra: {\\n                cls: '主页',\\n            }\\n        })\\n    }\\n    D.push({\\n        title: \\\"““”” <small><font color='grey'>\\\" + '——   还没有创建专辑   ——' + \\\"</font> </small>\\\",\\n        col_type: \\\"text_center_1\\\",\\n        url: 'hiker://empty',\\n        extra: {\\n            lineVisible: false,\\n            cls: '主页',\\n        }\\n    })\\n}\\nif (APP_JSON.length>0) {\\n    for (let i = 0; i < APP_JSON.length; i++) {\\n        var app_cache = APP_JSON[i];\\n        var Album_url = app_cache.url.replace(/newstudios/, 'https') + '/articles?is_detail=true&page=';\\n        var bg_img = app_cache.cover_url;\\n        var desc = app_cache.description;\\n        var article = app_cache.count.count_article;\\n        var like = app_cache.count.count_liked;\\n        var view = app_cache.count.count_viewed;\\n        if (like > 1000) like = (like / 1000).toFixed(1) + 'k';\\n        if (view > 10000) view = (view / 10000).toFixed(1) + 'w';\\n        var img = app_cache.cover_url;\\n        var title = app_cache.title;\\n        var put_title = \\\"““”” <small><font color='grey'>\\\" + '作品 ' + article + ' · ' + '浏览 ' + view + ' · ' + '赞 ' + like + \\\"</font> </small>\\\";\\n        D.push({\\n            col_type: 'pic_1_card',\\n            title: title,\\n            img: bg_img + '@Referer=' + bg_img,\\n            desc: '作品 ' + article + '  ·  ' + '浏览 ' + view + '  ·  ' + '赞 ' + like,\\n            url: $('hiker://empty#fypage#immersiveTheme#noHistory##noRecordHistory##autoCache##noRefresh#').rule((bg_img, put_title, desc, Album_url) => {\\n                var PAGE = MY_PAGE;\\n                var d = [];\\n                var url = Album_url + PAGE;\\n                var APP_JSON = JSON.parse(request(url)).data.list;\\n                if (PAGE == 1) {\\n                    d.push({\\n                        col_type: 'pic_1_full',\\n                        url: 'hiker://empty',\\n                        img: bg_img,\\n                    });\\n                    d.push({\\n                        col_type: 'text_1',\\n                        title: put_title,\\n                        url: 'hiker://empty',\\n                        extra: {\\n                            lineVisible: false\\n                        }\\n                    });\\n                    d.push({\\n                        col_type: 'rich_text',\\n                        title: \\\"<small><font color='grey'>\\\" + desc + \\\"</font> </small>\\\",\\n                        url: 'hiker://empty',\\n                    });\\n                }\\n                if (APP_JSON.length != \\\"\\\") {\\n                    for (let i in APP_JSON) {\\n                        var PLAY_LINKS = APP_JSON[i].url.replace(/newstudios/, 'https');\\n                        var title = APP_JSON[i].title;\\n                        var img = APP_JSON[i].cover;\\n                        var cat = APP_JSON[i].categories;\\n                        var cat_all = []\\n                        for (var i in cat) {\\n                            var cat_1 = cat[i].category_name;\\n                            var cat_2 = cat[i].sub.category_name;\\n                            cat_all.push(\\n                                cat_1 + '-' + cat_2 + ' \\t'\\n                            )\\n                        }\\n                        cat_all = cat_all.join(\\\"\\\")\\n                        var cat_title = '““””<small><font color=grey>' + cat_all + '</font></small>';\\n                        d.push({\\n                            col_type: 'movie_1_left_pic',\\n                            title: title,\\n                            desc: cat_title,\\n                            img: img,\\n                            url: $(PLAY_LINKS).lazyRule(() => {\\n                                putMyVar('详细类别', '简介');\\n                                return eval(JSON.parse(fetch(\\\"hiker://page/视频详情页\\\")).rule);\\n                            }),\\n                        });\\n                    }\\n                }\\n                setResult(d);\\n            }, bg_img, put_title, desc, Album_url),\\n            extra: {\\n                cls: '主页',\\n            }\\n        });\\n    }\\n} else if (total!= '0'){\\n    eval(JSON.parse(fetch(\\\"hiker://page/END\\\")).rule)(D)\\n}\\nif(PAGE == 1) putMyVar('专辑'+input, JSON.stringify(D));\"},{\"col_type\":\"movie_3\",\"name\":\"END\",\"path\":\"END\",\"rule\":\"function(arr){\\narr.push({\\n    title: \\\"““”” <small><font color='grey'>\\\" + '——   END   ——' + \\\"</font> </small>\\\",\\n    col_type: \\\"text_center_1\\\",\\n    url: 'hiker://empty',\\n    extra: {\\n        lineVisible: false,\\n        id: 'end',\\n        cls:'end'\\n    }\\n})\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"时间戳转换\",\"path\":\"时间戳转换\",\"rule\":\"function timestampToTime(tm, ts) {\\n\\t\\tundefined\\n\\t\\tvar date = new Date(tm * 1000); //时间戳为10位需*1000，时间戳为13位的话不需乘1000\\n\\t\\tvar Y = date.getFullYear() + '-';\\n\\t\\tvar M = (date.getMonth() + 1 < 10 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1) + '-';\\n\\t\\tvar D = date.getDate();\\n\\t\\tvar h = ' | ' + date.getHours() + ':';\\n\\t\\tvar m = date.getMinutes();\\n\\t\\tif(m<10) m = '0'+m;\\n\\t\\tm = m + ':'\\n\\t\\tvar s = date.getSeconds();\\n\\t\\tif(s<10) s = '0'+s;\\n\\t\\tif (ts == 0) return Y + M + D;\\n\\t\\tif (ts == 1) return Y + M + D + h + m + s;\\n\\t}\"},{\"col_type\":\"movie_3\",\"name\":\"app_二级列表\",\"path\":\"app_二级列表\",\"rule\":\"$('hiker://empty#fypage##noHistory##autoCache##noRecordHistory##immersiveTheme##noRefresh##noLoading#').rule((input) => {\\n    var d = [];\\n    //var PAGE = MY_URL.split('#')[1];\\n    // 进入二级清空重置一次\\n    addListener('onClose', $.toString(() => {\\n        clearVar('cate_2');\\n        clearVar('current_url')\\n    }))\\n    // 当前 url\\n    const CURRENT_URL = getVar('current_url', input)\\n    const CATE_LEVEL_2 = getVar(\\\"cate_2\\\", \\\"0\\\")\\n    // 获取页面内容\\n    let App_Json = JSON.parse(request(CURRENT_URL + '&page=' + MY_PAGE)).data;\\n    // 第一页独占\\n    if (MY_PAGE == 1) {\\n        eval(JSON.parse(fetch(\\\"hiker://page/TopImg\\\")).rule)\\n        d.push({\\n            col_type: \\\"blank_block\\\"\\n        })\\n        let categorie_level_2 = App_Json.header;\\n        // 遍历二级标签\\n        categorie_level_2.categories.forEach((cate_2, index_2) => {\\n            let title = cate_2['title'];\\n            if (title == getPageTitle()) {\\n                for (let i in cate_2.sub) {\\n                    title = cate_2.sub[i];\\n                    let link = title.value;\\n                    title = title.title;\\n                    d.push({\\n                        title: CATE_LEVEL_2 == title ? \\\"““\\\" + title + \\\"””\\\" : title,\\n                        col_type: 'scroll_button',\\n                        url: $().lazyRule((title, link) => {\\n                            putVar('cate_2', title)\\n                            putVar('current_url', \\\"https://app.xinpianchang.com/articles?category_id=\\\" + link);\\n                            refreshPage()\\n                            return \\\"hiker://empty\\\"\\n                        }, title, link)\\n                    })\\n\\n                }\\n\\n            }\\n\\n        })\\n        d.push({\\n            col_type: \\\"blank_block\\\"\\n        })\\n    }\\n    // var APP_URL ='';\\n    var app_lists = App_Json.list;\\n    eval(JSON.parse(fetch(\\\"hiker://page/app分类与搜索列表\\\")).rule)\\n    d = d.concat(D)\\n    setResult(d)\\n},input)\"},{\"col_type\":\"text_1\",\"name\":\"视频详情页\",\"path\":\"视频详情页\",\"rule\":\"$('hiker://empty#fypage##gameTheme##noHistory##noRefresh#').rule((input) => {\\n    //clearMyVar('评论' + getMyVar('cache_link'));\\n    putMyVar('cache' + input, input);\\n    //getMyVar('cache'+input);\\n    addListener('onClose', $.toString(() => {\\n        clearMyVar('页码');\\n        clearMyVar('详情');\\n        clearMyVar('详细类别');\\n        clearMyVar('相似视频'+input);\\n    }))\\n    var PAGE = MY_PAGE;\\n    var d = [];\\n    try {\\n        var tips_select = getMyVar(\\\"详细类别\\\", '简介');\\n        var DATA_JSON = JSON.parse(request(input)).data;\\n        //评论数\\n        var total = DATA_JSON.count.count_comment;\\n        //视频id\\n        var ID = DATA_JSON.id;\\n        var bg_img = DATA_JSON.cover;\\n        var title = DATA_JSON.title;\\n        setPageTitle(DATA_JSON.title)\\n        // 分类[i].category_name.sub.category_name\\n        var cat = DATA_JSON.categories;\\n        // 时间戳转换\\n        eval(JSON.parse(fetch(\\\"hiker://page/时间戳转换\\\")).rule);\\n        // 发布时间\\n        var publish_time = DATA_JSON.publish_time;\\n        publish_time = timestampToTime(tm = publish_time, ts = 0)\\n        // 播放量\\n        var view = DATA_JSON.count.count_view;\\n        if (view > 10000) view = (view / 10000).toFixed(1) + 'w';\\n        // 简介\\n        var content = DATA_JSON.content;\\n        // 喜欢点赞\\n        var like = DATA_JSON.count.count_like;\\n        if (like > 1000) like = (like / 1000).toFixed(1) + 'k';\\n        // 收藏\\n        var collect = DATA_JSON.count.count_collect;\\n        if (collect > 1000) collect = (collect / 1000).toFixed(1) + 'k';\\n        // 分享\\n        var share = DATA_JSON.count.count_share;\\n        if (share > 1000) share = (share / 1000).toFixed(1) + 'k';\\n        // 标签[i].name\\n        var tags = DATA_JSON.tags;\\n        // 创作人.url(主页).username(名字).avatar(名字)\\n        var user = DATA_JSON.author.userinfo;\\n        putMyVar('作者', user.username);\\n        var Color = \\\"#FA7298\\\";\\n\\n        function getHead(titles) {\\n            return '‘‘’’<strong><font color=\\\"' + Color + '\\\">' + titles + '</front></strong>';\\n        }\\n\\n        if (PAGE == 1) {\\n            d.push({\\n                col_type: 'pic_1_full',\\n                title: '0',\\n                img: bg_img,\\n                url: $('#noLoading#' + input).lazyRule(() => {\\n                    return eval(JSON.parse(fetch(\\\"hiker://page/app播放链接\\\")).rule);\\n                }),\\n                extra: {\\n                    id: title\\n                }\\n            });\\n            for (let i = 0; i < 10; i++) {\\n                d.push({\\n                    col_type: \\\"blank_block\\\",\\n                })\\n            }\\n            var 评论tips = '评论 ' + '‘‘' + total + '’’';\\n            d.push({\\n                col_type: 'text_2',\\n                title: tips_select == '简介' ? getHead(\\\"简介\\\") : '简介',\\n                url: $('#noLoading#' + input).lazyRule((Color, 评论tips) => {\\n                    putMyVar('页码', '1');\\n                    if (getMyVar(\\\"详细类别\\\") != '简介') {\\n                        putMyVar('详细类别', '简介');\\n                        updateItem('简介', {\\n                            title: '‘‘’’<strong><font color=\\\"' + Color + '\\\">' + '简介' + '</front></strong>'\\n                        });\\n                        updateItem('评论'+input, {\\n                            title: 评论tips\\n                        });\\n                        deleteItemByCls('详情页'+input);\\n                        deleteItemByCls('end');\\n                        addItemAfter('评论'+input, JSON.parse(getMyVar('详情' + getMyVar('cache' + input))));\\n                    }\\n                    return \\\"hiker://empty\\\";\\n                }, Color, 评论tips),\\n                extra: {\\n                    id: '简介'\\n                }\\n            });\\n            d.push({\\n                col_type: 'text_2',\\n                title: tips_select == '评论' ? getHead(评论tips) : 评论tips,\\n                url: $('#noLoading#' + input).lazyRule((Color, 评论tips, ID, PAGE) => {\\n                    putMyVar('相似视频'+input, '0');\\n                    if (getMyVar(\\\"详细类别\\\") != '评论') {\\n                        putMyVar('详细类别', '评论');\\n                        deleteItemByCls('详情页'+input)\\n                        deleteItemByCls('end')\\n                        deleteItemByCls('相似列表'+input)\\n                        if (!getMyVar('评论' + getMyVar('cache' + input))) {\\n                            eval(JSON.parse(fetch(\\\"hiker://page/视频评论\\\")).rule)\\n                            addItemAfter('评论'+input, D);\\n                        } else {\\n                            addItemAfter('评论'+input, JSON.parse(getMyVar('评论' + getMyVar('cache' + input))));\\n                        }\\n                        updateItem('简介', {\\n                            title: \\\"简介\\\"\\n                        });\\n                        updateItem('评论'+input, {\\n                            title: '‘‘’’<strong><font color=\\\"' + Color + '\\\">' + 评论tips + '</front></strong>'\\n                        });\\n\\n                    }\\n                    return \\\"hiker://empty\\\";\\n                }, Color, 评论tips, ID, PAGE),\\n                extra: {\\n                    id: '评论'+input\\n                }\\n            });\\n            \\n            eval(JSON.parse(fetch(\\\"hiker://page/视频信息\\\")).rule)\\n            if (tips_select == '简介') d = d.concat(D);\\n            \\n        }\\n        if (tips_select == '评论') {\\n            eval(JSON.parse(fetch(\\\"hiker://page/视频评论\\\")).rule)\\n            d = d.concat(D)\\n        }\\n        setResult(d);\\n    } catch (e) {\\n        back(false)\\n    }\\n}, input)\"},{\"col_type\":\"movie_3\",\"name\":\"视频信息\",\"path\":\"视频信息\",\"rule\":\"var D = []\\nvar user = DATA_JSON.author.userinfo;\\nvar USER_HOME = user.url.replace(/newstudios/, 'https');\\nvar download_ID =DATA_JSON.video_library_id;\\nD.push({\\n    col_type: 'text_1',\\n    title: '““””<b><font color=#000>' + title + '</font></b>',\\n    url: \\\"hiker://empty\\\",\\n    extra: {\\n        lineVisible: false,\\n        cls: '详情页'+input\\n    }\\n});\\nvar cat_all = []\\nfor (var i in cat) {\\n    var cat_1 = cat[i].category_name;\\n    var cat_2 = cat[i].sub.category_name;\\n    cat_all.push(\\n        cat_1 + '-' + cat_2 + ' \\t')\\n}\\ncat_all = cat_all.join(\\\"\\\")\\nvar cat_title = '““””<small><font color=grey>' + cat_all + ' \\t' + publish_time + ' \\t\\t' + view + '次播放' + '</font></small>';\\nD.push({\\n    title: cat_title,\\n    url: 'hiker://empty',\\n    col_type: 'text_1',\\n    extra: {\\n        lineVisible: false,\\n        cls: '详情页'+input\\n    }\\n});\\nD.push({\\n    col_type: 'rich_text',\\n    title: \\\"<small><font color=000>\\\" + content + \\\"</font> </small>\\\",\\n    url: \\\"hiker://empty\\\",\\n    extra: {\\n        cls: '详情页'+input\\n    }\\n});\\nD.push({\\n    title: like,\\n    pic_url: 'https://hikerfans.com/weisyr/icon/bbs点赞.svg',\\n    url: \\\"hiker://empty\\\",\\n    col_type: 'icon_small_4',\\n    extra: {\\n        cls: '详情页'+input\\n    }\\n})\\nD.push({\\n    title: collect,\\n    pic_url: 'https://hikerfans.com/weisyr/icon/bbs收藏.svg',\\n    url: \\\"hiker://empty\\\",\\n    col_type: 'icon_small_4',\\n    extra: {\\n        cls: '详情页'+input\\n    }\\n})\\nD.push({\\n    title: share,\\n    pic_url: 'https://hikerfans.com/weisyr/icon/bbs分享.svg',\\n    url: \\\"hiker://empty\\\",\\n    col_type: 'icon_small_4',\\n    extra: {\\n        cls: '详情页'+input\\n    }\\n})\\nD.push({\\n    title: '下载',\\n    pic_url: 'https://hikerfans.com/weisyr/icon/bbs下载.svg',\\n    url: $('#noLoading#'+download_ID).lazyRule(() => {\\n            let play_Url =JSON.parse(request('https://mod-api.xinpianchang.com/mod/api/v2/media/'+input+'?appKey=61a2f329348b3bf77')).data.resource.progressive[0].url;\\n            return 'download://' + play_Url+';{User-Agent@ExoPlayerLib}'\\n        }),\\n    col_type: 'icon_small_4',\\n    extra: {\\n        cls: '详情页'+input\\n    }\\n})\\nD.push({\\n    col_type: 'line',\\n    extra: {\\n        cls: '详情页'+input\\n    }\\n});\\nfor (let i = 0; i < 2; i++) {\\n    D.push({\\n        col_type: \\\"blank_block\\\",\\n        extra: {\\n            cls: '详情页'+input\\n        }\\n    })\\n}\\n\\nfor (let i in tags) {\\n  var tag = tags[i].name;\\n  D.push({\\n      title: '““””<small><font color=grey>' + tag + '</font></small>',\\n      col_type: 'flex_button',\\n      url: $().lazyRule((tag) => {\\n          putMyVar('搜关键字', tag);\\n          return eval(JSON.parse(fetch(\\\"hiker://page/进入搜索页\\\")).rule);\\n      }, tag),\\n      extra: {\\n          cls: '详情页'+input\\n      }\\n  })\\n}\\nD.push({\\n  col_type: \\\"blank_block\\\",\\n  extra: {\\n      cls: '详情页'+input\\n  }\\n})\\nD.push({\\n  col_type: 'line',\\n  extra: {\\n      cls: '详情页'+input\\n  }\\n});\\n\\nfor (let i = 0; i < 10; i++) {\\n    D.push({\\n        col_type: \\\"blank_block\\\",\\n        extra: {\\n            cls: '详情页'+input\\n        }\\n    })\\n}\\nD.push({\\n    col_type: 'text_1',\\n    title: '““””<b><font color=#000>' + '创作人' + '</font></b>',\\n    url: \\\"hiker://empty\\\",\\n    extra: {\\n        lineVisible: false,\\n        cls: '详情页'+input\\n    }\\n});\\nD.push({\\n    title: user.username,\\n    img: user.avatar + '@Referer=' + user.avatar,\\n    url: $(USER_HOME).lazyRule(() => {\\n        return eval(JSON.parse(fetch(\\\"hiker://page/创作人首页\\\")).rule);\\n    }),\\n    col_type: 'icon_2_round',\\n    extra: {\\n        cls: '详情页'+input\\n    }\\n})\\n/*\\nfor (let i = 0; i < 10; i++) {\\n    D.push({\\n        col_type: \\\"blank_block\\\",\\n        extra: {\\n            cls: '详情页'+input\\n        }\\n    })\\n}\\nD.push({\\n    col_type: 'line',\\n    extra: {\\n        cls: '详情页'+input\\n    }\\n});\\nfor (let i = 0; i < 10; i++) {\\n    D.push({\\n        col_type: \\\"blank_block\\\",\\n        extra: {\\n            cls: '详情页'+input\\n        }\\n    })\\n}\\n*/\\nD.push({\\n    col_type: 'text_2',\\n    //title: '““””<b><font color=#000>' + '相似视频' + '</font></b>',\\n    title: '相似视频',\\n    url: $('#noLoading#' + input).lazyRule((PAGE) => {\\n        if (getMyVar('相似视频'+input, '0') == '0') {\\n            if (!getMyVar('相似' + getMyVar('cache'+input))) {\\n                showLoading('匹配此类视频中');\\n                eval(JSON.parse(fetch(\\\"hiker://page/相似视频\\\")).rule)\\n                hideLoading();\\n                addItemAfter('相似视频'+input, D);\\n            } else {\\n                addItemAfter('相似视频'+input, JSON.parse(getMyVar('相似' + getMyVar('cache'+input))));\\n            }\\n            putMyVar('相似视频'+input, '1');\\n            //putMyVar('详细类别', '相似视频');\\n        } else {\\n            deleteItemByCls('相似列表'+input);\\n            deleteItemByCls('end');\\n            putMyVar('相似视频'+input, '0');\\n        }\\n        return \\\"hiker://empty\\\"\\n    },PAGE),\\n    extra: {\\n        lineVisible: false,\\n        cls: '详情页'+input,\\n        id: '相似视频'+input\\n    }\\n});\\nputMyVar('详情'+getMyVar('cache'+input), JSON.stringify(D))\"},{\"col_type\":\"movie_3\",\"name\":\"视频评论\",\"path\":\"视频评论\",\"rule\":\"var D = [];\\nvar myPage =JSON.parse(getMyVar('页码','1'));\\nif(PAGE > myPage && getMyVar(\\\"详细类别\\\") == '评论') {\\n    myPage++;\\n    putMyVar('页码',JSON.stringify(myPage));\\n    //log('新'+myPage)\\n}\\neval(JSON.parse(fetch(\\\"hiker://page/时间戳转换\\\")).rule);\\nlet comment_url = \\\"https://app.xinpianchang.com/comments?resource_id=\\\" + ID + \\\"&type=article&page=\\\" + Number(myPage);\\nvar COMMENT_JSON = JSON.parse(request(comment_url)).data;\\n// 评论总数\\n//log(COMMENT_JSON)\\nvar total = COMMENT_JSON.total;\\nvar cache_json = COMMENT_JSON.list;\\n//无评论\\nif (!total || total == 0 && myPage == 1) {\\n    for (let i = 0; i < 30; i++) {\\n        D.push({\\n            col_type: \\\"blank_block\\\",\\n            extra: {\\n                cls: '详情页'+input\\n            }\\n        })\\n    }\\n    D.push({\\n        title: \\\"““”” <small><font color='grey'>\\\" + '——   暂无评论   ——' + \\\"</font> </small>\\\",\\n        col_type: \\\"text_center_1\\\",\\n        url: 'hiker://empty',\\n        extra: {\\n            lineVisible: false,\\n            cls: '详情页'+input\\n        }\\n    })\\n}\\nif (cache_json.length > 0) {\\n    for (let i = 0; i < cache_json.length; i++) {\\n        var USER_HOME = 'https://app.xinpianchang.com/user/' + cache_json[i].userid;\\n        var user_avatar = cache_json[i].userInfo.avatar;\\n        var user_username = cache_json[i].userInfo.username;\\n        if (getMyVar('作者') == user_username) user_username = '<font color=#ed9a41>' + user_username +\\n            '</font>';\\n        // 评论内容\\n        var content = cache_json[i].content;\\n        // 评论时间\\n        var addtime = cache_json[i].addtime;\\n        addtime = timestampToTime(tm = addtime, ts = 1)\\n        // 回复\\n        if (cache_json[i].referer) {\\n            var re_name = cache_json[i].referer.userInfo.username;\\n            var re_content = cache_json[i].referer.content;\\n            var referer = \\\"<blockquote><font color='grey'>\\\" + '<code>' + re_name + '</code>' + '<br>' +\\n                re_content + \\\"</font></blockquote>\\\";\\n        } else {\\n            var referer = \\\"\\\"\\n        }\\n        for (let i = 0; i < 10; i++) {\\n            D.push({\\n                col_type: \\\"blank_block\\\",\\n                extra: {\\n                    cls: '详情页'+input\\n                }\\n            })\\n        }\\n        D.push({\\n            title: user_username + \\\"<small><font color='grey'>\\\" + '\\\\t\\\\t' + addtime +\\n                \\\"</font></small>\\\",\\n            img: user_avatar + '@Referer=' + user_avatar,\\n            url: $(USER_HOME).lazyRule(() => {\\n                return eval(JSON.parse(fetch(\\\"hiker://page/创作人首页\\\")).rule);\\n            }),\\n            col_type: 'avatar',\\n            extra: {\\n                cls: '详情页'+input\\n            }\\n        });\\n        D.push({\\n            title: referer + \\\"<font color='000'>\\\" + '\\\\t\\\\t\\\\t\\\\t\\\\t' + content + \\\"</font>\\\",\\n            url: 'hiker://empty',\\n            col_type: 'rich_text',\\n            extra: {\\n                cls: '详情页'+input\\n            }\\n        })\\n        D.push({\\n            col_type: 'line',\\n            extra: {\\n                cls: '详情页'+input\\n            }\\n        });\\n    }\\n    D.push({\\n        col_type: 'blank_block',\\n        extra: {\\n            cls: '详情页'+input,\\n            id: '结束评论'\\n        }\\n    });\\n} else if(total!= 0 ){\\n    eval(JSON.parse(fetch(\\\"hiker://page/END\\\")).rule)(D)\\n}\\nif(PAGE == 1) putMyVar('评论'+getMyVar('cache'+input), JSON.stringify(D));\"},{\"col_type\":\"movie_3\",\"name\":\"相似视频\",\"path\":\"相似视频\",\"rule\":\"var next_url = input + '/next';\\nvar NEXT_JSON = JSON.parse(request(next_url)).data.list;\\nvar D = [];\\nif (NEXT_JSON.length > 0) {\\n    for (let i = 0; i < NEXT_JSON.length; i++) {\\n        var PLAY_LINKS = NEXT_JSON[i].data.url.replace(/newstudios/, 'https');\\n        var next_title = NEXT_JSON[i].data.title;\\n        var next_cover = NEXT_JSON[i].data.cover;\\n        var next_view = NEXT_JSON[i].data.count.count_view;\\n        if (next_view > 10000) next_view = (next_view / 10000)\\n            .toFixed(1) + 'w';\\n        var next_like = NEXT_JSON[i].data.count.count_like;\\n        if (next_like > 1000) next_like = (next_like / 1000)\\n            .toFixed(1) + 'k';\\n        var next_user = NEXT_JSON[i].data.author.userinfo.username;\\n        let cache_link = input;\\n        D.push({\\n            col_type: 'movie_1_left_pic',\\n            title: next_title,\\n            desc: \\\"““”” <small><font color='grey'>\\\" + '播放量 ' + next_view + ' · 喜欢 ' + next_like + '\\\\n' + next_user + \\\"</font> </small>\\\",\\n            img: next_cover,\\n            url: $(PLAY_LINKS).lazyRule((cache_link) => {\\n                    clearMyVar('评论' + getMyVar('cache'+cache_link));\\n                    putMyVar('详细类别', '简介');\\n                    //putMyVar('相似视频', '1');\\n                    return eval(JSON.parse(fetch(\\\"hiker://page/视频详情页\\\")).rule);\\n                },cache_link),\\n            extra: {\\n                cls: '相似列表'+input\\n            }\\n        });\\n    }\\n    eval(JSON.parse(fetch(\\\"hiker://page/END\\\")).rule)(D)\\n} else {\\n    //eval(JSON.parse(fetch(\\\"hiker://page/END\\\")).rule)(D)\\n}\\nif(PAGE == 1) putMyVar('相似'+getMyVar('cache'+input), JSON.stringify(D));\"},{\"col_type\":\"movie_3\",\"name\":\"TopImg\",\"path\":\"TopImg\",\"rule\":\"d.push({\\n    col_type: 'pic_1_full',\\n    title: '0',\\n    img: \\\"https://hikerfans.com/weisyr/img/TopImg0.png\\\",\\n    url: 'hiker://empty',\\n});\"},{\"col_type\":\"movie_3\",\"name\":\"创作人作品列表_多线程\",\"path\":\"创作人作品列表_多线程\",\"rule\":\"// 时间戳转换\\neval(JSON.parse(fetch(\\\"hiker://page/时间戳转换\\\")).rule);\\nvar list_url = input + '/articles?is_hide_in_space=0&order=' + getMyVar(\\\"主页类别\\\", 'new') + '&return_struct_type=user_home&type=public&page=' + PAGE;\\n\\nvar task = function(obj) {\\n    D = [];\\n    var APP_JSON = JSON.parse(request(obj.url)).data;\\n    APP_JSON = APP_JSON.list;\\n    if (APP_JSON.length > 0) {\\n        for (let i = 0; i < APP_JSON.length; i++) {\\n            var app_cache = APP_JSON[i].resource;\\n            var PLAY_LINKS = app_cache.url.replace(/newstudios/, 'https');\\n            var like = app_cache.count.count_like;\\n            var view = app_cache.count.count_view;\\n            if (like > 1000) like = (like / 1000)\\n                .toFixed(1) + 'k';\\n            if (view > 10000) view = (view / 10000)\\n                .toFixed(1) + 'w';\\n            var img = app_cache.cover;\\n            var title = app_cache.title;\\n            var publish_time = app_cache.publish_time;\\n            // 时间戳转年月日\\n            publish_time = timestampToTime(tm = publish_time, ts = 0)\\n            Arr = {\\n                col_type: 'movie_1_left_pic',\\n                title: title,\\n                desc: \\\"““”” <small><font color='grey'>\\\" + publish_time + '\\\\n' + like + ' 喜欢' + ' · ' + view + ' 观看' + \\\"</font> </small>\\\",\\n                img: img,\\n                url: $(PLAY_LINKS).lazyRule(() => {\\n                    putMyVar('详细类别', '简介');\\n                    return eval(JSON.parse(fetch(\\\"hiker://page/视频详情页\\\")).rule);\\n                }),\\n                extra: {\\n                    cls: '主页'\\n                }\\n            };\\n            D.push(Arr);\\n        }\\n\\n    } else {\\n        //eval(JSON.parse(fetch(\\\"hiker://page/END\\\")).rule)(D)\\n    }\\n    deleteItem('loading');\\n    addItemAfter('主页专辑', D);\\n    if(PAGE == 1) putMyVar('作品new'+input, JSON.stringify(D));\\n    return D\\n};\\n\\nvar tasks = [{\\n    func: task,\\n    param: {\\n        url: list_url\\n    },\\n    id: '1'\\n}];\\n\\nbe(tasks);\"},{\"col_type\":\"movie_3\",\"name\":\"图片处理\",\"path\":\"Img\",\"rule\":\"js:\\nconst ByteArrayOutputStream = java.io.ByteArrayOutputStream;\\nconst ByteArrayInputStream = java.io.ByteArrayInputStream;\\nconst Bitmap = android.graphics.Bitmap;\\nconst BitmapFactory = android.graphics.BitmapFactory;\\nconst Canvas = android.graphics.Canvas;\\nconst Color = android.graphics.Color;\\nconst ColorMatrix = android.graphics.ColorMatrix;\\nconst ColorMatrixColorFilter = android.graphics.ColorMatrixColorFilter;\\nconst Paint = android.graphics.Paint;\\n\\nfunction toGrayscale(bmpOriginal) {\\n    bmpOriginal = BitmapFactory.decodeStream(bmpOriginal, null, getOptions());\\n    let width, height;\\n    height = bmpOriginal.getHeight();\\n    width = bmpOriginal.getWidth();\\n\\n    let bmpGrayscale = Bitmap.createBitmap(width, height, Bitmap.Config.RGB_565);\\n    let c = new Canvas(bmpGrayscale);\\n    let paint = new Paint();\\n    let cm = new ColorMatrix();\\n    cm.setSaturation(0);\\n    let f = new ColorMatrixColorFilter(cm);\\n    paint.setColorFilter(f);\\n    c.drawBitmap(bmpOriginal, 0, 0, paint);\\n    return outInput(bmpGrayscale);\\n}\\n\\nfunction getOptions() {\\n    let options = new BitmapFactory.Options();\\n    options.inSampleSize = 2.5;\\n    return options;\\n}\\nfunction outInput(bitmap){\\n    let baos = new ByteArrayOutputStream();\\n    bitmap.compress(Bitmap.CompressFormat.JPEG, 85, baos);\\n    return new ByteArrayInputStream(baos.toByteArray());\\n}\\nfunction compress(bmpOriginal) {\\n    bmpOriginal = BitmapFactory.decodeStream(bmpOriginal, null, getOptions());\\n    return outInput(bmpOriginal);\\n}\\n$.exports.compress = () => compress(input);\\n$.exports.toGrayscale = () => toGrayscale(input);\"}]","proxy":"","icon":"https://appimg.dbankcdn.com/application/icon144/85ebbac80b53487695b83587b9a5e103.png"},{"last_chapter_rule":"","pageList":[{"col_type":"movie_3","name":"加载数据","path":"config","rule":"function getConfig() {\n    try {\n        let config = fetch(\"hiker://files/rules/live/config.json\");\n        if (!config || config == \"\") {\n            return {\n                data: [],\n                version: 0\n            }\n        } else {\n            return JSON.parse(config)\n        }\n    } catch (e) {\n        try {\n            toast(\"配置文件格式有误\")\n        } catch (e) {}\n        return {\n            data: [],\n            version: 0\n        }\n    }\n}"},{"col_type":"movie_3","name":"批量导入","path":"batchIm","rule":"function batchImport(input, rule) {\n    input = input.trim();\n    if (input.length < 3 || input[0] != \"{\") {\n        return \"toast://请输入正确的格式\"\n    }\n    let im = JSON.parse(input);\n    if (im.data == null || im.data.length < 1) {\n        return \"toast://请输入正确的格式\"\n    }\n    eval(JSON.parse(request(\"hiker://page/config?rule=\" + rule)).rule);\n    let config = getConfig();\n    let count = 0;\n    let all = config.data.map(it => it.url + \"&&&\").join();\n    for (let i of im.data) {\n        if (all.indexOf(i.url + \"&&&\") >= 0) {\n            //重复的不要\n            continue;\n        }\n        count++;\n        config.data.push(i)\n    }\n    writeFile(\"hiker://files/rules/live/config.json\", JSON.stringify(config));\n    refreshPage();\n    return \"toast://已导入\" + count + \"条订阅源\";\n}"},{"col_type":"movie_3","name":"直播数据","path":"renderData","rule":"function renderLiveData(url) {\n    let m3u = \"\";\n    if (url.startsWith('hiker://') || url.startsWith('file://')) {\n        m3u = fetch(url);\n    } else {\n        let interval = Number(getItem('interval', '24')),\n            oldData = fetch('hiker://files/libs/' + md5(url) + '.js'),\n            remoteData = '';\n        try {\n            remoteData = fetchCache(url, interval, {\n                timeout: 50000\n            });\n        } catch (e) {}\n        if (!remoteData.includes('http') || remoteData.includes('<body>')) { \n            log('更新失败');\n            if (oldData) writeFile('hiker://files/libs/' + md5(url) + '.js', oldData);\n            m3u = oldData;\n        } else {\n            m3u = remoteData;\n        }\n    }\n\n    let mode =  m3u.indexOf('#EXTM3U') == 0 , re;\n    if(mode){\n        re = /(.*),(.*)\\s*?((?:http|rtmp)[^#\\s]*)/g;\n    }else{\n        re = /()(?:\\B\\$c_start|\\B#{1,2})?(.*?),?(##|头#|\\$c_end|,?#genre#|(?:http|rtmp)[^\\s]*)/g;\n    }\n        \n    let items = {},\n        group = '未分组';\n    for (let i = re.exec(m3u); i != null; i = re.exec(m3u)) {\n        if (mode) {\n            group = (i[1].match(/group-title=\"(.*?)\"/) || [null, group])[1];\n        } else if (['#genre#','##','头#','$c_end'].includes(i[3])) {\n            group = i[2];\n            continue;\n        }\n        let title = i[2],\n            url = i[3].includes('#') ? i[3].split('#') : [i[3]],\n            headers = [];\n        if(!url[url.length-1]) url.pop();\n        url.forEach((v,index,array)=>{\n            if(/;\\{(.*)\\}/.test(v)){\n                let obj = {},\n                     con = v.match(/;\\{(.*)\\}/)[1],\n                     arr = con.split('&&');\n                arr.forEach((i)=>{\n                    let [key,value] = i.split('@');\n                    obj[key] = value.replace(/;/g,'；；');\n                })\n                array[index] = v.match(/^([^;]*);\\{/)[1]\n                headers.push(obj);\n            }else{\n                headers.push({'User-Agent' : MOBILE_UA.replace(/;/g,'；；')});\n            }\n            array[index] = 'video://' + array[index].replace(/;/g,'；；');\n        });\n        if (items[group]) {\n            if (items[group][title]) {\n                items[group][title].url = items[group][title].url.concat(url);\n                items[group][title].headers = items[group][title].headers.concat(headers);\n            } else {\n                items[group][title] = {url:url,headers:headers};\n            }\n        } else {\n            items[group] = {};\n            items[group][title] = {url:url,headers:headers};\n        };\n    }\n    return items;\n}\n\n$.exports = {\n    renderLiveData: renderLiveData\n}\n"},{"col_type":"movie_3","name":"设置页","path":"renderSetting","rule":"function renderSetting() {\n    function getColoredText(text) {\n        return '““””<span style=\"color: #19B89D\">' + text + '</span>';\n    }\n    const d = [];\n    var img = fetch('https://wanghun.top/api/meinvtu.php?m=1');\n    d.push({\n        title: \"\",\n        col_type: 'card_pic_1',\n        desc: \"0\",\n        pic_url: img,\n        url: img + '#.jpg',\n    })\n    d.push({\n        col_type: \"line\"\n    })\n    d.push({\n        title: \"‘‘’’<span style='color:#0aa344'>注意备份!</span>\",\n        desc: \"‘‘’’<span style='color:#f05654'>导入会覆盖原有的文件</span>\",\n        col_type: \"text_center_1\",\n        url: \"hiker://empty\",\n    })\n    d.push({\n        title: \"使用提示\",\n        desc: \"\",\n        col_type: \"icon_round_4\",\n        pic_url: \"https://hikerfans.com/tubiao/more/1.png\",\n        url: \"toast://首次使用:1. 点击在线订阅，刷新即用。2. 在线订阅随作者更新而更新，推荐使用。\",\n    })\n    d.push({\n        title: \"在线订阅\",\n        desc: \"\",\n        col_type: \"icon_round_4\",\n        pic_url: \"https://hikerfans.com/tubiao/more/21.png\",\n        url: \"海阔视界本地文件分享￥file_url￥hiker://files/rules/live/config.json@http://hiker.nokia.press/hikerule/rulelist.json?id=5851&auth=61e85494-799d-5598-9832-48620de40ea7\",\n    })\n    d.push({\n        title: \"导入本地\",\n        desc: \"\",\n        pic_url: \"https://hikerfans.com/tubiao/more/59.png\",\n        col_type: \"icon_round_4\",\n        url: \"海阔视界本地文件分享￥file_url￥hiker://files/rules/live/live.txt@http://hiker.nokia.press/hikerule/rulelist.json?id=5852&auth=76ffd244-61b2-54a7-8518-c8bc4c81b995\",\n    })\n    d.push({\n        title: \"导入聚影\",\n        desc: \"\",\n        col_type: \"icon_round_4\",\n        pic_url: \"https://hikerfans.com/tubiao/more/64.png\",\n        url: \"海阔视界本地文件分享￥file_url￥hiker://files/rules/Src/Juying/liveconfig.json@http://hiker.nokia.press/hikerule/rulelist.json?id=5861&auth=e1b533a0-d48d-548f-b7b9-5d49b8e9a354\",\n    })\n    d.push({\n        title: \"\",\n        desc: \"\",\n        col_type: \"line\",\n        url: \"'\",\n    })\n\n    let interval = getItem('interval', '24');\n    d.push({\n        title: interval == -1 ? '已禁止自动更新'.fontcolor(\"#19B89D\").bold() : ('更新间隔:' + interval + '小时').fontcolor(\"#19B89D\").bold(),\n        url: $(interval, '输入n为正整数时，每隔n小时自动更新\\n为0时，每次打开都会更新\\n为-1时，禁止自动更新').input(() => {\n            if (parseInt(input) >= -1) {\n                setItem('interval', input);\n            }\n            refreshPage();\n            return 'hiker://empty'\n        }),\n        pic_url: 'https://hikerfans.com/tubiao/more/221.png',\n        col_type: \"avatar\"\n    });\n\n    d.push({\n        col_type: \"big_blank_block\"\n    });\n\n    d.push({\n        title: getColoredText(\"新建订阅\"),\n        col_type: \"scroll_button\",\n        desc: \"请输入直播源订阅地址\",\n        url: $('', '请输入订阅地址').input((rule) => {\n            if (input == \"\") {\n                return \"toast://不能为空\"\n            } else if (input.indexOf(\"http\") != 0 && input.indexOf(\"file\") != 0 && input.indexOf(\"hiker\") != 0) {\n                return \"toast://链接格式有误\"\n            } else {\n                return $('', \"请输入订阅标题\").input((url, rule) => {\n                    eval(JSON.parse(request(\"hiker://page/config?rule=\" + rule)).rule);\n                    let config = getConfig();\n                    config.data.push({\n                        name: input,\n                        url: url\n                    });\n                    writeFile(\"hiker://files/rules/live/config.json\", JSON.stringify(config));\n                    refreshPage();\n                    return \"toast://已保存\";\n                }, input, rule)\n            }\n        }, getMyVar('title'))\n    });\n\n    d.push({\n        title: getColoredText(\"导入订阅\"),\n        col_type: \"scroll_button\",\n        url: $('', '支持原始数据和云剪贴板分享链接').input((rule) => {\n            eval(JSON.parse(request(\"hiker://page/batchIm?rule=\" + rule)).rule);\n            if (input.startsWith('聚直播分享##')) {\n                input = parsePaste(input.split('##\\n')[1]);\n            }\n            return batchImport(input, rule);\n        }, getMyVar('title'))\n    });\n    d.push({\n        title: getColoredText(\"导入本地源\"),\n        col_type: \"scroll_button\",\n        desc: \"请输入直播源名称\",\n        url: $('', '请输入直播源名称').input((rule) => {\n            if (input == \"\") {\n                return \"toast://不能为空\"\n            } else {\n                return \"fileSelect://\" + $.toString((name) => {\n                    let s = input.split(\"/\")\n                    var url = \"hiker://files/cache/live/\" + name + \".m3u\"\n                    var c = fetch(\"hiker://files/cache/\" + s[s.length - 1])\n                    if (!c.includes('http')) {\n                        return 'toast://非法文件'\n                    }\n                    writeFile(url, c)\n                    eval(JSON.parse(request(\"hiker://page/config?rule=聚直播\")).rule);\n                    let config = getConfig();\n                    config.data.push({\n                        name: name,\n                        url: url\n                    });\n                    writeFile(\"hiker://files/rules/live/config.json\", JSON.stringify(config));\n                    refreshPage();\n                    return 'toast://已保存'\n                }, input)\n            }\n        })\n    });\n    d.push({\n        title: getColoredText(\"分享订阅\"),\n        col_type: \"scroll_button\",\n        url: $([\"原始数据\", \"云剪贴板\", \"云口令\"], 3).select(() => {\n            return $('确定导出？\\n(禁用订阅不会导出)').confirm((type) => {\n                eval(JSON.parse(request(\"hiker://page/config\")).rule);\n                config = getConfig();\n                config.data = config.data.filter(v => !v.inVisible);\n                if (type == \"云剪贴板\") {\n                    var data = '聚直播分享##\\n' + sharePaste(JSON.stringify(config));\n                } else if (type == \"云口令\") {\n                    var data = '聚直播分享,复制后打开软件即可导入\\n' + sharePaste(JSON.stringify(config)) + '@import=js:eval(JSON.parse(fetch(\"hiker://page/cloud?rule=聚直播\")).rule)';\n                } else {\n                    var data = JSON.stringify(config);\n                }\n                return \"copy://\" + data;\n            }, input)\n        })\n    });\n    d.push({\n        title: getColoredText(\"编辑全部\"),\n        col_type: \"scroll_button\",\n        url: \"editFile://hiker://files/rules/live/config.json\"\n    });\n\n    d.push({\n        col_type: \"blank_block\"\n    });\n\n    eval(JSON.parse(request(\"hiker://page/config\")).rule);\n    config = getConfig();\n    let editMode = getMyVar('editMode', '启用禁用');\n    ['启用禁用', '删除订阅', '重新排序', '编辑订阅', '清除缓存'].forEach((v) => {\n        d.push({\n            title: v == editMode ? '““””' + v.bold().fontcolor('#19B89D') : v,\n            url: v == editMode ? 'hiker://empty' : $('#noLoading#').lazyRule((v) => {\n                putMyVar('editMode', v)\n                refreshPage(false)\n                return 'hiker://empty'\n            }, v),\n            col_type: 'scroll_button'\n        })\n    });\n    config.data.forEach((v, i) => {\n        let el = {\n            title: v.name,\n            col_type: \"text_3\"\n        }\n        switch (editMode) {\n            case '启用禁用':\n                el.title = (v.inVisible ? '🔴 ' : '🟢 ') + el.title\n                el.url = $('#noLoading#').lazyRule((i) => {\n                    eval(JSON.parse(request(\"hiker://page/config\")).rule);\n                    config = getConfig();\n                    config.data[i].inVisible = !config.data[i].inVisible;\n                    writeFile(\"hiker://files/rules/live/config.json\", JSON.stringify(config));\n                    refreshPage(false);\n                    return 'hiker://empty'\n                }, i)\n                break\n            case '删除订阅':\n                el.url = \"confirm://确认删除“\" + v.name + \"”订阅？.js:\" + $.toString((i) => {\n                    eval(JSON.parse(request(\"hiker://page/config\")).rule);\n                    config = getConfig();\n                    config.data.splice(i, 1);\n                    writeFile(\"hiker://files/rules/live/config.json\", JSON.stringify(config));\n                    refreshPage(false);\n                    return \"toast://已删除\";\n                }, i)\n                break\n            case '重新排序':\n                let sortFlag = parseInt(getMyVar('sortFlag', '-1'))\n                el.title = (sortFlag == i ? '🔃  ' : '') + el.title\n                if (sortFlag == -1)\n                    el.url = $('#noLoading#').lazyRule((i) => {\n                        putMyVar('sortFlag', i.toString())\n                        refreshPage(false)\n                        return 'toast://选择要移动到的位置'\n                    }, i)\n                else\n                    el.url = $('#noLoading#').lazyRule((oldIndex, newIndex) => {\n                        eval(JSON.parse(request(\"hiker://page/config\")).rule);\n                        config = getConfig();\n                        config.data.splice(newIndex, 0, config.data.splice(oldIndex, 1)[0])\n                        writeFile(\"hiker://files/rules/live/config.json\", JSON.stringify(config));\n                        putMyVar('sortFlag', '-1')\n                        refreshPage(false)\n                        return 'hiker://empty'\n                    }, sortFlag, i)\n                break\n            case '编辑订阅':\n                let arr = ['编辑名称', '编辑地址', '编辑内容'];\n                el.url = $(arr, 3).select((v, i) => {\n                    if (input == '编辑名称') {\n                        return $(v.name, '输入新名称').input((i) => {\n                            eval(JSON.parse(request(\"hiker://page/config\")).rule);\n                            config = getConfig();\n                            if (input) {\n                                config.data[i].name = input\n                                writeFile(\"hiker://files/rules/live/config.json\", JSON.stringify(config));\n                                refreshPage(false)\n                                return 'toast://修改成功'\n                            } else {\n                                return 'toast://不能为空'\n                            }\n                        }, i);\n                    } else if (input == '编辑地址') {\n                        return $(v.url, '输入新地址').input((i) => {\n                            eval(JSON.parse(request(\"hiker://page/config\")).rule);\n                            config = getConfig();\n                            if (input == \"\") {\n                                return \"toast://不能为空\"\n                            } else if (input.indexOf(\"http\") != 0 && input.indexOf(\"file\") != 0 && input.indexOf(\"hiker\") != 0) {\n                                return \"toast://链接格式有误\"\n                            } else {\n                                config.data[i].url = input\n                                writeFile(\"hiker://files/rules/live/config.json\", JSON.stringify(config));\n                                refreshPage(false)\n                                return 'toast://修改成功'\n                            }\n                        }, i);\n                    } else if (input == '编辑内容') {\n                        if (v.url.startsWith('file://') || v.url.startsWith('hiker://files')) {\n                            return 'editFile://' + v.url;\n                        }\n                        return 'editFile://hiker://files/libs/' + md5(v.url) + '.js'\n                    }\n                }, v, i);\n                break;\n            case '清除缓存':\n                el.url = $('确定清除“' + v.name + '”订阅缓存？\\n(可立即更新)').confirm((url) => {\n                    deleteCache(url);\n                    return 'toast://清除成功'\n                }, v.url)\n                break;\n        }\n        d.push(el)\n    });\n    return d;\n}\n\n$.exports = {\n    renderSetting: renderSetting\n}"},{"col_type":"movie_3","name":"云口令","path":"cloud","rule":"eval(JSON.parse(request(\"hiker://page/batchIm?rule=聚直播\")).rule);\nlet content = parsePaste(input);\nbatchImport(content, \"聚直播\");"}],"title":"电视直播","author":"🏅京梦修改[小棉袄🌞&Joker]","version":9,"type":"live","url":"hiker://empty","col_type":"icon_2_round","class_name":"","class_url":"","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:\neval(JSON.parse(request(\"hiker://page/config\")).rule); //getConfig\n\nlet data = [],\n    config = getConfig();\nconfig.data = config.data.filter(v => !v.inVisible);\nif (config.data.length <= 0) {\n    data = $.require('hiker://page/renderSetting').renderSetting();\n} else {\n    let select = getItem(\"live-select\", config.data[0].name),\n        has = config.data.map(i => i.name).includes(select);\n    if (!has) {\n        select = config.data[0].name;\n    }\n    var img = fetch('https://wanghun.top/api/meinvtu.php?m=1');\n    data.push({\n        title: \"\",\n        col_type: \"card_pic_1\",\n        desc: \"0\",\n        pic_url: img,\n        url: $(\"hiker://empty#noLoading#\").rule(() => {\n            addListener('onClose', 'refreshPage()')\n            setResult($.require('hiker://page/renderSetting').renderSetting())\n        })\n    })\n\n    data.push({\n        title: '搜索',\n        desc: '请输入搜索关键词',\n        extra: {\n            defaultValue: getVar('search_key', ''),\n            onChange: 'putVar(\"search_key\",input)'\n        },\n        col_type: 'input',\n        url: $.toString(() => {\n            return 'hiker://search?rule=' + getMyVar('title') + '&s=' + getVar('search_key', '')\n        })\n    })\n\n\n\n    for (source of config.data) {\n        data.push({\n            title: source.name == select ? \"““””<span style='color: #19B89D'>\" + select + \"</span>\" : source.name,\n            col_type: \"scroll_button\",\n            url: $('#noLoading#').lazyRule((a) => {\n                setItem(\"live-select\", a);\n                setItem('selectGroup', '');\n                refreshPage();\n                return \"hiker://empty\"\n            }, source.name)\n        })\n    }\n\n    data.push({\n        col_type: 'blank_block'\n    })\n\n    for (source of config.data) {\n        if (source.name == select) {\n            try {\n                let items = $.require('hiker://page/renderData').renderLiveData(source.url);\n                let groups = Object.keys(items);\n                //groups.push(groups.splice(groups.indexOf(0), 1)[0]);\n                let selectGroup = getItem('selectGroup', groups[0]);\n                if (selectGroup == \"\" || !groups.includes(selectGroup)) selectGroup = groups[0];\n                groups.forEach((group) => {\n                    if (group) {\n                        data.push({\n                            title: group == selectGroup ? \"““””<span style='color: #19B89D'>\" + group + \"</span>\" : group,\n                            url: $('#noLoading#').lazyRule((group) => {\n                                setItem('selectGroup', group);\n                                refreshPage();\n                                return 'hiker://empty'\n                            }, group),\n                            col_type: 'scroll_button',\n                            extra: {\n                                lineVisible: false\n                            }\n                        })\n                    }\n                })\n                \n                for (let title in items[selectGroup]) {\n                    data.push({\n                        title: title,\n                        url: $().lazyRule((sourceurl,selectGroup,title) => {\n                            let items = $.require('hiker://page/renderData').renderLiveData(sourceurl);\n                            let surls = items[selectGroup][title].url;\n                            let sheaders = items[selectGroup][title].headers;\n                            for (let groupi in items){\n                                let group = items[groupi];\n                                if(!group) continue;\n                                for (let ititle in group){\n                                    if(ititle == title && !!group[ititle]){\n                                        let urls = group[ititle].url;\n                                        let headers = group[ititle].headers;\n                                       surls = surls.concat(urls);\n                                       sheaders = sheaders.concat(headers);\n                                    }\n                                }\n                            }\n                            surls = Array.from(new Set(surls));\n                            sheaders = Array.from(new Set(sheaders));\n                            return JSON.stringify({\n                                urls: surls,\n                                headers: sheaders\n                            })\n                        },source.url,selectGroup,title),\n                        //col_type: 'text_3',\n                        img: \"https://hikerfans.com/tubiao/more/221.png\"\n                    })\n                }\n            } catch (e) {\n                data.push({\n                    title: \"数据加载失败\\n\" + JSON.stringify(e),\n                    col_type: \"long_text\"\n                })\n            }\n            break;\n        }\n    }\n\n\n}\nsetResult(data);","searchFind":"js:\neval(JSON.parse(request(\"hiker://page/config\")).rule);\nlet config = getConfig();\nlet rules = config.data.map((source) => {\n    return {\n        title: source.name,\n        search_url: 'hiker://empty?key=**',\n        searchFind: 'js:' + $.toString((url, rule_title) => {\n            let d = [],\n                key = getParam('key');\n            let items = $.require('hiker://page/renderData?rule=' + rule_title).renderLiveData(url);\n            for (let group in items) {\n                for (let title in items[group]) {\n                    if (title.indexOf(key) >= 0 || title.toLowerCase().indexOf(key) >= 0) {\n                        d.push({\n                            title: title,\n                            url: JSON.stringify({\n                                urls: items[group][title].url,\n                                headers: items[group][title].headers\n                            })\n                        })\n                    }\n                }\n            }\n            setResult(d);\n        }, source.url, getMyVar('title'))\n    };\n})\nsetResult([{\n    title: \"点我开始聚搜\",\n    url: \"hiker://search?s=\" + getParam(\"key\"),\n    extra: {\n        rules: $.toString((rules) => {\n            return JSON.stringify(rules)\n        }, rules)\n    }\n}])","search_url":"hiker://empty?key=**","titleColor":"ffff00ff","group":"①推荐","detail_col_type":"movie_1","detail_find_rule":"","sdetail_col_type":"movie_1","sdetail_find_rule":"","ua":"mobile","preRule":"putMyVar('title',MY_RULE.title);","pages":"[{\"col_type\":\"movie_3\",\"name\":\"加载数据\",\"path\":\"config\",\"rule\":\"function getConfig() {\\n    try {\\n        let config = fetch(\\\"hiker://files/rules/live/config.json\\\");\\n        if (!config || config == \\\"\\\") {\\n            return {\\n                data: [],\\n                version: 0\\n            }\\n        } else {\\n            return JSON.parse(config)\\n        }\\n    } catch (e) {\\n        try {\\n            toast(\\\"配置文件格式有误\\\")\\n        } catch (e) {}\\n        return {\\n            data: [],\\n            version: 0\\n        }\\n    }\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"批量导入\",\"path\":\"batchIm\",\"rule\":\"function batchImport(input, rule) {\\n    input = input.trim();\\n    if (input.length < 3 || input[0] != \\\"{\\\") {\\n        return \\\"toast://请输入正确的格式\\\"\\n    }\\n    let im = JSON.parse(input);\\n    if (im.data == null || im.data.length < 1) {\\n        return \\\"toast://请输入正确的格式\\\"\\n    }\\n    eval(JSON.parse(request(\\\"hiker://page/config?rule=\\\" + rule)).rule);\\n    let config = getConfig();\\n    let count = 0;\\n    let all = config.data.map(it => it.url + \\\"&&&\\\").join();\\n    for (let i of im.data) {\\n        if (all.indexOf(i.url + \\\"&&&\\\") >= 0) {\\n            //重复的不要\\n            continue;\\n        }\\n        count++;\\n        config.data.push(i)\\n    }\\n    writeFile(\\\"hiker://files/rules/live/config.json\\\", JSON.stringify(config));\\n    refreshPage();\\n    return \\\"toast://已导入\\\" + count + \\\"条订阅源\\\";\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"直播数据\",\"path\":\"renderData\",\"rule\":\"function renderLiveData(url) {\\n    let m3u = \\\"\\\";\\n    if (url.startsWith('hiker://') || url.startsWith('file://')) {\\n        m3u = fetch(url);\\n    } else {\\n        let interval = Number(getItem('interval', '24')),\\n            oldData = fetch('hiker://files/libs/' + md5(url) + '.js'),\\n            remoteData = '';\\n        try {\\n            remoteData = fetchCache(url, interval, {\\n                timeout: 50000\\n            });\\n        } catch (e) {}\\n        if (!remoteData.includes('http') || remoteData.includes('<body>')) { \\n            log('更新失败');\\n            if (oldData) writeFile('hiker://files/libs/' + md5(url) + '.js', oldData);\\n            m3u = oldData;\\n        } else {\\n            m3u = remoteData;\\n        }\\n    }\\n\\n    let mode =  m3u.indexOf('#EXTM3U') == 0 , re;\\n    if(mode){\\n        re = /(.*),(.*)\\\\s*?((?:http|rtmp)[^#\\\\s]*)/g;\\n    }else{\\n        re = /()(?:\\\\B\\\\$c_start|\\\\B#{1,2})?(.*?),?(##|头#|\\\\$c_end|,?#genre#|(?:http|rtmp)[^\\\\s]*)/g;\\n    }\\n        \\n    let items = {},\\n        group = '未分组';\\n    for (let i = re.exec(m3u); i != null; i = re.exec(m3u)) {\\n        if (mode) {\\n            group = (i[1].match(/group-title=\\\"(.*?)\\\"/) || [null, group])[1];\\n        } else if (['#genre#','##','头#','$c_end'].includes(i[3])) {\\n            group = i[2];\\n            continue;\\n        }\\n        let title = i[2],\\n            url = i[3].includes('#') ? i[3].split('#') : [i[3]],\\n            headers = [];\\n        if(!url[url.length-1]) url.pop();\\n        url.forEach((v,index,array)=>{\\n            if(/;\\\\{(.*)\\\\}/.test(v)){\\n                let obj = {},\\n                     con = v.match(/;\\\\{(.*)\\\\}/)[1],\\n                     arr = con.split('&&');\\n                arr.forEach((i)=>{\\n                    let [key,value] = i.split('@');\\n                    obj[key] = value.replace(/;/g,'；；');\\n                })\\n                array[index] = v.match(/^([^;]*);\\\\{/)[1]\\n                headers.push(obj);\\n            }else{\\n                headers.push({'User-Agent' : MOBILE_UA.replace(/;/g,'；；')});\\n            }\\n            array[index] = 'video://' + array[index].replace(/;/g,'；；');\\n        });\\n        if (items[group]) {\\n            if (items[group][title]) {\\n                items[group][title].url = items[group][title].url.concat(url);\\n                items[group][title].headers = items[group][title].headers.concat(headers);\\n            } else {\\n                items[group][title] = {url:url,headers:headers};\\n            }\\n        } else {\\n            items[group] = {};\\n            items[group][title] = {url:url,headers:headers};\\n        };\\n    }\\n    return items;\\n}\\n\\n$.exports = {\\n    renderLiveData: renderLiveData\\n}\\n\"},{\"col_type\":\"movie_3\",\"name\":\"设置页\",\"path\":\"renderSetting\",\"rule\":\"function renderSetting() {\\n    function getColoredText(text) {\\n        return '““””<span style=\\\"color: #19B89D\\\">' + text + '</span>';\\n    }\\n    const d = [];\\n    var img = fetch('https://wanghun.top/api/meinvtu.php?m=1');\\n    d.push({\\n        title: \\\"\\\",\\n        col_type: 'card_pic_1',\\n        desc: \\\"0\\\",\\n        pic_url: img,\\n        url: img + '#.jpg',\\n    })\\n    d.push({\\n        col_type: \\\"line\\\"\\n    })\\n    d.push({\\n        title: \\\"‘‘’’<span style='color:#0aa344'>注意备份!</span>\\\",\\n        desc: \\\"‘‘’’<span style='color:#f05654'>导入会覆盖原有的文件</span>\\\",\\n        col_type: \\\"text_center_1\\\",\\n        url: \\\"hiker://empty\\\",\\n    })\\n    d.push({\\n        title: \\\"使用提示\\\",\\n        desc: \\\"\\\",\\n        col_type: \\\"icon_round_4\\\",\\n        pic_url: \\\"https://hikerfans.com/tubiao/more/1.png\\\",\\n        url: \\\"toast://首次使用:1. 点击在线订阅，刷新即用。2. 在线订阅随作者更新而更新，推荐使用。\\\",\\n    })\\n    d.push({\\n        title: \\\"在线订阅\\\",\\n        desc: \\\"\\\",\\n        col_type: \\\"icon_round_4\\\",\\n        pic_url: \\\"https://hikerfans.com/tubiao/more/21.png\\\",\\n        url: \\\"海阔视界本地文件分享￥file_url￥hiker://files/rules/live/config.json@http://hiker.nokia.press/hikerule/rulelist.json?id=5851&auth=61e85494-799d-5598-9832-48620de40ea7\\\",\\n    })\\n    d.push({\\n        title: \\\"导入本地\\\",\\n        desc: \\\"\\\",\\n        pic_url: \\\"https://hikerfans.com/tubiao/more/59.png\\\",\\n        col_type: \\\"icon_round_4\\\",\\n        url: \\\"海阔视界本地文件分享￥file_url￥hiker://files/rules/live/live.txt@http://hiker.nokia.press/hikerule/rulelist.json?id=5852&auth=76ffd244-61b2-54a7-8518-c8bc4c81b995\\\",\\n    })\\n    d.push({\\n        title: \\\"导入聚影\\\",\\n        desc: \\\"\\\",\\n        col_type: \\\"icon_round_4\\\",\\n        pic_url: \\\"https://hikerfans.com/tubiao/more/64.png\\\",\\n        url: \\\"海阔视界本地文件分享￥file_url￥hiker://files/rules/Src/Juying/liveconfig.json@http://hiker.nokia.press/hikerule/rulelist.json?id=5861&auth=e1b533a0-d48d-548f-b7b9-5d49b8e9a354\\\",\\n    })\\n    d.push({\\n        title: \\\"\\\",\\n        desc: \\\"\\\",\\n        col_type: \\\"line\\\",\\n        url: \\\"'\\\",\\n    })\\n\\n    let interval = getItem('interval', '24');\\n    d.push({\\n        title: interval == -1 ? '已禁止自动更新'.fontcolor(\\\"#19B89D\\\").bold() : ('更新间隔:' + interval + '小时').fontcolor(\\\"#19B89D\\\").bold(),\\n        url: $(interval, '输入n为正整数时，每隔n小时自动更新\\\\n为0时，每次打开都会更新\\\\n为-1时，禁止自动更新').input(() => {\\n            if (parseInt(input) >= -1) {\\n                setItem('interval', input);\\n            }\\n            refreshPage();\\n            return 'hiker://empty'\\n        }),\\n        pic_url: 'https://hikerfans.com/tubiao/more/221.png',\\n        col_type: \\\"avatar\\\"\\n    });\\n\\n    d.push({\\n        col_type: \\\"big_blank_block\\\"\\n    });\\n\\n    d.push({\\n        title: getColoredText(\\\"新建订阅\\\"),\\n        col_type: \\\"scroll_button\\\",\\n        desc: \\\"请输入直播源订阅地址\\\",\\n        url: $('', '请输入订阅地址').input((rule) => {\\n            if (input == \\\"\\\") {\\n                return \\\"toast://不能为空\\\"\\n            } else if (input.indexOf(\\\"http\\\") != 0 && input.indexOf(\\\"file\\\") != 0 && input.indexOf(\\\"hiker\\\") != 0) {\\n                return \\\"toast://链接格式有误\\\"\\n            } else {\\n                return $('', \\\"请输入订阅标题\\\").input((url, rule) => {\\n                    eval(JSON.parse(request(\\\"hiker://page/config?rule=\\\" + rule)).rule);\\n                    let config = getConfig();\\n                    config.data.push({\\n                        name: input,\\n                        url: url\\n                    });\\n                    writeFile(\\\"hiker://files/rules/live/config.json\\\", JSON.stringify(config));\\n                    refreshPage();\\n                    return \\\"toast://已保存\\\";\\n                }, input, rule)\\n            }\\n        }, getMyVar('title'))\\n    });\\n\\n    d.push({\\n        title: getColoredText(\\\"导入订阅\\\"),\\n        col_type: \\\"scroll_button\\\",\\n        url: $('', '支持原始数据和云剪贴板分享链接').input((rule) => {\\n            eval(JSON.parse(request(\\\"hiker://page/batchIm?rule=\\\" + rule)).rule);\\n            if (input.startsWith('聚直播分享##')) {\\n                input = parsePaste(input.split('##\\\\n')[1]);\\n            }\\n            return batchImport(input, rule);\\n        }, getMyVar('title'))\\n    });\\n    d.push({\\n        title: getColoredText(\\\"导入本地源\\\"),\\n        col_type: \\\"scroll_button\\\",\\n        desc: \\\"请输入直播源名称\\\",\\n        url: $('', '请输入直播源名称').input((rule) => {\\n            if (input == \\\"\\\") {\\n                return \\\"toast://不能为空\\\"\\n            } else {\\n                return \\\"fileSelect://\\\" + $.toString((name) => {\\n                    let s = input.split(\\\"/\\\")\\n                    var url = \\\"hiker://files/cache/live/\\\" + name + \\\".m3u\\\"\\n                    var c = fetch(\\\"hiker://files/cache/\\\" + s[s.length - 1])\\n                    if (!c.includes('http')) {\\n                        return 'toast://非法文件'\\n                    }\\n                    writeFile(url, c)\\n                    eval(JSON.parse(request(\\\"hiker://page/config?rule=聚直播\\\")).rule);\\n                    let config = getConfig();\\n                    config.data.push({\\n                        name: name,\\n                        url: url\\n                    });\\n                    writeFile(\\\"hiker://files/rules/live/config.json\\\", JSON.stringify(config));\\n                    refreshPage();\\n                    return 'toast://已保存'\\n                }, input)\\n            }\\n        })\\n    });\\n    d.push({\\n        title: getColoredText(\\\"分享订阅\\\"),\\n        col_type: \\\"scroll_button\\\",\\n        url: $([\\\"原始数据\\\", \\\"云剪贴板\\\", \\\"云口令\\\"], 3).select(() => {\\n            return $('确定导出？\\\\n(禁用订阅不会导出)').confirm((type) => {\\n                eval(JSON.parse(request(\\\"hiker://page/config\\\")).rule);\\n                config = getConfig();\\n                config.data = config.data.filter(v => !v.inVisible);\\n                if (type == \\\"云剪贴板\\\") {\\n                    var data = '聚直播分享##\\\\n' + sharePaste(JSON.stringify(config));\\n                } else if (type == \\\"云口令\\\") {\\n                    var data = '聚直播分享,复制后打开软件即可导入\\\\n' + sharePaste(JSON.stringify(config)) + '@import=js:eval(JSON.parse(fetch(\\\"hiker://page/cloud?rule=聚直播\\\")).rule)';\\n                } else {\\n                    var data = JSON.stringify(config);\\n                }\\n                return \\\"copy://\\\" + data;\\n            }, input)\\n        })\\n    });\\n    d.push({\\n        title: getColoredText(\\\"编辑全部\\\"),\\n        col_type: \\\"scroll_button\\\",\\n        url: \\\"editFile://hiker://files/rules/live/config.json\\\"\\n    });\\n\\n    d.push({\\n        col_type: \\\"blank_block\\\"\\n    });\\n\\n    eval(JSON.parse(request(\\\"hiker://page/config\\\")).rule);\\n    config = getConfig();\\n    let editMode = getMyVar('editMode', '启用禁用');\\n    ['启用禁用', '删除订阅', '重新排序', '编辑订阅', '清除缓存'].forEach((v) => {\\n        d.push({\\n            title: v == editMode ? '““””' + v.bold().fontcolor('#19B89D') : v,\\n            url: v == editMode ? 'hiker://empty' : $('#noLoading#').lazyRule((v) => {\\n                putMyVar('editMode', v)\\n                refreshPage(false)\\n                return 'hiker://empty'\\n            }, v),\\n            col_type: 'scroll_button'\\n        })\\n    });\\n    config.data.forEach((v, i) => {\\n        let el = {\\n            title: v.name,\\n            col_type: \\\"text_3\\\"\\n        }\\n        switch (editMode) {\\n            case '启用禁用':\\n                el.title = (v.inVisible ? '🔴 ' : '🟢 ') + el.title\\n                el.url = $('#noLoading#').lazyRule((i) => {\\n                    eval(JSON.parse(request(\\\"hiker://page/config\\\")).rule);\\n                    config = getConfig();\\n                    config.data[i].inVisible = !config.data[i].inVisible;\\n                    writeFile(\\\"hiker://files/rules/live/config.json\\\", JSON.stringify(config));\\n                    refreshPage(false);\\n                    return 'hiker://empty'\\n                }, i)\\n                break\\n            case '删除订阅':\\n                el.url = \\\"confirm://确认删除“\\\" + v.name + \\\"”订阅？.js:\\\" + $.toString((i) => {\\n                    eval(JSON.parse(request(\\\"hiker://page/config\\\")).rule);\\n                    config = getConfig();\\n                    config.data.splice(i, 1);\\n                    writeFile(\\\"hiker://files/rules/live/config.json\\\", JSON.stringify(config));\\n                    refreshPage(false);\\n                    return \\\"toast://已删除\\\";\\n                }, i)\\n                break\\n            case '重新排序':\\n                let sortFlag = parseInt(getMyVar('sortFlag', '-1'))\\n                el.title = (sortFlag == i ? '🔃  ' : '') + el.title\\n                if (sortFlag == -1)\\n                    el.url = $('#noLoading#').lazyRule((i) => {\\n                        putMyVar('sortFlag', i.toString())\\n                        refreshPage(false)\\n                        return 'toast://选择要移动到的位置'\\n                    }, i)\\n                else\\n                    el.url = $('#noLoading#').lazyRule((oldIndex, newIndex) => {\\n                        eval(JSON.parse(request(\\\"hiker://page/config\\\")).rule);\\n                        config = getConfig();\\n                        config.data.splice(newIndex, 0, config.data.splice(oldIndex, 1)[0])\\n                        writeFile(\\\"hiker://files/rules/live/config.json\\\", JSON.stringify(config));\\n                        putMyVar('sortFlag', '-1')\\n                        refreshPage(false)\\n                        return 'hiker://empty'\\n                    }, sortFlag, i)\\n                break\\n            case '编辑订阅':\\n                let arr = ['编辑名称', '编辑地址', '编辑内容'];\\n                el.url = $(arr, 3).select((v, i) => {\\n                    if (input == '编辑名称') {\\n                        return $(v.name, '输入新名称').input((i) => {\\n                            eval(JSON.parse(request(\\\"hiker://page/config\\\")).rule);\\n                            config = getConfig();\\n                            if (input) {\\n                                config.data[i].name = input\\n                                writeFile(\\\"hiker://files/rules/live/config.json\\\", JSON.stringify(config));\\n                                refreshPage(false)\\n                                return 'toast://修改成功'\\n                            } else {\\n                                return 'toast://不能为空'\\n                            }\\n                        }, i);\\n                    } else if (input == '编辑地址') {\\n                        return $(v.url, '输入新地址').input((i) => {\\n                            eval(JSON.parse(request(\\\"hiker://page/config\\\")).rule);\\n                            config = getConfig();\\n                            if (input == \\\"\\\") {\\n                                return \\\"toast://不能为空\\\"\\n                            } else if (input.indexOf(\\\"http\\\") != 0 && input.indexOf(\\\"file\\\") != 0 && input.indexOf(\\\"hiker\\\") != 0) {\\n                                return \\\"toast://链接格式有误\\\"\\n                            } else {\\n                                config.data[i].url = input\\n                                writeFile(\\\"hiker://files/rules/live/config.json\\\", JSON.stringify(config));\\n                                refreshPage(false)\\n                                return 'toast://修改成功'\\n                            }\\n                        }, i);\\n                    } else if (input == '编辑内容') {\\n                        if (v.url.startsWith('file://') || v.url.startsWith('hiker://files')) {\\n                            return 'editFile://' + v.url;\\n                        }\\n                        return 'editFile://hiker://files/libs/' + md5(v.url) + '.js'\\n                    }\\n                }, v, i);\\n                break;\\n            case '清除缓存':\\n                el.url = $('确定清除“' + v.name + '”订阅缓存？\\\\n(可立即更新)').confirm((url) => {\\n                    deleteCache(url);\\n                    return 'toast://清除成功'\\n                }, v.url)\\n                break;\\n        }\\n        d.push(el)\\n    });\\n    return d;\\n}\\n\\n$.exports = {\\n    renderSetting: renderSetting\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"云口令\",\"path\":\"cloud\",\"rule\":\"eval(JSON.parse(request(\\\"hiker://page/batchIm?rule=聚直播\\\")).rule);\\nlet content = parsePaste(input);\\nbatchImport(content, \\\"聚直播\\\");\"}]","proxy":"","icon":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMwAAADMCAYAAAA/IkzyAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAHd3dy5tbi1zb2Z0LmNvbSBhaipAAAAN8UlEQVR4Xu2dP48bxxnG9RH8EfxR1BlnF1bhPrWRRkDcJTBUpHDhwoCTIoUQNQJSBYKLdA5ZGHHhAPIfxA4U2ZEB24mCACJyOp10ks3wx5vXHu29JHfJndmZ3ecBfjjecnbu3Zn34czsn+MlSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZKkPvXq7MELr8yOLzc5mh1f83h59vCdl+cP5x5H8+N7q5/LCtl0PLeaxx+3EW0XmlEam16anb54NDu5sk7682SoNbmLI7Tl/NxUJ1do69DsUk0KBrkhc+SHNl+3/aoPQndIJSpMp26sOm3R7EQxGAv6hL4J3SQNqbAOuaqRpHzoI/pK658BRKMzb151hEaT+mDUuSbjZJKMMhrWxgndKvWt9RpFU6/REaZqWuP0pfX0a358y2tsMR7oY03TDpRGlWmh0eYAcUbFa1Qxfuj7kAbSLoUzYFxPcRtTTANyQFO0HQrrlY+9BhTTg1yQaTZIZhEeMo0jmUVsQ6aJJLOINsg0K8ksoguTN43OhomukDMhfaYlXWcR+zK56zRczfUaQoi2kEMhncatsG7R7S7iIMihSaxnVgeqGylFL5BLIa3GKU3FRN+MemqmqZjoG3IqpNe4xNN13gELcSjkVkizcYjF2erA9FixSMViVCcANLqI1IxmlNHoIjIxjlGGq7LOwQnRO+RaSLt6pTNjIhfVnzHTdReRm6qvy3BnqXdQQqSCnAvpV59WB6DFvsjNIqRfXeLrDpyDESI5VX7VhqZjYiiqnJbp7JgYiurOlvHVbd6BjJG3Pn+8/GTx/XLxdLn+ef2rM7fcEBBLHBuxeuXGSFVfHziV9ct73z5dJ2MTkvO1D07cfXLA3zajNCFmb5+xUdU6hvt6vIMYE2/cPnUT0hjKNNvMYhC7t++YIAdDOpavVcB8fbV7IGPhD1+fuckYk9s0bcwCxO7tPzLmIR3L1xQW/O/ff+YmY5NcpmlrFiB2r44xUdXC3zuAsfHunSduMnqkNk0XswCxe/WMjZCOZSvczu8ewJggSb97/IObkB6pTNPVLMSc0rwlUcXt/lO64fL1jx4Napp9zELMXl1jpIobMad2h/JQppFZdiPDFEpu08gs7ZBhCiaXaWSW9lRxLWaqhoHUppFZulGFYaZwlX8bqUwjs3RHhknAm5+dru+v6pKMU4O2oY1oK68NS0WG6Qk+rbmTt8tIIM6hzWi7LlPJoTiq4Z+Vl24YrnLLKIdDG1Zwx0D595OVahg+Edve/yXaQ5sWPNrIMPvQdcEsutH2xMUAlG+Yl2cP33ECHxSZJT20sdf2A1OBYVZBNoIelDbPrYh+KPA5GxmmC7ueihT9U9jTnDJMF+4+1Nmw3NDmXl8MRUjLcrUKsgjDcJHN61CRnpIucIa0LFerIIswzL6nkL/43/fL2w8E0BZeG+2ipEegQ1qWq1WQgxuGU5xeR27jL/99tvzlp6fLn//1kYigTWgbr822Ucpp5pCW5aqEf4DRdbF/896ZmyziJ2gjr+02UcriP6RlufKCzg33Onmd6MHUw0sQcRHaymtDj1L+A2hIy3LlBZ2bLoa5/uUTNznERWgrrw09ZJiW8oLOTZeLlW9/8dhNDnER2sprQw8ZpqW8oHPzYYdFqgzTHhkmgbygcyPDpEGGSSAv6NzIMGmQYRLICzo3MkwaZJgE8oLOjQyTBhkmgbygcyPDpEGGSSAv6NzIMGmQYRLICzo3MkwaZJgE8oLOzaGG+dWnp8u3//74OX79NxlLhkkgL+jc7GsYTPHvHf+Cifup/vjN00kaSIZJIC/o3OxjmN/+4/w+KTOEQV1s84x07+SH5c2vz5a/uN3usQBGrj/96+m6Pn7yN71ypSLDJJAXdG72MQzTLjNLM1EMEv76V08u1I+Z2G+bcTDHJtPVMlrJMAnkBZ2bfadkXcA8mCQ2Aa+9UYOyvI85rCyv2Z/XxNvcp0RkmATygs5NSsM0RwNGlaZx/nz/2XOjDaMX75th7H3gd6ZncZ2lIsMkkBd0blIaZr3PygDN7YwiTOmsXp6HN9PYSAKUYTtTO0wUlysdGSaBvKBzk8owNrVihPDeB04CWN1mBsxh22JqMgvIMAnkBZ2bVIZhZGEfRgnvfSM2CLFgCpuOYRIMt88ZMur1tveJN3oaMkwCeUHnJpVhbPRgKrXrzFY8Ddt26pntJClmAF5vKktdm0Y34mFfRsF4WxeT2QfCpmOTYRLICzo3fRuGBGJh3tyX0cJORZOYzUS3NQ0G4z3qYR+rc1ucjEBWxuq1UYrE5r14zWSYmTEOrzEr+1KfxWrxNTHD8NN9X4bpX17QuenLMCRbfCp4FyRonGwkqb2HoWzUMePE+5HMQOyUwySMJrzPduqz3ymDIeI6DMryt/jJ75Rrmj0ehWJkmAHkBZ2bPgxjCYdhqA/zWMKu91slFdvsyr1tp2xcj21nXzOMJaaVZzt1sT0epWKzUgYj8BqD8X4cD/ubEax+3o/NYuVjQ/DaoA6ry7Zh7h/LyjD9yws6N30YhveaC3NLeIi3g40mNhoYVp7tlrzUY1Mkkt/KGJQj+XltprHRy8rEo5dBWf6mHX8cL2Yh+XlNPZQzg+zCysswCeQFnZs+DEPSUk/8ib/LMIwA8SeyJT3EIxH1kITxCGLTMjPQ7/95nsyx0eIpmMVCeRu9zOD2dwz24zhsu41EbGM/Y/af83bjp23DVHY8MkwCeUHnpg/DAIlIstknLAlk+zXLNiEZ4wSnjtgwvLZE5zUQt5nIPv3ZTl3xSEQZMxF1UDflNxmGshYLf6MZq0E9lLHjvfC+DNO/vKBz05dhwExiCW37xSNJExIuNoslqSUydVq9lGN7bAj43d3np3jxFCwerZpQbtN7GC0eMZvIMAPICzo3fRoGSKB4+gQkONsNEhUTxEYBkteS1Bbt/OR3yjeNwu/UxbSJ11bW4sAsvGZkae5HfbznGYa4tpkcqJ+y/HTfl2H6lxd0bvo2DDSnWLvAYHGyG942M92uhI4hHo4Tc2AUMyU/LQYzX9t62TdeszSRYRLICzo3KQwDJJ6NCDYtasJ2ktTbPwc2ilmMXpl9kWESyAs6N6kMA0yVvFGiFOJj3zS12hcZJoG8oHOT0jClY8fFSOi9fwgyTAJ5QedmqoZhymjHRRt4ZQ5BhkkgL+jcTNUw8YJ/2+J9X2SYBPKCzs2Up2R2utmu5veJDJNAXtC5mbJhoO/FviHDJJAXdG6mbphUyDAJ5AWdGxkmDTJMAnlB50aGSYMMk0Be0LmRYdIgwySQF3RuZJg0yDAJ5AWdGxkmDTJMAnlB50aGSYMMk0Be0Ll579ufnozchQzTHhkmgY7mxx97geeEzvI60UOGac9v7lz8xxubKMQw85CW5YogG0Fnp4thuJXESw5xkeZTntuQYVqKIBtBZ+etz9tPHaDLk45TJb4Tug30gdc3mZFh2vCzD0/cTtwEz47INJuJnzRtC33g9U1mZJi23H3YrYOBKcfNe2frdY14vLz+5ZNO0zCDtvf6ZABkmLZ0WceIfilk/QLlG+ZofnzLCTw7r31wsvyu4zRCHA5tTtt7fZKbo9nxjZCW5WoV5DUv+CHQKJOfgkYXDHMtpGW5KskwfNLts5YR+0FblzK6gAyzB69/9EhTswzQxrS11wdDIcPsSdfrMqI7hVx3eY4qDPPK7PiyF/zQ0KEaafqHNi3RLEAuhrQsV6UaBpgyfLJo//+RxXZoy9KmYTEyTE9wJkejzf7QdiWdDdtEFYZ5dfbgBS/40uBsDlMJjTjtoa1os5LOhG2DXAxpWba84EuGBHjj9uny3Tt87d7ZXqei2a9kvJi3QRuwH21C29RikpiQjuXraH58zzuAWuiaYO/ff+bWUxLE6MW+CdrAq6cWyMGQjuVrFXAR95PtS9e7nd/87NStpySI0Yt9E4XcbXwI5d9HZirxWkxXmIp4idSEx6G9/Uuk7aPbHLu3f01UcQ3GdDQ7ueIdRG3smprVZBZjl2lqn4oZ5GBIx/L10uz0Re8gaoSpCUlmZ9NYDPM7C2GvfA0QO8dgJzc4Nn4fwTTsR8jBkI51qPaFv6iXqhb8ptUc8oZ3MEKkhtwLaViPxrKOEfVR1fol1ir4RfNghEjMIqRffdK0TOSmyumYqYYbMcW4qOKGy23S2TKRiyrPjjW1cvxV7+CE6BtyLaRdvQq3+2vxL1KzqOZ2/l3ivh7nAIXoDXIspFv90igjEjOe0cWkUUakYlSjSyydMRN9M4ozY5uk6zKib6q/7rJLq0+EIv5Zuagfcimk1XjF4kxTM3Eo5NDoFvqbpKmZOJTRT8Wa4qqs1xBC7ILcCWk0LXFnqdcgQmyCnAnpMz2F9czg3+sv6oBcmcy6ZZNkGtEGmSWSTCO2IbM4kmmEh8yyRTKNiJFZWmhtGp09mzzkgMzSQbpOM10me53lUHE1dzUs6zaaiUBf0+eh+6V9FNY1umFz5NDHmoL1KI0240SjSmLxdN2qofW4c/0s6MvQrVJKhTNpMk6drI2i6dcAotE5o6KpWvmEqddVGaUQrdc459dvNOqUA6PJDa1RChdfd0BHaeTJD22+bvtav3Ji6uKr24KBWPPMZaL+CG05p21p4+q+Jk9qr7D+uWycd/pzML3j69M93ASqEO/Y+FC51WyPuK20DpEkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkqV9duvR/eOHsuIYMd50AAAAASUVORK5CYII="},{"last_chapter_rule":"","pageList":[{"col_type":"movie_3","name":"数据管理","path":"data","rule":"$.exports = {\n    load: function() {\n        return storage0.getItem(\"data\", []);\n    },\n    has: function(name) {\n        let data = storage0.getItem(\"data\", []);\n        return data.filter(it => it.name == name).length > 0;\n    },\n    add: function(item) {\n        let data = storage0.getItem(\"data\", []);\n        for (let it of data) {\n            if (it.name == item.name) {\n                return\n            }\n        }\n        data.push(item);\n        storage0.setItem(\"data\", data);\n    },\n    remove: function(name) {\n        let data = storage0.getItem(\"data\", []);\n        data = data.filter(it => it.name != name);\n        storage0.setItem(\"data\", data);\n    }\n}"}],"title":"播客","author":"","version":5,"type":"music","url":"hiker://empty","col_type":"movie_3","class_name":"","class_url":"","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:\nlet d = [];\nlet Color = \"#f13b66a\";\nlet html = request(\"https://getpodcast.xyz/\");\n//log(html)\nlet class_ids = pdfa(html, \"body&&.classify_title\");\nlet classlists = pdfa(html, \"body&&.pic_list\");\nlet classname0 = \"订阅中心\";\nlet selclass = getItem('SrcBoKe$classname', '播客');\nd.push({\n    title: selclass === classname0 ? '““””<b><span style=\"color:' + Color + '\">' + classname0 + '</span></b>' : classname0,\n    url: $('#noLoading#').lazyRule((classname) => {\n        setItem('SrcBoKe$classname', classname);\n        setItem('SrcBoKe$classid', classname);\n        refreshPage(false);\n        return \"hiker://empty\";\n    }, classname0),\n    col_type: 'scroll_button'\n});\n\nfor (let i in class_ids) {\n    let classname = pdfh(class_ids[i], \"body&&Text\");\n    d.push({\n        title: selclass === classname ? '““””<b><span style=\"color:' + Color + '\">' + classname + '</span></b>' : classname,\n        url: $('#noLoading#').lazyRule((classname, i) => {\n            setItem('SrcBoKe$classname', classname);\n            setItem('SrcBoKe$classid', i);\n            refreshPage(false);\n            return \"hiker://empty\";\n        }, classname, i),\n        col_type: 'scroll_button'\n    });\n}\nif (selclass == classname0) {\n    //订阅中心\n    let {\n        load\n    } = $.require(\"hiker://page/data\");\n    let data = load();\n    for (let it of data) {\n        d.push({\n            title: it.name,\n            url: \"hiker://empty##\" + it.url,\n            img: it.pic,\n            desc: '0',\n            col_type: 'card_pic_3',\n            extra: {\n                title: it.name,\n                pic: it.pic\n            }\n        });\n    }\n\n} else {\n    let id = getItem('SrcBoKe$classid', '0');\n    let lists = pdfa(classlists[Math.floor(id)], \"body&&li\");\n    lists.forEach(item => {\n        try {\n            d.push({\n                title: pdfh(item, \".title&&Text\"),\n                url: \"hiker://empty##\" + pdfh(item, \"a&&href\"),\n                img: pdfh(item, \".pic&&img&&src\"),\n                desc: '0',\n                col_type: 'card_pic_3',\n                extra: {\n                    title: pdfh(item, \".title&&Text\"),\n                    pic: pdfh(item, \".pic&&img&&src\")\n                }\n            });\n        } catch (e) {\n            //log(e.message)\n        }\n    })\n}\n\nsetResult(d);","searchFind":"","search_url":"","group":"①推荐","detail_col_type":"movie_3","detail_find_rule":"js:\nlet d = [];\n//setPageTitle(MY_PARAMS.title);\nMY_URL = MY_URL.split('##')[1];\nlet {\n    has\n} = $.require(\"hiker://page/data\");\nlet has0 = has(MY_PARAMS.title);\nd.push({\n    title: (has0 ? \"取消\" : \"\") + \"订阅该播客\",\n    url: $(\"#noLoading#\").lazyRule((item, has0) => {\n        let {\n            add,\n            remove\n        } = $.require(\"hiker://page/data\");\n        if (has0) {\n            remove(item.name);\n        } else {\n            add(item)\n        }\n        refreshPage();\n        return \"toast://OK\"\n    }, {\n        name: MY_PARAMS.title,\n        url: MY_URL,\n        pic: MY_PARAMS.pic\n    }, has0),\n    col_type: \"avatar\",\n    desc: \"\",\n    pic_url: MY_PARAMS.pic\n});\nlet html = request(MY_URL);\nlet lists = pdfa(html, \"body&&item\");\n//log(lists)\nlists.forEach(item => {\n    try {\n        d.push({\n            title: item.match(/<title>(.*?)<\\/title>/)[1].replace(/&lt;!\\[CDATA\\[|\\]\\]&gt;|<!\\[CDATA\\[|\\]\\]>/g, ''),\n            desc: pdfh(item, \"pubDate&&Text\"),\n            url: pdfh(item, \"enclosure&&url\"),\n            img: item.indexOf('image href=') == -1 ? MY_PARAMS.pic : item.match(/image href=\"(.*?)\"/)[1],\n            col_type: 'movie_1_left_pic'\n        })\n    } catch (e) {\n\n    }\n})\nif (d.length == 0) {\n    d.push({\n        title: '↻未获取到列表',\n        col_type: \"rich_text\"\n    });\n}\nsetResult(d);","sdetail_col_type":"movie_1","sdetail_find_rule":"*","ua":"pc","preRule":"","pages":"[{\"col_type\":\"movie_3\",\"name\":\"数据管理\",\"path\":\"data\",\"rule\":\"$.exports = {\\n    load: function() {\\n        return storage0.getItem(\\\"data\\\", []);\\n    },\\n    has: function(name) {\\n        let data = storage0.getItem(\\\"data\\\", []);\\n        return data.filter(it => it.name == name).length > 0;\\n    },\\n    add: function(item) {\\n        let data = storage0.getItem(\\\"data\\\", []);\\n        for (let it of data) {\\n            if (it.name == item.name) {\\n                return\\n            }\\n        }\\n        data.push(item);\\n        storage0.setItem(\\\"data\\\", data);\\n    },\\n    remove: function(name) {\\n        let data = storage0.getItem(\\\"data\\\", []);\\n        data = data.filter(it => it.name != name);\\n        storage0.setItem(\\\"data\\\", data);\\n    }\\n}\"}]","proxy":"","icon":"https://getpodcast.xyz/favicon.ico"},{"last_chapter_rule":"","pageList":[{"col_type":"text_1","name":"ClassTab","path":"ClassTab","rule":"const ClassTab = function(classArray, params) {\n    Object.assign(this, params)\n    this.arr = classArray.map(v => this.init(v))\n    this.sign = '$' + QING_TITLE + '_' + (this.name || '') + '_'\n    this.color = this.color || '#12b668'\n    this.boundary = this.boundary || 'blank_block'\n}\nClassTab.prototype = {\n    constructor: ClassTab,\n    load(el) {\n        let folded = this.fold && getVar('fold_' + this.sign, '')\n        if (this.arr.length > 1 && this.fold) el.push({\n            title: '““””' + (folded ? '▶' : '▼').fontcolor('#049eff'),\n            url: $('#noLoading#').lazyRule((sign, folded) => {\n                putVar('fold_' + sign, { '': 'T', 'T': '' } [folded])\n                refreshPage(false)\n                return 'hiker://empty'\n            }, this.sign, folded),\n            col_type: 'scroll_button'\n        })\n        let arr = folded ? [this.arr[0]] : this.arr\n        arr.forEach((v) => {\n            let { id, class_name, class_url } = v,\n            selected = JSON.stringify(this.getClass(id))\n            class_name.forEach((name, i) => {\n                let url = class_url[i],\n                    now = JSON.stringify({ name: name, url: url })\n                el.push({\n                    title: selected == now ? '““””' + name.fontcolor(this.color).bold() : name,\n                    url: selected == now ? 'hiker://empty' : $('#noLoading#').lazyRule((sign, id, now) => {\n                        putVar(sign + id, now)\n                        refreshPage(false)\n                        return 'hiker://empty'\n                    }, this.sign, id, now),\n                    col_type: 'scroll_button'\n                })\n            })\n            el.push({ col_type: this.boundary })\n        })\n    },\n    init(classObject) {\n        if (typeof classObject.class_name == 'string')\n            classObject.class_name = classObject.class_name.split('&')\n        if (typeof classObject.class_url == 'string')\n            classObject.class_url = classObject.class_url.split('&').map((v) => v.trim())\n        return classObject\n    },\n    push(classObject) {\n        this.arr.push(this.init(classObject))\n    },\n    getClass(id) {\n        let defaultClass = this.arr.find(item => item.id == id)\n        defaultClass = JSON.stringify(defaultClass ? {\n            name: defaultClass.class_name[0],\n            url: defaultClass.class_url[0]\n        } : { name:  'cannot find id: ' + id + ' in classTab: ' + this.sign, url: ''})\n        return JSON.parse(getVar(this.sign + id, defaultClass))\n    },\n    setUrl(url) {\n        return url.replace(/\\$\\{([^}]*)\\}/g, (_, id) => this.getClass(id).url)\n    }\n}\n// 生成头部分类\nconst fyAll = RULE.url.includes('fyAll')\nlet tabHeader = []\nif (RULE.class_name) tabHeader.push({\n    id: fyAll ? 'fyAll' : 'fyclass',\n    class_name: RULE.class_name,\n    class_url: RULE.class_url\n})\nif (RULE.area_name) tabHeader.push({\n    id: fyAll ? 'fyAll' : 'fyarea',\n    class_name: RULE.area_name,\n    class_url: RULE.area_url\n})\nif (RULE.year_name) tabHeader.push({\n    id: fyAll ? 'fyAll' : 'fyyear',\n    class_name: RULE.year_name,\n    class_url: RULE.year_url\n})\nif (RULE.sort_name) tabHeader.push({\n    id: fyAll ? 'fyAll' : 'fysort',\n    class_name: RULE.sort_name,\n    class_url: RULE.sort_url\n})\ntabHeader = new ClassTab(tabHeader, { name: RULE.title, fold: readFile('tabFold'), })\n"},{"col_type":"icon_2_round","name":"设置","path":"Config","rule":"js:\naddListener('onClose', 'clearMyVar(\"sortFlag\");refreshPage()');\nsetPageTitle('⚙ 轻合集设置 ⚙');\nconst defaultDisTabModify = false; //默认禁用自定义分类关闭.就是开启自定义\nconst QING_TITLE = getMyVar('myCollection'),\n    url = getMyVar('remoteUrl')\nlet data = $.require('hiker://page/dataLoad?rule=' + QING_TITLE)(true),\n    el = [{\n        title: '<b> 清除缓存，立即更新 <small> （基于远程仓库，不要频繁点击）',\n        url: $('#noLoading#').lazyRule((url) => {\n            if (url.startsWith('hiker://') || url.startsWith('file://')){\n                return 'toast://仓库为本地文件，不会进行缓存，本功能也无效'\n            }\n            deleteCache(url);\n            back(false);\n            return 'toast://已更新'\n        }, url),\n        img: 'hiker://images/icon4',\n        col_type: 'avatar'\n    }],\n    updateInterval = readFile('updateInterval') || '1',\n    newWindow = readFile('newWindow'),\n    tabFold = readFile('tabFold'),\n    disTabModify = readFile('disTabModify'),\n    disableCustom = readFile('disableCustom'),\n    editMode = disableCustom ? '导入海阔' : getMyVar('editMode', '启用/禁用');\nif(disTabModify===''){\n    saveFile('disTabModify', defaultDisTabModify+'');\n    disTabModify = defaultDisTabModify;\n}else if(/true|false/.test(disTabModify)){\n    disTabModify = JSON.parse(disTabModify);\n}\n\nel.push({\n    title: '  💡 更新频率: ' + (updateInterval == 0 ? '手动' : updateInterval + '天') + '  ',\n    url: $(updateInterval, '输入更新间隔（天），为0则手动更新\\n本地文件链接无效').input(() => {\n        input = parseInt(input)\n        if(Number.isNaN(input)) input = 1\n        else if(input < 1) input = 0\n        saveFile('updateInterval', input.toString())\n        refreshPage()\n        return 'hiker://empty'\n    }),\n    col_type: 'scroll_button'\n}, {\n    title: '  🖥 独立首页: ' + (newWindow ? '是' : '否') + '  ',\n    url: $('#noLoading#').lazyRule((newWindow) => {\n        saveFile('newWindow', newWindow ? '' : '1')\n        refreshPage()\n        return 'hiker://empty'\n    }, newWindow),\n    col_type: 'scroll_button'\n}, {\n    title: '  💠 分类折叠: ' + (tabFold ? '是' : '否') + '  ',\n    url: $('#noLoading#').lazyRule((tabFold) => {\n        saveFile('tabFold', tabFold ? '' : '1')\n        refreshPage()\n        return 'hiker://empty'\n    }, tabFold),\n    col_type: 'scroll_button'\n},  {\n    title: '  💠 分类自定义: ' + (disTabModify ? '否' : '是') + '  ',\n    url: $('#noLoading#').lazyRule((disTabModify) => {\n        saveFile('disTabModify', disTabModify ? 'false' : 'true');\n        putMyVar('typeShow', '');\n        refreshPage();\n        return 'hiker://empty'\n    }, disTabModify),\n    col_type: 'scroll_button'\n}, {\n    title: '  💼 备份恢复  ',\n    url: $(['备份', '恢复'], 1).select((QING_TITLE, updateInterval, newWindow, tabFold, disableCustom) => {\n        let url = getMyVar('remoteUrl')\n        if (!url.startsWith('hiker://') && !url.startsWith('file://'))\n            url = 'hiker://files/libs/' + md5(url) + '.js'\n        else if(url.startsWith('hiker://page/')) url = 'hiker://empty'\n        if (input == '备份') return $('hiker://files/tmp/' + QING_TITLE + '_backup.json', '输入备份路径')\n            .input((url, updateInterval, newWindow, tabFold, disableCustom) => {\n                let rules = request(url),\n                    customData = readFile('customData')\n                writeFile(input, JSON.stringify({\n                    updateInterval: updateInterval,\n                    newWindow: newWindow,\n                    tabFold: tabFold,\n                    disableCustom: disableCustom,\n                    customData: customData,\n                    rules: rules\n                }))\n                return 'toast://已备份，注意若仓库为子页面则不备份'\n            }, url, updateInterval, newWindow, tabFold, disableCustom)\n        else return $('hiker://files/tmp/' + QING_TITLE + '_backup.json', '输入备份路径').input((url) => {\n            let { updateInterval, newWindow, tabFold, disableCustom, customData, rules } = JSON.parse(request(input))\n            saveFile('updateInterval', updateInterval)\n            saveFile('newWindow', newWindow)\n            saveFile('tabFold', tabFold)\n            saveFile('disableCustom', disableCustom)\n            saveFile('customData', customData)\n            if(rules) writeFile(url, rules)\n            refreshPage()\n            return 'toast://已恢复，如果不想同步远程仓库，可以设置更新频率为手动'\n        }, url)\n    }, QING_TITLE, updateInterval, newWindow, tabFold, disableCustom),\n    col_type: 'scroll_button'\n}, {\n    title: '““””<font color=\"#666666\"><small>特别鸣谢，小程序提供者：\\n' +\n        data.reduce((self, v) => v.author ? self.concat(v.author.split('&')) : self, [])\n            .filter((v, i, arr) => v && arr.indexOf(v) == i).join('、'),\n    url: 'hiker://empty',\n    col_type: 'text_center_1'\n})\n\nel.push({ col_type: 'line' }, {\n    title: '““””' + '📝'.small() + '&nbsp 轻合集自定义 &nbsp'.bold().fontcolor('#757575') + (disableCustom ? '❌' : '⭕').small(),\n    url: $([(disableCustom ? '启用' : '禁用') + '合集自定义', '清除自定义数据'], 1).select(() => {\n        if (input == '清除自定义数据') {\n            deleteFile('customData')\n        } else if (input == '启用合集自定义') {\n            saveFile('disableCustom', '')\n        } else {\n            saveFile('disableCustom', '1')\n            input += '\\n小程序启用/禁用、重新排序等操作均不会体现在首页小程序列表中'\n        }\n        refreshPage(false)\n        return 'toast://已' + input\n    }),\n    col_type: 'text_center_1',\n    extra: { lineVisible: false }\n});\n(disableCustom ? ['导入海阔'] : ['启用/禁用', '重新排序', '更改图标', '导入海阔']).forEach((v) => {\n    el.push({\n        title: v == editMode ? '““””' + v.bold().fontcolor('#12b668') : v,\n        url: v == editMode ? 'hiker://empty' : $('#noLoading#').lazyRule((v) => {\n            putMyVar('editMode', v)\n            refreshPage(false)\n            return 'hiker://empty'\n        }, v),\n        col_type: 'scroll_button'\n    })\n});\nif(editMode == '导入海阔') el.push({\n    title: '全部导入',\n    url: '海阔视界￥home_rule_url￥' + (url.startsWith('hiker://') || url.startsWith('file://') ? url : 'hiker://files/libs/' + md5(url) + '.js'),\n    col_type: 'text_center_1',\n    extra: { lineVisible: false }\n});\n(disableCustom ? data : JSON.parse(readFile('customData') || '[]')).forEach((v, i) => {\n    let d = { title: v.title, img: data[i].icon }\n    switch (editMode) {\n        case '启用/禁用':\n            d.title = (v.visible ? '🟢  ' : '🔴  ') + d.title\n            d.url = $('#noLoading#').lazyRule((i) => {\n                let rules = JSON.parse(readFile('customData') || '[]')\n                rules[i].visible = !rules[i].visible\n                saveFile('customData', JSON.stringify(rules))\n                refreshPage(false)\n                return 'hiker://empty'\n            }, i)\n            break\n        case '重新排序':\n            let sortFlag = parseInt(getMyVar('sortFlag', '-1'))\n            d.title = (sortFlag == i ? '🔃  ' : '') + d.title\n            if (sortFlag == -1)\n                d.url = $('#noLoading#').lazyRule((i) => {\n                    putMyVar('sortFlag', i.toString())\n                    refreshPage(false)\n                    return 'toast://选择要移动到的位置'\n                }, i)\n            else\n                d.url = $('#noLoading#').lazyRule((oldIndex, newIndex) => {\n                    let rules = JSON.parse(readFile('customData') || '[]')\n                    rules.splice(newIndex, 0, rules.splice(oldIndex, 1)[0])\n                    saveFile('customData', JSON.stringify(rules))\n                    putMyVar('sortFlag', '-1')\n                    refreshPage(false)\n                    return 'hiker://empty'\n                }, sortFlag, i)\n            break\n        case '更改图标':\n            d.url = $(v.icon || '', '输入新图标地址或颜色代码：').input((i) => {\n                let rules = JSON.parse(readFile('customData') || '[]')\n                if (input)\n                    rules[i].icon = input\n                else\n                    delete rules[i].icon\n                saveFile('customData', JSON.stringify(rules))\n                refreshPage(false)\n                return 'hiker://empty'\n            }, i)\n            break\n        case '导入海阔':\n            d.url = 'rule://' + base64Encode(JSON.stringify(data[i]))\n            break\n    }\n    el.push(d)\n})\nsetResult(el)\n"},{"col_type":"movie_3","name":"页面载入","path":"frameLoad","rule":"js:\nconst QING_TITLE = getMyVar('myCollection')\nlet myCollection_el = [],\n    { RULE, isIndex, pageTitle } = MY_PARAMS,\n    thisRULE = $.require('hiker://page/dataLoad?rule=' + QING_TITLE)().find((v) => v.title == RULE.title)\nif (isIndex) {\n    RULE = thisRULE\n} else {\n    RULE.pages = thisRULE.pages\n}\neval(JSON.parse(fetch('hiker://page/preFunc?rule=' + QING_TITLE)).rule)\neval(JSON.parse(fetch('hiker://page/urlParse?rule=' + QING_TITLE)).rule)\n\nif (isIndex) {\n    if (MY_PAGE == 1) {\n        // 加载ClassTab组件\n        eval(JSON.parse(fetch('hiker://page/ClassTab?rule=' + QING_TITLE)).rule)\n        tabHeader.load(myCollection_el)\n        if (RULE.search_url) myCollection_el.push({\n            title: \"搜索\",\n            desc: \"搜你想要的...\",\n            url: '\"hiker://search?s=\"+input',\n            extra: {\n                rules: $.toString((QING_TITLE, title) => {\n                    let rules = $.require('hiker://page/dataLoad?rule=' + QING_TITLE)()\n                    rules = [rules.find((v) => v.title == title)]\n                    return JSON.stringify(rules)\n                }, QING_TITLE, RULE.title),\n                defaultValue: getMyVar('searchKey', ''),\n                onChange: \"putMyVar('searchKey',input)\"\n            },\n            col_type: \"input\",\n        })\n    }\n    // 处理MY_RULE\n    MY_RULE.url = RULE.url\n    MY_RULE.col_type = RULE.col_type\n    MY_RULE.detail_col_type = RULE.detail_col_type\n    MY_RULE.find_rule = RULE.find_rule\n    MY_RULE.detail_find_rule = RULE.detail_find_rule\n    MY_RULE.params = {}\n} else {\n    MY_RULE.url = MY_PARAMS.url\n    MY_RULE.col_type = RULE.detail_col_type\n    MY_RULE.find_rule = RULE.detail_find_rule\n    MY_RULE.params = RULE.params\n}\nMY_RULE.pages = RULE.pages\nMY_RULE.pageList = JSON.parse(MY_RULE.pages || '[]')\nMY_RULE.title = RULE.title\n\nif (!isIndex) {\n    if (pageTitle) setPageTitle(pageTitle)\n    setLastChapterRule(thisRULE.last_chapter_rule)\n    MY_PARAMS = MY_RULE.params\n}\n// 预处理并初始化config\nif (isIndex && MY_PAGE == 1) eval(thisRULE.preRule)\nlet _cfg = getMyVar('initConfig', '{}')\nif (_cfg && _cfg.length > 0) {\n    config = JSON.parse(_cfg)\n}\n\n// 正文解析通用变量\nlet assignLazyRule = $.toString((QING_TITLE, title) => {\n    let RULE = $.require(\"hiker://page/dataLoad?rule=\" + QING_TITLE)().find((v) => v.title == title)\n    return { pages: RULE.pages, pageList: JSON.parse(RULE.pages || '[]') }\n}, QING_TITLE, RULE.title)\nfunction genMyRule() {\n    let rule = Object.assign({}, MY_RULE)\n    delete rule.last_chapter_rule\n    delete rule.preRule\n    delete rule.pageList\n    delete rule.pages\n    return rule\n}\nfunction runCode(rule) {\n    try {\n        let [input, code] = rule.split('.js:')\n        return code ? eval(code) : rule\n    } catch (e) { return rule }\n}\nfunction genExUrl(url) {\n    url = url.split(';')\n    return url.shift() + ';' + paramHandle(url, thisRULE.ua, MY_RULE.url)\n}\n// 正文解析\nif (MY_RULE.find_rule.startsWith('js:')) {\n    setResult = function(el, param1, param2, param3) {\n        param1 = CALLBACK_KEY\n        param2 = MY_RULE\n        param3 = MY_TYPE\n        if (Array.isArray(el.data)) el = el.data\n        Array.prototype.push.apply(myCollection_el, el.map((v) => {\n            let MY__RULE = Object.assign(genMyRule(), { params: v.extra || {} })\n            v.col_type = v.col_type || MY_RULE.col_type\n\n            if (!v.url || ['rule', 'pics', 'toast', 'input', 'copy', 'editFile', 'x5', 'x5WebView', 'x5Play', 'web', 'select', 'x5Rule', 'webRule', 'download', 'share'].find((vv) => v.url.startsWith(vv + '://')) || ['x5_webview_single', 'input'].find((vv) => v.col_type == vv)) {\n                return v\n            } else if (v.url.includes('@rule=')) {\n                let [_, url, rule] = v.url.match(/^([\\s\\S]*?)@rule=([\\s\\S]*)$/)\n                v.url = url\n                MY__RULE.detail_find_rule = rule\n                MY__RULE.detail_col_type = MY_RULE.col_type\n            } else if (v.url.startsWith('hiker://page/')) {\n                if (v.url.includes('rule=') || (v.extra || {}).rule)\n                    return v\n                let [_, path, flag, params] = v.url.match(/^hiker:\\/\\/page\\/(.+?)(#.*?)?(?:\\?(.*))?$/),\n                    subPage = MY_RULE.pageList.find((v) => v.path == path),\n                    subUrl = (params || '').split('&').find((v) => v.startsWith('url='))\n                v.url = (subUrl ? subUrl.slice(4).replace(/？？/g, '?').replace(/＆＆/g, '&') : (v.extra || {}).url) || 'hiker://empty' + flag + '?' + (params || '')\n                MY__RULE.detail_find_rule = subPage.rule\n                MY__RULE.detail_col_type = subPage.col_type\n            } else if (v.url.includes('@lazyRule=')) {\n                let reIndex = v.url.indexOf('.js:')\n                if (reIndex >= 0) v.url = v.url.slice(0, reIndex) + '.js:\\nif(MY_RULE)Object.assign(MY_RULE, ' + assignLazyRule + ');' + v.url.slice(reIndex + 4)\n                return v\n            } else if (isIndex) {\n                if (!MY_RULE.detail_find_rule || /hiker:\\/\\/(?!empty.+$)/.test(v.url)) return v\n            } else {\n                return v\n            }\n            v.extra = {\n                url: genExUrl(v.url),\n                RULE: MY__RULE,\n                pageTitle: isIndex && v.title\n            }\n            v.url = 'hiker://page/frameLoad?rule=' + QING_TITLE\n            return v\n        }))\n        method_setResult.invoke(javaContext, myCollection_el, param1, param2, param3)\n    }\n    setHomeResult = setResult\n    setSearchResult = setResult\n\n    eval(MY_RULE.find_rule.slice(3))\n} else {\n    let [_, findRule, detailFindRule] = MY_RULE.find_rule.match(/^([\\s\\S]*?)(?:==>([\\s\\S]*))?$/)\n    findRule = findRule.split(';')\n    parseDomForArray(getResCode(), findRule.shift()).forEach((data) => {\n        let [title, img, desc, url] = findRule.map((v, i) => {\n                try {\n                    if (v == '*') return ''\n                    else v = (i == 1 || i == 3) ?\n                        parseDom(data, v) :\n                        parseDomForHtml(data, v)\n                    if (i != 3) v = runCode(v)\n                    return v\n                } catch (e) { return '' }\n            }),\n            res = {\n                title: title, url: url,\n                desc: desc, img: img,\n                col_type: MY_RULE.col_type\n            }\n        if (res.url) {\n            if (res.url.includes('@lazyRule=')) {\n                let reIndex = res.url.indexOf('.js:')\n                if (reIndex >= 0) res.url = res.url.slice(0, reIndex) + '.js:\\nif(MY_RULE)Object.assign(MY_RULE, ' + assignLazyRule + ');' + res.url.slice(reIndex + 4)\n            } else  if (detailFindRule) {\n                res.extra = {\n                    url: genExUrl(url),\n                    RULE: Object.assign(genMyRule(), { detail_find_rule: detailFindRule }),\n                    pageTitle: isIndex && title\n                }\n                res.url = 'hiker://page/frameLoad?rule=' + QING_TITLE\n            } else if (MY_RULE.detail_find_rule) {\n                res.extra = {\n                    url: genExUrl(url),\n                    RULE: genMyRule(),\n                    pageTitle: isIndex && title\n                }\n                res.url = 'hiker://page/frameLoad?rule=' + QING_TITLE\n            }\n        }\n        myCollection_el.push(res)\n    })\n    setResult(myCollection_el)\n}\n"},{"col_type":"movie_3","name":"数据载入","path":"dataLoad","rule":"$.exports = function(showAll) {\n    let url = getMyVar('remoteUrl'),\n        data = []\n    if (url.startsWith('hiker://') || url.startsWith('file://')) {\n        // 如果为本地文件则不进行缓存\n        try {\n            let oriData = fetch(url)\n            if (url.startsWith('hiker://page/'))\n                oriData = JSON.parse(oriData).rule\n            data = JSON.parse(oriData)\n        } catch (e) {}\n    } else {\n        // 获取远程数据，检查间隔默认一天\n        let interval = parseInt(readFile('updateInterval') || '1'),\n            oldData = fetch('hiker://files/libs/' + md5(url) + '.js'),\n            remoteData = []\n        if(interval == 0) interval = -1\n        try { remoteData = JSON.parse(fetchCache(url, 24 * interval, {timeout:50000})) } catch(e) {}\n        if(!Array.isArray(remoteData)) remoteData = []\n        if (remoteData.length < 3) {\n            log('未获取到数据')\n            if (oldData) writeFile('hiker://files/libs/' + md5(url) + '.js', oldData)\n            data = JSON.parse(oldData || '[]')\n        } else {\n            log('已获取到数据')\n            data = remoteData\n        }\n    }\n    data = data.filter((v) => { return v.title != getMyVar('myCollection') && !(v.author || '').includes('轻合集生成器') })\n    if (readFile('disableCustom')) return data\n    else { // 写入自定义数据\n        let customData = JSON.parse(readFile('customData') || '[]'),\n            rewriteData = []\n        customData = customData.reduce((self, v) => {\n            let index = data.findIndex((vv) => v.title == vv.title)\n            if (index >= 0) {\n                self.push(v)\n                let rule = data.splice(index, 1)[0]\n                if (showAll || v.visible)\n                    rewriteData.push(Object.assign(rule, v))\n            }\n            return self\n        }, [])\n        data.forEach((v) => customData.push({ title: v.title, visible: true }))\n        saveFile('customData', JSON.stringify(customData))\n        return rewriteData.concat(data)\n    }\n}\n"},{"col_type":"movie_3","name":"函数重写","path":"preFunc","rule":"// 防止require多次运行\nlet rCache = {}\nrequire = function(param0, param1, param2, param3, param4) {\n    if (!param0 || rCache[param0] != null) {\n        return\n    }\n    rCache[param0] = 1\n    param2 = param2 || 0\n    param3 = MY_TICKET\n    param4 = eval\n    return method_require.invoke(javaContext, param0, param1, param2, param3, param4)\n}\nrequireCache = function(param0, param1, param2, param3, param4, param5) {\n    if (!param0 || rCache[param0] != null) {\n        return\n    }\n    rCache[param0] = 1\n    param3 = param3 || 0\n    param4 = MY_TICKET\n    param5 = eval\n    return method_requireCache.invoke(javaContext, param0, param1, param2, param3, param4, param5)\n}\nrc = requireCache\n\n// 最新章节规则注入预处理代码\nsetLastChapterRule = function(param0) {\n    if (!param0) return\n    if (param0.startsWith(\"js:\") && thisRULE.preRule) {\n        param0 = 'js:\\ntry{eval(JSON.parse(fetch(\"hiker://page/preFunc?rule=' + QING_TITLE + '\")).rule);\\\n            eval(base64Decode(\"' + base64Encode(thisRULE.preRule) + '\"));\\\n            let _cfg = getMyVar(\"initConfig\", \"{}\");\\\n            if (_cfg && _cfg.length>0) {config = JSON.parse(_cfg)}}catch(e){log(e.message)}\\n;' +\n            param0.slice(3)\n    }\n    method_setLastChapterRule.invoke(javaContext, param0);\n}\n"},{"col_type":"movie_3","name":"链接处理","path":"urlParse","rule":"// 首页链接替换分类\nfunction indexUrl(param) {\n    function runCode(rule) {\n        try {\n            let [input, code] = rule.split('.js:')\n            return code ? eval(code) : rule\n        } catch (e) { return rule }\n    }\n    let { RULE, pageNum, QING_TITLE } = JSON.parse(param.split('###')[1])\n    RULE = JSON.parse(base64Decode(RULE))\n    pageNum = parseInt(pageNum)\n    let url = RULE.url\n\n    eval(JSON.parse(fetch('hiker://page/ClassTab?rule=' + QING_TITLE)).rule)\n    url = tabHeader.setUrl(fyAll ? url.replace(/fyAll/g, '$${fyAll}') : url.replace(/fy(class|area|year|sort)/g, '$${fy$1}'))\n    url = url.replace(/fypage(?:@(-?\\d+)@)?(?:\\*(\\d+)@)?/g, (_, start, space) => parseInt(start || 0) + 1 + (pageNum - 1) * parseInt(space || 1))\n    url = /^([\\s\\S]*?)(?:\\[firstPage=([\\s\\S]*?)\\])?(?:(\\.js:[\\s\\S]*?))?$/.exec(url)\n    if (pageNum == 1 && url[2]) url[1] = url[2]\n    if (url[3] && !url[1].includes('.js:')) url[1] += url[3]\n    return runCode(url[1])\n}\n// 链接参数处理\nfunction paramHandle(urlParam, ua, urlTmp) {\n    let charset, UserAgent\n    try { // 链接的编码和ua应该是首先继承首页链接\n        [, , charset, UserAgent] = urlTmp.split(';')\n        UserAgent = UserAgent.match(/^{(.*)}$/)[1].split('&&').find((v) => v.startsWith('User-Agent@'))\n    } catch (e) {}\n    urlParam[0] = urlParam[0] || 'GET'\n    urlParam[1] = urlParam[1] || charset || 'UTF-8'\n    try {\n        urlParam[2] = urlParam[2].match(/^{(.*)}$/)[1].split('&&')\n    } catch (e) { urlParam[2] = [] }\n    // 添加全局UA\n    if (!urlParam[2].some((v) => v.startsWith('User-Agent@'))) {\n        if (UserAgent) urlParam[2].push(UserAgent)\n        else if (ua == 'pc')\n            urlParam[2].push('User-Agent@' + PC_UA.replace(/;/g, '；；').replace(/\\?/, '？？'))\n        else if (ua == 'mobile')\n            urlParam[2].push('User-Agent@' + MOBILE_UA.replace(/;/g, '；；').replace(/\\?/, '？？'))\n    }\n    urlParam[2] = '{' + urlParam[2].join('&&') + '}'\n    return urlParam.join(';')\n}\n"},{"name":"仓库工具","path":"tools","rule":"js:\n$.exports.range = function(m, n) {\n    return Math.floor(Math.random() * (m - n + 1) + n);\n}\n$.exports.color = function(text, color) {\n    text += \"\";\n    if (text.indexOf(\"““””\") === 0) {\n        text.replace(\"““””\", \"\");\n    }\n    return \"““””<font color='\" + color + \"'>\" + text + \"</font>\";\n}\nfunction htmlTag(tag, text) {\n    text += \"\";\n    if (text.indexOf(\"““””\") === 0) {\n        text.replace(\"““””\", \"\");\n    }\n    return \"““””\" + \"<\" + tag + \">\" + text + \"</\" + tag + \">\";\n\n}\n\nfunction getNowFormatDate() {\n            let date = new Date();\n            let seperator1 = \"-\";\n            let seperator2 = \":\";\n            let month = date.getMonth() + 1;\n            let strDate = date.getDate();\n            let strHours = date.getHours();\n            let strMinutes = date.getMinutes();\n            let strSeconds = date.getSeconds()+1;\n            if (month >= 1 && month <= 9) {\n                month = \"0\" + month\n            }\n            if (strDate >= 0 && strDate <= 9) {\n                strDate = \"0\" + strDate\n            }\n            if (strHours >= 0 && strHours <= 9) {\n                strHours = \"0\" + strHours\n            }\n            if (strMinutes >= 0 && strMinutes <= 9) {\n                strMinutes = \"0\" + strMinutes\n            }\n            if (strSeconds >= 0 && strSeconds <= 9) {\n                strSeconds = \"0\" + strSeconds\n            }\n            //let currentdate = date.getFullYear() + seperator1 + month + seperator1 + strDate + \" \" + strHours + seperator2 + strMinutes + seperator2 + strSeconds;\n            let currentdate = (date.getFullYear()-2020)+''+ month +''+ strDate +''+ strHours+'' + strMinutes +''+ Math.ceil(strSeconds/7);\n            return parseInt(currentdate)\n        }\n$.exports.getNowFormatDate = getNowFormatDate;\n$.exports.htmlTag = htmlTag;\n$.exports.small = function(text) {\n    return htmlTag(\"small\", text);\n}\n$.exports.unique2 = function unique2(array){\n    return Array.from(new Set(array));\n}\n$.exports.strDeal = function strDeal(str){\n    str = str.split('');\n    str = str.filter(e => (e >= 0 && e <= 9) || (e >= 'a' && e <= 'z') || (e >= 'A' && e <= 'Z') || (e >= '\\u4e00' && e <= '\\u9fa5'));\n    str = str.join('');\n    return str\n}"},{"col_type":"movie_3","name":"规则列表","path":"data","rule":"[{\n    \"last_chapter_rule\": \"\",\n    \"title\": \"吾爱破解𝔥\",\n    \"author\": \"Hood\",\n    \"url\": \"https://www.52pojie.cn/forum.php?mod=guide&view=fyclass&page=fypage;get;GBK\",\n    \"version\": 4,\n    \"col_type\": \"text_1\",\n    \"class_name\": \"最新热门&最新精华&最新回复&最新发表\",\n    \"class_url\": \"hot&digest&new&newthread\",\n    \"area_name\": \"\",\n    \"area_url\": \"\",\n    \"sort_name\": \"\",\n    \"year_name\": \"\",\n    \"sort_url\": \"\",\n    \"year_url\": \"\",\n    \"find_rule\": \"js:\\nvar res = {};\\nvar d = [];\\nvar html = getResCode();\\n\\n//列表\\nvar list = parseDomForArray(html,'body&&tbody[id]');\\n\\nfor(var i=1;i<list.length+1;i++){\\nd.push({\\ntitle: (i)+ '. ' +parseDomForHtml(list[i-1],'.xst&&Text'),\\nurl:'x5://https://www.52pojie.cn/'+parseDomForHtml(list[i-1],'a&&href'),\\ncol_type: 'text_1'});\\n}\\n\\r\\nres.data = d;\\nsetHomeResult(res);\",\n    \"search_url\": \"http://zhannei.baidu.com/cse/site?q=**&p=fypage&cc=52pojie.cn\",\n    \"group\": \"①推荐\",\n    \"searchFind\": \"body&&.result;\\nh3&&Text;\\na&&href;\\n*;\\n.c-abstract&&Text;\\n*\",\n    \"detail_col_type\": \"movie_1\",\n    \"detail_find_rule\": \"\",\n    \"sdetail_col_type\": \"movie_1\",\n    \"sdetail_find_rule\": \"\",\n    \"ua\": \"pc\",\n    \"preRule\": \"\",\n    \"pages\": \"[]\",\n    \"icon\": \"https://www.52pojie.cn/favicon.ico\"\n}, {\n    \"last_chapter_rule\": \"\",\n    \"title\": \"423Down\",\n    \"author\": \"香雅情\",\n    \"url\": \"https://www.423down.com/fyAllpage/fypage;get;utf-8;{User-Agent@Mozilla/5.0 (Linux；； Android 10) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/80.0.3987.132 Mobile Safari/537.36}\",\n    \"version\": 1,\n    \"col_type\": \"movie_1\",\n    \"class_name\": \"首页&安卓软件\",\n    \"type\": \"news\",\n    \"class_url\": \"&apk/\",\n    \"area_name\": \"原创软件&媒体播放&网页浏览&图形图像&聊天软件&办公软件&上传下载&实用软件&系统辅助&系统必备&安全软件&补丁相关&硬件相关&游戏软件\",\n    \"area_url\": \"zd423/&multimedia/&browser/&image/&im/&work/&down/&safewore/&systemsoft/&systemplus/&security/&patch/&hardware/&game/\",\n    \"sort_name\": \"\",\n    \"year_name\": \"\",\n    \"sort_url\": \"\",\n    \"year_url\": \"\",\n    \"find_rule\": \"js:\\nvar items = [];var html=getResCode();\\n//log(html);\\nvar list = parseDomForArray(html,'.archive-list&&li:not(:contains(优惠推荐))');\\n\\r\\n    for (var i = 0; i < list.length; i++) {\\r\\n        var title = parseDomForHtml(list[i], 'h2&&Text');\\n        var img = parseDom(list[i], 'img&&src');\\r\\n        var url = parseDom(list[i], 'a&&href');\\n        var desc = parseDomForHtml(list[i], '.item-meta&&Text');\\r\\n        items.push({\\r\\n            title: title,\\n            pic_url: img,\\r\\n            url: url,\\n            desc: desc\\r\\n        });\\r\\n    }\\n\\nsetHomeResult({data:items});\",\n    \"search_url\": \"https://www.423down.com/page/fypage?s=**;get;utf-8;{User-Agent@Mozilla/5.0 (Linux；； Android 10) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/80.0.3987.132 Mobile Safari/537.36}\",\n    \"group\": \"其它\",\n    \"searchFind\": \".archive-list&&li;h2&&Text;a&&href;.item-category&&Text;.item-meta&&Text;img&&src\",\n    \"detail_col_type\": \"movie_1\",\n    \"detail_find_rule\": \"js:\\nvar d=[];\\nvar html=getResCode();\\nvar tabs=parseDomForHtml(html,'body&&.entry&&Html');\\n\\nd.push({\\n\\t\\t\\ttitle: tabs,\\n    desc:'',\\n    pic_url:'',\\n    url:'',\\n\\t\\tcol_type: 'rich_text'\\n});\\n\\nsetHomeResult({data:d});\",\n    \"sdetail_col_type\": \"movie_1\",\n    \"sdetail_find_rule\": \"*\",\n    \"ua\": \"auto\",\n    \"preRule\": \"\",\n    \"pages\": \"[]\",\n    \"icon\": \"\"\n}, {\n    \"last_chapter_rule\": \"\",\n    \"title\": \"落尘之木ᴺᵐ\",\n    \"author\": \"Namo\",\n    \"url\": \"https://www.luochenzhimu.com/page/fypage\",\n    \"version\": 1,\n    \"col_type\": \"movie_1_left_pic\",\n    \"class_name\": \"\",\n    \"type\": \"other\",\n    \"class_url\": \"\",\n    \"area_name\": \"\",\n    \"area_url\": \"\",\n    \"sort_name\": \"\",\n    \"year_name\": \"\",\n    \"sort_url\": \"\",\n    \"year_url\": \"\",\n    \"find_rule\": \"js:\\nvar res = {};\\nvar d = [];\\nvar list = parseDomForArray(getResCode(), '.content&&.excerpt');\\nfor (var i in list) {\\n    d.push({\\n        title: parseDomForHtml(list[i], 'h2&&Text'),\\n        desc: parseDomForHtml(list[i], '.meta&&Text'),\\n        pic_url: parseDom(list[i], 'img&&data-src') + \\\"@Referer=\\\",\\n        url: parseDom(list[i], 'a&&href'),\\n    })\\n}\\nres.data = d;\\nsetHomeResult(res);\",\n    \"search_url\": \"https://www.luochenzhimu.com/?s=**\",\n    \"group\": \"其它\",\n    \"searchFind\": \"js:\\nvar res = {};\\nvar d = [];\\nvar list = parseDomForArray(getResCode(), 'body&&article');\\nfor (var i in list) {\\n    d.push({\\n        title: parseDomForHtml(list[i], 'h2&&Text'),\\n        desc: parseDomForHtml(list[i], '.note&&Text'),        \\n        url: parseDom(list[i], 'a&&href'),\\n    })\\n}\\nres.data = d;\\nsetHomeResult(res);\",\n    \"detail_col_type\": \"movie_1\",\n    \"detail_find_rule\": \"js:var res={};\\nvar d = [];\\nd.push({\\n    col_type: \\\"text_1\\\",\\n    title: \\\"““””<big>\\\" + parseDomForHtml(getResCode(), \\\"h1&&Text\\\") + \\\"</big>\\\",\\n});\\nd.push({\\n    title: parseDomForHtml(getResCode(), \\\".article-content&&Html\\\").split('push({});')[1],\\n    col_type: 'rich_text',\\n    extra: {\\n        textSize: 16,\\n        click: true\\n    }\\n});\\nsetResult(d);\",\n    \"sdetail_col_type\": \"movie_1\",\n    \"sdetail_find_rule\": \"*\",\n    \"ua\": \"pc\",\n    \"preRule\": \"\",\n    \"pages\": \"[]\",\n    \"icon\": \"https://img.luochenzhimu.com/public/2020/01/home.png\"\n}, {\n    \"last_chapter_rule\": \"\",\n    \"title\": \"分享者\",\n    \"author\": \"小🔥星\",\n    \"url\": \"https://sharerw.com/a/fyAll/fypage/\",\n    \"version\": 9,\n    \"col_type\": \"movie_1_vertical_pic\",\n    \"class_name\": \"手机软件&车机软件&电脑软件&\",\n    \"class_url\": \"ganhuo&qiche&jingyan&\",\n    \"area_name\": \"盒子软件&TV资讯&精选TV\",\n    \"area_url\": \"ziyuan&tvzx&jxtv\",\n    \"sort_name\": \"\",\n    \"year_name\": \"\",\n    \"sort_url\": \"\",\n    \"year_url\": \"\",\n    \"find_rule\": \"body&&.article-list;img&&alt;img&&src;.time&&Text;a&&href\",\n    \"search_url\": \"https://sharerw.com/search.php?q=**&page=fypage\",\n    \"group\": \"其它\",\n    \"searchFind\": \"body&&.article-list;img&&alt;a&&href;.time&&Text;p,1&&Text;img&&src\",\n    \"detail_col_type\": \"movie_1\",\n    \"detail_find_rule\": \"js:var res={};var d=[];html=getResCode();text=parseDomForHtml(html,\\\".art-content&&Html\\\");d.push({title:text,col_type:'rich_text'});res.data=d;setHomeResult(res);\",\n    \"sdetail_col_type\": \"movie_1\",\n    \"sdetail_find_rule\": \"*\",\n    \"ua\": \"mobile\",\n    \"preRule\": \"\",\n    \"pages\": \"[]\",\n    \"icon\": \"https://z3.ax1x.com/2021/11/05/ImzSvd.png\"\n}, {\n    \"last_chapter_rule\": \"\",\n    \"title\": \"发现小软件\",\n    \"author\": \"居然\",\n    \"url\": \"https://www.x6g.com/html/23-fypage.html\",\n    \"version\": 3,\n    \"col_type\": \"movie_1_vertical_pic\",\n    \"class_name\": \"\",\n    \"class_url\": \"\",\n    \"area_name\": \"\",\n    \"area_url\": \"\",\n    \"sort_name\": \"\",\n    \"year_name\": \"\",\n    \"sort_url\": \"\",\n    \"year_url\": \"\",\n    \"find_rule\": \".list-soft&&li;.list-info&&a&&Text;.layui-clear&&img&&src;.list-ca&&Text;.list-info&&a&&href\",\n    \"search_url\": \"\",\n    \"group\": \"其它\",\n    \"searchFind\": \"\",\n    \"detail_col_type\": \"text_3\",\n    \"detail_find_rule\": \"body&&.article-down;a&&Text;*;*;a&&data-url\",\n    \"sdetail_col_type\": \"movie_1\",\n    \"sdetail_find_rule\": \"\",\n    \"ua\": \"mobile\",\n    \"preRule\": \"\",\n    \"pages\": \"[]\",\n    \"icon\": \"\"\n}, {\n    \"last_chapter_rule\": \"\",\n    \"title\": \"VXAT\",\n    \"author\": \"小🔥星\",\n    \"url\": \"https://www.vxat.com/fyAll_fypage.html\",\n    \"version\": 1,\n    \"col_type\": \"movie_1_vertical_pic\",\n    \"class_name\": \"软件下载&Windows&Android&电视软件&\",\n    \"class_url\": \"RuanJianXiaZai&Windows&Android&TV&\",\n    \"area_name\": \"优惠活动&网站源码&服务器&技术教程&\",\n    \"area_url\": \"YouHuiHuoDong&WangZhanYuanMa&VPS&JiShuJiaoCheng&\",\n    \"sort_name\": \"一级页面提示错误为没有下一页！\",\n    \"year_name\": \"其他&游戏&网友分享&&\",\n    \"sort_url\": \"\",\n    \"year_url\": \"QiTa&YouXi&WangYouFenXiang&&\",\n    \"find_rule\": \"body&&.post;a&&title;img&&src;.time&&Text;a&&href\",\n    \"search_url\": \"https://www.vxat.com/search.php?q=**&page=fypage\",\n    \"group\": \"其它\",\n    \"searchFind\": \"body&&.post;a&&title;a&&href;.time&&Text;.post&&Text;img&&src\",\n    \"detail_col_type\": \"movie_1\",\n    \"detail_find_rule\": \"js:var res={};var d=[];html=getResCode();text=parseDomForHtml(html,\\\".article-content&&Html\\\");d.push({title:text,col_type:'rich_text'});res.data=d;setHomeResult(res);\",\n    \"sdetail_col_type\": \"movie_1\",\n    \"sdetail_find_rule\": \"*\",\n    \"ua\": \"mobile\",\n    \"preRule\": \"\",\n    \"pages\": \"[]\",\n    \"icon\": \"\"\n}, {\n    \"last_chapter_rule\": \"\",\n    \"title\": \"异星软件\",\n    \"author\": \"香雅情\",\n    \"url\": \"http://www.yxssp.com/fyclass/page/fypage\",\n    \"version\": 1,\n    \"col_type\": \"movie_1\",\n    \"class_name\": \"Android&Windows\",\n    \"class_url\": \"os/android&os/windows\",\n    \"area_name\": \"\",\n    \"area_url\": \"\",\n    \"sort_name\": \"\",\n    \"year_name\": \"\",\n    \"sort_url\": \"\",\n    \"year_url\": \"\",\n    \"find_rule\": \".td-ss-main-content&&.td_module_wrap;h3&&Text;img&&src;.td-module-meta-info&&Text;a&&href\",\n    \"search_url\": \"http://www.yxssp.com/page/fypage?s=**\",\n    \"group\": \"其它\",\n    \"searchFind\": \".td-ss-main-content&&.td_module_wrap;h3&&Text;a&&href;;.td-module-meta-info&&Text;img&&src\",\n    \"detail_col_type\": \"movie_1\",\n    \"detail_find_rule\": \"js:\\nvar d=[];\\nvar html=getResCode();\\nvar tabs=parseDomForHtml(html,'body&&.td-post-content&&Html').replace(/\\\\<script[\\\\S\\\\s]*?<\\\\/script\\\\>/g,'');\\n\\nd.push({\\n\\t\\t\\ttitle: tabs,\\n    desc:'',\\n    pic_url:'',\\n    url:'',\\n\\t\\tcol_type: 'rich_text'\\n});\\n\\nsetHomeResult({data:d});\",\n    \"sdetail_col_type\": \"movie_1\",\n    \"sdetail_find_rule\": \"*\",\n    \"ua\": \"pc\",\n    \"preRule\": \"\",\n    \"pages\": \"[]\",\n    \"icon\": \"\"\n}, {\n    \"last_chapter_rule\": \"\",\n    \"title\": \"apk4all\",\n    \"author\": \"tee\",\n    \"url\": \"https://apk4all.com/android/genres/fyAll/page/fypage/\",\n    \"version\": 8,\n    \"col_type\": \"movie_1_left_pic\",\n    \"class_name\": \"Art ＆＆ Design&Auto ＆＆ Vehicles&Books ＆＆ Reference&Business&Comics&Communication&Education&Entertainment&Finance&Health ＆＆ Fitness&House ＆＆ Home&Libraries ＆＆ Demo&Lifestyle&Maps ＆＆ Navigation&Medical&Music ＆＆ Audio&News ＆＆ Magazines&Parenting&Personalization&Photography&Productivity&Shopping&Social&Tools&Travel ＆＆ Local&Video Players ＆＆ Editors&Weather\",\n    \"type\": \"tool\",\n    \"class_url\": \"art-design/&auto-vehicles/&books-reference/&business-app/&comics-app/&communication-app/&education-mod-app/&entertainment-apps/&finance/&health-fitness/&house-home/&libraries-demo/&lifestyle-app/&maps-navigation/&medical-app/&music-audio/&news-magazines/&parenting/&personalization-mod-app/&photography/&productivity-app/&shopping-app/&social-app/&tools-mod-app/&travel-local-app/&video-players-editors/&weather-app/\",\n    \"area_name\": \"Action&Adventure&Arcade&Board&Card&Casual&Educational&Music&Puzzle&Racing&Role Playing&Simulation&Sports&Strategy&Trivia&Word\",\n    \"area_url\": \"action-games/&adventure-games/&arcade-games/&board-games/&card-games/&casual-games/&educational-games/&music-games/&puzzle-games/&racing-games/&role-playing-games/&simulation-apk-games/&sports-games/&strategy-games/&trivia-games/&word-games/\",\n    \"sort_name\": \"\",\n    \"year_name\": \"\",\n    \"sort_url\": \"\",\n    \"year_url\": \"\",\n    \"find_rule\": \"main&&article;h3&&Text;img,1&&src;dd&&Text;a&&href.js:input+'#immersiveTheme#'\",\n    \"search_url\": \"https://apk4all.com/search/**/page/fypage/\",\n    \"group\": \"其它\",\n    \"searchFind\": \"main&&article;h3&&Text;a&&href.js:input+'#immersiveTheme#';dd&&Text;*;img,1&&src\",\n    \"detail_col_type\": \"rich_text\",\n    \"detail_find_rule\": \"js:\\nvar res = {};\\nvar d = [];\\nvar html = getResCode();\\nvar desc = pdfh(html, \\\".desc&&Text\\\") + \\\"\\\\n\\\" + pdfh(html, \\\"h2&&Text\\\") + \\\"   \\\\/   10\\\";\\n\\nvar dl = pd(html, \\\".dllinks,1&&a&&href\\\") + \\\"#immersiveTheme#\\\";\\n\\nd.push({ //标题、缩略图、简介\\n    title: \\\"““””<big>\\\" + pdfh(html, \\\"h1&&Text\\\") + \\\"</big>\\\",\\n    col_type: \\\"movie_1_vertical_pic_blur\\\",\\n    desc: desc,\\n    pic_url: pd(html, \\\"article&&img,1&&src\\\"),\\n    url: dl\\n});\\n\\nd.push({ //线条\\n    col_type: \\\"line_blank\\\",\\n});\\n\\nvar list = pdfa(html, \\\".app-desc&&p||li\\\");\\nfor (i of list) {\\n    d.push({\\n        title: pdfh(i, \\\"p||li&&Text\\\"),\\n        col_type: \\\"rich_text\\\",\\n        extra: {\\n            textSize: 13,\\n            click: true\\n        }\\n    });\\n};\\n\\nvar gallery = pdfa(html, \\\"#gallery-1&&a\\\");\\n\\nfor (let n of gallery) {\\n    d.push({\\n        title: pdfh(n, \\\"img,1&&title\\\"),\\n        col_type: \\\"pic_3_square\\\",\\n        pic_url: pd(n, \\\"img,1&&src\\\") + '@Referer=',\\n        url: pd(n, \\\"img,1&&src\\\") + '#autoPage##readTheme#'\\n    });\\n};\\n\\nd.push({ //线条\\n    col_type: \\\"line_blank\\\",\\n});\\n\\n//底部下载模块\\nd.push({\\n    col_type: 'text_center_1',\\n    title: \\\"““””<big>\\\" + '点此下载' + \\\"</big>\\\",\\n    url: dl\\n});\\n\\nd.push({ //线条\\n    col_type: \\\"line_blank\\\",\\n});\\n\\nres.data = d;\\nsetResult(res);\",\n    \"sdetail_col_type\": \"movie_1\",\n    \"sdetail_find_rule\": \"*\",\n    \"ua\": \"mobile\",\n    \"preRule\": \"\",\n    \"pages\": \"[]\",\n    \"icon\": \"https://apk4all.com/favicon.ico\"\n}]"}],"title":"软件资源","author":"轻合集生成器","version":100,"type":"all","url":"hiker://empty","col_type":"icon_2_round","class_name":"","class_url":"","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:\n//关闭自定义分类？\nconst defaultDisTabModify = true;\nconst QING_TITLE = getMyVar('myCollection'),\n    newWindow = readFile('newWindow'),\n    typeShow = getMyVar('typeShow', '');\nlet disTabModify = readFile('disTabModify');\nif(disTabModify===''){\n    saveFile('disTabModify', defaultDisTabModify+'');\n    disTabModify = defaultDisTabModify;\n}else if(/true|false/.test(disTabModify)){\n    disTabModify = JSON.parse(disTabModify);\n}\n//log('关闭自定义分类？'+disTabModify);\nconst {color,small,unique2} = $.require(\"hiker://page/tools?rule=\"+ QING_TITLE);\n\nlet el = [{\n        title: ' ' + QING_TITLE.bold() + ' &nbsp &nbsp ' + '⚙ 轻合集设置 ⚙'.small(),\n        url: 'hiker://page/Config?rule=' + QING_TITLE + '&#noRecordHistory#',\n        img: MY_RULE.icon || 'https://lanmeiguojiang.com/tubiao/more/320.png',\n        col_type: 'avatar'\n    }, {\n        url: '\"hiker://search?s=\"+input',\n        desc: '搜你想要的...',\n        title: '搜索',\n        col_type: 'input',\n        extra: {\n            rules: $.toString((QING_TITLE, typeShow,disTabModify) => {\n                let rules = $.require('hiker://page/dataLoad?rule=' + QING_TITLE)();\n                if (disTabModify&&typeShow) {\n                    rules = rules.filter((v) => v.type === typeShow);\n                }else if(!disTabModify){\n                    typeNow = typeShow || '全部';\n                    if(typeNow==='其他'){\n                        rules = rules.filter((v) => !v.sort_url);\n                    }else if(typeNow!=='全部'){\n                        rules = rules.filter((v) => v.sort_url===typeNow);\n                    }\n                }\n                return JSON.stringify(rules)\n            }, QING_TITLE, typeShow,disTabModify),\n            defaultValue: getMyVar('searchKey', ''),\n            onChange: \"putMyVar('searchKey',input)\"\n        }\n    }],\n    rules = $.require('hiker://page/dataLoad?rule=' + QING_TITLE)();\n\nif(disTabModify) {\n    types = { '': '全部', 'all': '聚合', 'video': '视频', 'music': '音频', 'live': '直播', 'cartoon': '漫画', 'read': '阅读', 'picture': '图集', 'news': '资讯', 'tool': '工具', 'other': '其它' };\n    for (let k in types) {\n        if (!k || rules.find((v) => v.type === k)) {\n            let title = '““””' + (k === typeShow ? types[k].bold().fontcolor('#12b668') : types[k]);\n            let cnt = rules.filter(it => !k || it.type === k).length;\n            el.push({\n                title: title + ' ' + color(cnt, '#ff7000'),\n                url: k === typeShow ? 'hiker://empty' : $('#noLoading#').lazyRule((k) => {\n                    putMyVar('typeShow', k)\n                    refreshPage(false)\n                    return 'hiker://empty'\n                }, k),\n                col_type: 'scroll_button'\n            })\n        }\n    }\n\n    if (typeShow) {\n        rules = rules.filter((v) => v.type === typeShow);\n    }\n}else{\n    types = rules.map(it => it.sort_url || \"其他\");\n    types.unshift('全部');\n    types = unique2(types);\n    typeNow = typeShow || '全部';\n    for (let k in types) {\n        let its = types[k];\n        let title = '““””' + (its === typeNow ? its.bold().fontcolor('#12b668') : its);\n        let cnt;\n        if (its === '全部') {\n            cnt = rules.length\n        } else if (its === '其他') {\n            cnt = rules.filter(it => !it.sort_url).length;\n        } else {\n            cnt = rules.filter(it => it.sort_url === its).length;\n        }\n        el.push({\n            title: title + ' ' + color(cnt, '#ff7000'),\n            url: its === typeNow ? 'hiker://empty' : $('#noLoading#').lazyRule((its) => {\n                putMyVar('typeShow', its);\n                refreshPage(false)\n                return 'hiker://empty'\n            }, its),\n            col_type: 'scroll_button'\n        })\n    }\n    if(typeNow==='其他'){\n        rules = rules.filter((v) => !v.sort_url);\n    }else if(typeNow!=='全部'){\n        rules = rules.filter((v) => v.sort_url===typeNow);\n    }\n}\neval(JSON.parse(fetch('hiker://page/urlParse?rule=' + QING_TITLE)).rule);\nrules.forEach((v) => {\n    let urlParam = v.url.split(';'),\n        ruleTmp = {\n            title: v.title, url: urlParam.shift(),\n            class_name: v.class_name, class_url: v.class_url,\n            area_name: v.area_name, area_url: v.area_url,\n            year_name: v.year_name, year_url: v.year_url,\n            sort_name: v.sort_name, sort_url: v.sort_url\n        },\n        fypage = ruleTmp.url.includes('fypage') ? 'fypage' : '1',\n        domain = (/(https?:\\/\\/.+?)(?:\\/|$)/i.exec(ruleTmp.url) || [, 'hiker://empty'])[1],\n        d = {\n            title: v.title,\n            url: 'hiker://page/frameLoad',\n            img: v.icon || 'hiker://images/icon1',\n            extra: {\n                url: domain + '/#noHistory##noRecordHistory####' + JSON.stringify({\n                    RULE: base64Encode(JSON.stringify(ruleTmp)),\n                    pageNum: fypage,\n                    QING_TITLE: getMyVar('myCollection')\n                }) + '.js:eval(JSON.parse(fetch(\"hiker://page/urlParse？？rule=' + QING_TITLE + '\")).rule)；；indexUrl(input);' + paramHandle(urlParam, v.ua),\n                RULE: { title: v.title },\n                isIndex: true\n            }\n        }\n    if (newWindow) Object.assign(d.extra, {\n        newWindow: true,\n        windowId: QING_TITLE + '_' + d.title\n    })\n    el.push(d)\n});\nsetResult(el)","searchFind":"js:\nsetResult([{\n    title: \"点我开始轻合集•视界聚搜\",\n    url: \"hiker://search?s=\" + getParam(\"keyword\"),\n    extra: {\n        rules: $.toString(() => {\n            const defaultDisTabModify = false; //默认禁用自定义分类关闭.就是开启自定义\n            const QING_TITLE = getMyVar('myCollection'),\n                typeShow = getMyVar('typeShow', '');\n            let disTabModify = readFile('disTabModify');\n            if(disTabModify===''){\n                saveFile('disTabModify', defaultDisTabModify+'');\n                disTabModify = defaultDisTabModify;\n            }else if(/true|false/.test(disTabModify)){\n                disTabModify = JSON.parse(disTabModify);\n            }\n            let rules = $.require('hiker://page/dataLoad?rule=' + QING_TITLE)();\n            if (disTabModify&&typeShow) {\n                rules = rules.filter((v) => v.type === typeShow);\n            }else if(!disTabModify){\n                typeNow = typeShow || '全部';\n                if(typeNow==='其他'){\n                    rules = rules.filter((v) => !v.sort_url);\n                }else if(typeNow!=='全部'){\n                    rules = rules.filter((v) => v.sort_url===typeNow);\n                }\n            }\n            return JSON.stringify(rules)\n        })\n    }\n}]);","search_url":"hiker://empty?keyword=**","group":"①推荐","detail_col_type":"movie_1","detail_find_rule":"","sdetail_col_type":"movie_1","sdetail_find_rule":"","ua":"auto","preRule":"putMyVar('myCollection', MY_RULE.title);\nputMyVar('remoteUrl', 'hiker://page/data');","pages":"[{\"col_type\":\"text_1\",\"name\":\"ClassTab\",\"path\":\"ClassTab\",\"rule\":\"const ClassTab = function(classArray, params) {\\n    Object.assign(this, params)\\n    this.arr = classArray.map(v => this.init(v))\\n    this.sign = '$' + QING_TITLE + '_' + (this.name || '') + '_'\\n    this.color = this.color || '#12b668'\\n    this.boundary = this.boundary || 'blank_block'\\n}\\nClassTab.prototype = {\\n    constructor: ClassTab,\\n    load(el) {\\n        let folded = this.fold && getVar('fold_' + this.sign, '')\\n        if (this.arr.length > 1 && this.fold) el.push({\\n            title: '““””' + (folded ? '▶' : '▼').fontcolor('#049eff'),\\n            url: $('#noLoading#').lazyRule((sign, folded) => {\\n                putVar('fold_' + sign, { '': 'T', 'T': '' } [folded])\\n                refreshPage(false)\\n                return 'hiker://empty'\\n            }, this.sign, folded),\\n            col_type: 'scroll_button'\\n        })\\n        let arr = folded ? [this.arr[0]] : this.arr\\n        arr.forEach((v) => {\\n            let { id, class_name, class_url } = v,\\n            selected = JSON.stringify(this.getClass(id))\\n            class_name.forEach((name, i) => {\\n                let url = class_url[i],\\n                    now = JSON.stringify({ name: name, url: url })\\n                el.push({\\n                    title: selected == now ? '““””' + name.fontcolor(this.color).bold() : name,\\n                    url: selected == now ? 'hiker://empty' : $('#noLoading#').lazyRule((sign, id, now) => {\\n                        putVar(sign + id, now)\\n                        refreshPage(false)\\n                        return 'hiker://empty'\\n                    }, this.sign, id, now),\\n                    col_type: 'scroll_button'\\n                })\\n            })\\n            el.push({ col_type: this.boundary })\\n        })\\n    },\\n    init(classObject) {\\n        if (typeof classObject.class_name == 'string')\\n            classObject.class_name = classObject.class_name.split('&')\\n        if (typeof classObject.class_url == 'string')\\n            classObject.class_url = classObject.class_url.split('&').map((v) => v.trim())\\n        return classObject\\n    },\\n    push(classObject) {\\n        this.arr.push(this.init(classObject))\\n    },\\n    getClass(id) {\\n        let defaultClass = this.arr.find(item => item.id == id)\\n        defaultClass = JSON.stringify(defaultClass ? {\\n            name: defaultClass.class_name[0],\\n            url: defaultClass.class_url[0]\\n        } : { name:  'cannot find id: ' + id + ' in classTab: ' + this.sign, url: ''})\\n        return JSON.parse(getVar(this.sign + id, defaultClass))\\n    },\\n    setUrl(url) {\\n        return url.replace(/\\\\$\\\\{([^}]*)\\\\}/g, (_, id) => this.getClass(id).url)\\n    }\\n}\\n// 生成头部分类\\nconst fyAll = RULE.url.includes('fyAll')\\nlet tabHeader = []\\nif (RULE.class_name) tabHeader.push({\\n    id: fyAll ? 'fyAll' : 'fyclass',\\n    class_name: RULE.class_name,\\n    class_url: RULE.class_url\\n})\\nif (RULE.area_name) tabHeader.push({\\n    id: fyAll ? 'fyAll' : 'fyarea',\\n    class_name: RULE.area_name,\\n    class_url: RULE.area_url\\n})\\nif (RULE.year_name) tabHeader.push({\\n    id: fyAll ? 'fyAll' : 'fyyear',\\n    class_name: RULE.year_name,\\n    class_url: RULE.year_url\\n})\\nif (RULE.sort_name) tabHeader.push({\\n    id: fyAll ? 'fyAll' : 'fysort',\\n    class_name: RULE.sort_name,\\n    class_url: RULE.sort_url\\n})\\ntabHeader = new ClassTab(tabHeader, { name: RULE.title, fold: readFile('tabFold'), })\\n\"},{\"col_type\":\"icon_2_round\",\"name\":\"设置\",\"path\":\"Config\",\"rule\":\"js:\\naddListener('onClose', 'clearMyVar(\\\"sortFlag\\\");refreshPage()');\\nsetPageTitle('⚙ 轻合集设置 ⚙');\\nconst defaultDisTabModify = false; //默认禁用自定义分类关闭.就是开启自定义\\nconst QING_TITLE = getMyVar('myCollection'),\\n    url = getMyVar('remoteUrl')\\nlet data = $.require('hiker://page/dataLoad?rule=' + QING_TITLE)(true),\\n    el = [{\\n        title: '<b> 清除缓存，立即更新 <small> （基于远程仓库，不要频繁点击）',\\n        url: $('#noLoading#').lazyRule((url) => {\\n            if (url.startsWith('hiker://') || url.startsWith('file://')){\\n                return 'toast://仓库为本地文件，不会进行缓存，本功能也无效'\\n            }\\n            deleteCache(url);\\n            back(false);\\n            return 'toast://已更新'\\n        }, url),\\n        img: 'hiker://images/icon4',\\n        col_type: 'avatar'\\n    }],\\n    updateInterval = readFile('updateInterval') || '1',\\n    newWindow = readFile('newWindow'),\\n    tabFold = readFile('tabFold'),\\n    disTabModify = readFile('disTabModify'),\\n    disableCustom = readFile('disableCustom'),\\n    editMode = disableCustom ? '导入海阔' : getMyVar('editMode', '启用/禁用');\\nif(disTabModify===''){\\n    saveFile('disTabModify', defaultDisTabModify+'');\\n    disTabModify = defaultDisTabModify;\\n}else if(/true|false/.test(disTabModify)){\\n    disTabModify = JSON.parse(disTabModify);\\n}\\n\\nel.push({\\n    title: '  💡 更新频率: ' + (updateInterval == 0 ? '手动' : updateInterval + '天') + '  ',\\n    url: $(updateInterval, '输入更新间隔（天），为0则手动更新\\\\n本地文件链接无效').input(() => {\\n        input = parseInt(input)\\n        if(Number.isNaN(input)) input = 1\\n        else if(input < 1) input = 0\\n        saveFile('updateInterval', input.toString())\\n        refreshPage()\\n        return 'hiker://empty'\\n    }),\\n    col_type: 'scroll_button'\\n}, {\\n    title: '  🖥 独立首页: ' + (newWindow ? '是' : '否') + '  ',\\n    url: $('#noLoading#').lazyRule((newWindow) => {\\n        saveFile('newWindow', newWindow ? '' : '1')\\n        refreshPage()\\n        return 'hiker://empty'\\n    }, newWindow),\\n    col_type: 'scroll_button'\\n}, {\\n    title: '  💠 分类折叠: ' + (tabFold ? '是' : '否') + '  ',\\n    url: $('#noLoading#').lazyRule((tabFold) => {\\n        saveFile('tabFold', tabFold ? '' : '1')\\n        refreshPage()\\n        return 'hiker://empty'\\n    }, tabFold),\\n    col_type: 'scroll_button'\\n},  {\\n    title: '  💠 分类自定义: ' + (disTabModify ? '否' : '是') + '  ',\\n    url: $('#noLoading#').lazyRule((disTabModify) => {\\n        saveFile('disTabModify', disTabModify ? 'false' : 'true');\\n        putMyVar('typeShow', '');\\n        refreshPage();\\n        return 'hiker://empty'\\n    }, disTabModify),\\n    col_type: 'scroll_button'\\n}, {\\n    title: '  💼 备份恢复  ',\\n    url: $(['备份', '恢复'], 1).select((QING_TITLE, updateInterval, newWindow, tabFold, disableCustom) => {\\n        let url = getMyVar('remoteUrl')\\n        if (!url.startsWith('hiker://') && !url.startsWith('file://'))\\n            url = 'hiker://files/libs/' + md5(url) + '.js'\\n        else if(url.startsWith('hiker://page/')) url = 'hiker://empty'\\n        if (input == '备份') return $('hiker://files/tmp/' + QING_TITLE + '_backup.json', '输入备份路径')\\n            .input((url, updateInterval, newWindow, tabFold, disableCustom) => {\\n                let rules = request(url),\\n                    customData = readFile('customData')\\n                writeFile(input, JSON.stringify({\\n                    updateInterval: updateInterval,\\n                    newWindow: newWindow,\\n                    tabFold: tabFold,\\n                    disableCustom: disableCustom,\\n                    customData: customData,\\n                    rules: rules\\n                }))\\n                return 'toast://已备份，注意若仓库为子页面则不备份'\\n            }, url, updateInterval, newWindow, tabFold, disableCustom)\\n        else return $('hiker://files/tmp/' + QING_TITLE + '_backup.json', '输入备份路径').input((url) => {\\n            let { updateInterval, newWindow, tabFold, disableCustom, customData, rules } = JSON.parse(request(input))\\n            saveFile('updateInterval', updateInterval)\\n            saveFile('newWindow', newWindow)\\n            saveFile('tabFold', tabFold)\\n            saveFile('disableCustom', disableCustom)\\n            saveFile('customData', customData)\\n            if(rules) writeFile(url, rules)\\n            refreshPage()\\n            return 'toast://已恢复，如果不想同步远程仓库，可以设置更新频率为手动'\\n        }, url)\\n    }, QING_TITLE, updateInterval, newWindow, tabFold, disableCustom),\\n    col_type: 'scroll_button'\\n}, {\\n    title: '““””<font color=\\\"#666666\\\"><small>特别鸣谢，小程序提供者：\\\\n' +\\n        data.reduce((self, v) => v.author ? self.concat(v.author.split('&')) : self, [])\\n            .filter((v, i, arr) => v && arr.indexOf(v) == i).join('、'),\\n    url: 'hiker://empty',\\n    col_type: 'text_center_1'\\n})\\n\\nel.push({ col_type: 'line' }, {\\n    title: '““””' + '📝'.small() + '&nbsp 轻合集自定义 &nbsp'.bold().fontcolor('#757575') + (disableCustom ? '❌' : '⭕').small(),\\n    url: $([(disableCustom ? '启用' : '禁用') + '合集自定义', '清除自定义数据'], 1).select(() => {\\n        if (input == '清除自定义数据') {\\n            deleteFile('customData')\\n        } else if (input == '启用合集自定义') {\\n            saveFile('disableCustom', '')\\n        } else {\\n            saveFile('disableCustom', '1')\\n            input += '\\\\n小程序启用/禁用、重新排序等操作均不会体现在首页小程序列表中'\\n        }\\n        refreshPage(false)\\n        return 'toast://已' + input\\n    }),\\n    col_type: 'text_center_1',\\n    extra: { lineVisible: false }\\n});\\n(disableCustom ? ['导入海阔'] : ['启用/禁用', '重新排序', '更改图标', '导入海阔']).forEach((v) => {\\n    el.push({\\n        title: v == editMode ? '““””' + v.bold().fontcolor('#12b668') : v,\\n        url: v == editMode ? 'hiker://empty' : $('#noLoading#').lazyRule((v) => {\\n            putMyVar('editMode', v)\\n            refreshPage(false)\\n            return 'hiker://empty'\\n        }, v),\\n        col_type: 'scroll_button'\\n    })\\n});\\nif(editMode == '导入海阔') el.push({\\n    title: '全部导入',\\n    url: '海阔视界￥home_rule_url￥' + (url.startsWith('hiker://') || url.startsWith('file://') ? url : 'hiker://files/libs/' + md5(url) + '.js'),\\n    col_type: 'text_center_1',\\n    extra: { lineVisible: false }\\n});\\n(disableCustom ? data : JSON.parse(readFile('customData') || '[]')).forEach((v, i) => {\\n    let d = { title: v.title, img: data[i].icon }\\n    switch (editMode) {\\n        case '启用/禁用':\\n            d.title = (v.visible ? '🟢  ' : '🔴  ') + d.title\\n            d.url = $('#noLoading#').lazyRule((i) => {\\n                let rules = JSON.parse(readFile('customData') || '[]')\\n                rules[i].visible = !rules[i].visible\\n                saveFile('customData', JSON.stringify(rules))\\n                refreshPage(false)\\n                return 'hiker://empty'\\n            }, i)\\n            break\\n        case '重新排序':\\n            let sortFlag = parseInt(getMyVar('sortFlag', '-1'))\\n            d.title = (sortFlag == i ? '🔃  ' : '') + d.title\\n            if (sortFlag == -1)\\n                d.url = $('#noLoading#').lazyRule((i) => {\\n                    putMyVar('sortFlag', i.toString())\\n                    refreshPage(false)\\n                    return 'toast://选择要移动到的位置'\\n                }, i)\\n            else\\n                d.url = $('#noLoading#').lazyRule((oldIndex, newIndex) => {\\n                    let rules = JSON.parse(readFile('customData') || '[]')\\n                    rules.splice(newIndex, 0, rules.splice(oldIndex, 1)[0])\\n                    saveFile('customData', JSON.stringify(rules))\\n                    putMyVar('sortFlag', '-1')\\n                    refreshPage(false)\\n                    return 'hiker://empty'\\n                }, sortFlag, i)\\n            break\\n        case '更改图标':\\n            d.url = $(v.icon || '', '输入新图标地址或颜色代码：').input((i) => {\\n                let rules = JSON.parse(readFile('customData') || '[]')\\n                if (input)\\n                    rules[i].icon = input\\n                else\\n                    delete rules[i].icon\\n                saveFile('customData', JSON.stringify(rules))\\n                refreshPage(false)\\n                return 'hiker://empty'\\n            }, i)\\n            break\\n        case '导入海阔':\\n            d.url = 'rule://' + base64Encode(JSON.stringify(data[i]))\\n            break\\n    }\\n    el.push(d)\\n})\\nsetResult(el)\\n\"},{\"col_type\":\"movie_3\",\"name\":\"页面载入\",\"path\":\"frameLoad\",\"rule\":\"js:\\nconst QING_TITLE = getMyVar('myCollection')\\nlet myCollection_el = [],\\n    { RULE, isIndex, pageTitle } = MY_PARAMS,\\n    thisRULE = $.require('hiker://page/dataLoad?rule=' + QING_TITLE)().find((v) => v.title == RULE.title)\\nif (isIndex) {\\n    RULE = thisRULE\\n} else {\\n    RULE.pages = thisRULE.pages\\n}\\neval(JSON.parse(fetch('hiker://page/preFunc?rule=' + QING_TITLE)).rule)\\neval(JSON.parse(fetch('hiker://page/urlParse?rule=' + QING_TITLE)).rule)\\n\\nif (isIndex) {\\n    if (MY_PAGE == 1) {\\n        // 加载ClassTab组件\\n        eval(JSON.parse(fetch('hiker://page/ClassTab?rule=' + QING_TITLE)).rule)\\n        tabHeader.load(myCollection_el)\\n        if (RULE.search_url) myCollection_el.push({\\n            title: \\\"搜索\\\",\\n            desc: \\\"搜你想要的...\\\",\\n            url: '\\\"hiker://search?s=\\\"+input',\\n            extra: {\\n                rules: $.toString((QING_TITLE, title) => {\\n                    let rules = $.require('hiker://page/dataLoad?rule=' + QING_TITLE)()\\n                    rules = [rules.find((v) => v.title == title)]\\n                    return JSON.stringify(rules)\\n                }, QING_TITLE, RULE.title),\\n                defaultValue: getMyVar('searchKey', ''),\\n                onChange: \\\"putMyVar('searchKey',input)\\\"\\n            },\\n            col_type: \\\"input\\\",\\n        })\\n    }\\n    // 处理MY_RULE\\n    MY_RULE.url = RULE.url\\n    MY_RULE.col_type = RULE.col_type\\n    MY_RULE.detail_col_type = RULE.detail_col_type\\n    MY_RULE.find_rule = RULE.find_rule\\n    MY_RULE.detail_find_rule = RULE.detail_find_rule\\n    MY_RULE.params = {}\\n} else {\\n    MY_RULE.url = MY_PARAMS.url\\n    MY_RULE.col_type = RULE.detail_col_type\\n    MY_RULE.find_rule = RULE.detail_find_rule\\n    MY_RULE.params = RULE.params\\n}\\nMY_RULE.pages = RULE.pages\\nMY_RULE.pageList = JSON.parse(MY_RULE.pages || '[]')\\nMY_RULE.title = RULE.title\\n\\nif (!isIndex) {\\n    if (pageTitle) setPageTitle(pageTitle)\\n    setLastChapterRule(thisRULE.last_chapter_rule)\\n    MY_PARAMS = MY_RULE.params\\n}\\n// 预处理并初始化config\\nif (isIndex && MY_PAGE == 1) eval(thisRULE.preRule)\\nlet _cfg = getMyVar('initConfig', '{}')\\nif (_cfg && _cfg.length > 0) {\\n    config = JSON.parse(_cfg)\\n}\\n\\n// 正文解析通用变量\\nlet assignLazyRule = $.toString((QING_TITLE, title) => {\\n    let RULE = $.require(\\\"hiker://page/dataLoad?rule=\\\" + QING_TITLE)().find((v) => v.title == title)\\n    return { pages: RULE.pages, pageList: JSON.parse(RULE.pages || '[]') }\\n}, QING_TITLE, RULE.title)\\nfunction genMyRule() {\\n    let rule = Object.assign({}, MY_RULE)\\n    delete rule.last_chapter_rule\\n    delete rule.preRule\\n    delete rule.pageList\\n    delete rule.pages\\n    return rule\\n}\\nfunction runCode(rule) {\\n    try {\\n        let [input, code] = rule.split('.js:')\\n        return code ? eval(code) : rule\\n    } catch (e) { return rule }\\n}\\nfunction genExUrl(url) {\\n    url = url.split(';')\\n    return url.shift() + ';' + paramHandle(url, thisRULE.ua, MY_RULE.url)\\n}\\n// 正文解析\\nif (MY_RULE.find_rule.startsWith('js:')) {\\n    setResult = function(el, param1, param2, param3) {\\n        param1 = CALLBACK_KEY\\n        param2 = MY_RULE\\n        param3 = MY_TYPE\\n        if (Array.isArray(el.data)) el = el.data\\n        Array.prototype.push.apply(myCollection_el, el.map((v) => {\\n            let MY__RULE = Object.assign(genMyRule(), { params: v.extra || {} })\\n            v.col_type = v.col_type || MY_RULE.col_type\\n\\n            if (!v.url || ['rule', 'pics', 'toast', 'input', 'copy', 'editFile', 'x5', 'x5WebView', 'x5Play', 'web', 'select', 'x5Rule', 'webRule', 'download', 'share'].find((vv) => v.url.startsWith(vv + '://')) || ['x5_webview_single', 'input'].find((vv) => v.col_type == vv)) {\\n                return v\\n            } else if (v.url.includes('@rule=')) {\\n                let [_, url, rule] = v.url.match(/^([\\\\s\\\\S]*?)@rule=([\\\\s\\\\S]*)$/)\\n                v.url = url\\n                MY__RULE.detail_find_rule = rule\\n                MY__RULE.detail_col_type = MY_RULE.col_type\\n            } else if (v.url.startsWith('hiker://page/')) {\\n                if (v.url.includes('rule=') || (v.extra || {}).rule)\\n                    return v\\n                let [_, path, flag, params] = v.url.match(/^hiker:\\\\/\\\\/page\\\\/(.+?)(#.*?)?(?:\\\\?(.*))?$/),\\n                    subPage = MY_RULE.pageList.find((v) => v.path == path),\\n                    subUrl = (params || '').split('&').find((v) => v.startsWith('url='))\\n                v.url = (subUrl ? subUrl.slice(4).replace(/？？/g, '?').replace(/＆＆/g, '&') : (v.extra || {}).url) || 'hiker://empty' + flag + '?' + (params || '')\\n                MY__RULE.detail_find_rule = subPage.rule\\n                MY__RULE.detail_col_type = subPage.col_type\\n            } else if (v.url.includes('@lazyRule=')) {\\n                let reIndex = v.url.indexOf('.js:')\\n                if (reIndex >= 0) v.url = v.url.slice(0, reIndex) + '.js:\\\\nif(MY_RULE)Object.assign(MY_RULE, ' + assignLazyRule + ');' + v.url.slice(reIndex + 4)\\n                return v\\n            } else if (isIndex) {\\n                if (!MY_RULE.detail_find_rule || /hiker:\\\\/\\\\/(?!empty.+$)/.test(v.url)) return v\\n            } else {\\n                return v\\n            }\\n            v.extra = {\\n                url: genExUrl(v.url),\\n                RULE: MY__RULE,\\n                pageTitle: isIndex && v.title\\n            }\\n            v.url = 'hiker://page/frameLoad?rule=' + QING_TITLE\\n            return v\\n        }))\\n        method_setResult.invoke(javaContext, myCollection_el, param1, param2, param3)\\n    }\\n    setHomeResult = setResult\\n    setSearchResult = setResult\\n\\n    eval(MY_RULE.find_rule.slice(3))\\n} else {\\n    let [_, findRule, detailFindRule] = MY_RULE.find_rule.match(/^([\\\\s\\\\S]*?)(?:==>([\\\\s\\\\S]*))?$/)\\n    findRule = findRule.split(';')\\n    parseDomForArray(getResCode(), findRule.shift()).forEach((data) => {\\n        let [title, img, desc, url] = findRule.map((v, i) => {\\n                try {\\n                    if (v == '*') return ''\\n                    else v = (i == 1 || i == 3) ?\\n                        parseDom(data, v) :\\n                        parseDomForHtml(data, v)\\n                    if (i != 3) v = runCode(v)\\n                    return v\\n                } catch (e) { return '' }\\n            }),\\n            res = {\\n                title: title, url: url,\\n                desc: desc, img: img,\\n                col_type: MY_RULE.col_type\\n            }\\n        if (res.url) {\\n            if (res.url.includes('@lazyRule=')) {\\n                let reIndex = res.url.indexOf('.js:')\\n                if (reIndex >= 0) res.url = res.url.slice(0, reIndex) + '.js:\\\\nif(MY_RULE)Object.assign(MY_RULE, ' + assignLazyRule + ');' + res.url.slice(reIndex + 4)\\n            } else  if (detailFindRule) {\\n                res.extra = {\\n                    url: genExUrl(url),\\n                    RULE: Object.assign(genMyRule(), { detail_find_rule: detailFindRule }),\\n                    pageTitle: isIndex && title\\n                }\\n                res.url = 'hiker://page/frameLoad?rule=' + QING_TITLE\\n            } else if (MY_RULE.detail_find_rule) {\\n                res.extra = {\\n                    url: genExUrl(url),\\n                    RULE: genMyRule(),\\n                    pageTitle: isIndex && title\\n                }\\n                res.url = 'hiker://page/frameLoad?rule=' + QING_TITLE\\n            }\\n        }\\n        myCollection_el.push(res)\\n    })\\n    setResult(myCollection_el)\\n}\\n\"},{\"col_type\":\"movie_3\",\"name\":\"数据载入\",\"path\":\"dataLoad\",\"rule\":\"$.exports = function(showAll) {\\n    let url = getMyVar('remoteUrl'),\\n        data = []\\n    if (url.startsWith('hiker://') || url.startsWith('file://')) {\\n        // 如果为本地文件则不进行缓存\\n        try {\\n            let oriData = fetch(url)\\n            if (url.startsWith('hiker://page/'))\\n                oriData = JSON.parse(oriData).rule\\n            data = JSON.parse(oriData)\\n        } catch (e) {}\\n    } else {\\n        // 获取远程数据，检查间隔默认一天\\n        let interval = parseInt(readFile('updateInterval') || '1'),\\n            oldData = fetch('hiker://files/libs/' + md5(url) + '.js'),\\n            remoteData = []\\n        if(interval == 0) interval = -1\\n        try { remoteData = JSON.parse(fetchCache(url, 24 * interval, {timeout:50000})) } catch(e) {}\\n        if(!Array.isArray(remoteData)) remoteData = []\\n        if (remoteData.length < 3) {\\n            log('未获取到数据')\\n            if (oldData) writeFile('hiker://files/libs/' + md5(url) + '.js', oldData)\\n            data = JSON.parse(oldData || '[]')\\n        } else {\\n            log('已获取到数据')\\n            data = remoteData\\n        }\\n    }\\n    data = data.filter((v) => { return v.title != getMyVar('myCollection') && !(v.author || '').includes('轻合集生成器') })\\n    if (readFile('disableCustom')) return data\\n    else { // 写入自定义数据\\n        let customData = JSON.parse(readFile('customData') || '[]'),\\n            rewriteData = []\\n        customData = customData.reduce((self, v) => {\\n            let index = data.findIndex((vv) => v.title == vv.title)\\n            if (index >= 0) {\\n                self.push(v)\\n                let rule = data.splice(index, 1)[0]\\n                if (showAll || v.visible)\\n                    rewriteData.push(Object.assign(rule, v))\\n            }\\n            return self\\n        }, [])\\n        data.forEach((v) => customData.push({ title: v.title, visible: true }))\\n        saveFile('customData', JSON.stringify(customData))\\n        return rewriteData.concat(data)\\n    }\\n}\\n\"},{\"col_type\":\"movie_3\",\"name\":\"函数重写\",\"path\":\"preFunc\",\"rule\":\"// 防止require多次运行\\nlet rCache = {}\\nrequire = function(param0, param1, param2, param3, param4) {\\n    if (!param0 || rCache[param0] != null) {\\n        return\\n    }\\n    rCache[param0] = 1\\n    param2 = param2 || 0\\n    param3 = MY_TICKET\\n    param4 = eval\\n    return method_require.invoke(javaContext, param0, param1, param2, param3, param4)\\n}\\nrequireCache = function(param0, param1, param2, param3, param4, param5) {\\n    if (!param0 || rCache[param0] != null) {\\n        return\\n    }\\n    rCache[param0] = 1\\n    param3 = param3 || 0\\n    param4 = MY_TICKET\\n    param5 = eval\\n    return method_requireCache.invoke(javaContext, param0, param1, param2, param3, param4, param5)\\n}\\nrc = requireCache\\n\\n// 最新章节规则注入预处理代码\\nsetLastChapterRule = function(param0) {\\n    if (!param0) return\\n    if (param0.startsWith(\\\"js:\\\") && thisRULE.preRule) {\\n        param0 = 'js:\\\\ntry{eval(JSON.parse(fetch(\\\"hiker://page/preFunc?rule=' + QING_TITLE + '\\\")).rule);\\\\\\n            eval(base64Decode(\\\"' + base64Encode(thisRULE.preRule) + '\\\"));\\\\\\n            let _cfg = getMyVar(\\\"initConfig\\\", \\\"{}\\\");\\\\\\n            if (_cfg && _cfg.length>0) {config = JSON.parse(_cfg)}}catch(e){log(e.message)}\\\\n;' +\\n            param0.slice(3)\\n    }\\n    method_setLastChapterRule.invoke(javaContext, param0);\\n}\\n\"},{\"col_type\":\"movie_3\",\"name\":\"链接处理\",\"path\":\"urlParse\",\"rule\":\"// 首页链接替换分类\\nfunction indexUrl(param) {\\n    function runCode(rule) {\\n        try {\\n            let [input, code] = rule.split('.js:')\\n            return code ? eval(code) : rule\\n        } catch (e) { return rule }\\n    }\\n    let { RULE, pageNum, QING_TITLE } = JSON.parse(param.split('###')[1])\\n    RULE = JSON.parse(base64Decode(RULE))\\n    pageNum = parseInt(pageNum)\\n    let url = RULE.url\\n\\n    eval(JSON.parse(fetch('hiker://page/ClassTab?rule=' + QING_TITLE)).rule)\\n    url = tabHeader.setUrl(fyAll ? url.replace(/fyAll/g, '$${fyAll}') : url.replace(/fy(class|area|year|sort)/g, '$${fy$1}'))\\n    url = url.replace(/fypage(?:@(-?\\\\d+)@)?(?:\\\\*(\\\\d+)@)?/g, (_, start, space) => parseInt(start || 0) + 1 + (pageNum - 1) * parseInt(space || 1))\\n    url = /^([\\\\s\\\\S]*?)(?:\\\\[firstPage=([\\\\s\\\\S]*?)\\\\])?(?:(\\\\.js:[\\\\s\\\\S]*?))?$/.exec(url)\\n    if (pageNum == 1 && url[2]) url[1] = url[2]\\n    if (url[3] && !url[1].includes('.js:')) url[1] += url[3]\\n    return runCode(url[1])\\n}\\n// 链接参数处理\\nfunction paramHandle(urlParam, ua, urlTmp) {\\n    let charset, UserAgent\\n    try { // 链接的编码和ua应该是首先继承首页链接\\n        [, , charset, UserAgent] = urlTmp.split(';')\\n        UserAgent = UserAgent.match(/^{(.*)}$/)[1].split('&&').find((v) => v.startsWith('User-Agent@'))\\n    } catch (e) {}\\n    urlParam[0] = urlParam[0] || 'GET'\\n    urlParam[1] = urlParam[1] || charset || 'UTF-8'\\n    try {\\n        urlParam[2] = urlParam[2].match(/^{(.*)}$/)[1].split('&&')\\n    } catch (e) { urlParam[2] = [] }\\n    // 添加全局UA\\n    if (!urlParam[2].some((v) => v.startsWith('User-Agent@'))) {\\n        if (UserAgent) urlParam[2].push(UserAgent)\\n        else if (ua == 'pc')\\n            urlParam[2].push('User-Agent@' + PC_UA.replace(/;/g, '；；').replace(/\\\\?/, '？？'))\\n        else if (ua == 'mobile')\\n            urlParam[2].push('User-Agent@' + MOBILE_UA.replace(/;/g, '；；').replace(/\\\\?/, '？？'))\\n    }\\n    urlParam[2] = '{' + urlParam[2].join('&&') + '}'\\n    return urlParam.join(';')\\n}\\n\"},{\"name\":\"仓库工具\",\"path\":\"tools\",\"rule\":\"js:\\n$.exports.range = function(m, n) {\\n    return Math.floor(Math.random() * (m - n + 1) + n);\\n}\\n$.exports.color = function(text, color) {\\n    text += \\\"\\\";\\n    if (text.indexOf(\\\"““””\\\") === 0) {\\n        text.replace(\\\"““””\\\", \\\"\\\");\\n    }\\n    return \\\"““””<font color='\\\" + color + \\\"'>\\\" + text + \\\"</font>\\\";\\n}\\nfunction htmlTag(tag, text) {\\n    text += \\\"\\\";\\n    if (text.indexOf(\\\"““””\\\") === 0) {\\n        text.replace(\\\"““””\\\", \\\"\\\");\\n    }\\n    return \\\"““””\\\" + \\\"<\\\" + tag + \\\">\\\" + text + \\\"</\\\" + tag + \\\">\\\";\\n\\n}\\n\\nfunction getNowFormatDate() {\\n            let date = new Date();\\n            let seperator1 = \\\"-\\\";\\n            let seperator2 = \\\":\\\";\\n            let month = date.getMonth() + 1;\\n            let strDate = date.getDate();\\n            let strHours = date.getHours();\\n            let strMinutes = date.getMinutes();\\n            let strSeconds = date.getSeconds()+1;\\n            if (month >= 1 && month <= 9) {\\n                month = \\\"0\\\" + month\\n            }\\n            if (strDate >= 0 && strDate <= 9) {\\n                strDate = \\\"0\\\" + strDate\\n            }\\n            if (strHours >= 0 && strHours <= 9) {\\n                strHours = \\\"0\\\" + strHours\\n            }\\n            if (strMinutes >= 0 && strMinutes <= 9) {\\n                strMinutes = \\\"0\\\" + strMinutes\\n            }\\n            if (strSeconds >= 0 && strSeconds <= 9) {\\n                strSeconds = \\\"0\\\" + strSeconds\\n            }\\n            //let currentdate = date.getFullYear() + seperator1 + month + seperator1 + strDate + \\\" \\\" + strHours + seperator2 + strMinutes + seperator2 + strSeconds;\\n            let currentdate = (date.getFullYear()-2020)+''+ month +''+ strDate +''+ strHours+'' + strMinutes +''+ Math.ceil(strSeconds/7);\\n            return parseInt(currentdate)\\n        }\\n$.exports.getNowFormatDate = getNowFormatDate;\\n$.exports.htmlTag = htmlTag;\\n$.exports.small = function(text) {\\n    return htmlTag(\\\"small\\\", text);\\n}\\n$.exports.unique2 = function unique2(array){\\n    return Array.from(new Set(array));\\n}\\n$.exports.strDeal = function strDeal(str){\\n    str = str.split('');\\n    str = str.filter(e => (e >= 0 && e <= 9) || (e >= 'a' && e <= 'z') || (e >= 'A' && e <= 'Z') || (e >= '\\\\u4e00' && e <= '\\\\u9fa5'));\\n    str = str.join('');\\n    return str\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"规则列表\",\"path\":\"data\",\"rule\":\"[{\\n    \\\"last_chapter_rule\\\": \\\"\\\",\\n    \\\"title\\\": \\\"吾爱破解𝔥\\\",\\n    \\\"author\\\": \\\"Hood\\\",\\n    \\\"url\\\": \\\"https://www.52pojie.cn/forum.php?mod=guide&view=fyclass&page=fypage;get;GBK\\\",\\n    \\\"version\\\": 4,\\n    \\\"col_type\\\": \\\"text_1\\\",\\n    \\\"class_name\\\": \\\"最新热门&最新精华&最新回复&最新发表\\\",\\n    \\\"class_url\\\": \\\"hot&digest&new&newthread\\\",\\n    \\\"area_name\\\": \\\"\\\",\\n    \\\"area_url\\\": \\\"\\\",\\n    \\\"sort_name\\\": \\\"\\\",\\n    \\\"year_name\\\": \\\"\\\",\\n    \\\"sort_url\\\": \\\"\\\",\\n    \\\"year_url\\\": \\\"\\\",\\n    \\\"find_rule\\\": \\\"js:\\\\nvar res = {};\\\\nvar d = [];\\\\nvar html = getResCode();\\\\n\\\\n//列表\\\\nvar list = parseDomForArray(html,'body&&tbody[id]');\\\\n\\\\nfor(var i=1;i<list.length+1;i++){\\\\nd.push({\\\\ntitle: (i)+ '. ' +parseDomForHtml(list[i-1],'.xst&&Text'),\\\\nurl:'x5://https://www.52pojie.cn/'+parseDomForHtml(list[i-1],'a&&href'),\\\\ncol_type: 'text_1'});\\\\n}\\\\n\\\\r\\\\nres.data = d;\\\\nsetHomeResult(res);\\\",\\n    \\\"search_url\\\": \\\"http://zhannei.baidu.com/cse/site?q=**&p=fypage&cc=52pojie.cn\\\",\\n    \\\"group\\\": \\\"①推荐\\\",\\n    \\\"searchFind\\\": \\\"body&&.result;\\\\nh3&&Text;\\\\na&&href;\\\\n*;\\\\n.c-abstract&&Text;\\\\n*\\\",\\n    \\\"detail_col_type\\\": \\\"movie_1\\\",\\n    \\\"detail_find_rule\\\": \\\"\\\",\\n    \\\"sdetail_col_type\\\": \\\"movie_1\\\",\\n    \\\"sdetail_find_rule\\\": \\\"\\\",\\n    \\\"ua\\\": \\\"pc\\\",\\n    \\\"preRule\\\": \\\"\\\",\\n    \\\"pages\\\": \\\"[]\\\",\\n    \\\"icon\\\": \\\"https://www.52pojie.cn/favicon.ico\\\"\\n}, {\\n    \\\"last_chapter_rule\\\": \\\"\\\",\\n    \\\"title\\\": \\\"423Down\\\",\\n    \\\"author\\\": \\\"香雅情\\\",\\n    \\\"url\\\": \\\"https://www.423down.com/fyAllpage/fypage;get;utf-8;{User-Agent@Mozilla/5.0 (Linux；； Android 10) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/80.0.3987.132 Mobile Safari/537.36}\\\",\\n    \\\"version\\\": 1,\\n    \\\"col_type\\\": \\\"movie_1\\\",\\n    \\\"class_name\\\": \\\"首页&安卓软件\\\",\\n    \\\"type\\\": \\\"news\\\",\\n    \\\"class_url\\\": \\\"&apk/\\\",\\n    \\\"area_name\\\": \\\"原创软件&媒体播放&网页浏览&图形图像&聊天软件&办公软件&上传下载&实用软件&系统辅助&系统必备&安全软件&补丁相关&硬件相关&游戏软件\\\",\\n    \\\"area_url\\\": \\\"zd423/&multimedia/&browser/&image/&im/&work/&down/&safewore/&systemsoft/&systemplus/&security/&patch/&hardware/&game/\\\",\\n    \\\"sort_name\\\": \\\"\\\",\\n    \\\"year_name\\\": \\\"\\\",\\n    \\\"sort_url\\\": \\\"\\\",\\n    \\\"year_url\\\": \\\"\\\",\\n    \\\"find_rule\\\": \\\"js:\\\\nvar items = [];var html=getResCode();\\\\n//log(html);\\\\nvar list = parseDomForArray(html,'.archive-list&&li:not(:contains(优惠推荐))');\\\\n\\\\r\\\\n    for (var i = 0; i < list.length; i++) {\\\\r\\\\n        var title = parseDomForHtml(list[i], 'h2&&Text');\\\\n        var img = parseDom(list[i], 'img&&src');\\\\r\\\\n        var url = parseDom(list[i], 'a&&href');\\\\n        var desc = parseDomForHtml(list[i], '.item-meta&&Text');\\\\r\\\\n        items.push({\\\\r\\\\n            title: title,\\\\n            pic_url: img,\\\\r\\\\n            url: url,\\\\n            desc: desc\\\\r\\\\n        });\\\\r\\\\n    }\\\\n\\\\nsetHomeResult({data:items});\\\",\\n    \\\"search_url\\\": \\\"https://www.423down.com/page/fypage?s=**;get;utf-8;{User-Agent@Mozilla/5.0 (Linux；； Android 10) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/80.0.3987.132 Mobile Safari/537.36}\\\",\\n    \\\"group\\\": \\\"其它\\\",\\n    \\\"searchFind\\\": \\\".archive-list&&li;h2&&Text;a&&href;.item-category&&Text;.item-meta&&Text;img&&src\\\",\\n    \\\"detail_col_type\\\": \\\"movie_1\\\",\\n    \\\"detail_find_rule\\\": \\\"js:\\\\nvar d=[];\\\\nvar html=getResCode();\\\\nvar tabs=parseDomForHtml(html,'body&&.entry&&Html');\\\\n\\\\nd.push({\\\\n\\\\t\\\\t\\\\ttitle: tabs,\\\\n    desc:'',\\\\n    pic_url:'',\\\\n    url:'',\\\\n\\\\t\\\\tcol_type: 'rich_text'\\\\n});\\\\n\\\\nsetHomeResult({data:d});\\\",\\n    \\\"sdetail_col_type\\\": \\\"movie_1\\\",\\n    \\\"sdetail_find_rule\\\": \\\"*\\\",\\n    \\\"ua\\\": \\\"auto\\\",\\n    \\\"preRule\\\": \\\"\\\",\\n    \\\"pages\\\": \\\"[]\\\",\\n    \\\"icon\\\": \\\"\\\"\\n}, {\\n    \\\"last_chapter_rule\\\": \\\"\\\",\\n    \\\"title\\\": \\\"落尘之木ᴺᵐ\\\",\\n    \\\"author\\\": \\\"Namo\\\",\\n    \\\"url\\\": \\\"https://www.luochenzhimu.com/page/fypage\\\",\\n    \\\"version\\\": 1,\\n    \\\"col_type\\\": \\\"movie_1_left_pic\\\",\\n    \\\"class_name\\\": \\\"\\\",\\n    \\\"type\\\": \\\"other\\\",\\n    \\\"class_url\\\": \\\"\\\",\\n    \\\"area_name\\\": \\\"\\\",\\n    \\\"area_url\\\": \\\"\\\",\\n    \\\"sort_name\\\": \\\"\\\",\\n    \\\"year_name\\\": \\\"\\\",\\n    \\\"sort_url\\\": \\\"\\\",\\n    \\\"year_url\\\": \\\"\\\",\\n    \\\"find_rule\\\": \\\"js:\\\\nvar res = {};\\\\nvar d = [];\\\\nvar list = parseDomForArray(getResCode(), '.content&&.excerpt');\\\\nfor (var i in list) {\\\\n    d.push({\\\\n        title: parseDomForHtml(list[i], 'h2&&Text'),\\\\n        desc: parseDomForHtml(list[i], '.meta&&Text'),\\\\n        pic_url: parseDom(list[i], 'img&&data-src') + \\\\\\\"@Referer=\\\\\\\",\\\\n        url: parseDom(list[i], 'a&&href'),\\\\n    })\\\\n}\\\\nres.data = d;\\\\nsetHomeResult(res);\\\",\\n    \\\"search_url\\\": \\\"https://www.luochenzhimu.com/?s=**\\\",\\n    \\\"group\\\": \\\"其它\\\",\\n    \\\"searchFind\\\": \\\"js:\\\\nvar res = {};\\\\nvar d = [];\\\\nvar list = parseDomForArray(getResCode(), 'body&&article');\\\\nfor (var i in list) {\\\\n    d.push({\\\\n        title: parseDomForHtml(list[i], 'h2&&Text'),\\\\n        desc: parseDomForHtml(list[i], '.note&&Text'),        \\\\n        url: parseDom(list[i], 'a&&href'),\\\\n    })\\\\n}\\\\nres.data = d;\\\\nsetHomeResult(res);\\\",\\n    \\\"detail_col_type\\\": \\\"movie_1\\\",\\n    \\\"detail_find_rule\\\": \\\"js:var res={};\\\\nvar d = [];\\\\nd.push({\\\\n    col_type: \\\\\\\"text_1\\\\\\\",\\\\n    title: \\\\\\\"““””<big>\\\\\\\" + parseDomForHtml(getResCode(), \\\\\\\"h1&&Text\\\\\\\") + \\\\\\\"</big>\\\\\\\",\\\\n});\\\\nd.push({\\\\n    title: parseDomForHtml(getResCode(), \\\\\\\".article-content&&Html\\\\\\\").split('push({});')[1],\\\\n    col_type: 'rich_text',\\\\n    extra: {\\\\n        textSize: 16,\\\\n        click: true\\\\n    }\\\\n});\\\\nsetResult(d);\\\",\\n    \\\"sdetail_col_type\\\": \\\"movie_1\\\",\\n    \\\"sdetail_find_rule\\\": \\\"*\\\",\\n    \\\"ua\\\": \\\"pc\\\",\\n    \\\"preRule\\\": \\\"\\\",\\n    \\\"pages\\\": \\\"[]\\\",\\n    \\\"icon\\\": \\\"https://img.luochenzhimu.com/public/2020/01/home.png\\\"\\n}, {\\n    \\\"last_chapter_rule\\\": \\\"\\\",\\n    \\\"title\\\": \\\"分享者\\\",\\n    \\\"author\\\": \\\"小🔥星\\\",\\n    \\\"url\\\": \\\"https://sharerw.com/a/fyAll/fypage/\\\",\\n    \\\"version\\\": 9,\\n    \\\"col_type\\\": \\\"movie_1_vertical_pic\\\",\\n    \\\"class_name\\\": \\\"手机软件&车机软件&电脑软件&\\\",\\n    \\\"class_url\\\": \\\"ganhuo&qiche&jingyan&\\\",\\n    \\\"area_name\\\": \\\"盒子软件&TV资讯&精选TV\\\",\\n    \\\"area_url\\\": \\\"ziyuan&tvzx&jxtv\\\",\\n    \\\"sort_name\\\": \\\"\\\",\\n    \\\"year_name\\\": \\\"\\\",\\n    \\\"sort_url\\\": \\\"\\\",\\n    \\\"year_url\\\": \\\"\\\",\\n    \\\"find_rule\\\": \\\"body&&.article-list;img&&alt;img&&src;.time&&Text;a&&href\\\",\\n    \\\"search_url\\\": \\\"https://sharerw.com/search.php?q=**&page=fypage\\\",\\n    \\\"group\\\": \\\"其它\\\",\\n    \\\"searchFind\\\": \\\"body&&.article-list;img&&alt;a&&href;.time&&Text;p,1&&Text;img&&src\\\",\\n    \\\"detail_col_type\\\": \\\"movie_1\\\",\\n    \\\"detail_find_rule\\\": \\\"js:var res={};var d=[];html=getResCode();text=parseDomForHtml(html,\\\\\\\".art-content&&Html\\\\\\\");d.push({title:text,col_type:'rich_text'});res.data=d;setHomeResult(res);\\\",\\n    \\\"sdetail_col_type\\\": \\\"movie_1\\\",\\n    \\\"sdetail_find_rule\\\": \\\"*\\\",\\n    \\\"ua\\\": \\\"mobile\\\",\\n    \\\"preRule\\\": \\\"\\\",\\n    \\\"pages\\\": \\\"[]\\\",\\n    \\\"icon\\\": \\\"https://z3.ax1x.com/2021/11/05/ImzSvd.png\\\"\\n}, {\\n    \\\"last_chapter_rule\\\": \\\"\\\",\\n    \\\"title\\\": \\\"发现小软件\\\",\\n    \\\"author\\\": \\\"居然\\\",\\n    \\\"url\\\": \\\"https://www.x6g.com/html/23-fypage.html\\\",\\n    \\\"version\\\": 3,\\n    \\\"col_type\\\": \\\"movie_1_vertical_pic\\\",\\n    \\\"class_name\\\": \\\"\\\",\\n    \\\"class_url\\\": \\\"\\\",\\n    \\\"area_name\\\": \\\"\\\",\\n    \\\"area_url\\\": \\\"\\\",\\n    \\\"sort_name\\\": \\\"\\\",\\n    \\\"year_name\\\": \\\"\\\",\\n    \\\"sort_url\\\": \\\"\\\",\\n    \\\"year_url\\\": \\\"\\\",\\n    \\\"find_rule\\\": \\\".list-soft&&li;.list-info&&a&&Text;.layui-clear&&img&&src;.list-ca&&Text;.list-info&&a&&href\\\",\\n    \\\"search_url\\\": \\\"\\\",\\n    \\\"group\\\": \\\"其它\\\",\\n    \\\"searchFind\\\": \\\"\\\",\\n    \\\"detail_col_type\\\": \\\"text_3\\\",\\n    \\\"detail_find_rule\\\": \\\"body&&.article-down;a&&Text;*;*;a&&data-url\\\",\\n    \\\"sdetail_col_type\\\": \\\"movie_1\\\",\\n    \\\"sdetail_find_rule\\\": \\\"\\\",\\n    \\\"ua\\\": \\\"mobile\\\",\\n    \\\"preRule\\\": \\\"\\\",\\n    \\\"pages\\\": \\\"[]\\\",\\n    \\\"icon\\\": \\\"\\\"\\n}, {\\n    \\\"last_chapter_rule\\\": \\\"\\\",\\n    \\\"title\\\": \\\"VXAT\\\",\\n    \\\"author\\\": \\\"小🔥星\\\",\\n    \\\"url\\\": \\\"https://www.vxat.com/fyAll_fypage.html\\\",\\n    \\\"version\\\": 1,\\n    \\\"col_type\\\": \\\"movie_1_vertical_pic\\\",\\n    \\\"class_name\\\": \\\"软件下载&Windows&Android&电视软件&\\\",\\n    \\\"class_url\\\": \\\"RuanJianXiaZai&Windows&Android&TV&\\\",\\n    \\\"area_name\\\": \\\"优惠活动&网站源码&服务器&技术教程&\\\",\\n    \\\"area_url\\\": \\\"YouHuiHuoDong&WangZhanYuanMa&VPS&JiShuJiaoCheng&\\\",\\n    \\\"sort_name\\\": \\\"一级页面提示错误为没有下一页！\\\",\\n    \\\"year_name\\\": \\\"其他&游戏&网友分享&&\\\",\\n    \\\"sort_url\\\": \\\"\\\",\\n    \\\"year_url\\\": \\\"QiTa&YouXi&WangYouFenXiang&&\\\",\\n    \\\"find_rule\\\": \\\"body&&.post;a&&title;img&&src;.time&&Text;a&&href\\\",\\n    \\\"search_url\\\": \\\"https://www.vxat.com/search.php?q=**&page=fypage\\\",\\n    \\\"group\\\": \\\"其它\\\",\\n    \\\"searchFind\\\": \\\"body&&.post;a&&title;a&&href;.time&&Text;.post&&Text;img&&src\\\",\\n    \\\"detail_col_type\\\": \\\"movie_1\\\",\\n    \\\"detail_find_rule\\\": \\\"js:var res={};var d=[];html=getResCode();text=parseDomForHtml(html,\\\\\\\".article-content&&Html\\\\\\\");d.push({title:text,col_type:'rich_text'});res.data=d;setHomeResult(res);\\\",\\n    \\\"sdetail_col_type\\\": \\\"movie_1\\\",\\n    \\\"sdetail_find_rule\\\": \\\"*\\\",\\n    \\\"ua\\\": \\\"mobile\\\",\\n    \\\"preRule\\\": \\\"\\\",\\n    \\\"pages\\\": \\\"[]\\\",\\n    \\\"icon\\\": \\\"\\\"\\n}, {\\n    \\\"last_chapter_rule\\\": \\\"\\\",\\n    \\\"title\\\": \\\"异星软件\\\",\\n    \\\"author\\\": \\\"香雅情\\\",\\n    \\\"url\\\": \\\"http://www.yxssp.com/fyclass/page/fypage\\\",\\n    \\\"version\\\": 1,\\n    \\\"col_type\\\": \\\"movie_1\\\",\\n    \\\"class_name\\\": \\\"Android&Windows\\\",\\n    \\\"class_url\\\": \\\"os/android&os/windows\\\",\\n    \\\"area_name\\\": \\\"\\\",\\n    \\\"area_url\\\": \\\"\\\",\\n    \\\"sort_name\\\": \\\"\\\",\\n    \\\"year_name\\\": \\\"\\\",\\n    \\\"sort_url\\\": \\\"\\\",\\n    \\\"year_url\\\": \\\"\\\",\\n    \\\"find_rule\\\": \\\".td-ss-main-content&&.td_module_wrap;h3&&Text;img&&src;.td-module-meta-info&&Text;a&&href\\\",\\n    \\\"search_url\\\": \\\"http://www.yxssp.com/page/fypage?s=**\\\",\\n    \\\"group\\\": \\\"其它\\\",\\n    \\\"searchFind\\\": \\\".td-ss-main-content&&.td_module_wrap;h3&&Text;a&&href;;.td-module-meta-info&&Text;img&&src\\\",\\n    \\\"detail_col_type\\\": \\\"movie_1\\\",\\n    \\\"detail_find_rule\\\": \\\"js:\\\\nvar d=[];\\\\nvar html=getResCode();\\\\nvar tabs=parseDomForHtml(html,'body&&.td-post-content&&Html').replace(/\\\\\\\\<script[\\\\\\\\S\\\\\\\\s]*?<\\\\\\\\/script\\\\\\\\>/g,'');\\\\n\\\\nd.push({\\\\n\\\\t\\\\t\\\\ttitle: tabs,\\\\n    desc:'',\\\\n    pic_url:'',\\\\n    url:'',\\\\n\\\\t\\\\tcol_type: 'rich_text'\\\\n});\\\\n\\\\nsetHomeResult({data:d});\\\",\\n    \\\"sdetail_col_type\\\": \\\"movie_1\\\",\\n    \\\"sdetail_find_rule\\\": \\\"*\\\",\\n    \\\"ua\\\": \\\"pc\\\",\\n    \\\"preRule\\\": \\\"\\\",\\n    \\\"pages\\\": \\\"[]\\\",\\n    \\\"icon\\\": \\\"\\\"\\n}, {\\n    \\\"last_chapter_rule\\\": \\\"\\\",\\n    \\\"title\\\": \\\"apk4all\\\",\\n    \\\"author\\\": \\\"tee\\\",\\n    \\\"url\\\": \\\"https://apk4all.com/android/genres/fyAll/page/fypage/\\\",\\n    \\\"version\\\": 8,\\n    \\\"col_type\\\": \\\"movie_1_left_pic\\\",\\n    \\\"class_name\\\": \\\"Art ＆＆ Design&Auto ＆＆ Vehicles&Books ＆＆ Reference&Business&Comics&Communication&Education&Entertainment&Finance&Health ＆＆ Fitness&House ＆＆ Home&Libraries ＆＆ Demo&Lifestyle&Maps ＆＆ Navigation&Medical&Music ＆＆ Audio&News ＆＆ Magazines&Parenting&Personalization&Photography&Productivity&Shopping&Social&Tools&Travel ＆＆ Local&Video Players ＆＆ Editors&Weather\\\",\\n    \\\"type\\\": \\\"tool\\\",\\n    \\\"class_url\\\": \\\"art-design/&auto-vehicles/&books-reference/&business-app/&comics-app/&communication-app/&education-mod-app/&entertainment-apps/&finance/&health-fitness/&house-home/&libraries-demo/&lifestyle-app/&maps-navigation/&medical-app/&music-audio/&news-magazines/&parenting/&personalization-mod-app/&photography/&productivity-app/&shopping-app/&social-app/&tools-mod-app/&travel-local-app/&video-players-editors/&weather-app/\\\",\\n    \\\"area_name\\\": \\\"Action&Adventure&Arcade&Board&Card&Casual&Educational&Music&Puzzle&Racing&Role Playing&Simulation&Sports&Strategy&Trivia&Word\\\",\\n    \\\"area_url\\\": \\\"action-games/&adventure-games/&arcade-games/&board-games/&card-games/&casual-games/&educational-games/&music-games/&puzzle-games/&racing-games/&role-playing-games/&simulation-apk-games/&sports-games/&strategy-games/&trivia-games/&word-games/\\\",\\n    \\\"sort_name\\\": \\\"\\\",\\n    \\\"year_name\\\": \\\"\\\",\\n    \\\"sort_url\\\": \\\"\\\",\\n    \\\"year_url\\\": \\\"\\\",\\n    \\\"find_rule\\\": \\\"main&&article;h3&&Text;img,1&&src;dd&&Text;a&&href.js:input+'#immersiveTheme#'\\\",\\n    \\\"search_url\\\": \\\"https://apk4all.com/search/**/page/fypage/\\\",\\n    \\\"group\\\": \\\"其它\\\",\\n    \\\"searchFind\\\": \\\"main&&article;h3&&Text;a&&href.js:input+'#immersiveTheme#';dd&&Text;*;img,1&&src\\\",\\n    \\\"detail_col_type\\\": \\\"rich_text\\\",\\n    \\\"detail_find_rule\\\": \\\"js:\\\\nvar res = {};\\\\nvar d = [];\\\\nvar html = getResCode();\\\\nvar desc = pdfh(html, \\\\\\\".desc&&Text\\\\\\\") + \\\\\\\"\\\\\\\\n\\\\\\\" + pdfh(html, \\\\\\\"h2&&Text\\\\\\\") + \\\\\\\"   \\\\\\\\/   10\\\\\\\";\\\\n\\\\nvar dl = pd(html, \\\\\\\".dllinks,1&&a&&href\\\\\\\") + \\\\\\\"#immersiveTheme#\\\\\\\";\\\\n\\\\nd.push({ //标题、缩略图、简介\\\\n    title: \\\\\\\"““””<big>\\\\\\\" + pdfh(html, \\\\\\\"h1&&Text\\\\\\\") + \\\\\\\"</big>\\\\\\\",\\\\n    col_type: \\\\\\\"movie_1_vertical_pic_blur\\\\\\\",\\\\n    desc: desc,\\\\n    pic_url: pd(html, \\\\\\\"article&&img,1&&src\\\\\\\"),\\\\n    url: dl\\\\n});\\\\n\\\\nd.push({ //线条\\\\n    col_type: \\\\\\\"line_blank\\\\\\\",\\\\n});\\\\n\\\\nvar list = pdfa(html, \\\\\\\".app-desc&&p||li\\\\\\\");\\\\nfor (i of list) {\\\\n    d.push({\\\\n        title: pdfh(i, \\\\\\\"p||li&&Text\\\\\\\"),\\\\n        col_type: \\\\\\\"rich_text\\\\\\\",\\\\n        extra: {\\\\n            textSize: 13,\\\\n            click: true\\\\n        }\\\\n    });\\\\n};\\\\n\\\\nvar gallery = pdfa(html, \\\\\\\"#gallery-1&&a\\\\\\\");\\\\n\\\\nfor (let n of gallery) {\\\\n    d.push({\\\\n        title: pdfh(n, \\\\\\\"img,1&&title\\\\\\\"),\\\\n        col_type: \\\\\\\"pic_3_square\\\\\\\",\\\\n        pic_url: pd(n, \\\\\\\"img,1&&src\\\\\\\") + '@Referer=',\\\\n        url: pd(n, \\\\\\\"img,1&&src\\\\\\\") + '#autoPage##readTheme#'\\\\n    });\\\\n};\\\\n\\\\nd.push({ //线条\\\\n    col_type: \\\\\\\"line_blank\\\\\\\",\\\\n});\\\\n\\\\n//底部下载模块\\\\nd.push({\\\\n    col_type: 'text_center_1',\\\\n    title: \\\\\\\"““””<big>\\\\\\\" + '点此下载' + \\\\\\\"</big>\\\\\\\",\\\\n    url: dl\\\\n});\\\\n\\\\nd.push({ //线条\\\\n    col_type: \\\\\\\"line_blank\\\\\\\",\\\\n});\\\\n\\\\nres.data = d;\\\\nsetResult(res);\\\",\\n    \\\"sdetail_col_type\\\": \\\"movie_1\\\",\\n    \\\"sdetail_find_rule\\\": \\\"*\\\",\\n    \\\"ua\\\": \\\"mobile\\\",\\n    \\\"preRule\\\": \\\"\\\",\\n    \\\"pages\\\": \\\"[]\\\",\\n    \\\"icon\\\": \\\"https://apk4all.com/favicon.ico\\\"\\n}]\"}]","proxy":"","icon":"https://hikerfans.com/tubiao/more/320.png"},{"last_chapter_rule":"","pageList":[{"col_type":"movie_1_vertical_pic","name":"博主内容列表","path":"detail.html","rule":"js:\nd = [];\nid = MY_PARAMS.id; //前问desc获取\nurl = \"https://m.weibo.cn/api/container/getIndex?containerid=107603\" + id + \"_-_WEIBO_SECOND_PROFILE_WEIBO&luicode=10000011&lfid=107603\" + id + \"_-_WEIBO_SECOND_PROFILE_WEIBO&page_type=03&page=\" + MY_PAGE\neval(JSON.parse(fetch(\"hiker://page/time.html\")).rule)\n\nJson = JSON.parse(fetch(url));\n//log(Json)\nvar userName = getVar('userName', ''); //博主 名\nvar userImg = getVar('userImg', ''); //博主头像\n\nif (MY_PAGE == 1) {\n    if (Json.data.cards[0]) {\n        t = Json.data.cards[0].mblog.user;\n        setPageTitle(t.screen_name);\n\n        userName = t.screen_name;\n        userImg = t.avatar_hd + \"@Referer=https://m.weibo.cn\";\n        putVar('userName', t.screen_name);\n        putVar('userImg', t.avatar_hd + \"@Referer=https://m.weibo.cn\")\n\n        d.push({\n            title: t.screen_name + \"◎\" + (t.verified_reason ? t.verified_reason + \"◎\" + t.description : t.description),\n            img: t.avatar_hd + \"@Referer=https://m.weibo.cn\",\n            url: \"hiker://page/info.html#immersiveTheme#\",\n            col_type: \"avatar\",\n            extra: {\n                title: t.screen_name,\n                reason: t.verified_reason ? t.verified_reason : \"\",\n                desc: t.description,\n                followers_count: t.followers_count,\n                cover: t.cover_image_phone,\n                avatar: t.avatar_hd\n            }\n        })\n    }\n\n    lurl = $(\"#noLoading#\").lazyRule((Json) => {\n        clearVar(\"url\");\n        r = readFile('weibo.txt');\n        j = r ? JSON.parse(r) : [];\n        t = Json.data.cards[0] ? Json.data.cards[0].mblog.user : null;\n\n        if (t) {\n            flag = true;\n            log(\"t.screen_name\" + t.screen_name)\n            j.forEach(x => x.extra.id == t.id ? flag = false : null)\n            if (flag) {\n                j.push({\n                    visible: true,\n                    delete: false,\n                    title: t.screen_name,\n                    img: t.avatar_hd + \"@Referer=https://m.weibo.cn\",\n                    url: \"hiker://page/detail.html?page=fypage\",\n                    extra: {\n                        id: String(t.id)\n                    },\n                    data: {\n                        img: t.avatar_hd + \"@Referer=https://m.weibo.cn\"\n                    }\n                })\n                saveFile('weibo.txt', JSON.stringify(j));\n                back(true);\n            } else {\n\n                back(true);\n\n            }\n            return 'toast://已订阅该博主';\n        }\n    }, Json);\n\n    d.push({\n        title: \"订阅博主\",\n        col_type: \"text_center_1\",\n        url: lurl\n    })\n\n}\n/**\nvar regex = new RegExp(‘<img‘, ‘gi‘);\ntxt = txt.replace(regex, ‘<img style=\"width: 100%;\"‘);\n**/\nvar message = '';\nvar source = '';\nvar created_at = '';\n(Json.data.cards ? Json.data.cards : []).forEach(function(x) {\n    mblog = x.mblog;\n    if (Object.prototype.toString.call(mblog) !== '[object Object]') {\n        return true;\n    }\n\n    if (!('id' in mblog)) {\n        return true;\n    }\n\n    try {\n        if (mblog.raw_text) {\n            message = mblog.raw_text;\n        } else {\n            if (mblog.text) {\n                message = mblog.text.replace(/<\\/*.*?>/g, '');\n            }\n        }\n    } catch (e) {}\n    try {\n        if (mblog.source) {\n            source = mblog.source;\n        }\n    } catch (e) {}\n    try {\n        if (mblog.created_at) {\n            created_at = formatDate(mblog.created_at);\n        }\n    } catch (e) {}\n    d.push({\n        title: userName + '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<small><small> ' + source + '</small></small>' + '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<small><small> ' + created_at + '</small></small>',\n        img: userImg,\n        url: \"hiker://page/content.html\",\n        col_type: \"avatar\",\n        extra: {\n            id: mblog.id\n        }\n    })\n    d.push({\n        desc: '',\n        url: \"hiker://page/content.html\",\n        title: message,\n        col_type: \"rich_text\",\n    })\n\n    try {\n        if (mblog.retweeted_status) {\n            d.push({\n                col_type: \"line\"\n            }, {\n                title: \"““””<font color=\\\"#6495ED\\\">@\" + mblog.retweeted_status.user.screen_name + \"</font>\", //@xxx\n                url: \"hiker://page/detail.html?p=fypage\",\n                extra: {\n                    id: String(mblog.retweeted_status.user.id),\n                    lineVisible: false\n                },\n                col_type: \"text_1\"\n            }, {\n                title: mblog.retweeted_status.text ? (mblog.retweeted_status.text.replace(/<img\\/*.*?>/g, '').replace('href=\"', 'href=\"https://m.weibo.cn')) : '', //内容\n                col_type: \"rich_text\"\n            })\n        }\n    } catch (e) {\n        log(e);\n        log('user输出有问题')\n    }\n    //j = mblog.retweeted_status ? mblog.retweeted_status.pics : false\n    try {\n        if (mblog.pics) {\n            for (var i in mblog.pics) {\n                d.push({\n                    url: (mblog.pics[i].url.replace('orj360', 'large') + \"@Referer=https://m.weibo.cn\"),\n                    img: (mblog.pics[i].url.replace('orj360', 'large') + \"@Referer=https://m.weibo.cn\"),\n                    col_type: \"pic_3_square\",\n                })\n            }\n        } else if (mblog.retweeted_status) {\n            if (mblog.retweeted_status.pics) {\n                for (var j in mblog.retweeted_status.pics) {\n                    d.push({\n                        url: (mblog.retweeted_status.pics[j].url.replace('orj360', 'large') + \"@Referer=https://m.weibo.cn\"),\n                        img: (mblog.retweeted_status.pics[j].url.replace('orj360', 'large') + \"@Referer=https://m.weibo.cn\"),\n                        col_type: \"pic_3_square\",\n                    })\n                }\n            }\n        }\n    } catch (e) { //log('图片输出错误！地址是'+text)\n    }\n    d.push({\n        col_type: \"big_blank_block\",\n    }, {\n        col_type: \"big_blank_block\",\n    }, {\n        col_type: \"line_blank\",\n    })\n})\nsetResult(d)"},{"col_type":"rich_text","name":"正文","path":"content.html","rule":"js:\nd = [];\nsetPageTitle(\"微博正文\");\nid = MY_PARAMS.id;\nvar url = 'https://m.weibo.cn/detail/' + id\nhtml = fetch(url);\njson = eval(html.match(/var \\$render_data =[\\s\\S]+?\\]\\[0\\] \\|\\| \\{\\}\\;/)[0]);\neval(JSON.parse(fetch(\"hiker://page/time.html\")).rule);\nlet retweeted = $render_data.status.retweeted_status ? $render_data.status.retweeted_status : null; //转发内容\nvar dynamic = $render_data.status ? $render_data.status.status_title : ''; //原创动态\n//log('title0'+dynamic)\nlet title1 = $render_data.status ? $render_data.status.text : '';\n//log('title1'+title1)\nlet dynamicForward = $render_data.status.retweeted_status ? $render_data.status.retweeted_status.text : ''; //原创转发 转发的人的动态\n//log('dynamicForward'+dynamicForward)\nlet forward = ''; //转发原创转发\ntry {\n    forward = $render_data.status.raw_text;\n} catch (e) {}\ndynamic = retweeted == null && title1 !== '' ? title1 : dynamic;\n//log('title2'+dynamic)\n//log('retweeted'+retweeted);\n//log('forward'+forward);\n\ntitleColor = 'red';\nvar userName = $render_data.status.user ? $render_data.status.user.screen_name : getVar('userName', ''); //博主 名\nvar userImg = $render_data.status.user ? $render_data.status.user.profile_image_url : getVar('userImg', ''); //博主头像\nvar userUrl = $render_data.status.user ? $render_data.status.user.profile_url : ''; //博主url\nvar dynamicTime = $render_data.status.created_at ? formatDate($render_data.status.created_at) : ''; //发布时间\nd.push({\n    title: userName + '&nbsp;&nbsp;&nbsp;<small>' + dynamicTime + '</small>' + '&nbsp;&nbsp;&nbsp;<small><small><font color=\"red\"> [原文地址(＾＿－)]</font></small></small>',\n    img: userImg,\n    url: url,\n    col_type: \"avatar\"\n})\n\n\nfunction addImgList($) {\n    let img = \"\";\n    let imgs = [];\n    pics = $.pics ? $.pics : [];\n    i = [];\n    pics.forEach(function(x) {\n        // p = x.url.match(/gif$/) ? x.url : x.large.url;\n        // pa = x.url.match(/gif$/) ? \"<a href=\\\"\" + x.large.url + \"\\\">原gif图链接</a>\" : \"\";\n        //  img += pa + \"<img src=\\\"\" + p + \"\\\">\"\n        img += (x.url.match(/gif$/) ? x.url : x.large.url) + \"@Referer=https://m.weibo.cn\";\n        imgs.push((x.url.match(/gif$/) ? x.url : x.large.url) + \"@Referer=https://m.weibo.cn\");\n        i.push({\n            url: imgs.join(\"&&\"),\n            img: (x.url.match(/gif$/) ? x.url : x.large.url) + \"@Referer=https://m.weibo.cn\",\n            col_type: \"pic_1_full\",\n        })\n    })\n\n    return i\n}\n\nfunction addVideoList($) {\n    var video = \"\";\n    videos = $.page_info ? $.page_info : false\n    if (videos.urls) {\n        vpic = videos.page_pic.url\n        if (videos.urls.mp4_720p_mp4) {\n            v = videos.urls.mp4_720p_mp4\n        } else if (videos.urls.mp4_hd_mp4) {\n            v = videos.urls.mp4_hd_mp4\n        } else if (media_info.stream_url_hd) {\n            v = videos.media_info.stream_url_hd\n        } else {\n            v = videos.media_info.stream_url\n        }\n        video = \"<a href=\\\"\" + v + \"\\\">视频链接</a><img src=\\\"\" + vpic + \"\\\">\"\n\n    }\n    video = video.replace(/<span class=\"url-icon\"><img alt=(.*?) src=.*?\\/><\\/span>/g, '$1')\n        .replace(/data-url=\"(.*?)\"\\s*href=\".*?\"/g, 'href=\"$1\"')\n        .replace(/<span class='url-icon'><img.*?1rem' .*?default.*?><\\/span>/g, '')\n        .replace(/href=[\"'](\\/.*?)['\"]/g, 'href=\"https://m.weibo.cn$1\"')\n    return video;\n}\n//处理原文\nvideo = addVideoList($render_data.status);\nd.push({\n    title: (forward && retweeted ? forward : dynamic).replace(/<img\\/*.*?>/g, '') + (video ? video : ''), //内容\n    vol_type: 'rich_text',\n})\n\nd = d.concat(addImgList($render_data.status))\n\n//处理转发\nif (retweeted) {\n    user = retweeted.user;\n    video = addVideoList(retweeted);\n    d.push({\n        col_type: \"line\"\n    }, {\n        title: \"““””<font color=\\\"#6495ED\\\">@\" + user.screen_name + \"</font>\", //@xxx\n        url: \"hiker://page/detail.html?p=fypage\",\n        extra: {\n            id: String(user.id),\n            lineVisible: false\n        },\n        col_type: \"text_1\"\n    }, {\n        title: (dynamicForward ? dynamicForward.replace(/<img\\/*.*?>/g, '').replace('href=\"', 'href=\"https://m.weibo.cn') : '') + (video ? video : ''), //内容\n        col_type: \"rich_text\"\n    })\n    d = d.concat(addImgList(retweeted))\n\n    d.push({\n        col_type: \"text_center_1\",\n        img: '',\n        title: '““””<small><font color=' + titleColor + '>' + '原文' + '</font></small>',\n        url: \"hiker://page/content.html\",\n        extra: {\n            id: String(retweeted.id),\n            lineVisible: false\n        },\n    })\n}\nd.push({\n    col_type: \"big_blank_block\",\n}, {\n    col_type: \"big_blank_block\",\n}, {\n    col_type: \"line_blank\",\n})\n\nlet commentUrl = \"https://m.weibo.cn/comments/hotflow?id=\" + id + \"&mid=\" + id + \"&max_id_type=0\";\ncommentHtml = fetch(commentUrl);\nif (commentHtml) {\n    try {\n        Json = JSON.parse(commentHtml);\n        (Json.data.data ? Json.data.data : []).forEach(function(item) {\n            source = item.source;\n            text = item.text;\n            id = item.id;\n            let created_at = formatDate(item.created_at);\n            userId = item.user.id;\n            userName = item.user.screen_name;\n            userImg = item.user.profile_image_url;\n\n            d.push({\n                title: userName,\n                img: userImg,\n                col_type: \"avatar\",\n                url: 'hiker://page/detail.html?page=fypage',\n                extra: {\n                    id: String(userId),\n                },\n            }, {\n                title: \"<small>\" + text + '<br/><font color=\"#808080\">' + created_at + '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;' + source + \"</font></small>\", //内容\n                col_type: \"rich_text\"\n            })\n        })\n    } catch (e) {}\n}\nsetResult(d)"},{"col_type":"movie_2","name":"搜索博主","path":"search.html","rule":"addListener('onClose', $.toString(() => {\n    clearMyVar(\"search\")\n}))\n\n//搜索用户列表开始\nfunction list(html, d) {\n    let Json = JSON.parse(html)\n    let cards = Json.data.cards[1] ? Json.data.cards[1].card_group : Json.data.cards[0] ? Json.data.cards[0].card_group : [];\n    cards.forEach(\n        function(t) {\n            d.push({\n                title: t.user.screen_name,\n                img: t.user.avatar_hd + \"@Referer=https://m.weibo.cn\",\n                desc: t.desc1 + \"  \" + t.desc2,\n                url: \"hiker://page/detail.html?page=fypage\",\n                extra: {\n                    id: String(t.user.id)\n                },\n                col_type: \"movie_1\"\n            })\n        })\n    return d;\n}\n//搜索用户列表结束\n\n//时间函数\neval(JSON.parse(fetch(\"hiker://page/time.html\")).rule)\n\n\n//搜索内容列表开始\nfunction pu(d, $, col) {\n    date = new Date($.created_at);\n    time = date.getTime();\n    time = '📅 ' + formatDate(time)\n    d.push({\n        title: $.user.screen_name,\n        img: $.user.avatar_hd + \"@Referer=https://m.weibo.cn\",\n        col_type: \"avatar\",\n        url: \"hiker://page/detail.html?p=fypage\",\n        extra: {\n            id: String($.user.id)\n        }\n    })\n    j = $.retweeted_status ? $.retweeted_status.pics : false\n    d.push({\n        title: $.text.replace(/<.*?>/g, ''),\n        desc: time,\n        img: ($.pics ? $.pics[0].url : j ? $.retweeted_status.pics[0].url : $.user.profile_image_url ? $.user.profile_image_url : x.user.profile_image_url) + \"@Referer=https://m.weibo.cn\",\n        url: \"hiker://page/content.html\",\n        extra: {\n            id: String($.id)\n        },\n        col_type: col\n    })\n    return d\n}\n//搜索内容列表结束\n\n//搜索内容列表开始\nfunction getList(url, d, col) {\n    html = fetch(url);\n    Json = JSON.parse(html || \"[]\");\n    J = Json.data.cards\n    J.forEach((x) => {\n        if (x.mblog) {\n            mblog = x.mblog;\n            d = pu(d, mblog, col)\n        }\n        if (x.card_group) {\n            x.card_group.forEach((j) => {\n                mblog = j.mblog\n                if (mblog) {\n                    d = pu(d, mblog, col)\n                }\n                if (j.left_element) {\n                    mblog = j.left_element.mblog;\n                    if (mblog) {\n                        d = pu(d, mblog, col)\n                    } else {\n                        d = pu(d, j.right_element.mblog, col)\n                    }\n                }\n            })\n        }\n    })\n    return d\n}\n//结束\n\n\n\n//搜索选择开始\nmode = getMyVar(\"mode\", \"👤 用户\")\nif (MY_PAGE == 1) {\n    d.push({\n        url: \"'toast://搜索成功';refreshPage()\",\n        col_type: 'input',\n        title: '搜索',\n        desc: \"搜索\",\n        extra: {\n            onChange: \"putMyVar('my-search',input)\"\n        }\n    })\n\n    slist = [\"👤 用户\", \"📝 综合\", \"🎥 视频\", \"🖼 图片\", \"#️⃣ 话题\"]\n    slist.forEach((x) => {\n        clearVar(\"search\")\n        d.push({\n            col_type: \"scroll_button\",\n            title: x == mode ? '““””' + x.bold().fontcolor('#12b668') : x,\n            url: $(\"#noLoading#\").lazyRule((x) => {\n                putMyVar(\"mode\", x);\n                refreshPage(false);\n                return \"hiker://empty\"\n            }, x)\n        })\n    })\n}\n//搜索选择结束\n\n\nlet search = getMyVar(\"my-search\");\nif (search) {\n    putMyVar(\"search\", search)\n}\nsearchn = getMyVar(\"search\")\n\n\n\n//判断搜索内容\nswitch (mode) {\n    case \"👤 用户\":\n        url = \"https://m.weibo.cn/api/container/getIndex?containerid=100103type%3D3%26q%3D\" + searchn + \"%26t%3D0&page_type=searchall&page=\" + MY_PAGE;\n        if (searchn) {\n            html = fetch(url);\n            list(html, d);\n        }\n        break\n    case \"🎥 视频\":\n        url = \"https://m.weibo.cn/api/container/getIndex?containerid=100103type%3D64%26q%3D\" + searchn + \"%26t%3D0&page_type=searchall&page=\" + MY_PAGE\n        if (searchn) {\n            getList(url, d, \"movie_1_vertical_pic\")\n        }\n        break\n    case \"🖼 图片\":\n        url = \"https://m.weibo.cn/api/container/getIndex?containerid=100103type%3D63%26q%3D\" + searchn + \"%26t%3D0&page_type=searchall&page=\" + MY_PAGE\n        if (searchn) {\n            getList(url, d, \"pic_1\")\n        }\n        break\n    case \"📝 综合\":\n        url = \"https://m.weibo.cn/api/container/getIndex?containerid=100103type%3D1%26q%3D\" + searchn + \"%26t%3D0&page_type=searchall&page=\" + MY_PAGE\n        if (searchn) {\n            getList(url, d, \"movie_1_vertical_pic\")\n        }\n        break\n    case \"#️⃣ 话题\":\n        url = \"https://m.weibo.cn/api/container/getIndex?containerid=100103type%3D38%26q%3D\" + searchn + \"%26t%3D0&page_type=searchall&page=\" + MY_PAGE\n        if (searchn) {\n            html = fetch(url);\n            Json = JSON.parse(html || \"[]\")\n            J = Json.data.cards[0].card_group ? Json.data.cards[0].card_group : [];\n            J.forEach(x => d.push({\n                title: x.title_sub,\n                url: \"hiker://page/huati.html?p=fypage&name=\" + x.title_sub.replace(/^#|#$/g, '') + \"#immersiveTheme#\",\n                img: x.pic + \"@Referer=https://m.weibo.cn\",\n                col_type: \"movie_1_left_pic\",\n                desc: x.desc2\n            }))\n        }\n        break\n\n}"},{"col_type":"movie_3","name":"管理博主","path":"config.html","rule":"el = [];\n\nel.push( {\n    title: '““””<font color=\"#666666\"><small>特别鸣谢，小程序提供者：\\n追剧君、 微光、 仰望星空、 道阻且右、 Moonquakes、 Rx、 FairyAlo、 墨非白、 发粪涂墙、 团子、 Zruiry、 Hood、 @LoyDgIk、 ivnyoov、 Killer、 子丑寅卯、 \\n嗨又是我、 147258、 Hi、 枫林雨殇、 dy2020、小棉袄🌞、永远の明日 ',\n    col_type: \"text_center_1\",\nextra: {\n        lineVisible: false\n    },\nurl:\"toast://特别鸣谢\"\n})\n\neditMode = getMyVar('editMode', '显示/隐藏')\nlet config = ['显示/隐藏', '重新排序', '删除博主','更改头像', '更改名称']\n\nconfig.forEach((v) => {\n    el.push({\n        title: v == editMode ? '““””' + v.bold().fontcolor('#12b668') : v,\n        url: v == editMode ? 'hiker://empty' : $('#noLoading#').lazyRule((v) => {\n            putMyVar('editMode', v)\n            refreshPage(false)\n            return 'hiker://empty'\n        }, v),\n        col_type: 'scroll_button'\n    })\n})\n\nJson = JSON.parse(readFile('weibo.txt') || '[]');\nif(!Json.length){\nel.push({\ntitle:\"暂无博主，快去搜索订阅吧\",\ncol_type:\"text_center_1\",\nurl:\"toast://快去搜索吧\"\n})\n}\n\n\nif (editMode == \"删除博主\") {\n   if(Json.length){\n    el.push({\n        title: \"确认删除\",\n        col_type: \"text_center_1\",\n        url: $('#noLoading#').lazyRule((Json) => {\n            let rules = [];\n            Json.forEach((x) => {\n                !x.delete ? rules.push(x) : null\n            })\n            saveFile('weibo.txt', JSON.stringify(rules))\n            refreshPage(false)\n            return 'toast://删除成功'\n        }, Json)\n    })\n}\n}\nJSON.parse(readFile('weibo.txt') || '[]').forEach((v, i) => {\n    let d = {\n        title: v.title,\n        img: v.data.icon ? v.data.icon : v.data.img\n    }\n    switch (editMode) {\n        case '显示/隐藏':\n            d.title = (v.visible ? '🟢  ' : '🔴  ') + d.title\n            d.url = $('#noLoading#').lazyRule((i) => {\n                let rules = JSON.parse(readFile('weibo.txt') || '[]')\n                rules[i].visible = !rules[i].visible\n                saveFile('weibo.txt', JSON.stringify(rules))\n                refreshPage(false)\n                return 'hiker://empty'\n            }, i)\n            break\n        case '删除博主':\n            d.title = (v.delete ? '❌  ' : '') + d.title\n            d.url = $('#noLoading#').lazyRule((i) => {\n                let rules = JSON.parse(readFile('weibo.txt') || '[]')\n                rules[i].delete = !rules[i].delete\n                saveFile('weibo.txt', JSON.stringify(rules))\n                refreshPage(false)\n                return 'hiker://empty'\n            }, i)\n            break\n        case '重新排序':\n            let sortFlag = parseInt(getMyVar('sortFlag', '-1'))\n            d.title = (sortFlag == i ? '🔃  ' : '') + d.title\n            if (sortFlag == -1)\n                d.url = $('#noLoading#').lazyRule((i) => {\n                    putMyVar('sortFlag', i.toString())\n                    refreshPage(false)\n                    return 'toast://选择要移动到的位置'\n                }, i)\n            else\n                d.url = $('#noLoading#').lazyRule((oldIndex, newIndex) => {\n                    let rules = JSON.parse(readFile('weibo.txt') || '[]')\n                    rules.splice(newIndex, 0, rules.splice(oldIndex, 1)[0])\n                    saveFile('weibo.txt', JSON.stringify(rules))\n                    putMyVar('sortFlag', '-1')\n                    refreshPage(false)\n                    return 'hiker://empty'\n                }, sortFlag, i)\n            break\n        case '更改头像':\n            d.url = $(v.data.icon || '', '输入新图标地址或颜色代码：').input((i) => {\n                let rules = JSON.parse(readFile('weibo.txt') || '[]')\n                if (input)\n                    rules[i].data.icon = input\n                else\n                    delete rules[i].data.icon\n                saveFile('weibo.txt', JSON.stringify(rules))\n                refreshPage(false)\n                return 'hiker://empty'\n            }, i)\n            break\n        case '更改名称':\n            d.url = $(v.title || '', '输入新名称：').input((i) => {\n                let rules = JSON.parse(readFile('weibo.txt') || '[]')\n                if (input)\n                    rules[i].title = input\n                else\n                    delete rules[i].title\n                saveFile('weibo.txt', JSON.stringify(rules))\n                refreshPage(false)\n                return 'hiker://empty'\n            }, i)\n            break\n    }\n    el.push(d)\n})\n\nsetResult(el)"},{"col_type":"movie_3","name":"微博热搜","path":"Hot.html","rule":"d = []\nif(MY_PAGE==1){\nurl = \"https://m.weibo.cn/api/container/getIndex?containerid=106003type%3D25%26t%3D3%26disable_hot%3D1%26filter_type%3Drealtimehot&title=微博热搜&extparam=seat%3D1%26pos%3D0_0%26dgr%3D0%26mi_cid%3D100103%26cate%3D10103%26filter_type%3Drealtimehot%26c_type%3D30\";\nJson = JSON.parse(fetch(url) || \"[]\")\nJson.data.cards[0].card_group.forEach((x) => {\n    icon=/fei/.test(x.icon)?\"✴️沸\":/new/.test(x.icon)?\"🆕新\":/hot/.test(x.icon)?\"🔥热\":/jian/.test(x.icon)?\"✅荐\":\"\"\n\n    d.push({\n        title: x.desc +\" \"+icon,\n        img: x.pic,\n        col_type: \"avatar\",\n        url:\"hiker://page/huati.html?p=fypage&name=\"+x.desc+\"#immersiveTheme#\"\n\n    })\n})\n}\nsetResult(d)"},{"col_type":"movie_1_left_pic","name":"话题列表","path":"huati.html","rule":"js:\nd = [];\nvar name = getParam(\"name\", \"\").replace(/#immersiveTheme#/, '')\nurl = \"https://m.weibo.cn/api/container/getIndex?containerid=231522type%3D1%26t%3D10%26q%3D%23\" + name + \"%23&isnewpage=1&luicode=10000011&lfid=100103type%3D1%26q%3D\" + name + \"&page_type=searchall&page=\" + MY_PAGE;\n\n//时间\neval(JSON.parse(fetch(\"hiker://page/time.html\")).rule)\n\n//获取列表函数\nfunction pu(d, mblog) {\n    date = new Date(mblog.created_at);\n    time = date.getTime();\n    time = '📅 ' + formatDate(time)\n    source = \"\";\n    try {\n        if (mblog.source) {\n            source = mblog.source;\n        }\n    } catch (e) {}\n    d.push({\n        title: mblog.user.screen_name + '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<small><small> ' + source + '</small></small>' + '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<small><small> ' + time + '</small></small>',\n        img: mblog.user.avatar_hd + \"@Referer=https://m.weibo.cn\",\n        col_type: \"avatar\",\n        url: \"hiker://page/detail.html?p=fypage\",\n        extra: {\n            id: String(mblog.user.id)\n        }\n    })\n    reg = new RegExp(\"#\" + name + \"#\", \"g\")\n\n//(mblog.page_info ? mblog.page_info.page_pic.url : mblog.thumbnail_pic ? mblog.thumbnail_pic : mblog.user.profile_image_url ? mblog.user.profile_image_url : x.user.profile_image_url) + \"@Referer=https://m.weibo.cn\",\n    d.push({\n        desc: '',\n        url: \"hiker://page/content.html\",\n        title: mblog.text.replace(/<.*?>/g, '').replace(reg, ''),\n        col_type: \"text_1\",\n        extra: {\n            id: String(mblog.id),\n            lineVisible: false,\n        }\n    })\n\n    try {\n        if (mblog.pics) {\n            for (var i in mblog.pics) {\n                d.push({\n                    url: (mblog.pics[i].url.replace('orj360', 'large') + \"@Referer=https://m.weibo.cn\"),\n                    img: (mblog.pics[i].url.replace('orj360', 'large') + \"@Referer=https://m.weibo.cn\"),\n                    col_type: \"pic_3_square\",\n                })\n            }\n        } else if (mblog.retweeted_status) {\n            if (mblog.retweeted_status.pics) {\n                for (var j in mblog.retweeted_status.pics) {\n                    d.push({\n                        url: (mblog.retweeted_status.pics[j].url.replace('orj360', 'large') + \"@Referer=https://m.weibo.cn\"),\n                        img: (mblog.retweeted_status.pics[j].url.replace('orj360', 'large') + \"@Referer=https://m.weibo.cn\"),\n                        col_type: \"pic_1_full\",\n                    })\n                }\n            }\n        }\n    } catch (e) { //log('图片输出错误！地址是'+text)\n    }\n    d.push({\n        col_type: \"big_blank_block\",\n    })\n    return d\n}\n\n\n\nJson = JSON.parse(fetch(url) || \"[]\");\nif (MY_PAGE == 1) {\n    start = Json.data.cardlistInfo\n    d.push({\n        title: start.cardlist_title,\n        img: start.portrait + \"@Referer=https://m.weibo.cn\",\n        desc: start.desc,\n        col_type: \"movie_1_vertical_pic_blur\",\n        \"url\": \"hiker://page/info.html#immersiveTheme#\",\n        extra: {\n            title: start.cardlist_title,\n            img: start.portrait + \"@Referer=https://m.weibo.cn\",\n            desc: start.desc\n        }\n    })\n}\nJ = Json.data.cards\nJ.forEach((x) => {\n    if (x.mblog) {\n        mblog = x.mblog;\n        d = pu(d, mblog)\n    }\n\n    if (x.card_group) {\n        x.card_group.forEach((j) => {\n            mblog = j.mblog\n            if (mblog) {\n                d = pu(d, mblog)\n            }\n        })\n    }\n})\n\nsetResult(d)"},{"col_type":"movie_3","name":"时间转换函数","path":"time.html","rule":"//时间转换函数\nfunction formatDate2(inputTime) {\n    var date = new Date(inputTime);\n    var y = date.getFullYear();\n    var m = date.getMonth() + 1;\n    m = m < 10 ? ('0' + m) : m;\n    var d = date.getDate();\n    d = d < 10 ? ('0' + d) : d;\n    return y +'-' + m + '-' + d;\n};\n\nfunction formatDate(now) {\n    var time = formatDate2(now)\n    var date1 = new Date(now)\n    var date2 = new Date()\n    var date3 = date2.getTime() - date1.getTime()\n    var days = Math.floor(date3 / (24 * 3600 * 1000))\n    var leave1 = date3 % (24 * 3600 * 1000) \n    var hours = Math.floor(leave1 / (3600 * 1000))\n    var leave2 = leave1 % (3600 * 1000)\n    var minutes = Math.floor(leave2 / (60 * 1000))\n    var leave3 = leave2 % (60 * 1000)\n    if (days < 1 && hours < 1) { return minutes + \"分前\" } else if (days < 1) { return hours + \"小时 \" + minutes + \"分前\" } else {\n        if (days < 7) {\n            return days + \"天 \" + hours + \"小时前 \"\n        } else { return time }\n    }\n}"},{"col_type":"movie_3","name":"博主详情","path":"info.html","rule":"js:\nt = MY_PARAMS;\nif (t.followers_count) {\n    d = [{\n        title: t.title,\n        img: t.cover+\"@Referer=https://m.weibo.cn\",\n        desc: t.reason + \"\\n\" + t.desc,\n        col_type: \"movie_1_vertical_pic_blur\",\n        extra: {\n            gradient: true\n        },\n        url: \"hiker://empty\"\n    }, {\n        title: t.title + \"&nbsp;&nbsp;&nbsp;粉丝：\" + t.followers_count,\n        img: t.avatar,\n        col_type: \"avatar\",\n        url: \"hiker://empty\"\n    }, {\n        title: t.reason + \"<br/>\" + t.desc,\n        col_type: \"rich_text\",\n        url: \"hiker://empty\"\n    }]\n} else {\n    d = [{\n        title:t. title,\n        img: t.img,\n        desc: t.desc,\n        col_type: \"movie_1_vertical_pic_blur\",\n        extra: {\n            gradient: true\n        },\n        url: \"hiker://empty\"\n    }, {\n        title: t.desc,\n        col_type: \"rich_text\",\n        url: \"hiker://empty\"\n    }]\n\n}\n\nsetResult(d)"}],"title":"微博订阅","author":"guaner&xxs","version":3,"type":"other","url":"hiker://empty?f=fyclass&p=fypage","col_type":"icon_round_4","class_name":"微博热搜&订阅博主&搜索微博&管理博主","class_url":"热搜&用户&搜索&管理","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:\nd = [];\nswitch (MY_URL.match(/f=(.*?)&/)[1]) {\n    case \"搜索\":\n        eval(JSON.parse(fetch(\"hiker://page/search.html\")).rule)\n        break\n    case \"用户\":\n        r = MY_PAGE == 1 ? readFile('weibo.txt') :\n            false;\n        Json = r ? JSON.parse(r) : [];\n        Json.forEach((x) => {\n            x.visible ? d.push(x) : null\n        });\n        d.forEach((x) => {\n            x.img = x.data.icon ? x.data.icon : x.data.img\n          \n        });\n        if (!d.length && MY_PAGE == 1) {\n            d.push({\n                title: \"暂无订阅博主，快去搜索订阅吧\",\n                col_type: \"text_center_1\",\n                url: \"toast://快去搜索吧\"\n            })\n        }\n        break\n    case \"管理\":\n        eval(JSON.parse(fetch(\"hiker://page/config.html\")).rule)\n        break\n    case \"热搜\":\n        eval(JSON.parse(fetch(\"hiker://page/Hot.html\")).rule)\n        break\n}\n\nsetResult(d)","searchFind":"","search_url":"","group":"①推荐","detail_col_type":"movie_1","detail_find_rule":"","sdetail_col_type":"movie_1","sdetail_find_rule":"","ua":"mobile","preRule":"fileExist('weibo.txt')?fileExist('weibo.txt'):saveFile(\"weibo.txt\",\"\");","pages":"[{\"col_type\":\"movie_1_vertical_pic\",\"name\":\"博主内容列表\",\"path\":\"detail.html\",\"rule\":\"js:\\nd = [];\\nid = MY_PARAMS.id; //前问desc获取\\nurl = \\\"https://m.weibo.cn/api/container/getIndex?containerid=107603\\\" + id + \\\"_-_WEIBO_SECOND_PROFILE_WEIBO&luicode=10000011&lfid=107603\\\" + id + \\\"_-_WEIBO_SECOND_PROFILE_WEIBO&page_type=03&page=\\\" + MY_PAGE\\neval(JSON.parse(fetch(\\\"hiker://page/time.html\\\")).rule)\\n\\nJson = JSON.parse(fetch(url));\\n//log(Json)\\nvar userName = getVar('userName', ''); //博主 名\\nvar userImg = getVar('userImg', ''); //博主头像\\n\\nif (MY_PAGE == 1) {\\n    if (Json.data.cards[0]) {\\n        t = Json.data.cards[0].mblog.user;\\n        setPageTitle(t.screen_name);\\n\\n        userName = t.screen_name;\\n        userImg = t.avatar_hd + \\\"@Referer=https://m.weibo.cn\\\";\\n        putVar('userName', t.screen_name);\\n        putVar('userImg', t.avatar_hd + \\\"@Referer=https://m.weibo.cn\\\")\\n\\n        d.push({\\n            title: t.screen_name + \\\"◎\\\" + (t.verified_reason ? t.verified_reason + \\\"◎\\\" + t.description : t.description),\\n            img: t.avatar_hd + \\\"@Referer=https://m.weibo.cn\\\",\\n            url: \\\"hiker://page/info.html#immersiveTheme#\\\",\\n            col_type: \\\"avatar\\\",\\n            extra: {\\n                title: t.screen_name,\\n                reason: t.verified_reason ? t.verified_reason : \\\"\\\",\\n                desc: t.description,\\n                followers_count: t.followers_count,\\n                cover: t.cover_image_phone,\\n                avatar: t.avatar_hd\\n            }\\n        })\\n    }\\n\\n    lurl = $(\\\"#noLoading#\\\").lazyRule((Json) => {\\n        clearVar(\\\"url\\\");\\n        r = readFile('weibo.txt');\\n        j = r ? JSON.parse(r) : [];\\n        t = Json.data.cards[0] ? Json.data.cards[0].mblog.user : null;\\n\\n        if (t) {\\n            flag = true;\\n            log(\\\"t.screen_name\\\" + t.screen_name)\\n            j.forEach(x => x.extra.id == t.id ? flag = false : null)\\n            if (flag) {\\n                j.push({\\n                    visible: true,\\n                    delete: false,\\n                    title: t.screen_name,\\n                    img: t.avatar_hd + \\\"@Referer=https://m.weibo.cn\\\",\\n                    url: \\\"hiker://page/detail.html?page=fypage\\\",\\n                    extra: {\\n                        id: String(t.id)\\n                    },\\n                    data: {\\n                        img: t.avatar_hd + \\\"@Referer=https://m.weibo.cn\\\"\\n                    }\\n                })\\n                saveFile('weibo.txt', JSON.stringify(j));\\n                back(true);\\n            } else {\\n\\n                back(true);\\n\\n            }\\n            return 'toast://已订阅该博主';\\n        }\\n    }, Json);\\n\\n    d.push({\\n        title: \\\"订阅博主\\\",\\n        col_type: \\\"text_center_1\\\",\\n        url: lurl\\n    })\\n\\n}\\n/**\\nvar regex = new RegExp(‘<img‘, ‘gi‘);\\ntxt = txt.replace(regex, ‘<img style=\\\"width: 100%;\\\"‘);\\n**/\\nvar message = '';\\nvar source = '';\\nvar created_at = '';\\n(Json.data.cards ? Json.data.cards : []).forEach(function(x) {\\n    mblog = x.mblog;\\n    if (Object.prototype.toString.call(mblog) !== '[object Object]') {\\n        return true;\\n    }\\n\\n    if (!('id' in mblog)) {\\n        return true;\\n    }\\n\\n    try {\\n        if (mblog.raw_text) {\\n            message = mblog.raw_text;\\n        } else {\\n            if (mblog.text) {\\n                message = mblog.text.replace(/<\\\\/*.*?>/g, '');\\n            }\\n        }\\n    } catch (e) {}\\n    try {\\n        if (mblog.source) {\\n            source = mblog.source;\\n        }\\n    } catch (e) {}\\n    try {\\n        if (mblog.created_at) {\\n            created_at = formatDate(mblog.created_at);\\n        }\\n    } catch (e) {}\\n    d.push({\\n        title: userName + '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<small><small> ' + source + '</small></small>' + '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<small><small> ' + created_at + '</small></small>',\\n        img: userImg,\\n        url: \\\"hiker://page/content.html\\\",\\n        col_type: \\\"avatar\\\",\\n        extra: {\\n            id: mblog.id\\n        }\\n    })\\n    d.push({\\n        desc: '',\\n        url: \\\"hiker://page/content.html\\\",\\n        title: message,\\n        col_type: \\\"rich_text\\\",\\n    })\\n\\n    try {\\n        if (mblog.retweeted_status) {\\n            d.push({\\n                col_type: \\\"line\\\"\\n            }, {\\n                title: \\\"““””<font color=\\\\\\\"#6495ED\\\\\\\">@\\\" + mblog.retweeted_status.user.screen_name + \\\"</font>\\\", //@xxx\\n                url: \\\"hiker://page/detail.html?p=fypage\\\",\\n                extra: {\\n                    id: String(mblog.retweeted_status.user.id),\\n                    lineVisible: false\\n                },\\n                col_type: \\\"text_1\\\"\\n            }, {\\n                title: mblog.retweeted_status.text ? (mblog.retweeted_status.text.replace(/<img\\\\/*.*?>/g, '').replace('href=\\\"', 'href=\\\"https://m.weibo.cn')) : '', //内容\\n                col_type: \\\"rich_text\\\"\\n            })\\n        }\\n    } catch (e) {\\n        log(e);\\n        log('user输出有问题')\\n    }\\n    //j = mblog.retweeted_status ? mblog.retweeted_status.pics : false\\n    try {\\n        if (mblog.pics) {\\n            for (var i in mblog.pics) {\\n                d.push({\\n                    url: (mblog.pics[i].url.replace('orj360', 'large') + \\\"@Referer=https://m.weibo.cn\\\"),\\n                    img: (mblog.pics[i].url.replace('orj360', 'large') + \\\"@Referer=https://m.weibo.cn\\\"),\\n                    col_type: \\\"pic_3_square\\\",\\n                })\\n            }\\n        } else if (mblog.retweeted_status) {\\n            if (mblog.retweeted_status.pics) {\\n                for (var j in mblog.retweeted_status.pics) {\\n                    d.push({\\n                        url: (mblog.retweeted_status.pics[j].url.replace('orj360', 'large') + \\\"@Referer=https://m.weibo.cn\\\"),\\n                        img: (mblog.retweeted_status.pics[j].url.replace('orj360', 'large') + \\\"@Referer=https://m.weibo.cn\\\"),\\n                        col_type: \\\"pic_3_square\\\",\\n                    })\\n                }\\n            }\\n        }\\n    } catch (e) { //log('图片输出错误！地址是'+text)\\n    }\\n    d.push({\\n        col_type: \\\"big_blank_block\\\",\\n    }, {\\n        col_type: \\\"big_blank_block\\\",\\n    }, {\\n        col_type: \\\"line_blank\\\",\\n    })\\n})\\nsetResult(d)\"},{\"col_type\":\"rich_text\",\"name\":\"正文\",\"path\":\"content.html\",\"rule\":\"js:\\nd = [];\\nsetPageTitle(\\\"微博正文\\\");\\nid = MY_PARAMS.id;\\nvar url = 'https://m.weibo.cn/detail/' + id\\nhtml = fetch(url);\\njson = eval(html.match(/var \\\\$render_data =[\\\\s\\\\S]+?\\\\]\\\\[0\\\\] \\\\|\\\\| \\\\{\\\\}\\\\;/)[0]);\\neval(JSON.parse(fetch(\\\"hiker://page/time.html\\\")).rule);\\nlet retweeted = $render_data.status.retweeted_status ? $render_data.status.retweeted_status : null; //转发内容\\nvar dynamic = $render_data.status ? $render_data.status.status_title : ''; //原创动态\\n//log('title0'+dynamic)\\nlet title1 = $render_data.status ? $render_data.status.text : '';\\n//log('title1'+title1)\\nlet dynamicForward = $render_data.status.retweeted_status ? $render_data.status.retweeted_status.text : ''; //原创转发 转发的人的动态\\n//log('dynamicForward'+dynamicForward)\\nlet forward = ''; //转发原创转发\\ntry {\\n    forward = $render_data.status.raw_text;\\n} catch (e) {}\\ndynamic = retweeted == null && title1 !== '' ? title1 : dynamic;\\n//log('title2'+dynamic)\\n//log('retweeted'+retweeted);\\n//log('forward'+forward);\\n\\ntitleColor = 'red';\\nvar userName = $render_data.status.user ? $render_data.status.user.screen_name : getVar('userName', ''); //博主 名\\nvar userImg = $render_data.status.user ? $render_data.status.user.profile_image_url : getVar('userImg', ''); //博主头像\\nvar userUrl = $render_data.status.user ? $render_data.status.user.profile_url : ''; //博主url\\nvar dynamicTime = $render_data.status.created_at ? formatDate($render_data.status.created_at) : ''; //发布时间\\nd.push({\\n    title: userName + '&nbsp;&nbsp;&nbsp;<small>' + dynamicTime + '</small>' + '&nbsp;&nbsp;&nbsp;<small><small><font color=\\\"red\\\"> [原文地址(＾＿－)]</font></small></small>',\\n    img: userImg,\\n    url: url,\\n    col_type: \\\"avatar\\\"\\n})\\n\\n\\nfunction addImgList($) {\\n    let img = \\\"\\\";\\n    let imgs = [];\\n    pics = $.pics ? $.pics : [];\\n    i = [];\\n    pics.forEach(function(x) {\\n        // p = x.url.match(/gif$/) ? x.url : x.large.url;\\n        // pa = x.url.match(/gif$/) ? \\\"<a href=\\\\\\\"\\\" + x.large.url + \\\"\\\\\\\">原gif图链接</a>\\\" : \\\"\\\";\\n        //  img += pa + \\\"<img src=\\\\\\\"\\\" + p + \\\"\\\\\\\">\\\"\\n        img += (x.url.match(/gif$/) ? x.url : x.large.url) + \\\"@Referer=https://m.weibo.cn\\\";\\n        imgs.push((x.url.match(/gif$/) ? x.url : x.large.url) + \\\"@Referer=https://m.weibo.cn\\\");\\n        i.push({\\n            url: imgs.join(\\\"&&\\\"),\\n            img: (x.url.match(/gif$/) ? x.url : x.large.url) + \\\"@Referer=https://m.weibo.cn\\\",\\n            col_type: \\\"pic_1_full\\\",\\n        })\\n    })\\n\\n    return i\\n}\\n\\nfunction addVideoList($) {\\n    var video = \\\"\\\";\\n    videos = $.page_info ? $.page_info : false\\n    if (videos.urls) {\\n        vpic = videos.page_pic.url\\n        if (videos.urls.mp4_720p_mp4) {\\n            v = videos.urls.mp4_720p_mp4\\n        } else if (videos.urls.mp4_hd_mp4) {\\n            v = videos.urls.mp4_hd_mp4\\n        } else if (media_info.stream_url_hd) {\\n            v = videos.media_info.stream_url_hd\\n        } else {\\n            v = videos.media_info.stream_url\\n        }\\n        video = \\\"<a href=\\\\\\\"\\\" + v + \\\"\\\\\\\">视频链接</a><img src=\\\\\\\"\\\" + vpic + \\\"\\\\\\\">\\\"\\n\\n    }\\n    video = video.replace(/<span class=\\\"url-icon\\\"><img alt=(.*?) src=.*?\\\\/><\\\\/span>/g, '$1')\\n        .replace(/data-url=\\\"(.*?)\\\"\\\\s*href=\\\".*?\\\"/g, 'href=\\\"$1\\\"')\\n        .replace(/<span class='url-icon'><img.*?1rem' .*?default.*?><\\\\/span>/g, '')\\n        .replace(/href=[\\\"'](\\\\/.*?)['\\\"]/g, 'href=\\\"https://m.weibo.cn$1\\\"')\\n    return video;\\n}\\n//处理原文\\nvideo = addVideoList($render_data.status);\\nd.push({\\n    title: (forward && retweeted ? forward : dynamic).replace(/<img\\\\/*.*?>/g, '') + (video ? video : ''), //内容\\n    vol_type: 'rich_text',\\n})\\n\\nd = d.concat(addImgList($render_data.status))\\n\\n//处理转发\\nif (retweeted) {\\n    user = retweeted.user;\\n    video = addVideoList(retweeted);\\n    d.push({\\n        col_type: \\\"line\\\"\\n    }, {\\n        title: \\\"““””<font color=\\\\\\\"#6495ED\\\\\\\">@\\\" + user.screen_name + \\\"</font>\\\", //@xxx\\n        url: \\\"hiker://page/detail.html?p=fypage\\\",\\n        extra: {\\n            id: String(user.id),\\n            lineVisible: false\\n        },\\n        col_type: \\\"text_1\\\"\\n    }, {\\n        title: (dynamicForward ? dynamicForward.replace(/<img\\\\/*.*?>/g, '').replace('href=\\\"', 'href=\\\"https://m.weibo.cn') : '') + (video ? video : ''), //内容\\n        col_type: \\\"rich_text\\\"\\n    })\\n    d = d.concat(addImgList(retweeted))\\n\\n    d.push({\\n        col_type: \\\"text_center_1\\\",\\n        img: '',\\n        title: '““””<small><font color=' + titleColor + '>' + '原文' + '</font></small>',\\n        url: \\\"hiker://page/content.html\\\",\\n        extra: {\\n            id: String(retweeted.id),\\n            lineVisible: false\\n        },\\n    })\\n}\\nd.push({\\n    col_type: \\\"big_blank_block\\\",\\n}, {\\n    col_type: \\\"big_blank_block\\\",\\n}, {\\n    col_type: \\\"line_blank\\\",\\n})\\n\\nlet commentUrl = \\\"https://m.weibo.cn/comments/hotflow?id=\\\" + id + \\\"&mid=\\\" + id + \\\"&max_id_type=0\\\";\\ncommentHtml = fetch(commentUrl);\\nif (commentHtml) {\\n    try {\\n        Json = JSON.parse(commentHtml);\\n        (Json.data.data ? Json.data.data : []).forEach(function(item) {\\n            source = item.source;\\n            text = item.text;\\n            id = item.id;\\n            let created_at = formatDate(item.created_at);\\n            userId = item.user.id;\\n            userName = item.user.screen_name;\\n            userImg = item.user.profile_image_url;\\n\\n            d.push({\\n                title: userName,\\n                img: userImg,\\n                col_type: \\\"avatar\\\",\\n                url: 'hiker://page/detail.html?page=fypage',\\n                extra: {\\n                    id: String(userId),\\n                },\\n            }, {\\n                title: \\\"<small>\\\" + text + '<br/><font color=\\\"#808080\\\">' + created_at + '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;' + source + \\\"</font></small>\\\", //内容\\n                col_type: \\\"rich_text\\\"\\n            })\\n        })\\n    } catch (e) {}\\n}\\nsetResult(d)\"},{\"col_type\":\"movie_2\",\"name\":\"搜索博主\",\"path\":\"search.html\",\"rule\":\"addListener('onClose', $.toString(() => {\\n    clearMyVar(\\\"search\\\")\\n}))\\n\\n//搜索用户列表开始\\nfunction list(html, d) {\\n    let Json = JSON.parse(html)\\n    let cards = Json.data.cards[1] ? Json.data.cards[1].card_group : Json.data.cards[0] ? Json.data.cards[0].card_group : [];\\n    cards.forEach(\\n        function(t) {\\n            d.push({\\n                title: t.user.screen_name,\\n                img: t.user.avatar_hd + \\\"@Referer=https://m.weibo.cn\\\",\\n                desc: t.desc1 + \\\"  \\\" + t.desc2,\\n                url: \\\"hiker://page/detail.html?page=fypage\\\",\\n                extra: {\\n                    id: String(t.user.id)\\n                },\\n                col_type: \\\"movie_1\\\"\\n            })\\n        })\\n    return d;\\n}\\n//搜索用户列表结束\\n\\n//时间函数\\neval(JSON.parse(fetch(\\\"hiker://page/time.html\\\")).rule)\\n\\n\\n//搜索内容列表开始\\nfunction pu(d, $, col) {\\n    date = new Date($.created_at);\\n    time = date.getTime();\\n    time = '📅 ' + formatDate(time)\\n    d.push({\\n        title: $.user.screen_name,\\n        img: $.user.avatar_hd + \\\"@Referer=https://m.weibo.cn\\\",\\n        col_type: \\\"avatar\\\",\\n        url: \\\"hiker://page/detail.html?p=fypage\\\",\\n        extra: {\\n            id: String($.user.id)\\n        }\\n    })\\n    j = $.retweeted_status ? $.retweeted_status.pics : false\\n    d.push({\\n        title: $.text.replace(/<.*?>/g, ''),\\n        desc: time,\\n        img: ($.pics ? $.pics[0].url : j ? $.retweeted_status.pics[0].url : $.user.profile_image_url ? $.user.profile_image_url : x.user.profile_image_url) + \\\"@Referer=https://m.weibo.cn\\\",\\n        url: \\\"hiker://page/content.html\\\",\\n        extra: {\\n            id: String($.id)\\n        },\\n        col_type: col\\n    })\\n    return d\\n}\\n//搜索内容列表结束\\n\\n//搜索内容列表开始\\nfunction getList(url, d, col) {\\n    html = fetch(url);\\n    Json = JSON.parse(html || \\\"[]\\\");\\n    J = Json.data.cards\\n    J.forEach((x) => {\\n        if (x.mblog) {\\n            mblog = x.mblog;\\n            d = pu(d, mblog, col)\\n        }\\n        if (x.card_group) {\\n            x.card_group.forEach((j) => {\\n                mblog = j.mblog\\n                if (mblog) {\\n                    d = pu(d, mblog, col)\\n                }\\n                if (j.left_element) {\\n                    mblog = j.left_element.mblog;\\n                    if (mblog) {\\n                        d = pu(d, mblog, col)\\n                    } else {\\n                        d = pu(d, j.right_element.mblog, col)\\n                    }\\n                }\\n            })\\n        }\\n    })\\n    return d\\n}\\n//结束\\n\\n\\n\\n//搜索选择开始\\nmode = getMyVar(\\\"mode\\\", \\\"👤 用户\\\")\\nif (MY_PAGE == 1) {\\n    d.push({\\n        url: \\\"'toast://搜索成功';refreshPage()\\\",\\n        col_type: 'input',\\n        title: '搜索',\\n        desc: \\\"搜索\\\",\\n        extra: {\\n            onChange: \\\"putMyVar('my-search',input)\\\"\\n        }\\n    })\\n\\n    slist = [\\\"👤 用户\\\", \\\"📝 综合\\\", \\\"🎥 视频\\\", \\\"🖼 图片\\\", \\\"#️⃣ 话题\\\"]\\n    slist.forEach((x) => {\\n        clearVar(\\\"search\\\")\\n        d.push({\\n            col_type: \\\"scroll_button\\\",\\n            title: x == mode ? '““””' + x.bold().fontcolor('#12b668') : x,\\n            url: $(\\\"#noLoading#\\\").lazyRule((x) => {\\n                putMyVar(\\\"mode\\\", x);\\n                refreshPage(false);\\n                return \\\"hiker://empty\\\"\\n            }, x)\\n        })\\n    })\\n}\\n//搜索选择结束\\n\\n\\nlet search = getMyVar(\\\"my-search\\\");\\nif (search) {\\n    putMyVar(\\\"search\\\", search)\\n}\\nsearchn = getMyVar(\\\"search\\\")\\n\\n\\n\\n//判断搜索内容\\nswitch (mode) {\\n    case \\\"👤 用户\\\":\\n        url = \\\"https://m.weibo.cn/api/container/getIndex?containerid=100103type%3D3%26q%3D\\\" + searchn + \\\"%26t%3D0&page_type=searchall&page=\\\" + MY_PAGE;\\n        if (searchn) {\\n            html = fetch(url);\\n            list(html, d);\\n        }\\n        break\\n    case \\\"🎥 视频\\\":\\n        url = \\\"https://m.weibo.cn/api/container/getIndex?containerid=100103type%3D64%26q%3D\\\" + searchn + \\\"%26t%3D0&page_type=searchall&page=\\\" + MY_PAGE\\n        if (searchn) {\\n            getList(url, d, \\\"movie_1_vertical_pic\\\")\\n        }\\n        break\\n    case \\\"🖼 图片\\\":\\n        url = \\\"https://m.weibo.cn/api/container/getIndex?containerid=100103type%3D63%26q%3D\\\" + searchn + \\\"%26t%3D0&page_type=searchall&page=\\\" + MY_PAGE\\n        if (searchn) {\\n            getList(url, d, \\\"pic_1\\\")\\n        }\\n        break\\n    case \\\"📝 综合\\\":\\n        url = \\\"https://m.weibo.cn/api/container/getIndex?containerid=100103type%3D1%26q%3D\\\" + searchn + \\\"%26t%3D0&page_type=searchall&page=\\\" + MY_PAGE\\n        if (searchn) {\\n            getList(url, d, \\\"movie_1_vertical_pic\\\")\\n        }\\n        break\\n    case \\\"#️⃣ 话题\\\":\\n        url = \\\"https://m.weibo.cn/api/container/getIndex?containerid=100103type%3D38%26q%3D\\\" + searchn + \\\"%26t%3D0&page_type=searchall&page=\\\" + MY_PAGE\\n        if (searchn) {\\n            html = fetch(url);\\n            Json = JSON.parse(html || \\\"[]\\\")\\n            J = Json.data.cards[0].card_group ? Json.data.cards[0].card_group : [];\\n            J.forEach(x => d.push({\\n                title: x.title_sub,\\n                url: \\\"hiker://page/huati.html?p=fypage&name=\\\" + x.title_sub.replace(/^#|#$/g, '') + \\\"#immersiveTheme#\\\",\\n                img: x.pic + \\\"@Referer=https://m.weibo.cn\\\",\\n                col_type: \\\"movie_1_left_pic\\\",\\n                desc: x.desc2\\n            }))\\n        }\\n        break\\n\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"管理博主\",\"path\":\"config.html\",\"rule\":\"el = [];\\n\\nel.push( {\\n    title: '““””<font color=\\\"#666666\\\"><small>特别鸣谢，小程序提供者：\\\\n追剧君、 微光、 仰望星空、 道阻且右、 Moonquakes、 Rx、 FairyAlo、 墨非白、 发粪涂墙、 团子、 Zruiry、 Hood、 @LoyDgIk、 ivnyoov、 Killer、 子丑寅卯、 \\\\n嗨又是我、 147258、 Hi、 枫林雨殇、 dy2020、小棉袄🌞、永远の明日 ',\\n    col_type: \\\"text_center_1\\\",\\nextra: {\\n        lineVisible: false\\n    },\\nurl:\\\"toast://特别鸣谢\\\"\\n})\\n\\neditMode = getMyVar('editMode', '显示/隐藏')\\nlet config = ['显示/隐藏', '重新排序', '删除博主','更改头像', '更改名称']\\n\\nconfig.forEach((v) => {\\n    el.push({\\n        title: v == editMode ? '““””' + v.bold().fontcolor('#12b668') : v,\\n        url: v == editMode ? 'hiker://empty' : $('#noLoading#').lazyRule((v) => {\\n            putMyVar('editMode', v)\\n            refreshPage(false)\\n            return 'hiker://empty'\\n        }, v),\\n        col_type: 'scroll_button'\\n    })\\n})\\n\\nJson = JSON.parse(readFile('weibo.txt') || '[]');\\nif(!Json.length){\\nel.push({\\ntitle:\\\"暂无博主，快去搜索订阅吧\\\",\\ncol_type:\\\"text_center_1\\\",\\nurl:\\\"toast://快去搜索吧\\\"\\n})\\n}\\n\\n\\nif (editMode == \\\"删除博主\\\") {\\n   if(Json.length){\\n    el.push({\\n        title: \\\"确认删除\\\",\\n        col_type: \\\"text_center_1\\\",\\n        url: $('#noLoading#').lazyRule((Json) => {\\n            let rules = [];\\n            Json.forEach((x) => {\\n                !x.delete ? rules.push(x) : null\\n            })\\n            saveFile('weibo.txt', JSON.stringify(rules))\\n            refreshPage(false)\\n            return 'toast://删除成功'\\n        }, Json)\\n    })\\n}\\n}\\nJSON.parse(readFile('weibo.txt') || '[]').forEach((v, i) => {\\n    let d = {\\n        title: v.title,\\n        img: v.data.icon ? v.data.icon : v.data.img\\n    }\\n    switch (editMode) {\\n        case '显示/隐藏':\\n            d.title = (v.visible ? '🟢  ' : '🔴  ') + d.title\\n            d.url = $('#noLoading#').lazyRule((i) => {\\n                let rules = JSON.parse(readFile('weibo.txt') || '[]')\\n                rules[i].visible = !rules[i].visible\\n                saveFile('weibo.txt', JSON.stringify(rules))\\n                refreshPage(false)\\n                return 'hiker://empty'\\n            }, i)\\n            break\\n        case '删除博主':\\n            d.title = (v.delete ? '❌  ' : '') + d.title\\n            d.url = $('#noLoading#').lazyRule((i) => {\\n                let rules = JSON.parse(readFile('weibo.txt') || '[]')\\n                rules[i].delete = !rules[i].delete\\n                saveFile('weibo.txt', JSON.stringify(rules))\\n                refreshPage(false)\\n                return 'hiker://empty'\\n            }, i)\\n            break\\n        case '重新排序':\\n            let sortFlag = parseInt(getMyVar('sortFlag', '-1'))\\n            d.title = (sortFlag == i ? '🔃  ' : '') + d.title\\n            if (sortFlag == -1)\\n                d.url = $('#noLoading#').lazyRule((i) => {\\n                    putMyVar('sortFlag', i.toString())\\n                    refreshPage(false)\\n                    return 'toast://选择要移动到的位置'\\n                }, i)\\n            else\\n                d.url = $('#noLoading#').lazyRule((oldIndex, newIndex) => {\\n                    let rules = JSON.parse(readFile('weibo.txt') || '[]')\\n                    rules.splice(newIndex, 0, rules.splice(oldIndex, 1)[0])\\n                    saveFile('weibo.txt', JSON.stringify(rules))\\n                    putMyVar('sortFlag', '-1')\\n                    refreshPage(false)\\n                    return 'hiker://empty'\\n                }, sortFlag, i)\\n            break\\n        case '更改头像':\\n            d.url = $(v.data.icon || '', '输入新图标地址或颜色代码：').input((i) => {\\n                let rules = JSON.parse(readFile('weibo.txt') || '[]')\\n                if (input)\\n                    rules[i].data.icon = input\\n                else\\n                    delete rules[i].data.icon\\n                saveFile('weibo.txt', JSON.stringify(rules))\\n                refreshPage(false)\\n                return 'hiker://empty'\\n            }, i)\\n            break\\n        case '更改名称':\\n            d.url = $(v.title || '', '输入新名称：').input((i) => {\\n                let rules = JSON.parse(readFile('weibo.txt') || '[]')\\n                if (input)\\n                    rules[i].title = input\\n                else\\n                    delete rules[i].title\\n                saveFile('weibo.txt', JSON.stringify(rules))\\n                refreshPage(false)\\n                return 'hiker://empty'\\n            }, i)\\n            break\\n    }\\n    el.push(d)\\n})\\n\\nsetResult(el)\"},{\"col_type\":\"movie_3\",\"name\":\"微博热搜\",\"path\":\"Hot.html\",\"rule\":\"d = []\\nif(MY_PAGE==1){\\nurl = \\\"https://m.weibo.cn/api/container/getIndex?containerid=106003type%3D25%26t%3D3%26disable_hot%3D1%26filter_type%3Drealtimehot&title=微博热搜&extparam=seat%3D1%26pos%3D0_0%26dgr%3D0%26mi_cid%3D100103%26cate%3D10103%26filter_type%3Drealtimehot%26c_type%3D30\\\";\\nJson = JSON.parse(fetch(url) || \\\"[]\\\")\\nJson.data.cards[0].card_group.forEach((x) => {\\n    icon=/fei/.test(x.icon)?\\\"✴️沸\\\":/new/.test(x.icon)?\\\"🆕新\\\":/hot/.test(x.icon)?\\\"🔥热\\\":/jian/.test(x.icon)?\\\"✅荐\\\":\\\"\\\"\\n\\n    d.push({\\n        title: x.desc +\\\" \\\"+icon,\\n        img: x.pic,\\n        col_type: \\\"avatar\\\",\\n        url:\\\"hiker://page/huati.html?p=fypage&name=\\\"+x.desc+\\\"#immersiveTheme#\\\"\\n\\n    })\\n})\\n}\\nsetResult(d)\"},{\"col_type\":\"movie_1_left_pic\",\"name\":\"话题列表\",\"path\":\"huati.html\",\"rule\":\"js:\\nd = [];\\nvar name = getParam(\\\"name\\\", \\\"\\\").replace(/#immersiveTheme#/, '')\\nurl = \\\"https://m.weibo.cn/api/container/getIndex?containerid=231522type%3D1%26t%3D10%26q%3D%23\\\" + name + \\\"%23&isnewpage=1&luicode=10000011&lfid=100103type%3D1%26q%3D\\\" + name + \\\"&page_type=searchall&page=\\\" + MY_PAGE;\\n\\n//时间\\neval(JSON.parse(fetch(\\\"hiker://page/time.html\\\")).rule)\\n\\n//获取列表函数\\nfunction pu(d, mblog) {\\n    date = new Date(mblog.created_at);\\n    time = date.getTime();\\n    time = '📅 ' + formatDate(time)\\n    source = \\\"\\\";\\n    try {\\n        if (mblog.source) {\\n            source = mblog.source;\\n        }\\n    } catch (e) {}\\n    d.push({\\n        title: mblog.user.screen_name + '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<small><small> ' + source + '</small></small>' + '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<small><small> ' + time + '</small></small>',\\n        img: mblog.user.avatar_hd + \\\"@Referer=https://m.weibo.cn\\\",\\n        col_type: \\\"avatar\\\",\\n        url: \\\"hiker://page/detail.html?p=fypage\\\",\\n        extra: {\\n            id: String(mblog.user.id)\\n        }\\n    })\\n    reg = new RegExp(\\\"#\\\" + name + \\\"#\\\", \\\"g\\\")\\n\\n//(mblog.page_info ? mblog.page_info.page_pic.url : mblog.thumbnail_pic ? mblog.thumbnail_pic : mblog.user.profile_image_url ? mblog.user.profile_image_url : x.user.profile_image_url) + \\\"@Referer=https://m.weibo.cn\\\",\\n    d.push({\\n        desc: '',\\n        url: \\\"hiker://page/content.html\\\",\\n        title: mblog.text.replace(/<.*?>/g, '').replace(reg, ''),\\n        col_type: \\\"text_1\\\",\\n        extra: {\\n            id: String(mblog.id),\\n            lineVisible: false,\\n        }\\n    })\\n\\n    try {\\n        if (mblog.pics) {\\n            for (var i in mblog.pics) {\\n                d.push({\\n                    url: (mblog.pics[i].url.replace('orj360', 'large') + \\\"@Referer=https://m.weibo.cn\\\"),\\n                    img: (mblog.pics[i].url.replace('orj360', 'large') + \\\"@Referer=https://m.weibo.cn\\\"),\\n                    col_type: \\\"pic_3_square\\\",\\n                })\\n            }\\n        } else if (mblog.retweeted_status) {\\n            if (mblog.retweeted_status.pics) {\\n                for (var j in mblog.retweeted_status.pics) {\\n                    d.push({\\n                        url: (mblog.retweeted_status.pics[j].url.replace('orj360', 'large') + \\\"@Referer=https://m.weibo.cn\\\"),\\n                        img: (mblog.retweeted_status.pics[j].url.replace('orj360', 'large') + \\\"@Referer=https://m.weibo.cn\\\"),\\n                        col_type: \\\"pic_1_full\\\",\\n                    })\\n                }\\n            }\\n        }\\n    } catch (e) { //log('图片输出错误！地址是'+text)\\n    }\\n    d.push({\\n        col_type: \\\"big_blank_block\\\",\\n    })\\n    return d\\n}\\n\\n\\n\\nJson = JSON.parse(fetch(url) || \\\"[]\\\");\\nif (MY_PAGE == 1) {\\n    start = Json.data.cardlistInfo\\n    d.push({\\n        title: start.cardlist_title,\\n        img: start.portrait + \\\"@Referer=https://m.weibo.cn\\\",\\n        desc: start.desc,\\n        col_type: \\\"movie_1_vertical_pic_blur\\\",\\n        \\\"url\\\": \\\"hiker://page/info.html#immersiveTheme#\\\",\\n        extra: {\\n            title: start.cardlist_title,\\n            img: start.portrait + \\\"@Referer=https://m.weibo.cn\\\",\\n            desc: start.desc\\n        }\\n    })\\n}\\nJ = Json.data.cards\\nJ.forEach((x) => {\\n    if (x.mblog) {\\n        mblog = x.mblog;\\n        d = pu(d, mblog)\\n    }\\n\\n    if (x.card_group) {\\n        x.card_group.forEach((j) => {\\n            mblog = j.mblog\\n            if (mblog) {\\n                d = pu(d, mblog)\\n            }\\n        })\\n    }\\n})\\n\\nsetResult(d)\"},{\"col_type\":\"movie_3\",\"name\":\"时间转换函数\",\"path\":\"time.html\",\"rule\":\"//时间转换函数\\nfunction formatDate2(inputTime) {\\n    var date = new Date(inputTime);\\n    var y = date.getFullYear();\\n    var m = date.getMonth() + 1;\\n    m = m < 10 ? ('0' + m) : m;\\n    var d = date.getDate();\\n    d = d < 10 ? ('0' + d) : d;\\n    return y +'-' + m + '-' + d;\\n};\\n\\nfunction formatDate(now) {\\n    var time = formatDate2(now)\\n    var date1 = new Date(now)\\n    var date2 = new Date()\\n    var date3 = date2.getTime() - date1.getTime()\\n    var days = Math.floor(date3 / (24 * 3600 * 1000))\\n    var leave1 = date3 % (24 * 3600 * 1000) \\n    var hours = Math.floor(leave1 / (3600 * 1000))\\n    var leave2 = leave1 % (3600 * 1000)\\n    var minutes = Math.floor(leave2 / (60 * 1000))\\n    var leave3 = leave2 % (60 * 1000)\\n    if (days < 1 && hours < 1) { return minutes + \\\"分前\\\" } else if (days < 1) { return hours + \\\"小时 \\\" + minutes + \\\"分前\\\" } else {\\n        if (days < 7) {\\n            return days + \\\"天 \\\" + hours + \\\"小时前 \\\"\\n        } else { return time }\\n    }\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"博主详情\",\"path\":\"info.html\",\"rule\":\"js:\\nt = MY_PARAMS;\\nif (t.followers_count) {\\n    d = [{\\n        title: t.title,\\n        img: t.cover+\\\"@Referer=https://m.weibo.cn\\\",\\n        desc: t.reason + \\\"\\\\n\\\" + t.desc,\\n        col_type: \\\"movie_1_vertical_pic_blur\\\",\\n        extra: {\\n            gradient: true\\n        },\\n        url: \\\"hiker://empty\\\"\\n    }, {\\n        title: t.title + \\\"&nbsp;&nbsp;&nbsp;粉丝：\\\" + t.followers_count,\\n        img: t.avatar,\\n        col_type: \\\"avatar\\\",\\n        url: \\\"hiker://empty\\\"\\n    }, {\\n        title: t.reason + \\\"<br/>\\\" + t.desc,\\n        col_type: \\\"rich_text\\\",\\n        url: \\\"hiker://empty\\\"\\n    }]\\n} else {\\n    d = [{\\n        title:t. title,\\n        img: t.img,\\n        desc: t.desc,\\n        col_type: \\\"movie_1_vertical_pic_blur\\\",\\n        extra: {\\n            gradient: true\\n        },\\n        url: \\\"hiker://empty\\\"\\n    }, {\\n        title: t.desc,\\n        col_type: \\\"rich_text\\\",\\n        url: \\\"hiker://empty\\\"\\n    }]\\n\\n}\\n\\nsetResult(d)\"}]","proxy":"","icon":"https://api.xinac.net/icon/?url=https://m.weibo.cn/"},{"last_chapter_rule":"","pageList":[{"col_type":"icon_2","name":"主播设置","path":"config.html","rule":"el = [];\n\nel.push( {\n    title: '““””<font color=\"#666666\"><small>特别鸣谢，小程序提供者：\\n追剧君、 微光、 仰望星空、 道阻且右、 Moonquakes、 Rx、 FairyAlo、 墨非白、 发粪涂墙、 团子、 Zruiry、 Hood、 @LoyDgIk、 ivnyoov、 Killer、 子丑寅卯、 \\n嗨又是我、 147258、 Hi、 枫林雨殇、 dy2020、小棉袄🌞、永远の明日 ',\n    col_type: \"text_center_1\",\nextra: {\n        lineVisible: false\n    },\nurl:\"toast://特别鸣谢\"\n})\n\neditMode = getMyVar('editMode', '显示/隐藏')\nlet config = ['显示/隐藏', '重新排序', '删除博主','更改头像', '更改名称']\n\nconfig.forEach((v) => {\n    el.push({\n        title: v == editMode ? '““””' + v.bold().fontcolor('#12b668') : v,\n        url: v == editMode ? 'hiker://empty' : $('#noLoading#').lazyRule((v) => {\n            putMyVar('editMode', v)\n            refreshPage(false)\n            return 'hiker://empty'\n        }, v),\n        col_type: 'scroll_button'\n    })\n})\n\nJson = JSON.parse(readFile('qingting.txt') || '[]');\nif(!Json.length){\nel.push({\ntitle:\"暂无博主，快去搜索订阅吧\",\ncol_type:\"text_center_1\",\nurl:\"toast://快去搜索吧\"\n})\n}\n\n\nif (editMode == \"删除博主\") {\n   if(Json.length){\n    el.push({\n        title: \"确认删除\",\n        col_type: \"text_center_1\",\n        url: $('#noLoading#').lazyRule((Json) => {\n            let rules = [];\n            Json.forEach((x) => {\n                !x.delete ? rules.push(x) : null\n            })\n            saveFile('qingting.txt', JSON.stringify(rules))\n            refreshPage(false)\n            return 'toast://删除成功'\n        }, Json)\n    })\n}\n}\nJSON.parse(readFile('qingting.txt') || '[]').forEach((v, i) => {\n    let d = {\n        title: v.title,\n        img: v.img\n    }\n    switch (editMode) {\n        case '显示/隐藏':\n            d.title = (v.visible ? '🟢  ' : '🔴  ') + d.title\n            d.url = $('#noLoading#').lazyRule((i) => {\n                let rules = JSON.parse(readFile('qingting.txt') || '[]')\n                rules[i].visible = !rules[i].visible\n                saveFile('qingting.txt', JSON.stringify(rules))\n                refreshPage(false)\n                return 'hiker://empty'\n            }, i)\n            break\n        case '删除博主':\n            d.title = (v.delete ? '❌  ' : '') + d.title\n            d.url = $('#noLoading#').lazyRule((i) => {\n                let rules = JSON.parse(readFile('qingting.txt') || '[]')\n                rules[i].delete = !rules[i].delete\n                saveFile('qingting.txt', JSON.stringify(rules))\n                refreshPage(false)\n                return 'hiker://empty'\n            }, i)\n            break\n        case '重新排序':\n            let sortFlag = parseInt(getMyVar('sortFlag', '-1'))\n            d.title = (sortFlag == i ? '🔃  ' : '') + d.title\n            if (sortFlag == -1)\n                d.url = $('#noLoading#').lazyRule((i) => {\n                    putMyVar('sortFlag', i.toString())\n                    refreshPage(false)\n                    return 'toast://选择要移动到的位置'\n                }, i)\n            else\n                d.url = $('#noLoading#').lazyRule((oldIndex, newIndex) => {\n                    let rules = JSON.parse(readFile('qingting.txt') || '[]')\n                    rules.splice(newIndex, 0, rules.splice(oldIndex, 1)[0])\n                    saveFile('qingting.txt', JSON.stringify(rules))\n                    putMyVar('sortFlag', '-1')\n                    refreshPage(false)\n                    return 'hiker://empty'\n                }, sortFlag, i)\n            break\n        case '更改头像':\n            d.url = $(v.img || '', '输入新图标地址或颜色代码：').input((i) => {\n                let rules = JSON.parse(readFile('qingting.txt') || '[]')\n                if (input)\n                    rules[i].img = input\n                else\n                    delete rules[i].img\n                saveFile('qingting.txt', JSON.stringify(rules))\n                refreshPage(false)\n                return 'hiker://empty'\n            }, i)\n            break\n        case '更改名称':\n            d.url = $(v.title || '', '输入新名称：').input((i) => {\n                let rules = JSON.parse(readFile('qingting.txt') || '[]')\n                if (input)\n                    rules[i].title = input\n                else\n                    delete rules[i].title\n                saveFile('qingting.txt', JSON.stringify(rules))\n                refreshPage(false)\n                return 'hiker://empty'\n            }, i)\n            break\n    }\n    el.push(d)\n})\n\nsetResult(el)"},{"name":"时间转换函数","path":"time.html","rule":"//时间转换函数\nfunction formatDate2(inputTime) {\n    var date = new Date(inputTime);\n    var y = date.getFullYear();\n    var m = date.getMonth() + 1;\n    m = m < 10 ? ('0' + m) : m;\n    var d = date.getDate();\n    d = d < 10 ? ('0' + d) : d;\n    return y +'-' + m + '-' + d;\n};\n\nfunction formatDate(now) {\n    var time = formatDate2(now)\n    var date1 = new Date(now)\n    var date2 = new Date()\n    var date3 = date2.getTime() - date1.getTime()\n    var days = Math.floor(date3 / (24 * 3600 * 1000))\n    var leave1 = date3 % (24 * 3600 * 1000) \n    var hours = Math.floor(leave1 / (3600 * 1000))\n    var leave2 = leave1 % (3600 * 1000)\n    var minutes = Math.floor(leave2 / (60 * 1000))\n    var leave3 = leave2 % (60 * 1000)\n    if (days < 1 && hours < 1) { return minutes + \"分前\" } else if (days < 1) { return hours + \"小时 \" + minutes + \"分前\" } else {\n        if (days < 7) {\n            return days + \"天 \" + hours + \"小时前 \"\n        } else { return time }\n    }\n}\n\n\nfunction timestampToTime(timestamp) {\n        var date = new Date(timestamp);//时间戳为10位需*1000，时间戳为13位的话不需乘1000\n        Y = date.getFullYear() + '/';\n        M = (date.getMonth()+1 < 10 ? '0'+(date.getMonth()+1) : date.getMonth()+1) + '/';\n        D = date.getDate() + ' ';\n        h = date.getHours() + ':';\n        m = date.getMinutes() + ':';\n        s = date.getSeconds();\n        return m+s;\n}"},{"col_type":"movie_2","name":"搜索","path":"search.html","rule":"addListener('onClose', $.toString(() => {\n        clearMyVar(\"search\")\n    }))\n//时间函数\neval(JSON.parse(fetch(\"hiker://page/time.html\")).rule)\n//剧集\nfunction searchChannels(url, d) {\n    html = fetch(url, {\n            headers: {\n                \"User-Agent\": PC_UA\n            }\n        });\n    let Json = JSON.parse(html); //专辑列表对象\n    if (Json.success == true) {\n        dramaList = Json.info.Datas;\n        dramaList.forEach(list => {\n            d.push({\n                title: list.name + \"更新至\" + list.newest,\n                url: \"hiker://page/channels.html?page=fypage\",\n                img: list.cover,\n                desc: '0',\n                extra: {\n                    drama_id: list.id,\n                    abstract: list.abstract,\n                    view_count: list.view_count,\n                    type_name: list.type_name,\n                    checked: list.checked,\n                },\n                col_type: \"card_pic_2\"\n            });\n        })\n    }\n    return d;\n}\n\n//音乐\nfunction searchSounds(url, d) {\n    html = fetch(url, {\n            headers: {\n                \"User-Agent\": PC_UA\n            }\n        });\n    let Json = JSON.parse(html); //专辑列表对象\n    if (Json.success == true) {\n        soundList = Json.info.Datas;\n        soundList.forEach(list => {\n    d.push({\n        title: list.soundstr + timestampToTime(list.create_time),\n        url: \"hiker://page/detail.html?page=fypage\",\n        img: list.front_cover,\n        desc: '0',\n        extra: {\n            href: String('https://www.missevan.com/sound/' + list.id),\n            sound_id: list.id,\n            duration: list.duration,\n            view_count_formatted: list.view_count_formatted,\n            all_comments: list.all_comments,\n            checked: list.checked,\n        },\n        col_type: \"card_pic_2\"\n    });\n\t});\n    }\n    return d;\n}\n\n//UP\nfunction searchUP(url, d) {\n    html = fetch(url, {\n            headers: {\n                \"User-Agent\": PC_UA\n            }\n        });\n    let Json = JSON.parse(html); //专辑列表对象\n    if (Json.success == true) {\n        UPList = Json.info.Datas;\n        UPList.forEach(list => {\n    d.push({\n        title: list.username ,\n        url: \"hiker://page/podcasters.html?page=fypage\",\n        img: \"https://static.maoercdn.com/avatars/\"+list.avatar,\n        desc: '0',\n        extra: {\n            href: String(\"https://www.missevan.com/\" + list.id)\n        },\n        col_type: \"icon_round_4\"\n    });\n\t});\n    }\n    return d;\n}\n//声优\nfunction searchVocalExcellence(url, d) {\n    html = fetch(url, {\n            headers: {\n                \"User-Agent\": PC_UA\n            }\n        });\n    let Json = JSON.parse(html); //专辑列表对象\n    if (Json.success == true) {\n        vocalExcellence = Json.info.Datas;\n        vocalExcellence.forEach(list => {\n    d.push({\n        title: list.name ,\n        url: \"hiker://page/vocalExcellences.html?page=fypage\",\n        img:list.icon,\n        desc: list.profile,\n        extra: {\n         vocalExcellence_id :list.id,\n        },\n        col_type: \"icon_round_4\"\n    });\n\t});\n    }\n    return d;\n}\n//搜索选择开始\nmode = getMyVar(\"mode\", \"📝 综合\")\n    if (MY_PAGE == 1) {\n        d.push({\n            url: \"'toast://搜索成功';refreshPage()\",\n            col_type: 'input',\n            title: '搜索',\n            desc: \"搜索\",\n            extra: {\n                onChange: \"putMyVar('my-search',input)\"\n            }\n        })\n\n        slist = [\"📝 综合\", \"👤 UP主\", \"🖼 声优\", \"#️⃣ 剧集\"]; //\"🎥 电台\"\n        slist.forEach((x) => {\n            clearVar(\"search\")\n            d.push({\n                col_type: \"scroll_button\",\n                title: x == mode ? '““””' + x.bold().fontcolor('#12b668') : x,\n                url: $(\"#noLoading#\").lazyRule((x) => {\n                    putMyVar(\"mode\", x);\n                    refreshPage(false);\n                    return \"hiker://empty\"\n                }, x)\n            })\n        })\n    }\n    //搜索选择结束\n\n\n    let search = getMyVar(\"my-search\");\nif (search) {\n    putMyVar(\"search\", search)\n}\nsearchn = getMyVar(\"search\")\n\n    //判断搜索内容\n    switch (mode) {\n    case \"👤 UP主\":\n       url = \"https://www.missevan.com/sound/getsearch?s=\"+searchn+\"&p=\"+MY_PAGE+\"&type=1&page_size=24\"\n            searchUP(url, d);\n            toast('UP主')\n        break\n    case \"🎥 电台\":\n        url = \"https://www.qingting.fm/search/channel_live/\" + searchn + \"/\" + MY_PAGE\n            if (searchn) {\n                html = fetch(url, {\n                        headers: {\n                            \"User-Agent\": PC_UA\n                        }\n                    });\n                channel_live(html, d);\n                toast('电台')\n            }\n            break\n        case \"🖼 声优\":\n\t\t  url = \"https://www.missevan.com/sound/getsearch?s=\"+searchn+\"&p=\"+MY_PAGE+\"&type=4&page_size=30\"\n            searchVocalExcellence(url, d);\n            toast('搜索声优')\n            break\n        case \"📝 综合\":\n            url = \"https://www.missevan.com/dramaapi/search?s=\" + searchn + \"&page=\" + MY_PAGE;\n        searchChannels(url, d);\n\t\tsound_url = \"https://www.missevan.com/sound/getsearch?s=\"+searchn+\"&p=\"+MY_PAGE+\"&type=3&page_size=30\"\n            searchSounds(sound_url, d);\n            break\n        case \"#️⃣ 剧集\":\n            url = \"https://www.missevan.com/dramaapi/search?s=\" + searchn + \"&page=\" + MY_PAGE;\n        searchChannels(url, d);\n        toast('剧集');\n        break\n\n    }\n"},{"col_type":"movie_3","name":"主播页面","path":"podcasters.html","rule":"js:\nd = [];\nurl = MY_PARAMS.href; //前问desc获取\npage = MY_PAGE; //前问desc获取\nMY_URL = url;\nlet user_id = url.match(/(\\d{5,15})/)[1];\neval(JSON.parse(fetch(\"hiker://page/time.html\")).rule)\nif (page == 1) {\n    var html = fetch(url, {\n        headers: {\n            \"User-Agent\": PC_UA\n        }\n    });\n    let img = pd(html, '#topusermainicon&&img&&src');\n    let name = pdfh(html, '#t_u_n&&a&&Text');\n    let desc = pdfh(html, '#t_u_n_a&&Text');\n    let Json = {\n        \"name\": name,\n        \"img\": img,\n        \"url\": url,\n    };\n    d.push({\n        title: name,\n        img: img + \"@Referer=\",\n        //  url: \"hiker://page/info.html#immersiveTheme#\",\n        col_type: \"icon_round_4\",\n        extra: {}\n    }, {\n        title: \"<small>  <font color ='#888'>\" + desc + \"</font>\" + \"</small>\",\n        col_type: 'rich_text',\n    })\n\n    lurl = $(\"#noLoading#\").lazyRule((Json) => {\n        clearVar(\"url\");\n        r = readFile('qingting.txt');\n        j = r ? JSON.parse(r) : [];\n        t = Json ? Json : null;\n        if (t) {\n            flag = true;\n            j.forEach(x => x.extra.href == t.url ? (flag = false) : null)\n            if (flag) {\n                j.push({\n                    visible: true,\n                    delete: false,\n                    title: t.name,\n                    img: t.img + \"@Referer=\",\n                    url: \"hiker://page/podcasters.html?page=fypage\",\n                    extra: {\n                        href: String(t.url)\n                    },\n                    data: {\n                        img: t.img + \"@Referer=\"\n                    }\n                })\n                saveFile('qingting.txt', JSON.stringify(j));\n                back(true);\n            } else {\n\n                back(true);\n\n            }\n            return 'toast://已订阅该博主';\n        }\n    }, Json);\n\n    d.push({\n        title: \"订阅博主\",\n        col_type: \"text_center_1\",\n        url: lurl\n    })\n}\n\n\nvar tf1 = \"drama\";\nvar tf2 = \"sound\";\nif(getMyVar('refresh_drama'))putMyVar('refresh_drama', 0);//0，可以释放，1不释放\nif(getMyVar('refresh_sound'))putMyVar('refresh_sound', 1);\nlet upCollectionType = getMyVar(\"upCollectionType\", \"音乐\");\nvar dramaHtml = \"\";\ndramaList = [];\nvar soundHtml = \"\";\nsoundList = [];\nif (upCollectionType == \"音乐\") {\n    soundHtml = fetch(\"https://www.missevan.com/person/getusersound?p=\" + page + \"&order=0&s=&user_id=\" + user_id + \"&page_size=30\", {\n        headers: {\n            \"User-Agent\": PC_UA\n        }\n    }); //up主发布的音乐列表api\n    try {\n        let soundHtmlJson = JSON.parse(soundHtml);\n        if (soundHtmlJson.success == true) {\n            soundList = soundHtmlJson.info.Datas; //up主发布的音乐列表对象\n        }\n    } catch (e) {}\n} else {\n    dramaHtml = fetch(\"https://www.missevan.com/dramaapi/getuserdramas?page=\" + page + \"&user_id=\" + user_id + \"&order=0&s=&page_size=30\", {\n        headers: {\n            \"User-Agent\": PC_UA\n        }\n    }); //up主发布的专辑列表api\n    try {\n        let dramaHtmlJson = JSON.parse(dramaHtml);\n        if (dramaHtmlJson.success == true) {\n            dramaList = dramaHtmlJson.info.Datas; //up主发布的专辑列表对象\n        }\n    } catch (e) {}\n}\nif(page==1){\n//专辑\nd.push({\n    title: upCollectionType == \"专辑\" ? '““””<font color = \"red\"> 专辑 </font>' : '专辑',\n    col_type: 'text_2',\n    extra: {\n        lineVisible: false,\n        id: 'drama'\n    },\n    url: $('#noLoading#').lazyRule((dramaList, upCollectionType, dramaHtml, page, user_id, tf1, tf2) => {\n        if (dramaHtml == '') {\n            dramaHtml = fetch(\"https://www.missevan.com/dramaapi/getuserdramas?page=\" + page + \"&user_id=\" + user_id + \"&order=0&s=&page_size=30\", {\n                headers: {\n                    \"User-Agent\": PC_UA\n                }\n            }); //up主发布的专辑列表api\n            try {\n                let dramaHtmlJson = JSON.parse(dramaHtml);\n                if (dramaHtmlJson.success == true) {\n                    dramaList = dramaHtmlJson.info.Datas; //up主发布的专辑列表对象\n                }\n            } catch (e) {}\n        }\n\t\tputMyVar(\"upCollectionType\", \"专辑\")\n        if (getMyVar('refresh_' + tf1) == 0) {\n\t\t    putMyVar('refresh_' + tf2, 0);\n            putMyVar('refresh_' + tf1, 1);\n\t\tdramaList.forEach((list, index) => {           \n                deleteItem(tf2 + 'item');\n                addItemAfter(tf2, {\n                    title: list.name + \" 更新至 \" + list.newest,\n                    url: \"hiker://page/channels.html?page=fypage\",\n                    img: list.cover,\n                    col_type: \"card_pic_2\",\n\t\t\t\t         desc:'0',\n                    extra: {\n\t\t\t\t\t    drama_id:list.id,\n                        abstract: list.abstract,\n                        view_count: list.view_count,\n                        type_name: list.type_name,\n                        checked: list.checked,\n                        id: tf1 + 'item',\n                    }\n                });\n\t\t\t\t})\n                updateItem(tf1, {\n                    title: '““””<font color = \"red\">专辑</font>',\n                });updateItem(tf2, {\n                    title: \"音乐\",\n                });\n            }\n\t\treturn;\n    }, dramaList, upCollectionType, dramaHtml, page, user_id, tf1, tf2),\n});\n//音乐\nd.push({\n    title: upCollectionType == \"音乐\" ? '““””<font color = \"red\">音乐</font>' : '音乐',\n    col_type: 'text_2',\n    extra: {\n        lineVisible: false,\n        id: 'sound'\n    },\n    url: $('#noLoading#').lazyRule((soundList, upCollectionType, soundHtml, page, user_id, tf1, tf2) => {\n        if (soundHtml == '') {\n            soundHtml = fetch(\"https://www.missevan.com/person/getusersound?p=\" + page + \"&order=0&s=&user_id=\" + user_id + \"&page_size=30\", {\n                headers: {\n                    \"User-Agent\": PC_UA\n                }\n            }); //up主发布的音乐列表api\n            try {\n                let soundHtmlJson = JSON.parse(soundHtml);\n                if (soundHtmlJson.success == true) {\n                    soundList = soundHtmlJson.info.Datas; //up主发布的音乐列表对象\n                }\n            } catch (e) {}\n        }\n\t\tputMyVar(\"upCollectionType\", \"音乐\")\n\t\tif (getMyVar('refresh_' + tf2) == 0) {\n\t\t    putMyVar('refresh_' + tf1, 0);\n            putMyVar('refresh_' + tf2, 1);\n        soundList.forEach((list, index) => {\n                deleteItem(tf1 + 'item');\n                addItemAfter(tf2, {\n                    title: list.soundstr, // + timestampToTime(list.create_time),\n                    url: \"hiker://page/detail.html?page=fypage\",\n                    img: list.front_cover,\n                    desc: '0',\n                    extra: {\n                        href: String('https://www.missevan.com/sound/' + list.id),\n                        sound_id: list.id,\n                        id: tf2 + 'item',\n                        duration: list.duration,\n                        view_count_formatted: list.view_count_formatted,\n                        all_comments: list.all_comments,\n                        checked: list.checked,\n                    },\n                    col_type: \"card_pic_2\"\n                });\n\t\t\t\t})\n                updateItem(tf2, {\n                    title: '““””<font color = \"red\">音乐</font>',\n                });\n\t\t\t\tupdateItem(tf1, {\n                    title: \"专辑\",\n                });\n            }\n\t\t\treturn;\n    }, soundList, upCollectionType, soundHtml, page, user_id, tf1, tf2),\n});\n}\nif (upCollectionType == \"音乐\") {\nsoundList.forEach(list => {\n    d.push({\n        title: list.soundstr + timestampToTime(list.create_time),\n        url: \"hiker://page/detail.html?page=fypage\",\n        img: list.front_cover,\n        desc: '0',\n        extra: {\n            href: String('https://www.missevan.com/sound/' + list.id),\n            sound_id: list.id,\n            duration: list.duration,\n            view_count_formatted: list.view_count_formatted,\n            all_comments: list.all_comments,\n            checked: list.checked,\n\t\t\tid: tf2 + 'item',\n        },\n        col_type: \"card_pic_2\"\n    });\n\t});\n} else {\n\tdramaList.forEach(list => {\n    d.push({\n        title: list.name + \"更新至\"+list.newest,\n        url: \"hiker://page/channels.html?page=fypage\",\n        img: list.cover,\n        desc: '0',\n        extra: {\n            drama_id: list.id,\n            abstract: list.abstract,\n            view_count: list.view_count,\n            type_name: list.type_name,\n            checked: list.checked,\nid: tf1 + 'item',\n        },\n        col_type: \"card_pic_2\"\n    });\n})\n}\nsetResult(d)"},{"col_type":"text_1","name":"专辑页面","path":"channels.html","rule":"js:\nvar d = [];\neval(JSON.parse(fetch(\"hiker://page/time.html\")).rule)\ndrama_id = MY_PARAMS.drama_id; //前问desc获取\npage = MY_PAGE; //前问desc获取\ntrue_url = \"https://www.missevan.com/dramaapi/getdrama?drama_id=\" + drama_id;\nif (Number(page) > 1) {\n    true_url += '/' + page\n}\nif (page == 1) {\n    var html = fetch(true_url, {\n            headers: {\n                \"User-Agent\": PC_UA\n            }\n        });\n    soundList = [];\n    dramaId = ''; //专辑id\n    dramaName = ''; //专辑名\n    userId = \"\";\n    cover = \"\";\n    abstract = \"\"; //专辑详情\n    newest = \"\"; //更新至\n    view_count = \"\"; //总播放量\n    type = ''; //类型\n    tags = []; //标签\n    try {\n        let Json = JSON.parse(html); //专辑列表对象\n        if (Json.success == true) {\n            soundList = Json.info.episodes.episode;\n            dramaId = Json.info.drama.id;\n            dramaName = Json.info.drama.name;\n            userId = Json.info.drama.user_id;\n            cover = Json.info.drama.cover;\n            abstract = Json.info.drama.abstract;\n            newest = Json.info.drama.newest;\n            view_count = Json.info.drama.view_count;\n            type = Json.info.drama.type;\n            tags = Json.info.drama.tags;\n        }\n    } catch (e) {}\n  if (dramaName != '') {\n        setPageTitle(dramaName);\n    }\n  d.push({\n        title: dramaName,\n        img: cover,\n        url: 'hiker://page/channels.html?page=fypage',\n        col_type: 'card_pic_2',\n        desc: '0',\n        extra: {\n            drama_id: drama_id,\n        },\n    }, {\n        title: '<small><font color=\"#808080\">' + \"总播放量：\" + view_count + '<br>' + \"已更新至：\" + newest + '<br>' + \"类型：\" + type + '<br>' + \"标签：\" + tags.join(\"、\") + '</font>&nbsp;&nbsp;&nbsp;' + '</small>',\n        col_type: \"rich_text\",\n    });\n   //专辑\n    soundList.forEach(list => {\n        d.push({\n            title: ('““””<small><font color=\"#808080\">' + list.soundstr + '</font>&nbsp;&nbsp;&nbsp;' + '</small>'),\n            url: \"hiker://page/detail.html?page=fypage\",\n            extra: {\n                href: String('https://www.missevan.com/sound/' + list.sound_id),\n                sound_id: list.sound_id,\n\t\t\t  lineVisible:false,\n            },\n            col_type: \"text_1\"\n        });\n    });\n}\n\nsetResult(d);\n"},{"col_type":"rich_text","name":"详情","path":"detail.html","rule":"js:\nvar d = [];\nurl = MY_PARAMS.href; //前问desc获取\nlet id = url.match(/sound\\/(\\d{5,15})/)[1];\n\nif (MY_PAGE == 1) {\n    var html = fetch(url, {\n            headers: {\n                \"User-Agent\": PC_UA\n            }\n        });\n    var infoContanier = pd(html, '#sound-cover-info-contanier&&Html'); //详情html\n    var classification = pdfa(infoContanier, \".cover-breadcrumb&&a\"); //分类合集\n    var playtimes = pdfh(infoContanier, '#i_soundnumleft&&.text-playtimes&&Text'); //播放\n    var dmtimes = pdfh(infoContanier, '#i_soundnumleft&&.text-dmtimes&&Text'); //弹幕\n    var catear = pdfh(infoContanier, '#i_soundnumleft&&.text-catear&&Text'); //投食\n    var liketimes = pdfh(infoContanier, '#i_soundnumleft&&.text-liketimes&&Text'); //喜欢\n    var i_soundnumright = pdfh(infoContanier, '#i_soundnumleft&&#i_soundnumright&&Text'); //发布于\n    var sound_tag = pdfa(infoContanier, \"#sound_tag&&a\"); //标签合集\n    var coverImg = pdfh(html, \"#cover-img&&img&&src\"); //专辑封面图\n\n\n    var soundHtml = fetch(\"https://www.missevan.com/sound/getsound?soundid=\" + id, {\n            headers: {\n                \"User-Agent\": PC_UA\n            }\n        }); //详情名称和作者相关api\n    let soundJson = JSON.parse(soundHtml);\n    var title = '';\n    var intro = '';\n    let soundUrl = '';\n    let soundurl_128 = '';\n    try {\n        soundUrl = soundJson.info.sound.soundurl;\n    } catch (e) {};\n    try {\n        soundurl_128 = soundJson.info.sound.soundurl_128;\n    } catch (e) {};\n    try {\n        intro = soundJson.info.sound.intro;\n    } catch (e) {\n        intro = pdfh(infoContanier, \".intro&&Html\");\n    };\n    intro = intro.replace(/<p>/g, \"\").replace(/<\\/p>/g, ''); //音频简介\n    try {\n        title = soundJson.info.sound.soundstr;\n    } catch (e) {\n        title = pdfh(infoContanier, '#sound-cover-info&&.cover-title&&Text'); //详情头\n    };\n    setPageTitle(title);\n    var dramabysoundHtml = fetch(\"https://www.missevan.com/dramaapi/getdramabysound?sound_id=\" + id, {\n            headers: {\n                \"User-Agent\": PC_UA\n            }\n        }); //专辑相关api\n    soundList = [];\n\tdramaId='';//专辑id\n\tdramaName='';//专辑名\n    try {\n        let dramabysoundJson = JSON.parse(dramabysoundHtml); //专辑列表对象\n        soundList = dramabysoundJson.info.episodes.episode;\n\t\tdramaId= dramabysoundJson.info.drama.id;\n\t\tdramaName= dramabysoundJson.info.drama.name;\n    } catch (e) {}\n\n    var dmHtml = fetch(\"https://www.missevan.com/sound/getdm?soundid=\" + id, {\n            headers: {\n                \"User-Agent\": PC_UA\n            }\n        }); //弹幕api\n    let dmList = pdfa(dmHtml, \"body&&d\"); //弹幕列表\n\n    d.push({\n        title: dramaName,\n        img: coverImg,\n\t\turl:dramaId!=''?'hiker://page/channels.html?page=fypage':'',\n        col_type: 'card_pic_2',\n        desc: '0',\n\t\textra:{\n\t\t\tdrama_id:dramaId,\n\t\t},\n    }, {\n        title: title,\n        col_type: 'text_1',\n    }, {\n        title: soundJson.info.user.username,\n        img: soundJson.info.user.icon,\n        url: \"hiker://page/podcasters.html?page=fypage\",\n        extra: {\n            href: String(\"https://www.missevan.com/\" + soundJson.info.user.id)\n        },\n        col_type: 'avatar'\n    }, {\n        title: \"<small>  <font color ='#979797'>\" + soundJson.info.user.intro + \"<br>\" + \"&nbsp;投稿:\" + soundJson.info.user.soundnum + \"&nbsp;粉丝:\" + soundJson.info.user.fansnum + \"</font>\" + \"</small> \",\n        col_type: 'rich_text',\n    }, {\n        title: \"<big>音频简介</big><br><small>  <font color ='#979797'>\" + intro + \"</font>\" + \"</small> \",\n        col_type: 'rich_text',\n    }, {\n        title: \"<small>  <font color ='#888'>\" + playtimes + dmtimes + catear + liketimes + i_soundnumright + \"</font>\" + \"</small>\",\n        col_type: 'rich_text',\n    }, {\n        title: '▶️',\n        url: soundUrl,\n        col_type: 'text_2',\n    }, {\n        title: '▶️128',\n        url: soundurl_128,\n        col_type: 'text_2',\n    })\n\n    //标签合集\n    classification.forEach(item => {\n        d.push({\n            title: pdfh(item, \"a&&Text\"),\n            url: pdfh(item, \"a&&href\"),\n            col_type: 'flex_button',\n        })\n    })\n    //分类合集\n    sound_tag.forEach(item => {\n        d.push({\n            title: pdfh(item, \"a&&Text\"),\n            url: pdfh(item, \"a&&href\"),\n            col_type: 'flex_button',\n        })\n    });\n\n    //专辑\n    soundList.forEach(list => {\n        d.push({\n            title: id != list.sound_id ? ('““””<small><font color=\"#808080\">' + list.soundstr + '</font>&nbsp;&nbsp;&nbsp;' + '</small>') : list.soundstr,\n            url: id != list.sound_id ? \"hiker://page/detail.html?page=fypage\" : \"\",\n            extra: {\n                href: String('https://www.missevan.com/sound/' + list.sound_id),\n                sound_id: list.sound_id,\n            },\n            col_type: \"text_1\"\n        });\n    })\n}\nvar commentHtml = fetch(\"https://www.missevan.com/site/getcomment?type=1&eId=\" + id + \"&order=3&p=\" + MY_PAGE + \"&pagesize=20\", {\n        headers: {\n            \"User-Agent\": PC_UA\n        }\n    }); //专辑相关api\nlet commentJson = JSON.parse(commentHtml); //专辑列表对象\ncommentList = commentJson.info.comment.Datas;\ncommentList.forEach(list => {});\nsetResult(d);\n"},{"col_type":"movie_3","name":"电台","path":"radiopage.html","rule":"\nvar getRangeColors = function() {       \n    return '#' + ('00000' + (Math.random() * 0x1000000 << 0).toString(16)).substr(-6);     \n}\n\nconst 分类颜色 = getRangeColors()\nconst 大类定位 = 'body&&.channelMenu'\n//const 拼接分类 = 'body&&.menuItem'\nconst 小类定位 = 'body&&a:not(:matches(4|专|荧|分类|省市台|APP))'\nconst 分类标题 = 'a&&Text'\nconst 分类链接 = 'a&&href'\nMY_URL = MY_URL.replace('hiker://empty##', '')\nif(!/radio/.test(getVar(MY_RULE.url))){\n  clearVar(MY_RULE.url);\n   clearVar(MY_RULE.title);\n}\nlet true_url = getVar(MY_RULE.url, mUrl+'/radiopage/3/1')\nif(getVar(MY_RULE.url)){\n  if(page!=1){\n\ttrue_url = true_url.replace(/(http.+?\\/\\d{1,5}\\/)\\d{1,3}/, '$1' + page );\n  }\n}\nvar html = fetch(true_url, {\n    headers: {\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0)'\n    }\n})\n//log(html)\neval(JSON.parse(request('hiker://page/dt')).rule)\n\npdfa(html, '.contentSec&&.content-item-root').forEach(list => {\n    d.push({\n        title: pdfh(list, 'img&&alt'),\n        desc: '““””<small><font color=\"#808080\">' +pdfh(list,'.descRadio&&Text')+'</font>&nbsp;&nbsp;&nbsp;'+pdfh(list, '.playCount&&Text') + '</small>',\n        img: pd(list, 'img&&src'),\n        url: \"hiker://page/radio.html?page=fypage\",\n        extra: {\n            href: String('https://www.qingting.fm' + pdfh(list, 'a&&href'))\n        },\n\t   col_type: \"movie_1_left_pic\"\n    });\n})"},{"name":"动态分类","path":"dt","rule":"const empty = \"hiker://empty\"\n\ntry {\n    var categories = pdfa(html, 大类定位).concat(pdfa(html, 拼接分类))\n} catch (e) {\n    var categories = pdfa(html, 大类定位)\n}\n//log(categories)\nlet init_cate = []\n\nfor (let i = 0; i < 20; i++) {\n    init_cate.push(\"0\")\n}\n\nconst fold = getVar(MY_RULE.group, \"0\")\nconst cate_temp_json = getVar(MY_RULE.title, JSON.stringify(init_cate))\nconst cate_temp = JSON.parse(cate_temp_json)\n\nif (parseInt(page) === 1) {\n    d.push({\n        title: fold === '1' ? '““””<b><span style=\"color: #19B89D\">: (</span></b>' : '““””<b><span style=\"color: #910113\">: )</span></b>',\n        url: $().lazyRule((fold) => {\n            putVar(MY_RULE.group, fold === '1' ? '0' : '1');\n            refreshPage(false);\n            return \"hiker://empty\"\n        }, fold),\n        col_type: 'scroll_button',\n    })\ncategories.forEach((category, index) => {\n        let sub_categories = pdfa(category, 小类定位);\n  //log(sub_categories)\n        if (index === 0) {\n            sub_categories.forEach((item, key) => {\n                let title = pdfh(item, 分类标题)\n                d.push({\n                    title: key.toString() === cate_temp[index] ? '““””<b><span style=\"color: ' + 分类颜色 + '\">' + title + '</span></b>' : title,\n                    url: $(mUrl+pdfh(item, 分类链接) + '#noLoading#').lazyRule((params) => {\n                        let new_cate = []\n                        params.cate_temp.forEach((cate, index) => {\n                            new_cate.push(index === 0 ? params.key.toString() : \"0\")\n                        })\n                        putVar(MY_RULE.title, JSON.stringify(new_cate))\n                        putVar(MY_RULE.url, input)\n                        refreshPage(true)\n                        return \"hiker://empty\"\n                    }, {\n                        cate_temp: cate_temp,\n                        key: key,\n                        page: page,\n                    }),\n                    col_type: 'scroll_button',\n                })\n            })\n            d.push({\n                col_type: \"blank_block\"\n            });\n        } else if (fold === '1') {\n            sub_categories.forEach((item, key) => {\n                let title = pdfh(item, 分类标题)\n                d.push({\n                    title: key.toString() === cate_temp[index] ? '““””<b><span style=\"color: ' + 分类颜色 + '\">' + title + '</span></b>' : title,\n                    url: $(mUrl+pdfh(item, 分类链接) + '#noLoading#').lazyRule((params) => {\n                        params.cate_temp[params.index] = params.key.toString()\n\n                        putVar(MY_RULE.title, JSON.stringify(params.cate_temp))\n                        putVar(MY_RULE.url, input)\n                        refreshPage(true)\n                        return \"hiker://empty\"\n                    }, {\n                        cate_temp: cate_temp,\n                        index: index,\n                        key: key,\n                        page: page,\n                    }),\n                    col_type: 'scroll_button',\n                })\n            })\n            d.push({\n                col_type: \"blank_block\"\n            });\n        }\n    })\n}\n"},{"name":"分类","path":"categories.html","rule":"\nvar getRangeColors = function() {       \n    return '#' + ('00000' + (Math.random() * 0x1000000 << 0).toString(16)).substr(-6);     \n}\n\nconst 分类颜色 = getRangeColors()\nconst 大类定位 = 'body&&.categoryList'\nconst 拼接分类 = 'body&&.menuItem'\nconst 小类定位 = 'body&&a:not(:matches(4|专|荧|资讯|导航|APP))'\nconst 分类标题 = 'a&&Text'\nconst 分类链接 = 'a&&href'\nMY_URL = MY_URL.replace('hiker://empty##', '')\nif(!/categories/.test(getVar(MY_RULE.url))){\n  clearVar(MY_RULE.url);\n   clearVar(MY_RULE.title);\n}\nlet true_url = getVar(MY_RULE.url, mUrl+'/categories/')\n\n\nif(getVar(MY_RULE.url)){\n  if(!/\\d/.test(true_url)){\n\ttrue_url = mUrl+'/categories/545/0/'+page;\n  }else{\n\tif(page!=1){\n\ttrue_url = true_url.replace(/(http.+?\\/\\d{1,5}\\/\\d{1,5}\\/)\\d{1,3}/, '$1' + page )\n  }\n }\n}\nvar html = fetch(true_url, {\n    headers: {\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0)'\n    }\n})\n//log(html)\neval(JSON.parse(request('hiker://page/dt')).rule)\n\npdfa(html, '.contentsContainer&&.content-item-root').forEach(list => {\n    d.push({\n        title: pdfh(list, 'img&&alt'),\n        desc: '““””<small><font color=\"#808080\">' +pdfh(list,'.playCount&&Text')+'</font>&nbsp;&nbsp;&nbsp;'+pdfh(list, '.desc&&Text') + '</small>',\n        img: \"https:\"+pdfh(list, 'img&&src'),\n        url: \"hiker://page/channels.html?page=fypage\",\n        extra: {\n            href: String('https://www.qingting.fm' + pdfh(list, 'a&&href'))\n        },\n\t   col_type: \"movie_1_left_pic\"\n    });\n})"},{"name":"电台详情","path":"radio.html","rule":"js:\nlet d = [];\nvar _x5 = $.toString(() => {\n    fba.log(fba.getUrls())\n    var urls = _getUrls()\n    for (var i in urls) {\n        if (urls[i].match(/\\.m4a|\\.mp4|\\.m3u8/)) {\n            fy_bridge_app.log(urls[i])\n            return urls[i];\n        }\n    }\n});\n\n//通免\nvar lazy = $(\"\").lazyRule(() => {\n   \n        var play = input;\n        showLoading(\"网页嗅探中,请稍后...\");\n        var video = 'x5Rule://' + play + '@' + $.toString(() => {\n            var urls = _getUrls()\n            for (var i in urls) {\n                if (!urls[i].includes(\"v=\") && !urls[i].includes(\"url=\") && urls[i].match(/\\.m4a|\\.mp4|\\.m3u8/)) {\n                    //fy_bridge_app.log(urls[i])\n                    return urls[i];\n                } else if (urls[i].match(/\\.flv/)) {\n                    //fy_bridge_app.log(urls[i])\n                    return urls[i] + ';{Referer@https://www.bilibili.com/&&User-Agent@Mozilla/5.0}';\n                }\n            }\n        })\n    \n    return video\n});\neval(JSON.parse(fetch(\"hiker://page/time.html\")).rule)\nurl = MY_PARAMS.href; //前问desc获取\npage = MY_PAGE; //前问desc获取 \ntrue_url = url;\nif (Number(page) > 1) {\n    true_url += '/' + page\n}\nlet html = fetch(true_url, {headers: {\n            \"User-Agent\": PC_UA\n        }})\nlog(html)\nif (page == 1) {\n    let prgramInfo = pd(html, '.album-info-root&&Html');\n    let title = pdfh(prgramInfo, '.info&&.title&&Text');\n    let rightImg = '';\n    try {\n        rightImg = 'https://' + pdfh(prgramInfo, '.bgImg&&style').match(/pic[\\s\\S]*?jpg/g)[0]; //专辑\n    } catch (e) {}\n    let desc = pdfh(prgramInfo, '.desc&&Text');\n    let audienceCount = pdfh(prgramInfo, '.audienceCount&&Text'); //收听人数\n\n    d.push({\n        title: title,\n        img: rightImg,\n        col_type: 'card_pic_2',\n        desc: '0'\n    },{\n        title: '‘‘’’' + \" <small><font color='#b3d4fc' size='14'>\" + \"</font> \" + \"</small><big><font color='#000000' size='22'>\" + title + \"</font></big>\",\n\n        col_type: 'text_1',\n        extra: {\n            lineVisible: false\n        }\n    },{\n        title:  '‘‘’’' + \" <small><font color='#b3d4fc' size='14'>\" +\"收听人数\"+ \"</font> \" + \"</small><big><font color='#000000' size='22'>\" + audienceCount + \"</font></big>\",\n        col_type: 'text_1',\n\t          extra: {\n            lineVisible: false\n        }\n    }, {\n        title: desc,\n        col_type: 'rich_text'\n    }, {\n    title: '▶️',\n    img: rightImg,\n    url: \"https://lhttp.qtfm.cn/live/\"+url.match(/http.+?(\\d{1,6})/)[1]+\"/64k.mp3\",\n    col_type: 'text_2',\n    desc: '0'\n});\n}\n\n\nprogramList=[];\ntry{\nprogramList=pdfa(html,'body&&.programList');\n}catch(e){}\ntableTitle=[];\ntry{\ntableTitle=pdfa(html,'body&&.tableTitle');\n}catch(e){}\nprogramList.forEach((item,index)=>{\npdfa(html,'ul&&li').forEach((item,index)=>{\nd.push({\ntitle: pdfh(item, '.col1&&Text') + \"    \"+pdfh(item, '.col2&&Text')+ \"    \"+pdfh(item, '.col3&&Text'),         \n            //url: \"hiker://page/detail.html\",\n            extra: {\n                href: String('https://www.qingting.fm' + pdfh(item, 'a&&href')),newWindow: true\n            },col_type:'text_1'\n})\n})\n})\nsetResult(d);"},{"col_type":"movie_3","name":"放松页","path":"m_54.html","rule":"var getRangeColors = function() {       \n    return '#' + ('00000' + (Math.random() * 0x1000000 << 0).toString(16)).substr(-6);     \n}\n\nconst 分类颜色 = getRangeColors()\nconst 大类定位 = 'body&&.vw-frontpagecontainer'\nconst 拼接分类 = '.btn1-group&&.btn1-default'\nconst 小类定位 = 'body&&a'; //:not(:matches(4|专|荧|分类|省市台|APP))\nconst 分类标题 = 'a&&Text'\nconst 分类链接 = 'a&&href'\nMY_URL = mUrl;\nif(!/m\\/1/.test(getVar(MY_RULE.url))){\n  clearVar(MY_RULE.url);\n   clearVar(MY_RULE.title);\n}\nlet true_url = getVar(MY_RULE.url, mUrl + '/sound/m/54')\nif (getVar(MY_RULE.url)) {\n    if (page != 1) {\n        true_url = true_url+'&p='+page;\n    }\n}\nvar html = fetch(true_url, {\n    headers: {\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0)'\n    }\n})\n\nconst first_fl = parseDomForArray(html, 'body&&.vw-frontpagecontainer'); //一级分类\nconst second_fl = parseDomForArray(html, '.btn1-group'); //二级分类\nconst third_fl = parseDomForArray(html, '#list-label'); //三级分类\n\n\nlet init_cate = []\nfor (let i = 0; i < 20; i++) {\n    init_cate.push(\"0\")\n}\n\n// 取一级分类缓存\nconst cate_temp_1_json = getVar(MY_RULE.url + \"first_fl\", JSON.stringify(init_cate));\nconst cate_temp_1 = JSON.parse(cate_temp_1_json);\n\nconst cate_temp_2_json = getVar(MY_RULE.url + \"second_fl\", JSON.stringify(init_cate));\nconst cate_temp_2 = JSON.parse(cate_temp_2_json);\n\nconst cate_temp_3_json = getVar(MY_RULE.url + \"third_fl\", JSON.stringify(init_cate));\nconst cate_temp_3 = JSON.parse(cate_temp_3_json);\n\nif (parseInt(page) === 1) {\n    first_fl.forEach((category, index) => {\n        //一级分类\n        let sub_classify = parseDomForArray(category, 'body&&.catalogleaves'); ////需修改\n        sub_classify.forEach((item, key) => {\n            let title = parseDomForHtml(item, 'a&&Text')\n            d.push({\n                title: key.toString() === cate_temp_1[index] ? '““””<b><font color=' + 分类颜色 + '>' + title + ' </font></b>' : title,\n                url: $(parseDom(item, 'a&&href')).lazyRule((params) => {\n                    params.cate_temp_1[params.index] = params.key.toString()\n                    putVar(MY_RULE.url + \"first_fl\", JSON.stringify(params.cate_temp_1))\n                    putVar(MY_RULE.url, input)\n                    refreshPage(true)\n                    return \"hiker://empty\"\n                }, {\n                    cate_temp_1: cate_temp_1,\n                    index: index,\n                    key: key,\n                    page: page,\n                }),\n                col_type: 'scroll_button',\n            })\n        })\n        d.push({\n            col_type: \"blank_block\"\n        });\n    })\n    second_fl.forEach((category, index) => {\n        //一级分类\n        let sub_classify = parseDomForArray(category, 'body&&a'); ////需修改\n        sub_classify.forEach((item, key) => {\n            let title = parseDomForHtml(item, 'a&&Text')\n            d.push({\n                title: key.toString() === cate_temp_2[index] ? '““””<b><font color=' + 分类颜色 + '>' + title + ' </font></b>' : title,\n                url: $(parseDom(item, 'a&&href')).lazyRule((params) => {\n                    params.cate_temp_2[params.index] = params.key.toString()\n                    putVar(MY_RULE.url + \"second_fl\", JSON.stringify(params.cate_temp_2))\n                    putVar(MY_RULE.url, input)\n                    refreshPage(true)\n                    return \"hiker://empty\"\n                }, {\n                    cate_temp_2: cate_temp_2,\n                    index: index,\n                    key: key,\n                    page: page,\n                }),\n                col_type: 'scroll_button',\n            })\n        })\n        d.push({\n            col_type: \"blank_block\"\n        });\n    })\n    third_fl.forEach((category, index) => {\n        //一级分类\n        let sub_classify = parseDomForArray(category, 'body&&a'); ////需修改\n        sub_classify.forEach((item, key) => {\n            let title = parseDomForHtml(item, 'a&&Text')\n            d.push({\n                title: key.toString() === cate_temp_3[index] ? '““””<b><font color=' + 分类颜色 + '>' + title + ' </font></b>' : title,\n                url: $(parseDom(item, 'a&&href')).lazyRule((params) => {\n                    params.cate_temp_3[params.index] = params.key.toString()\n                    putVar(MY_RULE.url + \"third_fl\", JSON.stringify(params.cate_temp_3))\n                    putVar(MY_RULE.url, input)\n                    refreshPage(true)\n                    return \"hiker://empty\"\n                }, {\n                    cate_temp_3: cate_temp_3,\n                    index: index,\n                    key: key,\n                    page: page,\n                }),\n                col_type: 'scroll_button',\n            })\n        })\n        d.push({\n            col_type: \"blank_block\"\n        });\n    })\n}\npdfa(html, '.fc-leftcontent-block&&.vw-frontsound-container').forEach(list => {\n    d.push({\n        title: pdfh(list, 'img&&alt'),\n        desc: '““””<small><font color=\"#808080\">' + pdfh(list, '.vw-frontsound-time&&Text') + '</font>&nbsp;&nbsp;&nbsp;' + pdfh(list, '.vw-frontsound-viewcount&&Text') + '</font>&nbsp;&nbsp;&nbsp;' + pdfh(list, '.vw-frontsound-commentcount&&Text') + '</small>',\n        img: pd(list, 'img&&data-original'),\n        url: \"hiker://page/detail.html?page=fypage\",\n        extra: {\n            href: String('https://www.missevan.com' + pdfh(list, 'a&&href'))\n        },\n        col_type: \"movie_1_left_pic\"\n    });\n})"},{"col_type":"movie_3","name":"声音恋人","path":"m_108.html","rule":"var getRangeColors = function() {       \n    return '#' + ('00000' + (Math.random() * 0x1000000 << 0).toString(16)).substr(-6);     \n}\n\nconst 分类颜色 = getRangeColors()\nconst 大类定位 = 'body&&.vw-frontpagecontainer'\nconst 拼接分类 = '.btn1-group&&.btn1-default'\nconst 小类定位 = 'body&&a'; //:not(:matches(4|专|荧|分类|省市台|APP))\nconst 分类标题 = 'a&&Text'\nconst 分类链接 = 'a&&href'\nMY_URL = mUrl;\nif (!/m\\/1/.test(getVar(MY_RULE.url + \"m_108\"))) {\n    clearVar(MY_RULE.url + \"m_108\");\n    clearVar(MY_RULE.title);\n}\nlet true_url = getVar(MY_RULE.url + \"m_108\", mUrl + '/sound/m/108')\nif (getVar(MY_RULE.url + \"m_108\")) {\n    if (page != 1) {\n        true_url = true_url + '&p=' + page;\n    }\n}\nvar html = fetch(true_url, {\n    headers: {\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0)'\n    }\n})\n\nconst first_fl = parseDomForArray(html, 'body&&.vw-frontpagecontainer'); //一级分类\nconst second_fl = parseDomForArray(html, '.btn1-group'); //二级分类\nconst third_fl = parseDomForArray(html, '#list-label'); //三级分类\n\n\nlet init_cate = []\nfor (let i = 0; i < 20; i++) {\n    init_cate.push(\"0\")\n}\n\n// 取一级分类缓存\nconst cate_temp_1_json = getVar(MY_RULE.url + \"m_108\" + \"first_fl\", JSON.stringify(init_cate));\nconst cate_temp_1 = JSON.parse(cate_temp_1_json);\n\nconst cate_temp_2_json = getVar(MY_RULE.url + \"m_108\" + \"second_fl\", JSON.stringify(init_cate));\nconst cate_temp_2 = JSON.parse(cate_temp_2_json);\n\nconst cate_temp_3_json = getVar(MY_RULE.url + \"m_108\" + \"third_fl\", JSON.stringify(init_cate));\nconst cate_temp_3 = JSON.parse(cate_temp_3_json);\n\nif (parseInt(page) === 1) {\n    first_fl.forEach((category, index) => {\n        //一级分类\n        let sub_classify = parseDomForArray(category, 'body&&.catalogleaves'); ////需修改\n        sub_classify.forEach((item, key) => {\n            let title = parseDomForHtml(item, 'a&&Text')\n            d.push({\n                title: key.toString() === cate_temp_1[index] ? '““””<b><font color=' + 分类颜色 + '>' + title + ' </font></b>' : title,\n                url: $(parseDom(item, 'a&&href')).lazyRule((params) => {\n                    params.cate_temp_1[params.index] = params.key.toString()\n                    putVar(MY_RULE.url + \"m_108\" + \"first_fl\", JSON.stringify(params.cate_temp_1))\n                    putVar(MY_RULE.url + \"m_108\", input)\n                    refreshPage(true)\n                    return \"hiker://empty\"\n                }, {\n                    cate_temp_1: cate_temp_1,\n                    index: index,\n                    key: key,\n                    page: page,\n                }),\n                col_type: 'scroll_button',\n            })\n        })\n        d.push({\n            col_type: \"blank_block\"\n        });\n    })\n    second_fl.forEach((category, index) => {\n        //一级分类\n        let sub_classify = parseDomForArray(category, 'body&&a'); ////需修改\n        sub_classify.forEach((item, key) => {\n            let title = parseDomForHtml(item, 'a&&Text')\n            d.push({\n                title: key.toString() === cate_temp_2[index] ? '““””<b><font color=' + 分类颜色 + '>' + title + ' </font></b>' : title,\n                url: $(parseDom(item, 'a&&href')).lazyRule((params) => {\n                    params.cate_temp_2[params.index] = params.key.toString()\n                    putVar(MY_RULE.url + \"m_108\" + \"second_fl\", JSON.stringify(params.cate_temp_2))\n                    putVar(MY_RULE.url + \"m_108\", input)\n                    refreshPage(true)\n                    return \"hiker://empty\"\n                }, {\n                    cate_temp_2: cate_temp_2,\n                    index: index,\n                    key: key,\n                    page: page,\n                }),\n                col_type: 'scroll_button',\n            })\n        })\n        d.push({\n            col_type: \"blank_block\"\n        });\n    })\n    third_fl.forEach((category, index) => {\n        //一级分类\n        let sub_classify = parseDomForArray(category, 'body&&a'); ////需修改\n        sub_classify.forEach((item, key) => {\n            let title = parseDomForHtml(item, 'a&&Text')\n            d.push({\n                title: key.toString() === cate_temp_3[index] ? '““””<b><font color=' + 分类颜色 + '>' + title + ' </font></b>' : title,\n                url: $(parseDom(item, 'a&&href')).lazyRule((params) => {\n                    params.cate_temp_3[params.index] = params.key.toString()\n                    putVar(MY_RULE.url + \"m_108\" + \"third_fl\", JSON.stringify(params.cate_temp_3))\n                    putVar(MY_RULE.url + \"m_108\", input)\n                    refreshPage(true)\n                    return \"hiker://empty\"\n                }, {\n                    cate_temp_3: cate_temp_3,\n                    index: index,\n                    key: key,\n                    page: page,\n                }),\n                col_type: 'scroll_button',\n            })\n        })\n        d.push({\n            col_type: \"blank_block\"\n        });\n    })\n}\npdfa(html, '.fc-leftcontent-block&&.vw-frontsound-container').forEach(list => {\n    d.push({\n        title: pdfh(list, 'img&&alt'),\n        desc: '““””<small><font color=\"#808080\">' + pdfh(list, '.vw-frontsound-time&&Text') + '</font>&nbsp;&nbsp;&nbsp;' + pdfh(list, '.vw-frontsound-viewcount&&Text') + '</font>&nbsp;&nbsp;&nbsp;' + pdfh(list, '.vw-frontsound-commentcount&&Text') + '</small>',\n        img: pd(list, 'img&&data-original'),\n        url: \"hiker://page/detail.html?page=fypage\",\n        extra: {\n            href: String('https://www.missevan.com' + pdfh(list, 'a&&href'))\n        },\n        col_type: \"movie_1_left_pic\"\n    });\n})"},{"name":"日抓","path":"m_41.html","rule":"var getRangeColors = function() {       \n    return '#' + ('00000' + (Math.random() * 0x1000000 << 0).toString(16)).substr(-6);     \n}\n\nconst 分类颜色 = getRangeColors()\nconst 大类定位 = 'body&&.vw-frontpagecontainer'\nconst 拼接分类 = '.btn1-group&&.btn1-default'\nconst 小类定位 = 'body&&a'; //:not(:matches(4|专|荧|分类|省市台|APP))\nconst 分类标题 = 'a&&Text'\nconst 分类链接 = 'a&&href'\nMY_URL = mUrl;\nif (!/m\\/1/.test(getVar(MY_RULE.url + \"m_41\"))) {\n    clearVar(MY_RULE.url + \"m_41\");\n    clearVar(MY_RULE.title);\n}\nlet true_url = getVar(MY_RULE.url + \"m_41\", mUrl + '/sound/m/41')\nif (getVar(MY_RULE.url + \"m_41\")) {\n    if (page != 1) {\n        true_url = true_url + '&p=' + page;\n    }\n}\nvar html = fetch(true_url, {\n    headers: {\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0)'\n    }\n})\n\nconst first_fl = parseDomForArray(html, 'body&&.vw-frontpagecontainer'); //一级分类\nconst second_fl = parseDomForArray(html, '.btn1-group'); //二级分类\nconst third_fl = parseDomForArray(html, '#list-label'); //三级分类\n\n\nlet init_cate = []\nfor (let i = 0; i < 20; i++) {\n    init_cate.push(\"0\")\n}\n\n// 取一级分类缓存\nconst cate_temp_1_json = getVar(MY_RULE.url + \"m_41\" + \"first_fl\", JSON.stringify(init_cate));\nconst cate_temp_1 = JSON.parse(cate_temp_1_json);\n\nconst cate_temp_2_json = getVar(MY_RULE.url + \"m_41\" + \"second_fl\", JSON.stringify(init_cate));\nconst cate_temp_2 = JSON.parse(cate_temp_2_json);\n\nconst cate_temp_3_json = getVar(MY_RULE.url + \"m_41\" + \"third_fl\", JSON.stringify(init_cate));\nconst cate_temp_3 = JSON.parse(cate_temp_3_json);\n\nif (parseInt(page) === 1) {\n    first_fl.forEach((category, index) => {\n        //一级分类\n        let sub_classify = parseDomForArray(category, 'body&&.catalogleaves'); ////需修改\n        sub_classify.forEach((item, key) => {\n            let title = parseDomForHtml(item, 'a&&Text')\n            d.push({\n                title: key.toString() === cate_temp_1[index] ? '““””<b><font color=' + 分类颜色 + '>' + title + ' </font></b>' : title,\n                url: $(parseDom(item, 'a&&href')).lazyRule((params) => {\n                    params.cate_temp_1[params.index] = params.key.toString()\n                    putVar(MY_RULE.url + \"m_41\" + \"first_fl\", JSON.stringify(params.cate_temp_1))\n                    putVar(MY_RULE.url + \"m_41\", input)\n                    refreshPage(true)\n                    return \"hiker://empty\"\n                }, {\n                    cate_temp_1: cate_temp_1,\n                    index: index,\n                    key: key,\n                    page: page,\n                }),\n                col_type: 'scroll_button',\n            })\n        })\n        d.push({\n            col_type: \"blank_block\"\n        });\n    })\n    second_fl.forEach((category, index) => {\n        //一级分类\n        let sub_classify = parseDomForArray(category, 'body&&a'); ////需修改\n        sub_classify.forEach((item, key) => {\n            let title = parseDomForHtml(item, 'a&&Text')\n            d.push({\n                title: key.toString() === cate_temp_2[index] ? '““””<b><font color=' + 分类颜色 + '>' + title + ' </font></b>' : title,\n                url: $(parseDom(item, 'a&&href')).lazyRule((params) => {\n                    params.cate_temp_2[params.index] = params.key.toString()\n                    putVar(MY_RULE.url + \"m_41\" + \"second_fl\", JSON.stringify(params.cate_temp_2))\n                    putVar(MY_RULE.url + \"m_41\", input)\n                    refreshPage(true)\n                    return \"hiker://empty\"\n                }, {\n                    cate_temp_2: cate_temp_2,\n                    index: index,\n                    key: key,\n                    page: page,\n                }),\n                col_type: 'scroll_button',\n            })\n        })\n        d.push({\n            col_type: \"blank_block\"\n        });\n    })\n    third_fl.forEach((category, index) => {\n        //一级分类\n        let sub_classify = parseDomForArray(category, 'body&&a'); ////需修改\n        sub_classify.forEach((item, key) => {\n            let title = parseDomForHtml(item, 'a&&Text')\n            d.push({\n                title: key.toString() === cate_temp_3[index] ? '““””<b><font color=' + 分类颜色 + '>' + title + ' </font></b>' : title,\n                url: $(parseDom(item, 'a&&href')).lazyRule((params) => {\n                    params.cate_temp_3[params.index] = params.key.toString()\n                    putVar(MY_RULE.url + \"m_41\" + \"third_fl\", JSON.stringify(params.cate_temp_3))\n                    putVar(MY_RULE.url + \"m_41\", input)\n                    refreshPage(true)\n                    return \"hiker://empty\"\n                }, {\n                    cate_temp_3: cate_temp_3,\n                    index: index,\n                    key: key,\n                    page: page,\n                }),\n                col_type: 'scroll_button',\n            })\n        })\n        d.push({\n            col_type: \"blank_block\"\n        });\n    })\n}\npdfa(html, '.fc-leftcontent-block&&.vw-frontsound-container').forEach(list => {\n    d.push({\n        title: pdfh(list, 'img&&alt'),\n        desc: '““””<small><font color=\"#808080\">' + pdfh(list, '.vw-frontsound-time&&Text') + '</font>&nbsp;&nbsp;&nbsp;' + pdfh(list, '.vw-frontsound-viewcount&&Text') + '</font>&nbsp;&nbsp;&nbsp;' + pdfh(list, '.vw-frontsound-commentcount&&Text') + '</small>',\n        img: pd(list, 'img&&data-original'),\n        url: \"hiker://page/detail.html?page=fypage\",\n        extra: {\n            href: String('https://www.missevan.com' + pdfh(list, 'a&&href'))\n        },\n        col_type: \"movie_1_left_pic\"\n    });\n})"},{"name":"播客","path":"m_26.html","rule":"var getRangeColors = function() {       \n    return '#' + ('00000' + (Math.random() * 0x1000000 << 0).toString(16)).substr(-6);     \n}\n\nconst 分类颜色 = getRangeColors()\nconst 大类定位 = 'body&&.vw-frontpagecontainer'\nconst 拼接分类 = '.btn1-group&&.btn1-default'\nconst 小类定位 = 'body&&a'; //:not(:matches(4|专|荧|分类|省市台|APP))\nconst 分类标题 = 'a&&Text'\nconst 分类链接 = 'a&&href'\nMY_URL = mUrl;\nif (!/m\\/1/.test(getVar(MY_RULE.url + \"m_26\"))) {\n    clearVar(MY_RULE.url + \"m_26\");\n    clearVar(MY_RULE.title);\n}\nlet true_url = getVar(MY_RULE.url + \"m_26\", mUrl + '/sound/m/26')\nif (getVar(MY_RULE.url + \"m_26\")) {\n    if (page != 1) {\n        true_url = true_url + '&p=' + page;\n    }\n}\nvar html = fetch(true_url, {\n    headers: {\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0)'\n    }\n})\n\nconst first_fl = parseDomForArray(html, 'body&&.vw-frontpagecontainer'); //一级分类\nconst second_fl = parseDomForArray(html, '.btn1-group'); //二级分类\nconst third_fl = parseDomForArray(html, '#list-label'); //三级分类\n\n\nlet init_cate = []\nfor (let i = 0; i < 20; i++) {\n    init_cate.push(\"0\")\n}\n\n// 取一级分类缓存\nconst cate_temp_1_json = getVar(MY_RULE.url + \"m_26\" + \"first_fl\", JSON.stringify(init_cate));\nconst cate_temp_1 = JSON.parse(cate_temp_1_json);\n\nconst cate_temp_2_json = getVar(MY_RULE.url + \"m_26\" + \"second_fl\", JSON.stringify(init_cate));\nconst cate_temp_2 = JSON.parse(cate_temp_2_json);\n\nconst cate_temp_3_json = getVar(MY_RULE.url + \"m_26\" + \"third_fl\", JSON.stringify(init_cate));\nconst cate_temp_3 = JSON.parse(cate_temp_3_json);\n\nif (parseInt(page) === 1) {\n    first_fl.forEach((category, index) => {\n        //一级分类\n        let sub_classify = parseDomForArray(category, 'body&&.catalogleaves'); ////需修改\n        sub_classify.forEach((item, key) => {\n            let title = parseDomForHtml(item, 'a&&Text')\n            d.push({\n                title: key.toString() === cate_temp_1[index] ? '““””<b><font color=' + 分类颜色 + '>' + title + ' </font></b>' : title,\n                url: $(parseDom(item, 'a&&href')).lazyRule((params) => {\n                    params.cate_temp_1[params.index] = params.key.toString()\n                    putVar(MY_RULE.url + \"m_26\" + \"first_fl\", JSON.stringify(params.cate_temp_1))\n                    putVar(MY_RULE.url + \"m_26\", input)\n                    refreshPage(true)\n                    return \"hiker://empty\"\n                }, {\n                    cate_temp_1: cate_temp_1,\n                    index: index,\n                    key: key,\n                    page: page,\n                }),\n                col_type: 'scroll_button',\n            })\n        })\n        d.push({\n            col_type: \"blank_block\"\n        });\n    })\n    second_fl.forEach((category, index) => {\n        //一级分类\n        let sub_classify = parseDomForArray(category, 'body&&a'); ////需修改\n        sub_classify.forEach((item, key) => {\n            let title = parseDomForHtml(item, 'a&&Text')\n            d.push({\n                title: key.toString() === cate_temp_2[index] ? '““””<b><font color=' + 分类颜色 + '>' + title + ' </font></b>' : title,\n                url: $(parseDom(item, 'a&&href')).lazyRule((params) => {\n                    params.cate_temp_2[params.index] = params.key.toString()\n                    putVar(MY_RULE.url + \"m_26\" + \"second_fl\", JSON.stringify(params.cate_temp_2))\n                    putVar(MY_RULE.url + \"m_26\", input)\n                    refreshPage(true)\n                    return \"hiker://empty\"\n                }, {\n                    cate_temp_2: cate_temp_2,\n                    index: index,\n                    key: key,\n                    page: page,\n                }),\n                col_type: 'scroll_button',\n            })\n        })\n        d.push({\n            col_type: \"blank_block\"\n        });\n    })\n    third_fl.forEach((category, index) => {\n        //一级分类\n        let sub_classify = parseDomForArray(category, 'body&&a'); ////需修改\n        sub_classify.forEach((item, key) => {\n            let title = parseDomForHtml(item, 'a&&Text')\n            d.push({\n                title: key.toString() === cate_temp_3[index] ? '““””<b><font color=' + 分类颜色 + '>' + title + ' </font></b>' : title,\n                url: $(parseDom(item, 'a&&href')).lazyRule((params) => {\n                    params.cate_temp_3[params.index] = params.key.toString()\n                    putVar(MY_RULE.url + \"m_26\" + \"third_fl\", JSON.stringify(params.cate_temp_3))\n                    putVar(MY_RULE.url + \"m_26\", input)\n                    refreshPage(true)\n                    return \"hiker://empty\"\n                }, {\n                    cate_temp_3: cate_temp_3,\n                    index: index,\n                    key: key,\n                    page: page,\n                }),\n                col_type: 'scroll_button',\n            })\n        })\n        d.push({\n            col_type: \"blank_block\"\n        });\n    })\n}\npdfa(html, '.fc-leftcontent-block&&.vw-frontsound-container').forEach(list => {\n    d.push({\n        title: pdfh(list, 'img&&alt'),\n        desc: '““””<small><font color=\"#808080\">' + pdfh(list, '.vw-frontsound-time&&Text') + '</font>&nbsp;&nbsp;&nbsp;' + pdfh(list, '.vw-frontsound-viewcount&&Text') + '</font>&nbsp;&nbsp;&nbsp;' + pdfh(list, '.vw-frontsound-commentcount&&Text') + '</small>',\n        img: pd(list, 'img&&data-original'),\n        url: \"hiker://page/detail.html?page=fypage\",\n        extra: {\n            href: String('https://www.missevan.com' + pdfh(list, 'a&&href'))\n        },\n        col_type: \"movie_1_left_pic\"\n    });\n})"}],"title":"猫耳FM📻","author":"guaner&xxs","version":1,"type":"music","url":"hiker://empty#fypage#fyAll#https://www.missevan.com","col_type":"icon_round_4","class_name":"播客&订阅主播&放松&日抓&音声&搜索&管理主播","class_url":"播客&主播&放松&日抓&音声&搜索&管理","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:\nvar d = []; //MY_URL.match(/f=(.*?)&/)[1]\nvar page = MY_URL.split('#')[1];\nvar classification = MY_URL.split('#')[2];\nvar mUrl = MY_URL.split('#')[3];\nswitch (classification) {\n    case \"放松\":\n        eval(JSON.parse(fetch(\"hiker://page/m_54.html\")).rule);\n        break\n    case \"播客\":\n        eval(JSON.parse(fetch(\"hiker://page/m_26.html\")).rule);\n\tbreak\n    case \"音声\":\n        eval(JSON.parse(fetch(\"hiker://page/m_108.html\")).rule);\n        break\n\t case \"日抓\":\n        eval(JSON.parse(fetch(\"hiker://page/m_41.html\")).rule);\n        break\n    case \"搜索\":\n        eval(JSON.parse(fetch(\"hiker://page/search.html\")).rule)\n        break\n    case \"主播\":\n        r = page == 1 ? readFile('qingting.txt') :\n            false;\n        Json = r ? JSON.parse(r) : [];\n        Json.forEach((x) => {\n            x.visible ? d.push(x) : null\n        });\n        d.forEach((x) => {\n            x.img = x.data.icon ? x.data.icon : x.data.img\n\n        });\n        if (!d.length && page == 1) {\n            d.push({\n                title: \"暂无订阅主播，快去搜索订阅吧\",\n                col_type: \"text_center_1\",\n                url: \"toast://快去搜索吧\"\n            })\n        }\n        break\n    case \"管理\":\n        eval(JSON.parse(fetch(\"hiker://page/config.html\")).rule)\n        break\n    case \"热搜\":\n        //eval(JSON.parse(fetch(\"hiker://page/Hot.html\")).rule)\n        break\n}\n\nsetResult(d)","searchFind":"","search_url":"","group":"①推荐","detail_col_type":"movie_1","detail_find_rule":"js:\nvar d = [];\n\nvar _x5 = $.toString(() => {\n    fba.log(fba.getUrls())\n    var urls = _getUrls()\n    for (var i in urls) {\n        if (urls[i].match(/\\.m4a|\\.mp4|\\.m3u8/)) {\n            fy_bridge_app.log(urls[i])\n            return urls[i];\n        }\n    }\n});\n\n\ntry {\n    var fm = set_switch\n} catch (e) {\n    fm = MY_URL\n}\nvar html = fetch(fm, {});\nvar prgramInfo= pd(html,'.c-prgram-info-root&&Html');\nvar title= pdfh(prgramInfo, '.title&&Text');\nvar album = pdfh(prgramInfo, '.album&&Text');//专辑\nvar albumHref = pdfh(prgramInfo, '.album&&a&&href');//专辑url\nvar avatar = pdfh(prgramInfo, '.avatar&&src');//主播img\n\nvar  podcasterName= pdfh(prgramInfo,'.podcasterName&&Text');//主播\nvar  podcasterUrl= pdfh(prgramInfo,'.podcasterName&&a&&href');//主播\nvar  rightImg=pdfh(prgramInfo,'.right&&img&&src')//专辑img\n\nlog(prgramInfo)\nd.push({\n        title: album,\n        img: rightImg,\n        col_type: 'card_pic_2',\ndesc:'0'\n    },{\n        title: '‘‘’’' + \" <small><font color='#b3d4fc' size='14'>\"+ \"节目\"+ \"</font> \" + \"</small><big><font color='#000000' size='22'>\"+title+\"</font></big>\",\n        \n        col_type: 'text_1',extra: {lineVisible: false}\n    },{\n        title: podcasterName,\n        img: avatar,\nurl:'https://www.qingting.fm'+podcasterUrl,\n        col_type: 'avatar'\n    }, {\n        title: '‘‘’’' + \" <small><font color='#9B9B9B' size='14'>\"+ \"所属专辑\"+ \"</font> \" + \"</small><font color='#4A90E2' size='17'>\"+album+\"</font>\",\n        url:'https://www.qingting.fm'+albumHref,\n        col_type: 'text_1',extra: {lineVisible: false}\n    },{\n        title: '▶️',\n        img: rightImg,\nurl: \"x5Rule://\" + fm+ '@' + _x5,\n        col_type: 'text_2',\ndesc:'0'\n    })\nvar commentList = pdfa(html, 'body&&.c-comment-root');\nlog(commentList.length);\ncommentList.forEach(item => {\n    var author = pdfh(item, 'img&&alt');\n    var img = pdfh(item, 'img&&src');\n    var comment = pdfh(item, '.wrapper&&Text');\n    var date = pdfh(item, '.date&&Text');\n    d.push({\n        title: author,\n        img: img,\n        col_type: 'avatar'\n    }, {\n        title: comment.replace(author, '').replace(':', ''),\n        img: img,\n        col_type: 'text_1',extra: {lineVisible: false}\n    })\n})\nsetResult(d);","sdetail_col_type":"movie_1","sdetail_find_rule":"","ua":"pc","preRule":"fileExist('maoer.txt')?fileExist('maoer.txt'):saveFile(\"maoer.txt\",\"\");","pages":"[{\"col_type\":\"icon_2\",\"name\":\"主播设置\",\"path\":\"config.html\",\"rule\":\"el = [];\\n\\nel.push( {\\n    title: '““””<font color=\\\"#666666\\\"><small>特别鸣谢，小程序提供者：\\\\n追剧君、 微光、 仰望星空、 道阻且右、 Moonquakes、 Rx、 FairyAlo、 墨非白、 发粪涂墙、 团子、 Zruiry、 Hood、 @LoyDgIk、 ivnyoov、 Killer、 子丑寅卯、 \\\\n嗨又是我、 147258、 Hi、 枫林雨殇、 dy2020、小棉袄🌞、永远の明日 ',\\n    col_type: \\\"text_center_1\\\",\\nextra: {\\n        lineVisible: false\\n    },\\nurl:\\\"toast://特别鸣谢\\\"\\n})\\n\\neditMode = getMyVar('editMode', '显示/隐藏')\\nlet config = ['显示/隐藏', '重新排序', '删除博主','更改头像', '更改名称']\\n\\nconfig.forEach((v) => {\\n    el.push({\\n        title: v == editMode ? '““””' + v.bold().fontcolor('#12b668') : v,\\n        url: v == editMode ? 'hiker://empty' : $('#noLoading#').lazyRule((v) => {\\n            putMyVar('editMode', v)\\n            refreshPage(false)\\n            return 'hiker://empty'\\n        }, v),\\n        col_type: 'scroll_button'\\n    })\\n})\\n\\nJson = JSON.parse(readFile('qingting.txt') || '[]');\\nif(!Json.length){\\nel.push({\\ntitle:\\\"暂无博主，快去搜索订阅吧\\\",\\ncol_type:\\\"text_center_1\\\",\\nurl:\\\"toast://快去搜索吧\\\"\\n})\\n}\\n\\n\\nif (editMode == \\\"删除博主\\\") {\\n   if(Json.length){\\n    el.push({\\n        title: \\\"确认删除\\\",\\n        col_type: \\\"text_center_1\\\",\\n        url: $('#noLoading#').lazyRule((Json) => {\\n            let rules = [];\\n            Json.forEach((x) => {\\n                !x.delete ? rules.push(x) : null\\n            })\\n            saveFile('qingting.txt', JSON.stringify(rules))\\n            refreshPage(false)\\n            return 'toast://删除成功'\\n        }, Json)\\n    })\\n}\\n}\\nJSON.parse(readFile('qingting.txt') || '[]').forEach((v, i) => {\\n    let d = {\\n        title: v.title,\\n        img: v.img\\n    }\\n    switch (editMode) {\\n        case '显示/隐藏':\\n            d.title = (v.visible ? '🟢  ' : '🔴  ') + d.title\\n            d.url = $('#noLoading#').lazyRule((i) => {\\n                let rules = JSON.parse(readFile('qingting.txt') || '[]')\\n                rules[i].visible = !rules[i].visible\\n                saveFile('qingting.txt', JSON.stringify(rules))\\n                refreshPage(false)\\n                return 'hiker://empty'\\n            }, i)\\n            break\\n        case '删除博主':\\n            d.title = (v.delete ? '❌  ' : '') + d.title\\n            d.url = $('#noLoading#').lazyRule((i) => {\\n                let rules = JSON.parse(readFile('qingting.txt') || '[]')\\n                rules[i].delete = !rules[i].delete\\n                saveFile('qingting.txt', JSON.stringify(rules))\\n                refreshPage(false)\\n                return 'hiker://empty'\\n            }, i)\\n            break\\n        case '重新排序':\\n            let sortFlag = parseInt(getMyVar('sortFlag', '-1'))\\n            d.title = (sortFlag == i ? '🔃  ' : '') + d.title\\n            if (sortFlag == -1)\\n                d.url = $('#noLoading#').lazyRule((i) => {\\n                    putMyVar('sortFlag', i.toString())\\n                    refreshPage(false)\\n                    return 'toast://选择要移动到的位置'\\n                }, i)\\n            else\\n                d.url = $('#noLoading#').lazyRule((oldIndex, newIndex) => {\\n                    let rules = JSON.parse(readFile('qingting.txt') || '[]')\\n                    rules.splice(newIndex, 0, rules.splice(oldIndex, 1)[0])\\n                    saveFile('qingting.txt', JSON.stringify(rules))\\n                    putMyVar('sortFlag', '-1')\\n                    refreshPage(false)\\n                    return 'hiker://empty'\\n                }, sortFlag, i)\\n            break\\n        case '更改头像':\\n            d.url = $(v.img || '', '输入新图标地址或颜色代码：').input((i) => {\\n                let rules = JSON.parse(readFile('qingting.txt') || '[]')\\n                if (input)\\n                    rules[i].img = input\\n                else\\n                    delete rules[i].img\\n                saveFile('qingting.txt', JSON.stringify(rules))\\n                refreshPage(false)\\n                return 'hiker://empty'\\n            }, i)\\n            break\\n        case '更改名称':\\n            d.url = $(v.title || '', '输入新名称：').input((i) => {\\n                let rules = JSON.parse(readFile('qingting.txt') || '[]')\\n                if (input)\\n                    rules[i].title = input\\n                else\\n                    delete rules[i].title\\n                saveFile('qingting.txt', JSON.stringify(rules))\\n                refreshPage(false)\\n                return 'hiker://empty'\\n            }, i)\\n            break\\n    }\\n    el.push(d)\\n})\\n\\nsetResult(el)\"},{\"name\":\"时间转换函数\",\"path\":\"time.html\",\"rule\":\"//时间转换函数\\nfunction formatDate2(inputTime) {\\n    var date = new Date(inputTime);\\n    var y = date.getFullYear();\\n    var m = date.getMonth() + 1;\\n    m = m < 10 ? ('0' + m) : m;\\n    var d = date.getDate();\\n    d = d < 10 ? ('0' + d) : d;\\n    return y +'-' + m + '-' + d;\\n};\\n\\nfunction formatDate(now) {\\n    var time = formatDate2(now)\\n    var date1 = new Date(now)\\n    var date2 = new Date()\\n    var date3 = date2.getTime() - date1.getTime()\\n    var days = Math.floor(date3 / (24 * 3600 * 1000))\\n    var leave1 = date3 % (24 * 3600 * 1000) \\n    var hours = Math.floor(leave1 / (3600 * 1000))\\n    var leave2 = leave1 % (3600 * 1000)\\n    var minutes = Math.floor(leave2 / (60 * 1000))\\n    var leave3 = leave2 % (60 * 1000)\\n    if (days < 1 && hours < 1) { return minutes + \\\"分前\\\" } else if (days < 1) { return hours + \\\"小时 \\\" + minutes + \\\"分前\\\" } else {\\n        if (days < 7) {\\n            return days + \\\"天 \\\" + hours + \\\"小时前 \\\"\\n        } else { return time }\\n    }\\n}\\n\\n\\nfunction timestampToTime(timestamp) {\\n        var date = new Date(timestamp);//时间戳为10位需*1000，时间戳为13位的话不需乘1000\\n        Y = date.getFullYear() + '/';\\n        M = (date.getMonth()+1 < 10 ? '0'+(date.getMonth()+1) : date.getMonth()+1) + '/';\\n        D = date.getDate() + ' ';\\n        h = date.getHours() + ':';\\n        m = date.getMinutes() + ':';\\n        s = date.getSeconds();\\n        return m+s;\\n}\"},{\"col_type\":\"movie_2\",\"name\":\"搜索\",\"path\":\"search.html\",\"rule\":\"addListener('onClose', $.toString(() => {\\n        clearMyVar(\\\"search\\\")\\n    }))\\n//时间函数\\neval(JSON.parse(fetch(\\\"hiker://page/time.html\\\")).rule)\\n//剧集\\nfunction searchChannels(url, d) {\\n    html = fetch(url, {\\n            headers: {\\n                \\\"User-Agent\\\": PC_UA\\n            }\\n        });\\n    let Json = JSON.parse(html); //专辑列表对象\\n    if (Json.success == true) {\\n        dramaList = Json.info.Datas;\\n        dramaList.forEach(list => {\\n            d.push({\\n                title: list.name + \\\"更新至\\\" + list.newest,\\n                url: \\\"hiker://page/channels.html?page=fypage\\\",\\n                img: list.cover,\\n                desc: '0',\\n                extra: {\\n                    drama_id: list.id,\\n                    abstract: list.abstract,\\n                    view_count: list.view_count,\\n                    type_name: list.type_name,\\n                    checked: list.checked,\\n                },\\n                col_type: \\\"card_pic_2\\\"\\n            });\\n        })\\n    }\\n    return d;\\n}\\n\\n//音乐\\nfunction searchSounds(url, d) {\\n    html = fetch(url, {\\n            headers: {\\n                \\\"User-Agent\\\": PC_UA\\n            }\\n        });\\n    let Json = JSON.parse(html); //专辑列表对象\\n    if (Json.success == true) {\\n        soundList = Json.info.Datas;\\n        soundList.forEach(list => {\\n    d.push({\\n        title: list.soundstr + timestampToTime(list.create_time),\\n        url: \\\"hiker://page/detail.html?page=fypage\\\",\\n        img: list.front_cover,\\n        desc: '0',\\n        extra: {\\n            href: String('https://www.missevan.com/sound/' + list.id),\\n            sound_id: list.id,\\n            duration: list.duration,\\n            view_count_formatted: list.view_count_formatted,\\n            all_comments: list.all_comments,\\n            checked: list.checked,\\n        },\\n        col_type: \\\"card_pic_2\\\"\\n    });\\n\\t});\\n    }\\n    return d;\\n}\\n\\n//UP\\nfunction searchUP(url, d) {\\n    html = fetch(url, {\\n            headers: {\\n                \\\"User-Agent\\\": PC_UA\\n            }\\n        });\\n    let Json = JSON.parse(html); //专辑列表对象\\n    if (Json.success == true) {\\n        UPList = Json.info.Datas;\\n        UPList.forEach(list => {\\n    d.push({\\n        title: list.username ,\\n        url: \\\"hiker://page/podcasters.html?page=fypage\\\",\\n        img: \\\"https://static.maoercdn.com/avatars/\\\"+list.avatar,\\n        desc: '0',\\n        extra: {\\n            href: String(\\\"https://www.missevan.com/\\\" + list.id)\\n        },\\n        col_type: \\\"icon_round_4\\\"\\n    });\\n\\t});\\n    }\\n    return d;\\n}\\n//声优\\nfunction searchVocalExcellence(url, d) {\\n    html = fetch(url, {\\n            headers: {\\n                \\\"User-Agent\\\": PC_UA\\n            }\\n        });\\n    let Json = JSON.parse(html); //专辑列表对象\\n    if (Json.success == true) {\\n        vocalExcellence = Json.info.Datas;\\n        vocalExcellence.forEach(list => {\\n    d.push({\\n        title: list.name ,\\n        url: \\\"hiker://page/vocalExcellences.html?page=fypage\\\",\\n        img:list.icon,\\n        desc: list.profile,\\n        extra: {\\n         vocalExcellence_id :list.id,\\n        },\\n        col_type: \\\"icon_round_4\\\"\\n    });\\n\\t});\\n    }\\n    return d;\\n}\\n//搜索选择开始\\nmode = getMyVar(\\\"mode\\\", \\\"📝 综合\\\")\\n    if (MY_PAGE == 1) {\\n        d.push({\\n            url: \\\"'toast://搜索成功';refreshPage()\\\",\\n            col_type: 'input',\\n            title: '搜索',\\n            desc: \\\"搜索\\\",\\n            extra: {\\n                onChange: \\\"putMyVar('my-search',input)\\\"\\n            }\\n        })\\n\\n        slist = [\\\"📝 综合\\\", \\\"👤 UP主\\\", \\\"🖼 声优\\\", \\\"#️⃣ 剧集\\\"]; //\\\"🎥 电台\\\"\\n        slist.forEach((x) => {\\n            clearVar(\\\"search\\\")\\n            d.push({\\n                col_type: \\\"scroll_button\\\",\\n                title: x == mode ? '““””' + x.bold().fontcolor('#12b668') : x,\\n                url: $(\\\"#noLoading#\\\").lazyRule((x) => {\\n                    putMyVar(\\\"mode\\\", x);\\n                    refreshPage(false);\\n                    return \\\"hiker://empty\\\"\\n                }, x)\\n            })\\n        })\\n    }\\n    //搜索选择结束\\n\\n\\n    let search = getMyVar(\\\"my-search\\\");\\nif (search) {\\n    putMyVar(\\\"search\\\", search)\\n}\\nsearchn = getMyVar(\\\"search\\\")\\n\\n    //判断搜索内容\\n    switch (mode) {\\n    case \\\"👤 UP主\\\":\\n       url = \\\"https://www.missevan.com/sound/getsearch?s=\\\"+searchn+\\\"&p=\\\"+MY_PAGE+\\\"&type=1&page_size=24\\\"\\n            searchUP(url, d);\\n            toast('UP主')\\n        break\\n    case \\\"🎥 电台\\\":\\n        url = \\\"https://www.qingting.fm/search/channel_live/\\\" + searchn + \\\"/\\\" + MY_PAGE\\n            if (searchn) {\\n                html = fetch(url, {\\n                        headers: {\\n                            \\\"User-Agent\\\": PC_UA\\n                        }\\n                    });\\n                channel_live(html, d);\\n                toast('电台')\\n            }\\n            break\\n        case \\\"🖼 声优\\\":\\n\\t\\t  url = \\\"https://www.missevan.com/sound/getsearch?s=\\\"+searchn+\\\"&p=\\\"+MY_PAGE+\\\"&type=4&page_size=30\\\"\\n            searchVocalExcellence(url, d);\\n            toast('搜索声优')\\n            break\\n        case \\\"📝 综合\\\":\\n            url = \\\"https://www.missevan.com/dramaapi/search?s=\\\" + searchn + \\\"&page=\\\" + MY_PAGE;\\n        searchChannels(url, d);\\n\\t\\tsound_url = \\\"https://www.missevan.com/sound/getsearch?s=\\\"+searchn+\\\"&p=\\\"+MY_PAGE+\\\"&type=3&page_size=30\\\"\\n            searchSounds(sound_url, d);\\n            break\\n        case \\\"#️⃣ 剧集\\\":\\n            url = \\\"https://www.missevan.com/dramaapi/search?s=\\\" + searchn + \\\"&page=\\\" + MY_PAGE;\\n        searchChannels(url, d);\\n        toast('剧集');\\n        break\\n\\n    }\\n\"},{\"col_type\":\"movie_3\",\"name\":\"主播页面\",\"path\":\"podcasters.html\",\"rule\":\"js:\\nd = [];\\nurl = MY_PARAMS.href; //前问desc获取\\npage = MY_PAGE; //前问desc获取\\nMY_URL = url;\\nlet user_id = url.match(/(\\\\d{5,15})/)[1];\\neval(JSON.parse(fetch(\\\"hiker://page/time.html\\\")).rule)\\nif (page == 1) {\\n    var html = fetch(url, {\\n        headers: {\\n            \\\"User-Agent\\\": PC_UA\\n        }\\n    });\\n    let img = pd(html, '#topusermainicon&&img&&src');\\n    let name = pdfh(html, '#t_u_n&&a&&Text');\\n    let desc = pdfh(html, '#t_u_n_a&&Text');\\n    let Json = {\\n        \\\"name\\\": name,\\n        \\\"img\\\": img,\\n        \\\"url\\\": url,\\n    };\\n    d.push({\\n        title: name,\\n        img: img + \\\"@Referer=\\\",\\n        //  url: \\\"hiker://page/info.html#immersiveTheme#\\\",\\n        col_type: \\\"icon_round_4\\\",\\n        extra: {}\\n    }, {\\n        title: \\\"<small>  <font color ='#888'>\\\" + desc + \\\"</font>\\\" + \\\"</small>\\\",\\n        col_type: 'rich_text',\\n    })\\n\\n    lurl = $(\\\"#noLoading#\\\").lazyRule((Json) => {\\n        clearVar(\\\"url\\\");\\n        r = readFile('qingting.txt');\\n        j = r ? JSON.parse(r) : [];\\n        t = Json ? Json : null;\\n        if (t) {\\n            flag = true;\\n            j.forEach(x => x.extra.href == t.url ? (flag = false) : null)\\n            if (flag) {\\n                j.push({\\n                    visible: true,\\n                    delete: false,\\n                    title: t.name,\\n                    img: t.img + \\\"@Referer=\\\",\\n                    url: \\\"hiker://page/podcasters.html?page=fypage\\\",\\n                    extra: {\\n                        href: String(t.url)\\n                    },\\n                    data: {\\n                        img: t.img + \\\"@Referer=\\\"\\n                    }\\n                })\\n                saveFile('qingting.txt', JSON.stringify(j));\\n                back(true);\\n            } else {\\n\\n                back(true);\\n\\n            }\\n            return 'toast://已订阅该博主';\\n        }\\n    }, Json);\\n\\n    d.push({\\n        title: \\\"订阅博主\\\",\\n        col_type: \\\"text_center_1\\\",\\n        url: lurl\\n    })\\n}\\n\\n\\nvar tf1 = \\\"drama\\\";\\nvar tf2 = \\\"sound\\\";\\nif(getMyVar('refresh_drama'))putMyVar('refresh_drama', 0);//0，可以释放，1不释放\\nif(getMyVar('refresh_sound'))putMyVar('refresh_sound', 1);\\nlet upCollectionType = getMyVar(\\\"upCollectionType\\\", \\\"音乐\\\");\\nvar dramaHtml = \\\"\\\";\\ndramaList = [];\\nvar soundHtml = \\\"\\\";\\nsoundList = [];\\nif (upCollectionType == \\\"音乐\\\") {\\n    soundHtml = fetch(\\\"https://www.missevan.com/person/getusersound?p=\\\" + page + \\\"&order=0&s=&user_id=\\\" + user_id + \\\"&page_size=30\\\", {\\n        headers: {\\n            \\\"User-Agent\\\": PC_UA\\n        }\\n    }); //up主发布的音乐列表api\\n    try {\\n        let soundHtmlJson = JSON.parse(soundHtml);\\n        if (soundHtmlJson.success == true) {\\n            soundList = soundHtmlJson.info.Datas; //up主发布的音乐列表对象\\n        }\\n    } catch (e) {}\\n} else {\\n    dramaHtml = fetch(\\\"https://www.missevan.com/dramaapi/getuserdramas?page=\\\" + page + \\\"&user_id=\\\" + user_id + \\\"&order=0&s=&page_size=30\\\", {\\n        headers: {\\n            \\\"User-Agent\\\": PC_UA\\n        }\\n    }); //up主发布的专辑列表api\\n    try {\\n        let dramaHtmlJson = JSON.parse(dramaHtml);\\n        if (dramaHtmlJson.success == true) {\\n            dramaList = dramaHtmlJson.info.Datas; //up主发布的专辑列表对象\\n        }\\n    } catch (e) {}\\n}\\nif(page==1){\\n//专辑\\nd.push({\\n    title: upCollectionType == \\\"专辑\\\" ? '““””<font color = \\\"red\\\"> 专辑 </font>' : '专辑',\\n    col_type: 'text_2',\\n    extra: {\\n        lineVisible: false,\\n        id: 'drama'\\n    },\\n    url: $('#noLoading#').lazyRule((dramaList, upCollectionType, dramaHtml, page, user_id, tf1, tf2) => {\\n        if (dramaHtml == '') {\\n            dramaHtml = fetch(\\\"https://www.missevan.com/dramaapi/getuserdramas?page=\\\" + page + \\\"&user_id=\\\" + user_id + \\\"&order=0&s=&page_size=30\\\", {\\n                headers: {\\n                    \\\"User-Agent\\\": PC_UA\\n                }\\n            }); //up主发布的专辑列表api\\n            try {\\n                let dramaHtmlJson = JSON.parse(dramaHtml);\\n                if (dramaHtmlJson.success == true) {\\n                    dramaList = dramaHtmlJson.info.Datas; //up主发布的专辑列表对象\\n                }\\n            } catch (e) {}\\n        }\\n\\t\\tputMyVar(\\\"upCollectionType\\\", \\\"专辑\\\")\\n        if (getMyVar('refresh_' + tf1) == 0) {\\n\\t\\t    putMyVar('refresh_' + tf2, 0);\\n            putMyVar('refresh_' + tf1, 1);\\n\\t\\tdramaList.forEach((list, index) => {           \\n                deleteItem(tf2 + 'item');\\n                addItemAfter(tf2, {\\n                    title: list.name + \\\" 更新至 \\\" + list.newest,\\n                    url: \\\"hiker://page/channels.html?page=fypage\\\",\\n                    img: list.cover,\\n                    col_type: \\\"card_pic_2\\\",\\n\\t\\t\\t\\t         desc:'0',\\n                    extra: {\\n\\t\\t\\t\\t\\t    drama_id:list.id,\\n                        abstract: list.abstract,\\n                        view_count: list.view_count,\\n                        type_name: list.type_name,\\n                        checked: list.checked,\\n                        id: tf1 + 'item',\\n                    }\\n                });\\n\\t\\t\\t\\t})\\n                updateItem(tf1, {\\n                    title: '““””<font color = \\\"red\\\">专辑</font>',\\n                });updateItem(tf2, {\\n                    title: \\\"音乐\\\",\\n                });\\n            }\\n\\t\\treturn;\\n    }, dramaList, upCollectionType, dramaHtml, page, user_id, tf1, tf2),\\n});\\n//音乐\\nd.push({\\n    title: upCollectionType == \\\"音乐\\\" ? '““””<font color = \\\"red\\\">音乐</font>' : '音乐',\\n    col_type: 'text_2',\\n    extra: {\\n        lineVisible: false,\\n        id: 'sound'\\n    },\\n    url: $('#noLoading#').lazyRule((soundList, upCollectionType, soundHtml, page, user_id, tf1, tf2) => {\\n        if (soundHtml == '') {\\n            soundHtml = fetch(\\\"https://www.missevan.com/person/getusersound?p=\\\" + page + \\\"&order=0&s=&user_id=\\\" + user_id + \\\"&page_size=30\\\", {\\n                headers: {\\n                    \\\"User-Agent\\\": PC_UA\\n                }\\n            }); //up主发布的音乐列表api\\n            try {\\n                let soundHtmlJson = JSON.parse(soundHtml);\\n                if (soundHtmlJson.success == true) {\\n                    soundList = soundHtmlJson.info.Datas; //up主发布的音乐列表对象\\n                }\\n            } catch (e) {}\\n        }\\n\\t\\tputMyVar(\\\"upCollectionType\\\", \\\"音乐\\\")\\n\\t\\tif (getMyVar('refresh_' + tf2) == 0) {\\n\\t\\t    putMyVar('refresh_' + tf1, 0);\\n            putMyVar('refresh_' + tf2, 1);\\n        soundList.forEach((list, index) => {\\n                deleteItem(tf1 + 'item');\\n                addItemAfter(tf2, {\\n                    title: list.soundstr, // + timestampToTime(list.create_time),\\n                    url: \\\"hiker://page/detail.html?page=fypage\\\",\\n                    img: list.front_cover,\\n                    desc: '0',\\n                    extra: {\\n                        href: String('https://www.missevan.com/sound/' + list.id),\\n                        sound_id: list.id,\\n                        id: tf2 + 'item',\\n                        duration: list.duration,\\n                        view_count_formatted: list.view_count_formatted,\\n                        all_comments: list.all_comments,\\n                        checked: list.checked,\\n                    },\\n                    col_type: \\\"card_pic_2\\\"\\n                });\\n\\t\\t\\t\\t})\\n                updateItem(tf2, {\\n                    title: '““””<font color = \\\"red\\\">音乐</font>',\\n                });\\n\\t\\t\\t\\tupdateItem(tf1, {\\n                    title: \\\"专辑\\\",\\n                });\\n            }\\n\\t\\t\\treturn;\\n    }, soundList, upCollectionType, soundHtml, page, user_id, tf1, tf2),\\n});\\n}\\nif (upCollectionType == \\\"音乐\\\") {\\nsoundList.forEach(list => {\\n    d.push({\\n        title: list.soundstr + timestampToTime(list.create_time),\\n        url: \\\"hiker://page/detail.html?page=fypage\\\",\\n        img: list.front_cover,\\n        desc: '0',\\n        extra: {\\n            href: String('https://www.missevan.com/sound/' + list.id),\\n            sound_id: list.id,\\n            duration: list.duration,\\n            view_count_formatted: list.view_count_formatted,\\n            all_comments: list.all_comments,\\n            checked: list.checked,\\n\\t\\t\\tid: tf2 + 'item',\\n        },\\n        col_type: \\\"card_pic_2\\\"\\n    });\\n\\t});\\n} else {\\n\\tdramaList.forEach(list => {\\n    d.push({\\n        title: list.name + \\\"更新至\\\"+list.newest,\\n        url: \\\"hiker://page/channels.html?page=fypage\\\",\\n        img: list.cover,\\n        desc: '0',\\n        extra: {\\n            drama_id: list.id,\\n            abstract: list.abstract,\\n            view_count: list.view_count,\\n            type_name: list.type_name,\\n            checked: list.checked,\\nid: tf1 + 'item',\\n        },\\n        col_type: \\\"card_pic_2\\\"\\n    });\\n})\\n}\\nsetResult(d)\"},{\"col_type\":\"text_1\",\"name\":\"专辑页面\",\"path\":\"channels.html\",\"rule\":\"js:\\nvar d = [];\\neval(JSON.parse(fetch(\\\"hiker://page/time.html\\\")).rule)\\ndrama_id = MY_PARAMS.drama_id; //前问desc获取\\npage = MY_PAGE; //前问desc获取\\ntrue_url = \\\"https://www.missevan.com/dramaapi/getdrama?drama_id=\\\" + drama_id;\\nif (Number(page) > 1) {\\n    true_url += '/' + page\\n}\\nif (page == 1) {\\n    var html = fetch(true_url, {\\n            headers: {\\n                \\\"User-Agent\\\": PC_UA\\n            }\\n        });\\n    soundList = [];\\n    dramaId = ''; //专辑id\\n    dramaName = ''; //专辑名\\n    userId = \\\"\\\";\\n    cover = \\\"\\\";\\n    abstract = \\\"\\\"; //专辑详情\\n    newest = \\\"\\\"; //更新至\\n    view_count = \\\"\\\"; //总播放量\\n    type = ''; //类型\\n    tags = []; //标签\\n    try {\\n        let Json = JSON.parse(html); //专辑列表对象\\n        if (Json.success == true) {\\n            soundList = Json.info.episodes.episode;\\n            dramaId = Json.info.drama.id;\\n            dramaName = Json.info.drama.name;\\n            userId = Json.info.drama.user_id;\\n            cover = Json.info.drama.cover;\\n            abstract = Json.info.drama.abstract;\\n            newest = Json.info.drama.newest;\\n            view_count = Json.info.drama.view_count;\\n            type = Json.info.drama.type;\\n            tags = Json.info.drama.tags;\\n        }\\n    } catch (e) {}\\n  if (dramaName != '') {\\n        setPageTitle(dramaName);\\n    }\\n  d.push({\\n        title: dramaName,\\n        img: cover,\\n        url: 'hiker://page/channels.html?page=fypage',\\n        col_type: 'card_pic_2',\\n        desc: '0',\\n        extra: {\\n            drama_id: drama_id,\\n        },\\n    }, {\\n        title: '<small><font color=\\\"#808080\\\">' + \\\"总播放量：\\\" + view_count + '<br>' + \\\"已更新至：\\\" + newest + '<br>' + \\\"类型：\\\" + type + '<br>' + \\\"标签：\\\" + tags.join(\\\"、\\\") + '</font>&nbsp;&nbsp;&nbsp;' + '</small>',\\n        col_type: \\\"rich_text\\\",\\n    });\\n   //专辑\\n    soundList.forEach(list => {\\n        d.push({\\n            title: ('““””<small><font color=\\\"#808080\\\">' + list.soundstr + '</font>&nbsp;&nbsp;&nbsp;' + '</small>'),\\n            url: \\\"hiker://page/detail.html?page=fypage\\\",\\n            extra: {\\n                href: String('https://www.missevan.com/sound/' + list.sound_id),\\n                sound_id: list.sound_id,\\n\\t\\t\\t  lineVisible:false,\\n            },\\n            col_type: \\\"text_1\\\"\\n        });\\n    });\\n}\\n\\nsetResult(d);\\n\"},{\"col_type\":\"rich_text\",\"name\":\"详情\",\"path\":\"detail.html\",\"rule\":\"js:\\nvar d = [];\\nurl = MY_PARAMS.href; //前问desc获取\\nlet id = url.match(/sound\\\\/(\\\\d{5,15})/)[1];\\n\\nif (MY_PAGE == 1) {\\n    var html = fetch(url, {\\n            headers: {\\n                \\\"User-Agent\\\": PC_UA\\n            }\\n        });\\n    var infoContanier = pd(html, '#sound-cover-info-contanier&&Html'); //详情html\\n    var classification = pdfa(infoContanier, \\\".cover-breadcrumb&&a\\\"); //分类合集\\n    var playtimes = pdfh(infoContanier, '#i_soundnumleft&&.text-playtimes&&Text'); //播放\\n    var dmtimes = pdfh(infoContanier, '#i_soundnumleft&&.text-dmtimes&&Text'); //弹幕\\n    var catear = pdfh(infoContanier, '#i_soundnumleft&&.text-catear&&Text'); //投食\\n    var liketimes = pdfh(infoContanier, '#i_soundnumleft&&.text-liketimes&&Text'); //喜欢\\n    var i_soundnumright = pdfh(infoContanier, '#i_soundnumleft&&#i_soundnumright&&Text'); //发布于\\n    var sound_tag = pdfa(infoContanier, \\\"#sound_tag&&a\\\"); //标签合集\\n    var coverImg = pdfh(html, \\\"#cover-img&&img&&src\\\"); //专辑封面图\\n\\n\\n    var soundHtml = fetch(\\\"https://www.missevan.com/sound/getsound?soundid=\\\" + id, {\\n            headers: {\\n                \\\"User-Agent\\\": PC_UA\\n            }\\n        }); //详情名称和作者相关api\\n    let soundJson = JSON.parse(soundHtml);\\n    var title = '';\\n    var intro = '';\\n    let soundUrl = '';\\n    let soundurl_128 = '';\\n    try {\\n        soundUrl = soundJson.info.sound.soundurl;\\n    } catch (e) {};\\n    try {\\n        soundurl_128 = soundJson.info.sound.soundurl_128;\\n    } catch (e) {};\\n    try {\\n        intro = soundJson.info.sound.intro;\\n    } catch (e) {\\n        intro = pdfh(infoContanier, \\\".intro&&Html\\\");\\n    };\\n    intro = intro.replace(/<p>/g, \\\"\\\").replace(/<\\\\/p>/g, ''); //音频简介\\n    try {\\n        title = soundJson.info.sound.soundstr;\\n    } catch (e) {\\n        title = pdfh(infoContanier, '#sound-cover-info&&.cover-title&&Text'); //详情头\\n    };\\n    setPageTitle(title);\\n    var dramabysoundHtml = fetch(\\\"https://www.missevan.com/dramaapi/getdramabysound?sound_id=\\\" + id, {\\n            headers: {\\n                \\\"User-Agent\\\": PC_UA\\n            }\\n        }); //专辑相关api\\n    soundList = [];\\n\\tdramaId='';//专辑id\\n\\tdramaName='';//专辑名\\n    try {\\n        let dramabysoundJson = JSON.parse(dramabysoundHtml); //专辑列表对象\\n        soundList = dramabysoundJson.info.episodes.episode;\\n\\t\\tdramaId= dramabysoundJson.info.drama.id;\\n\\t\\tdramaName= dramabysoundJson.info.drama.name;\\n    } catch (e) {}\\n\\n    var dmHtml = fetch(\\\"https://www.missevan.com/sound/getdm?soundid=\\\" + id, {\\n            headers: {\\n                \\\"User-Agent\\\": PC_UA\\n            }\\n        }); //弹幕api\\n    let dmList = pdfa(dmHtml, \\\"body&&d\\\"); //弹幕列表\\n\\n    d.push({\\n        title: dramaName,\\n        img: coverImg,\\n\\t\\turl:dramaId!=''?'hiker://page/channels.html?page=fypage':'',\\n        col_type: 'card_pic_2',\\n        desc: '0',\\n\\t\\textra:{\\n\\t\\t\\tdrama_id:dramaId,\\n\\t\\t},\\n    }, {\\n        title: title,\\n        col_type: 'text_1',\\n    }, {\\n        title: soundJson.info.user.username,\\n        img: soundJson.info.user.icon,\\n        url: \\\"hiker://page/podcasters.html?page=fypage\\\",\\n        extra: {\\n            href: String(\\\"https://www.missevan.com/\\\" + soundJson.info.user.id)\\n        },\\n        col_type: 'avatar'\\n    }, {\\n        title: \\\"<small>  <font color ='#979797'>\\\" + soundJson.info.user.intro + \\\"<br>\\\" + \\\"&nbsp;投稿:\\\" + soundJson.info.user.soundnum + \\\"&nbsp;粉丝:\\\" + soundJson.info.user.fansnum + \\\"</font>\\\" + \\\"</small> \\\",\\n        col_type: 'rich_text',\\n    }, {\\n        title: \\\"<big>音频简介</big><br><small>  <font color ='#979797'>\\\" + intro + \\\"</font>\\\" + \\\"</small> \\\",\\n        col_type: 'rich_text',\\n    }, {\\n        title: \\\"<small>  <font color ='#888'>\\\" + playtimes + dmtimes + catear + liketimes + i_soundnumright + \\\"</font>\\\" + \\\"</small>\\\",\\n        col_type: 'rich_text',\\n    }, {\\n        title: '▶️',\\n        url: soundUrl,\\n        col_type: 'text_2',\\n    }, {\\n        title: '▶️128',\\n        url: soundurl_128,\\n        col_type: 'text_2',\\n    })\\n\\n    //标签合集\\n    classification.forEach(item => {\\n        d.push({\\n            title: pdfh(item, \\\"a&&Text\\\"),\\n            url: pdfh(item, \\\"a&&href\\\"),\\n            col_type: 'flex_button',\\n        })\\n    })\\n    //分类合集\\n    sound_tag.forEach(item => {\\n        d.push({\\n            title: pdfh(item, \\\"a&&Text\\\"),\\n            url: pdfh(item, \\\"a&&href\\\"),\\n            col_type: 'flex_button',\\n        })\\n    });\\n\\n    //专辑\\n    soundList.forEach(list => {\\n        d.push({\\n            title: id != list.sound_id ? ('““””<small><font color=\\\"#808080\\\">' + list.soundstr + '</font>&nbsp;&nbsp;&nbsp;' + '</small>') : list.soundstr,\\n            url: id != list.sound_id ? \\\"hiker://page/detail.html?page=fypage\\\" : \\\"\\\",\\n            extra: {\\n                href: String('https://www.missevan.com/sound/' + list.sound_id),\\n                sound_id: list.sound_id,\\n            },\\n            col_type: \\\"text_1\\\"\\n        });\\n    })\\n}\\nvar commentHtml = fetch(\\\"https://www.missevan.com/site/getcomment?type=1&eId=\\\" + id + \\\"&order=3&p=\\\" + MY_PAGE + \\\"&pagesize=20\\\", {\\n        headers: {\\n            \\\"User-Agent\\\": PC_UA\\n        }\\n    }); //专辑相关api\\nlet commentJson = JSON.parse(commentHtml); //专辑列表对象\\ncommentList = commentJson.info.comment.Datas;\\ncommentList.forEach(list => {});\\nsetResult(d);\\n\"},{\"col_type\":\"movie_3\",\"name\":\"电台\",\"path\":\"radiopage.html\",\"rule\":\"\\nvar getRangeColors = function() {       \\n    return '#' + ('00000' + (Math.random() * 0x1000000 << 0).toString(16)).substr(-6);     \\n}\\n\\nconst 分类颜色 = getRangeColors()\\nconst 大类定位 = 'body&&.channelMenu'\\n//const 拼接分类 = 'body&&.menuItem'\\nconst 小类定位 = 'body&&a:not(:matches(4|专|荧|分类|省市台|APP))'\\nconst 分类标题 = 'a&&Text'\\nconst 分类链接 = 'a&&href'\\nMY_URL = MY_URL.replace('hiker://empty##', '')\\nif(!/radio/.test(getVar(MY_RULE.url))){\\n  clearVar(MY_RULE.url);\\n   clearVar(MY_RULE.title);\\n}\\nlet true_url = getVar(MY_RULE.url, mUrl+'/radiopage/3/1')\\nif(getVar(MY_RULE.url)){\\n  if(page!=1){\\n\\ttrue_url = true_url.replace(/(http.+?\\\\/\\\\d{1,5}\\\\/)\\\\d{1,3}/, '$1' + page );\\n  }\\n}\\nvar html = fetch(true_url, {\\n    headers: {\\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0)'\\n    }\\n})\\n//log(html)\\neval(JSON.parse(request('hiker://page/dt')).rule)\\n\\npdfa(html, '.contentSec&&.content-item-root').forEach(list => {\\n    d.push({\\n        title: pdfh(list, 'img&&alt'),\\n        desc: '““””<small><font color=\\\"#808080\\\">' +pdfh(list,'.descRadio&&Text')+'</font>&nbsp;&nbsp;&nbsp;'+pdfh(list, '.playCount&&Text') + '</small>',\\n        img: pd(list, 'img&&src'),\\n        url: \\\"hiker://page/radio.html?page=fypage\\\",\\n        extra: {\\n            href: String('https://www.qingting.fm' + pdfh(list, 'a&&href'))\\n        },\\n\\t   col_type: \\\"movie_1_left_pic\\\"\\n    });\\n})\"},{\"name\":\"动态分类\",\"path\":\"dt\",\"rule\":\"const empty = \\\"hiker://empty\\\"\\n\\ntry {\\n    var categories = pdfa(html, 大类定位).concat(pdfa(html, 拼接分类))\\n} catch (e) {\\n    var categories = pdfa(html, 大类定位)\\n}\\n//log(categories)\\nlet init_cate = []\\n\\nfor (let i = 0; i < 20; i++) {\\n    init_cate.push(\\\"0\\\")\\n}\\n\\nconst fold = getVar(MY_RULE.group, \\\"0\\\")\\nconst cate_temp_json = getVar(MY_RULE.title, JSON.stringify(init_cate))\\nconst cate_temp = JSON.parse(cate_temp_json)\\n\\nif (parseInt(page) === 1) {\\n    d.push({\\n        title: fold === '1' ? '““””<b><span style=\\\"color: #19B89D\\\">: (</span></b>' : '““””<b><span style=\\\"color: #910113\\\">: )</span></b>',\\n        url: $().lazyRule((fold) => {\\n            putVar(MY_RULE.group, fold === '1' ? '0' : '1');\\n            refreshPage(false);\\n            return \\\"hiker://empty\\\"\\n        }, fold),\\n        col_type: 'scroll_button',\\n    })\\ncategories.forEach((category, index) => {\\n        let sub_categories = pdfa(category, 小类定位);\\n  //log(sub_categories)\\n        if (index === 0) {\\n            sub_categories.forEach((item, key) => {\\n                let title = pdfh(item, 分类标题)\\n                d.push({\\n                    title: key.toString() === cate_temp[index] ? '““””<b><span style=\\\"color: ' + 分类颜色 + '\\\">' + title + '</span></b>' : title,\\n                    url: $(mUrl+pdfh(item, 分类链接) + '#noLoading#').lazyRule((params) => {\\n                        let new_cate = []\\n                        params.cate_temp.forEach((cate, index) => {\\n                            new_cate.push(index === 0 ? params.key.toString() : \\\"0\\\")\\n                        })\\n                        putVar(MY_RULE.title, JSON.stringify(new_cate))\\n                        putVar(MY_RULE.url, input)\\n                        refreshPage(true)\\n                        return \\\"hiker://empty\\\"\\n                    }, {\\n                        cate_temp: cate_temp,\\n                        key: key,\\n                        page: page,\\n                    }),\\n                    col_type: 'scroll_button',\\n                })\\n            })\\n            d.push({\\n                col_type: \\\"blank_block\\\"\\n            });\\n        } else if (fold === '1') {\\n            sub_categories.forEach((item, key) => {\\n                let title = pdfh(item, 分类标题)\\n                d.push({\\n                    title: key.toString() === cate_temp[index] ? '““””<b><span style=\\\"color: ' + 分类颜色 + '\\\">' + title + '</span></b>' : title,\\n                    url: $(mUrl+pdfh(item, 分类链接) + '#noLoading#').lazyRule((params) => {\\n                        params.cate_temp[params.index] = params.key.toString()\\n\\n                        putVar(MY_RULE.title, JSON.stringify(params.cate_temp))\\n                        putVar(MY_RULE.url, input)\\n                        refreshPage(true)\\n                        return \\\"hiker://empty\\\"\\n                    }, {\\n                        cate_temp: cate_temp,\\n                        index: index,\\n                        key: key,\\n                        page: page,\\n                    }),\\n                    col_type: 'scroll_button',\\n                })\\n            })\\n            d.push({\\n                col_type: \\\"blank_block\\\"\\n            });\\n        }\\n    })\\n}\\n\"},{\"name\":\"分类\",\"path\":\"categories.html\",\"rule\":\"\\nvar getRangeColors = function() {       \\n    return '#' + ('00000' + (Math.random() * 0x1000000 << 0).toString(16)).substr(-6);     \\n}\\n\\nconst 分类颜色 = getRangeColors()\\nconst 大类定位 = 'body&&.categoryList'\\nconst 拼接分类 = 'body&&.menuItem'\\nconst 小类定位 = 'body&&a:not(:matches(4|专|荧|资讯|导航|APP))'\\nconst 分类标题 = 'a&&Text'\\nconst 分类链接 = 'a&&href'\\nMY_URL = MY_URL.replace('hiker://empty##', '')\\nif(!/categories/.test(getVar(MY_RULE.url))){\\n  clearVar(MY_RULE.url);\\n   clearVar(MY_RULE.title);\\n}\\nlet true_url = getVar(MY_RULE.url, mUrl+'/categories/')\\n\\n\\nif(getVar(MY_RULE.url)){\\n  if(!/\\\\d/.test(true_url)){\\n\\ttrue_url = mUrl+'/categories/545/0/'+page;\\n  }else{\\n\\tif(page!=1){\\n\\ttrue_url = true_url.replace(/(http.+?\\\\/\\\\d{1,5}\\\\/\\\\d{1,5}\\\\/)\\\\d{1,3}/, '$1' + page )\\n  }\\n }\\n}\\nvar html = fetch(true_url, {\\n    headers: {\\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0)'\\n    }\\n})\\n//log(html)\\neval(JSON.parse(request('hiker://page/dt')).rule)\\n\\npdfa(html, '.contentsContainer&&.content-item-root').forEach(list => {\\n    d.push({\\n        title: pdfh(list, 'img&&alt'),\\n        desc: '““””<small><font color=\\\"#808080\\\">' +pdfh(list,'.playCount&&Text')+'</font>&nbsp;&nbsp;&nbsp;'+pdfh(list, '.desc&&Text') + '</small>',\\n        img: \\\"https:\\\"+pdfh(list, 'img&&src'),\\n        url: \\\"hiker://page/channels.html?page=fypage\\\",\\n        extra: {\\n            href: String('https://www.qingting.fm' + pdfh(list, 'a&&href'))\\n        },\\n\\t   col_type: \\\"movie_1_left_pic\\\"\\n    });\\n})\"},{\"name\":\"电台详情\",\"path\":\"radio.html\",\"rule\":\"js:\\nlet d = [];\\nvar _x5 = $.toString(() => {\\n    fba.log(fba.getUrls())\\n    var urls = _getUrls()\\n    for (var i in urls) {\\n        if (urls[i].match(/\\\\.m4a|\\\\.mp4|\\\\.m3u8/)) {\\n            fy_bridge_app.log(urls[i])\\n            return urls[i];\\n        }\\n    }\\n});\\n\\n//通免\\nvar lazy = $(\\\"\\\").lazyRule(() => {\\n   \\n        var play = input;\\n        showLoading(\\\"网页嗅探中,请稍后...\\\");\\n        var video = 'x5Rule://' + play + '@' + $.toString(() => {\\n            var urls = _getUrls()\\n            for (var i in urls) {\\n                if (!urls[i].includes(\\\"v=\\\") && !urls[i].includes(\\\"url=\\\") && urls[i].match(/\\\\.m4a|\\\\.mp4|\\\\.m3u8/)) {\\n                    //fy_bridge_app.log(urls[i])\\n                    return urls[i];\\n                } else if (urls[i].match(/\\\\.flv/)) {\\n                    //fy_bridge_app.log(urls[i])\\n                    return urls[i] + ';{Referer@https://www.bilibili.com/&&User-Agent@Mozilla/5.0}';\\n                }\\n            }\\n        })\\n    \\n    return video\\n});\\neval(JSON.parse(fetch(\\\"hiker://page/time.html\\\")).rule)\\nurl = MY_PARAMS.href; //前问desc获取\\npage = MY_PAGE; //前问desc获取 \\ntrue_url = url;\\nif (Number(page) > 1) {\\n    true_url += '/' + page\\n}\\nlet html = fetch(true_url, {headers: {\\n            \\\"User-Agent\\\": PC_UA\\n        }})\\nlog(html)\\nif (page == 1) {\\n    let prgramInfo = pd(html, '.album-info-root&&Html');\\n    let title = pdfh(prgramInfo, '.info&&.title&&Text');\\n    let rightImg = '';\\n    try {\\n        rightImg = 'https://' + pdfh(prgramInfo, '.bgImg&&style').match(/pic[\\\\s\\\\S]*?jpg/g)[0]; //专辑\\n    } catch (e) {}\\n    let desc = pdfh(prgramInfo, '.desc&&Text');\\n    let audienceCount = pdfh(prgramInfo, '.audienceCount&&Text'); //收听人数\\n\\n    d.push({\\n        title: title,\\n        img: rightImg,\\n        col_type: 'card_pic_2',\\n        desc: '0'\\n    },{\\n        title: '‘‘’’' + \\\" <small><font color='#b3d4fc' size='14'>\\\" + \\\"</font> \\\" + \\\"</small><big><font color='#000000' size='22'>\\\" + title + \\\"</font></big>\\\",\\n\\n        col_type: 'text_1',\\n        extra: {\\n            lineVisible: false\\n        }\\n    },{\\n        title:  '‘‘’’' + \\\" <small><font color='#b3d4fc' size='14'>\\\" +\\\"收听人数\\\"+ \\\"</font> \\\" + \\\"</small><big><font color='#000000' size='22'>\\\" + audienceCount + \\\"</font></big>\\\",\\n        col_type: 'text_1',\\n\\t          extra: {\\n            lineVisible: false\\n        }\\n    }, {\\n        title: desc,\\n        col_type: 'rich_text'\\n    }, {\\n    title: '▶️',\\n    img: rightImg,\\n    url: \\\"https://lhttp.qtfm.cn/live/\\\"+url.match(/http.+?(\\\\d{1,6})/)[1]+\\\"/64k.mp3\\\",\\n    col_type: 'text_2',\\n    desc: '0'\\n});\\n}\\n\\n\\nprogramList=[];\\ntry{\\nprogramList=pdfa(html,'body&&.programList');\\n}catch(e){}\\ntableTitle=[];\\ntry{\\ntableTitle=pdfa(html,'body&&.tableTitle');\\n}catch(e){}\\nprogramList.forEach((item,index)=>{\\npdfa(html,'ul&&li').forEach((item,index)=>{\\nd.push({\\ntitle: pdfh(item, '.col1&&Text') + \\\"    \\\"+pdfh(item, '.col2&&Text')+ \\\"    \\\"+pdfh(item, '.col3&&Text'),         \\n            //url: \\\"hiker://page/detail.html\\\",\\n            extra: {\\n                href: String('https://www.qingting.fm' + pdfh(item, 'a&&href')),newWindow: true\\n            },col_type:'text_1'\\n})\\n})\\n})\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"放松页\",\"path\":\"m_54.html\",\"rule\":\"var getRangeColors = function() {       \\n    return '#' + ('00000' + (Math.random() * 0x1000000 << 0).toString(16)).substr(-6);     \\n}\\n\\nconst 分类颜色 = getRangeColors()\\nconst 大类定位 = 'body&&.vw-frontpagecontainer'\\nconst 拼接分类 = '.btn1-group&&.btn1-default'\\nconst 小类定位 = 'body&&a'; //:not(:matches(4|专|荧|分类|省市台|APP))\\nconst 分类标题 = 'a&&Text'\\nconst 分类链接 = 'a&&href'\\nMY_URL = mUrl;\\nif(!/m\\\\/1/.test(getVar(MY_RULE.url))){\\n  clearVar(MY_RULE.url);\\n   clearVar(MY_RULE.title);\\n}\\nlet true_url = getVar(MY_RULE.url, mUrl + '/sound/m/54')\\nif (getVar(MY_RULE.url)) {\\n    if (page != 1) {\\n        true_url = true_url+'&p='+page;\\n    }\\n}\\nvar html = fetch(true_url, {\\n    headers: {\\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0)'\\n    }\\n})\\n\\nconst first_fl = parseDomForArray(html, 'body&&.vw-frontpagecontainer'); //一级分类\\nconst second_fl = parseDomForArray(html, '.btn1-group'); //二级分类\\nconst third_fl = parseDomForArray(html, '#list-label'); //三级分类\\n\\n\\nlet init_cate = []\\nfor (let i = 0; i < 20; i++) {\\n    init_cate.push(\\\"0\\\")\\n}\\n\\n// 取一级分类缓存\\nconst cate_temp_1_json = getVar(MY_RULE.url + \\\"first_fl\\\", JSON.stringify(init_cate));\\nconst cate_temp_1 = JSON.parse(cate_temp_1_json);\\n\\nconst cate_temp_2_json = getVar(MY_RULE.url + \\\"second_fl\\\", JSON.stringify(init_cate));\\nconst cate_temp_2 = JSON.parse(cate_temp_2_json);\\n\\nconst cate_temp_3_json = getVar(MY_RULE.url + \\\"third_fl\\\", JSON.stringify(init_cate));\\nconst cate_temp_3 = JSON.parse(cate_temp_3_json);\\n\\nif (parseInt(page) === 1) {\\n    first_fl.forEach((category, index) => {\\n        //一级分类\\n        let sub_classify = parseDomForArray(category, 'body&&.catalogleaves'); ////需修改\\n        sub_classify.forEach((item, key) => {\\n            let title = parseDomForHtml(item, 'a&&Text')\\n            d.push({\\n                title: key.toString() === cate_temp_1[index] ? '““””<b><font color=' + 分类颜色 + '>' + title + ' </font></b>' : title,\\n                url: $(parseDom(item, 'a&&href')).lazyRule((params) => {\\n                    params.cate_temp_1[params.index] = params.key.toString()\\n                    putVar(MY_RULE.url + \\\"first_fl\\\", JSON.stringify(params.cate_temp_1))\\n                    putVar(MY_RULE.url, input)\\n                    refreshPage(true)\\n                    return \\\"hiker://empty\\\"\\n                }, {\\n                    cate_temp_1: cate_temp_1,\\n                    index: index,\\n                    key: key,\\n                    page: page,\\n                }),\\n                col_type: 'scroll_button',\\n            })\\n        })\\n        d.push({\\n            col_type: \\\"blank_block\\\"\\n        });\\n    })\\n    second_fl.forEach((category, index) => {\\n        //一级分类\\n        let sub_classify = parseDomForArray(category, 'body&&a'); ////需修改\\n        sub_classify.forEach((item, key) => {\\n            let title = parseDomForHtml(item, 'a&&Text')\\n            d.push({\\n                title: key.toString() === cate_temp_2[index] ? '““””<b><font color=' + 分类颜色 + '>' + title + ' </font></b>' : title,\\n                url: $(parseDom(item, 'a&&href')).lazyRule((params) => {\\n                    params.cate_temp_2[params.index] = params.key.toString()\\n                    putVar(MY_RULE.url + \\\"second_fl\\\", JSON.stringify(params.cate_temp_2))\\n                    putVar(MY_RULE.url, input)\\n                    refreshPage(true)\\n                    return \\\"hiker://empty\\\"\\n                }, {\\n                    cate_temp_2: cate_temp_2,\\n                    index: index,\\n                    key: key,\\n                    page: page,\\n                }),\\n                col_type: 'scroll_button',\\n            })\\n        })\\n        d.push({\\n            col_type: \\\"blank_block\\\"\\n        });\\n    })\\n    third_fl.forEach((category, index) => {\\n        //一级分类\\n        let sub_classify = parseDomForArray(category, 'body&&a'); ////需修改\\n        sub_classify.forEach((item, key) => {\\n            let title = parseDomForHtml(item, 'a&&Text')\\n            d.push({\\n                title: key.toString() === cate_temp_3[index] ? '““””<b><font color=' + 分类颜色 + '>' + title + ' </font></b>' : title,\\n                url: $(parseDom(item, 'a&&href')).lazyRule((params) => {\\n                    params.cate_temp_3[params.index] = params.key.toString()\\n                    putVar(MY_RULE.url + \\\"third_fl\\\", JSON.stringify(params.cate_temp_3))\\n                    putVar(MY_RULE.url, input)\\n                    refreshPage(true)\\n                    return \\\"hiker://empty\\\"\\n                }, {\\n                    cate_temp_3: cate_temp_3,\\n                    index: index,\\n                    key: key,\\n                    page: page,\\n                }),\\n                col_type: 'scroll_button',\\n            })\\n        })\\n        d.push({\\n            col_type: \\\"blank_block\\\"\\n        });\\n    })\\n}\\npdfa(html, '.fc-leftcontent-block&&.vw-frontsound-container').forEach(list => {\\n    d.push({\\n        title: pdfh(list, 'img&&alt'),\\n        desc: '““””<small><font color=\\\"#808080\\\">' + pdfh(list, '.vw-frontsound-time&&Text') + '</font>&nbsp;&nbsp;&nbsp;' + pdfh(list, '.vw-frontsound-viewcount&&Text') + '</font>&nbsp;&nbsp;&nbsp;' + pdfh(list, '.vw-frontsound-commentcount&&Text') + '</small>',\\n        img: pd(list, 'img&&data-original'),\\n        url: \\\"hiker://page/detail.html?page=fypage\\\",\\n        extra: {\\n            href: String('https://www.missevan.com' + pdfh(list, 'a&&href'))\\n        },\\n        col_type: \\\"movie_1_left_pic\\\"\\n    });\\n})\"},{\"col_type\":\"movie_3\",\"name\":\"声音恋人\",\"path\":\"m_108.html\",\"rule\":\"var getRangeColors = function() {       \\n    return '#' + ('00000' + (Math.random() * 0x1000000 << 0).toString(16)).substr(-6);     \\n}\\n\\nconst 分类颜色 = getRangeColors()\\nconst 大类定位 = 'body&&.vw-frontpagecontainer'\\nconst 拼接分类 = '.btn1-group&&.btn1-default'\\nconst 小类定位 = 'body&&a'; //:not(:matches(4|专|荧|分类|省市台|APP))\\nconst 分类标题 = 'a&&Text'\\nconst 分类链接 = 'a&&href'\\nMY_URL = mUrl;\\nif (!/m\\\\/1/.test(getVar(MY_RULE.url + \\\"m_108\\\"))) {\\n    clearVar(MY_RULE.url + \\\"m_108\\\");\\n    clearVar(MY_RULE.title);\\n}\\nlet true_url = getVar(MY_RULE.url + \\\"m_108\\\", mUrl + '/sound/m/108')\\nif (getVar(MY_RULE.url + \\\"m_108\\\")) {\\n    if (page != 1) {\\n        true_url = true_url + '&p=' + page;\\n    }\\n}\\nvar html = fetch(true_url, {\\n    headers: {\\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0)'\\n    }\\n})\\n\\nconst first_fl = parseDomForArray(html, 'body&&.vw-frontpagecontainer'); //一级分类\\nconst second_fl = parseDomForArray(html, '.btn1-group'); //二级分类\\nconst third_fl = parseDomForArray(html, '#list-label'); //三级分类\\n\\n\\nlet init_cate = []\\nfor (let i = 0; i < 20; i++) {\\n    init_cate.push(\\\"0\\\")\\n}\\n\\n// 取一级分类缓存\\nconst cate_temp_1_json = getVar(MY_RULE.url + \\\"m_108\\\" + \\\"first_fl\\\", JSON.stringify(init_cate));\\nconst cate_temp_1 = JSON.parse(cate_temp_1_json);\\n\\nconst cate_temp_2_json = getVar(MY_RULE.url + \\\"m_108\\\" + \\\"second_fl\\\", JSON.stringify(init_cate));\\nconst cate_temp_2 = JSON.parse(cate_temp_2_json);\\n\\nconst cate_temp_3_json = getVar(MY_RULE.url + \\\"m_108\\\" + \\\"third_fl\\\", JSON.stringify(init_cate));\\nconst cate_temp_3 = JSON.parse(cate_temp_3_json);\\n\\nif (parseInt(page) === 1) {\\n    first_fl.forEach((category, index) => {\\n        //一级分类\\n        let sub_classify = parseDomForArray(category, 'body&&.catalogleaves'); ////需修改\\n        sub_classify.forEach((item, key) => {\\n            let title = parseDomForHtml(item, 'a&&Text')\\n            d.push({\\n                title: key.toString() === cate_temp_1[index] ? '““””<b><font color=' + 分类颜色 + '>' + title + ' </font></b>' : title,\\n                url: $(parseDom(item, 'a&&href')).lazyRule((params) => {\\n                    params.cate_temp_1[params.index] = params.key.toString()\\n                    putVar(MY_RULE.url + \\\"m_108\\\" + \\\"first_fl\\\", JSON.stringify(params.cate_temp_1))\\n                    putVar(MY_RULE.url + \\\"m_108\\\", input)\\n                    refreshPage(true)\\n                    return \\\"hiker://empty\\\"\\n                }, {\\n                    cate_temp_1: cate_temp_1,\\n                    index: index,\\n                    key: key,\\n                    page: page,\\n                }),\\n                col_type: 'scroll_button',\\n            })\\n        })\\n        d.push({\\n            col_type: \\\"blank_block\\\"\\n        });\\n    })\\n    second_fl.forEach((category, index) => {\\n        //一级分类\\n        let sub_classify = parseDomForArray(category, 'body&&a'); ////需修改\\n        sub_classify.forEach((item, key) => {\\n            let title = parseDomForHtml(item, 'a&&Text')\\n            d.push({\\n                title: key.toString() === cate_temp_2[index] ? '““””<b><font color=' + 分类颜色 + '>' + title + ' </font></b>' : title,\\n                url: $(parseDom(item, 'a&&href')).lazyRule((params) => {\\n                    params.cate_temp_2[params.index] = params.key.toString()\\n                    putVar(MY_RULE.url + \\\"m_108\\\" + \\\"second_fl\\\", JSON.stringify(params.cate_temp_2))\\n                    putVar(MY_RULE.url + \\\"m_108\\\", input)\\n                    refreshPage(true)\\n                    return \\\"hiker://empty\\\"\\n                }, {\\n                    cate_temp_2: cate_temp_2,\\n                    index: index,\\n                    key: key,\\n                    page: page,\\n                }),\\n                col_type: 'scroll_button',\\n            })\\n        })\\n        d.push({\\n            col_type: \\\"blank_block\\\"\\n        });\\n    })\\n    third_fl.forEach((category, index) => {\\n        //一级分类\\n        let sub_classify = parseDomForArray(category, 'body&&a'); ////需修改\\n        sub_classify.forEach((item, key) => {\\n            let title = parseDomForHtml(item, 'a&&Text')\\n            d.push({\\n                title: key.toString() === cate_temp_3[index] ? '““””<b><font color=' + 分类颜色 + '>' + title + ' </font></b>' : title,\\n                url: $(parseDom(item, 'a&&href')).lazyRule((params) => {\\n                    params.cate_temp_3[params.index] = params.key.toString()\\n                    putVar(MY_RULE.url + \\\"m_108\\\" + \\\"third_fl\\\", JSON.stringify(params.cate_temp_3))\\n                    putVar(MY_RULE.url + \\\"m_108\\\", input)\\n                    refreshPage(true)\\n                    return \\\"hiker://empty\\\"\\n                }, {\\n                    cate_temp_3: cate_temp_3,\\n                    index: index,\\n                    key: key,\\n                    page: page,\\n                }),\\n                col_type: 'scroll_button',\\n            })\\n        })\\n        d.push({\\n            col_type: \\\"blank_block\\\"\\n        });\\n    })\\n}\\npdfa(html, '.fc-leftcontent-block&&.vw-frontsound-container').forEach(list => {\\n    d.push({\\n        title: pdfh(list, 'img&&alt'),\\n        desc: '““””<small><font color=\\\"#808080\\\">' + pdfh(list, '.vw-frontsound-time&&Text') + '</font>&nbsp;&nbsp;&nbsp;' + pdfh(list, '.vw-frontsound-viewcount&&Text') + '</font>&nbsp;&nbsp;&nbsp;' + pdfh(list, '.vw-frontsound-commentcount&&Text') + '</small>',\\n        img: pd(list, 'img&&data-original'),\\n        url: \\\"hiker://page/detail.html?page=fypage\\\",\\n        extra: {\\n            href: String('https://www.missevan.com' + pdfh(list, 'a&&href'))\\n        },\\n        col_type: \\\"movie_1_left_pic\\\"\\n    });\\n})\"},{\"name\":\"日抓\",\"path\":\"m_41.html\",\"rule\":\"var getRangeColors = function() {       \\n    return '#' + ('00000' + (Math.random() * 0x1000000 << 0).toString(16)).substr(-6);     \\n}\\n\\nconst 分类颜色 = getRangeColors()\\nconst 大类定位 = 'body&&.vw-frontpagecontainer'\\nconst 拼接分类 = '.btn1-group&&.btn1-default'\\nconst 小类定位 = 'body&&a'; //:not(:matches(4|专|荧|分类|省市台|APP))\\nconst 分类标题 = 'a&&Text'\\nconst 分类链接 = 'a&&href'\\nMY_URL = mUrl;\\nif (!/m\\\\/1/.test(getVar(MY_RULE.url + \\\"m_41\\\"))) {\\n    clearVar(MY_RULE.url + \\\"m_41\\\");\\n    clearVar(MY_RULE.title);\\n}\\nlet true_url = getVar(MY_RULE.url + \\\"m_41\\\", mUrl + '/sound/m/41')\\nif (getVar(MY_RULE.url + \\\"m_41\\\")) {\\n    if (page != 1) {\\n        true_url = true_url + '&p=' + page;\\n    }\\n}\\nvar html = fetch(true_url, {\\n    headers: {\\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0)'\\n    }\\n})\\n\\nconst first_fl = parseDomForArray(html, 'body&&.vw-frontpagecontainer'); //一级分类\\nconst second_fl = parseDomForArray(html, '.btn1-group'); //二级分类\\nconst third_fl = parseDomForArray(html, '#list-label'); //三级分类\\n\\n\\nlet init_cate = []\\nfor (let i = 0; i < 20; i++) {\\n    init_cate.push(\\\"0\\\")\\n}\\n\\n// 取一级分类缓存\\nconst cate_temp_1_json = getVar(MY_RULE.url + \\\"m_41\\\" + \\\"first_fl\\\", JSON.stringify(init_cate));\\nconst cate_temp_1 = JSON.parse(cate_temp_1_json);\\n\\nconst cate_temp_2_json = getVar(MY_RULE.url + \\\"m_41\\\" + \\\"second_fl\\\", JSON.stringify(init_cate));\\nconst cate_temp_2 = JSON.parse(cate_temp_2_json);\\n\\nconst cate_temp_3_json = getVar(MY_RULE.url + \\\"m_41\\\" + \\\"third_fl\\\", JSON.stringify(init_cate));\\nconst cate_temp_3 = JSON.parse(cate_temp_3_json);\\n\\nif (parseInt(page) === 1) {\\n    first_fl.forEach((category, index) => {\\n        //一级分类\\n        let sub_classify = parseDomForArray(category, 'body&&.catalogleaves'); ////需修改\\n        sub_classify.forEach((item, key) => {\\n            let title = parseDomForHtml(item, 'a&&Text')\\n            d.push({\\n                title: key.toString() === cate_temp_1[index] ? '““””<b><font color=' + 分类颜色 + '>' + title + ' </font></b>' : title,\\n                url: $(parseDom(item, 'a&&href')).lazyRule((params) => {\\n                    params.cate_temp_1[params.index] = params.key.toString()\\n                    putVar(MY_RULE.url + \\\"m_41\\\" + \\\"first_fl\\\", JSON.stringify(params.cate_temp_1))\\n                    putVar(MY_RULE.url + \\\"m_41\\\", input)\\n                    refreshPage(true)\\n                    return \\\"hiker://empty\\\"\\n                }, {\\n                    cate_temp_1: cate_temp_1,\\n                    index: index,\\n                    key: key,\\n                    page: page,\\n                }),\\n                col_type: 'scroll_button',\\n            })\\n        })\\n        d.push({\\n            col_type: \\\"blank_block\\\"\\n        });\\n    })\\n    second_fl.forEach((category, index) => {\\n        //一级分类\\n        let sub_classify = parseDomForArray(category, 'body&&a'); ////需修改\\n        sub_classify.forEach((item, key) => {\\n            let title = parseDomForHtml(item, 'a&&Text')\\n            d.push({\\n                title: key.toString() === cate_temp_2[index] ? '““””<b><font color=' + 分类颜色 + '>' + title + ' </font></b>' : title,\\n                url: $(parseDom(item, 'a&&href')).lazyRule((params) => {\\n                    params.cate_temp_2[params.index] = params.key.toString()\\n                    putVar(MY_RULE.url + \\\"m_41\\\" + \\\"second_fl\\\", JSON.stringify(params.cate_temp_2))\\n                    putVar(MY_RULE.url + \\\"m_41\\\", input)\\n                    refreshPage(true)\\n                    return \\\"hiker://empty\\\"\\n                }, {\\n                    cate_temp_2: cate_temp_2,\\n                    index: index,\\n                    key: key,\\n                    page: page,\\n                }),\\n                col_type: 'scroll_button',\\n            })\\n        })\\n        d.push({\\n            col_type: \\\"blank_block\\\"\\n        });\\n    })\\n    third_fl.forEach((category, index) => {\\n        //一级分类\\n        let sub_classify = parseDomForArray(category, 'body&&a'); ////需修改\\n        sub_classify.forEach((item, key) => {\\n            let title = parseDomForHtml(item, 'a&&Text')\\n            d.push({\\n                title: key.toString() === cate_temp_3[index] ? '““””<b><font color=' + 分类颜色 + '>' + title + ' </font></b>' : title,\\n                url: $(parseDom(item, 'a&&href')).lazyRule((params) => {\\n                    params.cate_temp_3[params.index] = params.key.toString()\\n                    putVar(MY_RULE.url + \\\"m_41\\\" + \\\"third_fl\\\", JSON.stringify(params.cate_temp_3))\\n                    putVar(MY_RULE.url + \\\"m_41\\\", input)\\n                    refreshPage(true)\\n                    return \\\"hiker://empty\\\"\\n                }, {\\n                    cate_temp_3: cate_temp_3,\\n                    index: index,\\n                    key: key,\\n                    page: page,\\n                }),\\n                col_type: 'scroll_button',\\n            })\\n        })\\n        d.push({\\n            col_type: \\\"blank_block\\\"\\n        });\\n    })\\n}\\npdfa(html, '.fc-leftcontent-block&&.vw-frontsound-container').forEach(list => {\\n    d.push({\\n        title: pdfh(list, 'img&&alt'),\\n        desc: '““””<small><font color=\\\"#808080\\\">' + pdfh(list, '.vw-frontsound-time&&Text') + '</font>&nbsp;&nbsp;&nbsp;' + pdfh(list, '.vw-frontsound-viewcount&&Text') + '</font>&nbsp;&nbsp;&nbsp;' + pdfh(list, '.vw-frontsound-commentcount&&Text') + '</small>',\\n        img: pd(list, 'img&&data-original'),\\n        url: \\\"hiker://page/detail.html?page=fypage\\\",\\n        extra: {\\n            href: String('https://www.missevan.com' + pdfh(list, 'a&&href'))\\n        },\\n        col_type: \\\"movie_1_left_pic\\\"\\n    });\\n})\"},{\"name\":\"播客\",\"path\":\"m_26.html\",\"rule\":\"var getRangeColors = function() {       \\n    return '#' + ('00000' + (Math.random() * 0x1000000 << 0).toString(16)).substr(-6);     \\n}\\n\\nconst 分类颜色 = getRangeColors()\\nconst 大类定位 = 'body&&.vw-frontpagecontainer'\\nconst 拼接分类 = '.btn1-group&&.btn1-default'\\nconst 小类定位 = 'body&&a'; //:not(:matches(4|专|荧|分类|省市台|APP))\\nconst 分类标题 = 'a&&Text'\\nconst 分类链接 = 'a&&href'\\nMY_URL = mUrl;\\nif (!/m\\\\/1/.test(getVar(MY_RULE.url + \\\"m_26\\\"))) {\\n    clearVar(MY_RULE.url + \\\"m_26\\\");\\n    clearVar(MY_RULE.title);\\n}\\nlet true_url = getVar(MY_RULE.url + \\\"m_26\\\", mUrl + '/sound/m/26')\\nif (getVar(MY_RULE.url + \\\"m_26\\\")) {\\n    if (page != 1) {\\n        true_url = true_url + '&p=' + page;\\n    }\\n}\\nvar html = fetch(true_url, {\\n    headers: {\\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0)'\\n    }\\n})\\n\\nconst first_fl = parseDomForArray(html, 'body&&.vw-frontpagecontainer'); //一级分类\\nconst second_fl = parseDomForArray(html, '.btn1-group'); //二级分类\\nconst third_fl = parseDomForArray(html, '#list-label'); //三级分类\\n\\n\\nlet init_cate = []\\nfor (let i = 0; i < 20; i++) {\\n    init_cate.push(\\\"0\\\")\\n}\\n\\n// 取一级分类缓存\\nconst cate_temp_1_json = getVar(MY_RULE.url + \\\"m_26\\\" + \\\"first_fl\\\", JSON.stringify(init_cate));\\nconst cate_temp_1 = JSON.parse(cate_temp_1_json);\\n\\nconst cate_temp_2_json = getVar(MY_RULE.url + \\\"m_26\\\" + \\\"second_fl\\\", JSON.stringify(init_cate));\\nconst cate_temp_2 = JSON.parse(cate_temp_2_json);\\n\\nconst cate_temp_3_json = getVar(MY_RULE.url + \\\"m_26\\\" + \\\"third_fl\\\", JSON.stringify(init_cate));\\nconst cate_temp_3 = JSON.parse(cate_temp_3_json);\\n\\nif (parseInt(page) === 1) {\\n    first_fl.forEach((category, index) => {\\n        //一级分类\\n        let sub_classify = parseDomForArray(category, 'body&&.catalogleaves'); ////需修改\\n        sub_classify.forEach((item, key) => {\\n            let title = parseDomForHtml(item, 'a&&Text')\\n            d.push({\\n                title: key.toString() === cate_temp_1[index] ? '““””<b><font color=' + 分类颜色 + '>' + title + ' </font></b>' : title,\\n                url: $(parseDom(item, 'a&&href')).lazyRule((params) => {\\n                    params.cate_temp_1[params.index] = params.key.toString()\\n                    putVar(MY_RULE.url + \\\"m_26\\\" + \\\"first_fl\\\", JSON.stringify(params.cate_temp_1))\\n                    putVar(MY_RULE.url + \\\"m_26\\\", input)\\n                    refreshPage(true)\\n                    return \\\"hiker://empty\\\"\\n                }, {\\n                    cate_temp_1: cate_temp_1,\\n                    index: index,\\n                    key: key,\\n                    page: page,\\n                }),\\n                col_type: 'scroll_button',\\n            })\\n        })\\n        d.push({\\n            col_type: \\\"blank_block\\\"\\n        });\\n    })\\n    second_fl.forEach((category, index) => {\\n        //一级分类\\n        let sub_classify = parseDomForArray(category, 'body&&a'); ////需修改\\n        sub_classify.forEach((item, key) => {\\n            let title = parseDomForHtml(item, 'a&&Text')\\n            d.push({\\n                title: key.toString() === cate_temp_2[index] ? '““””<b><font color=' + 分类颜色 + '>' + title + ' </font></b>' : title,\\n                url: $(parseDom(item, 'a&&href')).lazyRule((params) => {\\n                    params.cate_temp_2[params.index] = params.key.toString()\\n                    putVar(MY_RULE.url + \\\"m_26\\\" + \\\"second_fl\\\", JSON.stringify(params.cate_temp_2))\\n                    putVar(MY_RULE.url + \\\"m_26\\\", input)\\n                    refreshPage(true)\\n                    return \\\"hiker://empty\\\"\\n                }, {\\n                    cate_temp_2: cate_temp_2,\\n                    index: index,\\n                    key: key,\\n                    page: page,\\n                }),\\n                col_type: 'scroll_button',\\n            })\\n        })\\n        d.push({\\n            col_type: \\\"blank_block\\\"\\n        });\\n    })\\n    third_fl.forEach((category, index) => {\\n        //一级分类\\n        let sub_classify = parseDomForArray(category, 'body&&a'); ////需修改\\n        sub_classify.forEach((item, key) => {\\n            let title = parseDomForHtml(item, 'a&&Text')\\n            d.push({\\n                title: key.toString() === cate_temp_3[index] ? '““””<b><font color=' + 分类颜色 + '>' + title + ' </font></b>' : title,\\n                url: $(parseDom(item, 'a&&href')).lazyRule((params) => {\\n                    params.cate_temp_3[params.index] = params.key.toString()\\n                    putVar(MY_RULE.url + \\\"m_26\\\" + \\\"third_fl\\\", JSON.stringify(params.cate_temp_3))\\n                    putVar(MY_RULE.url + \\\"m_26\\\", input)\\n                    refreshPage(true)\\n                    return \\\"hiker://empty\\\"\\n                }, {\\n                    cate_temp_3: cate_temp_3,\\n                    index: index,\\n                    key: key,\\n                    page: page,\\n                }),\\n                col_type: 'scroll_button',\\n            })\\n        })\\n        d.push({\\n            col_type: \\\"blank_block\\\"\\n        });\\n    })\\n}\\npdfa(html, '.fc-leftcontent-block&&.vw-frontsound-container').forEach(list => {\\n    d.push({\\n        title: pdfh(list, 'img&&alt'),\\n        desc: '““””<small><font color=\\\"#808080\\\">' + pdfh(list, '.vw-frontsound-time&&Text') + '</font>&nbsp;&nbsp;&nbsp;' + pdfh(list, '.vw-frontsound-viewcount&&Text') + '</font>&nbsp;&nbsp;&nbsp;' + pdfh(list, '.vw-frontsound-commentcount&&Text') + '</small>',\\n        img: pd(list, 'img&&data-original'),\\n        url: \\\"hiker://page/detail.html?page=fypage\\\",\\n        extra: {\\n            href: String('https://www.missevan.com' + pdfh(list, 'a&&href'))\\n        },\\n        col_type: \\\"movie_1_left_pic\\\"\\n    });\\n})\"}]","proxy":"","icon":"https://infinitypro-img.infinitynewtab.com/custom-icon/8001d5lh1trinivw0widds9jifjcsl.png"},{"last_chapter_rule":"","pageList":[{"col_type":"movie_3","name":"分类片库","path":"vault","rule":"顶部大类 = ['国创', '电视', '纪录片', '综艺', '番剧', '电影']\nif (page == 1) {\n    // 折叠开关\n    d.push({\n        title: getMyVar('折叠', '关') == '关' ? '““””<b><span style=\"color: #FF0000\">∨</span></b>' : '““””<b><span style=\"color: #1aad19\">∧</span></b>',\n        url: $('#noLoading#').lazyRule(() => {\n            if (getMyVar('折叠', '关') == '开') {\n                putMyVar('折叠', '关');\n            } else {\n                putMyVar('折叠', '开');\n            }\n            refreshPage(true);\n            return \"hiker://empty\";\n        }),\n        col_type: 'scroll_button',\n    })\n    顶部大类.forEach(li => {\n        d.push({\n            title: li == getMyVar('大类', '国创') ? '““””<b><font color=#1aad19>' + li + '</font></b>' : li,\n            url: $('#noLoading#').lazyRule((li) => {\n                putMyVar('大类', li);\n                refreshPage(true);\n                return \"hiker://empty\";\n            }, li),\n            col_type: 'scroll_button',\n        })\n    });\n    d.push({\n        col_type: 'blank_block'\n    })\n}\n// 顶部分类参数映射\nswitch (getMyVar('大类', '国创')) {\n    case '国创':\n        seasonType = 4;\n        if (getMyVar('折叠', '关') == '开') {\n            if (page == 1) {\n                html = fetch('https://www.bilibili.com/guochuang/index');\n                分类列表 = pdfa(html, '.filter-list&&.filter-block');\n                分类列表.forEach(ul => {\n                    筛选条件 = pdfh(ul, '.filter-name&&Text');\n                    子分类列表 = pdfa(ul, 'ul&&li');\n                    子分类列表.forEach(li => {\n                        if (pdfh(li, 'li&&Text') == '其他') {\n                            return;\n                        }\n                        d.push({\n                            title: getMyVar(筛选条件, '全部') == pdfh(li, 'li&&Text') ? '““””<b><font color=#1aad19>' + pdfh(li, 'li&&Text') + '</font></b>' : pdfh(li, 'li&&Text'),\n                            url: $('#noLoading#').lazyRule((li, 筛选条件) => {\n                                putMyVar(筛选条件, pdfh(li, 'li&&Text'));\n                                refreshPage(true);\n                                return \"hiker://empty\";\n                            }, li, 筛选条件),\n                            col_type: 'scroll_button'\n                        })\n                    });\n                    d.push({\n                        col_type: 'blank_block'\n                    })\n                });\n            }\n        }\n        break;\n    case '电视':\n        seasonType = 5;\n        if (getMyVar('折叠', '关') == '开') {\n            if (page == 1) {\n                html = fetch('https://www.bilibili.com/tv/index');\n                分类列表 = pdfa(html, '.filter-list&&.filter-block');\n                分类列表.forEach(ul => {\n                    筛选条件 = pdfh(ul, '.filter-name&&Text');\n                    子分类列表 = pdfa(ul, 'ul&&li');\n                    子分类列表.forEach(li => {\n                        if (pdfh(li, 'li&&Text') == '其他') {\n                            return;\n                        }\n                        d.push({\n                            title: getMyVar(筛选条件, '全部') == pdfh(li, 'li&&Text') ? '““””<b><font color=#1aad19>' + pdfh(li, 'li&&Text') + '</font></b>' : pdfh(li, 'li&&Text'),\n                            url: $('#noLoading#').lazyRule((li, 筛选条件) => {\n                                putMyVar(筛选条件, pdfh(li, 'li&&Text'));\n                                refreshPage(true);\n                                return \"hiker://empty\";\n                            }, li, 筛选条件),\n                            col_type: 'scroll_button'\n                        })\n                    });\n                    d.push({\n                        col_type: 'blank_block'\n                    })\n                });\n            }\n        }\n        break;\n    case '纪录片':\n        seasonType = 3;\n        if (getMyVar('折叠', '关') == '开') {\n            if (page == 1) {\n                html = fetch('https://www.bilibili.com/documentary/index/');\n                分类列表 = pdfa(html, '.filter-list&&.filter-block');\n                分类列表.forEach(ul => {\n                    筛选条件 = pdfh(ul, '.filter-name&&Text');\n                    子分类列表 = pdfa(ul, 'ul&&li');\n                    子分类列表.forEach(li => {\n                        if (pdfh(li, 'li&&Text') == '其他') {\n                            return;\n                        }\n                        d.push({\n                            title: getMyVar(筛选条件, '全部') == pdfh(li, 'li&&Text') ? '““””<b><font color=#1aad19>' + pdfh(li, 'li&&Text') + '</font></b>' : pdfh(li, 'li&&Text'),\n                            url: $('#noLoading#').lazyRule((li, 筛选条件) => {\n                                putMyVar(筛选条件, pdfh(li, 'li&&Text'));\n                                refreshPage(true);\n                                return \"hiker://empty\";\n                            }, li, 筛选条件),\n                            col_type: 'scroll_button'\n                        })\n                    });\n                    d.push({\n                        col_type: 'blank_block'\n                    })\n                });\n            }\n        }\n        break;\n    case '综艺':\n        seasonType = 7;\n        if (getMyVar('折叠', '关') == '开') {\n            if (page == 1) {\n                html = fetch('https://www.bilibili.com/variety/index');\n                分类列表 = pdfa(html, '.filter-list&&.filter-block');\n                分类列表.forEach(ul => {\n                    筛选条件 = pdfh(ul, '.filter-name&&Text');\n                    子分类列表 = pdfa(ul, 'ul&&li');\n                    子分类列表.forEach(li => {\n                        if (pdfh(li, 'li&&Text') == '其他') {\n                            return;\n                        }\n                        d.push({\n                            title: getMyVar(筛选条件, '全部') == pdfh(li, 'li&&Text') ? '““””<b><font color=#1aad19>' + pdfh(li, 'li&&Text') + '</font></b>' : pdfh(li, 'li&&Text'),\n                            url: $('#noLoading#').lazyRule((li, 筛选条件) => {\n                                putMyVar(筛选条件, pdfh(li, 'li&&Text'));\n                                refreshPage(true);\n                                return \"hiker://empty\";\n                            }, li, 筛选条件),\n                            col_type: 'scroll_button'\n                        })\n                    });\n                    d.push({\n                        col_type: 'blank_block'\n                    })\n                });\n            }\n        }\n        break;\n    case '番剧':\n        seasonType = 1;\n        if (getMyVar('折叠', '关') == '开') {\n            if (page == 1) {\n                html = fetch('https://www.bilibili.com/anime/index');\n                分类列表 = pdfa(html, '.filter-list&&.filter-block');\n                分类列表.forEach(ul => {\n                    筛选条件 = pdfh(ul, '.filter-name&&Text');\n                    子分类列表 = pdfa(ul, 'ul&&li');\n                    子分类列表.forEach(li => {\n                        if (pdfh(li, 'li&&Text') == '其他') {\n                            return;\n                        }\n                        d.push({\n                            title: getMyVar(筛选条件, '全部') == pdfh(li, 'li&&Text') ? '““””<b><font color=#1aad19>' + pdfh(li, 'li&&Text') + '</font></b>' : pdfh(li, 'li&&Text'),\n                            url: $('#noLoading#').lazyRule((li, 筛选条件) => {\n                                putMyVar(筛选条件, pdfh(li, 'li&&Text'));\n                                refreshPage(true);\n                                return \"hiker://empty\";\n                            }, li, 筛选条件),\n                            col_type: 'scroll_button'\n                        })\n                    });\n                    d.push({\n                        col_type: 'blank_block'\n                    })\n                });\n            }\n        }\n        break;\n    case '电影':\n        seasonType = 2;\n        if (getMyVar('折叠', '关') == '开') {\n            if (page == 1) {\n                html = fetch('https://www.bilibili.com/movie/index');\n                分类列表 = pdfa(html, '.filter-list&&.filter-block');\n                分类列表.forEach(ul => {\n                    筛选条件 = pdfh(ul, '.filter-name&&Text');\n                    子分类列表 = pdfa(ul, 'ul&&li');\n                    子分类列表.forEach(li => {\n                        if (pdfh(li, 'li&&Text') == '其他') {\n                            return;\n                        }\n                        d.push({\n                            title: getMyVar(筛选条件, '全部') == pdfh(li, 'li&&Text') ? '““””<b><font color=#1aad19>' + pdfh(li, 'li&&Text') + '</font></b>' : pdfh(li, 'li&&Text'),\n                            url: $('#noLoading#').lazyRule((li, 筛选条件) => {\n                                putMyVar(筛选条件, pdfh(li, 'li&&Text'));\n                                refreshPage(true);\n                                return \"hiker://empty\";\n                            }, li, 筛选条件),\n                            col_type: 'scroll_button'\n                        })\n                    });\n                    d.push({\n                        col_type: 'blank_block'\n                    })\n                });\n            }\n        }\n        break;\n    default:\n        seasonType = 4;\n        if (getMyVar('折叠', '关') == '开') {\n            if (page == 1) {\n                html = fetch('https://www.bilibili.com/anime/index');\n                分类列表 = pdfa(html, '.filter-list&&.filter-block');\n                分类列表.forEach(ul => {\n                    筛选条件 = pdfh(ul, '.filter-name&&Text');\n                    子分类列表 = pdfa(ul, 'ul&&li');\n                    子分类列表.forEach(li => {\n                        if (pdfh(li, 'li&&Text') == '其他') {\n                            return;\n                        }\n                        d.push({\n                            title: getMyVar(筛选条件, '全部') == pdfh(li, 'li&&Text') ? '““””<b><font color=#1aad19>' + pdfh(li, 'li&&Text') + '</font></b>' : pdfh(li, 'li&&Text'),\n                            url: $('#noLoading#').lazyRule((li, 筛选条件) => {\n                                putMyVar(筛选条件, pdfh(li, 'li&&Text'));\n                                refreshPage(true);\n                                return \"hiker://empty\";\n                            }, li, 筛选条件),\n                            col_type: 'scroll_button'\n                        })\n                    });\n                    d.push({\n                        col_type: 'blank_block'\n                    })\n                });\n            }\n        }\n        break;\n}\n// 子分类参数映射\nswitch (getMyVar('类型', '全部')) {\n    case '正片':\n        season_version = 1;\n        break;\n    case '电影':\n        season_version = 2;\n        break;\n    case '其他':\n        season_version = 3;\n        break;\n    default:\n        season_version = -1;\n        break;\n}\nswitch (getMyVar('配音', '全部')) {\n    case '原声':\n        spoken_language_type = 1;\n        break;\n    case '中文配音':\n        spoken_language_type = 2;\n        break;\n    default:\n        spoken_language_type = -1;\n        break;\n}\nswitch (getMyVar('地区', '全部')) {\n    case '中国大陆':\n        area = 1;\n        break;\n    case '日本':\n        area = 2;\n        break;\n    case '美国':\n        area = 3;\n        break;\n    case '英国':\n        area = 4;\n        break;\n    case '中国港台':\n        area = [6, 7];\n        break;\n    case '韩国':\n        area = 8;\n        break;\n    case '法国':\n        area = 9;\n        break;\n    case '泰国':\n        area = 10;\n        break;\n    case '西班牙':\n        area = 13;\n        break;\n    case '德国':\n        area = 15;\n        break;\n    case '意大利':\n        area = 35;\n        break;\n    case '其他':\n        // 只是番剧的情况_共55，要减去出现的——算了，直接在动态分类的时候去掉了\n        area = [1, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55];\n        break;\n    default:\n        area = -1;\n        break;\n}\nswitch (getMyVar('状态', '全部')) {\n    case '完结':\n        is_finish = 1;\n        break;\n    case '连载':\n        is_finish = 0;\n        break;\n    default:\n        is_finish = -1;\n        break;\n}\nswitch (getMyVar('出品', '全部')) {\n    case '央视':\n        producer_id = 4;\n        break;\n    case 'BBC':\n        producer_id = 1;\n        break;\n    case '探索频道':\n        producer_id = 7;\n        break;\n    case '国家地理':\n        producer_id = 14;\n        break;\n    case 'NHK':\n        producer_id = 2;\n        break;\n    case '历史频道':\n        producer_id = 6;\n        break;\n    case '卫视':\n        producer_id = 8;\n        break;\n    case '自制':\n        producer_id = 9;\n        break;\n    case 'ITV':\n        producer_id = 5;\n        break;\n    case 'SKY':\n        producer_id = 3;\n        break;\n    case 'ZDF':\n        producer_id = 10;\n        break;\n    case '合作机构':\n        producer_id = 11;\n        break;\n    case '国内其他':\n        producer_id = 12;\n        break;\n    case '国外其它':\n        producer_id = 13;\n        break;\n    default:\n        producer_id = -1;\n        break;\n}\nswitch (getMyVar('版权', '全部')) {\n    case '独家':\n        copyright = 3;\n        break;\n    case '其他':\n        copyright = [1, 2, 4];\n        break;\n    default:\n        copyright = -1;\n        break;\n}\nswitch (getMyVar('付费', '全部')) {\n    case '免费':\n        season_status = 1;\n        break;\n    case '付费':\n        season_status = [2, 6];\n        break;\n    case '大会员':\n        season_status = [4, 6];\n        break;\n    default:\n        season_status = -1;\n        break;\n}\nswitch (getMyVar('季度', '全部')) {\n    case '1月':\n        season_month = 1;\n        break;\n    case '4月':\n        season_month = 4;\n        break;\n    case '7月':\n        season_month = 7;\n        break;\n    case '10月':\n        season_month = 10;\n        break;\n    default:\n        season_month = -1;\n        break;\n}\n// 判断和映射年份\nswitch (getMyVar('大类', '国创')) {\n    case '国创':\n    case '番剧':\n        // 番剧和国创【也是叫做年份但参数名、格式和其他分类不一样】\n        anime_year = getMyVar('年份', '全部');\n        switch (anime_year.includes('-')) {\n            case true:\n                early = anime_year.split('-')[1];\n                later = anime_year.split('-')[0];\n                year = `[${early},${Number(later) + 1})`;\n                break;\n            case false:\n                switch (anime_year) {\n                    case '90年代':\n                        year = '[1990,2000)';\n                        break;\n                    case '80年代':\n                        year = '[1980,1990)';\n                        break;\n                    case '更早':\n                        year = '[,1980)';\n                        break;\n                    case '全部':\n                        year = -1;\n                        break;\n                    default:\n                        year = `[${anime_year},${Number(anime_year) + 1})`;\n                        break;\n                }\n        }\n    default:\n        // 除了番剧和国创的其他分类\n        tv_year = getMyVar('年份', '全部');\n        switch (tv_year.includes('-')) {\n            case true:\n                early = tv_year.split('-')[1];\n                later = tv_year.split('-')[0];\n                release_date = `[${early}-01-01 00:00:00,${Number(later) + 1}-01-01 00:00:00)`\n                break;\n            case false:\n                switch (tv_year) {\n                    case '90年代':\n                        release_date = '[1990-01-01 00:00:00,2000-01-01 00:00:00)'\n                        break;\n                    case '80年代':\n                        release_date = '[1980-01-01 00:00:00,1990-01-01 00:00:00)'\n                        break;\n                    case '更早':\n                        release_date = '[,1980-01-01 00:00:00)';\n                        break;\n                    case '全部':\n                        release_date = -1;\n                        break;\n                    default:\n                        release_date = `[${tv_year}-01-01 00:00:00,${Number(tv_year) + 1}-01-01 00:00:00)`;\n                        break;\n                }\n        }\n}\nswitch (getMyVar('风格', '全部')) {\n    case '电影':\n        style_id = -10;\n        break;\n    // 番剧栏目\n    case '原创':\n        style_id = 10010;\n        break;\n    case '漫画改':\n        style_id = 10011;\n        break;\n    case '小说改':\n        style_id = 10012;\n        break;\n    case '游戏改':\n        style_id = 10013;\n        break;\n    case '特摄':\n        style_id = 10014;\n        break;\n    case '布袋戏':\n        style_id = 10015;\n        break;\n    case '热血':\n        style_id = 10016;\n        break;\n    case '穿越':\n        style_id = 10017;\n        break;\n    case '奇幻':\n        style_id = 10018;\n        break;\n    // 咋跳了一个捏~\n    case '战斗':\n        style_id = 10020;\n        break;\n    case '搞笑':\n        style_id = 10021;\n        break;\n    case '日常':\n        style_id = 10022;\n        break;\n    case '科幻':\n        style_id = 10023;\n        break;\n    case '萌系':\n        style_id = 10024;\n        break;\n    case '治愈':\n        style_id = 10025;\n        break;\n    case '校园':\n        style_id = 10026;\n        break;\n    case '少儿':\n        style_id = 10027;\n        break;\n    case '泡面':\n        style_id = 10028;\n        break;\n    case '恋爱':\n        style_id = 10029;\n        break;\n    case '少女':\n        style_id = 10030;\n        break;\n    case '魔法':\n        style_id = 10031;\n        break;\n    case '冒险':\n        style_id = 10032;\n        break;\n    case '历史':\n        style_id = 10033;\n        break;\n    case '架空':\n        style_id = 10034;\n        break;\n    case '机战':\n        style_id = 10035;\n        break;\n    case '神魔':\n        style_id = 10036;\n        break;\n    case '声控':\n        style_id = 10037;\n        break;\n    case '运动':\n        style_id = 10038;\n        break;\n    case '励志':\n        style_id = 10039;\n        break;\n    case '音乐':\n        style_id = 10040;\n        break;\n    case '推理':\n        style_id = 10041;\n        break;\n    case '社团':\n        style_id = 10042;\n        break;\n    case '智斗':\n        style_id = 10043;\n        break;\n    case '催泪':\n        style_id = 10044;\n        break;\n    case '美食':\n        style_id = 10045;\n        break;\n    case '偶像':\n        style_id = 10046;\n        break;\n    case '乙女':\n        style_id = 10047;\n        break;\n    case '职场':\n        style_id = 10048;\n        break;\n\n    // 综艺栏目、电影\n    case '剧情':\n        style_id = 10050;\n        break;\n    case '喜剧':\n        style_id = 10051;\n        break;\n    case '爱情':\n        style_id = 10052;\n        break;\n    case '动作':\n        style_id = 10053;\n        break;\n    case '恐怖':\n        style_id = 10054;\n        break;\n    case '犯罪':\n        style_id = 10055;\n        break;\n    case '惊悚':\n        style_id = 10056;\n        break;\n    case '悬疑':\n        style_id = 10057;\n        break;\n    case '战争':\n        style_id = 10058;\n        break;\n    case '动画':\n        style_id = 10059;\n        break;\n    case '传记':\n        style_id = 10060;\n        break;\n    case '家庭':\n        style_id = 10061;\n        break;\n    case '歌舞':\n        style_id = 10062;\n        break;\n    case '纪实':\n        style_id = 10063;\n        break;\n    case '灾难':\n        style_id = 10064;\n        break;\n    case '人文':\n        style_id = 10065;\n        break;\n    case '科技':\n        style_id = 10066;\n        break;\n    case '宇宙':\n        style_id = 10068;\n        break;\n    case '萌宠':\n        style_id = 10069;\n        break;\n    case '社会':\n        style_id = 10070;\n        break;\n    case '动物':\n        style_id = 10071;\n        break;\n    case '自然':\n        style_id = 10072;\n        break;\n    case '医疗':\n        style_id = 10073;\n        break;\n    case '军事':\n        style_id = 10074;\n        break;\n    case '罪案':\n        style_id = 10075;\n        break;\n    case '神秘':\n        style_id = 10076;\n        break;\n    case '旅行':\n        style_id = 10077;\n        break;\n    case '武侠':\n        style_id = 10078;\n        break;\n    case '青春':\n        style_id = 10079;\n        break;\n    case '都市':\n        style_id = 10080;\n        break;\n    case '古装':\n        style_id = 10081;\n        break;\n    case '谍战':\n        style_id = 10082;\n        break;\n    case '经典':\n        style_id = 10083;\n        break;\n    case '情感':\n        style_id = 10084;\n        break;\n    case '神话':\n        style_id = 10085;\n        break;\n    case '年代':\n        style_id = 10086;\n        break;\n    case '农村':\n        style_id = 10087;\n        break;\n    case '刑侦':\n        style_id = 10088;\n        break;\n    case '军旅':\n        style_id = 10089;\n        break;\n    case '访谈':\n        style_id = 10090;\n        break;\n    case '脱口秀':\n        style_id = 10091;\n        break;\n    case '真人秀':\n        style_id = 10092;\n        break;\n    case '选秀':\n        style_id = 10094;\n        break;\n    case '旅游':\n        style_id = 10095;\n        break;\n    case '晚会':\n        style_id = 10098;\n        break;\n    case '演唱会':\n        style_id = 10096;\n        break;\n    case '亲子':\n        style_id = 10097;\n        break;\n    case '养成':\n        style_id = 10099;\n        break;\n    case '文化':\n        style_id = 10100;\n        break;\n    // 电影栏目\n    case '短片':\n        style_id = 10104;\n        break;\n    default:\n        style_id = -1;\n        break;\n}\n// 映射真实请求地址\nswitch (seasonType) {\n    case 4:\n        // 国创\n        true_url = 'https://api.bilibili.com/pgc/season/index/result?season_version=' + season_version + '&is_finish=' + is_finish + '&copyright=' + copyright + '&season_status=' + season_status + '&year=' + year + '&style_id=' + style_id + '&order=3&st=4&sort=0&page=' + page + '&season_type=4&pagesize=30&type=1'\n        break;\n    case 5:\n        // 电视剧\n        true_url = 'https://api.bilibili.com/pgc/season/index/result?area=' + area + '&style_id=' + style_id + '&release_date=' + release_date + '&season_status=' + season_status + '&order=2&st=5&sort=0&page=' + page + '&season_type=5&pagesize=30&type=1'\n        break;\n    case 7:\n        // 综艺\n        true_url = 'https://api.bilibili.com/pgc/season/index/result?season_status=' + season_status + '&style_id=' + style_id + '&order=2&st=7&sort=0&page=' + page + '&season_type=7&pagesize=30&type=1';\n        break;\n    case 1:\n        // 番剧\n        true_url = 'https://api.bilibili.com/pgc/season/index/result?season_version=' + season_version + '&spoken_language_type=' + spoken_language_type + '&area=' + area + '&is_finish=' + is_finish + '&copyright=' + copyright + '&season_status=' + season_status + '&season_month=' + season_month + '&year=' + year + '&style_id=' + style_id + '&order=3&st=1&sort=0&page=' + page + '&season_type=1&pagesize=30&type=1';\n        break;\n    case 3:\n        // 纪录片\n        true_url = 'https://api.bilibili.com/pgc/season/index/result?style_id=' + style_id + '&producer_id=' + producer_id + '&release_date=' + release_date + '&season_status=' + season_status + '&order=2&st=3&sort=0&page=' + page + '&season_type=3&pagesize=30&type=1'\n        break;\n    case 2:\n        // 电影\n        true_url = 'https://api.bilibili.com/pgc/season/index/result?area=' + area + '&style_id=' + style_id + '&release_date=' + release_date + '&season_status=' + season_status + '&order=2&st=2&sort=0&page=' + page + '&season_type=2&pagesize=30&type=1'\n        break;\n}\ntrue_url = encodeURI(true_url);\nlist = JSON.parse(fetch(true_url)).data.list;\ntry {\n    list.forEach(movie => {\n        d.push({\n            title: movie.title,\n            url: \"hiker://page/filmerji#immersiveTheme#\",\n            img: movie.cover + \"@Referer=\",\n            desc: movie.order,\n            col_type: 'movie_3',\n            extra: {\n                season_id: movie.season_id\n            }\n        });\n    });\n} catch (e) {\n    log('已经抵达页底' + MY_PAGE);\n}\n"},{"col_type":"movie_3","name":"热映时间表","path":"UpdateTables","rule":"function color(text, color) {\n\n    text += \"\";\n\n    if (text.indexOf(\"““””\") === 0) {\n\n        text.replace(\"““””\", \"\");\n\n    }\n\n    return \"““””<font color='\" + color + \"'>\" + text + \"</font>\";\n\n}\n\nvar tabs = {\n\n    \"番剧\": 1,\n\n    \"纪录片\": 3,\n\n    \"国创\": 4\n\n}\n\nif (MY_PAGE == 1) {\n\n    Object.keys(tabs).forEach(item => {\n\n        d.push({\n\n            title: (getMyVar(\"juji\", \"国创\") == item ? color(item, \"red\") : item),\n\n            url: $().lazyRule((a) => {\n\n                putMyVar(\"juji\", a)\n\n                refreshPage()\n\n                return \"toast://切换成功\"\n\n            }, item),\n\n            col_type: \"scroll_button\"\n\n        })\n\n    })\n\n    d.push({\n\n        col_type: \"line\"\n\n    })\n\n    let days = 7\n\n    for (let i = 1; i < days; i++) {\n\n        d.push({\n\n            title: (getMyVar(\"from\", \"1\") == i + \"\" ? color(i + \"天前\", \"red\") : i + \"天前\"),\n\n            url: $().lazyRule((i) => {\n\n                putMyVar(\"from\", i + \"\")\n\n                refreshPage()\n\n                return \"hiker://empty\"\n\n            }, i),\n\n            col_type: \"scroll_button\"\n\n        })\n\n    }\n\n    d.push({\n\n        col_type: \"line\"\n\n    })\n\n    for (let i = 1; i < days; i++) {\n\n        d.push({\n\n            title: (getMyVar(\"to\", \"1\") == i + \"\" ? color(i + \"天后\", \"red\") : i + \"天后\"),\n\n            url: $().lazyRule((i) => {\n\n                putMyVar(\"to\", i + \"\")\n\n                refreshPage()\n\n                return \"hiker://empty\"\n\n            }, i),\n\n            col_type: \"scroll_button\"\n\n        })\n\n    }\n\n\n    $.require(\"hiker://page/api\").getMovies(tabs[getMyVar(\"juji\", \"国创\")], getMyVar(\"from\", \"1\"), getMyVar(\"to\", \"1\")).forEach(item => {\n\n        d.push({\n\n            title: item.date + \" 周\" + item.day_of_week,\n\n            col_type: \"text_1\",\n\n            url: \"hiker://empty\"\n\n        })\n\n        item.episodes.forEach(i => {\n\n            d.push({\n\n                title: i.title,\n\n                img: i.cover+'@Referer=',\n\n                desc:i.pub_index.match(/即将/)?'‘‘’’<font color=\"red\">'+i.pub_index+'\\n'+i.pub_time+'</font>': i.pub_index+ '\\n' + i.pub_time,\n\n                url: \"hiker://page/filmerji#immersiveTheme#\",\n\n                extra: {\n\n                    \"season_id\": i.season_id\n\n                }\n\n            })\n\n        })\n\n    })\n\n}\n\n\n\n"},{"col_type":"movie_3","name":"登录","path":"login","rule":"js:\nvar d = [];\nsetPageTitle('账号登录页面')\nd.push({\n    title: 'cookie登录',\n    url: $('#noLoading#').lazyRule(() => {\n        return $('', '请输入你的cookie').input(() => {\n            if (input == \"\") return \"toast://cookie不能为空\";\n            let userinfo = JSON.parse(fetch(\"https://api.bilibili.com/x/web-interface/nav\", {\n                headers: {\n                    \"Cookie\": input\n                }\n            })).data;\n            if (userinfo.isLogin === false) return \"toast://你的cookie貌似失效了喔~\";\n            userInfo = {\n                cookie: input,\n                userName: userinfo.uname,\n                userMid:  userinfo.mid,\n                vipStatus: userinfo.vipStatus,\n                face: userinfo.face + \"@Referer=\"\n            }\n            setting = JSON.parse(request(\"hiker://files/rules/cy/bili.txt\"));\n            setting.userList.unshift(userInfo);\n            // 过滤掉cookie为空的元素\n            setting.userList = setting.userList.filter(user => user.cookie !== '');\n            saveFile(\"hiker://files/rules/cy/bili.txt\", JSON.stringify(setting));\n            back(true);\n            return \"toast://cookie设置成功\";\n        })\n    }),\n    col_type: 'text_center_1'\n});\nd.push({\n    title: '登陆说明',\n    desc: \"页面下方登陆成功后，再点击确认登录即可\",\n    url: \"hiker://empty\",\n    col_type: 'text_center_1'\n}, {\n    title: '登陆成功后，再点我！',\n    url: $('#noLoading#').lazyRule(() => {\n        // 这里负责写Cookie，先读，再追加\n        cookie = getVar('biliCookie','');\n        log(\"获取到的cookie:\"+cookie);\n        if (cookie == \"\") return \"toast://获取cookie失败，再等等看？\";\n        let userinfo = JSON.parse(fetch(\"https://api.bilibili.com/x/web-interface/nav\", {\n            headers: {\n                \"Cookie\": cookie\n            }\n        })).data;\n        if (userinfo.isLogin === false) return \"toast://你先登录，再获取cookie，OK？\";\n        userInfo = {\n            cookie: cookie,\n            userName: userinfo.uname,\n            userMid:  userinfo.mid,\n            vipStatus: userinfo.vipStatus,\n            face: userinfo.face + \"@Referer=\"\n        }\n        setting = JSON.parse(request(\"hiker://files/rules/cy/bili.txt\"));\n        setting.userList.unshift(userInfo);\n        // 过滤掉cookie为空的元素\n        setting.userList = setting.userList.filter(user => user.cookie !== '');\n        saveFile(\"hiker://files/rules/cy/bili.txt\", JSON.stringify(setting));\n        back(true);\n        return 'toast://如果没有登陆成功，建议你下次登陆成功后不要点那么快~'\n    }),\n    col_type: 'text_1'\n}, {\n    url: \"https://m.bilibili.com/\",\n    col_type: \"x5_webview_single\",\n    desc: \"list&&screen-300\",\n    extra: {\n        js: $.toString(() => {\n            var token_timer = function () {\n                var timer = setInterval(() => {\n                    cookie = fba.getCookie(\"https://m.bilibili.com/\");\n                    fba.putVar('biliCookie', cookie);\n                }, 100)\n            };\n            token_timer();\n        }),\n        canBack: true,\n        ua: MOBILE_UA\n    }\n})\nsetResult(d);\n"},{"col_type":"movie_3","name":"影视二级","path":"filmerji","rule":"js:\n// 数据定位\nvar d = [];\nif (MY_PARAMS.season_id) {\n    season_id = MY_PARAMS.season_id + \"\";\n    Data = JSON.parse(fetch('https://api.bilibili.com/pgc/view/web/season?season_id=' + season_id)).result;\n} else {\n    Data = JSON.parse(fetch('https://api.bilibili.com/pgc/view/web/season?ep_id=' + MY_PARAMS.ep_id)).result;\n}\nif (!Data.cover.match(/https/)) {\n    封面 = Data.cover.replace('http', 'https') + \"@Referer=\";\n} else {\n    封面 = Data.cover + \"@Referer=\";\n}\ntry {\n    地区 = Data.areas[0].name;\n} catch (e) {\n    地区 = '地区暂无';\n}\n简介 = Data.evaluate;\n// 正片\n类型 = Data.positive.title;\n上映时间 = Data.publish.pub_time;\ntry {\n    得分 = Data.rating.score;\n} catch (e) {\n    得分 = '暂无得';\n}\n追剧日历 = Data.new_ep.desc;\n更新进度 = Data.new_ep.title;\n影片名称 = Data.title;\n第二标题 = Data.share_sub_title;\n剧集列表 = Data.episodes.filter((list) => {\n    // 过滤预告、花絮\n    if (getItem('previewSwitch', 'fold') === 'fold' && list.badge.match(/预|花絮/)) {\n        return false;\n    } else {\n        return true;\n    }\n});\n短讯 = \"⭐\" + 类型 + \"⭐\" + 第二标题 + '\\n' + 地区 + '-' + 得分 + '分\\n-' + 上映时间 + '-';\n// 重定义二级页面数据\nsetPageTitle(影片名称);\nsetPagePicUrl(封面);\n// 前置参数和预处理---\nimgLink = storage0.getMyVar('图标');\n// 全局lazy——直链+断插\nvar lazy = $('').lazyRule(() => {\n    videoParms = findItem(input);\n    aid = videoParms.extra.aid;\n    bvid = videoParms.extra.bvid;\n    cid = videoParms.extra.cid;\n    badge = videoParms.extra.badge;\n    // 提交历史记录\n    $.require(\"hiker://page/api\").reportProcess(aid, cid);\n    vipStatus = JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].vipStatus;\n    if (vipStatus != 0) {\n        // 大会员\n        if (badge.match(/付费/)) {\n            return $(['魔断解析', '已购买'], 1).select((input, aid, cid) => {\n                if (input == '魔断解析') {\n                    eval(fetch('hiker://files/cache/Parse_Dn.js', {}));\n                    return aytmParse(link);\n                } else {\n                    return $.require(\"hiker://page/api\").biliLazy(aid, cid, 116).replace(/;/g, \"；；\");\n                }\n            }, link, aid, cid)\n        } else {\n            return $.require(\"hiker://page/api\").biliLazy(aid, cid, 116).replace(/;/g, \"；；\");\n        }\n    } else {\n        // 普通用户\n        var setting=JSON.parse(request(\"hiker://files/rules/cy/bili.txt\"));\n        var hasBfKey=setting.bfKey!=''?true:false;\n        if (!hasBfKey) {\n            if (badge.match(/会员|付费/)) {\n                eval(fetch('hiker://files/cache/Parse_Dn.js', {}));\n                return aytmParse(input);\n            } else {\n                return $.require(\"hiker://page/api\").biliLazy(aid, cid, 116).replace(/;/g, \"；；\");\n            }\n        } else {\n            // 共享会员播放权益\n            if (badge.match(/付费/)) {\n                return $(['魔断解析', '已购买'], 1).select((input, aid, cid) => {\n                    if (input == '魔断解析') {\n                        eval(fetch('hiker://files/cache/Parse_Dn.js', {}));\n                        return aytmParse(link);\n                    } else {\n                        return $.require(\"hiker://page/api\").biliLazy(aid, cid, 116).replace(/;/g, \"；；\");\n                    }\n                }, link, aid, cid)\n            } else {\n                return $.require(\"hiker://page/api\").biliLazy(aid, cid, 116).replace(/;/g, \"；；\");\n            }\n        }\n    }\n});\nvar Color = \"#19B89D\";\nvar 每页集数 = 30;\nvar 搜索模式 = '分组';\nvar 调用名称 = '简影';\nputMyVar('折叠', '关');\nputMyVar('日历', '关');\nputMyVar('Data', Data);\nputMyVar('lazy', lazy);\n// 清除变量\naddListener('onClose', $.toString(() => {\n    clearMyVar('分集起');\n    clearMyVar('分集终');\n    clearMyVar('折叠');\n    clearMyVar('日历');\n    clearMyVar('Data');\n    clearMyVar('lazy');\n    clearMyVar('剧集列表');\n}))\n// 设置动态最新章节\nsetLastChapterRule('js:' + $.toString(() => {\n    eval(JSON.parse(request('hiker://page/getUpdate')).rule);\n}));\n// 页面内容正文---\n// 基本信息模块\nd.push({\n    title: 短讯,\n    desc: 简介 == '' ? '暂无简介' : 简介.substring(0, 45) + '‘‘’’…<font color=\"#1C1C1C\">详情</font>',\n    img: 封面,\n    url: $().rule((简介) => {\n        res = {};\n        var d = [];\n        d.push({\n            title: '影片简介：' + '\\n\\t\\t\\t\\t\\t\\t\\t' + 简介,\n            col_type: 'long_text'\n        });\n        res.data = d;\n        setHomeResult(res);\n    }, 简介),\n    col_type: 'movie_1_vertical_pic_blur',\n    extra: {\n        longClick: [{\n            title: '预告、花絮开关', js: $.toString(() => {\n                if (getItem('previewSwitch', 'fold') == 'fold') {\n                    setItem('previewSwitch', 'open');\n                    refreshPage(true);\n                    return \"toast://预告已经切换为展示~\";\n                } else {\n                    setItem('previewSwitch', 'fold');\n                    refreshPage(true);\n                    return \"toast://预告不再展示~\";\n                }\n            }),\n        }, {\n            title: 'dm盒子', js: $.toString(() => {\n                return 'hiker://page/setting#noHistory#?rule=dm盒子';\n            })\n        }, {\n            title: '弹幕控制', js: $.toString(() => {\n                if (getItem('isOverrideSave', 'false') == 'true') {\n                    setItem('isOverrideSave', 'false');\n                    return 'toast://弹幕将不受dm盒子参数控制';\n                } else {\n                    setItem('isOverrideSave', 'true');\n                    return 'toast://弹幕将受到dm盒子参数控制';\n                }\n            })\n        }]\n    }\n});\n// 更新日历模块\nd.push({\n    title: '日历',\n    img: imgLink.日历,\n    url: $('#noLoading#').lazyRule((追剧日历, 更新进度) => {\n        if (getMyVar('日历', '关') == '开') {\n            deleteItem('追剧日历');\n            putMyVar('日历', '关');\n        } else {\n            addItemAfter('显示模式', {\n                title: 追剧日历.match(/完结|期待/) ? 追剧日历 : 追剧日历 + '<br><font color=\"red\">更新至' + (更新进度.match(/[\\u4e00-\\u9fa5]/) ? 更新进度 : ('第' + (更新进度 == '' ? 0 : 更新进度) + '话')) + '</font>',\n                col_type: \"rich_text\",\n                extra: {\n                    id: '追剧日历'\n                }\n            });\n            putMyVar('日历', '开');\n        }\n        return 'toast://已切换日历为:' + getMyVar('日历', '开')\n    }, 追剧日历, 更新进度),\n    col_type: 'icon_5'\n});\n// 订阅模块\nd.push({\n    title: '订阅',\n    img: imgLink.订阅,\n    url: $('#noLoading#').lazyRule(() => {\n        selectionList = ['订阅', '取消订阅'];\n        return $(selectionList, 2).select(() => {\n            season_id = JSON.parse(getMyVar('Data')).season_id;\n            if (input == '订阅') {\n                res = $.require(\"hiker://page/api\").subscribeFilm(season_id);\n            } else {\n                res = $.require(\"hiker://page/api\").cancelSubscribeFilm(season_id);\n            }\n            return 'toast://' + res;\n        });\n    }),\n    col_type: 'icon_5'\n});\n// 评论模块\nd.push({\n    title: '评论',\n    img: imgLink.查看评论,\n    url: $('#noLoading#').lazyRule(() => {\n        return $('hiker://empty').rule(() => {\n            var d = [];\n            List = JSON.parse(getMyVar('Data')).episodes;\n            List.forEach(item => {\n                d.push({\n                    title: item.share_copy + '<font color=\"#33cccc\">\t➮</font>',\n                    img: item.cover + '@Referer=',\n                    url: 'hiker://page/Comments?p=fypage',\n                    col_type: \"avatar\",\n                    extra: {\n                        \"id\": item.aid,\n                        \"type\": 1\n                    }\n                });\n            });\n            setResult(d);\n        });\n    }),\n    col_type: 'icon_5'\n});\n\n// 精彩继续模块\nd.push({\n    title: '周边',\n    img: imgLink.周边,\n    url: $('#noLoading#').lazyRule(() => {\n        Data = JSON.parse(getMyVar('Data'));\n        // 有些没有直接去掉懒得处理~\n        if (Data.section) {\n            周边数组 = [\"🏷️相关系列\", \"🤣PV&花絮\", \"🍉竖屏也精彩\", \"🔥精彩二创\"];\n        } else {\n            周边数组 = [\"🏷️相关系列\"];\n        }\n        // 周边数组 = [\"🏷️相关系列\", \"🤣PV&花絮\", \"竖屏也精彩\", \"精彩二创\"];\n        return $(周边数组, 1, 'ღ精彩继续').select(() => {\n            Data = JSON.parse(getMyVar('Data'));\n            lazy = getMyVar('lazy');\n            if (input === '🏷️相关系列') {\n                系列名称 = Data.season_title\n                系列数据 = Data.seasons;\n                return $().rule((系列数据) => {\n                    d = [];\n                    setPageTitle('🏷️相关系列');\n                    if (系列数据 == [] || 系列数据 == '') {\n                        d.push({\n                            title: '‘‘’’<big><font color=\"red\">⭐该影片没有相关系列哦~⭐</font></big>',\n                            url: 'toast://都没有，，你点啥呀~',\n                            desc: '敬请期待~',\n                            col_type: 'text_center_1'\n                        });\n                    }\n                    系列数据.forEach(list => {\n                        d.push({\n                            title: list.season_title,\n                            img: (list.horizontal_cover_1610 == '' ? (list.horizontal_cover_169 == '' ? list.cover : list.horizontal_cover_169) : list.horizontal_cover_1610) + \"@Referer=\",\n                            url: 'hiker://page/filmerji#immersiveTheme#',\n                            desc: list.new_ep.index_show,\n                            col_type: 'movie_1_left_pic',\n                            extra: {\n                                \"ep_id\": list.new_ep.id\n                            }\n                        });\n                    });\n                    setHomeResult(d);\n                }, 系列数据)\n            } else if (input === '🤣PV&花絮') {\n                try {\n                    PV和花絮数据 = Data.section[0].episodes;\n                    return $().rule((PV和花絮数据, lazy) => {\n                        d = [];\n                        setPageTitle('🤣PV&花絮');\n                        if (PV和花絮数据 == [] || PV和花絮数据 == '') {\n                            d.push({\n                                title: '‘‘’’<big><font color=\"red\">⭐该影片/视频没有相关PV和花絮哦~⭐</font></big>',\n                                url: 'toast://都没有，，你点啥呀~',\n                                desc: '敬请期待~',\n                                col_type: 'text_center_1'\n                            });\n                        }\n                        PV和花絮数据.forEach(list => {\n                            d.push({\n                                title: list.title,\n                                img: list.cover + \"@Referer=\",\n                                url: list.link + lazy,\n                                desc: list.subtitle + '\\n' + list.long_title,\n                                col_type: 'movie_1_left_pic',\n                                extra: {\n                                    id: list.link,\n                                    aid: list.aid,\n                                    bvid: list.bvid,\n                                    cid: list.cid,\n                                    badge: list.badge\n                                }\n                            });\n                        });\n                        setHomeResult(d);\n                    }, PV和花絮数据, lazy)\n                } catch (e) {\n                    return 'toast://没有数据哦~'\n                }\n            } else if (input === '🍉竖屏也精彩') {\n                try {\n                    竖屏也精彩数据 = Data.section[1].episodes;\n                    return $().rule((竖屏也精彩数据, lazy) => {\n                        d = [];\n                        setPageTitle('🍉竖屏也精彩');\n                        if (竖屏也精彩数据 == [] || 竖屏也精彩数据 == '') {\n                            d.push({\n                                title: '‘‘’’<big><font color=\"red\">⭐该影片/视频没有相关竖屏短视频哦~⭐</font></big>',\n                                url: 'toast://都没有，，你点啥呀~',\n                                desc: '敬请期待~',\n                                col_type: 'text_center_1'\n                            });\n                        }\n                        竖屏也精彩数据.forEach(list => {\n                            d.push({\n                                title: list.title,\n                                img: list.cover + \"@Referer=\",\n                                url: list.link + lazy,\n                                desc: list.subtitle + '\\n' + list.long_title,\n                                col_type: 'movie_1_left_pic',\n                                extra: {\n                                    id: list.link,\n                                    aid: list.aid,\n                                    bvid: list.bvid,\n                                    cid: list.cid,\n                                    badge: list.badge\n                                }\n                            });\n                        });\n                        setHomeResult(d);\n                    }, 竖屏也精彩数据, lazy)\n                } catch (e) {\n                    return 'toast://没有数据哦~'\n                }\n            } else if (input === '🔥精彩二创') {\n                try {\n                    精彩二创数据 = Data.section[2].episodes;\n                    return $().rule((精彩二创数据, lazy) => {\n                        d = [];\n                        setPageTitle('🔥精彩二创');\n                        if (精彩二创数据 == [] || 精彩二创数据 == '') {\n                            d.push({\n                                title: '‘‘’’<big><font color=\"red\">⭐该影片/视频没有二创作品哦~⭐</font></big>',\n                                url: 'toast://都没有，，你点啥呀~',\n                                desc: '敬请期待~',\n                                col_type: 'text_center_1'\n                            });\n                        }\n                        精彩二创数据.forEach(list => {\n                            // 针对部分参数缺失的情况如凡人修仙传写的，，\n                            if (list.aid == 0 || list.cid == 0) {\n                                viedeoData = JSON.parse(fetch(\"https://api.bilibili.com/x/web-interface/view?aid=\" + list.link.split('av')[1], {\n                                    headers: {\n                                        \"User-Agent\": PC_UA,\n                                        \"Referer\": 'https://www.bilibili.com/'\n                                    },\n                                    method: \"GET\"\n                                })).data;\n                                aid = viedeoData.aid;\n                                bvid = viedeoData.bvid;\n                                cid = viedeoData.cid;\n                            } else {\n                                aid = list.aid;\n                                bvid = list.bvid;\n                                cid = list.cid;\n                            }\n                            d.push({\n                                title: list.title,\n                                img: list.cover + \"@Referer=\",\n                                url: list.link + lazy,\n                                desc: list.subtitle + '\\n' + list.long_title,\n                                col_type: 'movie_1_left_pic',\n                                extra: {\n                                    id: list.link,\n                                    aid: aid,\n                                    bvid: bvid,\n                                    cid: cid,\n                                    badge: list.badge\n                                }\n                            });\n                        });\n                        setHomeResult(d);\n                    }, 精彩二创数据, lazy)\n                } catch (e) {\n                    return 'toast://没有数据哦~'\n                }\n            }\n            return \"toast://正在进入\" + input + \"界面...\";\n        })\n    }),\n    col_type: \"icon_5\",\n    extra: {\n        id: '精彩继续'\n    }\n});\n// 显示模式更改模块\nd.push({\n    title: getItem('模式', '双边'),\n    img: getItem('模式', '双边') == '列表' ? imgLink.列表 : imgLink.双边,\n    url: $('#noLoading#').lazyRule(() => {\n        显示的剧集列表 = JSON.parse(getMyVar('显示的剧集列表'),(key,value)=>{\n            if (key === 'aid' || key === 'cid') {\n                // 将大数字转换为BigInt\n                return BigInt(value);\n            }\n            return value;\n        });\n        if (getItem('模式', '双边') == '列表') {\n            显示的剧集列表.forEach(el => {\n                updateItem(el.link, {\n                    col_type: 'movie_2',\n                });\n            });\n            setItem('模式', '双边')\n        } else {\n            显示的剧集列表.forEach(el => {\n                updateItem(el.link, {\n                    col_type: 'movie_1_left_pic',\n                });\n            });\n            setItem('模式', '列表')\n        }\n        imgLink = storage0.getMyVar('图标');\n        updateItem('显示模式', {\n            title: getItem('模式', '双边'),\n            img: getItem('模式', '双边') == '列表' ? imgLink.列表 : imgLink.双边,\n        });\n        return 'toast://已切换模式为:' + getItem('模式', '双边')\n    }),\n    col_type: 'icon_5',\n    extra: {\n        id: '显示模式'\n    }\n}, {\n    col_type: 'line_blank',\n});\n// 选插模块——局部刷新版\n来源 = 'bl';\nputMyVar('简插', $.toString(() => {\n    let titleArr = []\n    setFile = readFile('hiker://files/rules/DuanNian/MyParse.json');\n    try {\n        eval('json=' + setFile);\n    } catch (e) {\n        log('Json解析发生了错误:' + e.message);\n    }\n    titleArr = json.title;\n    let barry1 = ['✍️辅助'];\n    let barry2 = ['📦️魔断'];\n    let barry3 = ['🔍搜索'];\n    titleArr = barry3.concat(titleArr);\n    titleArr = barry2.concat(titleArr);\n    titleArr = barry1.concat(titleArr);\n    eval('op=json.settings.' + 来源);\n    titleArr = titleArr.map((it) => {\n        return it === op ? '👉' + it : it;\n    });\n    putMyVar('解析数组', titleArr);\n    putMyVar('setFile', setFile);\n}))\neval(getMyVar('简插'));\nd.push({\n    title: '解析：🔘<font color=\"' + Color + '\">' + op + '</font>\\t\\t页码：<font color=\"' + Color + '\">' + ((getMyVar('分集起', '首页') == '首页') ? '首页' : (getMyVar('分集起') + '-' + getMyVar('分集终'))) + '</font>',\n    url: $('#noLoading#').lazyRule((json, 来源, Color, op, 影片名称, 搜索模式, 调用名称) => {\n        eval(getMyVar('简插'));\n        return $(eval(getMyVar('解析数组')), 3).select((json, 来源, Color, op, 影片名称, 搜索模式, 调用名称) => {\n            setFile = getMyVar('setFile');\n            input = input.replace(/👉/g, '');\n            if (input === '✍️辅助') {\n                return $().rule(() => {\n                    eval(JSON.parse(request('hiker://page/home?rule=配置助手')).rule);\n                })\n            } else if (input === '📦️魔断') {\n                return \"hiker://page/Route?rule=MyFieldᴰⁿ&type=编辑#noHistory#\";\n            } else if (input === '🔍搜索') {\n                if (搜索模式 == '分组') {\n                    return \"hiker://search?s=\" + 影片名称 + \"&group=\" + 调用名称;\n                } else {\n                    return \"hiker://search?s=\" + 影片名称 + \"&rule=\" + 调用名称;\n                }\n            }\n            // 原先的配置\n            originSettings = JSON.stringify(json.settings);\n            // 修改配置\n            eval('json.settings.' + 来源 + '=input;');\n            setFile = setFile.replace(originSettings, JSON.stringify(json.settings));\n            saveFile('hiker://files/rules/DuanNian/MyParse.json', setFile);\n            // 刷新元素\n            eval(getMyVar('简插'));\n            updateItem('op', {\n                title: '解析：🔘<font color=\"' + Color + '\">' + op + '</font>\\t\\t页码：<font color=\"' + Color + '\">' + ((getMyVar('分集起', '首页') == '首页') ? '首页' : (getMyVar('分集起') + '-' + getMyVar('分集终'))) + '</font>',\n            });\n            return \"toast://切换解析口为:\" + input;\n        }, json, 来源, Color, op, 影片名称, 搜索模式, 调用名称)\n    }, json, 来源, Color, op, 影片名称, 搜索模式, 调用名称),\n    img: 'hiker://files/rules/cy/tubiao/bilibili.svg',\n    col_type: \"avatar\",\n    extra: {\n        id: 'op'\n    }\n});\n// 滚动剧集条栏\n剧集长度 = 剧集列表.length;\nif (剧集长度 > 每页集数) {\n    putMyVar('刷新选集', $.toString(() => {\n        putMyVar('分集起', start);\n        putMyVar('分集终', end);\n        eval(getMyVar('简插'));\n        updateItem('op', {\n            title: '解析：🔘<font color=\"' + Color + '\">' + op + '</font>\\t\\t页码：<font color=\"' + Color + '\">' + ((getMyVar('分集起', '首页') == '首页') ? '首页' : (getMyVar('分集起') + '-' + getMyVar('分集终'))) + '</font>',\n        })\n        // 删除\n        显示的剧集列表 = JSON.parse(getMyVar('显示的剧集列表'),(key,value)=>{\n            if (key === 'aid' || key === 'cid') {\n                // 将大数字转换为BigInt\n                return BigInt(value);\n            }\n            return value;\n        });\n        显示的剧集列表.forEach(el => {\n            deleteItem(el.link);\n        });\n        // 添加\n        lazy = getMyVar('lazy');\n        剧集列表 = JSON.parse(getMyVar('剧集列表'),(key,value)=>{\n            if (key === 'aid' || key === 'cid') {\n                // 将大数字转换为BigInt\n                return BigInt(value);\n            }\n            return value;\n        });\n        显示的剧集列表 = 剧集列表.slice(start - 1, end);\n        newArray = [];\n        index = 1;\n        显示的剧集列表.forEach(list => {\n            if (getItem('模式', '双边') == '列表') {\n                newArray.push({\n                    title: list.long_title,\n                    img: list.cover + \"@Referer=\",\n                    url: list.link + lazy,\n                    desc: list.title.match(/[0-9]/) ? (list.badge + '第' + list.title + '话') : list.title,\n                    col_type: 'movie_1_left_pic',\n                    extra: {\n                        id: list.link,\n                        aid: list.aid,\n                        bvid: list.bvid,\n                        cid: list.cid,\n                        badge: list.badge\n                    }\n                });\n            } else {\n                newArray.push({\n                    title: list.long_title,\n                    img: list.cover + \"@Referer=\",\n                    url: list.link + lazy,\n                    desc: list.title.match(/[0-9]/) ? (list.badge + '第' + list.title + '话') : list.title,\n                    col_type: 'movie_2',\n                    extra: {\n                        id: list.link,\n                        aid: list.aid,\n                        bvid: list.bvid,\n                        cid: list.cid,\n                        badge: list.badge\n                    }\n                });\n            }\n            index += 1;\n        });\n        addItemAfter(getMyVar('末页'), newArray);\n        putMyVar('显示的剧集列表', 显示的剧集列表);\n    }));\n    d.push({\n        col_type: 'scroll_button',\n        url: 'hiker://empty',\n        title: '∷',\n        extra: {\n            id: '占位符',\n        }\n    })\n    putMyVar('分集起', 1);\n    putMyVar('分集终', 每页集数);\n    putMyVar('剧集列表', 剧集列表);\n    总页数 = Math.ceil(剧集长度 / 每页集数);\n    start = 1;\n    end = 每页集数;\n    for (let page = 1; page <= 总页数; page++) {\n        if (end > 剧集长度) {\n            end = 剧集长度;\n        }\n        d.push({\n            title: start + '-' + end,\n            url: $('#noLoading##noHistory#').lazyRule((start, end, Color, 来源) => {\n                eval(getMyVar('刷新选集'));\n                return \"hiker://empty\";\n            }, start, end, Color, 来源),\n            col_type: 'scroll_button',\n            extra: {\n                id: start + '-' + end\n            }\n        });\n        if (end < 剧集长度) {\n            start += 每页集数;\n            end += 每页集数;\n        }\n    }\n    // 记录末页的id\n    putMyVar('末页', start + '-' + end);\n} else {\n    putMyVar('分集起', 1);\n    putMyVar('分集终', 剧集长度);\n}\n// 展示剧集:\n显示的剧集列表 = 剧集列表.slice(0, getMyVar('分集终'));\nputMyVar('显示的剧集列表', 显示的剧集列表);\nindex = 1;\n显示的剧集列表.forEach(list => {\n    if (getItem('模式', '双边') == '列表') {\n        d.push({\n            title: list.long_title,\n            img: list.cover + \"@Referer=\",\n            url: list.link + lazy,\n            desc: list.title.match(/[0-9]/) ? (list.badge + '第' + list.title + '话') : list.title,\n            col_type: 'movie_1_left_pic',\n            extra: {\n                id: list.link,\n                aid: list.aid,\n                bvid: list.bvid,\n                cid: list.cid,\n                badge: list.badge\n            }\n        });\n    } else {\n        d.push({\n            title: list.long_title,\n            img: list.cover + \"@Referer=\",\n            url: list.link + lazy,\n            desc: list.title.match(/[0-9]/) ? (list.badge + '第' + list.title + '话') : list.title,\n            col_type: 'movie_2',\n            extra: {\n                id: list.link,\n                aid: list.aid,\n                bvid: list.bvid,\n                cid: list.cid,\n                badge: list.badge\n            }\n        });\n    }\n    index += 1;\n});\nsetResult(d);\n"},{"col_type":"movie_3","name":"up主页","path":"upHome","rule":"js:\nvar d = [];\n// 预处理\nputMyVar('upInfo', '关');\nsetPageTitle(MY_PARAMS.title);\nimgLink = storage0.getMyVar('图标');\n// 防止反爬虫，从上一个页面传递数据——反爬虫严重\nupMid = MY_PARAMS.mid + \"\";\nupName = MY_PARAMS.title;\nupFace = MY_PARAMS.face;\nrelation = $.require(\"hiker://page/api\").userMapping(upMid);\n// 头像栏\nd.push({\n    title: '<font color=\"blue\">' + upName + '</font>',\n    url: $('#noLoading#').lazyRule((upMid) => {\n        if (getMyVar('upInfo', '关') == '开') {\n            deleteItem('upInfo');\n            putMyVar('upInfo', '关');\n        } else {\n            try {\n                // 用户基本信息\n                queryJson = {\n                    mid: upMid,\n                    token: '',\n                    platform: 'web',\n                    web_location: 1550101\n                }\n                parms = $.require(\"hiker://page/api\").getWbiEnc(queryJson);\n                infoLink = 'https://api.bilibili.com/x/space/wbi/acc/info?' + parms;\n                upData = JSON.parse(fetch(infoLink, {\n                    headers: {\n                        \"User-Agent\": PC_UA,\n                        \"Referer\": \"https://www.bilibili.com/\",\n                        \"Cookie\": cookie=JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie\n                    }\n                })).data;\n                upName = upData.name;\n                upSex = upData.sex;\n                upSign = upData.sign;\n                upBirthday = upData.birthday;\n                try {\n                    upSchool = upData.school.name;\n                } catch (e) {\n                    upSchool = '';\n                }\n                try {\n                    upIdentification = upData.official.title;\n                } catch (e) {\n                    upIdentification = '';\n                }\n                addItemAfter('currentUp', {\n                    title: 'up:' + upName + '\\nmid:' + upMid + '\\n性别:' + upSex + '\\n生日:' + (upBirthday == '' ? '未填写' : upBirthday) + '\\n' + (upSchool == '' ? '' : '学校:' + upSchool + '\\n') + (upSign == '' ? '\\n' : upSign + '\\n') + (upIdentification == '' ? '' : '认证:'),\n                    url: 'hiker://empty',\n                    col_type: 'long_text',\n                    extra: {\n                        id: 'upInfo'\n                    }\n                });\n            } catch (e) {\n                addItemAfter('currentUp', {\n                    title: '好像出了点意外？什么都木有呢~',\n                    url: 'hiker://empty',\n                    col_type: 'long_text',\n                    extra: {\n                        id: 'upInfo'\n                    }\n                });\n            }\n            putMyVar('upInfo', '开');\n        }\n        return 'toast://信息折叠:' + getMyVar('upInfo', '开')\n    }, upMid),\n    img: upFace + \"@Referer=\",\n    col_type: \"avatar\",\n    extra: {\n        id: 'currentUp'\n    }\n}, {\n    col_type: 'line'\n});\n// 公告\nnoticeText = JSON.parse(fetch('https://api.bilibili.com/x/space/notice?mid=' + upMid + '&jsonp=jsonp', {\n    headers: {\n        \"User-Agent\": PC_UA,\n        \"Referer\": \"https://www.bilibili.com/\",\n        \"Cookie\": cookie=JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie\n    }\n})).data;\nif (noticeText != '') {\n    d.push({\n        title: '公告',\n        url: $().rule((noticeText) => {\n            var d = [];\n            d.push({\n                title: '公告：' + '\\n\\t\\t\\t\\t\\t\\t\\t' + noticeText,\n                col_type: 'long_text'\n            });\n            setHomeResult(d);\n        }, noticeText),\n        desc: noticeText == '' ? '暂无公告' : noticeText,\n        col_type: 'text_1',\n    });\n}\nd.push({\n    col_type: 'line'\n}, {\n    title: relation,\n    img: relation == '未关注' ? imgLink.添加关注 : imgLink.已关注,\n    url: $('#noLoading##noHistory#').lazyRule((upMid) => {\n        return $.require(\"hiker://page/api\").changeUserRelation(upMid, 11)\n    }, upMid),\n    col_type: \"icon_small_4\",\n    extra: {\n        id: 'relation'\n    }\n}, {\n    title: '动态',\n    img: imgLink.动态,\n    url: $('#noLoading##noHistory#').lazyRule((upMid) => {\n        return $('hiker://empty?p=fypage').rule((upMid) => {\n            let d = [];\n            latenews = $.require(\"hiker://page/api\").getDynamicData('upSpace', upMid);\n            eval($.require(\"hiker://page/api\").showDynamicData());\n            setResult(d);\n        }, upMid)\n    }, upMid),\n    col_type: \"icon_small_4\",\n}, {\n    title: '专栏',\n    img: imgLink.专栏,\n    url: \"hiker://page/acticleList?p=fypage\",\n    col_type: \"icon_small_4\",\n    extra: {\n        mid: upMid\n    }\n})\n// 用户视频-合集、系列\nupVideo = JSON.parse(fetch('https://api.bilibili.com/x/polymer/space/seasons_series_list?mid=' + upMid + '&page_num=1&page_size=10', {\n    headers: {\n        \"User-Agent\": PC_UA,\n        \"Referer\": \"https://www.bilibili.com/\"\n    }\n})).data.items_lists;\n// 视频合集、系列\ntry {\n    upVideo.seasons_list.forEach(list => {\n        season_id = list.meta.season_id;\n        // 标题-跳转更多\n        d.push({\n            title: '<font color=\"#33cccc\">' + list.meta.name.substring(0, 30) + '</font>\\t\\t<font color=\"red\">' + list.meta.total + '</font>\t➮',\n            img: imgLink.合集文件夹,\n            // img: list.meta.cover+'@Referer=',\n            col_type: 'avatar',\n            url: $('#noLoading##noHistory#').lazyRule((upMid, season_id) => {\n                return $('hiker://empty?fypage').rule((upMid, season_id) => {\n                    var d = [];\n                    let u = 'https://api.bilibili.com/x/polymer/space/seasons_archives_list?mid=' + upMid + '&season_id=' + season_id + '&sort_reverse=false&page_num=' + MY_PAGE + '&page_size=30';\n                    Video = JSON.parse(fetch(u, {\n                        headers: {\n                            \"User-Agent\": PC_UA,\n                            \"Referer\": \"https://www.bilibili.com/\"\n                        }\n                    })).data;\n                    maxPage = Math.ceil(Video.page.total / Video.page.page_size);\n                    if (MY_PAGE <= maxPage) {\n                        d.push({\n                            title: '当前:第' + Video.page.page_num + '页\\t\\t\\t共有' + maxPage + '页,' + Video.page.total + '条数据',\n                            url: \"hiker://empty\",\n                            col_type: \"text_center_1\",\n                        });\n                        Video.archives.forEach(list => {\n                            d.push({\n                                title: list.title,\n                                img: list.pic + '@Referer=',\n                                desc: '播放量：' + list.stat.view,\n                                col_type: 'movie_1_left_pic',\n                                url: \"hiker://page/video\",\n                                extra: {\n                                    aid: list.aid\n                                }\n                            });\n                        });\n                    }\n                    setHomeResult(d);\n                }, upMid, season_id)\n            }, upMid, season_id)\n        });\n        if (list.archives === undefined) {\n            log(list.meta.name + '为空');\n        } else {\n            if (list.archives.length < 2) {\n                list.archives.forEach(list => {\n                    d.push({\n                        title: list.title,\n                        img: list.pic + '@Referer=',\n                        desc: '播放量：' + list.stat.view,\n                        col_type: 'movie_1_left_pic',\n                        url: \"hiker://page/video\",\n                        extra: {\n                            aid: list.aid\n                        }\n                    });\n                });\n            } else if (list.archives.length == 0) {\n                d.push({\n                    title: \"好家伙，这家伙没有合集视频！\",\n                    desc: \"要不去点击全部视频看看~\",\n                    col_type: 'text_center_1',\n                    url: \"hiker://empty\",\n                });\n            } else {\n                for (let i = 0; i < 2; i++) {\n                    d.push({\n                        title: list.archives[i].title,\n                        img: list.archives[i].pic + '@Referer=',\n                        desc: '播放量：' + list.archives[i].stat.view,\n                        col_type: 'movie_1_left_pic',\n                        url: \"hiker://page/video\",\n                        extra: {\n                            aid: list.archives[i].aid\n                        }\n                    });\n                }\n            }\n        }\n    });\n} catch (e) {\n    d.push({\n        title: '合集为空',\n        url: 'hiker://empty',\n        desc: 'Sorry,没有数据呢~',\n        col_type: 'text_center_1',\n    });\n}\ntry {\n    upVideo.series_list.forEach(list => {\n        series_id = list.meta.series_id;\n        // 标题-跳转更多\n        d.push({\n            title: '<font color=\"#33cccc\">' + list.meta.name.substring(0, 30) + '</font>\\t\\t<font color=\"red\">' + list.meta.total + '</font>\t➮',\n            img: imgLink.合集文件夹,\n            // img: list.meta.cover+'@Referer=',\n            col_type: 'avatar',\n            url: $('#noLoading##noHistory#').lazyRule((upMid, series_id) => {\n                return $('hiker://empty?fypage').rule((upMid, series_id) => {\n                    var d = [];\n                    let u = 'https://api.bilibili.com/x/series/archives?mid=' + upMid + '&series_id=' + series_id + '&only_normal=true&sort=desc&pn=' + MY_PAGE + '&ps=30';\n                    Video = JSON.parse(fetch(u, {\n                        headers: {\n                            \"User-Agent\": PC_UA,\n                            \"Referer\": \"https://www.bilibili.com/\"\n                        }\n                    })).data;\n                    maxPage = Math.ceil(Video.page.total / Video.page.size);\n                    if (MY_PAGE <= maxPage) {\n                        d.push({\n                            title: '当前:第' + Video.page.num + '页\\t\\t\\t共有' + maxPage + '页,' + Video.page.total + '条数据',\n                            url: \"hiker://empty\",\n                            col_type: \"text_center_1\",\n                        });\n                        Video.archives.forEach(list => {\n                            d.push({\n                                title: list.title,\n                                img: list.pic + '@Referer=',\n                                desc: '播放量：' + list.stat.view,\n                                col_type: 'movie_1_left_pic',\n                                url: \"hiker://page/video\",\n                                extra: {\n                                    aid: list.aid\n                                }\n                            });\n                        });\n                    }\n                    setHomeResult(d);\n                }, upMid, series_id)\n            }, upMid, series_id)\n        });\n        if (list.archives === undefined) {\n            log(list.meta.name + '为空');\n        } else {\n            if (list.archives.length < 2) {\n                list.archives.forEach(list => {\n                    d.push({\n                        title: list.title,\n                        img: list.pic + '@Referer=',\n                        desc: '播放量：' + list.stat.view,\n                        col_type: 'movie_1_left_pic',\n                        url: \"hiker://page/video\",\n                        extra: {\n                            aid: list.aid\n                        }\n                    });\n                });\n            } else if (list.archives.length == 0) {\n                d.push({\n                    title: \"好家伙，这家伙没有合集视频！\",\n                    desc: \"要不去点击全部视频看看~\",\n                    col_type: 'text_center_1',\n                    url: \"hiker://empty\",\n                });\n            } else {\n                for (let i = 0; i < 2; i++) {\n                    d.push({\n                        title: list.archives[i].title,\n                        img: list.archives[i].pic + '@Referer=',\n                        desc: '播放量：' + list.archives[i].stat.view,\n                        col_type: 'movie_1_left_pic',\n                        url: \"hiker://page/video\",\n                        extra: {\n                            aid: list.archives[i].aid\n                        }\n                    });\n                }\n            }\n        }\n    });\n} catch (e) {\n    d.push({\n        title: '系列为空',\n        url: 'hiker://empty',\n        desc: 'Sorry,没有数据呢~',\n        col_type: 'text_center_1',\n    });\n}\n// up投稿\nd.push({\n    title: 'TA的视频,点击展开全部',\n    col_type: 'text_center_1',\n    url: $('#noLoading##noHistory#').lazyRule((upMid) => {\n        return $().rule((upMid) => {\n            var d = [];\n            try {\n                queryJson = {\n                    mid: upMid,\n                    ps: 30,\n                    tid: getMyVar('_tid', '0'),\n                    special_type: '',\n                    pn: getMyVar('_page', '1'),\n                    keyword: '',\n                    order: 'pubdate',\n                    platform: 'web',\n                    // web_location: 1550101,\n                    order_avoided: true\n                }\n                parms = $.require(\"hiker://page/api\").getWbiEnc(queryJson);\n                dataLink = 'https://api.bilibili.com/x/space/wbi/arc/search?' + parms;\n                upVideoData = JSON.parse(fetch(dataLink, {\n                    headers: {\n                        \"User-Agent\": PC_UA,\n                        \"Referer\": \"https://www.bilibili.com/\",\n                        \"Cookie\": cookie=JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie\n                    }\n                })).data;\n                tlist = upVideoData.list.tlist;\n                vlist = upVideoData.list.vlist;\n                // 分类和页码\n                d.push({\n                    title: getMyVar('_tid', '0') == 0 ? '‘‘’’<font color=\"red\">全部</font>' : '全部',\n                    url: $('#noLoading##noHistory#').lazyRule(() => {\n                        putMyVar('_tid', (0 + \"\"));\n                        putMyVar('_page', (1 + \"\"));\n                        refreshPage(true);\n                        return \"hiker://empty\";\n                    }),\n                    col_type: 'scroll_button'\n                });\n                for (item in tlist) {\n                    d.push({\n                        title: (tlist[item].tid + \"\") == getMyVar('_tid', '0') ? '‘‘’’<font color=\"red\">' + (tlist[item].name + `(${tlist[item].count})`) + '</font>' : (tlist[item].name + `(${tlist[item].count})`),\n                        url: $('#noLoading##noHistory#').lazyRule((tid) => {\n                            putMyVar('_tid', (tid + \"\"));\n                            putMyVar('_page', (1 + \"\"));\n                            refreshPage(true);\n                            return \"hiker://empty\";\n                        }, tlist[item].tid),\n                        col_type: 'scroll_button'\n                    });\n                }\n                d.push({\n                    col_type: 'blank_block',\n                });\n                maxPage = Math.ceil(upVideoData.page.count / upVideoData.page.ps);\n                for (let page = 1; page <= maxPage; page++) {\n                    d.push({\n                        title: (page + \"\") == getMyVar('_page', '1') ? '‘‘’’<font color=\"red\">' + (page + \"\") + '</font>' : (page + \"\"),\n                        url: $('#noLoading##noHistory#').lazyRule((page) => {\n                            putMyVar('_page', (page + \"\"));\n                            refreshPage(true);\n                            return \"hiker://empty\";\n                        }, page),\n                        col_type: 'scroll_button',\n                    });\n                }\n                // 平铺视频\n                vlist.forEach(item => {\n                    pubtime = $.require(\"hiker://page/api\").timeConvert(item.created);\n                    d.push({\n                        title: item.title,\n                        img: item.pic + '@Referer=',\n                        desc: '播放量：' + item.play + '\\n' + pubtime,\n                        col_type: 'movie_1_left_pic',\n                        url: \"hiker://page/video\",\n                        extra: {\n                            aid: item.aid\n                        }\n                    });\n                });\n            } catch (e) {\n                d.push({\n                    title: '页面走丢了...',\n                    img: 'https://i0.hdslb.com/bfs/general/f7b667011a46615732c701f4bb1d07f793f8d1df.png@Referer=',\n                    url: 'hiker://empty',\n                    desc: '太频繁了！稍后再试~',\n                    col_type: \"pic_1\"\n                });\n            }\n            setHomeResult(d);\n        }, upMid)\n    }, upMid)\n});\nsetResult(d);"},{"col_type":"movie_3","name":"up搜索","path":"upSearch","rule":"js:\nseaword = MY_PARAMS.seaword;\nvar d = [];\nresultData=$.require(\"hiker://page/api\").getSearchRes('bili_user',seaword,MY_PAGE,36);\nif (MY_PAGE <= resultData.numPages) {\n    d.push({\n        title: '当前:第' + resultData.page + '页\\t\\t\\t共有' + resultData.numPages + '页,' + resultData.numResults + '条数据',\n        url: \"hiker://empty\",\n        col_type: \"text_center_1\",\n    });\n    resultData.result.forEach(list => {\n        d.push({\n            title: \"<big><font color='blue'>\" + list.uname + \"</font></big><small>\" + list.usign + \"</small>\",\n            img: 'https://' + list.upic + \"@Referer=\",\n            col_type: 'avatar',\n            url: \"hiker://page/upHome\",\n            extra: {\n                mid: list.mid,\n                title: list.uname,\n                face: 'https://' + list.upic\n            }\n        });\n    });\n}\nsetSearchResult(d);\n"},{"col_type":"movie_3","name":"video搜索","path":"videoSearch","rule":"js:\nseaword = MY_PARAMS.seaword;\nvar d = [];\nvar resultData=$.require(\"hiker://page/api\").getSearchRes('video',seaword,MY_PAGE,42);\nvar {timeConvert}=$.require(\"hiker://page/api\");\nif (MY_PAGE <= resultData.numPages) {\n    d.push({\n        title: '当前:第' + resultData.page + '页\\t\\t\\t共有' + resultData.numPages + '页,' + resultData.numResults + '条数据',\n        url: \"hiker://empty\",\n        col_type: \"text_center_1\",\n    });\n    resultData.result.forEach(list => {\n        // title=list.title.replace('<em class=\\\"keyword\\\">','<font color=\"red\">').replace('</em>','</font>')\n        title = list.title.replace(/<em class=\\\"keyword\\\">/g, '').replace(/<\\/em>/g, '')\n        pbtime=timeConvert(list.pubdate);\n        d.push({\n            title: title,\n            img: 'https://' + list.pic + \"@Referer=\",\n            desc: '““””<small><small><font color=\"grey\">播放量:'+list.play+'\\t\\t\\t弹幕:'+list.danmaku+'\\t\\t\\t喜欢:'+list.like+'\\n发布时间:'+pbtime+'</font></small></small>',\n            col_type: 'movie_1_left_pic',\n            url: \"hiker://page/video\",\n            extra: {\n                // 视频标识\n                aid: list.aid,\n                bvid:list.bvid,\n                title: title\n            }\n        });\n    });\n}\nsetSearchResult(d);\n"},{"col_type":"movie_1_left_pic","name":"推送","path":"feed","rule":"$.require(\"hiker://page/api\").getFeed().forEach(item => {\n\n    d.push({\n\n        title: item.title,\n\n        img: item.pic+'@Referer=',\n\n        desc: 'up:' + item.owner.name + '\\n' + item.stat.view + \"播放※\" + item.stat.like + \"点赞\",\n\n        url: \"hiker://page/video\",\n\n        col_type: 'movie_1_left_pic',\n\n        extra: {\n\n            // id其实是aid\n\n            aid: item.id,\n\n            cid: item.cid,\n\n        }\n\n    })\n\n})\n\n\n"},{"col_type":"text_1","name":"API","path":"api","rule":"// part1:聚合函数----------------\n// 登录验证\n$.exports.isLoggedIn = function () {\n    if (fileExist(\"hiker://files/rules/cy/bili.txt\")) {\n        biliData = JSON.parse(request(\"hiker://files/rules/cy/bili.txt\"));\n        if (biliData.userList.length == 0) {\n            return JSON.stringify({\n                \"userName\": '未登录',\n                \"userMid\": '',\n                \"userFace\": '',\n                \"type\": false\n            })\n        }\n        currentUser = biliData.userList[0];\n        var cookie = currentUser.cookie;\n        let userinfo = JSON.parse(fetch(\"https://api.bilibili.com/x/web-interface/nav\", {\n            headers: {\n                \"Cookie\": cookie\n            }\n        })).data;\n        if (userinfo.isLogin === false) {\n            return JSON.stringify({\n                \"userName\": '未登录',\n                \"userMid\": '',\n                \"userFace\": '',\n                \"type\": false\n            })\n        } else {\n            currentUser.userName = userinfo.uname;\n            currentUser.userMid = userinfo.mid;\n            // 1：会员开通；0：未开通\n            currentUser.vipStatus = userinfo.vipStatus;\n            currentUser.face = userinfo.face + \"@Referer=\";\n            saveFile('hiker://files/rules/cy/bili.txt', JSON.stringify(biliData));\n            // return true;\n            return JSON.stringify({\n                \"userName\": currentUser.userName,\n                \"userMid\": currentUser.userMid,\n                \"userFace\": currentUser.face,\n                \"type\": true\n            });\n        }\n    } else {\n        return JSON.stringify({\n            \"userName\": '未登录',\n            \"userMid\": '',\n            \"userFace\": '',\n            \"type\": false\n        });\n    }\n}\n// 哔哩视频解析：获取播放地址+提交播放记录\n$.exports.biliLazy = function (id, cid, qn) {\n    // 重置原生弹幕统一弹幕大小、修改步长\n    function overrideSave(dm) {\n        var danmuData = request(dm);\n        // 字体大小、弹幕步长\n        var danmuSetting = JSON.parse(readFile('hiker://files/dm盒子/settings.json'));\n        var size = danmuSetting.fontSize;\n        var step = danmuSetting.step;\n        var data = '';\n        td = pdfa(danmuData, 'i&&d');\n        for (let i = 0; i < td.length; i += step) {\n            timepoint = pdfh(td[i], 'd&&p').split(\",\")[0];\n            ct = pdfh(td[i], 'd&&p').split(\",\")[1];\n            color = pdfh(td[i], 'd&&p').split(\",\")[3];\n            // 弹幕内容\n            content = pdfh(td[i], 'd&&Text');\n            if (content.indexOf('<') != -1 || content.indexOf('>') != -1 || content.indexOf('&') != -1 || content.indexOf('\\u0000') != -1 || content.indexOf('\\b') != -1) {\n                continue;\n            }\n            tempdata = `<d p=\"${Math.round(timepoint)},${ct},${size},${color},0\">${content}</d>\\n`;\n            data += tempdata;\n        }\n        danmustr = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\\n<i>\\n${data}</i>`;\n        saveFile(dm, danmustr);\n    }\n    // 判断是否重写\n    var dm = 'https://comment.bilibili.com/' + cid + '.xml';\n    if (getItem('isOverrideSave', 'false') == 'true') {\n        file = 'https://comment.bilibili.com/' + cid + '.xml';\n        dm = 'hiker://files/cache/danmu/' + 'bili_from_' + getPageTitle() + '.xml';\n        downloadFile(file, dm);\n        overrideSave(dm);\n    }\n    var data = $.require(\"hiker://page/api\").getUrl(id, cid, qn);\n    // 提交历史记录\n    $.require(\"hiker://page/api\").reportProcess(id, cid);\n    // qualityNum=dash.audio.length;不需要了，找到了更好的判断方法，虽然我并不知道这些参数的含义是什么\n    videoList = [];\n    audioList = [];\n    nameList = [];\n    headers = [];\n    try {\n        data.audio.forEach(item => {\n            audioList.push(item.baseUrl);\n            headers.push({\n                \"Referer\": \"https://www.bilibili.com\",\n                \"User-Agent\": PC_UA\n            });\n        });\n        data.video.forEach(item => {\n            if (item.codecid == 7) {\n                videoList.push(item.baseUrl + \"#isVideo=true#\");\n                if (item.id == 126) {\n                    nameList.push('杜比视界');\n                } else if (item.id == 125) {\n                    nameList.push('HDR 真彩色');\n                } else if (item.id == 120) {\n                    nameList.push('4K超清');\n                } else if (item.id == 116) {\n                    nameList.push('1080P60高帧率');\n                } else if (item.id == 112) {\n                    nameList.push('1080P+高码率');\n                } else if (item.id == 80) {\n                    nameList.push('1080P高清');\n                } else if (item.id == 74) {\n                    nameList.push('720P60高帧率');\n                } else if (item.id == 64) {\n                    nameList.push('720P高清');\n                } else if (item.id == 32) {\n                    nameList.push('480P清晰');\n                } else if (item.id == 16) {\n                    nameList.push('360P流畅');\n                } else if (item.id == 6) {\n                    nameList.push('240P极速');\n                }\n            }\n        });\n        // 保持长度一致\n        while (audioList.length < videoList.length) {\n            // 复制 audioList 中最后一个元素并追加到数组末尾\n            audioList.push(audioList[audioList.length - 1]);\n            // 复制 headers 中最后一个元素并追加到数组末尾\n            headers.push(headers[headers.length - 1]);\n        }\n        return JSON.stringify({\n            urls: videoList,\n            audioUrls: audioList,\n            headers: headers,\n            names: nameList,\n            danmu: dm\n        })\n    } catch (e) {\n        log(\"正常解释失败，进行最后尝试:\");\n        return JSON.stringify({\n            urls: [data.durl[0].url + \"#isVideo=true#\"],\n            names: [data.quality + \"\"],\n            danmu: dm,\n            headers: [{\n                \"Referer\": \"https://www.bilibili.com\",\n                \"User-Agent\": PC_UA\n            }]\n        })\n    }\n}\n// 稍后在看——总操作判断\n$.exports.judgeToview = function (aid) {\n    selection = ['添加', '移除'];\n    return $(selection, 1).select((aid) => {\n        if (input == '添加') {\n            res = $.require(\"hiker://page/api\").addToview(aid);\n            if (res == 0) {\n                return \"toast://添加成功\"\n            } else if (res == -101) {\n                return \"toast://账号未登录\"\n            } else if (res == -111) {\n                return \"toast://csrf校验失败\"\n            } else if (res == -400) {\n                return \"toast://请求错误\"\n            } else if (res == 90001) {\n                return \"toast://列表已满\"\n            } else if (res == 90003) {\n                return \"toast://稿件已经被删除\"\n            } else {\n                return \"toast://未知错误\"\n            }\n        } else {\n            res = $.require(\"hiker://page/api\").delToview(aid);\n            if (res == 0) {\n                return \"toast://移除成功\"\n            } else if (res == -101) {\n                return \"toast://账号未登录\"\n            } else if (res == -111) {\n                return \"toast://csrf校验失败\"\n            } else if (res == -400) {\n                return \"toast://请求错误\"\n            } else {\n                return \"toast://未知错误\"\n            }\n        }\n    }, aid)\n}\n// 操作用户关系\n$.exports.changeUserRelation = function (mid, re_src) {\n    selection = ['关注', '取关', '悄悄关注', '取消悄悄关注', '拉黑', '取消拉黑', '踢出粉丝', '移动分组'];\n    return $(selection, 2).select((mid, re_src) => {\n        if (input == '移动分组') {\n            beforeTagids = [];\n            groups = $.require(\"hiker://page/api\").getUserGroup(mid);\n            if (JSON.stringify(groups) == '{}') {\n                beforeTagids.push(0);\n            } else {\n                for (var prop in groups) {\n                    beforeTagids.push(parseInt(prop));\n                }\n            }\n            // 获取我的分组\n            focusGroupList = [];\n            $.require(\"hiker://page/api\").getMyAttentionGroupList().forEach(list => {\n                focusGroupList.push(list.name + ' ' + list.tagid);\n            });\n            return $(focusGroupList, 1).select((beforeTagids, mid) => {\n                afterTagids = [];\n                afterTagids.push(parseInt(input.split(' ')[1]));\n                fids = [];\n                fids.push(Number(mid));\n                res = $.require(\"hiker://page/api\").moveUsers(beforeTagids, afterTagids, fids);\n                if (res == 0) {\n                    return \"toast://移动用户到\" + input.split(' ')[0] + \"分组成功\"\n                } else if (res == -101) {\n                    return \"toast://账号未登录\"\n                } else if (res == -111) {\n                    return \"toast://csrf校验失败\"\n                } else if (res == -400) {\n                    return \"toast://请求错误\"\n                } else if (res == 22104) {\n                    return \"toast://无权限\"\n                } else if (res == 22105) {\n                    return \"toast://未关注\"\n                } else {\n                    return \"toast://未知错误\"\n                }\n            }, beforeTagids, mid);\n        } else {\n            if (input == '关注') {\n                var act = 1;\n            } else if (input == '取关') {\n                var act = 2;\n            } else if (input == '悄悄关注') {\n                var act = 3;\n            } else if (input == '取消悄悄关注') {\n                var act = 4;\n            } else if (input == '拉黑') {\n                var act = 5;\n            } else if (input == '取消拉黑') {\n                var act = 6;\n            } else if (input == '踢出粉丝') {\n                var act = 7;\n            }\n            res = $.require(\"hiker://page/api\").addAttention(mid, act, re_src);\n            relation = $.require(\"hiker://page/api\").userMapping(mid);\n            updateItem('relation', {\n                title: relation,\n                img: relation == '未关注' ? storage0.getMyVar('图标').添加关注 : storage0.getMyVar('图标').已关注\n            });\n            if (res == 0) {\n                return \"toast://\" + input + \"成功\"\n            } else if (res == -101) {\n                return \"toast://账号未登录\"\n            } else if (res == -111) {\n                return \"toast://csrf校验失败\"\n            } else if (res == -400) {\n                return \"toast://请求错误\"\n            } else if (res == 22001) {\n                return \"toast://不能对自己进行此操作\"\n            } else if (res == 22003) {\n                return \"toast://用户位于黑名单\"\n            } else {\n                return \"toast://未知错误\"\n            }\n        }\n    }, mid, re_src)\n}\n// 映射用户关系\n$.exports.userMapping = function (mid) {\n    relationRes = $.require(\"hiker://page/api\").getRelation(mid);\n    if (relationRes.relation.attribute == 0) {\n        relation = '未关注'\n    } else if (relationRes.relation.attribute == 1) {\n        relation = '悄悄关注'\n    } else if (relationRes.relation.attribute == 2) {\n        relation = '已关注'\n    } else if (relationRes.relation.attribute == 6) {\n        relation = '已互粉'\n    } else if (relationRes.relation.attribute == 128) {\n        relation = '已拉黑'\n    }\n    return relation;\n}\n// 点赞操作逻辑\n$.exports.likeLogic = function (aid) {\n    hasLike = $.require(\"hiker://page/api\").hasLike(aid);\n    if (hasLike == 0) {\n        res = $.require(\"hiker://page/api\").setLike(aid, 1);\n        if (res == 0) {\n            like = JSON.parse(fetch(\"https://api.bilibili.com/x/web-interface/view?aid=\" + aid)).data.stat.like;\n            updateItem('setLike', {\n                title: (like + 1) + '',\n                img: storage0.getMyVar('图标').已点赞\n            });\n            return \"toast://点赞成功\";\n        } else {\n            return \"toast://点赞出错了~\";\n        }\n    } else {\n        res = $.require(\"hiker://page/api\").setLike(aid, 2);\n        if (res == 0) {\n            like = JSON.parse(fetch(\"https://api.bilibili.com/x/web-interface/view?aid=\" + aid)).data.stat.like;\n            updateItem('setLike', {\n                title: (like - 1) + '',\n                img: storage0.getMyVar('图标').未点赞\n            });\n            return \"toast://取消点赞成功\";\n        } else {\n            return \"toast://取消点赞出错了~\";\n        }\n    }\n}\n// 收藏操作逻辑\n$.exports.favourLogic = function (aid, mid) {\n    hasFavour = $.require(\"hiker://page/api\").hasFavour(aid);\n    if (hasFavour) {\n        // 移出收藏\n        favourIdList = $.require(\"hiker://page/api\").getFavourIdList(aid, mid);\n        res = $.require(\"hiker://page/api\").setFavour(aid, '', favourIdList);\n        if (res == 0) {\n            like = JSON.parse(fetch(\"https://api.bilibili.com/x/web-interface/view?aid=\" + aid)).data.stat.favorite;\n            updateItem('setFavour', {\n                title: (like - 1) + '',\n                img: storage0.getMyVar('图标').未收藏\n            });\n            return \"toast://取消收藏成功\";\n        } else {\n            return \"toast://取消收藏出错了~\";\n        }\n    } else {\n        // 选择收藏\n        res = $.require(\"hiker://page/api\").getCollectionGroupList()[0].mediaListResponse.list;\n        GroupList = [];\n        res.forEach(item => {\n            GroupList.push(item.title + ' ' + item.id);\n        });\n        return $(GroupList, 1).select((aid) => {\n            selectId = parseInt(input.split(' ')[1])\n            res = $.require(\"hiker://page/api\").setFavour(aid, selectId, '');\n            if (res == 0) {\n                like = JSON.parse(fetch(\"https://api.bilibili.com/x/web-interface/view?aid=\" + aid)).data.stat.favorite;\n                updateItem('setFavour', {\n                    title: (like + 1) + '',\n                    img: storage0.getMyVar('图标').已收藏\n                });\n                return \"toast://收藏成功\";\n            } else {\n                return \"toast://收藏出错了~\";\n            }\n        }, aid);\n    }\n}\n\n// part2:散装API----------------\n// 获取搜索结果\n$.exports.getSearchRes = function (search_type, seaword, page, pageSize) {\n    queryJson = {\n        __refresh__: true,\n        _extra: '',\n        context: '',\n        page: page,\n        page_size: pageSize,\n        order: '',\n        duration: '',\n        from_source: '',\n        from_spmid: 333.337,\n        platform: 'pc',\n        highlight: 1,\n        single_column: 0,\n        keyword: seaword,\n        search_type: search_type,\n        preload: true,\n        com2co: true\n    }\n    parms = $.require(\"hiker://page/api\").getWbiEnc(queryJson);\n    dataLink = 'https://api.bilibili.com/x/web-interface/wbi/search/type?' + parms;\n    cookie = JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie;\n    res = JSON.parse(fetch(dataLink, {\n        headers: {\n            \"User-Agent\": PC_UA,\n            \"Referer\": \"https://www.bilibili.com/\",\n            \"Cookie\": cookie\n        },\n        method: \"GET\"\n    })).data;\n    return res;\n}\n// 视频推荐\n$.exports.getFeed = function () {\n    let u = \"https://api.bilibili.com/x/web-interface/index/top/feed/rcmd\";\n    var res = JSON.parse(fetch(u, {\n        headers: {\n            \"Cookie\": JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie\n        }\n    }));\n    return res.data.item\n}\n// 获取播放地址\n$.exports.getUrl = function (avid, cid, qn) {\n    var setting = JSON.parse(request(\"hiker://files/rules/cy/bili.txt\"));\n    var Cookie = setting.bfKey != '' ? base64Decode(base64Decode(setting.bfKey)) : setting.userList[0].cookie;\n    try {\n        let u = request(buildUrl(\"http://api.bilibili.com/x/player/playurl\", {\n            \"avid\": String(avid),\n            \"cid\": String(cid),\n            \"qn\": qn,\n            \"fnver\": 0,\n            // \"fnval\": 4048,\n            \"fnval\": 16,\n            \"fourk\": 1\n        }), {\n            headers: {\n                Cookie: Cookie\n            }\n        })\n        res = JSON.parse(u);\n        if (res.data.dash) {\n            return res.data.dash;\n        } else {\n            log(\"没有找到dash字段\");\n            if (res.data.support_formats) {\n                if (u.includes(\"试看\")) {\n                    msg = \"您刚才观看的视频是试看视频，观看完整片段请前往官网购买！\";\n                    log(msg);\n                    confirm({\n                        title: '温馨提示', content: msg, confirm: $.toString(() => {\n                        }), cancel: $.toString(() => {})\n                    })\n                }\n            }\n            return res.data;\n        }\n    } catch (e) {\n        try {\n            // 一人之下第一季的第1，2集——可以获取大会员剧集的前3min\n            log('尝试更改请求接口...:' + e);\n            let u = request(buildUrl(\"https://api.bilibili.com/pgc/player/web/playurl\", {\n                \"avid\": String(avid),\n                \"cid\": String(cid),\n                \"qn\": qn,\n                \"fnver\": 0,\n                // \"fnval\": 4048,\n                \"fnval\": 16,\n                \"fourk\": 1\n            }), {\n                headers: {\n                    Cookie: Cookie\n                }\n            })\n            // 仙王的日常第三季第10集，没有dash，服了\n            if (JSON.parse(u).result.dash) {\n                return JSON.parse(u).result.dash;\n            } else {\n                log('尝试走单线路画质~');\n                return JSON.parse(u).result;\n            }\n        } catch (error) {\n            log('cookie有没有可能失效了呢~');\n            return '';\n        }\n    }\n}\n// 提交播放记录\n$.exports.reportProcess = function (avid, cid) {\n    let csrf = JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie.match(/bili_jct=(.*?);/) === null ? JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie.split('bili_jct=')[1] : JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie.match(/bili_jct=(.*?);/)[1];\n    let res = post(\"http://api.bilibili.com/x/v2/history/report\", {\n        body: {\n            \"aid\": avid,\n            \"cid\": cid,\n            \"csrf\": csrf,\n            \"progress\": 0\n        },\n        headers: {\n            Cookie: JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie\n        }\n    })\n}\n\n// 获取评论\n$.exports.getComments = function (id, type, page) {\n    let u = buildUrl(\"http://api.bilibili.com/x/v2/reply\", {\n        \"type\": type,\n        \"oid\": id,\n        \"pn\": page\n    });\n    let res = request(u, {\n        headers: {\n            Cookie: JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie\n        }\n    })\n    return JSON.parse(res).data.replies\n}\n// 添加稍后在看——真的麻了，为什么fetch就错呢~\n$.exports.addToview = function (aid) {\n    let csrf = JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie.match(/bili_jct=(.*?);/) === null ? JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie.split('bili_jct=')[1] : JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie.match(/bili_jct=(.*?);/)[1];\n    let u = \"https://api.bilibili.com/x/v2/history/toview/add\";\n    let res = request(buildUrl(u, {\n        \"aid\": aid,\n        \"csrf\": csrf,\n    }), {\n        headers: {\n            \"Referer\": \"https://www.bilibili.com/\",\n            \"Cookie\": JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie\n        },\n        method: \"POST\"\n    })\n    return JSON.parse(res).code;\n}\n// 删除稍后在看\n$.exports.delToview = function (aid) {\n    let csrf = JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie.match(/bili_jct=(.*?);/) === null ? JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie.split('bili_jct=')[1] : JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie.match(/bili_jct=(.*?);/)[1];\n    let u = \"http://api.bilibili.com/x/v2/history/toview/del\";\n    let res = request(buildUrl(u, {\n        \"aid\": aid,\n        \"csrf\": csrf,\n    }), {\n        headers: {\n            \"Referer\": \"https://www.bilibili.com/\",\n            \"Cookie\": JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie\n        },\n        method: \"POST\"\n    })\n    return JSON.parse(res).code;\n}\n// 订阅影视(追番、追剧)\n$.exports.subscribeFilm = function (season_id) {\n    let csrf = JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie.match(/bili_jct=(.*?);/) === null ? JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie.split('bili_jct=')[1] : JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie.match(/bili_jct=(.*?);/)[1];\n    let u = \"https://api.bilibili.com/pgc/web/follow/add\";\n    let res = request(buildUrl(u, {\n        \"season_id\": season_id,\n        \"csrf\": csrf,\n    }), {\n        headers: {\n            \"Referer\": \"https://www.bilibili.com/\",\n            \"Cookie\": JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie\n        },\n        method: \"POST\"\n    })\n    return JSON.parse(res).result.toast;\n}\n// 取消订阅\n$.exports.cancelSubscribeFilm = function (season_id) {\n    let csrf = JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie.match(/bili_jct=(.*?);/) === null ? JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie.split('bili_jct=')[1] : JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie.match(/bili_jct=(.*?);/)[1];\n    let u = \"https://api.bilibili.com/pgc/web/follow/del\";\n    let res = request(buildUrl(u, {\n        \"season_id\": season_id,\n        \"csrf\": csrf,\n    }), {\n        headers: {\n            \"Referer\": \"https://www.bilibili.com/\",\n            \"Cookie\": JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie\n        },\n        method: \"POST\"\n    })\n    return JSON.parse(res).result.toast;\n}\n/*操作用户关系\nfid:用户mid\nact:操作代码\nre_src：关注来源\n*/\n$.exports.addAttention = function (mid, act, re_src) {\n    let csrf = JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie.match(/bili_jct=(.*?);/) === null ? JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie.split('bili_jct=')[1] : JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie.match(/bili_jct=(.*?);/)[1];\n    let u = \"https://api.bilibili.com/x/relation/modify\";\n    let res = request(buildUrl(u, {\n        \"fid\": mid,\n        \"act\": act,\n        \"re_src\": re_src,\n        \"csrf\": csrf\n    }), {\n        headers: {\n            \"Referer\": \"https://www.bilibili.com/\",\n            \"Cookie\": JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie\n        },\n        method: \"POST\"\n    })\n    return JSON.parse(res).code;\n}\n// 移动关注用户分组\n$.exports.moveUsers = function (beforeTagids, afterTagids, fids) {\n    let csrf = JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie.match(/bili_jct=(.*?);/) === null ? JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie.split('bili_jct=')[1] : JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie.match(/bili_jct=(.*?);/)[1];\n    let u = \"https://api.bilibili.com/x/relation/tags/moveUsers\";\n    let res = request(buildUrl(u, {\n        \"beforeTagids\": beforeTagids.toString(),\n        \"afterTagids\": afterTagids.toString(),\n        \"fids\": fids.toString(),\n        \"csrf\": csrf\n    }), {\n        headers: {\n            \"Referer\": \"https://www.bilibili.com/\",\n            \"Cookie\": JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie\n        },\n        method: \"POST\"\n    })\n    return JSON.parse(res).code;\n}\n// 获取用户关系\n$.exports.getRelation = function (mid) {\n    // https://api.bilibili.com/x/space/acc/relation?mid=,旧接口\n    parms = $.require(\"hiker://page/api\").getWbiEnc({ mid: mid });\n    infoLink = 'https://api.bilibili.com/x/space/wbi/acc/relation?' + parms;\n    return JSON.parse(request(infoLink, {\n        headers: {\n            \"User-Agent\": PC_UA,\n            \"Referer\": \"https://www.bilibili.com/\",\n            \"Cookie\": JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie\n        }\n    })).data\n}\n// 查询目标用户所在的分组\n$.exports.getUserGroup = function (mid) {\n    return JSON.parse(request(\"https://api.bilibili.com/x/relation/tag/user?fid=\" + mid, {\n        headers: {\n            \"Cookie\": JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie\n        }\n    })).data\n}\n// 获取关注分组\n$.exports.getMyAttentionGroupList = function () {\n    return JSON.parse(fetch(\"https://api.bilibili.com/x/relation/tags?jsonp=jsonp\", {\n        headers: {\n            \"Cookie\": JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie,\n            \"User-Agent\": PC_UA,\n            \"Referer\": \"https://www.bilibili.com/\"\n        }\n    })).data;\n}\n// 是否点赞\n$.exports.hasLike = function (aid) {\n    return JSON.parse(request(buildUrl(\"http://api.bilibili.com/x/web-interface/archive/has/like\", {\n        \"aid\": aid\n    }), {\n        headers: {\n            \"Cookie\": JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie\n        }\n    })).data\n}\n// 是否收藏\n$.exports.hasFavour = function (aid) {\n    return JSON.parse(request(buildUrl(\"http://api.bilibili.com/x/v2/fav/video/favoured\", {\n        \"aid\": aid\n    }), {\n        headers: {\n            \"Cookie\": JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie\n        }\n    })).data.favoured\n}\n// 视频点赞\n$.exports.setLike = function (aid, dealWay) {\n    let csrf = JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie.match(/bili_jct=(.*?);/) === null ? JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie.split('bili_jct=')[1] : JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie.match(/bili_jct=(.*?);/)[1];\n    let res = post(\"http://api.bilibili.com/x/web-interface/archive/like\", {\n        body: {\n            \"aid\": aid,\n            \"like\": dealWay,\n            \"csrf\": csrf\n        },\n        headers: {\n            \"Cookie\": JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie\n        }\n    })\n    return JSON.parse(res).code;\n}\n// 获取收藏列表\n$.exports.getCollectionGroupList = function () {\n    return collections = JSON.parse(fetch(\"https://api.bilibili.com/x/v3/fav/folder/list4navigate\", {\n        headers: {\n            \"Cookie\": JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie,\n        }\n    })).data;\n}\n// 收藏/取消视频API\n$.exports.setFavour = function (aid, add_media_ids, del_media_ids) {\n    let csrf = JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie.match(/bili_jct=(.*?);/) === null ? JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie.split('bili_jct=')[1] : JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie.match(/bili_jct=(.*?);/)[1];\n    let res = post(\"http://api.bilibili.com/medialist/gateway/coll/resource/deal\", {\n        body: {\n            \"rid\": aid,\n            \"type\": 2,\n            \"add_media_ids\": add_media_ids.toString(),\n            \"del_media_ids\": del_media_ids.toString(),\n            \"csrf\": csrf\n        },\n        headers: {\n            \"Cookie\": JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie,\n            \"Referer\": \"https://www.bilibili.com\"\n        }\n    })\n    return JSON.parse(res).code;\n}\n// 获取视频所在收藏夹\n$.exports.getFavourIdList = function (aid, userMid) {\n    let u = \"https://api.bilibili.com/x/v3/fav/folder/created/list-all\";\n    let res = request(buildUrl(u, {\n        \"type\": 2,\n        \"rid\": aid,\n        \"up_mid\": userMid,\n    }), {\n        headers: {\n            \"Cookie\": JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie,\n            \"Referer\": \"https://www.bilibili.com\"\n        }\n    });\n    favourIdList = [];\n    JSON.parse(res).data.list.forEach((item) => {\n        if (item.fav_state == 1) {\n            favourIdList.push(item.id);\n        }\n    })\n    return favourIdList;\n}\n// 热映剧集时间轴\n$.exports.getMovies = function (type, before, after) {\n    let u = buildUrl(\"http://api.bilibili.com/pgc/web/timeline\", {\n        \"types\": type,\n        \"before\": before,\n        \"after\": after\n    })\n    let res = JSON.parse(request(u, {\n        headers: {\n            \"Cookie\": JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie\n        }\n    }))\n    return res.result\n}\n// 获取专栏文章\n$.exports.getUserArticle = function (upMid, page) {\n    let u = \"https://api.bilibili.com/x/space/article\";\n    let res = request(buildUrl(u, {\n        \"mid\": upMid,\n        \"pn\": page,\n        \"ps\": 12,\n        \"sort\": 'publish_time'\n    }), {\n        headers: {\n            \"Cookie\": JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie,\n            \"Referer\": \"https://www.bilibili.com\"\n        }\n    });\n    return JSON.parse(res).data;\n}\n// 获取动态数据\n$.exports.getDynamicData = function (from, upMid) {\n    var nextInfo = {};\n    if (MY_PAGE == 1) {\n        if (from == 'upSpace') {\n            var u = \"https://api.bilibili.com/x/polymer/web-dynamic/v1/feed/space?offset=&host_mid=\" + upMid + \"&timezone_offset=-480\";\n        } else {\n            var u = \"https://api.bilibili.com/x/polymer/web-dynamic/v1/feed/all?timezone_offset=-480&type=all\";\n        }\n        latenews = JSON.parse(fetch(u, {\n            headers: {\n                \"Cookie\": JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie,\n                \"User-Agent\": PC_UA,\n                \"Referer\": \"https://www.bilibili.com/\"\n            }\n        })).data;\n        nextInfo.offset = latenews.offset;\n    } else {\n        if (from == 'upSpace') {\n            var u = \"https://api.bilibili.com/x/polymer/web-dynamic/v1/feed/space?offset=\" + storage0.getMyVar(JSON.stringify(MY_PAGE)).offset + \"&host_mid=\" + upMid + \"&timezone_offset=-480\";\n        } else {\n            var u = \"https://api.bilibili.com/x/polymer/web-dynamic/v1/feed/all?timezone_offset=-480&type=all&offset=\" + storage0.getMyVar(JSON.stringify(MY_PAGE)).offset;\n        }\n        latenews = JSON.parse(fetch(u, {\n            headers: {\n                \"Cookie\": JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie\n            }\n        })).data;\n        nextInfo.offset = latenews.offset;\n    }\n    storage0.putMyVar(JSON.stringify(MY_PAGE + 1), nextInfo);\n    return latenews;\n}\n\n// ——特别的行为、工具函数——\n// 展示动态数据(返回函数方法的可执行字符串)\n$.exports.showDynamicData = function () {\n    return $.toString(() => {\n        imgLink = storage0.getMyVar('图标');\n        latenews.items.forEach(list => {\n            if (list.type == 'DYNAMIC_TYPE_AV') {\n                // 投稿视频（当前发布）√\n                d.push({\n                    title: list.modules.module_author.name,\n                    desc: '<small><small><font color=\"grey\">' + list.modules.module_author.pub_time + '-' + list.modules.module_author.pub_action + '</font></small></small>',\n                    img: list.modules.module_author.face + \"@Referer=\",\n                    url: 'hiker://page/upHome',\n                    col_type: 'avatar',\n                    extra: {\n                        mid: list.modules.module_author.mid,\n                        title: list.modules.module_author.name,\n                        face: list.modules.module_author.face\n                    }\n                }, {\n                    col_type: 'line'\n                }, {\n                    // 不一定有文字啊\n                    title: (list.modules.module_dynamic.desc === null ? '<font color=\"grey\">up太懒了，连文案都不想配...</font>' : list.modules.module_dynamic.desc.text).replace(/\\n/g, '<br>') + '<br><a href=\"hiker://page/Comments?p=fypage\">查看评论</a>',\n                    url: 'hiker://page/Comments?p=fypage',\n                    // 这个不能用long_text\n                    col_type: 'rich_text',\n                    extra: {\n                        id: list.basic.comment_id_str,\n                        type: 1\n                    }\n                }, {\n                    title: list.modules.module_dynamic.major.archive.title,\n                    img: list.modules.module_dynamic.major.archive.cover + \"@Referer=\",\n                    col_type: 'movie_1_left_pic',\n                    url: \"hiker://page/video\",\n                    desc: list.modules.module_dynamic.major.archive.desc,\n                    extra: {\n                        aid: list.modules.module_dynamic.major.archive.aid,\n                        lineVisible: false\n                    }\n                }, {\n                    desc: '<small><small><font color=\"grey\">留言:' + list.modules.module_stat.comment.count + '\\t\\t分享:' + list.modules.module_stat.forward.count + '\\t\\t喜欢:' + list.modules.module_stat.like.count + '</font></small></small>',\n                    img: imgLink.动态足迹,\n                    url: 'hiker://empty',\n                    col_type: 'avatar'\n                }, {\n                    col_type: 'line_blank'\n                });\n            } else if (list.type == 'DYNAMIC_TYPE_FORWARD') {\n                // 引用，多出了orig指向一个(过去)已发布的视频,准确的说是引用之前的帖子不一定是视频√\n                d.push({\n                    title: list.modules.module_author.name,\n                    img: list.modules.module_author.face + \"@Referer=\",\n                    desc: '<small><small><font color=\"grey\">' + list.modules.module_author.pub_time + '</font></small></small>',\n                    url: 'hiker://page/upHome',\n                    col_type: 'avatar',\n                    extra: {\n                        mid: list.modules.module_author.mid,\n                        title: list.modules.module_author.name,\n                        face: list.modules.module_author.face\n                    }\n                }, {\n                    col_type: 'line'\n                }, {\n                    title: (list.modules.module_dynamic.desc === null ? '<font color=\"grey\">up太懒了，连文案都不想配...</font>' : list.modules.module_dynamic.desc.text).replace(/\\n/g, '<br>') + '<br><a href=\"hiker://page/Comments?p=fypage\">查看评论</a>',\n                    url: 'hiker://page/Comments?p=fypage',\n                    col_type: 'rich_text',\n                    extra: {\n                        id: list.basic.comment_id_str,\n                        // 也是纯文字，因为只是文字+引用早已投稿的视频\n                        type: 17\n                    }\n                });\n                // 引用的内容——截断（根据不同的引用类型进行处理）\n                d.push({\n                    title: '<small><small>下面内容来自引用的帖子,up是:<a href=\"hiker://page/upHome\">' + list.orig.modules.module_author.name + '</a></small></small>',\n                    col_type: \"rich_text\",\n                    extra: {\n                        mid: list.orig.modules.module_author.mid,\n                        title: list.orig.modules.module_author.name,\n                        face: list.orig.modules.module_author.face\n                    }\n                }, {\n                    col_type: \"line\"\n                });\n                if (list.orig.type == 'DYNAMIC_TYPE_AV') {\n                    // 引用视频说说\n                    d.push({\n                        title: list.orig.modules.module_dynamic.major.archive.title,\n                        img: list.orig.modules.module_dynamic.major.archive.cover + \"@Referer=\",\n                        col_type: 'movie_1_left_pic',\n                        url: \"hiker://page/video\",\n                        desc: list.orig.modules.module_dynamic.major.archive.desc,\n                        extra: {\n                            aid: list.orig.modules.module_dynamic.major.archive.aid,\n                            lineVisible: false\n                        }\n                    });\n                } else if (list.orig.type == 'DYNAMIC_TYPE_WORD') {\n                    // 引用文字说说\n                    d.push({\n                        title: (list.orig.modules.module_dynamic.desc.text === null ? '<font color=\"grey\">up太懒了，连文案都不想配...</font>' : list.orig.modules.module_dynamic.desc.text).replace(/\\n/g, '<br>') + '<br><a href=\"hiker://page/Comments?p=fypage\">查看评论</a>',\n                        url: 'hiker://page/Comments?p=fypage',\n                        col_type: 'rich_text',\n                        extra: {\n                            // 评论id来源都不一样\n                            id: list.orig.id_str,\n                            // 纯文字\n                            type: 17\n                        }\n                    });\n\n                } else if (list.orig.type == 'DYNAMIC_TYPE_DRAW') {\n                    // 引用图片说说\n                    d.push({\n                        title: (list.orig.modules.module_dynamic.desc.text === null ? '<font color=\"grey\">up太懒了，连文案都不想配...</font>' : list.orig.modules.module_dynamic.desc.text).replace(/\\n/g, '<br>') + '<br><a href=\"hiker://page/Comments?p=fypage\">查看评论</a>',\n                        col_type: 'rich_text',\n                        url: \"hiker://page/Comments?p=fypage\",\n                        extra: {\n                            id: list.orig.modules.module_dynamic.major.draw.id,\n                            type: 11\n                        }\n                    });\n                    list.orig.modules.module_dynamic.major.draw.items.forEach(item => {\n                        d.push({\n                            img: item.src + \"@Referer=\",\n                            col_type: 'pic_3_square',\n                            url: item.src + \"@Referer=\",\n                        });\n                    });\n                } else {\n                    log('可能还有未适配的说说类型');\n                }\n                // 分割\n                d.push({\n                    desc: '<small><small><font color=\"grey\">留言:' + list.modules.module_stat.comment.count + '\\t\\t分享:' + list.modules.module_stat.forward.count + '\\t\\t喜欢:' + list.modules.module_stat.like.count + '</font></small></small>',\n                    img: imgLink.动态足迹,\n                    url: 'hiker://empty',\n                    col_type: 'avatar'\n                }, {\n                    col_type: 'line_blank'\n                });\n            } else if (list.type == 'DYNAMIC_TYPE_WORD') {\n                // 纯文字\n                d.push({\n                    title: list.modules.module_author.name,\n                    desc: '<small><small><font color=\"grey\">' + list.modules.module_author.pub_time + '</font></small></small>',\n                    img: list.modules.module_author.face + \"@Referer=\",\n                    url: 'hiker://page/upHome',\n                    col_type: 'avatar',\n                    extra: {\n                        mid: list.modules.module_author.mid,\n                        title: list.modules.module_author.name,\n                        face: list.modules.module_author.face\n                    }\n                }, {\n                    col_type: 'line'\n                }, {\n                    title: (list.modules.module_dynamic.desc === null ? '<font color=\"grey\">up太懒了，连文案都不想配...</font>' : list.modules.module_dynamic.desc.text).replace(/\\n/g, '<br>') + '<br><a href=\"hiker://page/Comments?p=fypage\">查看评论</a>',\n                    url: 'hiker://page/Comments?p=fypage',\n                    col_type: 'rich_text',\n                    extra: {\n                        id: list.basic.comment_id_str,\n                        // 纯文字\n                        type: 17\n                    }\n                }, {\n                    desc: '<small><small><font color=\"grey\">留言:' + list.modules.module_stat.comment.count + '\\t\\t分享:' + list.modules.module_stat.forward.count + '\\t\\t喜欢:' + list.modules.module_stat.like.count + '</font></small></small>',\n                    img: imgLink.动态足迹,\n                    url: 'hiker://empty',\n                    col_type: 'avatar'\n                }, {\n                    col_type: 'line_blank'\n                });\n            } else if (list.type == 'DYNAMIC_TYPE_DRAW') {\n                // 图片说说\n                d.push({\n                    title: list.modules.module_author.name,\n                    desc: '<small><small><font color=\"grey\">' + list.modules.module_author.pub_time + '</font></small></small>',\n                    img: list.modules.module_author.face + \"@Referer=\",\n                    url: 'hiker://page/upHome',\n                    col_type: 'avatar',\n                    extra: {\n                        mid: list.modules.module_author.mid,\n                        title: list.modules.module_author.name,\n                        face: list.modules.module_author.face\n                    }\n                }, {\n                    col_type: 'line'\n                }, {\n                    title: (list.modules.module_dynamic.desc === null ? '<font color=\"grey\">up太懒了，连文案都不想配...</font>' : list.modules.module_dynamic.desc.text).replace(/\\n/g, '<br>') + '<br><a href=\"hiker://page/Comments?p=fypage\">查看评论</a>',\n                    url: 'hiker://page/Comments?p=fypage',\n                    col_type: 'rich_text',\n                    extra: {\n                        id: list.basic.comment_id_str,\n                        // 相簿（图片动态）\n                        type: 11\n                    }\n                });\n                list.modules.module_dynamic.major.draw.items.forEach(item => {\n                    d.push({\n                        img: item.src + \"@Referer=\",\n                        col_type: 'pic_3_square',\n                        url: item.src + \"@Referer=\",\n                    });\n                });\n                d.push({\n                    desc: '<small><small><font color=\"grey\">留言:' + list.modules.module_stat.comment.count + '\\t\\t分享:' + list.modules.module_stat.forward.count + '\\t\\t喜欢:' + list.modules.module_stat.like.count + '</font></small></small>',\n                    img: imgLink.动态足迹,\n                    url: 'hiker://empty',\n                    col_type: 'avatar'\n                }, {\n                    col_type: 'line_blank'\n                });\n            }\n        });\n    })\n}\n// 时间日期转换函数\n$.exports.timeConvert = function (time) {\n    function formatDate(e, t) {\n        e = new Date(e * 1000); //时间戳为10位需*1000，时间戳为13位的话不需乘1000\n        return t.replace(/yyyy|YYYY/, e.getFullYear())\n            .replace(/yy|YY/, r(e.getFullYear() % 100, 2))\n            .replace(/mm|MM/, r(e.getMonth() + 1, 2))\n            .replace(/m|M/g, e.getMonth() + 1)\n            .replace(/dd|DD/, r(e.getDate(), 2))\n            .replace(/d|D/g, e.getDate())\n            .replace(/hh|HH/, r(e.getHours(), 2))\n            .replace(/h|H/g, e.getHours())\n            .replace(/ii|II/, r(e.getMinutes(), 2))\n            .replace(/i|I/g, e.getMinutes())\n            .replace(/ss|SS/, r(e.getSeconds(), 2))\n            .replace(/s|S/g, e.getSeconds())\n            .replace(/w/g, e.getDay())\n            .replace(/W/g, [\"日\", \"一\", \"二\", \"三\", \"四\", \"五\", \"六\"][e.getDay()])\n    }\n\n    function r(e, t) {\n        for (var r = 0, n = t - (e + \"\").length; r < n; r++) e = \"0\" + e;\n        return e + \"\"\n    }\n    return formatDate(time, 'YYYY-MM-DD hh:ii:ss');\n    // console.log(formatDate(1664089532, 'YYYY-MM-DD hh:ii:ss'));\n}\n// 秒数分钟表达转换函数\n$.exports.formatSeconds = function (seconds) {\n    let minutes = Math.floor(seconds / 60); // 计算分钟数\n    let remainingSeconds = seconds % 60; // 计算剩余的秒数\n    let formattedTime = `${minutes}:${String(remainingSeconds).padStart(2, '0')}`;\n    return formattedTime;\n}\n\n// B站Wbi签名算法(After 2023-3,get request with wbi.)\n$.exports.getWbiEnc = function (queryJson) {\n    const mixinKeyEncTab = [\n        46, 47, 18, 2, 53, 8, 23, 32, 15, 50, 10, 31, 58, 3, 45, 35, 27, 43, 5, 49,\n        33, 9, 42, 19, 29, 28, 14, 39, 12, 38, 41, 13, 37, 48, 7, 16, 24, 55, 40,\n        61, 26, 17, 0, 1, 60, 51, 30, 4, 22, 25, 54, 21, 56, 59, 6, 63, 57, 62, 11,\n        36, 20, 34, 44, 52\n    ];\n\n    // 对 imgKey 和 subKey 进行字符顺序打乱编码\n    function getMixinKey(orig) {\n        let temp = '';\n        mixinKeyEncTab.forEach((n) => {\n            temp += orig[n]\n        });\n        return temp.slice(0, 32);\n    }\n\n    // 为请求参数进行 wbi 签名\n    function encWbi(params, img_key, sub_key) {\n        const mixin_key = getMixinKey(img_key + sub_key),\n            curr_time = Math.round(Date.now() / 1000),\n            chr_filter = /[!'\\(\\)*]/g\n        let query = [];\n        params = Object.assign(params, { wts: curr_time });    // 添加 wts 字段\n        // 按照 key 重排参数\n        Object.keys(params).sort().forEach((key) => {\n            query.push(\n                encodeURIComponent(key) +\n                '=' +\n                // 过滤 value 中的 \"!'()*\" 字符\n                encodeURIComponent(('' + params[key]).replace(chr_filter, ''))\n            )\n        })\n        query = query.join('&');\n        const wbi_sign = md5(query + mixin_key); // 计算 w_rid\n        return query + '&w_rid=' + wbi_sign;\n    }\n\n    // 获取最新的 img_key 和 sub_key\n    function getWbiKeys() {\n        const json_content = JSON.parse(fetch('https://api.bilibili.com/x/web-interface/nav', {\n            headers: {\n                \"User-Agent\": PC_UA,\n                \"Referer\": \"https://www.bilibili.com/\"\n            },\n            method: 'GET'\n        })).data;\n        img_url = json_content.wbi_img.img_url;\n        sub_url = json_content.wbi_img.sub_url;\n        return {\n            img_key: img_url.substring(img_url.lastIndexOf('/') + 1, img_url.length).split('.')[0],\n            sub_key: sub_url.substring(sub_url.lastIndexOf('/') + 1, sub_url.length).split('.')[0]\n        }\n    }\n\n    const wbi_keys = getWbiKeys();\n\n    const query = encWbi(\n        queryJson,\n        wbi_keys.img_key,\n        wbi_keys.sub_key\n    );\n    return query;\n}\n"},{"col_type":"movie_3","name":"videoPage","path":"video","rule":"js:\nvar d = [];\n// 预处理\nputMyVar('功能折叠', '关');\nimgLink = storage0.getMyVar('图标');\naid = MY_PARAMS.aid + \"\";\n// bvid = MY_PARAMS.bvid + \"\";\nmid = MY_PARAMS.mid + \"\";\nvar {formatSeconds}=$.require(\"hiker://page/api\");\ntry {\n    //获取视频分P信息\n    var p = JSON.parse(fetch(\"https://api.bilibili.com/x/web-interface/view?aid=\" + aid)).data;\n    hasLike = $.require(\"hiker://page/api\").hasLike(aid);\n    hasFavour = $.require(\"hiker://page/api\").hasFavour(aid);\n    setPageTitle(p.title);\n    setPagePicUrl(p.pic + '@Referer=');\n    // 只有1P的情况\n    if (p.pages.length == 1) {\n        cid = p.pages[0].cid;\n        d.push({\n            title: p.title,\n            img: p.pic + '@Referer=',\n            url: $().lazyRule((aid, cid, qn) => {\n                // 真离了个大谱，明明替换掉了，ua字符串又变回来了，又要处理一次\n                return $.require(\"hiker://page/api\").biliLazy(aid, cid, qn).replace(/;/g, \"；；\");\n            }, aid + \"\", cid + \"\", '112'),\n            col_type: \"pic_1\",\n            desc:'播放量:'+p.stat.view+'\\t\\t\\t弹幕数:'+p.stat.danmaku+'\\n发布日期:'+$.require(\"hiker://page/api\").timeConvert(p.ctime),\n            extra: {\n                id:'aid-'+aid+'|cid-'+cid,\n                longClick: [{\n                    title: 'dm盒子', js: $.toString(() => {\n                        return 'hiker://page/setting#noHistory#?rule=dm盒子';\n                    })\n                }, {\n                    title: '弹幕控制', js: $.toString(() => {\n                        if (getItem('isOverrideSave', 'false') == 'true') {\n                            setItem('isOverrideSave', 'false');\n                            return 'toast://弹幕将不受dm盒子参数控制';\n                        } else {\n                            setItem('isOverrideSave', 'true');\n                            return 'toast://弹幕将受到dm盒子参数控制';\n                        }\n                    })\n                }]\n            }\n        });\n        d.push({\n            title: '<font color=\"blue\">' + p.owner.name + '</font>',\n            url: \"hiker://page/upHome\",\n            img: p.owner.face + \"@Referer=\",\n            col_type: \"avatar\",\n            extra: {\n                mid: p.owner.mid,\n                title: p.owner.name,\n                face: p.owner.face\n            }\n        });\n        // 虽然只有1P,但可能处于合集视频中，往往在up上传中属于一套影片\n        if (p.ugc_season) {\n            d.push({\n                title: '📁所属合集：<a href=\"hiker://page/collectionViedo\">'+p.ugc_season.title+'</a>',\n                url: \"hiker://page/collectionViedo#noHistory#\",\n                col_type: 'rich_text',\n                extra: { \"textSize\": 12, aid: aid }\n            })\n        }\n        d.push({\n            col_type: 'line'\n        }, {\n            title: p.stat.like,\n            img: hasLike == 1 ? imgLink.已点赞 : imgLink.未点赞,\n            url: $('#noLoading##noHistory#').lazyRule((aid) => {\n                return $.require(\"hiker://page/api\").likeLogic(aid)\n            }, aid),\n            col_type: \"icon_small_4\",\n            extra: {\n                id: 'setLike'\n            }\n        }, {\n            title: p.stat.favorite,\n            img: hasFavour ? imgLink.已收藏 : imgLink.未收藏,\n            url: $('#noLoading##noHistory#').lazyRule((aid) => {\n                upMid = JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userMid;\n                return $.require(\"hiker://page/api\").favourLogic(aid, upMid)\n            }, aid),\n            col_type: \"icon_small_4\",\n            extra: {\n                id: 'setFavour'\n            }\n        }, {\n            title: '稍后再看',\n            img: imgLink.稍后再看,\n            url: $('#noLoading##noHistory#').lazyRule((aid) => {\n                return $.require(\"hiker://page/api\").judgeToview(aid)\n            }, aid),\n            col_type: \"icon_small_4\",\n        }, {\n            title: '查看评论',\n            url: 'hiker://page/Comments?p=fypage',\n            img: imgLink.查看评论,\n            col_type: \"icon_small_4\",\n            extra: {\n                \"id\": aid,\n                \"type\": 1\n            }\n        }, {\n            col_type: 'line_blank'\n        }, {\n            title: p.desc,\n            col_type: \"long_text\",\n        });\n    } else {\n        // 存在多集分P\n        d.push({\n            title: p.title,\n            img: p.pic + '@Referer=',\n            desc:'播放量:'+p.stat.view+'\\t\\t\\t弹幕数:'+p.stat.danmaku+'\\n发布日期:'+$.require(\"hiker://page/api\").timeConvert(p.ctime),\n            url: $('#noLoading##noHistory#').lazyRule((p) => {\n                return $('hiker://empty?fypage').rule((p) => {\n                    d = [];\n                    d.push({\n                        title: p.desc,\n                        col_type: \"long_text\",\n                    })\n                    setResult(d);\n                }, p)\n            }, p),\n            col_type: \"pic_1\",\n            extra: {\n                longClick: [{\n                    title: 'dm盒子', js: $.toString(() => {\n                        return 'hiker://page/setting#noHistory#?rule=dm盒子';\n                    })\n                }, {\n                    title: '弹幕控制', js: $.toString(() => {\n                        if (getItem('isOverrideSave', 'false') == 'true') {\n                            setItem('isOverrideSave', 'false');\n                            return 'toast://弹幕将不受dm盒子参数控制';\n                        } else {\n                            setItem('isOverrideSave', 'true');\n                            return 'toast://弹幕将受到dm盒子参数控制';\n                        }\n                    })\n                }]\n            }\n        }, {\n            title: '<font color=\"blue\">' + p.owner.name + '</font>',\n            url: \"hiker://page/upHome\",\n            img: p.owner.face + \"@Referer=\",\n            col_type: \"avatar\",\n            extra: {\n                mid: p.owner.mid,\n                title: p.owner.name,\n                face: p.owner.face\n            }\n        }, {\n            col_type: 'line'\n        }, {\n            title: p.stat.like,\n            img: hasLike == 1 ? imgLink.已点赞 : imgLink.未点赞,\n            url: $('#noLoading##noHistory#').lazyRule((aid) => {\n                return $.require(\"hiker://page/api\").likeLogic(aid)\n            }, aid),\n            col_type: \"icon_small_4\",\n            extra: {\n                id: 'setLike'\n            }\n        }, {\n            title: p.stat.favorite,\n            img: hasFavour ? imgLink.已收藏 : imgLink.未收藏,\n            url: $('#noLoading##noHistory#').lazyRule((aid) => {\n                upMid = JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userMid;\n                return $.require(\"hiker://page/api\").favourLogic(aid, upMid)\n            }, aid),\n            col_type: \"icon_small_4\",\n            extra: {\n                id: 'setFavour'\n            }\n        }, {\n            title: '稍后再看',\n            img: imgLink.稍后再看,\n            url: $('#noLoading##noHistory#').lazyRule((aid) => {\n                return $.require(\"hiker://page/api\").judgeToview(aid)\n            }, aid),\n            col_type: \"icon_small_4\",\n        }, {\n            title: '查看评论',\n            url: 'hiker://page/Comments?p=fypage',\n            img: imgLink.查看评论,\n            col_type: \"icon_small_4\",\n            extra: {\n                \"id\": aid,\n                \"type\": 1\n            }\n        })\n        d.push({\n            col_type: 'line_blank'\n        }, {\n            title: '选集列表',\n            url: \"hiker://empty\",\n            desc:'<small><small>共' + p.videos + '条视频</small></small>',\n            img: imgLink.列表,\n            col_type: \"avatar\",\n        }, {\n            col_type: 'line'\n        });\n        p.pages.forEach(item => {\n            cid = item.cid;\n            d.push({\n                title: item.part,\n                desc:formatSeconds(item.duration),\n                // img:imgLink.分P列表项,\n                img:item.first_frame+'@Referer=',\n                url: $().lazyRule((aid, cid, qn) => {\n                    return $.require(\"hiker://page/api\").biliLazy(aid, cid, qn).replace(/;/g, \"；；\");\n                }, aid + \"\", cid + \"\", '116'),\n                col_type: \"avatar\",\n                extra:{\n                    id:'aid-'+aid+'|cid-'+cid,\n                }\n            })\n        })\n    }\n} catch (e) {\n    log(e);\n    d.push({\n        title: '页面走丢了...',\n        img: 'https://i0.hdslb.com/bfs/general/f7b667011a46615732c701f4bb1d07f793f8d1df.png@Referer=',\n        url: 'hiker://empty',\n        desc: '大概率视频被封禁，或者up已跑路~',\n        col_type: \"pic_1\"\n    });\n}\nsetResult(d);\n"},{"col_type":"long_text","name":"评论","path":"Comments","rule":"js:\nvar d = [];\nvar id = MY_PARAMS.id;\nvar type = MY_PARAMS.type;\nlog(id);\nif (MY_PAGE == 1) {\n    // 貌似暂时只能文字+数字\n    d.unshift({\n        title: \"发条评论吧\",\n        col_type: \"input\",\n        url: $.toString((id,type) => {\n            let csrf = JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).cookie.match(/bili_jct=(.*?);/)[1];\n            post(\"http://api.bilibili.com/x/v2/reply/add\", {\n                body: {\n                    \"type\": type,\n                    \"oid\": id,\n                    \"csrf\": csrf,\n                    \"message\": input\n                },\n                headers: {\n                    \"Cookie\": JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).cookie\n                }\n            })\n            refreshPage()\n        }, id,type)\n    })\n}\nlet data = $.require(\"hiker://page/api\").getComments(id,type,MY_PAGE);\n// log(data);\nif(data){\n    data.forEach(item => {\n        d.push({\n            title: item.member.uname,\n            img: item.member.avatar+'@Referer=',\n            url:'hiker://page/upHome',\n            desc:'<small><small><font color=\"grey\">'+item.reply_control.location + \" \" + item.reply_control.time_desc+'</font></small></small>',\n            col_type: \"avatar\",\n            extra: {\n                mid: item.member.mid,\n                title: item.member.uname,\n                face: item.member.avatar\n            }\n        })\n        d.push({\n            title: item.content.message,\n        })\n    })\n}else{\n    d.push({\n        title: '好像没有评论了啦，！',\n        col_type: \"text_center_1\",\n    })\n}\nsetResult(d);\n"},{"col_type":"movie_3","name":"订阅列表","path":"subscription","rule":"if (getItem('订阅类型', '1') == '1') {\n\n    typerName = '追番';\n\n} else {\n\n    typerName = '追剧';\n\n}\n\nd.push({\n\n    title: '追番' == typerName ? '‘‘’’<font color=\"red\">追番</font>' : '追番',\n\n    url: $('#noLoading##noHistory#').lazyRule(() => {\n\n        setItem('订阅类型', '1')\n\n        refreshPage(true);\n\n        return \"hiker://empty\";\n\n    }),\n\n    col_type: 'scroll_button'\n\n},{\n\n    title: '追剧' == typerName ? '‘‘’’<font color=\"red\">追剧</font>' : '追剧',\n\n    url: $('#noLoading##noHistory#').lazyRule(() => {\n\n        setItem('订阅类型', '2')\n\n        refreshPage(true);\n\n        return \"hiker://empty\";\n\n    }),\n\n    col_type: 'scroll_button'\n\n});\n\nsubscriptions = JSON.parse(fetch(\"https://api.bilibili.com/x/space/bangumi/follow/list?type=\" + getItem('订阅类型', '1') + \"&follow_status=0&pn=\" + page + \"&ps=15&vmid=\" + mid, {\n\n    headers: {\n\n        \"Cookie\": cookie\n\n    }\n\n})).data;\n\nif (page == 1) {\n\n    d.push({\n\n        title: \"当前\" + typerName + \"数量:\" + subscriptions.total,\n\n        url: \"hiker://empty\",\n\n        col_type: \"text_center_1\"\n\n    })\n\n}\n\nsubscriptions.list.forEach(list => {\n\n    d.push({\n\n        title: list.title,\n\n        img: list.cover + \"@Referer=\",\n\n        url: \"hiker://page/filmerji#immersiveTheme#\",\n\n        desc: list.evaluate.substring(0, 12) + '‘‘’’…<font color=\"#1C1C1C\">详情</font>' + '\\n' + list.season_type_name + '|' + (list.areas===undefined?'':list.areas[0].name + '\\n') + (list.progress == '' ? '尚未观看' : list.progress) + (list.new_ep.index_show===undefined?'':'|'+(list.new_ep.index_show.match(/更新|即将/) ? '‘‘’’<font color=\"red\">' + list.new_ep.index_show + '</font>': list.new_ep.index_show)),\n\n        col_type: 'movie_1_vertical_pic',\n\n        extra: {\n\n            season_id: list.season_id\n\n        }\n\n    });\n\n});\n\n"},{"col_type":"movie_3","name":"关注列表","path":"attention","rule":"if (MY_PAGE == 1) {\n\n    focusGroups=$.require(\"hiker://page/api\").getMyAttentionGroupList();\n\n    putMyVar('tempId', JSON.stringify(focusGroups[1].tagid));\n\n    focusGroups.forEach(list => {\n\n        d.push({\n\n            title: list.tagid == getItem('关注分组', JSON.stringify(focusGroups[1].id)) ? \"““””<font color='red'>\" + list.name + list.count + \"</font>\" : list.name + list.count,\n\n            url: $('#noLoading##noHistory#').lazyRule((list) => {\n\n                setItem('关注分组', JSON.stringify(list.tagid));\n\n                refreshPage(true);\n\n                return \"toast://切换关注分组为:\" + list.name;\n\n            }, list),\n\n            col_type: 'scroll_button',\n\n        });\n\n    });\n\n    // 末尾补充悄悄关注分组\n\n    d.push({\n\n        title: '悄悄关注' == getItem('关注分组', JSON.stringify(focusGroups[0].id)) ? \"““””<font color='red'>悄悄关注</font>\" : \"悄悄关注\",\n\n        url: $('#noLoading##noHistory#').lazyRule(() => {\n\n            setItem('关注分组', \"悄悄关注\");\n\n            refreshPage(true);\n\n            return \"toast://切换关注分组为:\" + \"悄悄关注\";\n\n        }),\n\n        col_type: 'scroll_button',\n\n    },{\n\n        col_type: 'line'\n\n    });\n\n}\n\nif (getItem('关注分组')=='悄悄关注') {\n\n    groupContent = JSON.parse(fetch(\"https://api.bilibili.com/x/relation/whispers?pn=\"+page+\"&ps=20&jsonp=jsonp\", {\n\n        headers: {\n\n            \"Cookie\": cookie\n\n        }\n\n    })).data.list;\n\n    groupContent.forEach(list => {\n\n        d.push({\n\n            title: \"<big><font color='blue'>\" + list.uname + \"</font></big><small>\" + list.sign + \"</small>\",\n\n            img: list.face + \"@Referer=\",\n\n            col_type: 'avatar',\n\n            url: \"hiker://page/upHome\",\n\n            extra: {\n\n                mid: list.mid,\n\n                title: list.uname,\n\n                face: list.face\n\n            }\n\n        });\n\n    });\n\n}else{\n\n    groupContent = JSON.parse(fetch(\"https://api.bilibili.com/x/relation/tag?mid=\" + mid + \"&tagid=\" + getItem('关注分组', getMyVar('tempId')) + \"&pn=\" + page + \"&ps=20&jsonp=jsonp\", {\n\n        headers: {\n\n            \"Cookie\": cookie\n\n        }\n\n    })).data;\n\n    groupContent.forEach(list => {\n\n        d.push({\n\n            title: \"<big><font color='blue'>\" + list.uname + \"</font></big><small>\" + list.sign + \"</small>\",\n\n            img: list.face + \"@Referer=\",\n\n            col_type: 'avatar',\n\n            url: \"hiker://page/upHome\",\n\n            extra: {\n\n                mid: list.mid,\n\n                title: list.uname,\n\n                face: list.face\n\n            }\n\n        });\n\n    });\n\n}\n\n\n"},{"col_type":"movie_3","name":"收藏列表","path":"colection","rule":"if (page == 1) {\r\n    d.push({\r\n        title: '我创建的收藏夹' == getItem('收藏类型', '我创建的收藏夹') ? '‘‘’’<font color=\"red\">我创建的收藏夹</font>' : '我创建的收藏夹',\r\n        url: $('#noLoading##noHistory#').lazyRule(() => {\r\n            setItem('收藏类型', '我创建的收藏夹')\r\n            refreshPage(true);\r\n            return \"hiker://empty\";\r\n        }),\r\n        col_type: 'scroll_button'\r\n    }, {\r\n        title: '稍后在看' == getItem('收藏类型', '我创建的收藏夹') ? '‘‘’’<font color=\"red\">稍后在看</font>' : '稍后在看',\r\n        url: $('#noLoading##noHistory#').lazyRule(() => {\r\n            setItem('收藏类型', '稍后在看')\r\n            refreshPage(true);\r\n            return \"hiker://empty\";\r\n        }),\r\n        col_type: 'scroll_button'\r\n    });\r\n}\r\nif (getItem('收藏类型', '我创建的收藏夹') == '我创建的收藏夹') {\r\n    try {\r\n        if (page == 1) {\r\n            d.push({\r\n                // col_type: 'blank_block'\r\n                col_type: 'line'\r\n            }, );\r\n        }\r\n        collections = JSON.parse(fetch(\"https://api.bilibili.com/x/v3/fav/folder/list4navigate\", {\r\n            headers: {\r\n                \"Cookie\": cookie\r\n            }\r\n        })).data;\r\n        groups = collections[0].mediaListResponse.list;\r\n        putMyVar('tempId', JSON.stringify(groups[0].id));\r\n        groups.forEach(list => {\r\n            d.push({\r\n                title: list.id == getItem('收藏夹', JSON.stringify(groups[0].id)) ? \"““””<font color='red'>\" + list.title + \"</font>\" : list.title,\r\n                url: $('#noLoading##noHistory#').lazyRule((list) => {\r\n                    setItem('收藏夹', JSON.stringify(list.id));\r\n                    refreshPage(true);\r\n                    return \"toast://切换收藏夹为:\" + list.title;\r\n                }, list),\r\n                col_type: 'scroll_button',\r\n            });\r\n        });\r\n        d.push({\r\n            col_type: 'line'\r\n        });\r\n        groupContent = JSON.parse(fetch(\"https://api.bilibili.com/x/v3/fav/resource/list?media_id=\" + getItem('收藏夹', getMyVar('tempId')) + \"&pn=\" + page + \"&ps=20&keyword=&order=mtime&type=0&tid=0&platform=web&jsonp=jsonp\", {\r\n            headers: {\r\n                \"Cookie\": cookie\r\n            }\r\n        })).data.medias;\r\n        groupContent.forEach(list => {\r\n            d.push({\r\n                title: list.title,\r\n                img: list.cover + \"@Referer=\",\r\n                col_type: 'movie_1_left_pic',\r\n                url: \"hiker://page/video\",\r\n                desc: 'UP:' + list.upper.name + '\\n' + list.intro,\r\n                extra: {\r\n                    aid: list.id,\r\n                    mid: list.upper.mid\r\n                }\r\n            });\r\n        });\r\n    } catch (e) {\r\n        showLoading('兄弟，你确认你有收藏吗，快去收藏一个视频~');\r\n    }\r\n} else {\r\n    laterViews = JSON.parse(fetch(\"https://api.bilibili.com/x/v2/history/toview/web?jsonp=jsonp\", {\r\n        headers: {\r\n            \"Cookie\": cookie\r\n        }\r\n    })).data;\r\n    count = laterViews.count;\r\n    d.push({\r\n        title: \"共有\" + count + \"条待看视频记录\",\r\n        url: \"hiker://empty\",\r\n        col_type: \"text_center_1\"\r\n    });\r\n    laterViews.list.forEach(list => {\r\n        d.push({\r\n            title: list.title,\r\n            img: list.pic + \"@Referer=\",\r\n            col_type: 'movie_1_left_pic',\r\n            url: \"hiker://page/video\",\r\n            desc: 'UP:' + list.owner.name + '\\n' + list.desc,\r\n            extra: {\r\n                aid: list.aid,\r\n                mid: list.owner.mid\r\n            }\r\n        });\r\n    });\r\n}"},{"col_type":"movie_3","name":"足迹","path":"track","rule":"var nextInfo = {};\n\nif (page == 1) {\n\n    histories = JSON.parse(fetch(\"https://api.bilibili.com/x/web-interface/history/cursor?max=0&view_at=0&business=\", {\n\n        headers: {\n\n            \"Cookie\": cookie\n\n        }\n\n    })).data;\n\n    nextInfo.max = histories.cursor.max;\n\n    nextInfo.view_at = histories.cursor.view_at;\n\n    nextInfo.business = histories.cursor.business;\n\n} else {\n\n    histories = JSON.parse(fetch(\"https://api.bilibili.com/x/web-interface/history/cursor?max=\" + storage0.getMyVar(JSON.stringify(page)).max + \"&view_at=\" + storage0.getMyVar(JSON.stringify(page)).view_at + \"&business=\" + storage0.getMyVar(JSON.stringify(page)).business, {\n\n        headers: {\n\n            \"Cookie\": cookie\n\n        }\n\n    })).data;\n\n    nextInfo.max = histories.cursor.max;\n\n    nextInfo.view_at = histories.cursor.view_at;\n\n    nextInfo.business = histories.cursor.business;\n\n}\n\nstorage0.putMyVar(JSON.stringify(page + 1), nextInfo);\n\nhistories.list.forEach(list => {\n\n    viewTime=pbtime = $.require(\"hiker://page/api\").timeConvert(list.view_at);\n\n    if (list.history.business == 'article') {\n\n        // 专栏文章\n\n        d.push({\n\n            title: list.show_title==''?list.title:list.show_title,\n\n            img: list.covers[0] + \"@Referer=\",\n\n            col_type: 'movie_1_left_pic',\n\n            url: \"hiker://page/articleDetail\",\n\n            desc: (list.author_name==''?viewTime:'UP:' + list.author_name+'\\n' )+ viewTime,\n\n            extra: {\n\n                id: list.history.oid,\n\n            }\n\n        });\n\n    } else if(list.history.business == 'article-list'){\n\n        // 文章列表？（反正id存放位置不一样）\n\n        d.push({\n\n            title: list.show_title==''?list.title:list.show_title,\n\n            img: list.covers[0] + \"@Referer=\",\n\n            col_type: 'movie_1_left_pic',\n\n            url: \"hiker://page/articleDetail\",\n\n            desc: (list.author_name==''?viewTime:'UP:' + list.author_name+'\\n' )+ viewTime,\n\n            extra: {\n\n                id: list.history.cid,\n\n            }\n\n        });\n\n    }else if(list.history.business == 'pgc'){\n\n        // 系列剧集（单集）\n\n        d.push({\n\n            title: list.show_title==''?list.title:list.show_title,\n\n            img: list.cover + \"@Referer=\",\n\n            col_type: 'movie_1_left_pic',\n\n            url: \"hiker://page/filmerji#immersiveTheme#\",\n\n            desc: (list.author_name==''?list.tag_name+'\\t\\t'+list.new_desc+'\\n'+viewTime:'UP:' + list.author_name+'\\n'+viewTime),\n\n            extra: {\n\n                ep_id:list.history.epid\n\n            }\n\n        });\n\n    }else {\n\n        // 普通video\n\n        d.push({\n\n            title: list.show_title==''?list.title:list.show_title,\n\n            img: list.cover + \"@Referer=\",\n\n            col_type: 'movie_1_left_pic',\n\n            url: \"hiker://page/video\",\n\n            desc: (list.author_name==''?list.tag_name+'\\t\\t'+list.new_desc+'\\n'+viewTime:'UP:' + list.author_name+'\\n'+viewTime),\n\n            extra: {\n\n                aid: list.history.oid,\n\n            }\n\n        });\n\n    }\n\n});\n\n\n"},{"col_type":"movie_3","name":"动态","path":"latetNews","rule":"d.push({\n\n    col_type: 'line_blank'\n\n});\n\nlatenews=$.require(\"hiker://page/api\").getDynamicData('myHome');\n\neval($.require(\"hiker://page/api\").showDynamicData());\n\n"},{"col_type":"movie_3","name":"专栏列表","path":"acticleList","rule":"js:\n\nvar d=[];\n\npage=MY_PAGE;\n\nupMid = MY_PARAMS.mid + \"\";\n\narticleList=$.require(\"hiker://page/api\").getUserArticle(upMid,page);\n\narticleNum=articleList.count;\n\nif (articleNum==undefined) {\n\n    d.push({\n\n        title: '这up没有专栏文章',\n\n        url: \"hiker://empty\",\n\n        col_type: \"text_center_1\",\n\n    });\n\n}else{\n\n    maxPage = Math.ceil(articleNum / articleList.ps);\n\n    if (page <= maxPage) {\n\n        d.push({\n\n            title: '当前:第' + articleList.pn + '页\\t\\t\\t共有' + maxPage + '页,' + articleNum + '条数据',\n\n            url: \"hiker://empty\",\n\n            col_type: \"text_center_1\",\n\n        });\n\n        articleList.articles.forEach(list => {\n\n            pbtime=$.require(\"hiker://page/api\").timeConvert(list.publish_time);\n\n            d.push({\n\n                title: list.title,\n\n                img: list.banner_url==''? (list.image_urls+ '@Referer='):(list.banner_url+ '@Referer='),\n\n                desc: '‘‘’’<small>'+list.stats.view+'看过\\t\\t'+list.stats.like+'喜欢\\t\\t'+list.stats.favorite+'收藏\\n' + pbtime+'</small>',\n\n                col_type: 'movie_1_left_pic',\n\n                url: \"hiker://page/articleDetail\",\n\n                extra: {\n\n                    // 专栏文章id\n\n                    id: list.id\n\n                }\n\n            });\n\n        });\n\n    }\n\n}\n\nsetResult(d);\n\n"},{"col_type":"movie_3","name":"专栏文章X5","path":"articleDetail","rule":"js:\n\nvar d = [];\n\npage = MY_PAGE;\n\ncvid = MY_PARAMS.id + \"\";\n\nd.push({\n\n    url: \"https://www.bilibili.com/read/cv\"+cvid,\n\n    col_type: \"x5_webview_single\",\n\n    desc: \"100%&&float\",\n\n    extra: {\n\n        canBack: true\n\n    }\n\n})\n\nsetResult(d);\n\n"},{"col_type":"movie_3","name":"综合热门","path":"hotVideo","rule":"let res = JSON.parse(request(\"https://api.bilibili.com/x/web-interface/popular?pn=\" + MY_PAGE, {\n\n    headers: {\n\n        Cookie: JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).cookie\n\n    }\n\n})).data\n\nres.list.forEach(item => {\n\n    d.push({\n\n        title: item.title,\n\n        img: item.pic+ \"@Referer=\",\n\n        url: \"hiker://page/video\",\n\n        desc: item.pub_location,\n\n        col_type: \"movie_2\",\n\n        extra: {\n\n            \"aid\": item.aid,\n\n            \"cid\": item.cid,\n\n        }\n\n    })\n\n})\n\n\n"},{"name":"哔哩最新章节","path":"getUpdate","rule":"if (MY_PARAMS.season_id) {\n    season_id = MY_PARAMS.season_id + \"\";\n    Data = JSON.parse(fetch('https://api.bilibili.com/pgc/view/web/season?season_id=' + season_id)).result;\n} else {\n    Data = JSON.parse(fetch('https://api.bilibili.com/pgc/view/web/season?ep_id=' + MY_PARAMS.ep_id)).result;\n}\n追剧日历 = Data.new_ep.desc;\n更新进度 = Data.new_ep.title;\n更新状态 = 追剧日历.match(/完结|期待/) ? 追剧日历 : '更新至' + (更新进度.match(/[\\u4e00-\\u9fa5]/) ? 更新进度 : ('第' + (更新进度 == '' ? 0 : 更新进度)) + '话')\nsetResult(更新状态);"},{"name":"up合集视频","path":"collectionViedo","rule":"js:\nvar d = [];\n// 预处理\nputMyVar('功能折叠', '关');\nimgLink = storage0.getMyVar('图标');\naid = MY_PARAMS.aid + \"\";\n// bvid = MY_PARAMS.bvid + \"\";\n// mid = MY_PARAMS.mid + \"\";\ntry {\n    //获取视频分P信息\n    var p = JSON.parse(fetch(\"https://api.bilibili.com/x/web-interface/view?aid=\" + aid)).data;\n    // 合集信息\n    var videoData = p.ugc_season;\n    setPageTitle(videoData.title);\n    setPagePicUrl(videoData.cover + '@Referer=');\n    d.push({\n        title: videoData.title,\n        desc:videoData.intro,\n        img: videoData.cover + '@Referer=',\n        url: $('#noLoading##noHistory#').lazyRule((intro) => {\n            return $('hiker://empty?fypage').rule((intro) => {\n                let d = [];\n                d.push({\n                    title: intro,\n                    col_type: \"long_text\",\n                })\n                setResult(d);\n            }, intro)\n        }, videoData.intro),\n        col_type: \"pic_1\",\n        extra: {\n            longClick: [{\n                title: 'dm盒子', js: $.toString(() => {\n                    return 'hiker://page/setting#noHistory#?rule=dm盒子';\n                })\n            }, {\n                title: '弹幕控制', js: $.toString(() => {\n                    if (getItem('isOverrideSave', 'false') == 'true') {\n                        setItem('isOverrideSave', 'false');\n                        return 'toast://弹幕将不受dm盒子参数控制';\n                    } else {\n                        setItem('isOverrideSave', 'true');\n                        return 'toast://弹幕将受到dm盒子参数控制';\n                    }\n                })\n            }]\n        }\n    }, {\n        title: '<font color=\"blue\">' + p.owner.name + '</font>',\n        url: \"hiker://page/upHome\",\n        img: p.owner.face + \"@Referer=\",\n        col_type: \"avatar\",\n        desc: '<small><small>共有' + videoData.ep_count + '条视频数据</small></small>',\n        extra: {\n            mid: p.owner.mid,\n            title: p.owner.name,\n            face: p.owner.face\n        }\n    }, {\n        col_type: 'line'\n    });\n    var index = 1;\n    storage0.putVar('videoSections', videoData.sections);\n    videoData.sections.forEach(el => {\n        d.push({\n            title: '📁' + el.title,\n            url: $('#noLoading##noHistory#').lazyRule((index) => {\n                if (getMyVar('isFold_'+index, 'y') == 'y') {\n                    putMyVar('isFold_'+index, 'n');\n                    deleteItemByCls('section' + index + '-part');\n                    return 'toast://已折叠';\n                } else {\n                    putMyVar('isFold_'+index, 'y');\n                    videoSections = storage0.getVar('videoSections');\n                    sectionPartList = [];\n                    videoSections[index - 1].episodes.forEach(item => {\n                        aid = item.aid;\n                        cid = item.cid;\n                        stat = item.arc.stat;\n                        sectionPartList.push({\n                            title: '““””\\t\\t\\t<small></font>▶︎' + item.title + '\\n\\t\\t\\t\\t\\t</font></small><small><small><font color=gray>播放量：' + stat.view + '\\t\\t\\t弹幕：' + stat.danmaku + '\\t\\t\\t喜欢：' + stat.like + '</font></small></small>',\n                            url: $().lazyRule((aid, cid, qn) => {\n                                return $.require(\"hiker://page/api\").biliLazy(aid, cid, qn).replace(/;/g, \"；；\");\n                            }, aid + \"\", cid + \"\", '116'),\n                            col_type: \"text_1\",\n                            extra: { lineVisible: false, cls: 'section' + index + '-part',id:'aid-'+aid+'|cid-'+cid }\n                        })\n                    });\n                    addItemAfter('Section' + index, sectionPartList);\n                    return 'toast://已展开';\n                }\n            }, index),\n            col_type: 'text_1',\n            extra: { id: 'Section' + index }\n        });\n        el.episodes.forEach(item => {\n            aid = item.aid;\n            cid = item.cid;\n            stat = item.arc.stat;\n            d.push({\n                title: '““””\\t\\t\\t<small></font>▶︎' + item.title + '\\n\\t\\t\\t\\t\\t</font></small><small><small><font color=gray>播放量：' + stat.view + '\\t\\t\\t弹幕：' + stat.danmaku + '\\t\\t\\t喜欢：' + stat.like + '</font></small></small>',\n                url: $().lazyRule((aid, cid, qn) => {\n                    return $.require(\"hiker://page/api\").biliLazy(aid, cid, qn).replace(/;/g, \"；；\");\n                }, aid + \"\", cid + \"\", '116'),\n                col_type: \"text_1\",\n                extra: { lineVisible: false, cls: 'section' + index + '-part',id:'aid-'+aid+'|cid-'+cid }\n            })\n        });\n        index++;\n    })\n} catch (e) {\n    log(e);\n    d.push({\n        title: '页面走丢了...',\n        img: 'https://i0.hdslb.com/bfs/general/f7b667011a46615732c701f4bb1d07f793f8d1df.png@Referer=',\n        url: 'hiker://empty',\n        desc: '大概率视频被封禁，或者up已跑路~',\n        col_type: \"pic_1\"\n    });\n}\nsetResult(d);\n"},{"name":"图标下载","path":"saveLocal","rule":"$.exports.saveLocal = () => {\n    const base64ToHex = (base64Str) => {\n        // 删除前缀并解码Base64字符串\n        var binaryStr = window0.atob(base64Str.split(',')[1]);\n\n        // 转换为16进制字符串\n        var hexStr = '';\n        for (var i = 0; i < binaryStr.length; i++) {\n            var hex = binaryStr.charCodeAt(i).toString(16);\n            hexStr += (hex.length === 2 ? hex : '0' + hex);\n        }\n        return hexStr;\n    };\n    showLoading(\"图标初始化中...\");\n    var tubiao = {};\n    try {\n        // 剪贴板线路\n        html = request('https://netcut.cn/p/a1fcf0d3b0a27f13');\n        data = html.match(/{.*note_content.*updated_at.*}/)[0];\n        eval('tubiao =' + JSON.parse(data).note_content);\n    } catch (e) {\n        log('剪贴板出错,切换托管线路');\n        route = [\n            'https://gitcode.net/qq_23847819/hiker/-/raw/master/tubiao.json',\n            'https://gitea.com/cy/hiker/raw/commit/be2160c6a01db873d9f9681ba7e86eebfa118d86/tubiao.json',\n            'https://raw.codehub.cn/p/hiker/d/tubiao/git/raw/master/tubiao.json?token=GGdlIuVGqY3b3LydIowrksbUBCfMyx2fF31WUZeo4m',\n            'https://gitee.com/mxxl-cy/hiker/raw/master/tubiao.json'\n        ];\n        for (let i = 0; i < route.length; i++) {\n            try {\n                eval('tubiao =' + request(route[i]));\n                if (tubiao[\"五大\"] && tubiao[\"哔哩\"]) {\n                    break;\n                } else {\n                    log('线路：' + tubiao[i] + '被墙了...');\n                }\n            } catch (e) {\n                log('线路：' + tubiao[i] + '出错了...');\n            }\n        }\n    }\n    try {\n        var wuda = tubiao[\"五大\"];\n        var bili = tubiao[\"哔哩\"];\n        var index = 0;\n        for (let item in wuda) {\n            writeHexFile(`hiker://files/rules/cy/tubiao/${item}.svg`, base64ToHex(wuda[item]));\n            log(`初始化第${index++}个图标:${item}...`);\n        }\n        for (let item in bili) {\n            writeHexFile(`hiker://files/rules/cy/bili_pic/${item}.png`, base64ToHex(bili[item]));\n            log(`初始化第${index++}个图标:${item}...`);\n        }\n        showLoading('图标初始化完成：共计' + index + '个图标');\n        hideLoading();\n    } catch (e) {\n        showLoading('图标初始化失败');\n        log('图标初始化失败:' + e);\n        hideLoading();\n    }\n\n};\n"}],"title":"bilili","author":"侠名","version":18,"type":"video","url":"hiker://empty##fypage","col_type":"movie_1_vertical_pic","class_name":"","class_url":"","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:\nvar d = [];\nvar page = MY_PAGE;\nisLogin = JSON.parse($.require(\"hiker://page/api\").isLoggedIn());\n// 验证登录\nif (isLogin.type === true) {\n    currentUser = JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0];\n    cookie = currentUser.cookie;\n    userName = currentUser.userName;\n    mid = currentUser.userMid;\n    userFace = currentUser.face + \"@Referer=\";\n    if (page == 1) {\n        var Tab = ['账号', '热映', '片库', '推送', '热门', '订阅', '关注', '收藏', '足迹', '动态'];\n        Tab = Tab.map((it) => {\n            return it === getItem('首页', '推送') ? '👉' + it : it;\n        });\n        d.push({\n            title: '<font color=\"blue\">' + userName,\n            desc: '</font>⭐<font color=\"#19B89D\">当前：' + getItem('首页', '推送') + '</font>⭐',\n            url: $('#noLoading#').lazyRule((Tab) => {\n                return $(Tab, 2).select(() => {\n                    input = input.replace(/👉/g, '');\n                    if (input === '账号') {\n                        selectOption = ['退出登录', '切换账号','复制cookie', '分享bfKey', '设置bfKey', '清除bfKey','➕️'];\n                        return $(selectOption, 2).select(() => {\n                            switch (input) {\n                                case \"退出登录\":\n                                    setting = JSON.parse(request(\"hiker://files/rules/cy/bili.txt\"));\n                                    // setting.userList[0].cookie = '';\n                                    setting.userList.shift();\n                                    saveFile(\"hiker://files/rules/cy/bili.txt\", JSON.stringify(setting));\n                                    refreshPage(true);\n                                    return \"toast://你已退出\";\n                                case \"切换账号\":\n                                    userList = JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList.map((p) => { return p.userName });\n                                    return $(userList, 1).select(() => {\n                                        setting = JSON.parse(request(\"hiker://files/rules/cy/bili.txt\"));\n                                        var temp = setting.userList[0];\n                                        setting.userList.forEach((p, index) => {\n                                            if (p.userName === input && index !== 0) {\n                                                setting.userList[0] = p;\n                                                setting.userList[index] = temp;\n                                                return;\n                                            }\n                                        });\n                                        saveFile(\"hiker://files/rules/cy/bili.txt\", JSON.stringify(setting));\n                                        refreshPage(true);\n                                        return \"toast://切换成功\";\n                                    })\n                                    break;\n                                case \"复制cookie\":\n                                    cookie = JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie;\n                                    copy(cookie);\n                                    return \"toast://已复制cookie\";\n                                    break;\n                                case \"分享bfKey\":\n                                    cookie = JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList[0].cookie;\n                                    bfKey = base64Encode(base64Encode(cookie));\n                                    copy(bfKey);\n                                    return \"toast://已复制bfKey,快去分享吧，注意账号安全~\";\n                                    break;\n                                case \"设置bfKey\":\n                                    return $('', '播放权益共享，注意安全').input(() => {\n                                        setting = JSON.parse(request(\"hiker://files/rules/cy/bili.txt\"));\n                                        setting.bfKey = input;\n                                        saveFile(\"hiker://files/rules/cy/bili.txt\", JSON.stringify(setting));\n                                        return \"toast://bfKey设置成功\";\n                                    })\n                                    break;\n                                case \"清除bfKey\":\n                                    setting = JSON.parse(request(\"hiker://files/rules/cy/bili.txt\"));\n                                    setting.bfKey = '';\n                                    saveFile(\"hiker://files/rules/cy/bili.txt\", JSON.stringify(setting));\n                                    return \"toast://bfKey已清除\";\n                                    break;\n                                case \"➕️\":\n                                    return \"hiker://page/login#noRecordHistory#\";\n                                    break;\n                                default:\n                                    return \"toast://你选了啥？\";\n                            }\n                        });\n                    } else {\n                        setItem('首页', input);\n                        refreshPage(true);\n                        return \"toast://切换首页为:\" + input;\n                    }\n                })\n            }, Tab),\n            img: userFace === undefined ? 'https://lanmeiguojiang.com/tubiao/movie/20.svg' : userFace,\n            col_type: \"avatar\",\n            extra: {\n                id: '首页显示'\n            }\n        });\n        d.push({\n            col_type: 'blank_block'\n        })\n    }\n    // 匹配首页选项\n    switch (getItem('首页', '推送')) {\n        case '热映':\n            eval(JSON.parse(request('hiker://page/UpdateTables')).rule);\n            break;\n        case '片库':\n            eval(JSON.parse(request('hiker://page/vault')).rule);\n            break;\n        case '推送':\n            eval(JSON.parse(request('hiker://page/feed')).rule);\n            break;\n        case '热门':\n            eval(JSON.parse(request('hiker://page/hotVideo')).rule);\n            break;\n        case '订阅':\n            eval(JSON.parse(request('hiker://page/subscription')).rule);\n            break;\n        case '关注':\n            eval(JSON.parse(request('hiker://page/attention')).rule);\n            break;\n        case '收藏':\n            eval(JSON.parse(request('hiker://page/colection')).rule);\n            break;\n        case '足迹':\n            eval(JSON.parse(request('hiker://page/track')).rule);\n            break;\n        case '动态':\n            eval(JSON.parse(request('hiker://page/latetNews')).rule);\n            break;\n        default:\n            eval(JSON.parse(request('hiker://page/UpdateTables')).rule);\n            break;\n    }\n} else {\n    let a = []\n    let time = 10\n    a.push({\n        title: `                     使用前须知\n本规则调用https://github.com/SocialSisterYi/bilibili-API-collect的api，所有代码全部开源，并且不存在上传用户信息的行为\n本规则为学习目的，请于导入24小时内删除！！！                        \n开始使用本规则即代表遵守规则                       \n            `,\n        \"col_type\": \"long_text\",\n        extra: {\n            id: \"text\"\n        }\n    }, {\n        title: time + \"秒后继续\",\n        col_type: \"text_1\",\n        extra: {\n            id: \"timer\"\n        }\n    })\n    setResult(a)\n    while (time != 0) {\n        java.lang.Thread.sleep(1000)\n        time -= 1\n        updateItem(\"timer\", {\n            title: time + \"秒后继续\"\n        })\n    }\n    addItemAfter(\"timer\", {\n        title: \"选择其他已登录账号\",\n        url: $('#noLoading#').lazyRule(() => {\n            userList = JSON.parse(request(\"hiker://files/rules/cy/bili.txt\")).userList.map((p) => { return p.userName });\n            return $(userList, 1).select(() => {\n                setting = JSON.parse(request(\"hiker://files/rules/cy/bili.txt\"));\n                temp = setting.userList[0];\n                setting.userList.map((p) => {\n                    if (p.userName === input) {\n                        setting.userList[0] = p;\n                        p = temp;\n                    }\n                })\n                saveFile(\"hiker://files/rules/cy/bili.txt\", JSON.stringify(setting));\n                refreshPage(true);\n                return \"toast://切换成功\";\n            })\n        }),\n        col_type: \"text_center_1\"\n    })\n    addItemAfter(\"timer\", {\n        title: \"登陆\",\n        desc: \"登录失效？点此重新登录\",\n        url: \"hiker://page/login#noRecordHistory#\",\n        col_type: \"text_center_1\"\n    })\n    deleteItem(\"text\")\n    deleteItem(\"timer\")\n}\nsetResult(d);\n","searchFind":"js:\nMY_URL = MY_URL.split('##');\nlet seaword = MY_URL[1];\nvar d = [];\nif (MY_PAGE==1) {\n    d.push({\n        title: \"up搜=>\" + seaword,\n        url: 'hiker://page/upSearch?fypage',\n        extra: {\n            seaword: seaword\n        }\n    });\n    d.push({\n        title: \"video搜=>\" + seaword,\n        url: 'hiker://page/videoSearch?fypage',\n        extra: {\n            seaword: seaword\n        }\n    });\n}\nlet {getSearchRes}=$.require(\"hiker://page/api\");\n// 番剧\nlist1=getSearchRes('media_bangumi',seaword,MY_PAGE,12).result;\n// 影视\nlist2=getSearchRes('media_ft',seaword,MY_PAGE,12).result;\nif (list1) {\n    list1.forEach(item => {\n        if (!item.cover.match(/https/)) {\n            封面 = item.cover.replace('http','https') + \"@Referer=\";\n        }else{\n            封面 = item.cover+ \"@Referer=\";\n        }\n        d.push({\n            title: item.title.replace(/<em class=\"keyword\">/g, '').replace(/<\\/em>/g, ''),\n            img: 封面,\n            url: 'hiker://page/filmerji#immersiveTheme#',\n            content: item.desc,\n            desc: item.styles,\n            extra: {\n                season_id: item.season_id\n            }\n        });\n    });\n}\nif (list2) {\n    list2.forEach(item => {\n        if (!item.cover.match(/https/)) {\n            封面 = item.cover.replace('http','https') + \"@Referer=\";\n        }else{\n            封面 = item.cover+ \"@Referer=\";\n        }\n        d.push({\n            title: item.title.replace(/<em class=\"keyword\">/g, '').replace(/<\\/em>/g, ''),\n            img: 封面,\n            url: 'hiker://page/filmerji#immersiveTheme#',\n            content: item.desc,\n            desc: item.styles,\n            extra: {\n                season_id: item.season_id\n            }\n        });\n    });\n}\nsetResult(d);\n","search_url":"hiker://empty##**##fypage","group":"①推荐","detail_col_type":"movie_1","detail_find_rule":"","sdetail_col_type":"movie_1","sdetail_find_rule":"*","ua":"pc","preRule":"js:\n// 图片预处理\nimgLocation = {\n    \"已收藏\": 'hiker://files/rules/cy/bili_pic/已收藏.png',\n    \"未收藏\": 'hiker://files/rules/cy/bili_pic/未收藏.png',\n    \"稍后再看\": 'hiker://files/rules/cy/bili_pic/稍后再看.png',\n    \"未点赞\": 'hiker://files/rules/cy/bili_pic/未点赞.png',\n    \"已点赞\": 'hiker://files/rules/cy/bili_pic/已点赞.png',\n    \"添加关注\": 'hiker://files/rules/cy/bili_pic/添加关注.png',\n    \"已关注\": 'hiker://files/rules/cy/bili_pic/已关注.png',\n    \"专栏\": 'hiker://files/rules/cy/bili_pic/专栏.png',\n    \"查看评论\": 'hiker://files/rules/cy/bili_pic/查看评论.png',\n    \"周边\": 'hiker://files/rules/cy/bili_pic/周边.png',\n    \"双边\": 'hiker://files/rules/cy/bili_pic/双边.png',\n    \"列表\": 'hiker://files/rules/cy/bili_pic/列表.png',\n    \"订阅\": 'hiker://files/rules/cy/bili_pic/订阅.png',\n    \"日历\": 'hiker://files/rules/cy/bili_pic/日历.png',\n    \"动态\": 'hiker://files/rules/cy/bili_pic/动态.png',\n    \"动态足迹\": 'https://cdn3.iconfinder.com/data/icons/nature-169/32/grass_turf_plant_lawn_nature_meadow_garden_natural_environment-128.png@Referer=',\n    \"合集文件夹\": 'https://cdn4.iconfinder.com/data/icons/commenly-needed/400/Icon-17-128.png@Referer=',\n    \"分P列表项\": 'https://cdn1.iconfinder.com/data/icons/minimal-ui-2/24/play_media_button-128.png@Referer='\n}\nstorage0.putMyVar('图标', imgLocation);\n\n//* 下面代码用于自动拉取图标，无奈 */\nif (!fileExist('hiker://files/rules/cy/bili_pic') || !fileExist('hiker://files/rules/cy/tubiao')) {\n    $.require(\"hiker://page/saveLocal\").saveLocal();\n}\n\n\n//* 下面代码用于初始化账号配置 */\nif (!fileExist('hiker://files/rules/cy/bili.txt')) {\n    settings = JSON.stringify({\n        userList: [{\n            cookie: \"\",\n            userName: '',\n            userMid: '',\n            vipStatus: 0,\n            face: 'https://lanmeiguojiang.com/tubiao/movie/20.svg',\n        }],\n        bfKey: \"\"\n    });\n    saveFile(\"hiker://files/rules/cy/bili.txt\", settings);\n} else {\n    settings = JSON.parse(request('hiker://files/rules/cy/bili.txt'));\n    // 判断 JSON 对象是否满足我们定义的结构\n    if (typeof settings === 'object' &&\n        Array.isArray(settings.userList) &&\n        settings.userList.every(p => typeof p === 'object' && typeof p.cookie === 'string' && typeof p.userName === 'string' && typeof p.userMid === 'number' && typeof p.face === 'string' && typeof p.vipStatus === 'number') &&\n        typeof settings.bfKey === 'string'\n    ) {\n        log('账号配置文件正常');\n    } else {\n        log('初始化/复原账号配置文件');\n        setting = '';\n        try {\n            // 迁移原配置文件中的账号信息\n            originUserSetting = JSON.parse(request('hiker://files/rules/cy/bili.txt'));\n            log(originUserSetting);\n            cookie = originUserSetting.cookie;\n            userName = originUserSetting.userName;\n            userMid = originUserSetting.userMid;\n            face = originUserSetting.face;\n            vipStatus = originUserSetting.vipStatus;\n            if(cookie===undefined){setting='{\"userList\":[],\"bfKey\":\"\"}';}else{\n                setting = JSON.stringify({\n                    userList: [{\n                        cookie: cookie,\n                        userName: userName,\n                        userMid: userMid,\n                        face: face,\n                        vipStatus: vipStatus\n                    }],\n                    bfKey: \"\"\n                });\n            }\n        } catch (e) {\n            log(\"没有旧的合法的配置文件\");\n            setting = JSON.stringify({\n                userList: [],\n                bfKey: \"\"\n            });\n        }\n        saveFile(\"hiker://files/rules/cy/bili.txt\", setting);\n    }\n}\n","pages":"[{\"col_type\":\"movie_3\",\"name\":\"分类片库\",\"path\":\"vault\",\"rule\":\"顶部大类 = ['国创', '电视', '纪录片', '综艺', '番剧', '电影']\\nif (page == 1) {\\n    // 折叠开关\\n    d.push({\\n        title: getMyVar('折叠', '关') == '关' ? '““””<b><span style=\\\"color: #FF0000\\\">∨</span></b>' : '““””<b><span style=\\\"color: #1aad19\\\">∧</span></b>',\\n        url: $('#noLoading#').lazyRule(() => {\\n            if (getMyVar('折叠', '关') == '开') {\\n                putMyVar('折叠', '关');\\n            } else {\\n                putMyVar('折叠', '开');\\n            }\\n            refreshPage(true);\\n            return \\\"hiker://empty\\\";\\n        }),\\n        col_type: 'scroll_button',\\n    })\\n    顶部大类.forEach(li => {\\n        d.push({\\n            title: li == getMyVar('大类', '国创') ? '““””<b><font color=#1aad19>' + li + '</font></b>' : li,\\n            url: $('#noLoading#').lazyRule((li) => {\\n                putMyVar('大类', li);\\n                refreshPage(true);\\n                return \\\"hiker://empty\\\";\\n            }, li),\\n            col_type: 'scroll_button',\\n        })\\n    });\\n    d.push({\\n        col_type: 'blank_block'\\n    })\\n}\\n// 顶部分类参数映射\\nswitch (getMyVar('大类', '国创')) {\\n    case '国创':\\n        seasonType = 4;\\n        if (getMyVar('折叠', '关') == '开') {\\n            if (page == 1) {\\n                html = fetch('https://www.bilibili.com/guochuang/index');\\n                分类列表 = pdfa(html, '.filter-list&&.filter-block');\\n                分类列表.forEach(ul => {\\n                    筛选条件 = pdfh(ul, '.filter-name&&Text');\\n                    子分类列表 = pdfa(ul, 'ul&&li');\\n                    子分类列表.forEach(li => {\\n                        if (pdfh(li, 'li&&Text') == '其他') {\\n                            return;\\n                        }\\n                        d.push({\\n                            title: getMyVar(筛选条件, '全部') == pdfh(li, 'li&&Text') ? '““””<b><font color=#1aad19>' + pdfh(li, 'li&&Text') + '</font></b>' : pdfh(li, 'li&&Text'),\\n                            url: $('#noLoading#').lazyRule((li, 筛选条件) => {\\n                                putMyVar(筛选条件, pdfh(li, 'li&&Text'));\\n                                refreshPage(true);\\n                                return \\\"hiker://empty\\\";\\n                            }, li, 筛选条件),\\n                            col_type: 'scroll_button'\\n                        })\\n                    });\\n                    d.push({\\n                        col_type: 'blank_block'\\n                    })\\n                });\\n            }\\n        }\\n        break;\\n    case '电视':\\n        seasonType = 5;\\n        if (getMyVar('折叠', '关') == '开') {\\n            if (page == 1) {\\n                html = fetch('https://www.bilibili.com/tv/index');\\n                分类列表 = pdfa(html, '.filter-list&&.filter-block');\\n                分类列表.forEach(ul => {\\n                    筛选条件 = pdfh(ul, '.filter-name&&Text');\\n                    子分类列表 = pdfa(ul, 'ul&&li');\\n                    子分类列表.forEach(li => {\\n                        if (pdfh(li, 'li&&Text') == '其他') {\\n                            return;\\n                        }\\n                        d.push({\\n                            title: getMyVar(筛选条件, '全部') == pdfh(li, 'li&&Text') ? '““””<b><font color=#1aad19>' + pdfh(li, 'li&&Text') + '</font></b>' : pdfh(li, 'li&&Text'),\\n                            url: $('#noLoading#').lazyRule((li, 筛选条件) => {\\n                                putMyVar(筛选条件, pdfh(li, 'li&&Text'));\\n                                refreshPage(true);\\n                                return \\\"hiker://empty\\\";\\n                            }, li, 筛选条件),\\n                            col_type: 'scroll_button'\\n                        })\\n                    });\\n                    d.push({\\n                        col_type: 'blank_block'\\n                    })\\n                });\\n            }\\n        }\\n        break;\\n    case '纪录片':\\n        seasonType = 3;\\n        if (getMyVar('折叠', '关') == '开') {\\n            if (page == 1) {\\n                html = fetch('https://www.bilibili.com/documentary/index/');\\n                分类列表 = pdfa(html, '.filter-list&&.filter-block');\\n                分类列表.forEach(ul => {\\n                    筛选条件 = pdfh(ul, '.filter-name&&Text');\\n                    子分类列表 = pdfa(ul, 'ul&&li');\\n                    子分类列表.forEach(li => {\\n                        if (pdfh(li, 'li&&Text') == '其他') {\\n                            return;\\n                        }\\n                        d.push({\\n                            title: getMyVar(筛选条件, '全部') == pdfh(li, 'li&&Text') ? '““””<b><font color=#1aad19>' + pdfh(li, 'li&&Text') + '</font></b>' : pdfh(li, 'li&&Text'),\\n                            url: $('#noLoading#').lazyRule((li, 筛选条件) => {\\n                                putMyVar(筛选条件, pdfh(li, 'li&&Text'));\\n                                refreshPage(true);\\n                                return \\\"hiker://empty\\\";\\n                            }, li, 筛选条件),\\n                            col_type: 'scroll_button'\\n                        })\\n                    });\\n                    d.push({\\n                        col_type: 'blank_block'\\n                    })\\n                });\\n            }\\n        }\\n        break;\\n    case '综艺':\\n        seasonType = 7;\\n        if (getMyVar('折叠', '关') == '开') {\\n            if (page == 1) {\\n                html = fetch('https://www.bilibili.com/variety/index');\\n                分类列表 = pdfa(html, '.filter-list&&.filter-block');\\n                分类列表.forEach(ul => {\\n                    筛选条件 = pdfh(ul, '.filter-name&&Text');\\n                    子分类列表 = pdfa(ul, 'ul&&li');\\n                    子分类列表.forEach(li => {\\n                        if (pdfh(li, 'li&&Text') == '其他') {\\n                            return;\\n                        }\\n                        d.push({\\n                            title: getMyVar(筛选条件, '全部') == pdfh(li, 'li&&Text') ? '““””<b><font color=#1aad19>' + pdfh(li, 'li&&Text') + '</font></b>' : pdfh(li, 'li&&Text'),\\n                            url: $('#noLoading#').lazyRule((li, 筛选条件) => {\\n                                putMyVar(筛选条件, pdfh(li, 'li&&Text'));\\n                                refreshPage(true);\\n                                return \\\"hiker://empty\\\";\\n                            }, li, 筛选条件),\\n                            col_type: 'scroll_button'\\n                        })\\n                    });\\n                    d.push({\\n                        col_type: 'blank_block'\\n                    })\\n                });\\n            }\\n        }\\n        break;\\n    case '番剧':\\n        seasonType = 1;\\n        if (getMyVar('折叠', '关') == '开') {\\n            if (page == 1) {\\n                html = fetch('https://www.bilibili.com/anime/index');\\n                分类列表 = pdfa(html, '.filter-list&&.filter-block');\\n                分类列表.forEach(ul => {\\n                    筛选条件 = pdfh(ul, '.filter-name&&Text');\\n                    子分类列表 = pdfa(ul, 'ul&&li');\\n                    子分类列表.forEach(li => {\\n                        if (pdfh(li, 'li&&Text') == '其他') {\\n                            return;\\n                        }\\n                        d.push({\\n                            title: getMyVar(筛选条件, '全部') == pdfh(li, 'li&&Text') ? '““””<b><font color=#1aad19>' + pdfh(li, 'li&&Text') + '</font></b>' : pdfh(li, 'li&&Text'),\\n                            url: $('#noLoading#').lazyRule((li, 筛选条件) => {\\n                                putMyVar(筛选条件, pdfh(li, 'li&&Text'));\\n                                refreshPage(true);\\n                                return \\\"hiker://empty\\\";\\n                            }, li, 筛选条件),\\n                            col_type: 'scroll_button'\\n                        })\\n                    });\\n                    d.push({\\n                        col_type: 'blank_block'\\n                    })\\n                });\\n            }\\n        }\\n        break;\\n    case '电影':\\n        seasonType = 2;\\n        if (getMyVar('折叠', '关') == '开') {\\n            if (page == 1) {\\n                html = fetch('https://www.bilibili.com/movie/index');\\n                分类列表 = pdfa(html, '.filter-list&&.filter-block');\\n                分类列表.forEach(ul => {\\n                    筛选条件 = pdfh(ul, '.filter-name&&Text');\\n                    子分类列表 = pdfa(ul, 'ul&&li');\\n                    子分类列表.forEach(li => {\\n                        if (pdfh(li, 'li&&Text') == '其他') {\\n                            return;\\n                        }\\n                        d.push({\\n                            title: getMyVar(筛选条件, '全部') == pdfh(li, 'li&&Text') ? '““””<b><font color=#1aad19>' + pdfh(li, 'li&&Text') + '</font></b>' : pdfh(li, 'li&&Text'),\\n                            url: $('#noLoading#').lazyRule((li, 筛选条件) => {\\n                                putMyVar(筛选条件, pdfh(li, 'li&&Text'));\\n                                refreshPage(true);\\n                                return \\\"hiker://empty\\\";\\n                            }, li, 筛选条件),\\n                            col_type: 'scroll_button'\\n                        })\\n                    });\\n                    d.push({\\n                        col_type: 'blank_block'\\n                    })\\n                });\\n            }\\n        }\\n        break;\\n    default:\\n        seasonType = 4;\\n        if (getMyVar('折叠', '关') == '开') {\\n            if (page == 1) {\\n                html = fetch('https://www.bilibili.com/anime/index');\\n                分类列表 = pdfa(html, '.filter-list&&.filter-block');\\n                分类列表.forEach(ul => {\\n                    筛选条件 = pdfh(ul, '.filter-name&&Text');\\n                    子分类列表 = pdfa(ul, 'ul&&li');\\n                    子分类列表.forEach(li => {\\n                        if (pdfh(li, 'li&&Text') == '其他') {\\n                            return;\\n                        }\\n                        d.push({\\n                            title: getMyVar(筛选条件, '全部') == pdfh(li, 'li&&Text') ? '““””<b><font color=#1aad19>' + pdfh(li, 'li&&Text') + '</font></b>' : pdfh(li, 'li&&Text'),\\n                            url: $('#noLoading#').lazyRule((li, 筛选条件) => {\\n                                putMyVar(筛选条件, pdfh(li, 'li&&Text'));\\n                                refreshPage(true);\\n                                return \\\"hiker://empty\\\";\\n                            }, li, 筛选条件),\\n                            col_type: 'scroll_button'\\n                        })\\n                    });\\n                    d.push({\\n                        col_type: 'blank_block'\\n                    })\\n                });\\n            }\\n        }\\n        break;\\n}\\n// 子分类参数映射\\nswitch (getMyVar('类型', '全部')) {\\n    case '正片':\\n        season_version = 1;\\n        break;\\n    case '电影':\\n        season_version = 2;\\n        break;\\n    case '其他':\\n        season_version = 3;\\n        break;\\n    default:\\n        season_version = -1;\\n        break;\\n}\\nswitch (getMyVar('配音', '全部')) {\\n    case '原声':\\n        spoken_language_type = 1;\\n        break;\\n    case '中文配音':\\n        spoken_language_type = 2;\\n        break;\\n    default:\\n        spoken_language_type = -1;\\n        break;\\n}\\nswitch (getMyVar('地区', '全部')) {\\n    case '中国大陆':\\n        area = 1;\\n        break;\\n    case '日本':\\n        area = 2;\\n        break;\\n    case '美国':\\n        area = 3;\\n        break;\\n    case '英国':\\n        area = 4;\\n        break;\\n    case '中国港台':\\n        area = [6, 7];\\n        break;\\n    case '韩国':\\n        area = 8;\\n        break;\\n    case '法国':\\n        area = 9;\\n        break;\\n    case '泰国':\\n        area = 10;\\n        break;\\n    case '西班牙':\\n        area = 13;\\n        break;\\n    case '德国':\\n        area = 15;\\n        break;\\n    case '意大利':\\n        area = 35;\\n        break;\\n    case '其他':\\n        // 只是番剧的情况_共55，要减去出现的——算了，直接在动态分类的时候去掉了\\n        area = [1, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55];\\n        break;\\n    default:\\n        area = -1;\\n        break;\\n}\\nswitch (getMyVar('状态', '全部')) {\\n    case '完结':\\n        is_finish = 1;\\n        break;\\n    case '连载':\\n        is_finish = 0;\\n        break;\\n    default:\\n        is_finish = -1;\\n        break;\\n}\\nswitch (getMyVar('出品', '全部')) {\\n    case '央视':\\n        producer_id = 4;\\n        break;\\n    case 'BBC':\\n        producer_id = 1;\\n        break;\\n    case '探索频道':\\n        producer_id = 7;\\n        break;\\n    case '国家地理':\\n        producer_id = 14;\\n        break;\\n    case 'NHK':\\n        producer_id = 2;\\n        break;\\n    case '历史频道':\\n        producer_id = 6;\\n        break;\\n    case '卫视':\\n        producer_id = 8;\\n        break;\\n    case '自制':\\n        producer_id = 9;\\n        break;\\n    case 'ITV':\\n        producer_id = 5;\\n        break;\\n    case 'SKY':\\n        producer_id = 3;\\n        break;\\n    case 'ZDF':\\n        producer_id = 10;\\n        break;\\n    case '合作机构':\\n        producer_id = 11;\\n        break;\\n    case '国内其他':\\n        producer_id = 12;\\n        break;\\n    case '国外其它':\\n        producer_id = 13;\\n        break;\\n    default:\\n        producer_id = -1;\\n        break;\\n}\\nswitch (getMyVar('版权', '全部')) {\\n    case '独家':\\n        copyright = 3;\\n        break;\\n    case '其他':\\n        copyright = [1, 2, 4];\\n        break;\\n    default:\\n        copyright = -1;\\n        break;\\n}\\nswitch (getMyVar('付费', '全部')) {\\n    case '免费':\\n        season_status = 1;\\n        break;\\n    case '付费':\\n        season_status = [2, 6];\\n        break;\\n    case '大会员':\\n        season_status = [4, 6];\\n        break;\\n    default:\\n        season_status = -1;\\n        break;\\n}\\nswitch (getMyVar('季度', '全部')) {\\n    case '1月':\\n        season_month = 1;\\n        break;\\n    case '4月':\\n        season_month = 4;\\n        break;\\n    case '7月':\\n        season_month = 7;\\n        break;\\n    case '10月':\\n        season_month = 10;\\n        break;\\n    default:\\n        season_month = -1;\\n        break;\\n}\\n// 判断和映射年份\\nswitch (getMyVar('大类', '国创')) {\\n    case '国创':\\n    case '番剧':\\n        // 番剧和国创【也是叫做年份但参数名、格式和其他分类不一样】\\n        anime_year = getMyVar('年份', '全部');\\n        switch (anime_year.includes('-')) {\\n            case true:\\n                early = anime_year.split('-')[1];\\n                later = anime_year.split('-')[0];\\n                year = `[${early},${Number(later) + 1})`;\\n                break;\\n            case false:\\n                switch (anime_year) {\\n                    case '90年代':\\n                        year = '[1990,2000)';\\n                        break;\\n                    case '80年代':\\n                        year = '[1980,1990)';\\n                        break;\\n                    case '更早':\\n                        year = '[,1980)';\\n                        break;\\n                    case '全部':\\n                        year = -1;\\n                        break;\\n                    default:\\n                        year = `[${anime_year},${Number(anime_year) + 1})`;\\n                        break;\\n                }\\n        }\\n    default:\\n        // 除了番剧和国创的其他分类\\n        tv_year = getMyVar('年份', '全部');\\n        switch (tv_year.includes('-')) {\\n            case true:\\n                early = tv_year.split('-')[1];\\n                later = tv_year.split('-')[0];\\n                release_date = `[${early}-01-01 00:00:00,${Number(later) + 1}-01-01 00:00:00)`\\n                break;\\n            case false:\\n                switch (tv_year) {\\n                    case '90年代':\\n                        release_date = '[1990-01-01 00:00:00,2000-01-01 00:00:00)'\\n                        break;\\n                    case '80年代':\\n                        release_date = '[1980-01-01 00:00:00,1990-01-01 00:00:00)'\\n                        break;\\n                    case '更早':\\n                        release_date = '[,1980-01-01 00:00:00)';\\n                        break;\\n                    case '全部':\\n                        release_date = -1;\\n                        break;\\n                    default:\\n                        release_date = `[${tv_year}-01-01 00:00:00,${Number(tv_year) + 1}-01-01 00:00:00)`;\\n                        break;\\n                }\\n        }\\n}\\nswitch (getMyVar('风格', '全部')) {\\n    case '电影':\\n        style_id = -10;\\n        break;\\n    // 番剧栏目\\n    case '原创':\\n        style_id = 10010;\\n        break;\\n    case '漫画改':\\n        style_id = 10011;\\n        break;\\n    case '小说改':\\n        style_id = 10012;\\n        break;\\n    case '游戏改':\\n        style_id = 10013;\\n        break;\\n    case '特摄':\\n        style_id = 10014;\\n        break;\\n    case '布袋戏':\\n        style_id = 10015;\\n        break;\\n    case '热血':\\n        style_id = 10016;\\n        break;\\n    case '穿越':\\n        style_id = 10017;\\n        break;\\n    case '奇幻':\\n        style_id = 10018;\\n        break;\\n    // 咋跳了一个捏~\\n    case '战斗':\\n        style_id = 10020;\\n        break;\\n    case '搞笑':\\n        style_id = 10021;\\n        break;\\n    case '日常':\\n        style_id = 10022;\\n        break;\\n    case '科幻':\\n        style_id = 10023;\\n        break;\\n    case '萌系':\\n        style_id = 10024;\\n        break;\\n    case '治愈':\\n        style_id = 10025;\\n        break;\\n    case '校园':\\n        style_id = 10026;\\n        break;\\n    case '少儿':\\n        style_id = 10027;\\n        break;\\n    case '泡面':\\n        style_id = 10028;\\n        break;\\n    case '恋爱':\\n        style_id = 10029;\\n        break;\\n    case '少女':\\n        style_id = 10030;\\n        break;\\n    case '魔法':\\n        style_id = 10031;\\n        break;\\n    case '冒险':\\n        style_id = 10032;\\n        break;\\n    case '历史':\\n        style_id = 10033;\\n        break;\\n    case '架空':\\n        style_id = 10034;\\n        break;\\n    case '机战':\\n        style_id = 10035;\\n        break;\\n    case '神魔':\\n        style_id = 10036;\\n        break;\\n    case '声控':\\n        style_id = 10037;\\n        break;\\n    case '运动':\\n        style_id = 10038;\\n        break;\\n    case '励志':\\n        style_id = 10039;\\n        break;\\n    case '音乐':\\n        style_id = 10040;\\n        break;\\n    case '推理':\\n        style_id = 10041;\\n        break;\\n    case '社团':\\n        style_id = 10042;\\n        break;\\n    case '智斗':\\n        style_id = 10043;\\n        break;\\n    case '催泪':\\n        style_id = 10044;\\n        break;\\n    case '美食':\\n        style_id = 10045;\\n        break;\\n    case '偶像':\\n        style_id = 10046;\\n        break;\\n    case '乙女':\\n        style_id = 10047;\\n        break;\\n    case '职场':\\n        style_id = 10048;\\n        break;\\n\\n    // 综艺栏目、电影\\n    case '剧情':\\n        style_id = 10050;\\n        break;\\n    case '喜剧':\\n        style_id = 10051;\\n        break;\\n    case '爱情':\\n        style_id = 10052;\\n        break;\\n    case '动作':\\n        style_id = 10053;\\n        break;\\n    case '恐怖':\\n        style_id = 10054;\\n        break;\\n    case '犯罪':\\n        style_id = 10055;\\n        break;\\n    case '惊悚':\\n        style_id = 10056;\\n        break;\\n    case '悬疑':\\n        style_id = 10057;\\n        break;\\n    case '战争':\\n        style_id = 10058;\\n        break;\\n    case '动画':\\n        style_id = 10059;\\n        break;\\n    case '传记':\\n        style_id = 10060;\\n        break;\\n    case '家庭':\\n        style_id = 10061;\\n        break;\\n    case '歌舞':\\n        style_id = 10062;\\n        break;\\n    case '纪实':\\n        style_id = 10063;\\n        break;\\n    case '灾难':\\n        style_id = 10064;\\n        break;\\n    case '人文':\\n        style_id = 10065;\\n        break;\\n    case '科技':\\n        style_id = 10066;\\n        break;\\n    case '宇宙':\\n        style_id = 10068;\\n        break;\\n    case '萌宠':\\n        style_id = 10069;\\n        break;\\n    case '社会':\\n        style_id = 10070;\\n        break;\\n    case '动物':\\n        style_id = 10071;\\n        break;\\n    case '自然':\\n        style_id = 10072;\\n        break;\\n    case '医疗':\\n        style_id = 10073;\\n        break;\\n    case '军事':\\n        style_id = 10074;\\n        break;\\n    case '罪案':\\n        style_id = 10075;\\n        break;\\n    case '神秘':\\n        style_id = 10076;\\n        break;\\n    case '旅行':\\n        style_id = 10077;\\n        break;\\n    case '武侠':\\n        style_id = 10078;\\n        break;\\n    case '青春':\\n        style_id = 10079;\\n        break;\\n    case '都市':\\n        style_id = 10080;\\n        break;\\n    case '古装':\\n        style_id = 10081;\\n        break;\\n    case '谍战':\\n        style_id = 10082;\\n        break;\\n    case '经典':\\n        style_id = 10083;\\n        break;\\n    case '情感':\\n        style_id = 10084;\\n        break;\\n    case '神话':\\n        style_id = 10085;\\n        break;\\n    case '年代':\\n        style_id = 10086;\\n        break;\\n    case '农村':\\n        style_id = 10087;\\n        break;\\n    case '刑侦':\\n        style_id = 10088;\\n        break;\\n    case '军旅':\\n        style_id = 10089;\\n        break;\\n    case '访谈':\\n        style_id = 10090;\\n        break;\\n    case '脱口秀':\\n        style_id = 10091;\\n        break;\\n    case '真人秀':\\n        style_id = 10092;\\n        break;\\n    case '选秀':\\n        style_id = 10094;\\n        break;\\n    case '旅游':\\n        style_id = 10095;\\n        break;\\n    case '晚会':\\n        style_id = 10098;\\n        break;\\n    case '演唱会':\\n        style_id = 10096;\\n        break;\\n    case '亲子':\\n        style_id = 10097;\\n        break;\\n    case '养成':\\n        style_id = 10099;\\n        break;\\n    case '文化':\\n        style_id = 10100;\\n        break;\\n    // 电影栏目\\n    case '短片':\\n        style_id = 10104;\\n        break;\\n    default:\\n        style_id = -1;\\n        break;\\n}\\n// 映射真实请求地址\\nswitch (seasonType) {\\n    case 4:\\n        // 国创\\n        true_url = 'https://api.bilibili.com/pgc/season/index/result?season_version=' + season_version + '&is_finish=' + is_finish + '&copyright=' + copyright + '&season_status=' + season_status + '&year=' + year + '&style_id=' + style_id + '&order=3&st=4&sort=0&page=' + page + '&season_type=4&pagesize=30&type=1'\\n        break;\\n    case 5:\\n        // 电视剧\\n        true_url = 'https://api.bilibili.com/pgc/season/index/result?area=' + area + '&style_id=' + style_id + '&release_date=' + release_date + '&season_status=' + season_status + '&order=2&st=5&sort=0&page=' + page + '&season_type=5&pagesize=30&type=1'\\n        break;\\n    case 7:\\n        // 综艺\\n        true_url = 'https://api.bilibili.com/pgc/season/index/result?season_status=' + season_status + '&style_id=' + style_id + '&order=2&st=7&sort=0&page=' + page + '&season_type=7&pagesize=30&type=1';\\n        break;\\n    case 1:\\n        // 番剧\\n        true_url = 'https://api.bilibili.com/pgc/season/index/result?season_version=' + season_version + '&spoken_language_type=' + spoken_language_type + '&area=' + area + '&is_finish=' + is_finish + '&copyright=' + copyright + '&season_status=' + season_status + '&season_month=' + season_month + '&year=' + year + '&style_id=' + style_id + '&order=3&st=1&sort=0&page=' + page + '&season_type=1&pagesize=30&type=1';\\n        break;\\n    case 3:\\n        // 纪录片\\n        true_url = 'https://api.bilibili.com/pgc/season/index/result?style_id=' + style_id + '&producer_id=' + producer_id + '&release_date=' + release_date + '&season_status=' + season_status + '&order=2&st=3&sort=0&page=' + page + '&season_type=3&pagesize=30&type=1'\\n        break;\\n    case 2:\\n        // 电影\\n        true_url = 'https://api.bilibili.com/pgc/season/index/result?area=' + area + '&style_id=' + style_id + '&release_date=' + release_date + '&season_status=' + season_status + '&order=2&st=2&sort=0&page=' + page + '&season_type=2&pagesize=30&type=1'\\n        break;\\n}\\ntrue_url = encodeURI(true_url);\\nlist = JSON.parse(fetch(true_url)).data.list;\\ntry {\\n    list.forEach(movie => {\\n        d.push({\\n            title: movie.title,\\n            url: \\\"hiker://page/filmerji#immersiveTheme#\\\",\\n            img: movie.cover + \\\"@Referer=\\\",\\n            desc: movie.order,\\n            col_type: 'movie_3',\\n            extra: {\\n                season_id: movie.season_id\\n            }\\n        });\\n    });\\n} catch (e) {\\n    log('已经抵达页底' + MY_PAGE);\\n}\\n\"},{\"col_type\":\"movie_3\",\"name\":\"热映时间表\",\"path\":\"UpdateTables\",\"rule\":\"function color(text, color) {\\n\\n    text += \\\"\\\";\\n\\n    if (text.indexOf(\\\"““””\\\") === 0) {\\n\\n        text.replace(\\\"““””\\\", \\\"\\\");\\n\\n    }\\n\\n    return \\\"““””<font color='\\\" + color + \\\"'>\\\" + text + \\\"</font>\\\";\\n\\n}\\n\\nvar tabs = {\\n\\n    \\\"番剧\\\": 1,\\n\\n    \\\"纪录片\\\": 3,\\n\\n    \\\"国创\\\": 4\\n\\n}\\n\\nif (MY_PAGE == 1) {\\n\\n    Object.keys(tabs).forEach(item => {\\n\\n        d.push({\\n\\n            title: (getMyVar(\\\"juji\\\", \\\"国创\\\") == item ? color(item, \\\"red\\\") : item),\\n\\n            url: $().lazyRule((a) => {\\n\\n                putMyVar(\\\"juji\\\", a)\\n\\n                refreshPage()\\n\\n                return \\\"toast://切换成功\\\"\\n\\n            }, item),\\n\\n            col_type: \\\"scroll_button\\\"\\n\\n        })\\n\\n    })\\n\\n    d.push({\\n\\n        col_type: \\\"line\\\"\\n\\n    })\\n\\n    let days = 7\\n\\n    for (let i = 1; i < days; i++) {\\n\\n        d.push({\\n\\n            title: (getMyVar(\\\"from\\\", \\\"1\\\") == i + \\\"\\\" ? color(i + \\\"天前\\\", \\\"red\\\") : i + \\\"天前\\\"),\\n\\n            url: $().lazyRule((i) => {\\n\\n                putMyVar(\\\"from\\\", i + \\\"\\\")\\n\\n                refreshPage()\\n\\n                return \\\"hiker://empty\\\"\\n\\n            }, i),\\n\\n            col_type: \\\"scroll_button\\\"\\n\\n        })\\n\\n    }\\n\\n    d.push({\\n\\n        col_type: \\\"line\\\"\\n\\n    })\\n\\n    for (let i = 1; i < days; i++) {\\n\\n        d.push({\\n\\n            title: (getMyVar(\\\"to\\\", \\\"1\\\") == i + \\\"\\\" ? color(i + \\\"天后\\\", \\\"red\\\") : i + \\\"天后\\\"),\\n\\n            url: $().lazyRule((i) => {\\n\\n                putMyVar(\\\"to\\\", i + \\\"\\\")\\n\\n                refreshPage()\\n\\n                return \\\"hiker://empty\\\"\\n\\n            }, i),\\n\\n            col_type: \\\"scroll_button\\\"\\n\\n        })\\n\\n    }\\n\\n\\n    $.require(\\\"hiker://page/api\\\").getMovies(tabs[getMyVar(\\\"juji\\\", \\\"国创\\\")], getMyVar(\\\"from\\\", \\\"1\\\"), getMyVar(\\\"to\\\", \\\"1\\\")).forEach(item => {\\n\\n        d.push({\\n\\n            title: item.date + \\\" 周\\\" + item.day_of_week,\\n\\n            col_type: \\\"text_1\\\",\\n\\n            url: \\\"hiker://empty\\\"\\n\\n        })\\n\\n        item.episodes.forEach(i => {\\n\\n            d.push({\\n\\n                title: i.title,\\n\\n                img: i.cover+'@Referer=',\\n\\n                desc:i.pub_index.match(/即将/)?'‘‘’’<font color=\\\"red\\\">'+i.pub_index+'\\\\n'+i.pub_time+'</font>': i.pub_index+ '\\\\n' + i.pub_time,\\n\\n                url: \\\"hiker://page/filmerji#immersiveTheme#\\\",\\n\\n                extra: {\\n\\n                    \\\"season_id\\\": i.season_id\\n\\n                }\\n\\n            })\\n\\n        })\\n\\n    })\\n\\n}\\n\\n\\n\\n\"},{\"col_type\":\"movie_3\",\"name\":\"登录\",\"path\":\"login\",\"rule\":\"js:\\nvar d = [];\\nsetPageTitle('账号登录页面')\\nd.push({\\n    title: 'cookie登录',\\n    url: $('#noLoading#').lazyRule(() => {\\n        return $('', '请输入你的cookie').input(() => {\\n            if (input == \\\"\\\") return \\\"toast://cookie不能为空\\\";\\n            let userinfo = JSON.parse(fetch(\\\"https://api.bilibili.com/x/web-interface/nav\\\", {\\n                headers: {\\n                    \\\"Cookie\\\": input\\n                }\\n            })).data;\\n            if (userinfo.isLogin === false) return \\\"toast://你的cookie貌似失效了喔~\\\";\\n            userInfo = {\\n                cookie: input,\\n                userName: userinfo.uname,\\n                userMid:  userinfo.mid,\\n                vipStatus: userinfo.vipStatus,\\n                face: userinfo.face + \\\"@Referer=\\\"\\n            }\\n            setting = JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\"));\\n            setting.userList.unshift(userInfo);\\n            // 过滤掉cookie为空的元素\\n            setting.userList = setting.userList.filter(user => user.cookie !== '');\\n            saveFile(\\\"hiker://files/rules/cy/bili.txt\\\", JSON.stringify(setting));\\n            back(true);\\n            return \\\"toast://cookie设置成功\\\";\\n        })\\n    }),\\n    col_type: 'text_center_1'\\n});\\nd.push({\\n    title: '登陆说明',\\n    desc: \\\"页面下方登陆成功后，再点击确认登录即可\\\",\\n    url: \\\"hiker://empty\\\",\\n    col_type: 'text_center_1'\\n}, {\\n    title: '登陆成功后，再点我！',\\n    url: $('#noLoading#').lazyRule(() => {\\n        // 这里负责写Cookie，先读，再追加\\n        cookie = getVar('biliCookie','');\\n        log(\\\"获取到的cookie:\\\"+cookie);\\n        if (cookie == \\\"\\\") return \\\"toast://获取cookie失败，再等等看？\\\";\\n        let userinfo = JSON.parse(fetch(\\\"https://api.bilibili.com/x/web-interface/nav\\\", {\\n            headers: {\\n                \\\"Cookie\\\": cookie\\n            }\\n        })).data;\\n        if (userinfo.isLogin === false) return \\\"toast://你先登录，再获取cookie，OK？\\\";\\n        userInfo = {\\n            cookie: cookie,\\n            userName: userinfo.uname,\\n            userMid:  userinfo.mid,\\n            vipStatus: userinfo.vipStatus,\\n            face: userinfo.face + \\\"@Referer=\\\"\\n        }\\n        setting = JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\"));\\n        setting.userList.unshift(userInfo);\\n        // 过滤掉cookie为空的元素\\n        setting.userList = setting.userList.filter(user => user.cookie !== '');\\n        saveFile(\\\"hiker://files/rules/cy/bili.txt\\\", JSON.stringify(setting));\\n        back(true);\\n        return 'toast://如果没有登陆成功，建议你下次登陆成功后不要点那么快~'\\n    }),\\n    col_type: 'text_1'\\n}, {\\n    url: \\\"https://m.bilibili.com/\\\",\\n    col_type: \\\"x5_webview_single\\\",\\n    desc: \\\"list&&screen-300\\\",\\n    extra: {\\n        js: $.toString(() => {\\n            var token_timer = function () {\\n                var timer = setInterval(() => {\\n                    cookie = fba.getCookie(\\\"https://m.bilibili.com/\\\");\\n                    fba.putVar('biliCookie', cookie);\\n                }, 100)\\n            };\\n            token_timer();\\n        }),\\n        canBack: true,\\n        ua: MOBILE_UA\\n    }\\n})\\nsetResult(d);\\n\"},{\"col_type\":\"movie_3\",\"name\":\"影视二级\",\"path\":\"filmerji\",\"rule\":\"js:\\n// 数据定位\\nvar d = [];\\nif (MY_PARAMS.season_id) {\\n    season_id = MY_PARAMS.season_id + \\\"\\\";\\n    Data = JSON.parse(fetch('https://api.bilibili.com/pgc/view/web/season?season_id=' + season_id)).result;\\n} else {\\n    Data = JSON.parse(fetch('https://api.bilibili.com/pgc/view/web/season?ep_id=' + MY_PARAMS.ep_id)).result;\\n}\\nif (!Data.cover.match(/https/)) {\\n    封面 = Data.cover.replace('http', 'https') + \\\"@Referer=\\\";\\n} else {\\n    封面 = Data.cover + \\\"@Referer=\\\";\\n}\\ntry {\\n    地区 = Data.areas[0].name;\\n} catch (e) {\\n    地区 = '地区暂无';\\n}\\n简介 = Data.evaluate;\\n// 正片\\n类型 = Data.positive.title;\\n上映时间 = Data.publish.pub_time;\\ntry {\\n    得分 = Data.rating.score;\\n} catch (e) {\\n    得分 = '暂无得';\\n}\\n追剧日历 = Data.new_ep.desc;\\n更新进度 = Data.new_ep.title;\\n影片名称 = Data.title;\\n第二标题 = Data.share_sub_title;\\n剧集列表 = Data.episodes.filter((list) => {\\n    // 过滤预告、花絮\\n    if (getItem('previewSwitch', 'fold') === 'fold' && list.badge.match(/预|花絮/)) {\\n        return false;\\n    } else {\\n        return true;\\n    }\\n});\\n短讯 = \\\"⭐\\\" + 类型 + \\\"⭐\\\" + 第二标题 + '\\\\n' + 地区 + '-' + 得分 + '分\\\\n-' + 上映时间 + '-';\\n// 重定义二级页面数据\\nsetPageTitle(影片名称);\\nsetPagePicUrl(封面);\\n// 前置参数和预处理---\\nimgLink = storage0.getMyVar('图标');\\n// 全局lazy——直链+断插\\nvar lazy = $('').lazyRule(() => {\\n    videoParms = findItem(input);\\n    aid = videoParms.extra.aid;\\n    bvid = videoParms.extra.bvid;\\n    cid = videoParms.extra.cid;\\n    badge = videoParms.extra.badge;\\n    // 提交历史记录\\n    $.require(\\\"hiker://page/api\\\").reportProcess(aid, cid);\\n    vipStatus = JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].vipStatus;\\n    if (vipStatus != 0) {\\n        // 大会员\\n        if (badge.match(/付费/)) {\\n            return $(['魔断解析', '已购买'], 1).select((input, aid, cid) => {\\n                if (input == '魔断解析') {\\n                    eval(fetch('hiker://files/cache/Parse_Dn.js', {}));\\n                    return aytmParse(link);\\n                } else {\\n                    return $.require(\\\"hiker://page/api\\\").biliLazy(aid, cid, 116).replace(/;/g, \\\"；；\\\");\\n                }\\n            }, link, aid, cid)\\n        } else {\\n            return $.require(\\\"hiker://page/api\\\").biliLazy(aid, cid, 116).replace(/;/g, \\\"；；\\\");\\n        }\\n    } else {\\n        // 普通用户\\n        var setting=JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\"));\\n        var hasBfKey=setting.bfKey!=''?true:false;\\n        if (!hasBfKey) {\\n            if (badge.match(/会员|付费/)) {\\n                eval(fetch('hiker://files/cache/Parse_Dn.js', {}));\\n                return aytmParse(input);\\n            } else {\\n                return $.require(\\\"hiker://page/api\\\").biliLazy(aid, cid, 116).replace(/;/g, \\\"；；\\\");\\n            }\\n        } else {\\n            // 共享会员播放权益\\n            if (badge.match(/付费/)) {\\n                return $(['魔断解析', '已购买'], 1).select((input, aid, cid) => {\\n                    if (input == '魔断解析') {\\n                        eval(fetch('hiker://files/cache/Parse_Dn.js', {}));\\n                        return aytmParse(link);\\n                    } else {\\n                        return $.require(\\\"hiker://page/api\\\").biliLazy(aid, cid, 116).replace(/;/g, \\\"；；\\\");\\n                    }\\n                }, link, aid, cid)\\n            } else {\\n                return $.require(\\\"hiker://page/api\\\").biliLazy(aid, cid, 116).replace(/;/g, \\\"；；\\\");\\n            }\\n        }\\n    }\\n});\\nvar Color = \\\"#19B89D\\\";\\nvar 每页集数 = 30;\\nvar 搜索模式 = '分组';\\nvar 调用名称 = '简影';\\nputMyVar('折叠', '关');\\nputMyVar('日历', '关');\\nputMyVar('Data', Data);\\nputMyVar('lazy', lazy);\\n// 清除变量\\naddListener('onClose', $.toString(() => {\\n    clearMyVar('分集起');\\n    clearMyVar('分集终');\\n    clearMyVar('折叠');\\n    clearMyVar('日历');\\n    clearMyVar('Data');\\n    clearMyVar('lazy');\\n    clearMyVar('剧集列表');\\n}))\\n// 设置动态最新章节\\nsetLastChapterRule('js:' + $.toString(() => {\\n    eval(JSON.parse(request('hiker://page/getUpdate')).rule);\\n}));\\n// 页面内容正文---\\n// 基本信息模块\\nd.push({\\n    title: 短讯,\\n    desc: 简介 == '' ? '暂无简介' : 简介.substring(0, 45) + '‘‘’’…<font color=\\\"#1C1C1C\\\">详情</font>',\\n    img: 封面,\\n    url: $().rule((简介) => {\\n        res = {};\\n        var d = [];\\n        d.push({\\n            title: '影片简介：' + '\\\\n\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t' + 简介,\\n            col_type: 'long_text'\\n        });\\n        res.data = d;\\n        setHomeResult(res);\\n    }, 简介),\\n    col_type: 'movie_1_vertical_pic_blur',\\n    extra: {\\n        longClick: [{\\n            title: '预告、花絮开关', js: $.toString(() => {\\n                if (getItem('previewSwitch', 'fold') == 'fold') {\\n                    setItem('previewSwitch', 'open');\\n                    refreshPage(true);\\n                    return \\\"toast://预告已经切换为展示~\\\";\\n                } else {\\n                    setItem('previewSwitch', 'fold');\\n                    refreshPage(true);\\n                    return \\\"toast://预告不再展示~\\\";\\n                }\\n            }),\\n        }, {\\n            title: 'dm盒子', js: $.toString(() => {\\n                return 'hiker://page/setting#noHistory#?rule=dm盒子';\\n            })\\n        }, {\\n            title: '弹幕控制', js: $.toString(() => {\\n                if (getItem('isOverrideSave', 'false') == 'true') {\\n                    setItem('isOverrideSave', 'false');\\n                    return 'toast://弹幕将不受dm盒子参数控制';\\n                } else {\\n                    setItem('isOverrideSave', 'true');\\n                    return 'toast://弹幕将受到dm盒子参数控制';\\n                }\\n            })\\n        }]\\n    }\\n});\\n// 更新日历模块\\nd.push({\\n    title: '日历',\\n    img: imgLink.日历,\\n    url: $('#noLoading#').lazyRule((追剧日历, 更新进度) => {\\n        if (getMyVar('日历', '关') == '开') {\\n            deleteItem('追剧日历');\\n            putMyVar('日历', '关');\\n        } else {\\n            addItemAfter('显示模式', {\\n                title: 追剧日历.match(/完结|期待/) ? 追剧日历 : 追剧日历 + '<br><font color=\\\"red\\\">更新至' + (更新进度.match(/[\\\\u4e00-\\\\u9fa5]/) ? 更新进度 : ('第' + (更新进度 == '' ? 0 : 更新进度) + '话')) + '</font>',\\n                col_type: \\\"rich_text\\\",\\n                extra: {\\n                    id: '追剧日历'\\n                }\\n            });\\n            putMyVar('日历', '开');\\n        }\\n        return 'toast://已切换日历为:' + getMyVar('日历', '开')\\n    }, 追剧日历, 更新进度),\\n    col_type: 'icon_5'\\n});\\n// 订阅模块\\nd.push({\\n    title: '订阅',\\n    img: imgLink.订阅,\\n    url: $('#noLoading#').lazyRule(() => {\\n        selectionList = ['订阅', '取消订阅'];\\n        return $(selectionList, 2).select(() => {\\n            season_id = JSON.parse(getMyVar('Data')).season_id;\\n            if (input == '订阅') {\\n                res = $.require(\\\"hiker://page/api\\\").subscribeFilm(season_id);\\n            } else {\\n                res = $.require(\\\"hiker://page/api\\\").cancelSubscribeFilm(season_id);\\n            }\\n            return 'toast://' + res;\\n        });\\n    }),\\n    col_type: 'icon_5'\\n});\\n// 评论模块\\nd.push({\\n    title: '评论',\\n    img: imgLink.查看评论,\\n    url: $('#noLoading#').lazyRule(() => {\\n        return $('hiker://empty').rule(() => {\\n            var d = [];\\n            List = JSON.parse(getMyVar('Data')).episodes;\\n            List.forEach(item => {\\n                d.push({\\n                    title: item.share_copy + '<font color=\\\"#33cccc\\\">\\t➮</font>',\\n                    img: item.cover + '@Referer=',\\n                    url: 'hiker://page/Comments?p=fypage',\\n                    col_type: \\\"avatar\\\",\\n                    extra: {\\n                        \\\"id\\\": item.aid,\\n                        \\\"type\\\": 1\\n                    }\\n                });\\n            });\\n            setResult(d);\\n        });\\n    }),\\n    col_type: 'icon_5'\\n});\\n\\n// 精彩继续模块\\nd.push({\\n    title: '周边',\\n    img: imgLink.周边,\\n    url: $('#noLoading#').lazyRule(() => {\\n        Data = JSON.parse(getMyVar('Data'));\\n        // 有些没有直接去掉懒得处理~\\n        if (Data.section) {\\n            周边数组 = [\\\"🏷️相关系列\\\", \\\"🤣PV&花絮\\\", \\\"🍉竖屏也精彩\\\", \\\"🔥精彩二创\\\"];\\n        } else {\\n            周边数组 = [\\\"🏷️相关系列\\\"];\\n        }\\n        // 周边数组 = [\\\"🏷️相关系列\\\", \\\"🤣PV&花絮\\\", \\\"竖屏也精彩\\\", \\\"精彩二创\\\"];\\n        return $(周边数组, 1, 'ღ精彩继续').select(() => {\\n            Data = JSON.parse(getMyVar('Data'));\\n            lazy = getMyVar('lazy');\\n            if (input === '🏷️相关系列') {\\n                系列名称 = Data.season_title\\n                系列数据 = Data.seasons;\\n                return $().rule((系列数据) => {\\n                    d = [];\\n                    setPageTitle('🏷️相关系列');\\n                    if (系列数据 == [] || 系列数据 == '') {\\n                        d.push({\\n                            title: '‘‘’’<big><font color=\\\"red\\\">⭐该影片没有相关系列哦~⭐</font></big>',\\n                            url: 'toast://都没有，，你点啥呀~',\\n                            desc: '敬请期待~',\\n                            col_type: 'text_center_1'\\n                        });\\n                    }\\n                    系列数据.forEach(list => {\\n                        d.push({\\n                            title: list.season_title,\\n                            img: (list.horizontal_cover_1610 == '' ? (list.horizontal_cover_169 == '' ? list.cover : list.horizontal_cover_169) : list.horizontal_cover_1610) + \\\"@Referer=\\\",\\n                            url: 'hiker://page/filmerji#immersiveTheme#',\\n                            desc: list.new_ep.index_show,\\n                            col_type: 'movie_1_left_pic',\\n                            extra: {\\n                                \\\"ep_id\\\": list.new_ep.id\\n                            }\\n                        });\\n                    });\\n                    setHomeResult(d);\\n                }, 系列数据)\\n            } else if (input === '🤣PV&花絮') {\\n                try {\\n                    PV和花絮数据 = Data.section[0].episodes;\\n                    return $().rule((PV和花絮数据, lazy) => {\\n                        d = [];\\n                        setPageTitle('🤣PV&花絮');\\n                        if (PV和花絮数据 == [] || PV和花絮数据 == '') {\\n                            d.push({\\n                                title: '‘‘’’<big><font color=\\\"red\\\">⭐该影片/视频没有相关PV和花絮哦~⭐</font></big>',\\n                                url: 'toast://都没有，，你点啥呀~',\\n                                desc: '敬请期待~',\\n                                col_type: 'text_center_1'\\n                            });\\n                        }\\n                        PV和花絮数据.forEach(list => {\\n                            d.push({\\n                                title: list.title,\\n                                img: list.cover + \\\"@Referer=\\\",\\n                                url: list.link + lazy,\\n                                desc: list.subtitle + '\\\\n' + list.long_title,\\n                                col_type: 'movie_1_left_pic',\\n                                extra: {\\n                                    id: list.link,\\n                                    aid: list.aid,\\n                                    bvid: list.bvid,\\n                                    cid: list.cid,\\n                                    badge: list.badge\\n                                }\\n                            });\\n                        });\\n                        setHomeResult(d);\\n                    }, PV和花絮数据, lazy)\\n                } catch (e) {\\n                    return 'toast://没有数据哦~'\\n                }\\n            } else if (input === '🍉竖屏也精彩') {\\n                try {\\n                    竖屏也精彩数据 = Data.section[1].episodes;\\n                    return $().rule((竖屏也精彩数据, lazy) => {\\n                        d = [];\\n                        setPageTitle('🍉竖屏也精彩');\\n                        if (竖屏也精彩数据 == [] || 竖屏也精彩数据 == '') {\\n                            d.push({\\n                                title: '‘‘’’<big><font color=\\\"red\\\">⭐该影片/视频没有相关竖屏短视频哦~⭐</font></big>',\\n                                url: 'toast://都没有，，你点啥呀~',\\n                                desc: '敬请期待~',\\n                                col_type: 'text_center_1'\\n                            });\\n                        }\\n                        竖屏也精彩数据.forEach(list => {\\n                            d.push({\\n                                title: list.title,\\n                                img: list.cover + \\\"@Referer=\\\",\\n                                url: list.link + lazy,\\n                                desc: list.subtitle + '\\\\n' + list.long_title,\\n                                col_type: 'movie_1_left_pic',\\n                                extra: {\\n                                    id: list.link,\\n                                    aid: list.aid,\\n                                    bvid: list.bvid,\\n                                    cid: list.cid,\\n                                    badge: list.badge\\n                                }\\n                            });\\n                        });\\n                        setHomeResult(d);\\n                    }, 竖屏也精彩数据, lazy)\\n                } catch (e) {\\n                    return 'toast://没有数据哦~'\\n                }\\n            } else if (input === '🔥精彩二创') {\\n                try {\\n                    精彩二创数据 = Data.section[2].episodes;\\n                    return $().rule((精彩二创数据, lazy) => {\\n                        d = [];\\n                        setPageTitle('🔥精彩二创');\\n                        if (精彩二创数据 == [] || 精彩二创数据 == '') {\\n                            d.push({\\n                                title: '‘‘’’<big><font color=\\\"red\\\">⭐该影片/视频没有二创作品哦~⭐</font></big>',\\n                                url: 'toast://都没有，，你点啥呀~',\\n                                desc: '敬请期待~',\\n                                col_type: 'text_center_1'\\n                            });\\n                        }\\n                        精彩二创数据.forEach(list => {\\n                            // 针对部分参数缺失的情况如凡人修仙传写的，，\\n                            if (list.aid == 0 || list.cid == 0) {\\n                                viedeoData = JSON.parse(fetch(\\\"https://api.bilibili.com/x/web-interface/view?aid=\\\" + list.link.split('av')[1], {\\n                                    headers: {\\n                                        \\\"User-Agent\\\": PC_UA,\\n                                        \\\"Referer\\\": 'https://www.bilibili.com/'\\n                                    },\\n                                    method: \\\"GET\\\"\\n                                })).data;\\n                                aid = viedeoData.aid;\\n                                bvid = viedeoData.bvid;\\n                                cid = viedeoData.cid;\\n                            } else {\\n                                aid = list.aid;\\n                                bvid = list.bvid;\\n                                cid = list.cid;\\n                            }\\n                            d.push({\\n                                title: list.title,\\n                                img: list.cover + \\\"@Referer=\\\",\\n                                url: list.link + lazy,\\n                                desc: list.subtitle + '\\\\n' + list.long_title,\\n                                col_type: 'movie_1_left_pic',\\n                                extra: {\\n                                    id: list.link,\\n                                    aid: aid,\\n                                    bvid: bvid,\\n                                    cid: cid,\\n                                    badge: list.badge\\n                                }\\n                            });\\n                        });\\n                        setHomeResult(d);\\n                    }, 精彩二创数据, lazy)\\n                } catch (e) {\\n                    return 'toast://没有数据哦~'\\n                }\\n            }\\n            return \\\"toast://正在进入\\\" + input + \\\"界面...\\\";\\n        })\\n    }),\\n    col_type: \\\"icon_5\\\",\\n    extra: {\\n        id: '精彩继续'\\n    }\\n});\\n// 显示模式更改模块\\nd.push({\\n    title: getItem('模式', '双边'),\\n    img: getItem('模式', '双边') == '列表' ? imgLink.列表 : imgLink.双边,\\n    url: $('#noLoading#').lazyRule(() => {\\n        显示的剧集列表 = JSON.parse(getMyVar('显示的剧集列表'),(key,value)=>{\\n            if (key === 'aid' || key === 'cid') {\\n                // 将大数字转换为BigInt\\n                return BigInt(value);\\n            }\\n            return value;\\n        });\\n        if (getItem('模式', '双边') == '列表') {\\n            显示的剧集列表.forEach(el => {\\n                updateItem(el.link, {\\n                    col_type: 'movie_2',\\n                });\\n            });\\n            setItem('模式', '双边')\\n        } else {\\n            显示的剧集列表.forEach(el => {\\n                updateItem(el.link, {\\n                    col_type: 'movie_1_left_pic',\\n                });\\n            });\\n            setItem('模式', '列表')\\n        }\\n        imgLink = storage0.getMyVar('图标');\\n        updateItem('显示模式', {\\n            title: getItem('模式', '双边'),\\n            img: getItem('模式', '双边') == '列表' ? imgLink.列表 : imgLink.双边,\\n        });\\n        return 'toast://已切换模式为:' + getItem('模式', '双边')\\n    }),\\n    col_type: 'icon_5',\\n    extra: {\\n        id: '显示模式'\\n    }\\n}, {\\n    col_type: 'line_blank',\\n});\\n// 选插模块——局部刷新版\\n来源 = 'bl';\\nputMyVar('简插', $.toString(() => {\\n    let titleArr = []\\n    setFile = readFile('hiker://files/rules/DuanNian/MyParse.json');\\n    try {\\n        eval('json=' + setFile);\\n    } catch (e) {\\n        log('Json解析发生了错误:' + e.message);\\n    }\\n    titleArr = json.title;\\n    let barry1 = ['✍️辅助'];\\n    let barry2 = ['📦️魔断'];\\n    let barry3 = ['🔍搜索'];\\n    titleArr = barry3.concat(titleArr);\\n    titleArr = barry2.concat(titleArr);\\n    titleArr = barry1.concat(titleArr);\\n    eval('op=json.settings.' + 来源);\\n    titleArr = titleArr.map((it) => {\\n        return it === op ? '👉' + it : it;\\n    });\\n    putMyVar('解析数组', titleArr);\\n    putMyVar('setFile', setFile);\\n}))\\neval(getMyVar('简插'));\\nd.push({\\n    title: '解析：🔘<font color=\\\"' + Color + '\\\">' + op + '</font>\\\\t\\\\t页码：<font color=\\\"' + Color + '\\\">' + ((getMyVar('分集起', '首页') == '首页') ? '首页' : (getMyVar('分集起') + '-' + getMyVar('分集终'))) + '</font>',\\n    url: $('#noLoading#').lazyRule((json, 来源, Color, op, 影片名称, 搜索模式, 调用名称) => {\\n        eval(getMyVar('简插'));\\n        return $(eval(getMyVar('解析数组')), 3).select((json, 来源, Color, op, 影片名称, 搜索模式, 调用名称) => {\\n            setFile = getMyVar('setFile');\\n            input = input.replace(/👉/g, '');\\n            if (input === '✍️辅助') {\\n                return $().rule(() => {\\n                    eval(JSON.parse(request('hiker://page/home?rule=配置助手')).rule);\\n                })\\n            } else if (input === '📦️魔断') {\\n                return \\\"hiker://page/Route?rule=MyFieldᴰⁿ&type=编辑#noHistory#\\\";\\n            } else if (input === '🔍搜索') {\\n                if (搜索模式 == '分组') {\\n                    return \\\"hiker://search?s=\\\" + 影片名称 + \\\"&group=\\\" + 调用名称;\\n                } else {\\n                    return \\\"hiker://search?s=\\\" + 影片名称 + \\\"&rule=\\\" + 调用名称;\\n                }\\n            }\\n            // 原先的配置\\n            originSettings = JSON.stringify(json.settings);\\n            // 修改配置\\n            eval('json.settings.' + 来源 + '=input;');\\n            setFile = setFile.replace(originSettings, JSON.stringify(json.settings));\\n            saveFile('hiker://files/rules/DuanNian/MyParse.json', setFile);\\n            // 刷新元素\\n            eval(getMyVar('简插'));\\n            updateItem('op', {\\n                title: '解析：🔘<font color=\\\"' + Color + '\\\">' + op + '</font>\\\\t\\\\t页码：<font color=\\\"' + Color + '\\\">' + ((getMyVar('分集起', '首页') == '首页') ? '首页' : (getMyVar('分集起') + '-' + getMyVar('分集终'))) + '</font>',\\n            });\\n            return \\\"toast://切换解析口为:\\\" + input;\\n        }, json, 来源, Color, op, 影片名称, 搜索模式, 调用名称)\\n    }, json, 来源, Color, op, 影片名称, 搜索模式, 调用名称),\\n    img: 'hiker://files/rules/cy/tubiao/bilibili.svg',\\n    col_type: \\\"avatar\\\",\\n    extra: {\\n        id: 'op'\\n    }\\n});\\n// 滚动剧集条栏\\n剧集长度 = 剧集列表.length;\\nif (剧集长度 > 每页集数) {\\n    putMyVar('刷新选集', $.toString(() => {\\n        putMyVar('分集起', start);\\n        putMyVar('分集终', end);\\n        eval(getMyVar('简插'));\\n        updateItem('op', {\\n            title: '解析：🔘<font color=\\\"' + Color + '\\\">' + op + '</font>\\\\t\\\\t页码：<font color=\\\"' + Color + '\\\">' + ((getMyVar('分集起', '首页') == '首页') ? '首页' : (getMyVar('分集起') + '-' + getMyVar('分集终'))) + '</font>',\\n        })\\n        // 删除\\n        显示的剧集列表 = JSON.parse(getMyVar('显示的剧集列表'),(key,value)=>{\\n            if (key === 'aid' || key === 'cid') {\\n                // 将大数字转换为BigInt\\n                return BigInt(value);\\n            }\\n            return value;\\n        });\\n        显示的剧集列表.forEach(el => {\\n            deleteItem(el.link);\\n        });\\n        // 添加\\n        lazy = getMyVar('lazy');\\n        剧集列表 = JSON.parse(getMyVar('剧集列表'),(key,value)=>{\\n            if (key === 'aid' || key === 'cid') {\\n                // 将大数字转换为BigInt\\n                return BigInt(value);\\n            }\\n            return value;\\n        });\\n        显示的剧集列表 = 剧集列表.slice(start - 1, end);\\n        newArray = [];\\n        index = 1;\\n        显示的剧集列表.forEach(list => {\\n            if (getItem('模式', '双边') == '列表') {\\n                newArray.push({\\n                    title: list.long_title,\\n                    img: list.cover + \\\"@Referer=\\\",\\n                    url: list.link + lazy,\\n                    desc: list.title.match(/[0-9]/) ? (list.badge + '第' + list.title + '话') : list.title,\\n                    col_type: 'movie_1_left_pic',\\n                    extra: {\\n                        id: list.link,\\n                        aid: list.aid,\\n                        bvid: list.bvid,\\n                        cid: list.cid,\\n                        badge: list.badge\\n                    }\\n                });\\n            } else {\\n                newArray.push({\\n                    title: list.long_title,\\n                    img: list.cover + \\\"@Referer=\\\",\\n                    url: list.link + lazy,\\n                    desc: list.title.match(/[0-9]/) ? (list.badge + '第' + list.title + '话') : list.title,\\n                    col_type: 'movie_2',\\n                    extra: {\\n                        id: list.link,\\n                        aid: list.aid,\\n                        bvid: list.bvid,\\n                        cid: list.cid,\\n                        badge: list.badge\\n                    }\\n                });\\n            }\\n            index += 1;\\n        });\\n        addItemAfter(getMyVar('末页'), newArray);\\n        putMyVar('显示的剧集列表', 显示的剧集列表);\\n    }));\\n    d.push({\\n        col_type: 'scroll_button',\\n        url: 'hiker://empty',\\n        title: '∷',\\n        extra: {\\n            id: '占位符',\\n        }\\n    })\\n    putMyVar('分集起', 1);\\n    putMyVar('分集终', 每页集数);\\n    putMyVar('剧集列表', 剧集列表);\\n    总页数 = Math.ceil(剧集长度 / 每页集数);\\n    start = 1;\\n    end = 每页集数;\\n    for (let page = 1; page <= 总页数; page++) {\\n        if (end > 剧集长度) {\\n            end = 剧集长度;\\n        }\\n        d.push({\\n            title: start + '-' + end,\\n            url: $('#noLoading##noHistory#').lazyRule((start, end, Color, 来源) => {\\n                eval(getMyVar('刷新选集'));\\n                return \\\"hiker://empty\\\";\\n            }, start, end, Color, 来源),\\n            col_type: 'scroll_button',\\n            extra: {\\n                id: start + '-' + end\\n            }\\n        });\\n        if (end < 剧集长度) {\\n            start += 每页集数;\\n            end += 每页集数;\\n        }\\n    }\\n    // 记录末页的id\\n    putMyVar('末页', start + '-' + end);\\n} else {\\n    putMyVar('分集起', 1);\\n    putMyVar('分集终', 剧集长度);\\n}\\n// 展示剧集:\\n显示的剧集列表 = 剧集列表.slice(0, getMyVar('分集终'));\\nputMyVar('显示的剧集列表', 显示的剧集列表);\\nindex = 1;\\n显示的剧集列表.forEach(list => {\\n    if (getItem('模式', '双边') == '列表') {\\n        d.push({\\n            title: list.long_title,\\n            img: list.cover + \\\"@Referer=\\\",\\n            url: list.link + lazy,\\n            desc: list.title.match(/[0-9]/) ? (list.badge + '第' + list.title + '话') : list.title,\\n            col_type: 'movie_1_left_pic',\\n            extra: {\\n                id: list.link,\\n                aid: list.aid,\\n                bvid: list.bvid,\\n                cid: list.cid,\\n                badge: list.badge\\n            }\\n        });\\n    } else {\\n        d.push({\\n            title: list.long_title,\\n            img: list.cover + \\\"@Referer=\\\",\\n            url: list.link + lazy,\\n            desc: list.title.match(/[0-9]/) ? (list.badge + '第' + list.title + '话') : list.title,\\n            col_type: 'movie_2',\\n            extra: {\\n                id: list.link,\\n                aid: list.aid,\\n                bvid: list.bvid,\\n                cid: list.cid,\\n                badge: list.badge\\n            }\\n        });\\n    }\\n    index += 1;\\n});\\nsetResult(d);\\n\"},{\"col_type\":\"movie_3\",\"name\":\"up主页\",\"path\":\"upHome\",\"rule\":\"js:\\nvar d = [];\\n// 预处理\\nputMyVar('upInfo', '关');\\nsetPageTitle(MY_PARAMS.title);\\nimgLink = storage0.getMyVar('图标');\\n// 防止反爬虫，从上一个页面传递数据——反爬虫严重\\nupMid = MY_PARAMS.mid + \\\"\\\";\\nupName = MY_PARAMS.title;\\nupFace = MY_PARAMS.face;\\nrelation = $.require(\\\"hiker://page/api\\\").userMapping(upMid);\\n// 头像栏\\nd.push({\\n    title: '<font color=\\\"blue\\\">' + upName + '</font>',\\n    url: $('#noLoading#').lazyRule((upMid) => {\\n        if (getMyVar('upInfo', '关') == '开') {\\n            deleteItem('upInfo');\\n            putMyVar('upInfo', '关');\\n        } else {\\n            try {\\n                // 用户基本信息\\n                queryJson = {\\n                    mid: upMid,\\n                    token: '',\\n                    platform: 'web',\\n                    web_location: 1550101\\n                }\\n                parms = $.require(\\\"hiker://page/api\\\").getWbiEnc(queryJson);\\n                infoLink = 'https://api.bilibili.com/x/space/wbi/acc/info?' + parms;\\n                upData = JSON.parse(fetch(infoLink, {\\n                    headers: {\\n                        \\\"User-Agent\\\": PC_UA,\\n                        \\\"Referer\\\": \\\"https://www.bilibili.com/\\\",\\n                        \\\"Cookie\\\": cookie=JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie\\n                    }\\n                })).data;\\n                upName = upData.name;\\n                upSex = upData.sex;\\n                upSign = upData.sign;\\n                upBirthday = upData.birthday;\\n                try {\\n                    upSchool = upData.school.name;\\n                } catch (e) {\\n                    upSchool = '';\\n                }\\n                try {\\n                    upIdentification = upData.official.title;\\n                } catch (e) {\\n                    upIdentification = '';\\n                }\\n                addItemAfter('currentUp', {\\n                    title: 'up:' + upName + '\\\\nmid:' + upMid + '\\\\n性别:' + upSex + '\\\\n生日:' + (upBirthday == '' ? '未填写' : upBirthday) + '\\\\n' + (upSchool == '' ? '' : '学校:' + upSchool + '\\\\n') + (upSign == '' ? '\\\\n' : upSign + '\\\\n') + (upIdentification == '' ? '' : '认证:'),\\n                    url: 'hiker://empty',\\n                    col_type: 'long_text',\\n                    extra: {\\n                        id: 'upInfo'\\n                    }\\n                });\\n            } catch (e) {\\n                addItemAfter('currentUp', {\\n                    title: '好像出了点意外？什么都木有呢~',\\n                    url: 'hiker://empty',\\n                    col_type: 'long_text',\\n                    extra: {\\n                        id: 'upInfo'\\n                    }\\n                });\\n            }\\n            putMyVar('upInfo', '开');\\n        }\\n        return 'toast://信息折叠:' + getMyVar('upInfo', '开')\\n    }, upMid),\\n    img: upFace + \\\"@Referer=\\\",\\n    col_type: \\\"avatar\\\",\\n    extra: {\\n        id: 'currentUp'\\n    }\\n}, {\\n    col_type: 'line'\\n});\\n// 公告\\nnoticeText = JSON.parse(fetch('https://api.bilibili.com/x/space/notice?mid=' + upMid + '&jsonp=jsonp', {\\n    headers: {\\n        \\\"User-Agent\\\": PC_UA,\\n        \\\"Referer\\\": \\\"https://www.bilibili.com/\\\",\\n        \\\"Cookie\\\": cookie=JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie\\n    }\\n})).data;\\nif (noticeText != '') {\\n    d.push({\\n        title: '公告',\\n        url: $().rule((noticeText) => {\\n            var d = [];\\n            d.push({\\n                title: '公告：' + '\\\\n\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t' + noticeText,\\n                col_type: 'long_text'\\n            });\\n            setHomeResult(d);\\n        }, noticeText),\\n        desc: noticeText == '' ? '暂无公告' : noticeText,\\n        col_type: 'text_1',\\n    });\\n}\\nd.push({\\n    col_type: 'line'\\n}, {\\n    title: relation,\\n    img: relation == '未关注' ? imgLink.添加关注 : imgLink.已关注,\\n    url: $('#noLoading##noHistory#').lazyRule((upMid) => {\\n        return $.require(\\\"hiker://page/api\\\").changeUserRelation(upMid, 11)\\n    }, upMid),\\n    col_type: \\\"icon_small_4\\\",\\n    extra: {\\n        id: 'relation'\\n    }\\n}, {\\n    title: '动态',\\n    img: imgLink.动态,\\n    url: $('#noLoading##noHistory#').lazyRule((upMid) => {\\n        return $('hiker://empty?p=fypage').rule((upMid) => {\\n            let d = [];\\n            latenews = $.require(\\\"hiker://page/api\\\").getDynamicData('upSpace', upMid);\\n            eval($.require(\\\"hiker://page/api\\\").showDynamicData());\\n            setResult(d);\\n        }, upMid)\\n    }, upMid),\\n    col_type: \\\"icon_small_4\\\",\\n}, {\\n    title: '专栏',\\n    img: imgLink.专栏,\\n    url: \\\"hiker://page/acticleList?p=fypage\\\",\\n    col_type: \\\"icon_small_4\\\",\\n    extra: {\\n        mid: upMid\\n    }\\n})\\n// 用户视频-合集、系列\\nupVideo = JSON.parse(fetch('https://api.bilibili.com/x/polymer/space/seasons_series_list?mid=' + upMid + '&page_num=1&page_size=10', {\\n    headers: {\\n        \\\"User-Agent\\\": PC_UA,\\n        \\\"Referer\\\": \\\"https://www.bilibili.com/\\\"\\n    }\\n})).data.items_lists;\\n// 视频合集、系列\\ntry {\\n    upVideo.seasons_list.forEach(list => {\\n        season_id = list.meta.season_id;\\n        // 标题-跳转更多\\n        d.push({\\n            title: '<font color=\\\"#33cccc\\\">' + list.meta.name.substring(0, 30) + '</font>\\\\t\\\\t<font color=\\\"red\\\">' + list.meta.total + '</font>\\t➮',\\n            img: imgLink.合集文件夹,\\n            // img: list.meta.cover+'@Referer=',\\n            col_type: 'avatar',\\n            url: $('#noLoading##noHistory#').lazyRule((upMid, season_id) => {\\n                return $('hiker://empty?fypage').rule((upMid, season_id) => {\\n                    var d = [];\\n                    let u = 'https://api.bilibili.com/x/polymer/space/seasons_archives_list?mid=' + upMid + '&season_id=' + season_id + '&sort_reverse=false&page_num=' + MY_PAGE + '&page_size=30';\\n                    Video = JSON.parse(fetch(u, {\\n                        headers: {\\n                            \\\"User-Agent\\\": PC_UA,\\n                            \\\"Referer\\\": \\\"https://www.bilibili.com/\\\"\\n                        }\\n                    })).data;\\n                    maxPage = Math.ceil(Video.page.total / Video.page.page_size);\\n                    if (MY_PAGE <= maxPage) {\\n                        d.push({\\n                            title: '当前:第' + Video.page.page_num + '页\\\\t\\\\t\\\\t共有' + maxPage + '页,' + Video.page.total + '条数据',\\n                            url: \\\"hiker://empty\\\",\\n                            col_type: \\\"text_center_1\\\",\\n                        });\\n                        Video.archives.forEach(list => {\\n                            d.push({\\n                                title: list.title,\\n                                img: list.pic + '@Referer=',\\n                                desc: '播放量：' + list.stat.view,\\n                                col_type: 'movie_1_left_pic',\\n                                url: \\\"hiker://page/video\\\",\\n                                extra: {\\n                                    aid: list.aid\\n                                }\\n                            });\\n                        });\\n                    }\\n                    setHomeResult(d);\\n                }, upMid, season_id)\\n            }, upMid, season_id)\\n        });\\n        if (list.archives === undefined) {\\n            log(list.meta.name + '为空');\\n        } else {\\n            if (list.archives.length < 2) {\\n                list.archives.forEach(list => {\\n                    d.push({\\n                        title: list.title,\\n                        img: list.pic + '@Referer=',\\n                        desc: '播放量：' + list.stat.view,\\n                        col_type: 'movie_1_left_pic',\\n                        url: \\\"hiker://page/video\\\",\\n                        extra: {\\n                            aid: list.aid\\n                        }\\n                    });\\n                });\\n            } else if (list.archives.length == 0) {\\n                d.push({\\n                    title: \\\"好家伙，这家伙没有合集视频！\\\",\\n                    desc: \\\"要不去点击全部视频看看~\\\",\\n                    col_type: 'text_center_1',\\n                    url: \\\"hiker://empty\\\",\\n                });\\n            } else {\\n                for (let i = 0; i < 2; i++) {\\n                    d.push({\\n                        title: list.archives[i].title,\\n                        img: list.archives[i].pic + '@Referer=',\\n                        desc: '播放量：' + list.archives[i].stat.view,\\n                        col_type: 'movie_1_left_pic',\\n                        url: \\\"hiker://page/video\\\",\\n                        extra: {\\n                            aid: list.archives[i].aid\\n                        }\\n                    });\\n                }\\n            }\\n        }\\n    });\\n} catch (e) {\\n    d.push({\\n        title: '合集为空',\\n        url: 'hiker://empty',\\n        desc: 'Sorry,没有数据呢~',\\n        col_type: 'text_center_1',\\n    });\\n}\\ntry {\\n    upVideo.series_list.forEach(list => {\\n        series_id = list.meta.series_id;\\n        // 标题-跳转更多\\n        d.push({\\n            title: '<font color=\\\"#33cccc\\\">' + list.meta.name.substring(0, 30) + '</font>\\\\t\\\\t<font color=\\\"red\\\">' + list.meta.total + '</font>\\t➮',\\n            img: imgLink.合集文件夹,\\n            // img: list.meta.cover+'@Referer=',\\n            col_type: 'avatar',\\n            url: $('#noLoading##noHistory#').lazyRule((upMid, series_id) => {\\n                return $('hiker://empty?fypage').rule((upMid, series_id) => {\\n                    var d = [];\\n                    let u = 'https://api.bilibili.com/x/series/archives?mid=' + upMid + '&series_id=' + series_id + '&only_normal=true&sort=desc&pn=' + MY_PAGE + '&ps=30';\\n                    Video = JSON.parse(fetch(u, {\\n                        headers: {\\n                            \\\"User-Agent\\\": PC_UA,\\n                            \\\"Referer\\\": \\\"https://www.bilibili.com/\\\"\\n                        }\\n                    })).data;\\n                    maxPage = Math.ceil(Video.page.total / Video.page.size);\\n                    if (MY_PAGE <= maxPage) {\\n                        d.push({\\n                            title: '当前:第' + Video.page.num + '页\\\\t\\\\t\\\\t共有' + maxPage + '页,' + Video.page.total + '条数据',\\n                            url: \\\"hiker://empty\\\",\\n                            col_type: \\\"text_center_1\\\",\\n                        });\\n                        Video.archives.forEach(list => {\\n                            d.push({\\n                                title: list.title,\\n                                img: list.pic + '@Referer=',\\n                                desc: '播放量：' + list.stat.view,\\n                                col_type: 'movie_1_left_pic',\\n                                url: \\\"hiker://page/video\\\",\\n                                extra: {\\n                                    aid: list.aid\\n                                }\\n                            });\\n                        });\\n                    }\\n                    setHomeResult(d);\\n                }, upMid, series_id)\\n            }, upMid, series_id)\\n        });\\n        if (list.archives === undefined) {\\n            log(list.meta.name + '为空');\\n        } else {\\n            if (list.archives.length < 2) {\\n                list.archives.forEach(list => {\\n                    d.push({\\n                        title: list.title,\\n                        img: list.pic + '@Referer=',\\n                        desc: '播放量：' + list.stat.view,\\n                        col_type: 'movie_1_left_pic',\\n                        url: \\\"hiker://page/video\\\",\\n                        extra: {\\n                            aid: list.aid\\n                        }\\n                    });\\n                });\\n            } else if (list.archives.length == 0) {\\n                d.push({\\n                    title: \\\"好家伙，这家伙没有合集视频！\\\",\\n                    desc: \\\"要不去点击全部视频看看~\\\",\\n                    col_type: 'text_center_1',\\n                    url: \\\"hiker://empty\\\",\\n                });\\n            } else {\\n                for (let i = 0; i < 2; i++) {\\n                    d.push({\\n                        title: list.archives[i].title,\\n                        img: list.archives[i].pic + '@Referer=',\\n                        desc: '播放量：' + list.archives[i].stat.view,\\n                        col_type: 'movie_1_left_pic',\\n                        url: \\\"hiker://page/video\\\",\\n                        extra: {\\n                            aid: list.archives[i].aid\\n                        }\\n                    });\\n                }\\n            }\\n        }\\n    });\\n} catch (e) {\\n    d.push({\\n        title: '系列为空',\\n        url: 'hiker://empty',\\n        desc: 'Sorry,没有数据呢~',\\n        col_type: 'text_center_1',\\n    });\\n}\\n// up投稿\\nd.push({\\n    title: 'TA的视频,点击展开全部',\\n    col_type: 'text_center_1',\\n    url: $('#noLoading##noHistory#').lazyRule((upMid) => {\\n        return $().rule((upMid) => {\\n            var d = [];\\n            try {\\n                queryJson = {\\n                    mid: upMid,\\n                    ps: 30,\\n                    tid: getMyVar('_tid', '0'),\\n                    special_type: '',\\n                    pn: getMyVar('_page', '1'),\\n                    keyword: '',\\n                    order: 'pubdate',\\n                    platform: 'web',\\n                    // web_location: 1550101,\\n                    order_avoided: true\\n                }\\n                parms = $.require(\\\"hiker://page/api\\\").getWbiEnc(queryJson);\\n                dataLink = 'https://api.bilibili.com/x/space/wbi/arc/search?' + parms;\\n                upVideoData = JSON.parse(fetch(dataLink, {\\n                    headers: {\\n                        \\\"User-Agent\\\": PC_UA,\\n                        \\\"Referer\\\": \\\"https://www.bilibili.com/\\\",\\n                        \\\"Cookie\\\": cookie=JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie\\n                    }\\n                })).data;\\n                tlist = upVideoData.list.tlist;\\n                vlist = upVideoData.list.vlist;\\n                // 分类和页码\\n                d.push({\\n                    title: getMyVar('_tid', '0') == 0 ? '‘‘’’<font color=\\\"red\\\">全部</font>' : '全部',\\n                    url: $('#noLoading##noHistory#').lazyRule(() => {\\n                        putMyVar('_tid', (0 + \\\"\\\"));\\n                        putMyVar('_page', (1 + \\\"\\\"));\\n                        refreshPage(true);\\n                        return \\\"hiker://empty\\\";\\n                    }),\\n                    col_type: 'scroll_button'\\n                });\\n                for (item in tlist) {\\n                    d.push({\\n                        title: (tlist[item].tid + \\\"\\\") == getMyVar('_tid', '0') ? '‘‘’’<font color=\\\"red\\\">' + (tlist[item].name + `(${tlist[item].count})`) + '</font>' : (tlist[item].name + `(${tlist[item].count})`),\\n                        url: $('#noLoading##noHistory#').lazyRule((tid) => {\\n                            putMyVar('_tid', (tid + \\\"\\\"));\\n                            putMyVar('_page', (1 + \\\"\\\"));\\n                            refreshPage(true);\\n                            return \\\"hiker://empty\\\";\\n                        }, tlist[item].tid),\\n                        col_type: 'scroll_button'\\n                    });\\n                }\\n                d.push({\\n                    col_type: 'blank_block',\\n                });\\n                maxPage = Math.ceil(upVideoData.page.count / upVideoData.page.ps);\\n                for (let page = 1; page <= maxPage; page++) {\\n                    d.push({\\n                        title: (page + \\\"\\\") == getMyVar('_page', '1') ? '‘‘’’<font color=\\\"red\\\">' + (page + \\\"\\\") + '</font>' : (page + \\\"\\\"),\\n                        url: $('#noLoading##noHistory#').lazyRule((page) => {\\n                            putMyVar('_page', (page + \\\"\\\"));\\n                            refreshPage(true);\\n                            return \\\"hiker://empty\\\";\\n                        }, page),\\n                        col_type: 'scroll_button',\\n                    });\\n                }\\n                // 平铺视频\\n                vlist.forEach(item => {\\n                    pubtime = $.require(\\\"hiker://page/api\\\").timeConvert(item.created);\\n                    d.push({\\n                        title: item.title,\\n                        img: item.pic + '@Referer=',\\n                        desc: '播放量：' + item.play + '\\\\n' + pubtime,\\n                        col_type: 'movie_1_left_pic',\\n                        url: \\\"hiker://page/video\\\",\\n                        extra: {\\n                            aid: item.aid\\n                        }\\n                    });\\n                });\\n            } catch (e) {\\n                d.push({\\n                    title: '页面走丢了...',\\n                    img: 'https://i0.hdslb.com/bfs/general/f7b667011a46615732c701f4bb1d07f793f8d1df.png@Referer=',\\n                    url: 'hiker://empty',\\n                    desc: '太频繁了！稍后再试~',\\n                    col_type: \\\"pic_1\\\"\\n                });\\n            }\\n            setHomeResult(d);\\n        }, upMid)\\n    }, upMid)\\n});\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"up搜索\",\"path\":\"upSearch\",\"rule\":\"js:\\nseaword = MY_PARAMS.seaword;\\nvar d = [];\\nresultData=$.require(\\\"hiker://page/api\\\").getSearchRes('bili_user',seaword,MY_PAGE,36);\\nif (MY_PAGE <= resultData.numPages) {\\n    d.push({\\n        title: '当前:第' + resultData.page + '页\\\\t\\\\t\\\\t共有' + resultData.numPages + '页,' + resultData.numResults + '条数据',\\n        url: \\\"hiker://empty\\\",\\n        col_type: \\\"text_center_1\\\",\\n    });\\n    resultData.result.forEach(list => {\\n        d.push({\\n            title: \\\"<big><font color='blue'>\\\" + list.uname + \\\"</font></big><small>\\\" + list.usign + \\\"</small>\\\",\\n            img: 'https://' + list.upic + \\\"@Referer=\\\",\\n            col_type: 'avatar',\\n            url: \\\"hiker://page/upHome\\\",\\n            extra: {\\n                mid: list.mid,\\n                title: list.uname,\\n                face: 'https://' + list.upic\\n            }\\n        });\\n    });\\n}\\nsetSearchResult(d);\\n\"},{\"col_type\":\"movie_3\",\"name\":\"video搜索\",\"path\":\"videoSearch\",\"rule\":\"js:\\nseaword = MY_PARAMS.seaword;\\nvar d = [];\\nvar resultData=$.require(\\\"hiker://page/api\\\").getSearchRes('video',seaword,MY_PAGE,42);\\nvar {timeConvert}=$.require(\\\"hiker://page/api\\\");\\nif (MY_PAGE <= resultData.numPages) {\\n    d.push({\\n        title: '当前:第' + resultData.page + '页\\\\t\\\\t\\\\t共有' + resultData.numPages + '页,' + resultData.numResults + '条数据',\\n        url: \\\"hiker://empty\\\",\\n        col_type: \\\"text_center_1\\\",\\n    });\\n    resultData.result.forEach(list => {\\n        // title=list.title.replace('<em class=\\\\\\\"keyword\\\\\\\">','<font color=\\\"red\\\">').replace('</em>','</font>')\\n        title = list.title.replace(/<em class=\\\\\\\"keyword\\\\\\\">/g, '').replace(/<\\\\/em>/g, '')\\n        pbtime=timeConvert(list.pubdate);\\n        d.push({\\n            title: title,\\n            img: 'https://' + list.pic + \\\"@Referer=\\\",\\n            desc: '““””<small><small><font color=\\\"grey\\\">播放量:'+list.play+'\\\\t\\\\t\\\\t弹幕:'+list.danmaku+'\\\\t\\\\t\\\\t喜欢:'+list.like+'\\\\n发布时间:'+pbtime+'</font></small></small>',\\n            col_type: 'movie_1_left_pic',\\n            url: \\\"hiker://page/video\\\",\\n            extra: {\\n                // 视频标识\\n                aid: list.aid,\\n                bvid:list.bvid,\\n                title: title\\n            }\\n        });\\n    });\\n}\\nsetSearchResult(d);\\n\"},{\"col_type\":\"movie_1_left_pic\",\"name\":\"推送\",\"path\":\"feed\",\"rule\":\"$.require(\\\"hiker://page/api\\\").getFeed().forEach(item => {\\n\\n    d.push({\\n\\n        title: item.title,\\n\\n        img: item.pic+'@Referer=',\\n\\n        desc: 'up:' + item.owner.name + '\\\\n' + item.stat.view + \\\"播放※\\\" + item.stat.like + \\\"点赞\\\",\\n\\n        url: \\\"hiker://page/video\\\",\\n\\n        col_type: 'movie_1_left_pic',\\n\\n        extra: {\\n\\n            // id其实是aid\\n\\n            aid: item.id,\\n\\n            cid: item.cid,\\n\\n        }\\n\\n    })\\n\\n})\\n\\n\\n\"},{\"col_type\":\"text_1\",\"name\":\"API\",\"path\":\"api\",\"rule\":\"// part1:聚合函数----------------\\n// 登录验证\\n$.exports.isLoggedIn = function () {\\n    if (fileExist(\\\"hiker://files/rules/cy/bili.txt\\\")) {\\n        biliData = JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\"));\\n        if (biliData.userList.length == 0) {\\n            return JSON.stringify({\\n                \\\"userName\\\": '未登录',\\n                \\\"userMid\\\": '',\\n                \\\"userFace\\\": '',\\n                \\\"type\\\": false\\n            })\\n        }\\n        currentUser = biliData.userList[0];\\n        var cookie = currentUser.cookie;\\n        let userinfo = JSON.parse(fetch(\\\"https://api.bilibili.com/x/web-interface/nav\\\", {\\n            headers: {\\n                \\\"Cookie\\\": cookie\\n            }\\n        })).data;\\n        if (userinfo.isLogin === false) {\\n            return JSON.stringify({\\n                \\\"userName\\\": '未登录',\\n                \\\"userMid\\\": '',\\n                \\\"userFace\\\": '',\\n                \\\"type\\\": false\\n            })\\n        } else {\\n            currentUser.userName = userinfo.uname;\\n            currentUser.userMid = userinfo.mid;\\n            // 1：会员开通；0：未开通\\n            currentUser.vipStatus = userinfo.vipStatus;\\n            currentUser.face = userinfo.face + \\\"@Referer=\\\";\\n            saveFile('hiker://files/rules/cy/bili.txt', JSON.stringify(biliData));\\n            // return true;\\n            return JSON.stringify({\\n                \\\"userName\\\": currentUser.userName,\\n                \\\"userMid\\\": currentUser.userMid,\\n                \\\"userFace\\\": currentUser.face,\\n                \\\"type\\\": true\\n            });\\n        }\\n    } else {\\n        return JSON.stringify({\\n            \\\"userName\\\": '未登录',\\n            \\\"userMid\\\": '',\\n            \\\"userFace\\\": '',\\n            \\\"type\\\": false\\n        });\\n    }\\n}\\n// 哔哩视频解析：获取播放地址+提交播放记录\\n$.exports.biliLazy = function (id, cid, qn) {\\n    // 重置原生弹幕统一弹幕大小、修改步长\\n    function overrideSave(dm) {\\n        var danmuData = request(dm);\\n        // 字体大小、弹幕步长\\n        var danmuSetting = JSON.parse(readFile('hiker://files/dm盒子/settings.json'));\\n        var size = danmuSetting.fontSize;\\n        var step = danmuSetting.step;\\n        var data = '';\\n        td = pdfa(danmuData, 'i&&d');\\n        for (let i = 0; i < td.length; i += step) {\\n            timepoint = pdfh(td[i], 'd&&p').split(\\\",\\\")[0];\\n            ct = pdfh(td[i], 'd&&p').split(\\\",\\\")[1];\\n            color = pdfh(td[i], 'd&&p').split(\\\",\\\")[3];\\n            // 弹幕内容\\n            content = pdfh(td[i], 'd&&Text');\\n            if (content.indexOf('<') != -1 || content.indexOf('>') != -1 || content.indexOf('&') != -1 || content.indexOf('\\\\u0000') != -1 || content.indexOf('\\\\b') != -1) {\\n                continue;\\n            }\\n            tempdata = `<d p=\\\"${Math.round(timepoint)},${ct},${size},${color},0\\\">${content}</d>\\\\n`;\\n            data += tempdata;\\n        }\\n        danmustr = `<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\\\n<i>\\\\n${data}</i>`;\\n        saveFile(dm, danmustr);\\n    }\\n    // 判断是否重写\\n    var dm = 'https://comment.bilibili.com/' + cid + '.xml';\\n    if (getItem('isOverrideSave', 'false') == 'true') {\\n        file = 'https://comment.bilibili.com/' + cid + '.xml';\\n        dm = 'hiker://files/cache/danmu/' + 'bili_from_' + getPageTitle() + '.xml';\\n        downloadFile(file, dm);\\n        overrideSave(dm);\\n    }\\n    var data = $.require(\\\"hiker://page/api\\\").getUrl(id, cid, qn);\\n    // 提交历史记录\\n    $.require(\\\"hiker://page/api\\\").reportProcess(id, cid);\\n    // qualityNum=dash.audio.length;不需要了，找到了更好的判断方法，虽然我并不知道这些参数的含义是什么\\n    videoList = [];\\n    audioList = [];\\n    nameList = [];\\n    headers = [];\\n    try {\\n        data.audio.forEach(item => {\\n            audioList.push(item.baseUrl);\\n            headers.push({\\n                \\\"Referer\\\": \\\"https://www.bilibili.com\\\",\\n                \\\"User-Agent\\\": PC_UA\\n            });\\n        });\\n        data.video.forEach(item => {\\n            if (item.codecid == 7) {\\n                videoList.push(item.baseUrl + \\\"#isVideo=true#\\\");\\n                if (item.id == 126) {\\n                    nameList.push('杜比视界');\\n                } else if (item.id == 125) {\\n                    nameList.push('HDR 真彩色');\\n                } else if (item.id == 120) {\\n                    nameList.push('4K超清');\\n                } else if (item.id == 116) {\\n                    nameList.push('1080P60高帧率');\\n                } else if (item.id == 112) {\\n                    nameList.push('1080P+高码率');\\n                } else if (item.id == 80) {\\n                    nameList.push('1080P高清');\\n                } else if (item.id == 74) {\\n                    nameList.push('720P60高帧率');\\n                } else if (item.id == 64) {\\n                    nameList.push('720P高清');\\n                } else if (item.id == 32) {\\n                    nameList.push('480P清晰');\\n                } else if (item.id == 16) {\\n                    nameList.push('360P流畅');\\n                } else if (item.id == 6) {\\n                    nameList.push('240P极速');\\n                }\\n            }\\n        });\\n        // 保持长度一致\\n        while (audioList.length < videoList.length) {\\n            // 复制 audioList 中最后一个元素并追加到数组末尾\\n            audioList.push(audioList[audioList.length - 1]);\\n            // 复制 headers 中最后一个元素并追加到数组末尾\\n            headers.push(headers[headers.length - 1]);\\n        }\\n        return JSON.stringify({\\n            urls: videoList,\\n            audioUrls: audioList,\\n            headers: headers,\\n            names: nameList,\\n            danmu: dm\\n        })\\n    } catch (e) {\\n        log(\\\"正常解释失败，进行最后尝试:\\\");\\n        return JSON.stringify({\\n            urls: [data.durl[0].url + \\\"#isVideo=true#\\\"],\\n            names: [data.quality + \\\"\\\"],\\n            danmu: dm,\\n            headers: [{\\n                \\\"Referer\\\": \\\"https://www.bilibili.com\\\",\\n                \\\"User-Agent\\\": PC_UA\\n            }]\\n        })\\n    }\\n}\\n// 稍后在看——总操作判断\\n$.exports.judgeToview = function (aid) {\\n    selection = ['添加', '移除'];\\n    return $(selection, 1).select((aid) => {\\n        if (input == '添加') {\\n            res = $.require(\\\"hiker://page/api\\\").addToview(aid);\\n            if (res == 0) {\\n                return \\\"toast://添加成功\\\"\\n            } else if (res == -101) {\\n                return \\\"toast://账号未登录\\\"\\n            } else if (res == -111) {\\n                return \\\"toast://csrf校验失败\\\"\\n            } else if (res == -400) {\\n                return \\\"toast://请求错误\\\"\\n            } else if (res == 90001) {\\n                return \\\"toast://列表已满\\\"\\n            } else if (res == 90003) {\\n                return \\\"toast://稿件已经被删除\\\"\\n            } else {\\n                return \\\"toast://未知错误\\\"\\n            }\\n        } else {\\n            res = $.require(\\\"hiker://page/api\\\").delToview(aid);\\n            if (res == 0) {\\n                return \\\"toast://移除成功\\\"\\n            } else if (res == -101) {\\n                return \\\"toast://账号未登录\\\"\\n            } else if (res == -111) {\\n                return \\\"toast://csrf校验失败\\\"\\n            } else if (res == -400) {\\n                return \\\"toast://请求错误\\\"\\n            } else {\\n                return \\\"toast://未知错误\\\"\\n            }\\n        }\\n    }, aid)\\n}\\n// 操作用户关系\\n$.exports.changeUserRelation = function (mid, re_src) {\\n    selection = ['关注', '取关', '悄悄关注', '取消悄悄关注', '拉黑', '取消拉黑', '踢出粉丝', '移动分组'];\\n    return $(selection, 2).select((mid, re_src) => {\\n        if (input == '移动分组') {\\n            beforeTagids = [];\\n            groups = $.require(\\\"hiker://page/api\\\").getUserGroup(mid);\\n            if (JSON.stringify(groups) == '{}') {\\n                beforeTagids.push(0);\\n            } else {\\n                for (var prop in groups) {\\n                    beforeTagids.push(parseInt(prop));\\n                }\\n            }\\n            // 获取我的分组\\n            focusGroupList = [];\\n            $.require(\\\"hiker://page/api\\\").getMyAttentionGroupList().forEach(list => {\\n                focusGroupList.push(list.name + ' ' + list.tagid);\\n            });\\n            return $(focusGroupList, 1).select((beforeTagids, mid) => {\\n                afterTagids = [];\\n                afterTagids.push(parseInt(input.split(' ')[1]));\\n                fids = [];\\n                fids.push(Number(mid));\\n                res = $.require(\\\"hiker://page/api\\\").moveUsers(beforeTagids, afterTagids, fids);\\n                if (res == 0) {\\n                    return \\\"toast://移动用户到\\\" + input.split(' ')[0] + \\\"分组成功\\\"\\n                } else if (res == -101) {\\n                    return \\\"toast://账号未登录\\\"\\n                } else if (res == -111) {\\n                    return \\\"toast://csrf校验失败\\\"\\n                } else if (res == -400) {\\n                    return \\\"toast://请求错误\\\"\\n                } else if (res == 22104) {\\n                    return \\\"toast://无权限\\\"\\n                } else if (res == 22105) {\\n                    return \\\"toast://未关注\\\"\\n                } else {\\n                    return \\\"toast://未知错误\\\"\\n                }\\n            }, beforeTagids, mid);\\n        } else {\\n            if (input == '关注') {\\n                var act = 1;\\n            } else if (input == '取关') {\\n                var act = 2;\\n            } else if (input == '悄悄关注') {\\n                var act = 3;\\n            } else if (input == '取消悄悄关注') {\\n                var act = 4;\\n            } else if (input == '拉黑') {\\n                var act = 5;\\n            } else if (input == '取消拉黑') {\\n                var act = 6;\\n            } else if (input == '踢出粉丝') {\\n                var act = 7;\\n            }\\n            res = $.require(\\\"hiker://page/api\\\").addAttention(mid, act, re_src);\\n            relation = $.require(\\\"hiker://page/api\\\").userMapping(mid);\\n            updateItem('relation', {\\n                title: relation,\\n                img: relation == '未关注' ? storage0.getMyVar('图标').添加关注 : storage0.getMyVar('图标').已关注\\n            });\\n            if (res == 0) {\\n                return \\\"toast://\\\" + input + \\\"成功\\\"\\n            } else if (res == -101) {\\n                return \\\"toast://账号未登录\\\"\\n            } else if (res == -111) {\\n                return \\\"toast://csrf校验失败\\\"\\n            } else if (res == -400) {\\n                return \\\"toast://请求错误\\\"\\n            } else if (res == 22001) {\\n                return \\\"toast://不能对自己进行此操作\\\"\\n            } else if (res == 22003) {\\n                return \\\"toast://用户位于黑名单\\\"\\n            } else {\\n                return \\\"toast://未知错误\\\"\\n            }\\n        }\\n    }, mid, re_src)\\n}\\n// 映射用户关系\\n$.exports.userMapping = function (mid) {\\n    relationRes = $.require(\\\"hiker://page/api\\\").getRelation(mid);\\n    if (relationRes.relation.attribute == 0) {\\n        relation = '未关注'\\n    } else if (relationRes.relation.attribute == 1) {\\n        relation = '悄悄关注'\\n    } else if (relationRes.relation.attribute == 2) {\\n        relation = '已关注'\\n    } else if (relationRes.relation.attribute == 6) {\\n        relation = '已互粉'\\n    } else if (relationRes.relation.attribute == 128) {\\n        relation = '已拉黑'\\n    }\\n    return relation;\\n}\\n// 点赞操作逻辑\\n$.exports.likeLogic = function (aid) {\\n    hasLike = $.require(\\\"hiker://page/api\\\").hasLike(aid);\\n    if (hasLike == 0) {\\n        res = $.require(\\\"hiker://page/api\\\").setLike(aid, 1);\\n        if (res == 0) {\\n            like = JSON.parse(fetch(\\\"https://api.bilibili.com/x/web-interface/view?aid=\\\" + aid)).data.stat.like;\\n            updateItem('setLike', {\\n                title: (like + 1) + '',\\n                img: storage0.getMyVar('图标').已点赞\\n            });\\n            return \\\"toast://点赞成功\\\";\\n        } else {\\n            return \\\"toast://点赞出错了~\\\";\\n        }\\n    } else {\\n        res = $.require(\\\"hiker://page/api\\\").setLike(aid, 2);\\n        if (res == 0) {\\n            like = JSON.parse(fetch(\\\"https://api.bilibili.com/x/web-interface/view?aid=\\\" + aid)).data.stat.like;\\n            updateItem('setLike', {\\n                title: (like - 1) + '',\\n                img: storage0.getMyVar('图标').未点赞\\n            });\\n            return \\\"toast://取消点赞成功\\\";\\n        } else {\\n            return \\\"toast://取消点赞出错了~\\\";\\n        }\\n    }\\n}\\n// 收藏操作逻辑\\n$.exports.favourLogic = function (aid, mid) {\\n    hasFavour = $.require(\\\"hiker://page/api\\\").hasFavour(aid);\\n    if (hasFavour) {\\n        // 移出收藏\\n        favourIdList = $.require(\\\"hiker://page/api\\\").getFavourIdList(aid, mid);\\n        res = $.require(\\\"hiker://page/api\\\").setFavour(aid, '', favourIdList);\\n        if (res == 0) {\\n            like = JSON.parse(fetch(\\\"https://api.bilibili.com/x/web-interface/view?aid=\\\" + aid)).data.stat.favorite;\\n            updateItem('setFavour', {\\n                title: (like - 1) + '',\\n                img: storage0.getMyVar('图标').未收藏\\n            });\\n            return \\\"toast://取消收藏成功\\\";\\n        } else {\\n            return \\\"toast://取消收藏出错了~\\\";\\n        }\\n    } else {\\n        // 选择收藏\\n        res = $.require(\\\"hiker://page/api\\\").getCollectionGroupList()[0].mediaListResponse.list;\\n        GroupList = [];\\n        res.forEach(item => {\\n            GroupList.push(item.title + ' ' + item.id);\\n        });\\n        return $(GroupList, 1).select((aid) => {\\n            selectId = parseInt(input.split(' ')[1])\\n            res = $.require(\\\"hiker://page/api\\\").setFavour(aid, selectId, '');\\n            if (res == 0) {\\n                like = JSON.parse(fetch(\\\"https://api.bilibili.com/x/web-interface/view?aid=\\\" + aid)).data.stat.favorite;\\n                updateItem('setFavour', {\\n                    title: (like + 1) + '',\\n                    img: storage0.getMyVar('图标').已收藏\\n                });\\n                return \\\"toast://收藏成功\\\";\\n            } else {\\n                return \\\"toast://收藏出错了~\\\";\\n            }\\n        }, aid);\\n    }\\n}\\n\\n// part2:散装API----------------\\n// 获取搜索结果\\n$.exports.getSearchRes = function (search_type, seaword, page, pageSize) {\\n    queryJson = {\\n        __refresh__: true,\\n        _extra: '',\\n        context: '',\\n        page: page,\\n        page_size: pageSize,\\n        order: '',\\n        duration: '',\\n        from_source: '',\\n        from_spmid: 333.337,\\n        platform: 'pc',\\n        highlight: 1,\\n        single_column: 0,\\n        keyword: seaword,\\n        search_type: search_type,\\n        preload: true,\\n        com2co: true\\n    }\\n    parms = $.require(\\\"hiker://page/api\\\").getWbiEnc(queryJson);\\n    dataLink = 'https://api.bilibili.com/x/web-interface/wbi/search/type?' + parms;\\n    cookie = JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie;\\n    res = JSON.parse(fetch(dataLink, {\\n        headers: {\\n            \\\"User-Agent\\\": PC_UA,\\n            \\\"Referer\\\": \\\"https://www.bilibili.com/\\\",\\n            \\\"Cookie\\\": cookie\\n        },\\n        method: \\\"GET\\\"\\n    })).data;\\n    return res;\\n}\\n// 视频推荐\\n$.exports.getFeed = function () {\\n    let u = \\\"https://api.bilibili.com/x/web-interface/index/top/feed/rcmd\\\";\\n    var res = JSON.parse(fetch(u, {\\n        headers: {\\n            \\\"Cookie\\\": JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie\\n        }\\n    }));\\n    return res.data.item\\n}\\n// 获取播放地址\\n$.exports.getUrl = function (avid, cid, qn) {\\n    var setting = JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\"));\\n    var Cookie = setting.bfKey != '' ? base64Decode(base64Decode(setting.bfKey)) : setting.userList[0].cookie;\\n    try {\\n        let u = request(buildUrl(\\\"http://api.bilibili.com/x/player/playurl\\\", {\\n            \\\"avid\\\": String(avid),\\n            \\\"cid\\\": String(cid),\\n            \\\"qn\\\": qn,\\n            \\\"fnver\\\": 0,\\n            // \\\"fnval\\\": 4048,\\n            \\\"fnval\\\": 16,\\n            \\\"fourk\\\": 1\\n        }), {\\n            headers: {\\n                Cookie: Cookie\\n            }\\n        })\\n        res = JSON.parse(u);\\n        if (res.data.dash) {\\n            return res.data.dash;\\n        } else {\\n            log(\\\"没有找到dash字段\\\");\\n            if (res.data.support_formats) {\\n                if (u.includes(\\\"试看\\\")) {\\n                    msg = \\\"您刚才观看的视频是试看视频，观看完整片段请前往官网购买！\\\";\\n                    log(msg);\\n                    confirm({\\n                        title: '温馨提示', content: msg, confirm: $.toString(() => {\\n                        }), cancel: $.toString(() => {})\\n                    })\\n                }\\n            }\\n            return res.data;\\n        }\\n    } catch (e) {\\n        try {\\n            // 一人之下第一季的第1，2集——可以获取大会员剧集的前3min\\n            log('尝试更改请求接口...:' + e);\\n            let u = request(buildUrl(\\\"https://api.bilibili.com/pgc/player/web/playurl\\\", {\\n                \\\"avid\\\": String(avid),\\n                \\\"cid\\\": String(cid),\\n                \\\"qn\\\": qn,\\n                \\\"fnver\\\": 0,\\n                // \\\"fnval\\\": 4048,\\n                \\\"fnval\\\": 16,\\n                \\\"fourk\\\": 1\\n            }), {\\n                headers: {\\n                    Cookie: Cookie\\n                }\\n            })\\n            // 仙王的日常第三季第10集，没有dash，服了\\n            if (JSON.parse(u).result.dash) {\\n                return JSON.parse(u).result.dash;\\n            } else {\\n                log('尝试走单线路画质~');\\n                return JSON.parse(u).result;\\n            }\\n        } catch (error) {\\n            log('cookie有没有可能失效了呢~');\\n            return '';\\n        }\\n    }\\n}\\n// 提交播放记录\\n$.exports.reportProcess = function (avid, cid) {\\n    let csrf = JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie.match(/bili_jct=(.*?);/) === null ? JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie.split('bili_jct=')[1] : JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie.match(/bili_jct=(.*?);/)[1];\\n    let res = post(\\\"http://api.bilibili.com/x/v2/history/report\\\", {\\n        body: {\\n            \\\"aid\\\": avid,\\n            \\\"cid\\\": cid,\\n            \\\"csrf\\\": csrf,\\n            \\\"progress\\\": 0\\n        },\\n        headers: {\\n            Cookie: JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie\\n        }\\n    })\\n}\\n\\n// 获取评论\\n$.exports.getComments = function (id, type, page) {\\n    let u = buildUrl(\\\"http://api.bilibili.com/x/v2/reply\\\", {\\n        \\\"type\\\": type,\\n        \\\"oid\\\": id,\\n        \\\"pn\\\": page\\n    });\\n    let res = request(u, {\\n        headers: {\\n            Cookie: JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie\\n        }\\n    })\\n    return JSON.parse(res).data.replies\\n}\\n// 添加稍后在看——真的麻了，为什么fetch就错呢~\\n$.exports.addToview = function (aid) {\\n    let csrf = JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie.match(/bili_jct=(.*?);/) === null ? JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie.split('bili_jct=')[1] : JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie.match(/bili_jct=(.*?);/)[1];\\n    let u = \\\"https://api.bilibili.com/x/v2/history/toview/add\\\";\\n    let res = request(buildUrl(u, {\\n        \\\"aid\\\": aid,\\n        \\\"csrf\\\": csrf,\\n    }), {\\n        headers: {\\n            \\\"Referer\\\": \\\"https://www.bilibili.com/\\\",\\n            \\\"Cookie\\\": JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie\\n        },\\n        method: \\\"POST\\\"\\n    })\\n    return JSON.parse(res).code;\\n}\\n// 删除稍后在看\\n$.exports.delToview = function (aid) {\\n    let csrf = JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie.match(/bili_jct=(.*?);/) === null ? JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie.split('bili_jct=')[1] : JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie.match(/bili_jct=(.*?);/)[1];\\n    let u = \\\"http://api.bilibili.com/x/v2/history/toview/del\\\";\\n    let res = request(buildUrl(u, {\\n        \\\"aid\\\": aid,\\n        \\\"csrf\\\": csrf,\\n    }), {\\n        headers: {\\n            \\\"Referer\\\": \\\"https://www.bilibili.com/\\\",\\n            \\\"Cookie\\\": JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie\\n        },\\n        method: \\\"POST\\\"\\n    })\\n    return JSON.parse(res).code;\\n}\\n// 订阅影视(追番、追剧)\\n$.exports.subscribeFilm = function (season_id) {\\n    let csrf = JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie.match(/bili_jct=(.*?);/) === null ? JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie.split('bili_jct=')[1] : JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie.match(/bili_jct=(.*?);/)[1];\\n    let u = \\\"https://api.bilibili.com/pgc/web/follow/add\\\";\\n    let res = request(buildUrl(u, {\\n        \\\"season_id\\\": season_id,\\n        \\\"csrf\\\": csrf,\\n    }), {\\n        headers: {\\n            \\\"Referer\\\": \\\"https://www.bilibili.com/\\\",\\n            \\\"Cookie\\\": JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie\\n        },\\n        method: \\\"POST\\\"\\n    })\\n    return JSON.parse(res).result.toast;\\n}\\n// 取消订阅\\n$.exports.cancelSubscribeFilm = function (season_id) {\\n    let csrf = JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie.match(/bili_jct=(.*?);/) === null ? JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie.split('bili_jct=')[1] : JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie.match(/bili_jct=(.*?);/)[1];\\n    let u = \\\"https://api.bilibili.com/pgc/web/follow/del\\\";\\n    let res = request(buildUrl(u, {\\n        \\\"season_id\\\": season_id,\\n        \\\"csrf\\\": csrf,\\n    }), {\\n        headers: {\\n            \\\"Referer\\\": \\\"https://www.bilibili.com/\\\",\\n            \\\"Cookie\\\": JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie\\n        },\\n        method: \\\"POST\\\"\\n    })\\n    return JSON.parse(res).result.toast;\\n}\\n/*操作用户关系\\nfid:用户mid\\nact:操作代码\\nre_src：关注来源\\n*/\\n$.exports.addAttention = function (mid, act, re_src) {\\n    let csrf = JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie.match(/bili_jct=(.*?);/) === null ? JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie.split('bili_jct=')[1] : JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie.match(/bili_jct=(.*?);/)[1];\\n    let u = \\\"https://api.bilibili.com/x/relation/modify\\\";\\n    let res = request(buildUrl(u, {\\n        \\\"fid\\\": mid,\\n        \\\"act\\\": act,\\n        \\\"re_src\\\": re_src,\\n        \\\"csrf\\\": csrf\\n    }), {\\n        headers: {\\n            \\\"Referer\\\": \\\"https://www.bilibili.com/\\\",\\n            \\\"Cookie\\\": JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie\\n        },\\n        method: \\\"POST\\\"\\n    })\\n    return JSON.parse(res).code;\\n}\\n// 移动关注用户分组\\n$.exports.moveUsers = function (beforeTagids, afterTagids, fids) {\\n    let csrf = JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie.match(/bili_jct=(.*?);/) === null ? JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie.split('bili_jct=')[1] : JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie.match(/bili_jct=(.*?);/)[1];\\n    let u = \\\"https://api.bilibili.com/x/relation/tags/moveUsers\\\";\\n    let res = request(buildUrl(u, {\\n        \\\"beforeTagids\\\": beforeTagids.toString(),\\n        \\\"afterTagids\\\": afterTagids.toString(),\\n        \\\"fids\\\": fids.toString(),\\n        \\\"csrf\\\": csrf\\n    }), {\\n        headers: {\\n            \\\"Referer\\\": \\\"https://www.bilibili.com/\\\",\\n            \\\"Cookie\\\": JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie\\n        },\\n        method: \\\"POST\\\"\\n    })\\n    return JSON.parse(res).code;\\n}\\n// 获取用户关系\\n$.exports.getRelation = function (mid) {\\n    // https://api.bilibili.com/x/space/acc/relation?mid=,旧接口\\n    parms = $.require(\\\"hiker://page/api\\\").getWbiEnc({ mid: mid });\\n    infoLink = 'https://api.bilibili.com/x/space/wbi/acc/relation?' + parms;\\n    return JSON.parse(request(infoLink, {\\n        headers: {\\n            \\\"User-Agent\\\": PC_UA,\\n            \\\"Referer\\\": \\\"https://www.bilibili.com/\\\",\\n            \\\"Cookie\\\": JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie\\n        }\\n    })).data\\n}\\n// 查询目标用户所在的分组\\n$.exports.getUserGroup = function (mid) {\\n    return JSON.parse(request(\\\"https://api.bilibili.com/x/relation/tag/user?fid=\\\" + mid, {\\n        headers: {\\n            \\\"Cookie\\\": JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie\\n        }\\n    })).data\\n}\\n// 获取关注分组\\n$.exports.getMyAttentionGroupList = function () {\\n    return JSON.parse(fetch(\\\"https://api.bilibili.com/x/relation/tags?jsonp=jsonp\\\", {\\n        headers: {\\n            \\\"Cookie\\\": JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie,\\n            \\\"User-Agent\\\": PC_UA,\\n            \\\"Referer\\\": \\\"https://www.bilibili.com/\\\"\\n        }\\n    })).data;\\n}\\n// 是否点赞\\n$.exports.hasLike = function (aid) {\\n    return JSON.parse(request(buildUrl(\\\"http://api.bilibili.com/x/web-interface/archive/has/like\\\", {\\n        \\\"aid\\\": aid\\n    }), {\\n        headers: {\\n            \\\"Cookie\\\": JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie\\n        }\\n    })).data\\n}\\n// 是否收藏\\n$.exports.hasFavour = function (aid) {\\n    return JSON.parse(request(buildUrl(\\\"http://api.bilibili.com/x/v2/fav/video/favoured\\\", {\\n        \\\"aid\\\": aid\\n    }), {\\n        headers: {\\n            \\\"Cookie\\\": JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie\\n        }\\n    })).data.favoured\\n}\\n// 视频点赞\\n$.exports.setLike = function (aid, dealWay) {\\n    let csrf = JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie.match(/bili_jct=(.*?);/) === null ? JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie.split('bili_jct=')[1] : JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie.match(/bili_jct=(.*?);/)[1];\\n    let res = post(\\\"http://api.bilibili.com/x/web-interface/archive/like\\\", {\\n        body: {\\n            \\\"aid\\\": aid,\\n            \\\"like\\\": dealWay,\\n            \\\"csrf\\\": csrf\\n        },\\n        headers: {\\n            \\\"Cookie\\\": JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie\\n        }\\n    })\\n    return JSON.parse(res).code;\\n}\\n// 获取收藏列表\\n$.exports.getCollectionGroupList = function () {\\n    return collections = JSON.parse(fetch(\\\"https://api.bilibili.com/x/v3/fav/folder/list4navigate\\\", {\\n        headers: {\\n            \\\"Cookie\\\": JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie,\\n        }\\n    })).data;\\n}\\n// 收藏/取消视频API\\n$.exports.setFavour = function (aid, add_media_ids, del_media_ids) {\\n    let csrf = JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie.match(/bili_jct=(.*?);/) === null ? JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie.split('bili_jct=')[1] : JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie.match(/bili_jct=(.*?);/)[1];\\n    let res = post(\\\"http://api.bilibili.com/medialist/gateway/coll/resource/deal\\\", {\\n        body: {\\n            \\\"rid\\\": aid,\\n            \\\"type\\\": 2,\\n            \\\"add_media_ids\\\": add_media_ids.toString(),\\n            \\\"del_media_ids\\\": del_media_ids.toString(),\\n            \\\"csrf\\\": csrf\\n        },\\n        headers: {\\n            \\\"Cookie\\\": JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie,\\n            \\\"Referer\\\": \\\"https://www.bilibili.com\\\"\\n        }\\n    })\\n    return JSON.parse(res).code;\\n}\\n// 获取视频所在收藏夹\\n$.exports.getFavourIdList = function (aid, userMid) {\\n    let u = \\\"https://api.bilibili.com/x/v3/fav/folder/created/list-all\\\";\\n    let res = request(buildUrl(u, {\\n        \\\"type\\\": 2,\\n        \\\"rid\\\": aid,\\n        \\\"up_mid\\\": userMid,\\n    }), {\\n        headers: {\\n            \\\"Cookie\\\": JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie,\\n            \\\"Referer\\\": \\\"https://www.bilibili.com\\\"\\n        }\\n    });\\n    favourIdList = [];\\n    JSON.parse(res).data.list.forEach((item) => {\\n        if (item.fav_state == 1) {\\n            favourIdList.push(item.id);\\n        }\\n    })\\n    return favourIdList;\\n}\\n// 热映剧集时间轴\\n$.exports.getMovies = function (type, before, after) {\\n    let u = buildUrl(\\\"http://api.bilibili.com/pgc/web/timeline\\\", {\\n        \\\"types\\\": type,\\n        \\\"before\\\": before,\\n        \\\"after\\\": after\\n    })\\n    let res = JSON.parse(request(u, {\\n        headers: {\\n            \\\"Cookie\\\": JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie\\n        }\\n    }))\\n    return res.result\\n}\\n// 获取专栏文章\\n$.exports.getUserArticle = function (upMid, page) {\\n    let u = \\\"https://api.bilibili.com/x/space/article\\\";\\n    let res = request(buildUrl(u, {\\n        \\\"mid\\\": upMid,\\n        \\\"pn\\\": page,\\n        \\\"ps\\\": 12,\\n        \\\"sort\\\": 'publish_time'\\n    }), {\\n        headers: {\\n            \\\"Cookie\\\": JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie,\\n            \\\"Referer\\\": \\\"https://www.bilibili.com\\\"\\n        }\\n    });\\n    return JSON.parse(res).data;\\n}\\n// 获取动态数据\\n$.exports.getDynamicData = function (from, upMid) {\\n    var nextInfo = {};\\n    if (MY_PAGE == 1) {\\n        if (from == 'upSpace') {\\n            var u = \\\"https://api.bilibili.com/x/polymer/web-dynamic/v1/feed/space?offset=&host_mid=\\\" + upMid + \\\"&timezone_offset=-480\\\";\\n        } else {\\n            var u = \\\"https://api.bilibili.com/x/polymer/web-dynamic/v1/feed/all?timezone_offset=-480&type=all\\\";\\n        }\\n        latenews = JSON.parse(fetch(u, {\\n            headers: {\\n                \\\"Cookie\\\": JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie,\\n                \\\"User-Agent\\\": PC_UA,\\n                \\\"Referer\\\": \\\"https://www.bilibili.com/\\\"\\n            }\\n        })).data;\\n        nextInfo.offset = latenews.offset;\\n    } else {\\n        if (from == 'upSpace') {\\n            var u = \\\"https://api.bilibili.com/x/polymer/web-dynamic/v1/feed/space?offset=\\\" + storage0.getMyVar(JSON.stringify(MY_PAGE)).offset + \\\"&host_mid=\\\" + upMid + \\\"&timezone_offset=-480\\\";\\n        } else {\\n            var u = \\\"https://api.bilibili.com/x/polymer/web-dynamic/v1/feed/all?timezone_offset=-480&type=all&offset=\\\" + storage0.getMyVar(JSON.stringify(MY_PAGE)).offset;\\n        }\\n        latenews = JSON.parse(fetch(u, {\\n            headers: {\\n                \\\"Cookie\\\": JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userList[0].cookie\\n            }\\n        })).data;\\n        nextInfo.offset = latenews.offset;\\n    }\\n    storage0.putMyVar(JSON.stringify(MY_PAGE + 1), nextInfo);\\n    return latenews;\\n}\\n\\n// ——特别的行为、工具函数——\\n// 展示动态数据(返回函数方法的可执行字符串)\\n$.exports.showDynamicData = function () {\\n    return $.toString(() => {\\n        imgLink = storage0.getMyVar('图标');\\n        latenews.items.forEach(list => {\\n            if (list.type == 'DYNAMIC_TYPE_AV') {\\n                // 投稿视频（当前发布）√\\n                d.push({\\n                    title: list.modules.module_author.name,\\n                    desc: '<small><small><font color=\\\"grey\\\">' + list.modules.module_author.pub_time + '-' + list.modules.module_author.pub_action + '</font></small></small>',\\n                    img: list.modules.module_author.face + \\\"@Referer=\\\",\\n                    url: 'hiker://page/upHome',\\n                    col_type: 'avatar',\\n                    extra: {\\n                        mid: list.modules.module_author.mid,\\n                        title: list.modules.module_author.name,\\n                        face: list.modules.module_author.face\\n                    }\\n                }, {\\n                    col_type: 'line'\\n                }, {\\n                    // 不一定有文字啊\\n                    title: (list.modules.module_dynamic.desc === null ? '<font color=\\\"grey\\\">up太懒了，连文案都不想配...</font>' : list.modules.module_dynamic.desc.text).replace(/\\\\n/g, '<br>') + '<br><a href=\\\"hiker://page/Comments?p=fypage\\\">查看评论</a>',\\n                    url: 'hiker://page/Comments?p=fypage',\\n                    // 这个不能用long_text\\n                    col_type: 'rich_text',\\n                    extra: {\\n                        id: list.basic.comment_id_str,\\n                        type: 1\\n                    }\\n                }, {\\n                    title: list.modules.module_dynamic.major.archive.title,\\n                    img: list.modules.module_dynamic.major.archive.cover + \\\"@Referer=\\\",\\n                    col_type: 'movie_1_left_pic',\\n                    url: \\\"hiker://page/video\\\",\\n                    desc: list.modules.module_dynamic.major.archive.desc,\\n                    extra: {\\n                        aid: list.modules.module_dynamic.major.archive.aid,\\n                        lineVisible: false\\n                    }\\n                }, {\\n                    desc: '<small><small><font color=\\\"grey\\\">留言:' + list.modules.module_stat.comment.count + '\\\\t\\\\t分享:' + list.modules.module_stat.forward.count + '\\\\t\\\\t喜欢:' + list.modules.module_stat.like.count + '</font></small></small>',\\n                    img: imgLink.动态足迹,\\n                    url: 'hiker://empty',\\n                    col_type: 'avatar'\\n                }, {\\n                    col_type: 'line_blank'\\n                });\\n            } else if (list.type == 'DYNAMIC_TYPE_FORWARD') {\\n                // 引用，多出了orig指向一个(过去)已发布的视频,准确的说是引用之前的帖子不一定是视频√\\n                d.push({\\n                    title: list.modules.module_author.name,\\n                    img: list.modules.module_author.face + \\\"@Referer=\\\",\\n                    desc: '<small><small><font color=\\\"grey\\\">' + list.modules.module_author.pub_time + '</font></small></small>',\\n                    url: 'hiker://page/upHome',\\n                    col_type: 'avatar',\\n                    extra: {\\n                        mid: list.modules.module_author.mid,\\n                        title: list.modules.module_author.name,\\n                        face: list.modules.module_author.face\\n                    }\\n                }, {\\n                    col_type: 'line'\\n                }, {\\n                    title: (list.modules.module_dynamic.desc === null ? '<font color=\\\"grey\\\">up太懒了，连文案都不想配...</font>' : list.modules.module_dynamic.desc.text).replace(/\\\\n/g, '<br>') + '<br><a href=\\\"hiker://page/Comments?p=fypage\\\">查看评论</a>',\\n                    url: 'hiker://page/Comments?p=fypage',\\n                    col_type: 'rich_text',\\n                    extra: {\\n                        id: list.basic.comment_id_str,\\n                        // 也是纯文字，因为只是文字+引用早已投稿的视频\\n                        type: 17\\n                    }\\n                });\\n                // 引用的内容——截断（根据不同的引用类型进行处理）\\n                d.push({\\n                    title: '<small><small>下面内容来自引用的帖子,up是:<a href=\\\"hiker://page/upHome\\\">' + list.orig.modules.module_author.name + '</a></small></small>',\\n                    col_type: \\\"rich_text\\\",\\n                    extra: {\\n                        mid: list.orig.modules.module_author.mid,\\n                        title: list.orig.modules.module_author.name,\\n                        face: list.orig.modules.module_author.face\\n                    }\\n                }, {\\n                    col_type: \\\"line\\\"\\n                });\\n                if (list.orig.type == 'DYNAMIC_TYPE_AV') {\\n                    // 引用视频说说\\n                    d.push({\\n                        title: list.orig.modules.module_dynamic.major.archive.title,\\n                        img: list.orig.modules.module_dynamic.major.archive.cover + \\\"@Referer=\\\",\\n                        col_type: 'movie_1_left_pic',\\n                        url: \\\"hiker://page/video\\\",\\n                        desc: list.orig.modules.module_dynamic.major.archive.desc,\\n                        extra: {\\n                            aid: list.orig.modules.module_dynamic.major.archive.aid,\\n                            lineVisible: false\\n                        }\\n                    });\\n                } else if (list.orig.type == 'DYNAMIC_TYPE_WORD') {\\n                    // 引用文字说说\\n                    d.push({\\n                        title: (list.orig.modules.module_dynamic.desc.text === null ? '<font color=\\\"grey\\\">up太懒了，连文案都不想配...</font>' : list.orig.modules.module_dynamic.desc.text).replace(/\\\\n/g, '<br>') + '<br><a href=\\\"hiker://page/Comments?p=fypage\\\">查看评论</a>',\\n                        url: 'hiker://page/Comments?p=fypage',\\n                        col_type: 'rich_text',\\n                        extra: {\\n                            // 评论id来源都不一样\\n                            id: list.orig.id_str,\\n                            // 纯文字\\n                            type: 17\\n                        }\\n                    });\\n\\n                } else if (list.orig.type == 'DYNAMIC_TYPE_DRAW') {\\n                    // 引用图片说说\\n                    d.push({\\n                        title: (list.orig.modules.module_dynamic.desc.text === null ? '<font color=\\\"grey\\\">up太懒了，连文案都不想配...</font>' : list.orig.modules.module_dynamic.desc.text).replace(/\\\\n/g, '<br>') + '<br><a href=\\\"hiker://page/Comments?p=fypage\\\">查看评论</a>',\\n                        col_type: 'rich_text',\\n                        url: \\\"hiker://page/Comments?p=fypage\\\",\\n                        extra: {\\n                            id: list.orig.modules.module_dynamic.major.draw.id,\\n                            type: 11\\n                        }\\n                    });\\n                    list.orig.modules.module_dynamic.major.draw.items.forEach(item => {\\n                        d.push({\\n                            img: item.src + \\\"@Referer=\\\",\\n                            col_type: 'pic_3_square',\\n                            url: item.src + \\\"@Referer=\\\",\\n                        });\\n                    });\\n                } else {\\n                    log('可能还有未适配的说说类型');\\n                }\\n                // 分割\\n                d.push({\\n                    desc: '<small><small><font color=\\\"grey\\\">留言:' + list.modules.module_stat.comment.count + '\\\\t\\\\t分享:' + list.modules.module_stat.forward.count + '\\\\t\\\\t喜欢:' + list.modules.module_stat.like.count + '</font></small></small>',\\n                    img: imgLink.动态足迹,\\n                    url: 'hiker://empty',\\n                    col_type: 'avatar'\\n                }, {\\n                    col_type: 'line_blank'\\n                });\\n            } else if (list.type == 'DYNAMIC_TYPE_WORD') {\\n                // 纯文字\\n                d.push({\\n                    title: list.modules.module_author.name,\\n                    desc: '<small><small><font color=\\\"grey\\\">' + list.modules.module_author.pub_time + '</font></small></small>',\\n                    img: list.modules.module_author.face + \\\"@Referer=\\\",\\n                    url: 'hiker://page/upHome',\\n                    col_type: 'avatar',\\n                    extra: {\\n                        mid: list.modules.module_author.mid,\\n                        title: list.modules.module_author.name,\\n                        face: list.modules.module_author.face\\n                    }\\n                }, {\\n                    col_type: 'line'\\n                }, {\\n                    title: (list.modules.module_dynamic.desc === null ? '<font color=\\\"grey\\\">up太懒了，连文案都不想配...</font>' : list.modules.module_dynamic.desc.text).replace(/\\\\n/g, '<br>') + '<br><a href=\\\"hiker://page/Comments?p=fypage\\\">查看评论</a>',\\n                    url: 'hiker://page/Comments?p=fypage',\\n                    col_type: 'rich_text',\\n                    extra: {\\n                        id: list.basic.comment_id_str,\\n                        // 纯文字\\n                        type: 17\\n                    }\\n                }, {\\n                    desc: '<small><small><font color=\\\"grey\\\">留言:' + list.modules.module_stat.comment.count + '\\\\t\\\\t分享:' + list.modules.module_stat.forward.count + '\\\\t\\\\t喜欢:' + list.modules.module_stat.like.count + '</font></small></small>',\\n                    img: imgLink.动态足迹,\\n                    url: 'hiker://empty',\\n                    col_type: 'avatar'\\n                }, {\\n                    col_type: 'line_blank'\\n                });\\n            } else if (list.type == 'DYNAMIC_TYPE_DRAW') {\\n                // 图片说说\\n                d.push({\\n                    title: list.modules.module_author.name,\\n                    desc: '<small><small><font color=\\\"grey\\\">' + list.modules.module_author.pub_time + '</font></small></small>',\\n                    img: list.modules.module_author.face + \\\"@Referer=\\\",\\n                    url: 'hiker://page/upHome',\\n                    col_type: 'avatar',\\n                    extra: {\\n                        mid: list.modules.module_author.mid,\\n                        title: list.modules.module_author.name,\\n                        face: list.modules.module_author.face\\n                    }\\n                }, {\\n                    col_type: 'line'\\n                }, {\\n                    title: (list.modules.module_dynamic.desc === null ? '<font color=\\\"grey\\\">up太懒了，连文案都不想配...</font>' : list.modules.module_dynamic.desc.text).replace(/\\\\n/g, '<br>') + '<br><a href=\\\"hiker://page/Comments?p=fypage\\\">查看评论</a>',\\n                    url: 'hiker://page/Comments?p=fypage',\\n                    col_type: 'rich_text',\\n                    extra: {\\n                        id: list.basic.comment_id_str,\\n                        // 相簿（图片动态）\\n                        type: 11\\n                    }\\n                });\\n                list.modules.module_dynamic.major.draw.items.forEach(item => {\\n                    d.push({\\n                        img: item.src + \\\"@Referer=\\\",\\n                        col_type: 'pic_3_square',\\n                        url: item.src + \\\"@Referer=\\\",\\n                    });\\n                });\\n                d.push({\\n                    desc: '<small><small><font color=\\\"grey\\\">留言:' + list.modules.module_stat.comment.count + '\\\\t\\\\t分享:' + list.modules.module_stat.forward.count + '\\\\t\\\\t喜欢:' + list.modules.module_stat.like.count + '</font></small></small>',\\n                    img: imgLink.动态足迹,\\n                    url: 'hiker://empty',\\n                    col_type: 'avatar'\\n                }, {\\n                    col_type: 'line_blank'\\n                });\\n            }\\n        });\\n    })\\n}\\n// 时间日期转换函数\\n$.exports.timeConvert = function (time) {\\n    function formatDate(e, t) {\\n        e = new Date(e * 1000); //时间戳为10位需*1000，时间戳为13位的话不需乘1000\\n        return t.replace(/yyyy|YYYY/, e.getFullYear())\\n            .replace(/yy|YY/, r(e.getFullYear() % 100, 2))\\n            .replace(/mm|MM/, r(e.getMonth() + 1, 2))\\n            .replace(/m|M/g, e.getMonth() + 1)\\n            .replace(/dd|DD/, r(e.getDate(), 2))\\n            .replace(/d|D/g, e.getDate())\\n            .replace(/hh|HH/, r(e.getHours(), 2))\\n            .replace(/h|H/g, e.getHours())\\n            .replace(/ii|II/, r(e.getMinutes(), 2))\\n            .replace(/i|I/g, e.getMinutes())\\n            .replace(/ss|SS/, r(e.getSeconds(), 2))\\n            .replace(/s|S/g, e.getSeconds())\\n            .replace(/w/g, e.getDay())\\n            .replace(/W/g, [\\\"日\\\", \\\"一\\\", \\\"二\\\", \\\"三\\\", \\\"四\\\", \\\"五\\\", \\\"六\\\"][e.getDay()])\\n    }\\n\\n    function r(e, t) {\\n        for (var r = 0, n = t - (e + \\\"\\\").length; r < n; r++) e = \\\"0\\\" + e;\\n        return e + \\\"\\\"\\n    }\\n    return formatDate(time, 'YYYY-MM-DD hh:ii:ss');\\n    // console.log(formatDate(1664089532, 'YYYY-MM-DD hh:ii:ss'));\\n}\\n// 秒数分钟表达转换函数\\n$.exports.formatSeconds = function (seconds) {\\n    let minutes = Math.floor(seconds / 60); // 计算分钟数\\n    let remainingSeconds = seconds % 60; // 计算剩余的秒数\\n    let formattedTime = `${minutes}:${String(remainingSeconds).padStart(2, '0')}`;\\n    return formattedTime;\\n}\\n\\n// B站Wbi签名算法(After 2023-3,get request with wbi.)\\n$.exports.getWbiEnc = function (queryJson) {\\n    const mixinKeyEncTab = [\\n        46, 47, 18, 2, 53, 8, 23, 32, 15, 50, 10, 31, 58, 3, 45, 35, 27, 43, 5, 49,\\n        33, 9, 42, 19, 29, 28, 14, 39, 12, 38, 41, 13, 37, 48, 7, 16, 24, 55, 40,\\n        61, 26, 17, 0, 1, 60, 51, 30, 4, 22, 25, 54, 21, 56, 59, 6, 63, 57, 62, 11,\\n        36, 20, 34, 44, 52\\n    ];\\n\\n    // 对 imgKey 和 subKey 进行字符顺序打乱编码\\n    function getMixinKey(orig) {\\n        let temp = '';\\n        mixinKeyEncTab.forEach((n) => {\\n            temp += orig[n]\\n        });\\n        return temp.slice(0, 32);\\n    }\\n\\n    // 为请求参数进行 wbi 签名\\n    function encWbi(params, img_key, sub_key) {\\n        const mixin_key = getMixinKey(img_key + sub_key),\\n            curr_time = Math.round(Date.now() / 1000),\\n            chr_filter = /[!'\\\\(\\\\)*]/g\\n        let query = [];\\n        params = Object.assign(params, { wts: curr_time });    // 添加 wts 字段\\n        // 按照 key 重排参数\\n        Object.keys(params).sort().forEach((key) => {\\n            query.push(\\n                encodeURIComponent(key) +\\n                '=' +\\n                // 过滤 value 中的 \\\"!'()*\\\" 字符\\n                encodeURIComponent(('' + params[key]).replace(chr_filter, ''))\\n            )\\n        })\\n        query = query.join('&');\\n        const wbi_sign = md5(query + mixin_key); // 计算 w_rid\\n        return query + '&w_rid=' + wbi_sign;\\n    }\\n\\n    // 获取最新的 img_key 和 sub_key\\n    function getWbiKeys() {\\n        const json_content = JSON.parse(fetch('https://api.bilibili.com/x/web-interface/nav', {\\n            headers: {\\n                \\\"User-Agent\\\": PC_UA,\\n                \\\"Referer\\\": \\\"https://www.bilibili.com/\\\"\\n            },\\n            method: 'GET'\\n        })).data;\\n        img_url = json_content.wbi_img.img_url;\\n        sub_url = json_content.wbi_img.sub_url;\\n        return {\\n            img_key: img_url.substring(img_url.lastIndexOf('/') + 1, img_url.length).split('.')[0],\\n            sub_key: sub_url.substring(sub_url.lastIndexOf('/') + 1, sub_url.length).split('.')[0]\\n        }\\n    }\\n\\n    const wbi_keys = getWbiKeys();\\n\\n    const query = encWbi(\\n        queryJson,\\n        wbi_keys.img_key,\\n        wbi_keys.sub_key\\n    );\\n    return query;\\n}\\n\"},{\"col_type\":\"movie_3\",\"name\":\"videoPage\",\"path\":\"video\",\"rule\":\"js:\\nvar d = [];\\n// 预处理\\nputMyVar('功能折叠', '关');\\nimgLink = storage0.getMyVar('图标');\\naid = MY_PARAMS.aid + \\\"\\\";\\n// bvid = MY_PARAMS.bvid + \\\"\\\";\\nmid = MY_PARAMS.mid + \\\"\\\";\\nvar {formatSeconds}=$.require(\\\"hiker://page/api\\\");\\ntry {\\n    //获取视频分P信息\\n    var p = JSON.parse(fetch(\\\"https://api.bilibili.com/x/web-interface/view?aid=\\\" + aid)).data;\\n    hasLike = $.require(\\\"hiker://page/api\\\").hasLike(aid);\\n    hasFavour = $.require(\\\"hiker://page/api\\\").hasFavour(aid);\\n    setPageTitle(p.title);\\n    setPagePicUrl(p.pic + '@Referer=');\\n    // 只有1P的情况\\n    if (p.pages.length == 1) {\\n        cid = p.pages[0].cid;\\n        d.push({\\n            title: p.title,\\n            img: p.pic + '@Referer=',\\n            url: $().lazyRule((aid, cid, qn) => {\\n                // 真离了个大谱，明明替换掉了，ua字符串又变回来了，又要处理一次\\n                return $.require(\\\"hiker://page/api\\\").biliLazy(aid, cid, qn).replace(/;/g, \\\"；；\\\");\\n            }, aid + \\\"\\\", cid + \\\"\\\", '112'),\\n            col_type: \\\"pic_1\\\",\\n            desc:'播放量:'+p.stat.view+'\\\\t\\\\t\\\\t弹幕数:'+p.stat.danmaku+'\\\\n发布日期:'+$.require(\\\"hiker://page/api\\\").timeConvert(p.ctime),\\n            extra: {\\n                id:'aid-'+aid+'|cid-'+cid,\\n                longClick: [{\\n                    title: 'dm盒子', js: $.toString(() => {\\n                        return 'hiker://page/setting#noHistory#?rule=dm盒子';\\n                    })\\n                }, {\\n                    title: '弹幕控制', js: $.toString(() => {\\n                        if (getItem('isOverrideSave', 'false') == 'true') {\\n                            setItem('isOverrideSave', 'false');\\n                            return 'toast://弹幕将不受dm盒子参数控制';\\n                        } else {\\n                            setItem('isOverrideSave', 'true');\\n                            return 'toast://弹幕将受到dm盒子参数控制';\\n                        }\\n                    })\\n                }]\\n            }\\n        });\\n        d.push({\\n            title: '<font color=\\\"blue\\\">' + p.owner.name + '</font>',\\n            url: \\\"hiker://page/upHome\\\",\\n            img: p.owner.face + \\\"@Referer=\\\",\\n            col_type: \\\"avatar\\\",\\n            extra: {\\n                mid: p.owner.mid,\\n                title: p.owner.name,\\n                face: p.owner.face\\n            }\\n        });\\n        // 虽然只有1P,但可能处于合集视频中，往往在up上传中属于一套影片\\n        if (p.ugc_season) {\\n            d.push({\\n                title: '📁所属合集：<a href=\\\"hiker://page/collectionViedo\\\">'+p.ugc_season.title+'</a>',\\n                url: \\\"hiker://page/collectionViedo#noHistory#\\\",\\n                col_type: 'rich_text',\\n                extra: { \\\"textSize\\\": 12, aid: aid }\\n            })\\n        }\\n        d.push({\\n            col_type: 'line'\\n        }, {\\n            title: p.stat.like,\\n            img: hasLike == 1 ? imgLink.已点赞 : imgLink.未点赞,\\n            url: $('#noLoading##noHistory#').lazyRule((aid) => {\\n                return $.require(\\\"hiker://page/api\\\").likeLogic(aid)\\n            }, aid),\\n            col_type: \\\"icon_small_4\\\",\\n            extra: {\\n                id: 'setLike'\\n            }\\n        }, {\\n            title: p.stat.favorite,\\n            img: hasFavour ? imgLink.已收藏 : imgLink.未收藏,\\n            url: $('#noLoading##noHistory#').lazyRule((aid) => {\\n                upMid = JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userMid;\\n                return $.require(\\\"hiker://page/api\\\").favourLogic(aid, upMid)\\n            }, aid),\\n            col_type: \\\"icon_small_4\\\",\\n            extra: {\\n                id: 'setFavour'\\n            }\\n        }, {\\n            title: '稍后再看',\\n            img: imgLink.稍后再看,\\n            url: $('#noLoading##noHistory#').lazyRule((aid) => {\\n                return $.require(\\\"hiker://page/api\\\").judgeToview(aid)\\n            }, aid),\\n            col_type: \\\"icon_small_4\\\",\\n        }, {\\n            title: '查看评论',\\n            url: 'hiker://page/Comments?p=fypage',\\n            img: imgLink.查看评论,\\n            col_type: \\\"icon_small_4\\\",\\n            extra: {\\n                \\\"id\\\": aid,\\n                \\\"type\\\": 1\\n            }\\n        }, {\\n            col_type: 'line_blank'\\n        }, {\\n            title: p.desc,\\n            col_type: \\\"long_text\\\",\\n        });\\n    } else {\\n        // 存在多集分P\\n        d.push({\\n            title: p.title,\\n            img: p.pic + '@Referer=',\\n            desc:'播放量:'+p.stat.view+'\\\\t\\\\t\\\\t弹幕数:'+p.stat.danmaku+'\\\\n发布日期:'+$.require(\\\"hiker://page/api\\\").timeConvert(p.ctime),\\n            url: $('#noLoading##noHistory#').lazyRule((p) => {\\n                return $('hiker://empty?fypage').rule((p) => {\\n                    d = [];\\n                    d.push({\\n                        title: p.desc,\\n                        col_type: \\\"long_text\\\",\\n                    })\\n                    setResult(d);\\n                }, p)\\n            }, p),\\n            col_type: \\\"pic_1\\\",\\n            extra: {\\n                longClick: [{\\n                    title: 'dm盒子', js: $.toString(() => {\\n                        return 'hiker://page/setting#noHistory#?rule=dm盒子';\\n                    })\\n                }, {\\n                    title: '弹幕控制', js: $.toString(() => {\\n                        if (getItem('isOverrideSave', 'false') == 'true') {\\n                            setItem('isOverrideSave', 'false');\\n                            return 'toast://弹幕将不受dm盒子参数控制';\\n                        } else {\\n                            setItem('isOverrideSave', 'true');\\n                            return 'toast://弹幕将受到dm盒子参数控制';\\n                        }\\n                    })\\n                }]\\n            }\\n        }, {\\n            title: '<font color=\\\"blue\\\">' + p.owner.name + '</font>',\\n            url: \\\"hiker://page/upHome\\\",\\n            img: p.owner.face + \\\"@Referer=\\\",\\n            col_type: \\\"avatar\\\",\\n            extra: {\\n                mid: p.owner.mid,\\n                title: p.owner.name,\\n                face: p.owner.face\\n            }\\n        }, {\\n            col_type: 'line'\\n        }, {\\n            title: p.stat.like,\\n            img: hasLike == 1 ? imgLink.已点赞 : imgLink.未点赞,\\n            url: $('#noLoading##noHistory#').lazyRule((aid) => {\\n                return $.require(\\\"hiker://page/api\\\").likeLogic(aid)\\n            }, aid),\\n            col_type: \\\"icon_small_4\\\",\\n            extra: {\\n                id: 'setLike'\\n            }\\n        }, {\\n            title: p.stat.favorite,\\n            img: hasFavour ? imgLink.已收藏 : imgLink.未收藏,\\n            url: $('#noLoading##noHistory#').lazyRule((aid) => {\\n                upMid = JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).userMid;\\n                return $.require(\\\"hiker://page/api\\\").favourLogic(aid, upMid)\\n            }, aid),\\n            col_type: \\\"icon_small_4\\\",\\n            extra: {\\n                id: 'setFavour'\\n            }\\n        }, {\\n            title: '稍后再看',\\n            img: imgLink.稍后再看,\\n            url: $('#noLoading##noHistory#').lazyRule((aid) => {\\n                return $.require(\\\"hiker://page/api\\\").judgeToview(aid)\\n            }, aid),\\n            col_type: \\\"icon_small_4\\\",\\n        }, {\\n            title: '查看评论',\\n            url: 'hiker://page/Comments?p=fypage',\\n            img: imgLink.查看评论,\\n            col_type: \\\"icon_small_4\\\",\\n            extra: {\\n                \\\"id\\\": aid,\\n                \\\"type\\\": 1\\n            }\\n        })\\n        d.push({\\n            col_type: 'line_blank'\\n        }, {\\n            title: '选集列表',\\n            url: \\\"hiker://empty\\\",\\n            desc:'<small><small>共' + p.videos + '条视频</small></small>',\\n            img: imgLink.列表,\\n            col_type: \\\"avatar\\\",\\n        }, {\\n            col_type: 'line'\\n        });\\n        p.pages.forEach(item => {\\n            cid = item.cid;\\n            d.push({\\n                title: item.part,\\n                desc:formatSeconds(item.duration),\\n                // img:imgLink.分P列表项,\\n                img:item.first_frame+'@Referer=',\\n                url: $().lazyRule((aid, cid, qn) => {\\n                    return $.require(\\\"hiker://page/api\\\").biliLazy(aid, cid, qn).replace(/;/g, \\\"；；\\\");\\n                }, aid + \\\"\\\", cid + \\\"\\\", '116'),\\n                col_type: \\\"avatar\\\",\\n                extra:{\\n                    id:'aid-'+aid+'|cid-'+cid,\\n                }\\n            })\\n        })\\n    }\\n} catch (e) {\\n    log(e);\\n    d.push({\\n        title: '页面走丢了...',\\n        img: 'https://i0.hdslb.com/bfs/general/f7b667011a46615732c701f4bb1d07f793f8d1df.png@Referer=',\\n        url: 'hiker://empty',\\n        desc: '大概率视频被封禁，或者up已跑路~',\\n        col_type: \\\"pic_1\\\"\\n    });\\n}\\nsetResult(d);\\n\"},{\"col_type\":\"long_text\",\"name\":\"评论\",\"path\":\"Comments\",\"rule\":\"js:\\nvar d = [];\\nvar id = MY_PARAMS.id;\\nvar type = MY_PARAMS.type;\\nlog(id);\\nif (MY_PAGE == 1) {\\n    // 貌似暂时只能文字+数字\\n    d.unshift({\\n        title: \\\"发条评论吧\\\",\\n        col_type: \\\"input\\\",\\n        url: $.toString((id,type) => {\\n            let csrf = JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).cookie.match(/bili_jct=(.*?);/)[1];\\n            post(\\\"http://api.bilibili.com/x/v2/reply/add\\\", {\\n                body: {\\n                    \\\"type\\\": type,\\n                    \\\"oid\\\": id,\\n                    \\\"csrf\\\": csrf,\\n                    \\\"message\\\": input\\n                },\\n                headers: {\\n                    \\\"Cookie\\\": JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).cookie\\n                }\\n            })\\n            refreshPage()\\n        }, id,type)\\n    })\\n}\\nlet data = $.require(\\\"hiker://page/api\\\").getComments(id,type,MY_PAGE);\\n// log(data);\\nif(data){\\n    data.forEach(item => {\\n        d.push({\\n            title: item.member.uname,\\n            img: item.member.avatar+'@Referer=',\\n            url:'hiker://page/upHome',\\n            desc:'<small><small><font color=\\\"grey\\\">'+item.reply_control.location + \\\" \\\" + item.reply_control.time_desc+'</font></small></small>',\\n            col_type: \\\"avatar\\\",\\n            extra: {\\n                mid: item.member.mid,\\n                title: item.member.uname,\\n                face: item.member.avatar\\n            }\\n        })\\n        d.push({\\n            title: item.content.message,\\n        })\\n    })\\n}else{\\n    d.push({\\n        title: '好像没有评论了啦，！',\\n        col_type: \\\"text_center_1\\\",\\n    })\\n}\\nsetResult(d);\\n\"},{\"col_type\":\"movie_3\",\"name\":\"订阅列表\",\"path\":\"subscription\",\"rule\":\"if (getItem('订阅类型', '1') == '1') {\\n\\n    typerName = '追番';\\n\\n} else {\\n\\n    typerName = '追剧';\\n\\n}\\n\\nd.push({\\n\\n    title: '追番' == typerName ? '‘‘’’<font color=\\\"red\\\">追番</font>' : '追番',\\n\\n    url: $('#noLoading##noHistory#').lazyRule(() => {\\n\\n        setItem('订阅类型', '1')\\n\\n        refreshPage(true);\\n\\n        return \\\"hiker://empty\\\";\\n\\n    }),\\n\\n    col_type: 'scroll_button'\\n\\n},{\\n\\n    title: '追剧' == typerName ? '‘‘’’<font color=\\\"red\\\">追剧</font>' : '追剧',\\n\\n    url: $('#noLoading##noHistory#').lazyRule(() => {\\n\\n        setItem('订阅类型', '2')\\n\\n        refreshPage(true);\\n\\n        return \\\"hiker://empty\\\";\\n\\n    }),\\n\\n    col_type: 'scroll_button'\\n\\n});\\n\\nsubscriptions = JSON.parse(fetch(\\\"https://api.bilibili.com/x/space/bangumi/follow/list?type=\\\" + getItem('订阅类型', '1') + \\\"&follow_status=0&pn=\\\" + page + \\\"&ps=15&vmid=\\\" + mid, {\\n\\n    headers: {\\n\\n        \\\"Cookie\\\": cookie\\n\\n    }\\n\\n})).data;\\n\\nif (page == 1) {\\n\\n    d.push({\\n\\n        title: \\\"当前\\\" + typerName + \\\"数量:\\\" + subscriptions.total,\\n\\n        url: \\\"hiker://empty\\\",\\n\\n        col_type: \\\"text_center_1\\\"\\n\\n    })\\n\\n}\\n\\nsubscriptions.list.forEach(list => {\\n\\n    d.push({\\n\\n        title: list.title,\\n\\n        img: list.cover + \\\"@Referer=\\\",\\n\\n        url: \\\"hiker://page/filmerji#immersiveTheme#\\\",\\n\\n        desc: list.evaluate.substring(0, 12) + '‘‘’’…<font color=\\\"#1C1C1C\\\">详情</font>' + '\\\\n' + list.season_type_name + '|' + (list.areas===undefined?'':list.areas[0].name + '\\\\n') + (list.progress == '' ? '尚未观看' : list.progress) + (list.new_ep.index_show===undefined?'':'|'+(list.new_ep.index_show.match(/更新|即将/) ? '‘‘’’<font color=\\\"red\\\">' + list.new_ep.index_show + '</font>': list.new_ep.index_show)),\\n\\n        col_type: 'movie_1_vertical_pic',\\n\\n        extra: {\\n\\n            season_id: list.season_id\\n\\n        }\\n\\n    });\\n\\n});\\n\\n\"},{\"col_type\":\"movie_3\",\"name\":\"关注列表\",\"path\":\"attention\",\"rule\":\"if (MY_PAGE == 1) {\\n\\n    focusGroups=$.require(\\\"hiker://page/api\\\").getMyAttentionGroupList();\\n\\n    putMyVar('tempId', JSON.stringify(focusGroups[1].tagid));\\n\\n    focusGroups.forEach(list => {\\n\\n        d.push({\\n\\n            title: list.tagid == getItem('关注分组', JSON.stringify(focusGroups[1].id)) ? \\\"““””<font color='red'>\\\" + list.name + list.count + \\\"</font>\\\" : list.name + list.count,\\n\\n            url: $('#noLoading##noHistory#').lazyRule((list) => {\\n\\n                setItem('关注分组', JSON.stringify(list.tagid));\\n\\n                refreshPage(true);\\n\\n                return \\\"toast://切换关注分组为:\\\" + list.name;\\n\\n            }, list),\\n\\n            col_type: 'scroll_button',\\n\\n        });\\n\\n    });\\n\\n    // 末尾补充悄悄关注分组\\n\\n    d.push({\\n\\n        title: '悄悄关注' == getItem('关注分组', JSON.stringify(focusGroups[0].id)) ? \\\"““””<font color='red'>悄悄关注</font>\\\" : \\\"悄悄关注\\\",\\n\\n        url: $('#noLoading##noHistory#').lazyRule(() => {\\n\\n            setItem('关注分组', \\\"悄悄关注\\\");\\n\\n            refreshPage(true);\\n\\n            return \\\"toast://切换关注分组为:\\\" + \\\"悄悄关注\\\";\\n\\n        }),\\n\\n        col_type: 'scroll_button',\\n\\n    },{\\n\\n        col_type: 'line'\\n\\n    });\\n\\n}\\n\\nif (getItem('关注分组')=='悄悄关注') {\\n\\n    groupContent = JSON.parse(fetch(\\\"https://api.bilibili.com/x/relation/whispers?pn=\\\"+page+\\\"&ps=20&jsonp=jsonp\\\", {\\n\\n        headers: {\\n\\n            \\\"Cookie\\\": cookie\\n\\n        }\\n\\n    })).data.list;\\n\\n    groupContent.forEach(list => {\\n\\n        d.push({\\n\\n            title: \\\"<big><font color='blue'>\\\" + list.uname + \\\"</font></big><small>\\\" + list.sign + \\\"</small>\\\",\\n\\n            img: list.face + \\\"@Referer=\\\",\\n\\n            col_type: 'avatar',\\n\\n            url: \\\"hiker://page/upHome\\\",\\n\\n            extra: {\\n\\n                mid: list.mid,\\n\\n                title: list.uname,\\n\\n                face: list.face\\n\\n            }\\n\\n        });\\n\\n    });\\n\\n}else{\\n\\n    groupContent = JSON.parse(fetch(\\\"https://api.bilibili.com/x/relation/tag?mid=\\\" + mid + \\\"&tagid=\\\" + getItem('关注分组', getMyVar('tempId')) + \\\"&pn=\\\" + page + \\\"&ps=20&jsonp=jsonp\\\", {\\n\\n        headers: {\\n\\n            \\\"Cookie\\\": cookie\\n\\n        }\\n\\n    })).data;\\n\\n    groupContent.forEach(list => {\\n\\n        d.push({\\n\\n            title: \\\"<big><font color='blue'>\\\" + list.uname + \\\"</font></big><small>\\\" + list.sign + \\\"</small>\\\",\\n\\n            img: list.face + \\\"@Referer=\\\",\\n\\n            col_type: 'avatar',\\n\\n            url: \\\"hiker://page/upHome\\\",\\n\\n            extra: {\\n\\n                mid: list.mid,\\n\\n                title: list.uname,\\n\\n                face: list.face\\n\\n            }\\n\\n        });\\n\\n    });\\n\\n}\\n\\n\\n\"},{\"col_type\":\"movie_3\",\"name\":\"收藏列表\",\"path\":\"colection\",\"rule\":\"if (page == 1) {\\r\\n    d.push({\\r\\n        title: '我创建的收藏夹' == getItem('收藏类型', '我创建的收藏夹') ? '‘‘’’<font color=\\\"red\\\">我创建的收藏夹</font>' : '我创建的收藏夹',\\r\\n        url: $('#noLoading##noHistory#').lazyRule(() => {\\r\\n            setItem('收藏类型', '我创建的收藏夹')\\r\\n            refreshPage(true);\\r\\n            return \\\"hiker://empty\\\";\\r\\n        }),\\r\\n        col_type: 'scroll_button'\\r\\n    }, {\\r\\n        title: '稍后在看' == getItem('收藏类型', '我创建的收藏夹') ? '‘‘’’<font color=\\\"red\\\">稍后在看</font>' : '稍后在看',\\r\\n        url: $('#noLoading##noHistory#').lazyRule(() => {\\r\\n            setItem('收藏类型', '稍后在看')\\r\\n            refreshPage(true);\\r\\n            return \\\"hiker://empty\\\";\\r\\n        }),\\r\\n        col_type: 'scroll_button'\\r\\n    });\\r\\n}\\r\\nif (getItem('收藏类型', '我创建的收藏夹') == '我创建的收藏夹') {\\r\\n    try {\\r\\n        if (page == 1) {\\r\\n            d.push({\\r\\n                // col_type: 'blank_block'\\r\\n                col_type: 'line'\\r\\n            }, );\\r\\n        }\\r\\n        collections = JSON.parse(fetch(\\\"https://api.bilibili.com/x/v3/fav/folder/list4navigate\\\", {\\r\\n            headers: {\\r\\n                \\\"Cookie\\\": cookie\\r\\n            }\\r\\n        })).data;\\r\\n        groups = collections[0].mediaListResponse.list;\\r\\n        putMyVar('tempId', JSON.stringify(groups[0].id));\\r\\n        groups.forEach(list => {\\r\\n            d.push({\\r\\n                title: list.id == getItem('收藏夹', JSON.stringify(groups[0].id)) ? \\\"““””<font color='red'>\\\" + list.title + \\\"</font>\\\" : list.title,\\r\\n                url: $('#noLoading##noHistory#').lazyRule((list) => {\\r\\n                    setItem('收藏夹', JSON.stringify(list.id));\\r\\n                    refreshPage(true);\\r\\n                    return \\\"toast://切换收藏夹为:\\\" + list.title;\\r\\n                }, list),\\r\\n                col_type: 'scroll_button',\\r\\n            });\\r\\n        });\\r\\n        d.push({\\r\\n            col_type: 'line'\\r\\n        });\\r\\n        groupContent = JSON.parse(fetch(\\\"https://api.bilibili.com/x/v3/fav/resource/list?media_id=\\\" + getItem('收藏夹', getMyVar('tempId')) + \\\"&pn=\\\" + page + \\\"&ps=20&keyword=&order=mtime&type=0&tid=0&platform=web&jsonp=jsonp\\\", {\\r\\n            headers: {\\r\\n                \\\"Cookie\\\": cookie\\r\\n            }\\r\\n        })).data.medias;\\r\\n        groupContent.forEach(list => {\\r\\n            d.push({\\r\\n                title: list.title,\\r\\n                img: list.cover + \\\"@Referer=\\\",\\r\\n                col_type: 'movie_1_left_pic',\\r\\n                url: \\\"hiker://page/video\\\",\\r\\n                desc: 'UP:' + list.upper.name + '\\\\n' + list.intro,\\r\\n                extra: {\\r\\n                    aid: list.id,\\r\\n                    mid: list.upper.mid\\r\\n                }\\r\\n            });\\r\\n        });\\r\\n    } catch (e) {\\r\\n        showLoading('兄弟，你确认你有收藏吗，快去收藏一个视频~');\\r\\n    }\\r\\n} else {\\r\\n    laterViews = JSON.parse(fetch(\\\"https://api.bilibili.com/x/v2/history/toview/web?jsonp=jsonp\\\", {\\r\\n        headers: {\\r\\n            \\\"Cookie\\\": cookie\\r\\n        }\\r\\n    })).data;\\r\\n    count = laterViews.count;\\r\\n    d.push({\\r\\n        title: \\\"共有\\\" + count + \\\"条待看视频记录\\\",\\r\\n        url: \\\"hiker://empty\\\",\\r\\n        col_type: \\\"text_center_1\\\"\\r\\n    });\\r\\n    laterViews.list.forEach(list => {\\r\\n        d.push({\\r\\n            title: list.title,\\r\\n            img: list.pic + \\\"@Referer=\\\",\\r\\n            col_type: 'movie_1_left_pic',\\r\\n            url: \\\"hiker://page/video\\\",\\r\\n            desc: 'UP:' + list.owner.name + '\\\\n' + list.desc,\\r\\n            extra: {\\r\\n                aid: list.aid,\\r\\n                mid: list.owner.mid\\r\\n            }\\r\\n        });\\r\\n    });\\r\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"足迹\",\"path\":\"track\",\"rule\":\"var nextInfo = {};\\n\\nif (page == 1) {\\n\\n    histories = JSON.parse(fetch(\\\"https://api.bilibili.com/x/web-interface/history/cursor?max=0&view_at=0&business=\\\", {\\n\\n        headers: {\\n\\n            \\\"Cookie\\\": cookie\\n\\n        }\\n\\n    })).data;\\n\\n    nextInfo.max = histories.cursor.max;\\n\\n    nextInfo.view_at = histories.cursor.view_at;\\n\\n    nextInfo.business = histories.cursor.business;\\n\\n} else {\\n\\n    histories = JSON.parse(fetch(\\\"https://api.bilibili.com/x/web-interface/history/cursor?max=\\\" + storage0.getMyVar(JSON.stringify(page)).max + \\\"&view_at=\\\" + storage0.getMyVar(JSON.stringify(page)).view_at + \\\"&business=\\\" + storage0.getMyVar(JSON.stringify(page)).business, {\\n\\n        headers: {\\n\\n            \\\"Cookie\\\": cookie\\n\\n        }\\n\\n    })).data;\\n\\n    nextInfo.max = histories.cursor.max;\\n\\n    nextInfo.view_at = histories.cursor.view_at;\\n\\n    nextInfo.business = histories.cursor.business;\\n\\n}\\n\\nstorage0.putMyVar(JSON.stringify(page + 1), nextInfo);\\n\\nhistories.list.forEach(list => {\\n\\n    viewTime=pbtime = $.require(\\\"hiker://page/api\\\").timeConvert(list.view_at);\\n\\n    if (list.history.business == 'article') {\\n\\n        // 专栏文章\\n\\n        d.push({\\n\\n            title: list.show_title==''?list.title:list.show_title,\\n\\n            img: list.covers[0] + \\\"@Referer=\\\",\\n\\n            col_type: 'movie_1_left_pic',\\n\\n            url: \\\"hiker://page/articleDetail\\\",\\n\\n            desc: (list.author_name==''?viewTime:'UP:' + list.author_name+'\\\\n' )+ viewTime,\\n\\n            extra: {\\n\\n                id: list.history.oid,\\n\\n            }\\n\\n        });\\n\\n    } else if(list.history.business == 'article-list'){\\n\\n        // 文章列表？（反正id存放位置不一样）\\n\\n        d.push({\\n\\n            title: list.show_title==''?list.title:list.show_title,\\n\\n            img: list.covers[0] + \\\"@Referer=\\\",\\n\\n            col_type: 'movie_1_left_pic',\\n\\n            url: \\\"hiker://page/articleDetail\\\",\\n\\n            desc: (list.author_name==''?viewTime:'UP:' + list.author_name+'\\\\n' )+ viewTime,\\n\\n            extra: {\\n\\n                id: list.history.cid,\\n\\n            }\\n\\n        });\\n\\n    }else if(list.history.business == 'pgc'){\\n\\n        // 系列剧集（单集）\\n\\n        d.push({\\n\\n            title: list.show_title==''?list.title:list.show_title,\\n\\n            img: list.cover + \\\"@Referer=\\\",\\n\\n            col_type: 'movie_1_left_pic',\\n\\n            url: \\\"hiker://page/filmerji#immersiveTheme#\\\",\\n\\n            desc: (list.author_name==''?list.tag_name+'\\\\t\\\\t'+list.new_desc+'\\\\n'+viewTime:'UP:' + list.author_name+'\\\\n'+viewTime),\\n\\n            extra: {\\n\\n                ep_id:list.history.epid\\n\\n            }\\n\\n        });\\n\\n    }else {\\n\\n        // 普通video\\n\\n        d.push({\\n\\n            title: list.show_title==''?list.title:list.show_title,\\n\\n            img: list.cover + \\\"@Referer=\\\",\\n\\n            col_type: 'movie_1_left_pic',\\n\\n            url: \\\"hiker://page/video\\\",\\n\\n            desc: (list.author_name==''?list.tag_name+'\\\\t\\\\t'+list.new_desc+'\\\\n'+viewTime:'UP:' + list.author_name+'\\\\n'+viewTime),\\n\\n            extra: {\\n\\n                aid: list.history.oid,\\n\\n            }\\n\\n        });\\n\\n    }\\n\\n});\\n\\n\\n\"},{\"col_type\":\"movie_3\",\"name\":\"动态\",\"path\":\"latetNews\",\"rule\":\"d.push({\\n\\n    col_type: 'line_blank'\\n\\n});\\n\\nlatenews=$.require(\\\"hiker://page/api\\\").getDynamicData('myHome');\\n\\neval($.require(\\\"hiker://page/api\\\").showDynamicData());\\n\\n\"},{\"col_type\":\"movie_3\",\"name\":\"专栏列表\",\"path\":\"acticleList\",\"rule\":\"js:\\n\\nvar d=[];\\n\\npage=MY_PAGE;\\n\\nupMid = MY_PARAMS.mid + \\\"\\\";\\n\\narticleList=$.require(\\\"hiker://page/api\\\").getUserArticle(upMid,page);\\n\\narticleNum=articleList.count;\\n\\nif (articleNum==undefined) {\\n\\n    d.push({\\n\\n        title: '这up没有专栏文章',\\n\\n        url: \\\"hiker://empty\\\",\\n\\n        col_type: \\\"text_center_1\\\",\\n\\n    });\\n\\n}else{\\n\\n    maxPage = Math.ceil(articleNum / articleList.ps);\\n\\n    if (page <= maxPage) {\\n\\n        d.push({\\n\\n            title: '当前:第' + articleList.pn + '页\\\\t\\\\t\\\\t共有' + maxPage + '页,' + articleNum + '条数据',\\n\\n            url: \\\"hiker://empty\\\",\\n\\n            col_type: \\\"text_center_1\\\",\\n\\n        });\\n\\n        articleList.articles.forEach(list => {\\n\\n            pbtime=$.require(\\\"hiker://page/api\\\").timeConvert(list.publish_time);\\n\\n            d.push({\\n\\n                title: list.title,\\n\\n                img: list.banner_url==''? (list.image_urls+ '@Referer='):(list.banner_url+ '@Referer='),\\n\\n                desc: '‘‘’’<small>'+list.stats.view+'看过\\\\t\\\\t'+list.stats.like+'喜欢\\\\t\\\\t'+list.stats.favorite+'收藏\\\\n' + pbtime+'</small>',\\n\\n                col_type: 'movie_1_left_pic',\\n\\n                url: \\\"hiker://page/articleDetail\\\",\\n\\n                extra: {\\n\\n                    // 专栏文章id\\n\\n                    id: list.id\\n\\n                }\\n\\n            });\\n\\n        });\\n\\n    }\\n\\n}\\n\\nsetResult(d);\\n\\n\"},{\"col_type\":\"movie_3\",\"name\":\"专栏文章X5\",\"path\":\"articleDetail\",\"rule\":\"js:\\n\\nvar d = [];\\n\\npage = MY_PAGE;\\n\\ncvid = MY_PARAMS.id + \\\"\\\";\\n\\nd.push({\\n\\n    url: \\\"https://www.bilibili.com/read/cv\\\"+cvid,\\n\\n    col_type: \\\"x5_webview_single\\\",\\n\\n    desc: \\\"100%&&float\\\",\\n\\n    extra: {\\n\\n        canBack: true\\n\\n    }\\n\\n})\\n\\nsetResult(d);\\n\\n\"},{\"col_type\":\"movie_3\",\"name\":\"综合热门\",\"path\":\"hotVideo\",\"rule\":\"let res = JSON.parse(request(\\\"https://api.bilibili.com/x/web-interface/popular?pn=\\\" + MY_PAGE, {\\n\\n    headers: {\\n\\n        Cookie: JSON.parse(request(\\\"hiker://files/rules/cy/bili.txt\\\")).cookie\\n\\n    }\\n\\n})).data\\n\\nres.list.forEach(item => {\\n\\n    d.push({\\n\\n        title: item.title,\\n\\n        img: item.pic+ \\\"@Referer=\\\",\\n\\n        url: \\\"hiker://page/video\\\",\\n\\n        desc: item.pub_location,\\n\\n        col_type: \\\"movie_2\\\",\\n\\n        extra: {\\n\\n            \\\"aid\\\": item.aid,\\n\\n            \\\"cid\\\": item.cid,\\n\\n        }\\n\\n    })\\n\\n})\\n\\n\\n\"},{\"name\":\"哔哩最新章节\",\"path\":\"getUpdate\",\"rule\":\"if (MY_PARAMS.season_id) {\\n    season_id = MY_PARAMS.season_id + \\\"\\\";\\n    Data = JSON.parse(fetch('https://api.bilibili.com/pgc/view/web/season?season_id=' + season_id)).result;\\n} else {\\n    Data = JSON.parse(fetch('https://api.bilibili.com/pgc/view/web/season?ep_id=' + MY_PARAMS.ep_id)).result;\\n}\\n追剧日历 = Data.new_ep.desc;\\n更新进度 = Data.new_ep.title;\\n更新状态 = 追剧日历.match(/完结|期待/) ? 追剧日历 : '更新至' + (更新进度.match(/[\\\\u4e00-\\\\u9fa5]/) ? 更新进度 : ('第' + (更新进度 == '' ? 0 : 更新进度)) + '话')\\nsetResult(更新状态);\"},{\"name\":\"up合集视频\",\"path\":\"collectionViedo\",\"rule\":\"js:\\nvar d = [];\\n// 预处理\\nputMyVar('功能折叠', '关');\\nimgLink = storage0.getMyVar('图标');\\naid = MY_PARAMS.aid + \\\"\\\";\\n// bvid = MY_PARAMS.bvid + \\\"\\\";\\n// mid = MY_PARAMS.mid + \\\"\\\";\\ntry {\\n    //获取视频分P信息\\n    var p = JSON.parse(fetch(\\\"https://api.bilibili.com/x/web-interface/view?aid=\\\" + aid)).data;\\n    // 合集信息\\n    var videoData = p.ugc_season;\\n    setPageTitle(videoData.title);\\n    setPagePicUrl(videoData.cover + '@Referer=');\\n    d.push({\\n        title: videoData.title,\\n        desc:videoData.intro,\\n        img: videoData.cover + '@Referer=',\\n        url: $('#noLoading##noHistory#').lazyRule((intro) => {\\n            return $('hiker://empty?fypage').rule((intro) => {\\n                let d = [];\\n                d.push({\\n                    title: intro,\\n                    col_type: \\\"long_text\\\",\\n                })\\n                setResult(d);\\n            }, intro)\\n        }, videoData.intro),\\n        col_type: \\\"pic_1\\\",\\n        extra: {\\n            longClick: [{\\n                title: 'dm盒子', js: $.toString(() => {\\n                    return 'hiker://page/setting#noHistory#?rule=dm盒子';\\n                })\\n            }, {\\n                title: '弹幕控制', js: $.toString(() => {\\n                    if (getItem('isOverrideSave', 'false') == 'true') {\\n                        setItem('isOverrideSave', 'false');\\n                        return 'toast://弹幕将不受dm盒子参数控制';\\n                    } else {\\n                        setItem('isOverrideSave', 'true');\\n                        return 'toast://弹幕将受到dm盒子参数控制';\\n                    }\\n                })\\n            }]\\n        }\\n    }, {\\n        title: '<font color=\\\"blue\\\">' + p.owner.name + '</font>',\\n        url: \\\"hiker://page/upHome\\\",\\n        img: p.owner.face + \\\"@Referer=\\\",\\n        col_type: \\\"avatar\\\",\\n        desc: '<small><small>共有' + videoData.ep_count + '条视频数据</small></small>',\\n        extra: {\\n            mid: p.owner.mid,\\n            title: p.owner.name,\\n            face: p.owner.face\\n        }\\n    }, {\\n        col_type: 'line'\\n    });\\n    var index = 1;\\n    storage0.putVar('videoSections', videoData.sections);\\n    videoData.sections.forEach(el => {\\n        d.push({\\n            title: '📁' + el.title,\\n            url: $('#noLoading##noHistory#').lazyRule((index) => {\\n                if (getMyVar('isFold_'+index, 'y') == 'y') {\\n                    putMyVar('isFold_'+index, 'n');\\n                    deleteItemByCls('section' + index + '-part');\\n                    return 'toast://已折叠';\\n                } else {\\n                    putMyVar('isFold_'+index, 'y');\\n                    videoSections = storage0.getVar('videoSections');\\n                    sectionPartList = [];\\n                    videoSections[index - 1].episodes.forEach(item => {\\n                        aid = item.aid;\\n                        cid = item.cid;\\n                        stat = item.arc.stat;\\n                        sectionPartList.push({\\n                            title: '““””\\\\t\\\\t\\\\t<small></font>▶︎' + item.title + '\\\\n\\\\t\\\\t\\\\t\\\\t\\\\t</font></small><small><small><font color=gray>播放量：' + stat.view + '\\\\t\\\\t\\\\t弹幕：' + stat.danmaku + '\\\\t\\\\t\\\\t喜欢：' + stat.like + '</font></small></small>',\\n                            url: $().lazyRule((aid, cid, qn) => {\\n                                return $.require(\\\"hiker://page/api\\\").biliLazy(aid, cid, qn).replace(/;/g, \\\"；；\\\");\\n                            }, aid + \\\"\\\", cid + \\\"\\\", '116'),\\n                            col_type: \\\"text_1\\\",\\n                            extra: { lineVisible: false, cls: 'section' + index + '-part',id:'aid-'+aid+'|cid-'+cid }\\n                        })\\n                    });\\n                    addItemAfter('Section' + index, sectionPartList);\\n                    return 'toast://已展开';\\n                }\\n            }, index),\\n            col_type: 'text_1',\\n            extra: { id: 'Section' + index }\\n        });\\n        el.episodes.forEach(item => {\\n            aid = item.aid;\\n            cid = item.cid;\\n            stat = item.arc.stat;\\n            d.push({\\n                title: '““””\\\\t\\\\t\\\\t<small></font>▶︎' + item.title + '\\\\n\\\\t\\\\t\\\\t\\\\t\\\\t</font></small><small><small><font color=gray>播放量：' + stat.view + '\\\\t\\\\t\\\\t弹幕：' + stat.danmaku + '\\\\t\\\\t\\\\t喜欢：' + stat.like + '</font></small></small>',\\n                url: $().lazyRule((aid, cid, qn) => {\\n                    return $.require(\\\"hiker://page/api\\\").biliLazy(aid, cid, qn).replace(/;/g, \\\"；；\\\");\\n                }, aid + \\\"\\\", cid + \\\"\\\", '116'),\\n                col_type: \\\"text_1\\\",\\n                extra: { lineVisible: false, cls: 'section' + index + '-part',id:'aid-'+aid+'|cid-'+cid }\\n            })\\n        });\\n        index++;\\n    })\\n} catch (e) {\\n    log(e);\\n    d.push({\\n        title: '页面走丢了...',\\n        img: 'https://i0.hdslb.com/bfs/general/f7b667011a46615732c701f4bb1d07f793f8d1df.png@Referer=',\\n        url: 'hiker://empty',\\n        desc: '大概率视频被封禁，或者up已跑路~',\\n        col_type: \\\"pic_1\\\"\\n    });\\n}\\nsetResult(d);\\n\"},{\"name\":\"图标下载\",\"path\":\"saveLocal\",\"rule\":\"$.exports.saveLocal = () => {\\n    const base64ToHex = (base64Str) => {\\n        // 删除前缀并解码Base64字符串\\n        var binaryStr = window0.atob(base64Str.split(',')[1]);\\n\\n        // 转换为16进制字符串\\n        var hexStr = '';\\n        for (var i = 0; i < binaryStr.length; i++) {\\n            var hex = binaryStr.charCodeAt(i).toString(16);\\n            hexStr += (hex.length === 2 ? hex : '0' + hex);\\n        }\\n        return hexStr;\\n    };\\n    showLoading(\\\"图标初始化中...\\\");\\n    var tubiao = {};\\n    try {\\n        // 剪贴板线路\\n        html = request('https://netcut.cn/p/a1fcf0d3b0a27f13');\\n        data = html.match(/{.*note_content.*updated_at.*}/)[0];\\n        eval('tubiao =' + JSON.parse(data).note_content);\\n    } catch (e) {\\n        log('剪贴板出错,切换托管线路');\\n        route = [\\n            'https://gitcode.net/qq_23847819/hiker/-/raw/master/tubiao.json',\\n            'https://gitea.com/cy/hiker/raw/commit/be2160c6a01db873d9f9681ba7e86eebfa118d86/tubiao.json',\\n            'https://raw.codehub.cn/p/hiker/d/tubiao/git/raw/master/tubiao.json?token=GGdlIuVGqY3b3LydIowrksbUBCfMyx2fF31WUZeo4m',\\n            'https://gitee.com/mxxl-cy/hiker/raw/master/tubiao.json'\\n        ];\\n        for (let i = 0; i < route.length; i++) {\\n            try {\\n                eval('tubiao =' + request(route[i]));\\n                if (tubiao[\\\"五大\\\"] && tubiao[\\\"哔哩\\\"]) {\\n                    break;\\n                } else {\\n                    log('线路：' + tubiao[i] + '被墙了...');\\n                }\\n            } catch (e) {\\n                log('线路：' + tubiao[i] + '出错了...');\\n            }\\n        }\\n    }\\n    try {\\n        var wuda = tubiao[\\\"五大\\\"];\\n        var bili = tubiao[\\\"哔哩\\\"];\\n        var index = 0;\\n        for (let item in wuda) {\\n            writeHexFile(`hiker://files/rules/cy/tubiao/${item}.svg`, base64ToHex(wuda[item]));\\n            log(`初始化第${index++}个图标:${item}...`);\\n        }\\n        for (let item in bili) {\\n            writeHexFile(`hiker://files/rules/cy/bili_pic/${item}.png`, base64ToHex(bili[item]));\\n            log(`初始化第${index++}个图标:${item}...`);\\n        }\\n        showLoading('图标初始化完成：共计' + index + '个图标');\\n        hideLoading();\\n    } catch (e) {\\n        showLoading('图标初始化失败');\\n        log('图标初始化失败:' + e);\\n        hideLoading();\\n    }\\n\\n};\\n\"}]","proxy":"","icon":"hiker://files/rules/cy/tubiao/bilibili.svg"},{"last_chapter_rule":"","pageList":[],"title":"有声🎧","author":"缘分","version":0,"type":"music","url":"http://www.wellsoftteam.cn/voice/list/voicetypepage?pageNum=fypage&pageSize=40&title=&keyword=&types=fyAll&ordercode=","col_type":"movie_3","class_name":"玄幻&武侠&都市&言情&悬疑&推理","class_url":"4028818b451343a10145134427090000&4028818b451343a10145134427350001&4028818b451343a10145134427360002&4028818b451343a10145134427370003&4028818b451343a10145134427390004&4028818b451343a101451344273b0006","area_name":"历史&军事&官场&商战&相声","area_url":"4028818b451343a101451344273d0007&4028818b451343a1014513442bbbbbbb&4028818b451343a101451344273f0008&4028818b451343a10145134427400009&4028818b451343a101451344274b0010","sort_name":"","year_name":"评书&文学&情感&广播&讲坛","sort_url":"","year_url":"4028818b451343a1014513442aaaaaaa&4028818b451343a101451344273a0005&4028818b451343a101451344274a000f&4028818b451343a1014513442745000c&4028818b451343a101451344274d0011","find_rule":"js:\nvar d = [];\nhtml = getResCode();\nvar list = JSON.parse(html).voicelist\ntry {\n    list.forEach(data => {\n        d.push({\n            title: data.name,\n            desc: data.zt,\n            img: data.picurl + '@Referer=',\n            url: 'http://www.wellsoftteam.cn/voice/list/voicepage?pageNum=fypage&typeid=' + data.id+\"#immersiveTheme#\",\n            col_type: '',\n            extra: {\n                title: data.by,\n                desc: data.updatetime,\n                img: data.picurl,\n                jj: data.des,\n                js: data.js\n            }\n        })\n    })\n} catch (e) {}\nsetResult(d)","searchFind":"js:\nvar d = [];\nhtml = getResCode();\nvar list = JSON.parse(html).voicelist\ntry {\n    list.forEach(data => {\n        d.push({\n            title: data.name,\n            desc: data.zt,\n            img: data.picurl + '@Referer=',\n            url: 'http://www.wellsoftteam.cn/voice/list/voicepage?pageNum=fypage&typeid=' + data.id+\"#immersiveTheme#\",\n            col_type: '',\n            extra: {\n                title: data.by,\n                desc: data.updatetime,\n                img: data.picurl,\n                jj: data.des\n            }\n            \n        })\n    })\n} catch (e) {}\nsetResult(d)","search_url":"http://www.wellsoftteam.cn/voice/list/voicesearchpage?pageNum=fypage&title=**","group":"①推荐","detail_col_type":"movie_1","detail_find_rule":"js:\nvar d = [];\nhtml = getResCode();\nlog(Math.ceil(MY_PARAMS.js/20))\nif (MY_PAGE == 1) {\n    d.push({\n        title:  MY_PARAMS.title,\n        desc: MY_PARAMS.desc,\n        img: MY_PARAMS.img + '@Referer=',\n        url: MY_PARAMS.img,\n        col_type: 'movie_1_vertical_pic_blur',\n        extra: {\n            gradient: true\n        }\n    })\n    var 简介 = MY_PARAMS.jj\n    d.push({\n        title: '‘‘’’<small><font color=\"#ff148e8e\">简介：' + 简介.substr(0, 55) + '...</font><small><font color=\"red\">详情</font></small></small>',\n        url: 'hiker://empty#' + '\\n' + 简介 + '#noHistory#' + `@rule=js: var d = [];d.push({title:'简介：'+ MY_URL.split('#')[1],col_type: 'long_text'}); setResult(d);`,\n        col_type: 'text_1'\n    });\n}\nvar list = JSON.parse(html).voicelist\ntry {\n    list.forEach(data => {\n        d.push({\n            title: data.title,         \n            url: data.downurl,\n            col_type: 'text_2',\n        })\n    })\n} catch (e) {}\nsetResult(d)","sdetail_col_type":"movie_1","sdetail_find_rule":"*","ua":"mobile","preRule":"","pages":"[]","proxy":"","icon":"https://api.xinac.net/icon/?url=http://www.wellsoftteam.cn/"},{"last_chapter_rule":"","pageList":[{"col_type":"movie_3","name":"小类次---多层","path":"xiaoleici","rule":"js:\nlet init_cate1 = [];\nfor (let i = 0; i < 20; i++) {\n    init_cate1.push('0');\n}\n\nif (MY_PAGE === 1) {\n    const cate_temp_json1 = getMyVar('t1', JSON.stringify(init_cate1));\n    const cate_temp1 = JSON.parse(cate_temp_json1);\n    const classlist1 = pdfa(html, 小类次);\n    // log('sublist  is    ' + sublist)\n    classlist1.forEach((smallclass1, key1) => {\n        let sublist1 = pdfa(smallclass1, \"body&&a\");\n        let j = 0;\n        sublist1.forEach((it, jj) => {\n            d.push({\n                title: jj.toString() === cate_temp1[key1] ? \"““\" + pdfh(it, \"a&&Text\") + \"””\" : pdfh(it, \"a&&Text\"),\n                url: pd(it, \"a&&href\") + $('#noLoading#').lazyRule((params1) => {\n                    let new_cate1 = [];\n                    params1.cate_temp1.forEach((cate, index) => {\n                        new_cate1.push(index === 0 ? params1.key1.toString() : '0');\n                    })\n                    putMyVar('t1', JSON.stringify(new_cate1));\n\n                    params1.cate_temp1[params1.key1] = params1.jj.toString();\n                    putMyVar('t1', JSON.stringify(params1.cate_temp1));\n                    //putMyVar('subclassIndex', jj);\n                    // putVar(MY_RULE.title, JSON.stringify(jj));\n                    putVar(MY_RULE.url, input);\n                    refreshPage(true)\n                    return 'hiker://empty';\n                }, {\n\n                    cate_temp1: cate_temp1,\n                    jj: jj,\n                    key1: key1,\n                    page: MY_PAGE,\n                }),\n                col_type: \"scroll_button\",\n            });\n        })\n        d.push({\n            col_type: \"blank_block\"\n        });\n    })\n}"},{"col_type":"movie_3","name":"lazy","path":"lazy","rule":"var lazy = $('').lazyRule(() => {\n    try {\n        \n        var html = JSON.parse(fetchCodeByWebView(input).match(/r player_.*?=(.*?)</)[1])\n        var url = html.url\n        if (html.encrypt == '1') {\n            url = unescape(url);\n        } else if (html.encrypt == '2') {\n            url = unescape(base64Decode(url));\n        }\n        if (/m3u8|mp4/.test(url)) {\n            return url\n        } else {\n            return 'video://' + input\n        }\n    } catch (e) {\n        return 'video://' + input\n    }\n})"},{"col_type":"movie_3","name":"短评","path":"comment","rule":"js:\nvar d = [];\nlet true_url = getVar(MY_RULE.url, MY_URL).split('##')[0]\nvar num=(MY_PAGE-1)*20;\nif(/start/.test(true_url)){\n true_url=true_url+\"&start=\"+num+\"&limit=20\";\n}\nconst 小类次次=\".CommentTabs\";\nvar html = fetch(true_url, {\n    headers: {\n        \"User-Agent\": PC_UA\n    }\n});\nif (MY_PAGE==1){\nd.push({\n    col_type: 'blank_block',\n    });\nd.push({\n    col_type: 'rich_text',\n    title:pdfh(html, 'h1&&Text'),\nextra:{\n        \n        textSize:30,\n    }});}\neval(JSON.parse(request('hiker://page/xiaoleicici')).rule);\npdfa(html, \"#comments&&.comment-item\").forEach(x => {\n    d.push({\n    col_type: 'text_1',\n    title:'““””<small><span><font color=red>' +parseDomForHtml(x, '.comment-info&&a&&Text')+'\\t'+parseDomForHtml(x, '.comment-time&&Text')+'\\t'+parseDomForHtml(x, '.comment-location&&Text')+'\\t\\t\\t'+parseDomForHtml(x, '.comment-vote&&Text') + '</span></small></small>',\n    img:pd(x, 'img&&src'),\n    url:\"hiker://empty\",\n    });\n  let 短评 = parseDomForHtml(x, '.short&&Text');\nd.push({\n    title: 短评,\n    url: $().rule((短评) => {\n        setResult([{\n            title: 短评,\n            col_type: 'rich_text'\n        }])\n    }, 短评),\n    col_type: 'text_1'\n});\n})\nsetResult(d);"},{"col_type":"movie_3","name":"资源搜索","path":"searchzy","rule":"//资源搜索\nhtml = getResCode();\nlet title = parseDomForHtml(html,'h1&&Text');\nd.push({\n    col_type: 'line',\n    })\nd.push({\n    title: '搜索相关的影视资源',\n    col_type: 'avatar',\n    url: 'hiker://search?s='+title+'&rule=青豆',\n    img: 'https://ghproxy.net/https://raw.githubusercontent.com/ls125781003/lmtubiao/main/messy/24.svg'\n    });\nd.push({\n    col_type: 'line',\n    })\nd.push({\n    title: '图书馆Pro',\n    col_type: 'icon_5',\n    url: 'hiker://search?s='+title+'&rule=图书馆Pro',\n    img: 'https://gdown.baidu.com/img/0/512_512/f53bcf56bad60969487d3f5c90ec6012.png'\n    });\nd.push({\n    title: 'AI搜书',\n    col_type: 'icon_5',\n    url: 'hiker://search?s='+title+'&rule=AI搜书',\n    img: 'http://gimg0.baidu.com/gimg/src=http%3A%2F%2Fgdown.baidu.com%2Fimg%2F0%2F512_512%2F25529fb96fb19a1ffdbaaf0f6157cda9.png&app=2008&fmt=auto&size=b219,219&n=0&g=0n&sec=1693384742&t=fb503d56bfec119538b01a5dea2400c8'\n    });\nd.push({\n    title: '搜书君',\n    col_type: 'icon_5',\n    url: 'hiker://search?s='+title+'&rule=搜书君',\n    img: 'https://ghproxy.net/https://raw.githubusercontent.com/ls125781003/lmtubiao/main/square/416.png'\n    });\nd.push({\n    title: '知搜',\n    col_type: 'icon_5',\n    url: 'https://zhiso.cc/search/?q='+title,\n    img: 'https://zhiso.cc/static/image/favicon.ico'\n    });\nd.push({\n    title: '可阅',\n    col_type: 'icon_5',\n    url: 'https://kepub.net/search.html?keyword='+title,\n    img: 'https://kepub.net/favicon.ico'\n    });\nd.push({\n    title: '京东读书',\n    col_type: 'icon_5',\n    url: 'https://m-tob.jd.com/search_dosearch?serch='+title,\n    img: 'https://m-tob.jd.com/static/img/logo.png'\n    });\nd.push({\n    title: '熊猫搜书',\n    col_type: 'icon_5',\n    url: \"https://www.mrsd.top/search.html?keywords=\"+title,\n    img: 'https://ghproxy.net/https://raw.githubusercontent.com/ls125781003/lmtubiao/main/square/176.png'\n    });\nd.push({\n    title: 'Taco搜索',\n    col_type: 'icon_5',\n    url: 'https://www.tacoso.cc/search?keyword='+title+'&authCode=&_csrf=HxTkOkjK-FSDVcxd6VOCgX5Q4zKh3o2SwFAY',\n    img: 'https://ghproxy.net/https://raw.githubusercontent.com/ls125781003/lmtubiao/main/circle/35.png'\n    });\nd.push({\n    title: '热点图书网',\n    col_type: 'icon_5',\n    url: 'http://www.happydot.top/?s='+title,\n    img: 'https://ghproxy.net/https://raw.githubusercontent.com/ls125781003/lmtubiao/main/rounded/122.png'\n    });\nd.push({\n    title: '书舟搜索',\n    col_type: 'icon_5',\n    url: 'https://www.shuzhou.cc/?s='+title,\n    img: 'https://www.shuzhou.cc/favicon.ico'\n    });"},{"col_type":"movie_3","name":"原文摘录","path":"blockquote","rule":"js:\nvar d = [];\nlet true_url = getVar(MY_RULE.url, MY_URL).split('##')[0]\nvar num=(MY_PAGE-1)*20;\nif(/start/.test(true_url)){\n   true_url = true_url.replace(\"?_t=0\",\"\");\n}else{\n   true_url=true_url+\"&start=\"+num;  \n}\nconst 小类次次次次=\".nav-tab\";\nvar html = fetch(true_url, {\n    headers: {\n        \"User-Agent\": PC_UA\n    }\n});\nif (MY_PAGE==1){\nd.push({\n    col_type: 'blank_block',\n    });\nd.push({\n    col_type: 'rich_text',\n    title:pdfh(html, 'h1&&Text'),\nextra:{\n        \n        textSize:30,\n    }});}\neval(JSON.parse(request('hiker://page/小类次次次次')).rule);\n   const  blockquote= pdfa(html, \"body&&.blockquote-list&&li\")\n        blockquote.forEach(x => {\nd.push({\n    col_type: 'avatar',\n    title:'<small><span>' + parseDomForHtml(x, '.author-name&&Text')+'\\t\\t'+parseDomForHtml(x, 'span&&Text')+'\\t\\t'+parseDomForHtml(x, 'datetime&&Text')+ '</span><small>',\n    img:pd(x, 'img&&src'),\n    url:pd(x, 'a&&href'),\n    });\n  let 摘录内容 = parseDomForHtml(x, 'figure&&Text');\nd.push({\n    title:摘录内容 ,\n    url: $().rule((摘录内容) => {\n        setResult([{\n            title: 摘录内容,\n            col_type: 'rich_text'\n        }])\n    }, 摘录内容),\n    col_type: 'text_1'\n});\n})\nsetResult(d)"},{"col_type":"movie_3","name":"读书笔记","path":"annotation","rule":"js:\nvar d = [];\nlet true_url = getVar(MY_RULE.url, MY_URL).split('##')[0]\nvar num=(MY_PAGE-1)*10;\nif(/start/.test(true_url)){\n   true_url=true_url.replace(\"?_t=0\",\"\"); \n}else{\n   true_url=true_url+\"&start=\"+num;  \n}\nlog(true_url)\nconst 小类次次次次次 = \".green_tab\";\nvar html = fetch(true_url, {\n    headers: {\n        \"User-Agent\": PC_UA\n    }\n});\nif (MY_PAGE==1){\nd.push({\n    col_type: 'blank_block',\n    });\nd.push({\n    col_type: 'rich_text',\n    title:pdfh(html, 'h1&&Text'),\nextra:{\n        \n        textSize:30,\n    }});}\neval(JSON.parse(request('hiker://page/小类次次次次次')).rule);\n   const bd= pdfa(html, \"body&&.comments&&li\")\n        bd.forEach(x => {\nd.push({\n    col_type: 'avatar',\n    title:parseDomForHtml(x, '.user&&title&&Text')+parseDomForHtml(x, '.allstar50&&span'),\n    img:pd(x, 'img&&src'),\n    url:pd(x, 'a&&href'),\n    });\nd.push({\n    col_type: 'text_1',\n    title:parseDomForHtml(x, '.nlst&&a,2&&Text'),\n    url:pd(x, 'a&&href'),\n    });\n  let 读书笔记 = parseDomForHtml(x, '.all&&Text');\nd.push({\n    title:'““””<big><span>' +读书笔记 + '</span></big>',\n    url: $().rule((读书笔记) => {\n        setResult([{\n            title: 读书笔记,\n            col_type: 'rich_text'\n        }])\n    }, 读书笔记),\n    col_type: 'text_1'\n});\n})\nsetResult(d)"},{"col_type":"movie_3","name":"二级","path":"erji","rule":"js:\nvar d =  [];\nhtml = getResCode();\nlet list = parseDomForHtml(html,'body&&a');\nlet title = parseDomForHtml(html,'h1&&Text');\nlet id = pdfa(html,'body&&.page')\n//二级头部简介(作者，评分，出版社等)\nd.push({\n    col_type: 'movie_1_vertical_pic_blur',\n    extra: {gradient: true},\n    title:parseDomForHtml(html, 'h1&&Text')+parseDomForHtml(id,'section&&data-id')+'\\n'+parseDomForHtml(html, '.rating_self&&Text')+'\\t'+'力荐指数:'+parseDomForHtml(html, '.rating_per&&Text'),\n    desc:parseDomForHtml(html, '.subject&&Text'),\n    img:parseDom(html, 'img&&src'),\n    });\nd.push({\n    title: \"短评\",\n    url:   $(MY_URL.replace('#immersiveTheme#', '') + \"comments/?start=fypage@-1@*20@&limit=20&status=P&sort=score\").rule(() => {\n\n        return eval(JSON.parse(request('hiker://page/comment')).rule)\n    }),\n    col_type: \"icon_5\",\n    pic_url: \"https://ghproxy.net/https://raw.githubusercontent.com/ls125781003/lmtubiao/main/unframed/262.png\"\n});\nd.push({\n    title: \"原文摘录\",\n    url:  $(MY_URL.replace('#immersiveTheme#', '') + \"blockquotes?sort=score&start=fypage@-1@*20@?_t=0\").rule(() => {\n\n        return eval(JSON.parse(request('hiker://page/blockquote')).rule)\n    }),\n    col_type: \"icon_5\",\n    pic_url: \"https://ghproxy.net/https://raw.githubusercontent.com/ls125781003/lmtubiao/main/unframed/356.png\"\n});\nd.push({\n    title: \"读书笔记\",\n    url:  $(MY_URL.replace('#immersiveTheme#', '') + \"annotation?sort=rank&start=fypage@-1@*10@?_t=0\").rule(() => {\n        return eval(JSON.parse(request('hiker://page/annotation')).rule)\n    }),\n    col_type: \"icon_5\",\n    pic_url: \"https://ghproxy.net/https://raw.githubusercontent.com/ls125781003/lmtubiao/main/unframed/375.png\"\n});\nd.push({\n    title: \"书评\",\n    url:    $(MY_URL.replace('#immersiveTheme#', '') + \"reviews?start=fypage\").rule(() => {\n\n        return eval(JSON.parse(request('hiker://page/reviews')).rule)\n    }),\n    col_type: \"icon_5\",\n    pic_url: \"https://ghproxy.net/https://raw.githubusercontent.com/ls125781003/lmtubiao/main/unframed/231.png\"\n});\nd.push({\n    title: \"论坛\",\n    url:    $(MY_URL.replace('#immersiveTheme#', '') + \"discussion/?start=fypage@-1@*20@&sort_by=time\").rule(() => {\n\n        return eval(JSON.parse(request('hiker://page/discussion')).rule)\n    }),\n    col_type: \"icon_5\",\n    pic_url: \"https://ghproxy.net/https://raw.githubusercontent.com/ls125781003/lmtubiao/main/unframed/578.png\"\n});\nd.push({\n    col_type: 'line_blank',\n    })\nd.push({\n    col_type: 'line',\n    })\nd.push({\n    title: '搜索相关的影视资源',\n    col_type: 'avatar',\n    url: 'hiker://search?s='+title+'&rule=青豆',\n    img: 'https://ghproxy.net/https://raw.githubusercontent.com/ls125781003/lmtubiao/main/messy/24.svg'\n    });\nd.push({\n    col_type: 'line',\n    })\nd.push({\n    title: '图书馆Pro',\n    col_type: 'icon_5',\n    url: 'hiker://search?s='+title+'&rule=图书馆Pro',\n    img: 'https://gdown.baidu.com/img/0/512_512/f53bcf56bad60969487d3f5c90ec6012.png'\n    });\nd.push({\n    title: 'AI搜书',\n    col_type: 'icon_5',\n    url: 'hiker://search?s='+title+'&rule=AI搜书',\n    img: 'http://gimg0.baidu.com/gimg/src=http%3A%2F%2Fgdown.baidu.com%2Fimg%2F0%2F512_512%2F25529fb96fb19a1ffdbaaf0f6157cda9.png&app=2008&fmt=auto&size=b219,219&n=0&g=0n&sec=1693384742&t=fb503d56bfec119538b01a5dea2400c8'\n    });\nd.push({\n    title: '搜书君',\n    col_type: 'icon_5',\n    url: 'hiker://search?s='+title+'&rule=搜书君',\n    img: 'https://ghproxy.net/https://raw.githubusercontent.com/ls125781003/lmtubiao/main/square/416.png'\n    });\nd.push({\n    title: '知搜',\n    col_type: 'icon_5',\n    url: 'https://zhiso.cc/search/?q='+title,\n    img: 'https://zhiso.cc/static/image/favicon.ico'\n    });\nd.push({\n    title: '可阅',\n    col_type: 'icon_5',\n    url: 'https://kepub.net/search.html?keyword='+title,\n    img: 'https://kepub.net/favicon.ico'\n    });\nd.push({\n    title: '京东读书',\n    col_type: 'icon_5',\n    url: 'https://m-tob.jd.com/search_dosearch?serch='+title,\n    img: 'https://m-tob.jd.com/static/img/logo.png'\n    });\nd.push({\n    title: '熊猫搜书',\n    col_type: 'icon_5',\n    url: \"https://www.mrsd.top/search.html?keywords=\"+title,\n    img: 'https://ghproxy.net/https://raw.githubusercontent.com/ls125781003/lmtubiao/main/square/176.png'\n    });\nd.push({\n    title: 'Taco搜索',\n    col_type: 'icon_5',\n    url: 'https://www.tacoso.cc/search?keyword='+title+'&authCode=&_csrf=HxTkOkjK-FSDVcxd6VOCgX5Q4zKh3o2SwFAY',\n    img: 'https://ghproxy.net/https://raw.githubusercontent.com/ls125781003/lmtubiao/main/circle/35.png'\n    });\nd.push({\n    title: '热点图书网',\n    col_type: 'icon_5',\n    url: 'http://www.happydot.top/?s='+title,\n    img: 'https://ghproxy.net/https://raw.githubusercontent.com/ls125781003/lmtubiao/main/rounded/122.png'\n    });\nd.push({\n    title: '书舟搜索',\n    col_type: 'icon_5',\n    url: 'https://www.shuzhou.cc/?s='+title,\n    img: 'https://www.shuzhou.cc/favicon.ico'\n    });\nd.push({\n    col_type: 'line_blank',\n    });\nd.push({\n    col_type: 'rich_text',\n    title:'📄书籍信息',\nextra:{\n        \n        textSize:22,\n    }},\n    {\ncol_type: 'line',\n    });\nlet 丛书信息 = parseDomForHtml(html, '.subject_show&&Text');\n丛书信息= 丛书信息.replace('丛书信息 · · · · · · 　　','').replace('支持 Web、iPhone、iPad、Android 阅读器','').replace(' · · · · · · ','：')\nd.push({\n    col_type: 'rich_text',\n    title:丛书信息,\n    desc:'',\n    });\nlet 内容简介 = parseDomForHtml(html, '.all&&Text') ? parseDomForHtml(html, '.all&&Text') : parseDomForHtml(html, '.intro&&Text');\nd.push({\n    title: '内容简介',\n    url: $().rule((内容简介) => {\n        setResult([{\n            title: 内容简介,\n            col_type: 'long_text'\n\n        }])\n    }, 内容简介),\n    col_type: 'text_3'\n});\n\nlet 作者简介 = parseDomForHtml(html, '.indent,3&&Text');\nd.push({\n    title: '作者简介',\n    url: $().rule((作者简介) => {\n        setResult([{\n            title: 作者简介,\n            col_type: 'long_text'\n        }])\n    }, 作者简介),\n    col_type: 'text_3'\n});\nd.push({\n    title: \"书单推荐\",\n    url:    $(MY_URL.replace('#immersiveTheme#', '')+ \"doulists?start=fypage@-1@*20@?_t=0\").rule(() => {\n        return eval(JSON.parse(request('hiker://page/doulists')).rule)\n    }),\n    col_type: \"text_3\",\n    pic_url: \"\"\n});\nd.push({\n    col_type: 'line_blank',\n    });\nd.push({\n    col_type: 'rich_text',\n    title:'👍相似推荐',\nextra:{     \n        textSize:22,\n    }\n    }  , {\ncol_type: 'line',\n    });   \nconst  rec= pdfa(html, \"body&&dl\")\n  for (var i = 5; i < rec.length&& i<10; i++) {\nd.push({\n    col_type: 'movie_3',\n    title:pdfh(rec[i], 'dd&&Text'),\n    img:pd(rec[i], 'img&&src'),\n    url:pd(rec[i], 'a&&href')+'#immersiveTheme#'+'@rule=js:var d = [];$.require(\"hiker://page/erji\")',\n    });\n}\nfor (var i = 11; i < rec.length&& i<15; i++) {\nd.push({\n    col_type: 'movie_3',\n    title:pdfh(rec[i], 'dd&&Text'),\n    img:pd(rec[i], 'img&&src'),\n    url:pd(rec[i], 'a&&href')+'#immersiveTheme#'+'@rule=js:var d = [];$.require(\"hiker://page/erji\")',\n    });\n}\nd.push({col_type: 'big_big_blank_block'});\nsetResult(d);"},{"col_type":"movie_3","name":"标签页","path":"tag","rule":"js:\n//本程序才用L大佬翻页\naddListener(\"onClose\", () => {\n    for (let it of listMyVarKeys()) {\n        clearMyVar(it);\n    }\n});\naddListener(\"onRefresh\", () => {\n    clearMyVar(\"nextPage\");\n    clearMyVar('classIndex');\n    clearMyVar('t');\n    clearMyVar('t1');\n});\nvar d = [];\n\n//var 大类 = \".abc\";\nvar 小类 = \"#content&&tr\"; //多层-----小类\n//var 小类次 = \"#content&&.hot-tags-col5&&li:has(li:nth-child(n+2))\"; \n\nMY_URL = MY_URL.replace('hiker://empty##', '')\n\n//log(MY_URL)\nlet true_url = getVar(MY_RULE.url, MY_URL).split('##')[0]\n\n//true_url = true_url.replace(\"type\", \"show\")\nlog('true_url' + true_url)\nconst page = MY_PAGE\n\n\n//获取上次缓存的下页链接\nlet nextPage = getMyVar(\"nextPage\", \"\");\n//如果有下一页且不是第一页就使用下一页链接\nif (nextPage && MY_PAGE > 1) {\n    true_url = nextPage;\n} \nvar html = fetchPC(true_url)\ntry {\n    //缓存下一页\n    let nextUrl = pd(html, \"a:contains(后页)&&href\"); \n    putMyVar(\"nextPage\", nextUrl || \"\");\n    log(\"nextUrl----------------------\")\n    log(nextUrl)\n} catch (e) {\n    clearMyVar(\"nextPage\");\n    toast(\"好像没有下一页了！\");\n}\n\nif (MY_PAGE == 1) {\nd.push({\n        img:'/storage/emulated/0/Android/data/com.example.hikerview/files/Documents/H_轮播图/阅读.gif',\n        col_type: \"pic_1_full\",\n        url:'hiker://empty'\n    });\nd.push({\n        title: '搜索',\n        col_type: 'input',\n        url: \"'hiker://search?s='+input+'&rule=豆瓣读书'\",\n        })\nd.push({\n        title: \"豆瓣TOP榜\",\n        url: \"https://book.douban.com/top250\" + $('#immersiveTheme#').lazyRule(() => {\n            putVar(MY_RULE.url, input);\n            refreshPage();\n            return 'hiker://empty';\n        }),\n        col_type: \"scroll_button\",\n        desc: \"\",\n        pic_url: \"\"\n    });\nd.push({\n        title: '小说排行榜',\n        col_type: 'scroll_button',\n        url: \"hiker://home@起点排行\",\n        })\nd.push({\n        title: '微信阅读榜',\n        col_type: 'scroll_button',\n        url: \"hiker://home@微信阅读\",\n        })\nd.push({\n        title: '书架',\n        col_type: 'scroll_button',\n        url: \"hiker://page/Main.view?rule=本地资源管理\",\n        })\n    d.push({\n        title: \"标签\",\n        url: \"https://book.douban.com/tag/?view=type&icn=index-sorttags-hot#%E7%A7%91%E6%8A%80\" + $('#immersiveTheme#').lazyRule(() => {\n            putVar(MY_RULE.url, input);\n            refreshPage();\n            return 'hiker://empty';\n        }),\n        col_type: \"scroll_button\",\n        desc: \"\",\n        pic_url: \"\"\n    });\n    \n    d.push({\n        col_type: \"big_blank_block\"\n    });\n}\n\ntry {\n    if (/tag/.test(true_url)) { eval(JSON.parse(request('hiker://page/xiaolei')).rule);\n        const contentlist1 = pdfa(html, \"#subject_list&&.subject-item\")\n        contentlist1.forEach(x => {\n            // log('X    is:  ' + x)\n            let title = pdfh(x, 'h2&&Text')\n            d.push({\n                title: pdfh(x, 'h2&&Text'),\n                url: pd(x, 'a&&href')+ '#immersiveTheme#',\n                col_type: \"movie_3\",\n                desc: pdfh(x, '.pub&&Text'),\n                pic_url: pd(x, 'img&&src'),\n                extra: {\n                    longClick: [{\n                        title: '海阔搜索',\n                        js: $.toString((title) => {\n                            return 'hiker://search?s=' + title\n                        }, title)\n                    }, {\n                        title: 'AI搜书',\n                        js: $.toString((title) => {\n                            return 'hiker://search?s=' + title + '&rule=AI搜书'\n                        }, title)\n                    }, {\n                        title: '图书馆Pro',\n                        js: $.toString((title) => {\n                            return 'hiker://search?s=' + title + '&rule=图书馆Pro'\n                        }, title)\n                    }, {\n                        title: '阅读组',\n                        js: $.toString((title) => {\n                            return 'hiker://search?s=' + title + '&group=阅读'\n                        }, title)\n                    }]\n                }\n            })\n        })\n    }\n    else if(/top/.test(true_url)) {\n        const contentlist2 = pdfa(html, \"#content&&table\")\n        contentlist2.forEach(x => {\n            let title = pdfh(x, '.pl2&&a&&title')\n            d.push({\n                title: title,\n                url: pd(x, '.pl2&&a&&href')+ '#immersiveTheme#',\n                col_type: \"movie_3\",\n                desc: pdfh(x, '.pl&&Text'),\n                pic_url: pd(x, 'img&&src'),\n                extra: {\n                    longClick: [{\n                        title: '海阔搜索',\n                        js: $.toString((title) => {\n                            return 'hiker://search?s=' + title\n                        }, title)\n                    }, {\n                        title: 'AI搜书',\n                        js: $.toString((title) => {\n                            return 'hiker://search?s=' + title + '&rule=AI搜书'\n                        }, title)\n                    }, {\n                        title: '图书馆Pro',\n                        js: $.toString((title) => {\n                            return 'hiker://search?s=' + title + '&rule=图书馆Pro'\n                        }, title)\n                    }, {\n                        title: '阅读组',\n                        js: $.toString((title) => {\n                            return 'hiker://search?s=' + title + '&group=阅读'\n                        }, title)\n                    }]\n                }\n            })\n        })}\n\n    } catch (e) {\n        toast(\"其他列表没写，好像出错了！请自己写其他列表吧😄\");\n    }\n    setResult(d);"},{"col_type":"movie_3","name":"小类次次","path":"xiaoleicici","rule":"js:\nlet init_cate1 = [];\nfor (let i = 0; i < 20; i++) {\n    init_cate1.push('0');\n}\n\nif (MY_PAGE === 1) {\n    const cate_temp_json1 = getMyVar('tcc', JSON.stringify(init_cate1));\n    const cate_temp1 = JSON.parse(cate_temp_json1);\n    const classlistcc = pdfa(html, 小类次次);\n    // log('sublist  is    ' + sublist)\n    classlistcc.forEach((smallclass1, key1) => {\n        let sublistcc = pdfa(smallclass1, \"body&&a\");\n        let j = 0;\n        sublistcc.forEach((it, jjj) => {\n            d.push({\n                title: jjj.toString() === cate_temp1[key1] ? \"““\" + pdfh(it, \"a&&Text\") + \"””\" : pdfh(it, \"a&&Text\"),\n                url: pd(it, \"a&&href\") + $('#noLoading#').lazyRule((params1) => {\n                    let new_cate1 = [];\n                    params1.cate_temp1.forEach((cate, index) => {\n                        new_cate1.push(index === 0 ? params1.key1.toString() : '0');\n                    })\n                    putMyVar('tcc', JSON.stringify(new_cate1));\n\n                    params1.cate_temp1[params1.key1] = params1.jjj.toString();\n                    putMyVar('tcc', JSON.stringify(params1.cate_temp1));\n                    //putMyVar('subclassIndex', jjj);\n                    // putVar(MY_RULE.title, JSON.stringify(jjj));\n                    putVar(MY_RULE.url, input);\n                    refreshPage(true)\n                    return 'hiker://empty';\n                }, {\n\n                    cate_temp1: cate_temp1,\n                    jjj: jjj,\n                    key1: key1,\n                    page: MY_PAGE,\n                }),\n                col_type: \"scroll_button\",\n            });\n        })\n        d.push({\n            col_type: \"blank_block\"\n        });\n    })\n}"},{"col_type":"movie_3","name":"书单","path":"doulists","rule":"js:\nvar d = [];\nlet true_url = getVar(MY_RULE.url, MY_URL).split('##')[0]\nvar num=(MY_PAGE-1)*20;\nif(/start/.test(true_url)){ \n   true_url = true_url.replace(\"?_t=0\",\"\");  \n}else{\n   true_url=true_url+\"&start=\"+num;\n}\nvar html = fetch(true_url, {\n    headers: {\n        \"User-Agent\": PC_UA\n    }\n});\nif (MY_PAGE==1){\nd.push({\n    col_type: 'blank_block',\n    });\nd.push({\n    col_type: 'rich_text',\n    title:pdfh(html, 'h1&&Text'),\nextra:{\n        \n        textSize:30,\n    }});}\npdfa(html, \"body&&.doulist-list&&li\").forEach(x => {\n    d.push({\n        title:pdfh(x, 'a,1&&Text')+'\\t\\t'+pdfh(x,'.meta&&Text'),\n        url: 'hiker://empty',\n        col_type: \"avatar\",\n        desc:'',\n        pic_url: pdfh(x, '.meta&&img&&src'),\n    });  \nd.push({\n        title:pdfh(x, 'h3&&Text'),\n        url: pd(x, 'a&&href')+'#immersiveTheme#'+'?start=fypage&sort=seq&playable=0&sub_type='+'@rule=js:$.require(\"hiker://page/doulistxq\")',\n        desc:pdfh(x, '.intro&&Text'),\n        pic_url: pdfh(x, '.doulist-cover&&img&&src'),\n        col_type: 'movie_1_vertical_pic'\n});\n})\nsetResult(d);"},{"col_type":"movie_3","name":"小类次次次","path":"小类次次次","rule":"js:\nlet init_cate1 = [];\nfor (let i = 0; i < 20; i++) {\n    init_cate1.push('0');\n}\n\nif (MY_PAGE === 1) {\n    const cate_temp_json1 = getMyVar('tccc', JSON.stringify(init_cate1));\n    const cate_temp1 = JSON.parse(cate_temp_json1);\n    const classlistccc = pdfa(html, 小类次次次);\n    // log('sublist  is    ' + sublist)\n    classlistccc.forEach((smallclass1, key1) => {\n        let sublistccc = pdfa(smallclass1, \"body&&a\");\n        let j = 0;\n        sublistccc.forEach((it, jjj) => {\n            d.push({\n                title: jjj.toString() === cate_temp1[key1] ? \"““\" + pdfh(it, \"a&&Text\") + \"””\" : pdfh(it, \"a&&Text\"),\n                url: pd(it, \"a&&href\") + $('#noLoading#').lazyRule((params1) => {\n                    let new_cate1 = [];\n                    params1.cate_temp1.forEach((cate, index) => {\n                        new_cate1.push(index === 0 ? params1.key1.toString() : '0');\n                    })\n                    putMyVar('tccc', JSON.stringify(new_cate1));\n\n                    params1.cate_temp1[params1.key1] = params1.jjj.toString();\n                    putMyVar('tccc', JSON.stringify(params1.cate_temp1));\n                    //putMyVar('subclassIndex', jjj);\n                    // putVar(MY_RULE.title, JSON.stringify(jjj));\n                    putVar(MY_RULE.url, input);\n                    refreshPage(true)\n                    return 'hiker://empty';\n                }, {\n\n                    cate_temp1: cate_temp1,\n                    jjj: jjj,\n                    key1: key1,\n                    page: MY_PAGE,\n                }),\n                col_type: \"scroll_button\",\n            });\n        })\n        d.push({\n            col_type: \"blank_block\"\n        });\n    })\n}"},{"col_type":"movie_3","name":"书单列表","path":"doulistxq","rule":"js:\nvar d =  [];\nhtml = getResCode();\nlet list = parseDomForHtml(html,'body&&a');\nlet title = parseDomForHtml(html,'a&&Text');\n//二级头部简介(作者，评分，出版社等)\nif ( MY_PAGE==1){\nd.push({\n    col_type: 'movie_1_vertical_pic_blur',\n    extra: {gradient: true},\n    title:parseDomForHtml(html, 'h1&&Text')+'\\n'+pdfh(html, '.meta&&Text'),\n    desc:parseDomForHtml(html, '.doulist-about&&Text'),\n    img:parseDom(html, '.doulist-cover&&img&&src'),\n    });\nd.push({\n    col_type: 'rich_text',\n    title:'⭐️该书单被'+parseDomForHtml(html, '.doulist-followers-link&&Text')+'人关注'+'\\t\\t\\t'+parseDomForHtml(html, '.rec-num&&Text')+'推荐'\n    });\n}\n//MY_URL = MY_URL.replace('hiker://empty##', '')\nlog(MY_PAGE)\nlog(\"MY_URL\"+MY_URL)\nlet true_url = getVar(MY_RULE.url, MY_URL).split('##')[0]\nvar num=(MY_PAGE-1)*20;\nlog(num)\nlog(\"true_url\"+true_url)\nif(/start/.test(true_url)){  \n   true_url=true_url.replace(\"start=1\",\"start=\"+num);\nlog(\"又匹配true_url1\"+true_url)   \n}else{\n   true_url=true_url+\"&start=\"+num;\n//https://book.douban.com/subject/4913064/reviews?sort=time&start=20\n\n//https://book.douban.com/subject/4913064/reviews?sort=time#noLoading\n    log(\"true_url2\"+true_url)\n    \n}\n log(\"true_url最终\"+true_url)\nvar html = fetch(true_url, {\n    headers: {\n        \"User-Agent\": PC_UA\n    }\n});\n//log(html)\nlog('html')\npdfa(html, \"#content&&.doulist-item\").forEach(x => {\n    d.push({\n        title:pdfh(x, '.title&&Text')+'\\t\\t'+pdfh(x,'.rating&&Text'),\n        url: pd(x, 'a&&href')+'#immersiveTheme#'+'@rule=js:var d = [];$.require(\"hiker://page/erji\")',\n        col_type: \"movie_1_vertical_pic\",\n        pic_url: pdfh(x, 'img&&src'),\n        desc:pdfh(x, '.abstract&&Text')\n    });  \n})\nsetResult(d);"},{"col_type":"movie_3","name":"小类次次次次","path":"小类次次次次","rule":"js:\nlet init_cate1 = [];\nfor (let i = 0; i < 20; i++) {\n    init_cate1.push('0');\n}\n\nif (MY_PAGE === 1) {\n    const cate_temp_json1 = getMyVar('tcccc', JSON.stringify(init_cate1));\n    const cate_temp1 = JSON.parse(cate_temp_json1);\n    const classlistcccc = pdfa(html, 小类次次次次);\n    // log('sublist  is    ' + sublist)\n    classlistcccc.forEach((smallclass1, key1) => {\n        let sublistcccc = pdfa(smallclass1, \"body&&a\");\n        let j = 0;\n        sublistcccc.forEach((it, jjj) => {\n            d.push({\n                title: jjj.toString() === cate_temp1[key1] ? \"““\" + pdfh(it, \"a&&Text\") + \"””\" : pdfh(it, \"a&&Text\"),\n                url: pd(it, \"a&&href\") + $('#noLoading#').lazyRule((params1) => {\n                    let new_cate1 = [];\n                    params1.cate_temp1.forEach((cate, index) => {\n                        new_cate1.push(index === 0 ? params1.key1.toString() : '0');\n                    })\n                    putMyVar('tcccc', JSON.stringify(new_cate1));\n\n                    params1.cate_temp1[params1.key1] = params1.jjj.toString();\n                    putMyVar('tcccc', JSON.stringify(params1.cate_temp1));\n                    //putMyVar('subclassIndex', jjj);\n                    // putVar(MY_RULE.title, JSON.stringify(jjj));\n                    putVar(MY_RULE.url, input);\n                    refreshPage(true)\n                    return 'hiker://empty';\n                }, {\n\n                    cate_temp1: cate_temp1,\n                    jjj: jjj,\n                    key1: key1,\n                    page: MY_PAGE,\n                }),\n                col_type: \"scroll_button\",\n            });\n        })\n        d.push({\n            col_type: \"blank_block\"\n        });\n    })\n}"},{"col_type":"movie_3","name":"小类次次次次次","path":"小类次次次次次","rule":"js:\nlet init_cate1 = [];\nfor (let i = 0; i < 20; i++) {\n    init_cate1.push('0');\n}\n\nif (MY_PAGE === 1) {\n    const cate_temp_json1 = getMyVar('tcccc', JSON.stringify(init_cate1));\n    const cate_temp1 = JSON.parse(cate_temp_json1);\n    const classlistcccc = pdfa(html, 小类次次次次次);\n    // log('sublist  is    ' + sublist)\n    classlistcccc.forEach((smallclass1, key1) => {\n        let sublistcccc = pdfa(smallclass1, \"body&&a\");\n        let j = 0;\n        sublistcccc.forEach((it, jjj) => {\n            d.push({\n                title: jjj.toString() === cate_temp1[key1] ? \"““\" + pdfh(it, \"a&&Text\") + \"””\" : pdfh(it, \"a&&Text\"),\n                url: pd(it, \"a&&href\") + $('#noLoading#').lazyRule((params1) => {\n                    let new_cate1 = [];\n                    params1.cate_temp1.forEach((cate, index) => {\n                        new_cate1.push(index === 0 ? params1.key1.toString() : '0');\n                    })\n                    putMyVar('tcccc', JSON.stringify(new_cate1));\n\n                    params1.cate_temp1[params1.key1] = params1.jjj.toString();\n                    putMyVar('tcccc', JSON.stringify(params1.cate_temp1));\n                    //putMyVar('subclassIndex', jjj);\n                    // putVar(MY_RULE.title, JSON.stringify(jjj));\n                    putVar(MY_RULE.url, input);\n                    refreshPage(true)\n                    return 'hiker://empty';\n                }, {\n\n                    cate_temp1: cate_temp1,\n                    jjj: jjj,\n                    key1: key1,\n                    page: MY_PAGE,\n                }),\n                col_type: \"scroll_button\",\n            });\n        })\n        d.push({\n            col_type: \"blank_block\"\n        });\n    })\n}"},{"col_type":"movie_3","name":"大类----一行","path":"dalei","rule":"js:\n\nlet classIndex = Number(getMyVar(\"classIndex\", \"0\"));\nif (MY_PAGE == 1) {\n    const list = pdfa(html, 大类);\n    //    log('list  is    ' + list)\n    let i = 0;\n    list.forEach((it, i) => {\n        d.push({\n            title: classIndex === i ? \"““\" + '读书首页' + \"””\" : '读书首页',\n            url: pd(it, \"a&&href\") + $('#noLoading#').lazyRule((i) => {\n                putMyVar('classIndex', i);\n                putVar(MY_RULE.title, JSON.stringify(i));\n                putVar(MY_RULE.url, input);\n                refreshPage(true)\n                return 'hiker://empty';\n            }, i),\n            col_type: \"scroll_button\",\n        })\n    })\n   /* d.push({\n        col_type: \"big_blank_block\",\n    })\n*/\n}"},{"col_type":"movie_3","name":"小类---多层","path":"xiaolei","rule":"js:\n    let init_cate = [];\nfor (let i = 0; i < 20; i++) {\n    init_cate.push('0');\n}\n\nif (parseInt(MY_PAGE) === 1) {\n    const cate_temp_json = getMyVar('t', JSON.stringify(init_cate));\n    const cate_temp = JSON.parse(cate_temp_json);\n    const classlist = pdfa(html, 小类);\n    // log('sublist  is    ' + sublist)\n    classlist.forEach((smallclass, key) => {\n        let sublist = pdfa(smallclass, \"body&&a\");\n        let j = 0;\n        sublist.forEach((it, j) => {\n            d.push({\n                title: j.toString() === cate_temp[key] ? \"““\" + pdfh(it, \"a&&Text\") + \"””\" : pdfh(it, \"a&&Text\"),\n                url: pd(it, \"a&&href\") + $('#noLoading#').lazyRule((params) => {\n                    let new_cate = [];\n                    params.cate_temp.forEach((cate, index) => {\n                        new_cate.push(index === 0 ? params.key.toString() : '0');\n                    })\n                    putMyVar('t', JSON.stringify(new_cate));\n\n                    params.cate_temp[params.key] = params.j.toString();\n                    putMyVar('t', JSON.stringify(params.cate_temp));\n                    //putMyVar('subclassIndex', j);\n                    // putVar(MY_RULE.title, JSON.stringify(j));\n                    putVar(MY_RULE.url, input);\n                    refreshPage(true)\n                    return 'hiker://empty';\n                }, {\n\n                    cate_temp: cate_temp,\n                    j: j,\n                    key: key,\n                    page: MY_PAGE,\n                }),\n                col_type: \"flex_button\",\n            });\n        })\n        d.push({\n            col_type: \"blank_block\"\n        });\n    })\n}"},{"col_type":"movie_3","name":"书评详情","path":"reviewer","rule":"js:\nvar d = [];\nlet myurl = MY_URL;\nvar html = fetch(myurl, {\n    headers: {\n        \"User-Agent\": PC_UA\n    }\n});\nvar content = pdfh(html, \".review-content&&Html\");\nd.push({\n    title: content,\n    col_type: \"rich_text\",\n    extra: {\n        textSize: 18,\n    }\n});\nsetResult(d);"},{"col_type":"movie_3","name":"书评","path":"reviews","rule":"js:\nvar d = [];\nlet true_url = getVar(MY_RULE.url, MY_URL).split('##')[0]\nvar num=(MY_PAGE-1)*20;\n/*\nif(/start/.test(true_url)){\n   true_url=true_url.replace(\"start=1\",\"start=\"+num);  \n}else{\n   true_url=true_url+\"&start=\"+num;  \n}\n*/\nconst 小类次次次=\"#content&&.top-tab\";\nvar html = fetch(true_url, {\n    headers: {\n        \"User-Agent\": PC_UA\n    }\n});\nif (MY_PAGE==1){\nd.push({\n    col_type: 'blank_block',\n    });\nd.push({\n    col_type: 'rich_text',\n    title:pdfh(html, 'h1&&Text'),\nextra:{\n        \n        textSize:30,\n    }});}\neval(JSON.parse(request('hiker://page/小类次次次')).rule);\npdfa(html, \"#content&&.review-item\").forEach(x => {\n    d.push({\n        title:'<small><span><font color=red>' + pdfh(x, '.name&&Text')+'\\t\\t'+pdfh(x,'span&&title')+'\\t\\t'+pdfh(x,'.main-meta&&Text')+ '</span></small>',\n        url: pd(x, 'a&&href'),\n        col_type: \"avatar\",\n        pic_url: pdfh(x, 'img&&src'),\n    });\nd.push({\n    title: pdfh(x, 'h2&&Text'),\n    url: pd(x, '.main-bd&&a&&href')+'@rule=js:var d = [];$.require(\"hiker://page/reviewer\")',\ncol_type: 'text_1'\n});\n})\nsetResult(d);"},{"col_type":"movie_3","name":"论坛","path":"discussion","rule":"js:\nvar d = [];\nlet true_url = getVar(MY_RULE.url, MY_URL).split('##')[0]\nvar html = fetch(true_url, {\n    headers: {\n        \"User-Agent\": PC_UA\n    }\n});\nif (MY_PAGE==1){\nd.push({\n    col_type: 'blank_block',\n    });\nd.push({\n    col_type: 'rich_text',\n    title:pdfh(html, 'h1&&Text'),\nextra:{    \n        textSize:30,\n    }});}\nconst item= pdfa(html, \"#posts-table&&tr\");\n item.forEach(x => {\nlet author = parseDomForHtml(x, '[itemprop=\"author\"]&&Text');\nd.push({\n    col_type: 'text_1',\n    title:parseDomForHtml(x, 'a&&title&&Text'),\n   desc:author+'\\t\\t\\t'+parseDomForHtml(html, '.time&&Text'),\n    url:pd(x, 'a&&href')+'?start=fypage@-1@*100@&author=0#comments'+'@rule=js:var d = [];$.require(\"hiker://page/lterji\")',\n    });\n})\nsetResult(d)"},{"col_type":"movie_3","name":"论坛二级","path":"lterji","rule":"js:\nvar d = [];\nlet true_url = getVar(MY_RULE.url, MY_URL);\nlog(true_url)\nvar html = fetch(true_url, {\n    headers: {\n        \"User-Agent\": PC_UA\n    }\n});\nconst item= pdfa(html, \"body&&#comments&&.comment-item\");\nif (MY_PAGE==1){\nd.push({\n    col_type: 'blank_block',\n    });\nd.push({\n    col_type: 'rich_text',\n    title:pdfh(html, 'h1&&Text'),\nextra:{ \n        textSize:30,\n    }});}\nd.push({\n    col_type: 'avatar',\n    title:pdfh(html, '#link-report&&.post-author-info&&Text'),\n    img:pdfh(html,'#link-report&&img&&src'),\n    url:'hiker://empty'\n    });\nd.push({\n    col_type: 'rich_text',\n    title:pdfh(html, '#link-report&&p&&Text'),\nextra:{\n        \n        textSize:18,\n    }});\nd.push({\n    col_type: 'line_blank',\n    });\nd.push({\n    col_type: 'text_1',\n    title:'““””<span><strong><big><font color=\"\t#f47920\">'+'回应'+ '</span></big></strong>',\n    url:'hiker://empty'\n    });\n        item.forEach(x => {\nd.push({\n    col_type: 'avatar',\n    title:pdfh(x, '.author&&Text'),\n    img:pdfh(x,'img&&src'),\n    url:'hiker://empty'\n    });\nd.push({\n    col_type: 'rich_text',\n    title:pdfh(x, 'p&&Text'),\n    });\nd.push({\n    col_type: 'line',\n    });\n})\nsetResult(d)"}],"title":"豆瓣阅读","author":"123","version":0,"type":"other","url":"hiker://empty##https://book.douban.com/top250?start=all-fypage","col_type":"movie_3","class_name":"","class_url":"","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:\n//hiker://empty##https://book.douban.com/tag/?view=type&icn=index-sorttags-all##fypage;\naddListener(\"onClose\", () => {\n    for (let it of listMyVarKeys()) {\n        clearMyVar(it);\n    }\n});\naddListener(\"onRefresh\", () => {\n    clearMyVar(\"nextPage\");\n    clearMyVar('classIndex');\n    clearMyVar('t');\n    clearMyVar('t1');\n});\nvar d = [];\n\n//var 大类 = \".abc\";\nvar 小类 = \"#content&&.article&&table\";\n//var 小类次 = \"#content&&.hot-tags-col5&&li:has(li:nth-child(n+2))\"; \n\nMY_URL = MY_URL.replace('hiker://empty##', '')\n\n//log(MY_URL)\nlet true_url = getVar(MY_RULE.url, MY_URL).split('##')[0]\n\n//true_url = true_url.replace(\"type\", \"show\")\nlog('true_url' + true_url)\nconst page = MY_PAGE\n\n\n//获取上次缓存的下页链接\nlet nextPage = getMyVar(\"nextPage\", \"\");\n//如果有下一页且不是第一页就使用下一页链接\nif (nextPage && MY_PAGE > 1) {\n    true_url = nextPage;\n} \nvar html = fetchPC(true_url)\ntry {\n    //缓存下一页\n    let nextUrl = pd(html, \"a:contains(后页)&&href\"); \n    putMyVar(\"nextPage\", nextUrl || \"\");\n    log(\"nextUrl----------------------\")\n    log(nextUrl)\n} catch (e) {\n    clearMyVar(\"nextPage\");\n    toast(\"好像没有下一页了！\");\n}\n\nif (MY_PAGE == 1) {\nd.push({\n        img:'https://bossaudioandcomic-1252317822.image.myqcloud.com/activity/document/f582fef41dc29cf37bf5234e4df20233.jpg',\n        col_type: \"pic_1_full\",\n        url:'hiker://empty'\n    });\nd.push({\n        title: '搜索',\n        col_type: 'input',\n        url: \"'hiker://search?s='+input+'&rule=豆瓣阅读'\",\n        })\nd.push({\n        title: \"豆瓣TOP榜\",\n        url: \"https://book.douban.com/top250\" + $('#immersiveTheme#').lazyRule(() => {\n            putVar(MY_RULE.url, input);\n            refreshPage();\n            return 'hiker://empty';\n        }),\n        col_type: \"text_3\",\n        desc: \"\",\n        pic_url: \"\"\n    });\nd.push({\n        title: '书架',\n        col_type: 'text_3',\n        url: \"hiker://page/Main.view?rule=本地资源管理\",\n        })\n    d.push({\n        title: \"标签\",   url:\"https://book.douban.com/tag/?view=type&icn=index-sorttags-hot#%E7%A7%91%E6%8A%80\" + $('#immersiveTheme#').lazyRule(() => {\n            putVar(MY_RULE.url, input);\n            refreshPage();\n            return 'hiker://empty';\n        }),\n        col_type: \"text_3\",\n        desc: \"\",\n        pic_url: \"\"\n    });\n    \n    d.push({\n        col_type: \"big_blank_block\"\n    });\n}\n\ntry {\n    if (/tag/.test(true_url)) { eval(JSON.parse(request('hiker://page/xiaolei')).rule);\n        const contentlist1 = pdfa(html, \"#subject_list&&.subject-item\")\n        contentlist1.forEach(x => {\n            // log('X    is:  ' + x)\n            let title = pdfh(x, 'h2&&Text')\n            d.push({\n                title: pdfh(x, 'h2&&Text'),\n                url: pd(x, 'a&&href')+'#immersiveTheme#',\n                col_type: \"movie_3\",\n                desc: pdfh(x, '.pub&&Text'),\n                pic_url: pd(x, 'img&&src'),\n                extra: {\n                    longClick: [{\n                        title: '海阔搜索',\n                        js: $.toString((title) => {\n                            return 'hiker://search?s=' + title\n                        }, title)\n                    }, {\n                        title: 'AI搜书',\n                        js: $.toString((title) => {\n                            return 'hiker://search?s=' + title + '&rule=AI搜书'\n                        }, title)\n                    }, {\n                        title: '图书馆Pro',\n                        js: $.toString((title) => {\n                            return 'hiker://search?s=' + title + '&rule=图书馆Pro'\n                        }, title)\n                    }, {\n                        title: '阅读组',\n                        js: $.toString((title) => {\n                            return 'hiker://search?s=' + title + '&group=阅读'\n                        }, title)\n                    }]\n                }\n            })\n        })\n    }\n    else if(/top/.test(true_url)) {\n        const contentlist2 = pdfa(html, \"#content&&table\")\n        contentlist2.forEach(x => {\n            let title = pdfh(x, '.pl2&&a&&title')\n            d.push({\n                title: title,\n                url: pd(x, '.pl2&&a&&href')+'#immersiveTheme#',\n                col_type: \"movie_3\",\n                desc: pdfh(x, '.pl&&Text'),\n                pic_url: pd(x, 'img&&src'),\n                extra: {\n                    longClick: [{\n                        title: '海阔搜索',\n                        js: $.toString((title) => {\n                            return 'hiker://search?s=' + title\n                        }, title)\n                    }, {\n                        title: 'AI搜书',\n                        js: $.toString((title) => {\n                            return 'hiker://search?s=' + title + '&rule=AI搜书'\n                        }, title)\n                    }, {\n                        title: '图书馆Pro',\n                        js: $.toString((title) => {\n                            return 'hiker://search?s=' + title + '&rule=图书馆Pro'\n                        }, title)\n                    }, {\n                        title: '阅读组',\n                        js: $.toString((title) => {\n                            return 'hiker://search?s=' + title + '&group=阅读'\n                        }, title)\n                    }]\n                }\n            })\n        })}\n\n    } catch (e) {\n        toast(\"其他列表没写，好像出错了！请自己写其他列表吧😄\");\n    }\n    setResult(d);","searchFind":"js:\nvar d = [];\nvar html=fetchCodeByWebView(MY_URL)\n\nvar books_list = parseDomForArray(html, '#root&&.sc-bZQynM');\nfor(var i in books_list){\nlet title = parseDomForHtml(books_list[i],'.title&&Text');\nd.push({\ntitle:title,\ndesc:parseDomForHtml(books_list[i],'.pub&&Text'),\npic_url:parseDomForHtml(books_list[i],'img&&src'),\nurl:parseDom(books_list[i],'a&&href')+'#immersiveTheme#',\ncol_type:'movie_3_marquee',\n});\n}\nsetResult(d);","search_url":"https://search.douban.com/book/subject_search?search_text=**&cat=1001&start=fypage@-1@*15@?_t=0","group":"①推荐","detail_col_type":"movie_3_marquee","detail_find_rule":"js:\nvar d =  [];\nhtml = getResCode();\nlet list = parseDomForHtml(html,'body&&a');\nlet title = parseDomForHtml(html,'h1&&Text');\nlet id = pdfa(html,'body&&.page')\n//二级头部简介(作者，评分，出版社等)\nd.push({\n    col_type: 'movie_1_vertical_pic_blur',\n    extra: {gradient: true},\n    title:parseDomForHtml(html, 'h1&&Text')+parseDomForHtml(id,'section&&data-id')+'\\n'+parseDomForHtml(html, '.rating_self&&Text')+'\\t'+'力荐指数:'+parseDomForHtml(html, '.rating_per&&Text'),\n    desc:parseDomForHtml(html, '.subject&&Text'),\n    img:parseDom(html, 'img&&src'),\n    });\nd.push({\n    title: \"短评\",\n    url:   $(MY_URL.replace('#immersiveTheme#', '') + \"comments/?start=fypage@-1@*20@&limit=20&status=P&sort=score\").rule(() => {\n\n        return eval(JSON.parse(request('hiker://page/comment')).rule)\n    }),\n    col_type: \"icon_5\",\n    pic_url: \"https://ghproxy.net/https://raw.githubusercontent.com/ls125781003/lmtubiao/main/unframed/262.png\"\n});\nd.push({\n    title: \"原文摘录\",\n    url:  $(MY_URL.replace('#immersiveTheme#', '') + \"blockquotes?sort=score&start=fypage@-1@*20@?_t=0\").rule(() => {\n\n        return eval(JSON.parse(request('hiker://page/blockquote')).rule)\n    }),\n    col_type: \"icon_5\",\n    pic_url: \"https://ghproxy.net/https://raw.githubusercontent.com/ls125781003/lmtubiao/main/unframed/356.png\"\n});\nd.push({\n    title: \"读书笔记\",\n    url:  $(MY_URL.replace('#immersiveTheme#', '') + \"annotation?sort=rank&start=fypage@-1@*10@?_t=0\").rule(() => {\n        return eval(JSON.parse(request('hiker://page/annotation')).rule)\n    }),\n    col_type: \"icon_5\",\n    pic_url: \"https://ghproxy.net/https://raw.githubusercontent.com/ls125781003/lmtubiao/main/unframed/375.png\"\n});\nd.push({\n    title: \"书评\",\n    url:    $(MY_URL.replace('#immersiveTheme#', '') + \"reviews?start=fypage\").rule(() => {\n\n        return eval(JSON.parse(request('hiker://page/reviews')).rule)\n    }),\n    col_type: \"icon_5\",\n    pic_url: \"https://ghproxy.net/https://raw.githubusercontent.com/ls125781003/lmtubiao/main/unframed/231.png\"\n});\nd.push({\n    title: \"论坛\",\n    url:    $(MY_URL.replace('#immersiveTheme#', '') + \"discussion/?start=fypage@-1@*20@&sort_by=time\").rule(() => {\n\n        return eval(JSON.parse(request('hiker://page/discussion')).rule)\n    }),\n    col_type: \"icon_5\",\n    pic_url: \"https://ghproxy.net/https://raw.githubusercontent.com/ls125781003/lmtubiao/main/unframed/578.png\"\n});\nd.push({\n    col_type: 'line_blank',\n    })\nrequire('hiker://page/searchzy');\nd.push({\n    col_type: 'line_blank',\n    });\nd.push({\n    col_type: 'rich_text',\n    title:'📄书籍信息',\nextra:{\n        \n        textSize:22,\n    }},\n    {\ncol_type: 'line',\n    });\nlet 丛书信息 = parseDomForHtml(html, '.subject_show&&Text');\n丛书信息= 丛书信息.replace('丛书信息 · · · · · · 　　','').replace('支持 Web、iPhone、iPad、Android 阅读器','').replace(' · · · · · · ','：')\nd.push({\n    col_type: 'rich_text',\n    title:丛书信息,\n    desc:'',\n    });\nlet 内容简介 = parseDomForHtml(html, '.all&&Text') ? parseDomForHtml(html, '.all&&Text') : parseDomForHtml(html, '.intro&&Text');\nd.push({\n    title: '内容简介',\n    url: $().rule((内容简介) => {\n        setResult([{\n            title: 内容简介,\n            col_type: 'long_text'\n\n        }])\n    }, 内容简介),\n    col_type: 'text_3'\n});\n\nlet 作者简介 = parseDomForHtml(html, '.indent,3&&Text');\nd.push({\n    title: '作者简介',\n    url: $().rule((作者简介) => {\n        setResult([{\n            title: 作者简介,\n            col_type: 'long_text'\n        }])\n    }, 作者简介),\n    col_type: 'text_3'\n});\nd.push({\n    title: \"书单推荐\",\n    url:    $(MY_URL.replace('#immersiveTheme#', '')+ \"doulists?start=fypage@-1@*20@?_t=0\").rule(() => {\n        return eval(JSON.parse(request('hiker://page/doulists')).rule)\n    }),\n    col_type: \"text_3\",\n    pic_url: \"\"\n});\nd.push({\n    col_type: 'line_blank',\n    });\nd.push({\n    col_type: 'rich_text',\n    title:'👍相似推荐',\nextra:{     \n        textSize:22,\n    }\n    }  , {\ncol_type: 'line',\n    });   \nconst  rec= pdfa(html, \"body&&dl\")\n  for (var i = 5; i < rec.length&& i<10; i++) {\nd.push({\n    col_type: 'movie_3',\n    title:pdfh(rec[i], 'dd&&Text'),\n    img:pd(rec[i], 'img&&src'),\n    url:pd(rec[i], 'a&&href')+'#immersiveTheme#'+'@rule=js:var d = [];$.require(\"hiker://page/erji\")',\n    });\n}\nfor (var i = 11; i < rec.length&& i<15; i++) {\nd.push({\n    col_type: 'movie_3',\n    title:pdfh(rec[i], 'dd&&Text'),\n    img:pd(rec[i], 'img&&src'),\n    url:pd(rec[i], 'a&&href')+'#immersiveTheme#'+'@rule=js:var d = [];$.require(\"hiker://page/erji\")',\n    });\n}\nd.push({col_type: 'big_big_blank_block'});\nsetResult(d);","sdetail_col_type":"movie_1","sdetail_find_rule":"*","ua":"pc","preRule":"","pages":"[{\"col_type\":\"movie_3\",\"name\":\"小类次---多层\",\"path\":\"xiaoleici\",\"rule\":\"js:\\nlet init_cate1 = [];\\nfor (let i = 0; i < 20; i++) {\\n    init_cate1.push('0');\\n}\\n\\nif (MY_PAGE === 1) {\\n    const cate_temp_json1 = getMyVar('t1', JSON.stringify(init_cate1));\\n    const cate_temp1 = JSON.parse(cate_temp_json1);\\n    const classlist1 = pdfa(html, 小类次);\\n    // log('sublist  is    ' + sublist)\\n    classlist1.forEach((smallclass1, key1) => {\\n        let sublist1 = pdfa(smallclass1, \\\"body&&a\\\");\\n        let j = 0;\\n        sublist1.forEach((it, jj) => {\\n            d.push({\\n                title: jj.toString() === cate_temp1[key1] ? \\\"““\\\" + pdfh(it, \\\"a&&Text\\\") + \\\"””\\\" : pdfh(it, \\\"a&&Text\\\"),\\n                url: pd(it, \\\"a&&href\\\") + $('#noLoading#').lazyRule((params1) => {\\n                    let new_cate1 = [];\\n                    params1.cate_temp1.forEach((cate, index) => {\\n                        new_cate1.push(index === 0 ? params1.key1.toString() : '0');\\n                    })\\n                    putMyVar('t1', JSON.stringify(new_cate1));\\n\\n                    params1.cate_temp1[params1.key1] = params1.jj.toString();\\n                    putMyVar('t1', JSON.stringify(params1.cate_temp1));\\n                    //putMyVar('subclassIndex', jj);\\n                    // putVar(MY_RULE.title, JSON.stringify(jj));\\n                    putVar(MY_RULE.url, input);\\n                    refreshPage(true)\\n                    return 'hiker://empty';\\n                }, {\\n\\n                    cate_temp1: cate_temp1,\\n                    jj: jj,\\n                    key1: key1,\\n                    page: MY_PAGE,\\n                }),\\n                col_type: \\\"scroll_button\\\",\\n            });\\n        })\\n        d.push({\\n            col_type: \\\"blank_block\\\"\\n        });\\n    })\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"lazy\",\"path\":\"lazy\",\"rule\":\"var lazy = $('').lazyRule(() => {\\n    try {\\n        \\n        var html = JSON.parse(fetchCodeByWebView(input).match(/r player_.*?=(.*?)</)[1])\\n        var url = html.url\\n        if (html.encrypt == '1') {\\n            url = unescape(url);\\n        } else if (html.encrypt == '2') {\\n            url = unescape(base64Decode(url));\\n        }\\n        if (/m3u8|mp4/.test(url)) {\\n            return url\\n        } else {\\n            return 'video://' + input\\n        }\\n    } catch (e) {\\n        return 'video://' + input\\n    }\\n})\"},{\"col_type\":\"movie_3\",\"name\":\"短评\",\"path\":\"comment\",\"rule\":\"js:\\nvar d = [];\\nlet true_url = getVar(MY_RULE.url, MY_URL).split('##')[0]\\nvar num=(MY_PAGE-1)*20;\\nif(/start/.test(true_url)){\\n true_url=true_url+\\\"&start=\\\"+num+\\\"&limit=20\\\";\\n}\\nconst 小类次次=\\\".CommentTabs\\\";\\nvar html = fetch(true_url, {\\n    headers: {\\n        \\\"User-Agent\\\": PC_UA\\n    }\\n});\\nif (MY_PAGE==1){\\nd.push({\\n    col_type: 'blank_block',\\n    });\\nd.push({\\n    col_type: 'rich_text',\\n    title:pdfh(html, 'h1&&Text'),\\nextra:{\\n        \\n        textSize:30,\\n    }});}\\neval(JSON.parse(request('hiker://page/xiaoleicici')).rule);\\npdfa(html, \\\"#comments&&.comment-item\\\").forEach(x => {\\n    d.push({\\n    col_type: 'text_1',\\n    title:'““””<small><span><font color=red>' +parseDomForHtml(x, '.comment-info&&a&&Text')+'\\\\t'+parseDomForHtml(x, '.comment-time&&Text')+'\\\\t'+parseDomForHtml(x, '.comment-location&&Text')+'\\\\t\\\\t\\\\t'+parseDomForHtml(x, '.comment-vote&&Text') + '</span></small></small>',\\n    img:pd(x, 'img&&src'),\\n    url:\\\"hiker://empty\\\",\\n    });\\n  let 短评 = parseDomForHtml(x, '.short&&Text');\\nd.push({\\n    title: 短评,\\n    url: $().rule((短评) => {\\n        setResult([{\\n            title: 短评,\\n            col_type: 'rich_text'\\n        }])\\n    }, 短评),\\n    col_type: 'text_1'\\n});\\n})\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"资源搜索\",\"path\":\"searchzy\",\"rule\":\"//资源搜索\\nhtml = getResCode();\\nlet title = parseDomForHtml(html,'h1&&Text');\\nd.push({\\n    col_type: 'line',\\n    })\\nd.push({\\n    title: '搜索相关的影视资源',\\n    col_type: 'avatar',\\n    url: 'hiker://search?s='+title+'&rule=青豆',\\n    img: 'https://ghproxy.net/https://raw.githubusercontent.com/ls125781003/lmtubiao/main/messy/24.svg'\\n    });\\nd.push({\\n    col_type: 'line',\\n    })\\nd.push({\\n    title: '图书馆Pro',\\n    col_type: 'icon_5',\\n    url: 'hiker://search?s='+title+'&rule=图书馆Pro',\\n    img: 'https://gdown.baidu.com/img/0/512_512/f53bcf56bad60969487d3f5c90ec6012.png'\\n    });\\nd.push({\\n    title: 'AI搜书',\\n    col_type: 'icon_5',\\n    url: 'hiker://search?s='+title+'&rule=AI搜书',\\n    img: 'http://gimg0.baidu.com/gimg/src=http%3A%2F%2Fgdown.baidu.com%2Fimg%2F0%2F512_512%2F25529fb96fb19a1ffdbaaf0f6157cda9.png&app=2008&fmt=auto&size=b219,219&n=0&g=0n&sec=1693384742&t=fb503d56bfec119538b01a5dea2400c8'\\n    });\\nd.push({\\n    title: '搜书君',\\n    col_type: 'icon_5',\\n    url: 'hiker://search?s='+title+'&rule=搜书君',\\n    img: 'https://ghproxy.net/https://raw.githubusercontent.com/ls125781003/lmtubiao/main/square/416.png'\\n    });\\nd.push({\\n    title: '知搜',\\n    col_type: 'icon_5',\\n    url: 'https://zhiso.cc/search/?q='+title,\\n    img: 'https://zhiso.cc/static/image/favicon.ico'\\n    });\\nd.push({\\n    title: '可阅',\\n    col_type: 'icon_5',\\n    url: 'https://kepub.net/search.html?keyword='+title,\\n    img: 'https://kepub.net/favicon.ico'\\n    });\\nd.push({\\n    title: '京东读书',\\n    col_type: 'icon_5',\\n    url: 'https://m-tob.jd.com/search_dosearch?serch='+title,\\n    img: 'https://m-tob.jd.com/static/img/logo.png'\\n    });\\nd.push({\\n    title: '熊猫搜书',\\n    col_type: 'icon_5',\\n    url: \\\"https://www.mrsd.top/search.html?keywords=\\\"+title,\\n    img: 'https://ghproxy.net/https://raw.githubusercontent.com/ls125781003/lmtubiao/main/square/176.png'\\n    });\\nd.push({\\n    title: 'Taco搜索',\\n    col_type: 'icon_5',\\n    url: 'https://www.tacoso.cc/search?keyword='+title+'&authCode=&_csrf=HxTkOkjK-FSDVcxd6VOCgX5Q4zKh3o2SwFAY',\\n    img: 'https://ghproxy.net/https://raw.githubusercontent.com/ls125781003/lmtubiao/main/circle/35.png'\\n    });\\nd.push({\\n    title: '热点图书网',\\n    col_type: 'icon_5',\\n    url: 'http://www.happydot.top/?s='+title,\\n    img: 'https://ghproxy.net/https://raw.githubusercontent.com/ls125781003/lmtubiao/main/rounded/122.png'\\n    });\\nd.push({\\n    title: '书舟搜索',\\n    col_type: 'icon_5',\\n    url: 'https://www.shuzhou.cc/?s='+title,\\n    img: 'https://www.shuzhou.cc/favicon.ico'\\n    });\"},{\"col_type\":\"movie_3\",\"name\":\"原文摘录\",\"path\":\"blockquote\",\"rule\":\"js:\\nvar d = [];\\nlet true_url = getVar(MY_RULE.url, MY_URL).split('##')[0]\\nvar num=(MY_PAGE-1)*20;\\nif(/start/.test(true_url)){\\n   true_url = true_url.replace(\\\"?_t=0\\\",\\\"\\\");\\n}else{\\n   true_url=true_url+\\\"&start=\\\"+num;  \\n}\\nconst 小类次次次次=\\\".nav-tab\\\";\\nvar html = fetch(true_url, {\\n    headers: {\\n        \\\"User-Agent\\\": PC_UA\\n    }\\n});\\nif (MY_PAGE==1){\\nd.push({\\n    col_type: 'blank_block',\\n    });\\nd.push({\\n    col_type: 'rich_text',\\n    title:pdfh(html, 'h1&&Text'),\\nextra:{\\n        \\n        textSize:30,\\n    }});}\\neval(JSON.parse(request('hiker://page/小类次次次次')).rule);\\n   const  blockquote= pdfa(html, \\\"body&&.blockquote-list&&li\\\")\\n        blockquote.forEach(x => {\\nd.push({\\n    col_type: 'avatar',\\n    title:'<small><span>' + parseDomForHtml(x, '.author-name&&Text')+'\\\\t\\\\t'+parseDomForHtml(x, 'span&&Text')+'\\\\t\\\\t'+parseDomForHtml(x, 'datetime&&Text')+ '</span><small>',\\n    img:pd(x, 'img&&src'),\\n    url:pd(x, 'a&&href'),\\n    });\\n  let 摘录内容 = parseDomForHtml(x, 'figure&&Text');\\nd.push({\\n    title:摘录内容 ,\\n    url: $().rule((摘录内容) => {\\n        setResult([{\\n            title: 摘录内容,\\n            col_type: 'rich_text'\\n        }])\\n    }, 摘录内容),\\n    col_type: 'text_1'\\n});\\n})\\nsetResult(d)\"},{\"col_type\":\"movie_3\",\"name\":\"读书笔记\",\"path\":\"annotation\",\"rule\":\"js:\\nvar d = [];\\nlet true_url = getVar(MY_RULE.url, MY_URL).split('##')[0]\\nvar num=(MY_PAGE-1)*10;\\nif(/start/.test(true_url)){\\n   true_url=true_url.replace(\\\"?_t=0\\\",\\\"\\\"); \\n}else{\\n   true_url=true_url+\\\"&start=\\\"+num;  \\n}\\nlog(true_url)\\nconst 小类次次次次次 = \\\".green_tab\\\";\\nvar html = fetch(true_url, {\\n    headers: {\\n        \\\"User-Agent\\\": PC_UA\\n    }\\n});\\nif (MY_PAGE==1){\\nd.push({\\n    col_type: 'blank_block',\\n    });\\nd.push({\\n    col_type: 'rich_text',\\n    title:pdfh(html, 'h1&&Text'),\\nextra:{\\n        \\n        textSize:30,\\n    }});}\\neval(JSON.parse(request('hiker://page/小类次次次次次')).rule);\\n   const bd= pdfa(html, \\\"body&&.comments&&li\\\")\\n        bd.forEach(x => {\\nd.push({\\n    col_type: 'avatar',\\n    title:parseDomForHtml(x, '.user&&title&&Text')+parseDomForHtml(x, '.allstar50&&span'),\\n    img:pd(x, 'img&&src'),\\n    url:pd(x, 'a&&href'),\\n    });\\nd.push({\\n    col_type: 'text_1',\\n    title:parseDomForHtml(x, '.nlst&&a,2&&Text'),\\n    url:pd(x, 'a&&href'),\\n    });\\n  let 读书笔记 = parseDomForHtml(x, '.all&&Text');\\nd.push({\\n    title:'““””<big><span>' +读书笔记 + '</span></big>',\\n    url: $().rule((读书笔记) => {\\n        setResult([{\\n            title: 读书笔记,\\n            col_type: 'rich_text'\\n        }])\\n    }, 读书笔记),\\n    col_type: 'text_1'\\n});\\n})\\nsetResult(d)\"},{\"col_type\":\"movie_3\",\"name\":\"二级\",\"path\":\"erji\",\"rule\":\"js:\\nvar d =  [];\\nhtml = getResCode();\\nlet list = parseDomForHtml(html,'body&&a');\\nlet title = parseDomForHtml(html,'h1&&Text');\\nlet id = pdfa(html,'body&&.page')\\n//二级头部简介(作者，评分，出版社等)\\nd.push({\\n    col_type: 'movie_1_vertical_pic_blur',\\n    extra: {gradient: true},\\n    title:parseDomForHtml(html, 'h1&&Text')+parseDomForHtml(id,'section&&data-id')+'\\\\n'+parseDomForHtml(html, '.rating_self&&Text')+'\\\\t'+'力荐指数:'+parseDomForHtml(html, '.rating_per&&Text'),\\n    desc:parseDomForHtml(html, '.subject&&Text'),\\n    img:parseDom(html, 'img&&src'),\\n    });\\nd.push({\\n    title: \\\"短评\\\",\\n    url:   $(MY_URL.replace('#immersiveTheme#', '') + \\\"comments/?start=fypage@-1@*20@&limit=20&status=P&sort=score\\\").rule(() => {\\n\\n        return eval(JSON.parse(request('hiker://page/comment')).rule)\\n    }),\\n    col_type: \\\"icon_5\\\",\\n    pic_url: \\\"https://ghproxy.net/https://raw.githubusercontent.com/ls125781003/lmtubiao/main/unframed/262.png\\\"\\n});\\nd.push({\\n    title: \\\"原文摘录\\\",\\n    url:  $(MY_URL.replace('#immersiveTheme#', '') + \\\"blockquotes?sort=score&start=fypage@-1@*20@?_t=0\\\").rule(() => {\\n\\n        return eval(JSON.parse(request('hiker://page/blockquote')).rule)\\n    }),\\n    col_type: \\\"icon_5\\\",\\n    pic_url: \\\"https://ghproxy.net/https://raw.githubusercontent.com/ls125781003/lmtubiao/main/unframed/356.png\\\"\\n});\\nd.push({\\n    title: \\\"读书笔记\\\",\\n    url:  $(MY_URL.replace('#immersiveTheme#', '') + \\\"annotation?sort=rank&start=fypage@-1@*10@?_t=0\\\").rule(() => {\\n        return eval(JSON.parse(request('hiker://page/annotation')).rule)\\n    }),\\n    col_type: \\\"icon_5\\\",\\n    pic_url: \\\"https://ghproxy.net/https://raw.githubusercontent.com/ls125781003/lmtubiao/main/unframed/375.png\\\"\\n});\\nd.push({\\n    title: \\\"书评\\\",\\n    url:    $(MY_URL.replace('#immersiveTheme#', '') + \\\"reviews?start=fypage\\\").rule(() => {\\n\\n        return eval(JSON.parse(request('hiker://page/reviews')).rule)\\n    }),\\n    col_type: \\\"icon_5\\\",\\n    pic_url: \\\"https://ghproxy.net/https://raw.githubusercontent.com/ls125781003/lmtubiao/main/unframed/231.png\\\"\\n});\\nd.push({\\n    title: \\\"论坛\\\",\\n    url:    $(MY_URL.replace('#immersiveTheme#', '') + \\\"discussion/?start=fypage@-1@*20@&sort_by=time\\\").rule(() => {\\n\\n        return eval(JSON.parse(request('hiker://page/discussion')).rule)\\n    }),\\n    col_type: \\\"icon_5\\\",\\n    pic_url: \\\"https://ghproxy.net/https://raw.githubusercontent.com/ls125781003/lmtubiao/main/unframed/578.png\\\"\\n});\\nd.push({\\n    col_type: 'line_blank',\\n    })\\nd.push({\\n    col_type: 'line',\\n    })\\nd.push({\\n    title: '搜索相关的影视资源',\\n    col_type: 'avatar',\\n    url: 'hiker://search?s='+title+'&rule=青豆',\\n    img: 'https://ghproxy.net/https://raw.githubusercontent.com/ls125781003/lmtubiao/main/messy/24.svg'\\n    });\\nd.push({\\n    col_type: 'line',\\n    })\\nd.push({\\n    title: '图书馆Pro',\\n    col_type: 'icon_5',\\n    url: 'hiker://search?s='+title+'&rule=图书馆Pro',\\n    img: 'https://gdown.baidu.com/img/0/512_512/f53bcf56bad60969487d3f5c90ec6012.png'\\n    });\\nd.push({\\n    title: 'AI搜书',\\n    col_type: 'icon_5',\\n    url: 'hiker://search?s='+title+'&rule=AI搜书',\\n    img: 'http://gimg0.baidu.com/gimg/src=http%3A%2F%2Fgdown.baidu.com%2Fimg%2F0%2F512_512%2F25529fb96fb19a1ffdbaaf0f6157cda9.png&app=2008&fmt=auto&size=b219,219&n=0&g=0n&sec=1693384742&t=fb503d56bfec119538b01a5dea2400c8'\\n    });\\nd.push({\\n    title: '搜书君',\\n    col_type: 'icon_5',\\n    url: 'hiker://search?s='+title+'&rule=搜书君',\\n    img: 'https://ghproxy.net/https://raw.githubusercontent.com/ls125781003/lmtubiao/main/square/416.png'\\n    });\\nd.push({\\n    title: '知搜',\\n    col_type: 'icon_5',\\n    url: 'https://zhiso.cc/search/?q='+title,\\n    img: 'https://zhiso.cc/static/image/favicon.ico'\\n    });\\nd.push({\\n    title: '可阅',\\n    col_type: 'icon_5',\\n    url: 'https://kepub.net/search.html?keyword='+title,\\n    img: 'https://kepub.net/favicon.ico'\\n    });\\nd.push({\\n    title: '京东读书',\\n    col_type: 'icon_5',\\n    url: 'https://m-tob.jd.com/search_dosearch?serch='+title,\\n    img: 'https://m-tob.jd.com/static/img/logo.png'\\n    });\\nd.push({\\n    title: '熊猫搜书',\\n    col_type: 'icon_5',\\n    url: \\\"https://www.mrsd.top/search.html?keywords=\\\"+title,\\n    img: 'https://ghproxy.net/https://raw.githubusercontent.com/ls125781003/lmtubiao/main/square/176.png'\\n    });\\nd.push({\\n    title: 'Taco搜索',\\n    col_type: 'icon_5',\\n    url: 'https://www.tacoso.cc/search?keyword='+title+'&authCode=&_csrf=HxTkOkjK-FSDVcxd6VOCgX5Q4zKh3o2SwFAY',\\n    img: 'https://ghproxy.net/https://raw.githubusercontent.com/ls125781003/lmtubiao/main/circle/35.png'\\n    });\\nd.push({\\n    title: '热点图书网',\\n    col_type: 'icon_5',\\n    url: 'http://www.happydot.top/?s='+title,\\n    img: 'https://ghproxy.net/https://raw.githubusercontent.com/ls125781003/lmtubiao/main/rounded/122.png'\\n    });\\nd.push({\\n    title: '书舟搜索',\\n    col_type: 'icon_5',\\n    url: 'https://www.shuzhou.cc/?s='+title,\\n    img: 'https://www.shuzhou.cc/favicon.ico'\\n    });\\nd.push({\\n    col_type: 'line_blank',\\n    });\\nd.push({\\n    col_type: 'rich_text',\\n    title:'📄书籍信息',\\nextra:{\\n        \\n        textSize:22,\\n    }},\\n    {\\ncol_type: 'line',\\n    });\\nlet 丛书信息 = parseDomForHtml(html, '.subject_show&&Text');\\n丛书信息= 丛书信息.replace('丛书信息 · · · · · · 　　','').replace('支持 Web、iPhone、iPad、Android 阅读器','').replace(' · · · · · · ','：')\\nd.push({\\n    col_type: 'rich_text',\\n    title:丛书信息,\\n    desc:'',\\n    });\\nlet 内容简介 = parseDomForHtml(html, '.all&&Text') ? parseDomForHtml(html, '.all&&Text') : parseDomForHtml(html, '.intro&&Text');\\nd.push({\\n    title: '内容简介',\\n    url: $().rule((内容简介) => {\\n        setResult([{\\n            title: 内容简介,\\n            col_type: 'long_text'\\n\\n        }])\\n    }, 内容简介),\\n    col_type: 'text_3'\\n});\\n\\nlet 作者简介 = parseDomForHtml(html, '.indent,3&&Text');\\nd.push({\\n    title: '作者简介',\\n    url: $().rule((作者简介) => {\\n        setResult([{\\n            title: 作者简介,\\n            col_type: 'long_text'\\n        }])\\n    }, 作者简介),\\n    col_type: 'text_3'\\n});\\nd.push({\\n    title: \\\"书单推荐\\\",\\n    url:    $(MY_URL.replace('#immersiveTheme#', '')+ \\\"doulists?start=fypage@-1@*20@?_t=0\\\").rule(() => {\\n        return eval(JSON.parse(request('hiker://page/doulists')).rule)\\n    }),\\n    col_type: \\\"text_3\\\",\\n    pic_url: \\\"\\\"\\n});\\nd.push({\\n    col_type: 'line_blank',\\n    });\\nd.push({\\n    col_type: 'rich_text',\\n    title:'👍相似推荐',\\nextra:{     \\n        textSize:22,\\n    }\\n    }  , {\\ncol_type: 'line',\\n    });   \\nconst  rec= pdfa(html, \\\"body&&dl\\\")\\n  for (var i = 5; i < rec.length&& i<10; i++) {\\nd.push({\\n    col_type: 'movie_3',\\n    title:pdfh(rec[i], 'dd&&Text'),\\n    img:pd(rec[i], 'img&&src'),\\n    url:pd(rec[i], 'a&&href')+'#immersiveTheme#'+'@rule=js:var d = [];$.require(\\\"hiker://page/erji\\\")',\\n    });\\n}\\nfor (var i = 11; i < rec.length&& i<15; i++) {\\nd.push({\\n    col_type: 'movie_3',\\n    title:pdfh(rec[i], 'dd&&Text'),\\n    img:pd(rec[i], 'img&&src'),\\n    url:pd(rec[i], 'a&&href')+'#immersiveTheme#'+'@rule=js:var d = [];$.require(\\\"hiker://page/erji\\\")',\\n    });\\n}\\nd.push({col_type: 'big_big_blank_block'});\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"标签页\",\"path\":\"tag\",\"rule\":\"js:\\n//本程序才用L大佬翻页\\naddListener(\\\"onClose\\\", () => {\\n    for (let it of listMyVarKeys()) {\\n        clearMyVar(it);\\n    }\\n});\\naddListener(\\\"onRefresh\\\", () => {\\n    clearMyVar(\\\"nextPage\\\");\\n    clearMyVar('classIndex');\\n    clearMyVar('t');\\n    clearMyVar('t1');\\n});\\nvar d = [];\\n\\n//var 大类 = \\\".abc\\\";\\nvar 小类 = \\\"#content&&tr\\\"; //多层-----小类\\n//var 小类次 = \\\"#content&&.hot-tags-col5&&li:has(li:nth-child(n+2))\\\"; \\n\\nMY_URL = MY_URL.replace('hiker://empty##', '')\\n\\n//log(MY_URL)\\nlet true_url = getVar(MY_RULE.url, MY_URL).split('##')[0]\\n\\n//true_url = true_url.replace(\\\"type\\\", \\\"show\\\")\\nlog('true_url' + true_url)\\nconst page = MY_PAGE\\n\\n\\n//获取上次缓存的下页链接\\nlet nextPage = getMyVar(\\\"nextPage\\\", \\\"\\\");\\n//如果有下一页且不是第一页就使用下一页链接\\nif (nextPage && MY_PAGE > 1) {\\n    true_url = nextPage;\\n} \\nvar html = fetchPC(true_url)\\ntry {\\n    //缓存下一页\\n    let nextUrl = pd(html, \\\"a:contains(后页)&&href\\\"); \\n    putMyVar(\\\"nextPage\\\", nextUrl || \\\"\\\");\\n    log(\\\"nextUrl----------------------\\\")\\n    log(nextUrl)\\n} catch (e) {\\n    clearMyVar(\\\"nextPage\\\");\\n    toast(\\\"好像没有下一页了！\\\");\\n}\\n\\nif (MY_PAGE == 1) {\\nd.push({\\n        img:'/storage/emulated/0/Android/data/com.example.hikerview/files/Documents/H_轮播图/阅读.gif',\\n        col_type: \\\"pic_1_full\\\",\\n        url:'hiker://empty'\\n    });\\nd.push({\\n        title: '搜索',\\n        col_type: 'input',\\n        url: \\\"'hiker://search?s='+input+'&rule=豆瓣读书'\\\",\\n        })\\nd.push({\\n        title: \\\"豆瓣TOP榜\\\",\\n        url: \\\"https://book.douban.com/top250\\\" + $('#immersiveTheme#').lazyRule(() => {\\n            putVar(MY_RULE.url, input);\\n            refreshPage();\\n            return 'hiker://empty';\\n        }),\\n        col_type: \\\"scroll_button\\\",\\n        desc: \\\"\\\",\\n        pic_url: \\\"\\\"\\n    });\\nd.push({\\n        title: '小说排行榜',\\n        col_type: 'scroll_button',\\n        url: \\\"hiker://home@起点排行\\\",\\n        })\\nd.push({\\n        title: '微信阅读榜',\\n        col_type: 'scroll_button',\\n        url: \\\"hiker://home@微信阅读\\\",\\n        })\\nd.push({\\n        title: '书架',\\n        col_type: 'scroll_button',\\n        url: \\\"hiker://page/Main.view?rule=本地资源管理\\\",\\n        })\\n    d.push({\\n        title: \\\"标签\\\",\\n        url: \\\"https://book.douban.com/tag/?view=type&icn=index-sorttags-hot#%E7%A7%91%E6%8A%80\\\" + $('#immersiveTheme#').lazyRule(() => {\\n            putVar(MY_RULE.url, input);\\n            refreshPage();\\n            return 'hiker://empty';\\n        }),\\n        col_type: \\\"scroll_button\\\",\\n        desc: \\\"\\\",\\n        pic_url: \\\"\\\"\\n    });\\n    \\n    d.push({\\n        col_type: \\\"big_blank_block\\\"\\n    });\\n}\\n\\ntry {\\n    if (/tag/.test(true_url)) { eval(JSON.parse(request('hiker://page/xiaolei')).rule);\\n        const contentlist1 = pdfa(html, \\\"#subject_list&&.subject-item\\\")\\n        contentlist1.forEach(x => {\\n            // log('X    is:  ' + x)\\n            let title = pdfh(x, 'h2&&Text')\\n            d.push({\\n                title: pdfh(x, 'h2&&Text'),\\n                url: pd(x, 'a&&href')+ '#immersiveTheme#',\\n                col_type: \\\"movie_3\\\",\\n                desc: pdfh(x, '.pub&&Text'),\\n                pic_url: pd(x, 'img&&src'),\\n                extra: {\\n                    longClick: [{\\n                        title: '海阔搜索',\\n                        js: $.toString((title) => {\\n                            return 'hiker://search?s=' + title\\n                        }, title)\\n                    }, {\\n                        title: 'AI搜书',\\n                        js: $.toString((title) => {\\n                            return 'hiker://search?s=' + title + '&rule=AI搜书'\\n                        }, title)\\n                    }, {\\n                        title: '图书馆Pro',\\n                        js: $.toString((title) => {\\n                            return 'hiker://search?s=' + title + '&rule=图书馆Pro'\\n                        }, title)\\n                    }, {\\n                        title: '阅读组',\\n                        js: $.toString((title) => {\\n                            return 'hiker://search?s=' + title + '&group=阅读'\\n                        }, title)\\n                    }]\\n                }\\n            })\\n        })\\n    }\\n    else if(/top/.test(true_url)) {\\n        const contentlist2 = pdfa(html, \\\"#content&&table\\\")\\n        contentlist2.forEach(x => {\\n            let title = pdfh(x, '.pl2&&a&&title')\\n            d.push({\\n                title: title,\\n                url: pd(x, '.pl2&&a&&href')+ '#immersiveTheme#',\\n                col_type: \\\"movie_3\\\",\\n                desc: pdfh(x, '.pl&&Text'),\\n                pic_url: pd(x, 'img&&src'),\\n                extra: {\\n                    longClick: [{\\n                        title: '海阔搜索',\\n                        js: $.toString((title) => {\\n                            return 'hiker://search?s=' + title\\n                        }, title)\\n                    }, {\\n                        title: 'AI搜书',\\n                        js: $.toString((title) => {\\n                            return 'hiker://search?s=' + title + '&rule=AI搜书'\\n                        }, title)\\n                    }, {\\n                        title: '图书馆Pro',\\n                        js: $.toString((title) => {\\n                            return 'hiker://search?s=' + title + '&rule=图书馆Pro'\\n                        }, title)\\n                    }, {\\n                        title: '阅读组',\\n                        js: $.toString((title) => {\\n                            return 'hiker://search?s=' + title + '&group=阅读'\\n                        }, title)\\n                    }]\\n                }\\n            })\\n        })}\\n\\n    } catch (e) {\\n        toast(\\\"其他列表没写，好像出错了！请自己写其他列表吧😄\\\");\\n    }\\n    setResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"小类次次\",\"path\":\"xiaoleicici\",\"rule\":\"js:\\nlet init_cate1 = [];\\nfor (let i = 0; i < 20; i++) {\\n    init_cate1.push('0');\\n}\\n\\nif (MY_PAGE === 1) {\\n    const cate_temp_json1 = getMyVar('tcc', JSON.stringify(init_cate1));\\n    const cate_temp1 = JSON.parse(cate_temp_json1);\\n    const classlistcc = pdfa(html, 小类次次);\\n    // log('sublist  is    ' + sublist)\\n    classlistcc.forEach((smallclass1, key1) => {\\n        let sublistcc = pdfa(smallclass1, \\\"body&&a\\\");\\n        let j = 0;\\n        sublistcc.forEach((it, jjj) => {\\n            d.push({\\n                title: jjj.toString() === cate_temp1[key1] ? \\\"““\\\" + pdfh(it, \\\"a&&Text\\\") + \\\"””\\\" : pdfh(it, \\\"a&&Text\\\"),\\n                url: pd(it, \\\"a&&href\\\") + $('#noLoading#').lazyRule((params1) => {\\n                    let new_cate1 = [];\\n                    params1.cate_temp1.forEach((cate, index) => {\\n                        new_cate1.push(index === 0 ? params1.key1.toString() : '0');\\n                    })\\n                    putMyVar('tcc', JSON.stringify(new_cate1));\\n\\n                    params1.cate_temp1[params1.key1] = params1.jjj.toString();\\n                    putMyVar('tcc', JSON.stringify(params1.cate_temp1));\\n                    //putMyVar('subclassIndex', jjj);\\n                    // putVar(MY_RULE.title, JSON.stringify(jjj));\\n                    putVar(MY_RULE.url, input);\\n                    refreshPage(true)\\n                    return 'hiker://empty';\\n                }, {\\n\\n                    cate_temp1: cate_temp1,\\n                    jjj: jjj,\\n                    key1: key1,\\n                    page: MY_PAGE,\\n                }),\\n                col_type: \\\"scroll_button\\\",\\n            });\\n        })\\n        d.push({\\n            col_type: \\\"blank_block\\\"\\n        });\\n    })\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"书单\",\"path\":\"doulists\",\"rule\":\"js:\\nvar d = [];\\nlet true_url = getVar(MY_RULE.url, MY_URL).split('##')[0]\\nvar num=(MY_PAGE-1)*20;\\nif(/start/.test(true_url)){ \\n   true_url = true_url.replace(\\\"?_t=0\\\",\\\"\\\");  \\n}else{\\n   true_url=true_url+\\\"&start=\\\"+num;\\n}\\nvar html = fetch(true_url, {\\n    headers: {\\n        \\\"User-Agent\\\": PC_UA\\n    }\\n});\\nif (MY_PAGE==1){\\nd.push({\\n    col_type: 'blank_block',\\n    });\\nd.push({\\n    col_type: 'rich_text',\\n    title:pdfh(html, 'h1&&Text'),\\nextra:{\\n        \\n        textSize:30,\\n    }});}\\npdfa(html, \\\"body&&.doulist-list&&li\\\").forEach(x => {\\n    d.push({\\n        title:pdfh(x, 'a,1&&Text')+'\\\\t\\\\t'+pdfh(x,'.meta&&Text'),\\n        url: 'hiker://empty',\\n        col_type: \\\"avatar\\\",\\n        desc:'',\\n        pic_url: pdfh(x, '.meta&&img&&src'),\\n    });  \\nd.push({\\n        title:pdfh(x, 'h3&&Text'),\\n        url: pd(x, 'a&&href')+'#immersiveTheme#'+'?start=fypage&sort=seq&playable=0&sub_type='+'@rule=js:$.require(\\\"hiker://page/doulistxq\\\")',\\n        desc:pdfh(x, '.intro&&Text'),\\n        pic_url: pdfh(x, '.doulist-cover&&img&&src'),\\n        col_type: 'movie_1_vertical_pic'\\n});\\n})\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"小类次次次\",\"path\":\"小类次次次\",\"rule\":\"js:\\nlet init_cate1 = [];\\nfor (let i = 0; i < 20; i++) {\\n    init_cate1.push('0');\\n}\\n\\nif (MY_PAGE === 1) {\\n    const cate_temp_json1 = getMyVar('tccc', JSON.stringify(init_cate1));\\n    const cate_temp1 = JSON.parse(cate_temp_json1);\\n    const classlistccc = pdfa(html, 小类次次次);\\n    // log('sublist  is    ' + sublist)\\n    classlistccc.forEach((smallclass1, key1) => {\\n        let sublistccc = pdfa(smallclass1, \\\"body&&a\\\");\\n        let j = 0;\\n        sublistccc.forEach((it, jjj) => {\\n            d.push({\\n                title: jjj.toString() === cate_temp1[key1] ? \\\"““\\\" + pdfh(it, \\\"a&&Text\\\") + \\\"””\\\" : pdfh(it, \\\"a&&Text\\\"),\\n                url: pd(it, \\\"a&&href\\\") + $('#noLoading#').lazyRule((params1) => {\\n                    let new_cate1 = [];\\n                    params1.cate_temp1.forEach((cate, index) => {\\n                        new_cate1.push(index === 0 ? params1.key1.toString() : '0');\\n                    })\\n                    putMyVar('tccc', JSON.stringify(new_cate1));\\n\\n                    params1.cate_temp1[params1.key1] = params1.jjj.toString();\\n                    putMyVar('tccc', JSON.stringify(params1.cate_temp1));\\n                    //putMyVar('subclassIndex', jjj);\\n                    // putVar(MY_RULE.title, JSON.stringify(jjj));\\n                    putVar(MY_RULE.url, input);\\n                    refreshPage(true)\\n                    return 'hiker://empty';\\n                }, {\\n\\n                    cate_temp1: cate_temp1,\\n                    jjj: jjj,\\n                    key1: key1,\\n                    page: MY_PAGE,\\n                }),\\n                col_type: \\\"scroll_button\\\",\\n            });\\n        })\\n        d.push({\\n            col_type: \\\"blank_block\\\"\\n        });\\n    })\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"书单列表\",\"path\":\"doulistxq\",\"rule\":\"js:\\nvar d =  [];\\nhtml = getResCode();\\nlet list = parseDomForHtml(html,'body&&a');\\nlet title = parseDomForHtml(html,'a&&Text');\\n//二级头部简介(作者，评分，出版社等)\\nif ( MY_PAGE==1){\\nd.push({\\n    col_type: 'movie_1_vertical_pic_blur',\\n    extra: {gradient: true},\\n    title:parseDomForHtml(html, 'h1&&Text')+'\\\\n'+pdfh(html, '.meta&&Text'),\\n    desc:parseDomForHtml(html, '.doulist-about&&Text'),\\n    img:parseDom(html, '.doulist-cover&&img&&src'),\\n    });\\nd.push({\\n    col_type: 'rich_text',\\n    title:'⭐️该书单被'+parseDomForHtml(html, '.doulist-followers-link&&Text')+'人关注'+'\\\\t\\\\t\\\\t'+parseDomForHtml(html, '.rec-num&&Text')+'推荐'\\n    });\\n}\\n//MY_URL = MY_URL.replace('hiker://empty##', '')\\nlog(MY_PAGE)\\nlog(\\\"MY_URL\\\"+MY_URL)\\nlet true_url = getVar(MY_RULE.url, MY_URL).split('##')[0]\\nvar num=(MY_PAGE-1)*20;\\nlog(num)\\nlog(\\\"true_url\\\"+true_url)\\nif(/start/.test(true_url)){  \\n   true_url=true_url.replace(\\\"start=1\\\",\\\"start=\\\"+num);\\nlog(\\\"又匹配true_url1\\\"+true_url)   \\n}else{\\n   true_url=true_url+\\\"&start=\\\"+num;\\n//https://book.douban.com/subject/4913064/reviews?sort=time&start=20\\n\\n//https://book.douban.com/subject/4913064/reviews?sort=time#noLoading\\n    log(\\\"true_url2\\\"+true_url)\\n    \\n}\\n log(\\\"true_url最终\\\"+true_url)\\nvar html = fetch(true_url, {\\n    headers: {\\n        \\\"User-Agent\\\": PC_UA\\n    }\\n});\\n//log(html)\\nlog('html')\\npdfa(html, \\\"#content&&.doulist-item\\\").forEach(x => {\\n    d.push({\\n        title:pdfh(x, '.title&&Text')+'\\\\t\\\\t'+pdfh(x,'.rating&&Text'),\\n        url: pd(x, 'a&&href')+'#immersiveTheme#'+'@rule=js:var d = [];$.require(\\\"hiker://page/erji\\\")',\\n        col_type: \\\"movie_1_vertical_pic\\\",\\n        pic_url: pdfh(x, 'img&&src'),\\n        desc:pdfh(x, '.abstract&&Text')\\n    });  \\n})\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"小类次次次次\",\"path\":\"小类次次次次\",\"rule\":\"js:\\nlet init_cate1 = [];\\nfor (let i = 0; i < 20; i++) {\\n    init_cate1.push('0');\\n}\\n\\nif (MY_PAGE === 1) {\\n    const cate_temp_json1 = getMyVar('tcccc', JSON.stringify(init_cate1));\\n    const cate_temp1 = JSON.parse(cate_temp_json1);\\n    const classlistcccc = pdfa(html, 小类次次次次);\\n    // log('sublist  is    ' + sublist)\\n    classlistcccc.forEach((smallclass1, key1) => {\\n        let sublistcccc = pdfa(smallclass1, \\\"body&&a\\\");\\n        let j = 0;\\n        sublistcccc.forEach((it, jjj) => {\\n            d.push({\\n                title: jjj.toString() === cate_temp1[key1] ? \\\"““\\\" + pdfh(it, \\\"a&&Text\\\") + \\\"””\\\" : pdfh(it, \\\"a&&Text\\\"),\\n                url: pd(it, \\\"a&&href\\\") + $('#noLoading#').lazyRule((params1) => {\\n                    let new_cate1 = [];\\n                    params1.cate_temp1.forEach((cate, index) => {\\n                        new_cate1.push(index === 0 ? params1.key1.toString() : '0');\\n                    })\\n                    putMyVar('tcccc', JSON.stringify(new_cate1));\\n\\n                    params1.cate_temp1[params1.key1] = params1.jjj.toString();\\n                    putMyVar('tcccc', JSON.stringify(params1.cate_temp1));\\n                    //putMyVar('subclassIndex', jjj);\\n                    // putVar(MY_RULE.title, JSON.stringify(jjj));\\n                    putVar(MY_RULE.url, input);\\n                    refreshPage(true)\\n                    return 'hiker://empty';\\n                }, {\\n\\n                    cate_temp1: cate_temp1,\\n                    jjj: jjj,\\n                    key1: key1,\\n                    page: MY_PAGE,\\n                }),\\n                col_type: \\\"scroll_button\\\",\\n            });\\n        })\\n        d.push({\\n            col_type: \\\"blank_block\\\"\\n        });\\n    })\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"小类次次次次次\",\"path\":\"小类次次次次次\",\"rule\":\"js:\\nlet init_cate1 = [];\\nfor (let i = 0; i < 20; i++) {\\n    init_cate1.push('0');\\n}\\n\\nif (MY_PAGE === 1) {\\n    const cate_temp_json1 = getMyVar('tcccc', JSON.stringify(init_cate1));\\n    const cate_temp1 = JSON.parse(cate_temp_json1);\\n    const classlistcccc = pdfa(html, 小类次次次次次);\\n    // log('sublist  is    ' + sublist)\\n    classlistcccc.forEach((smallclass1, key1) => {\\n        let sublistcccc = pdfa(smallclass1, \\\"body&&a\\\");\\n        let j = 0;\\n        sublistcccc.forEach((it, jjj) => {\\n            d.push({\\n                title: jjj.toString() === cate_temp1[key1] ? \\\"““\\\" + pdfh(it, \\\"a&&Text\\\") + \\\"””\\\" : pdfh(it, \\\"a&&Text\\\"),\\n                url: pd(it, \\\"a&&href\\\") + $('#noLoading#').lazyRule((params1) => {\\n                    let new_cate1 = [];\\n                    params1.cate_temp1.forEach((cate, index) => {\\n                        new_cate1.push(index === 0 ? params1.key1.toString() : '0');\\n                    })\\n                    putMyVar('tcccc', JSON.stringify(new_cate1));\\n\\n                    params1.cate_temp1[params1.key1] = params1.jjj.toString();\\n                    putMyVar('tcccc', JSON.stringify(params1.cate_temp1));\\n                    //putMyVar('subclassIndex', jjj);\\n                    // putVar(MY_RULE.title, JSON.stringify(jjj));\\n                    putVar(MY_RULE.url, input);\\n                    refreshPage(true)\\n                    return 'hiker://empty';\\n                }, {\\n\\n                    cate_temp1: cate_temp1,\\n                    jjj: jjj,\\n                    key1: key1,\\n                    page: MY_PAGE,\\n                }),\\n                col_type: \\\"scroll_button\\\",\\n            });\\n        })\\n        d.push({\\n            col_type: \\\"blank_block\\\"\\n        });\\n    })\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"大类----一行\",\"path\":\"dalei\",\"rule\":\"js:\\n\\nlet classIndex = Number(getMyVar(\\\"classIndex\\\", \\\"0\\\"));\\nif (MY_PAGE == 1) {\\n    const list = pdfa(html, 大类);\\n    //    log('list  is    ' + list)\\n    let i = 0;\\n    list.forEach((it, i) => {\\n        d.push({\\n            title: classIndex === i ? \\\"““\\\" + '读书首页' + \\\"””\\\" : '读书首页',\\n            url: pd(it, \\\"a&&href\\\") + $('#noLoading#').lazyRule((i) => {\\n                putMyVar('classIndex', i);\\n                putVar(MY_RULE.title, JSON.stringify(i));\\n                putVar(MY_RULE.url, input);\\n                refreshPage(true)\\n                return 'hiker://empty';\\n            }, i),\\n            col_type: \\\"scroll_button\\\",\\n        })\\n    })\\n   /* d.push({\\n        col_type: \\\"big_blank_block\\\",\\n    })\\n*/\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"小类---多层\",\"path\":\"xiaolei\",\"rule\":\"js:\\n    let init_cate = [];\\nfor (let i = 0; i < 20; i++) {\\n    init_cate.push('0');\\n}\\n\\nif (parseInt(MY_PAGE) === 1) {\\n    const cate_temp_json = getMyVar('t', JSON.stringify(init_cate));\\n    const cate_temp = JSON.parse(cate_temp_json);\\n    const classlist = pdfa(html, 小类);\\n    // log('sublist  is    ' + sublist)\\n    classlist.forEach((smallclass, key) => {\\n        let sublist = pdfa(smallclass, \\\"body&&a\\\");\\n        let j = 0;\\n        sublist.forEach((it, j) => {\\n            d.push({\\n                title: j.toString() === cate_temp[key] ? \\\"““\\\" + pdfh(it, \\\"a&&Text\\\") + \\\"””\\\" : pdfh(it, \\\"a&&Text\\\"),\\n                url: pd(it, \\\"a&&href\\\") + $('#noLoading#').lazyRule((params) => {\\n                    let new_cate = [];\\n                    params.cate_temp.forEach((cate, index) => {\\n                        new_cate.push(index === 0 ? params.key.toString() : '0');\\n                    })\\n                    putMyVar('t', JSON.stringify(new_cate));\\n\\n                    params.cate_temp[params.key] = params.j.toString();\\n                    putMyVar('t', JSON.stringify(params.cate_temp));\\n                    //putMyVar('subclassIndex', j);\\n                    // putVar(MY_RULE.title, JSON.stringify(j));\\n                    putVar(MY_RULE.url, input);\\n                    refreshPage(true)\\n                    return 'hiker://empty';\\n                }, {\\n\\n                    cate_temp: cate_temp,\\n                    j: j,\\n                    key: key,\\n                    page: MY_PAGE,\\n                }),\\n                col_type: \\\"flex_button\\\",\\n            });\\n        })\\n        d.push({\\n            col_type: \\\"blank_block\\\"\\n        });\\n    })\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"书评详情\",\"path\":\"reviewer\",\"rule\":\"js:\\nvar d = [];\\nlet myurl = MY_URL;\\nvar html = fetch(myurl, {\\n    headers: {\\n        \\\"User-Agent\\\": PC_UA\\n    }\\n});\\nvar content = pdfh(html, \\\".review-content&&Html\\\");\\nd.push({\\n    title: content,\\n    col_type: \\\"rich_text\\\",\\n    extra: {\\n        textSize: 18,\\n    }\\n});\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"书评\",\"path\":\"reviews\",\"rule\":\"js:\\nvar d = [];\\nlet true_url = getVar(MY_RULE.url, MY_URL).split('##')[0]\\nvar num=(MY_PAGE-1)*20;\\n/*\\nif(/start/.test(true_url)){\\n   true_url=true_url.replace(\\\"start=1\\\",\\\"start=\\\"+num);  \\n}else{\\n   true_url=true_url+\\\"&start=\\\"+num;  \\n}\\n*/\\nconst 小类次次次=\\\"#content&&.top-tab\\\";\\nvar html = fetch(true_url, {\\n    headers: {\\n        \\\"User-Agent\\\": PC_UA\\n    }\\n});\\nif (MY_PAGE==1){\\nd.push({\\n    col_type: 'blank_block',\\n    });\\nd.push({\\n    col_type: 'rich_text',\\n    title:pdfh(html, 'h1&&Text'),\\nextra:{\\n        \\n        textSize:30,\\n    }});}\\neval(JSON.parse(request('hiker://page/小类次次次')).rule);\\npdfa(html, \\\"#content&&.review-item\\\").forEach(x => {\\n    d.push({\\n        title:'<small><span><font color=red>' + pdfh(x, '.name&&Text')+'\\\\t\\\\t'+pdfh(x,'span&&title')+'\\\\t\\\\t'+pdfh(x,'.main-meta&&Text')+ '</span></small>',\\n        url: pd(x, 'a&&href'),\\n        col_type: \\\"avatar\\\",\\n        pic_url: pdfh(x, 'img&&src'),\\n    });\\nd.push({\\n    title: pdfh(x, 'h2&&Text'),\\n    url: pd(x, '.main-bd&&a&&href')+'@rule=js:var d = [];$.require(\\\"hiker://page/reviewer\\\")',\\ncol_type: 'text_1'\\n});\\n})\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"论坛\",\"path\":\"discussion\",\"rule\":\"js:\\nvar d = [];\\nlet true_url = getVar(MY_RULE.url, MY_URL).split('##')[0]\\nvar html = fetch(true_url, {\\n    headers: {\\n        \\\"User-Agent\\\": PC_UA\\n    }\\n});\\nif (MY_PAGE==1){\\nd.push({\\n    col_type: 'blank_block',\\n    });\\nd.push({\\n    col_type: 'rich_text',\\n    title:pdfh(html, 'h1&&Text'),\\nextra:{    \\n        textSize:30,\\n    }});}\\nconst item= pdfa(html, \\\"#posts-table&&tr\\\");\\n item.forEach(x => {\\nlet author = parseDomForHtml(x, '[itemprop=\\\"author\\\"]&&Text');\\nd.push({\\n    col_type: 'text_1',\\n    title:parseDomForHtml(x, 'a&&title&&Text'),\\n   desc:author+'\\\\t\\\\t\\\\t'+parseDomForHtml(html, '.time&&Text'),\\n    url:pd(x, 'a&&href')+'?start=fypage@-1@*100@&author=0#comments'+'@rule=js:var d = [];$.require(\\\"hiker://page/lterji\\\")',\\n    });\\n})\\nsetResult(d)\"},{\"col_type\":\"movie_3\",\"name\":\"论坛二级\",\"path\":\"lterji\",\"rule\":\"js:\\nvar d = [];\\nlet true_url = getVar(MY_RULE.url, MY_URL);\\nlog(true_url)\\nvar html = fetch(true_url, {\\n    headers: {\\n        \\\"User-Agent\\\": PC_UA\\n    }\\n});\\nconst item= pdfa(html, \\\"body&&#comments&&.comment-item\\\");\\nif (MY_PAGE==1){\\nd.push({\\n    col_type: 'blank_block',\\n    });\\nd.push({\\n    col_type: 'rich_text',\\n    title:pdfh(html, 'h1&&Text'),\\nextra:{ \\n        textSize:30,\\n    }});}\\nd.push({\\n    col_type: 'avatar',\\n    title:pdfh(html, '#link-report&&.post-author-info&&Text'),\\n    img:pdfh(html,'#link-report&&img&&src'),\\n    url:'hiker://empty'\\n    });\\nd.push({\\n    col_type: 'rich_text',\\n    title:pdfh(html, '#link-report&&p&&Text'),\\nextra:{\\n        \\n        textSize:18,\\n    }});\\nd.push({\\n    col_type: 'line_blank',\\n    });\\nd.push({\\n    col_type: 'text_1',\\n    title:'““””<span><strong><big><font color=\\\"\\t#f47920\\\">'+'回应'+ '</span></big></strong>',\\n    url:'hiker://empty'\\n    });\\n        item.forEach(x => {\\nd.push({\\n    col_type: 'avatar',\\n    title:pdfh(x, '.author&&Text'),\\n    img:pdfh(x,'img&&src'),\\n    url:'hiker://empty'\\n    });\\nd.push({\\n    col_type: 'rich_text',\\n    title:pdfh(x, 'p&&Text'),\\n    });\\nd.push({\\n    col_type: 'line',\\n    });\\n})\\nsetResult(d)\"}]","proxy":"","icon":"https://app-center.cdn.bcebos.com/appcenter/sts/pcfile/5360099930/93cbefe060a2cfd031762aa2de6f6598.png"},{"last_chapter_rule":"","pageList":[{"col_type":"movie_3","name":"Ⓛ列表API","path":"QuarkShareApi","rule":"js:\n//@author LoyDgIk\nlet httpRequest = $.require(\"httpRequest\");\nconst baseUrl = \"https://pan.quark.cn\";\n\nfunction QuarkShareApi(shareId, sharePwd) {\n    this.shareId = shareId;\n    this.sharePwd = sharePwd;\n    this.refreshCallBack = (() => void 0);\n    //this.shareToken = shareToken || this.getShareToken();\n}\nObject.assign(QuarkShareApi.prototype, {\n    setRefresh(refreshCallBack) {\n        this.refreshCallBack = refreshCallBack;\n        return this;\n    },\n    setToken(shareToken) {\n        this.shareToken = shareToken;\n        return this;\n    },\n    requestHttp(api) {\n        return new httpRequest(baseUrl+api).success((body) => {\n            if (body.status !== 200) {\n                throw new Error(body.message);\n            }\n            return body;\n        });\n    },\n    getToken() {\n        return this.shareToken || this.getShareToken();\n    },\n\n    getShareToken() {\n        let result = this.requestHttp(\"/1/clouddrive/share/sharepage/token\").body({\n            \"pwd_id\": this.shareId,\n            \"passcode\": this.sharePwd,\n        }).bodyToString(true).setStartRequestFunc(post).start(true);\n        this.shareToken = result.data.stoken;\n        this.refreshCallBack(result.data.stoken, this);\n        return this.shareToken;\n    },\n    getListFile(fileId, page, orderBy) {\n        let result = this.requestHttp(\"/1/clouddrive/share/sharepage/detail?pr=ucpro&fr=pc\").buildUrl({\n            pwd_id: this.shareId || \"\",\n            stoken: encodeURIComponent(this.getToken() || \"\"),\n            pdir_fid: fileId || \"\",\n            force: 0,\n            _page: page,\n            _size: 50,\n            _fetch_banner: 1,\n            _fetch_share: 1,\n            _fetch_total: 1,\n            _sort: \"file_type:asc,\" + orderBy\n        }).errorWithRetry((err, res, http) => {\n            if (JSON.parse(res.body).message.includes('stoken')) {\n                http.mergeHeadAndBody({\n                    buildUrl: {\n                        stoken: encodeURIComponent(this.getShareToken()||\"\")\n                    }\n                });\n                return true;\n            }\n        }).start(true);\n        return result;\n    }\n});\n$.exports = QuarkShareApi;"},{"col_type":"movie_3","name":"Ⓛ请求函数","path":"httpRequest","rule":"function httpRequest(url, options) {\n    this.retryCount = 0;\n    this.url = url;\n    this.options = Object.assign({}, options, {\n        withHeaders: true\n    });\n    this.errorCallback = (err, res) => {throw err};\n    this.errorCallbackWithRetry = (err, res, tryRestart) => false;\n    this.successCallback = (body, statusCode, headers) => body;\n    this.errorTypeCallback = (err, res) => err;\n    this.startRequest = fetch;\n    this._bodyToString = false;\n    this.buildParam = void(0);\n}\n\nObject.assign(httpRequest.prototype, {\n    bodyToString(flag) {\n        this._bodyToString = !!flag;\n        return this;\n    },\n    body(body) {\n        this.options.body = body || void 0;\n        return this;\n    },\n    buildUrl(buildParam) {\n        this.buildParam = buildParam || {};\n        return this;\n    },\n    setStartRequestFunc(func) {\n        this.startRequest = func;\n        return this;\n    },\n    headers(headers) {\n        this.options.headers = headers || void 0;\n        return this;\n    },\n    success(successCallback) {\n        if (typeof successCallback !== \"function\") return this;\n        this.successCallback = successCallback;\n        return this;\n    },\n    error(errorCallback) {\n        if (typeof errorCallback !== \"function\") return this;\n        this.errorCallback = errorCallback;\n        return this;\n    },\n    errorType(errorTypeCallback) {\n        if (typeof errorTypeCallback !== \"function\") return this;\n        this.errorTypeCallback = errorTypeCallback;\n        return this;\n    },\n    errorWithRetry(retryCount, errorCallbackWithRetry) {\n        if (typeof retryCount === \"function\" && typeof errorCallbackWithRetry === \"undefined\") {\n            errorCallbackWithRetry = retryCount;\n            retryCount = 1;\n        }\n        if (typeof errorCallbackWithRetry !== \"function\") {\n            return this;\n        }\n        this.retryCount = Number(retryCount);\n        this.errorCallbackWithRetry = errorCallbackWithRetry;\n        return this;\n    },\n    start(toJson) {\n        let options = Object.assign({}, this.options);\n        if (typeof options.body === \"object\" && this._bodyToString) {\n            options.body = JSON.stringify(options.body);\n        }\n        var res = JSON.parse(this.startRequest(this.buildParam?buildUrl(this.url, this.buildParam):this.url, options));\n        try {\n            if (res.statusCode >= 200 && res.statusCode <= 300) {\n                let body = res.body;\n                if (toJson) {\n                    body = JSON.parse(body);\n                }\n                return this.successCallback(body, res);\n            } else {\n                throw new Error(String(res.statusCode));\n            }\n        } catch (err) {\n            try {\n                err = this.errorTypeCallback(err, res);\n            } catch (e) {\n\n            }\n            if (this.retryCount) {\n                let tryResult = this.errorCallbackWithRetry(err, res, this);\n                if (tryResult) {\n                    this.retryCount--;\n                    return this.start(toJson);\n                } else {\n                    this.retryCount = 0;\n                    return this.errorCallback(err, res);\n                }\n            } else {\n                return this.errorCallback(err, res);\n            }\n        }\n    },\n    setOptions(options) {\n        this.options = Object.assign({}, options, {\n            withHeaders: true\n        });\n        return this;\n    },\n    mergeHeadAndBody(options) {\n        options = options || {};\n        Object.assign(this.options.headers||{}, options.headers);\n        if (typeof this.options.body === \"object\" && typeof options.body === \"object\") {\n            Object.assign(this.options.body||{}, options.body);\n        }\n        if (typeof options.buildUrl === \"object\") {\n            Object.assign(this.buildParam||{}, options.buildUrl);\n        }\n        return this;\n    }\n});\n\nObject.assign(httpRequest, {\n    fetch(url, options) {\n        return new httpRequest(url, options);\n    },\n    post(url, options) {\n        return new httpRequest(url, options).setStartRequestFunc(post);\n    },\n    request(url, options) {\n        return new httpRequest(url, options).setStartRequestFunc(request);\n    },\n    postRequest(url, options) {\n        return new httpRequest(url, options).setStartRequestFunc(postRequest);\n    },\n    fetchCookie(url, options) {\n        return new httpRequest(url, options).setStartRequestFunc(fetchCookie);\n    }\n});\n$.exports = httpRequest;"},{"col_type":"movie_3","name":"Ⓛ列表页面","path":"quarkList","rule":"js:\nlet d = [];\n\naddListener(\"onClose\", () => clearMyVar(\"playUrlCache\"));\naddListener(\"onRefresh\", () => clearMyVar(\"playUrlCache\"));\n\nlet realurl = decodeURIComponent(getParam(\"realurl\", \"\")); // .split(\"?\")[0];\n// let urlData = realurl.split(\"/\");\n\n\n\nlet shareId = MY_PARAMS.shareId || realurl.match(/pan\\.quark\\.cn(%2F|\\/)s\\1([a-zA-Z0-9]+)/)[2];\nlet sharePwd = getParam(\"sharePwd\", MY_PARAMS.sharePwd || \"\");\nlet shareToken = getParam(\"shareToken\", MY_PARAMS.shareToken || \"\");\n\nlet fileId = MY_PARAMS.fileId;\n\nlet sort = {\n    \"名称正序\": \"file_name:asc\",\n    \"名称倒序\": \"file_name:desc\",\n    \"时间正序\": \"updated_at:asc\",\n    \"时间倒序\": \"updated_at:desc\"\n};\nlet styles = [\"text_1\", \"avatar\"];\n\nlet sortValue = sort[getItem(\"sortKey\", \"名称正序\")];\nlet style = getItem(\"style\", styles[0]);\nif (MY_PAGE == 1) {\n    d.push({\n        title: style,\n        url: $(styles, 1, '请选择').select(() => {\n            setItem('style', input);\n            refreshPage();\n        }),\n        pic_url: \"https://hikerfans.com/img/ali_icon.svg\",\n        col_type: \"icon_small_4\"\n    });\n    d.push({\n        title: getItem(\"sortKey\", \"名称正序\"),\n        url: $(Object.keys(sort), 1, '请选择').select(() => {\n            setItem(\"sortKey\", input)\n            refreshPage();\n        }),\n        pic_url: \"https://hikerfans.com/img/ali_sort.svg\",\n        col_type: \"icon_small_4\"\n    });\n    d.push({\n        title: getItem(\"quark_playMode\", \"转码\"),\n        url: $([\"转码\", \"原画\"], 2, \"播放模式\").select(() => {\n            setItem(\"quark_playMode\", input);\n            refreshPage();\n            return \"toast://切换成功\";\n        }),\n        col_type: \"icon_small_4\",\n        pic_url: \"https://hikerfans.com/img/ali_play.svg\",\n    });\n    d.push({\n        title: \"功能\",\n        url: $([\"跳转夸克APP\", \"登录\", \"原画下载线程\"]).select((shareId) => {\n            if (input === \"跳转夸克APP\") {\n                return \"qklink://www.uc.cn/b20b84fd735a8dd3f7541129bacc4e9a?action=open_url&url=https://pan.quark.cn/s/\" + shareId;\n            } else if (input === \"登录\") {\n                return $([\"输入Cookie\", \"网页登录\"]).select(() => {\n                    if (input === \"网页登录\") {\n                        return \"hiker://page/login\";\n                    } else {\n                        return $(\"\", \"请输入Cookie\").input(() => {\n                            if ($.require(\"tool\").isLoginCookie(input)) {\n                                setItem(\"quarkCookie\", input.replace(/\\s/g, \"\"));\n                                return \"toast://设置成功\";\n                            } else {\n                                return \"toast://Cookie格式错误\";\n                            }\n                        });\n                    }\n                })\n            } else if (input === \"原画下载线程\") {\n                return $(getItem(\"speedThread\", \"10\"), \"请输入3-32之间的整数\").input(() => {\n                    let speedThread = parseInt(input);\n                    if (speedThread < 3 || speedThread > 32) {\n                        return \"toast://设置不合法\";\n                    }\n                    setItem(\"speedThread\", String(speedThread));\n                    return \"toast://设置成功\";\n                });\n            }\n        }, shareId),\n        col_type: \"icon_small_4\",\n        pic_url: \"https://hikerfans.com/img/ali_fileinto.svg\",\n    });\n    d.push({\n        col_type: 'line_blank'\n    });\n}\n\n\nlet QuarkShareApi = $.require(\"QuarkShareApi\");\nlet quarkShareApi = new QuarkShareApi(shareId, sharePwd).setToken(shareToken).setRefresh((shareToken) => {\n    MY_PARAMS.shareToken = shareToken;\n    setPageParams(MY_PARAMS);\n});\n\nfunction formatSize(size) {\n    if (!size) {\n        return '';\n    }\n    const units = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n    let i = 0;\n    while (size >= 1024) {\n        size /= 1024;\n        i++;\n    }\n    size = i ? Number(size.toFixed(2)) : size;\n    return `${size} ${units[i]}`;\n}\n\nlet subExts = [\"vtt\", \"srt\", \"ass\"];\nlet titleHead = {\n    video: \"🎬\",\n    audio: \"🎵\",\n    doc: \"📑\",\n    image: \"🖼\",\n    archive: \"📦\",\n    \"default\": \"❓\"\n};\n\nfunction getHead(type, ext) {\n    let head = titleHead[type];\n    /*if (subExts.includes(ext)) {\n        head = \"🕸\";\n    }*/\n    return head || \"❓\";\n}\ntry {\n    var res = quarkShareApi.getListFile(fileId, MY_PAGE, sortValue);\n    //设置标题\n    setPageTitle(res.data.share.title);\n    var list = res.data.list||[];\n    if(list.length===0&&!fileId){\n        res = quarkShareApi.getListFile(res.data.share.first_fid, MY_PAGE, sortValue);\n        setPageTitle(res.data.share.title);\n        var list = res.data.list||[];\n    }\n    list.forEach(item => {\n        //判断是否文件夹\n        if (item.dir) {\n            d.push({\n                title: \"📂\" + item.file_name,\n                desc: $.dateFormat(item.updated_at, 'yyyy-MM-dd') + '  ' + item.include_items + '项  ',\n                pic_url: \"https://hikerfans.com/tubiao/messy/27.svg\",\n                url: \"hiker://page/quarkList?page=fypage\",\n                col_type: style,\n                extra: {\n                    shareId,\n                    sharePwd,\n                    shareToken: quarkShareApi.getToken(),\n                    fileId: item.fid,\n                    inheritTitle: false\n                }\n            });\n        } else {\n            d.push({\n                title: getHead(item.obj_category) + item.file_name,\n                desc: $.dateFormat(item.updated_at, 'yyyy-MM-dd') + '  ' + formatSize(item.size),\n                pic_url: item.thumbnail,\n                url: $().lazyRule((fid, fid_token, pwd_id, stoken, category) => {\n                    let playUrlCache = storage0.getMyVar(\"playUrlCache\", {});\n                    if (playUrlCache[fid]) {\n                        return playUrlCache[fid];\n                    } else {\n                        let url = $.require(\"play\").getPlayUrl(fid, fid_token, pwd_id, stoken, category);\n                        playUrlCache[fid] = url;\n                        storage0.putMyVar(\"playUrlCache\", playUrlCache);\n                        return url;\n                    }\n                }, item.fid, item.share_fid_token, shareId, quarkShareApi.getToken(), item.obj_category),\n                col_type: style,\n                extra: {\n                    id: item.fid,\n                    inheritTitle: false,\n                    cls: 'playlist ' + item.obj_category\n                }\n            })\n        }\n        d.push({\n            col_type: 'line'\n        });\n    });\n} catch (e) {\n    d.push({\n        title: e.message,\n        url: 'hiker://empty',\n        col_type: 'text_center_1',\n        extra: {\n            lineVisible: false\n        }\n    });\n    if (e.message.includes(\"提取码\")) {\n        d.push({\n            title: \"输入提取码\",\n            url: $().input((MY_PARAMS) => {\n                setPageParams(Object.assign({}, MY_PARAMS, {\n                    sharePwd: input\n                }));\n                refreshPage();\n            }, MY_PARAMS),\n            col_type: \"text_center_1\"\n        });\n    }\n}\nsetResult(d);"},{"col_type":"movie_3","name":"Ⓛ获取链接","path":"play","rule":"js:\nconst cookie = getItem(\"quarkCookie\", \"\");\nlet httpRequest = $.require(\"httpRequest\");\n\nfunction CookieManage(cookie) {\n    this.cookie = {};\n    this.add(cookie);\n}\nObject.assign(CookieManage.prototype, {\n    add(cookie) {\n        let cookies = [];\n        if (typeof cookie === \"string\") {\n            cookies = cookie.split(\";\");\n        } else if (Array.isArray(cookie)) {\n            cookies = cookie;\n        }\n        cookies.forEach(v => {\n            v = v.split(\"=\");\n            if (v.length < 2) return;\n            this.cookie[v[0].trim()] = v[1].trim();\n        });\n    },\n    get() {\n        return Object.entries(this.cookie).map(v => v[0] + \"=\" + v[1]).join(\";\");\n    }\n});\nconst cookieManage = new CookieManage(cookie);\n\nfunction waitSleep(time) {\n    java.lang.Thread.sleep(time || 600);\n}\n\nfunction requestHttp(url) {\n    return new httpRequest(url)\n        .success((body, res) => {\n            if (body.status !== 200) {\n                throw new Error(body.message);\n            }\n            cookieManage.add(res.headers[\"set-cookie\"]);\n            return body;\n        })\n        .errorType((err, res) => {\n            return new Error(JSON.parse(res.body).message);\n        })\n        .bodyToString(true)\n        .headers({\n            cookie: cookieManage.get(),\n            \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) quark-cloud-drive/2.5.20 Chrome/100.0.4896.160 Electron/18.3.5.4-b478491100 Safari/537.36 Channel/pckk_other_ch\",\n            \"referer\": \"https://drive.quark.cn/\"\n        });\n}\n\nfunction getDriveInfo() {\n    return requestHttp(\"https://drive.quark.cn/1/clouddrive/share/sharepage/dir?pr=ucpro&fr=pc&aver=1\").start(true);\n}\n\nfunction createSaveTask(fid, fid_token, pwd_id, stoken) {\n    let driveInfo = getDriveInfo();\n    return requestHttp(\"https://drive.quark.cn/1/clouddrive/share/sharepage/save?pr=ucpro&fr=pc\").setStartRequestFunc(post).body({\n        \"fid_list\": [\n            fid\n        ],\n        \"fid_token_list\": [\n            fid_token\n        ],\n        \"to_pdir_fid\": driveInfo.data.dir.fid,\n        \"pwd_id\": pwd_id,\n        \"stoken\": stoken,\n        \"pdir_fid\": driveInfo.data.dir.pdir_fid\n    }).start(true);\n}\n\nfunction createDeleteTask(fid) {\n    let driveInfo = getDriveInfo();\n    return requestHttp(\"https://drive.quark.cn/1/clouddrive/file/delete?pr=ucpro&fr=pc\").setStartRequestFunc(post).body({\n        \"action_type\": 2,\n        \"filelist\": [\n            fid\n        ],\n        \"exclude_fids\": []\n    }).start(true);\n}\n\nfunction task(task_id, retry_index) {\n    return requestHttp(\"https://drive.quark.cn/1/clouddrive/task\").buildUrl({\n        pr: \"ucpro\",\n        fr: \"pc\",\n        task_id: task_id,\n        retry_index: retry_index\n    }).start(true);\n}\n\nfunction queryTask(task_id) {\n    for (let i = 0; i < 6; i++) {\n        try {\n            let res = task(task_id, i + \"\");\n            if (res.data.status === 2) {\n                waitSleep(1000);\n                return res.data.save_as.save_as_top_fids[0];\n            }\n            waitSleep(300);\n        } catch (e) {}\n    }\n    return void(0);\n}\n\nfunction queryTaskStatus(task_id) {\n    for (let i = 0; i < 6; i++) {\n        try {\n            let res = task(task_id, i + \"\");\n            if (res.data.status === 2) {\n                waitSleep(1000);\n                return true;\n            }\n            waitSleep(300);\n        } catch (e) {}\n    }\n    return false;\n}\n\nfunction getPreviewVideo(fid) {\n    return requestHttp(\"https://drive.quark.cn/1/clouddrive/file/v2/play?pr=ucpro&fr=pc\").body({\n        \"fid\": fid,\n        \"resolutions\": \"normal,low,high,super,2k,4k\",\n        \"supports\": \"fmp4,m3u8\"\n    }).setStartRequestFunc(post).start(true);\n}\n\nfunction getDownloadUrl(fid) {\n    return requestHttp(\"https://drive.quark.cn/1/clouddrive/file/download?pr=ucpro&fr=pc\").body({\n        \"fids\": [fid]\n    }).setStartRequestFunc(post).start(true);\n}\n\nfunction getPlayUrl(fid, fid_token, pwd_id, stoken, category) {\n    try {\n        if (!cookie) return \"toast://请登录账号\";\n        let taskId = createSaveTask(fid, fid_token, pwd_id, stoken).data.task_id;\n        let asfid = queryTask(taskId);\n        if (!asfid) {\n            return \"toast://获取失败\";\n        }\n        let playCookie = cookieManage.get();\n        let playHeader = {\n            Referer: \"http://pan.quark.cn/\",\n            cookie: playCookie,\n            \"User-Agent\": \"com.stub.StubApp/1.3.0 (Linux;Android 14) AndroidXMedia3/1.1.1\"\n        };\n        if (category == \"video\") {\n            let playMode = getItem(\"quark_playMode\", \"转码\");\n            if (playMode === \"转码\") {\n                let videoRes = getPreviewVideo(asfid);\n                let videoList = videoRes.data.video_list;\n                let playList = {\n                    names: [],\n                    urls: [],\n                    headers: []\n                };\n                videoList.filter(v => v.accessable).forEach(v => {\n                    playList.names.push(v.resolution);\n                    playList.urls.push(v.video_info.url + \"#isVideo=true#\");\n                    playList.headers.push(playHeader);\n                });\n                createDeleteTask(asfid);\n                return JSON.stringify(playList);\n            } else {\n                let playUrl = getDownloadUrl(asfid).data[0].download_url;\n                let playList = {\n                    names: [\"原画\"],\n                    urls: [playUrl + \"#isVideo=true##fastPlayMode##threads=\" + getItem(\"speedThread\", \"10\") + \"#\"],\n                    headers: [playHeader]\n                }\n                createDeleteTask(asfid);\n                return JSON.stringify(playList);\n            }\n        } else { // 不是视频资源\n            let playInfo = getDownloadUrl(asfid).data[0];\n            let playUrl = playInfo.download_url;\n\n            // 音频资源\n            if (playInfo.format_type.includes('audio') || playInfo.file_name.match(/\\.(aac|ac3|aiff|amr|m4a|mp2|mp3|ogg|ra|au|wav|wma|mka|flac|wav)/)) {\n                let playList = {\n                    names: [\"音频\"],\n                    urls: [playUrl + \"#isVideo=true#\"],\n                    headers: [playHeader],\n                    lyric: \"\"\n                }\n                createDeleteTask(asfid);\n                return JSON.stringify(playList);\n            }\n\n            // 漏网之鱼\n            if (playInfo.format_type.includes('video') || playInfo.file_name.match(/\\.(avi|wmv|mpeg|mp4|m4v|mov|asf|flv|f4v|rmvb|rm|3gp|vob|mkv)/)) {\n                let playList = {\n                    names: [\"原画\"],\n                    urls: [playUrl + \"#isVideo=true##fastPlayMode##threads=\" + getItem(\"speedThread\", \"10\") + \"#\"],\n                    headers: [playHeader]\n                }\n                createDeleteTask(asfid);\n                return JSON.stringify(playList);\n            }\n\n            // 显示图片\n            if (playInfo.format_type.includes('image') || playInfo.file_name.match(/\\.(jpg|gif|jpeg|png|bmp|svg|ico|tiff)/)) {\n                return playUrl + \"@headers=\" + JSON.stringify(playHeader);\n            }\n\n            // 下载资源\n            playHeader = Object.keys(playHeader).map(Key => Key + \"@\" + String(playHeader[Key]).replace(/;/g, \"；；\"));\n            return 'download://' + playUrl + ';{' + playHeader.join(\"&&\") + '}';\n        }\n    } catch (e) {\n        if (e.message.includes(\"require login\")) {\n            toast(\"未登录或登录过期，请重新登录\");\n            return \"hiker://page/login\";\n        }\n        return \"toast://\" + e.toString();\n    }\n}\n\n$.exports = {\n    getPlayUrl\n};"},{"col_type":"movie_3","name":"Ⓛ登录账号","path":"login","rule":"js:\nlet d = [];\naddListener(\"onClose\", () => {\n    let cookie = getVar(\"quarkCookie\", \"\");\n    if (cookie) {\n        setItem(\"quarkCookie\", cookie);\n        toast(\"Cookie获取成功\");\n        refreshPage();\n    }\n    clearVar(\"quarkCookie\");\n});\nd.push({\n    col_type: \"x5_webview_single\",\n    url: \"https://pan.quark.cn/\",\n    desc: \"float&&100%\",\n    extra: {\n        js: $.toString((ApiRootUrl) => {\n            let timeInter = setInterval(() => {\n                let Cookie = fba.getCookie(ApiRootUrl);\n                if (Cookie.includes(\"_UP_F7E_8D_=\") && Cookie.includes(\"__uid=\")&&Cookie.includes(\"__puus=\")) {\n                    fba.putVar(\"quarkCookie\", Cookie)\n                    clearInterval(timeInter);\n                    fba.log(Cookie);\n                    fba.back(false);\n                }\n            }, 600);\n        }, \"https://pan.quark.cn\"),\n        ua: PC_UA,\n        jsLoadingInject: false\n    }\n});\nsetResult(d)"},{"col_type":"movie_3","name":"Ⓛ登录检测","path":"tool","rule":"js:\n$.exports = {\n    isLoginCookie(cookie) {\n        return !!(cookie && cookie.includes(\"_UP_F7E_8D_=\") && cookie.includes(\"__uid=\") && cookie.includes(\"__puus=\"));\n    },\n\n\n\n    setRule(input) {\n        showLoading('uckk云 解析中...');\n        try {\n            // 格式化\n            [logT, type, text] = String(input).split(\"￥\");\n            switch (String(type)) {\n                case 'Paste':\n                    text = parsePaste(text);\n                    break;\n                case 'Lanzou':\n                    [url, pwd] = text.split(\"##\");\n                    durl = $.require('lanzou?rule=uckk云').one_url(url, pwd, 1);\n                    text = String(fetch(durl));\n                    if ((sp = text.split(\"￥\")).length == 3) {\n                        text = sp[2].split(\"@\")[0].trim();\n                    }\n                    break;\n            }\n            arr1 = JSON.parse(base64Decode(text));\n\n\n            // 合并，去重\n            arr2 = $.require(\"configs?rule=uckk云\").getJson();\n            arr3 = arr2.concat(arr1).filter((obj, index, arr) => {\n                return arr.findIndex(o => obj.group === o.group && obj.title === o.title && (obj.time > o.time || obj.time == o.time)) === index;\n            });\n            $.require(\"configs?rule=uckk云\").saveJson(arr3);\n\n\n            // 计算余量\n            x = arr3.length - arr2.length;\n            f = arr1.length - x\n            refreshPage();\n            toast(\"导入成功，新增：\" + x + \" 覆盖：\" + f);\n        } catch (e) {\n            log(e.toString());\n            toast(\"导入失败\");\n        }\n        hideLoading();\n    },\n\n\n\n    setEdit() {\n        _ = {\n            group: getMyVar(\"group\", \"夸克\").trim(), // 规则 类别\n            search_enabled: getMyVar(\"search_enabled\", \"1\").trim(), // 启用搜索 #\n            explore_enabled: getMyVar(\"explore_enabled\", \"0\").trim(), // 启用发现 #\n\n            title: getMyVar(\"title\", \"\").trim(), // 源名称\n            author: getMyVar(\"author\", \"佚名\").trim(), // 源作者\n            icon: getMyVar(\"icon\", \"\").trim(), // 源图标\n            preRule: getMyVar(\"preRule\", \"\").trim(), // js预处理\n\n            search_url: getMyVar(\"search_url\", \"\").trim(), // 搜索链接\n            search_group: getMyVar(\"search_group\", \"常用\").trim(), // 源分组 #\n            searchFind: getMyVar(\"searchFind\", \"\").trim(), // 搜索规则\n\n            explore_X5: getMyVar(\"explore_X5\", \"0\").trim(), // 使用x5 #\n            url: getMyVar(\"url\", \"\").trim(), // 发现链接\n            find_rule: getMyVar(\"find_rule\", \"\").trim(), // 发现规则\n\n            // 发现链接替换\n            class_name: getMyVar(\"class_name\", \"\").trim(),\n            class_url: getMyVar(\"class_url\", \"\").trim(),\n            area_name: getMyVar(\"area_name\", \"\").trim(),\n            area_url: getMyVar(\"area_url\", \"\").trim(),\n            year_name: getMyVar(\"year_name\", \"\").trim(),\n            year_url: getMyVar(\"year_url\", \"\").trim(),\n            sort_name: getMyVar(\"sort_name\", \"\").trim(),\n            sort_url: getMyVar(\"sort_url\", \"\").trim(),\n\n            // x5设置\n            x5_jsLoadingInject: getMyVar(\"x5_jsLoadingInject\", \"0\").trim(),\n            x5_js: getMyVar(\"x5_js\", \"\").trim(),\n            x5_blockRules: getMyVar(\"x5_blockRules\", \"\").trim(),\n            x5_urlInterceptor: getMyVar(\"x5_urlInterceptor\", \"\").trim(),\n            x5_pageHome: getMyVar(\"x5_pageHome\", \"\").trim(),\n            x5_referer: getMyVar(\"x5_referer\", \"\").trim(),\n            x5_imgLongClick: getMyVar(\"x5_imgLongClick\", \"0\").trim(),\n            x5_showProgress: getMyVar(\"x5_showProgress\", \"0\").trim(),\n            x5_floatVideo: getMyVar(\"x5_floatVideo\", \"0\").trim(),\n            x5_autoPlay: getMyVar(\"x5_autoPlay\", \"0\").trim(),\n            x5_ua: getMyVar(\"x5_ua\", \"\").trim(),\n            x5_url: getMyVar(\"x5_url\", \"\").trim(),\n            x5_desc: getMyVar(\"x5_desc\", \"\").trim(),\n            x5_home: getMyVar(\"x5_home\", \"\").trim(),\n            time: new Date().getTime(), // 保存时间 #\n        };\n        if (_.title != \"\" && _.title != \"聚搜\" && _.title != \"最后面\") {\n            if ((_.search_url != \"\" && _.searchFind != \"\") || (_.url != \"\" && (_.explore_X5 == \"1\" || _.find_rule != \"\"))) {\n                for (t in _) {\n                    clearMyVar(t);\n                    if (_[t] == \"\" || _[t] == \"0\" || _[t] == \"MOBILE_UA\") {\n                        delete _[t];\n                    }\n                }\n                jxlist = $.require(\"configs?rule=uckk云\").getJson();\n                uids = jxlist.map(__ => md5(__.group + __.title));\n                i = uids.indexOf(getMyVar('rule_uid', '-1'));\n                if (i == -1) {\n                    jxlist.push(_);\n                } else {\n                    jxlist.splice(i, 1, _);\n                }\n                clearMyVar('rule_tid');\n                clearMyVar('rule_uid');\n                jxlist = jxlist.filter((obj, index, arr) => {\n                    return arr.findIndex(o => md5(obj.group + obj.title) === md5(o.group + o.title) && (obj.time > o.time || obj.time === o.time)) === index;\n                });\n                $.require(\"configs?rule=uckk云\").saveJson(jxlist);\n                return back(true), 'toast://保存成功';\n            } else {\n                return 'toast://搜索规则/发现规则总得写一个吧';\n            }\n        } else if (_.title == \"\") {\n            return 'toast://请填写源名称';\n        } else {\n            return 'toast://规则名不能是' + _.title;\n        }\n    },\n\n\n\n    getVariables() {\n        return [\"group\", \"search_enabled\", \"explore_enabled\", \"title\", \"author\", \"icon\", \"preRule\", \"search_url\", \"search_group\", \"searchFind\", \"explore_X5\", \"url\", \"find_rule\", \"class_name\", \"class_url\", \"area_name\", \"area_url\", \"year_name\", \"year_url\", \"sort_name\", \"sort_url\", \"x5_jsLoadingInject\", \"x5_js\", \"x5_blockRules\", \"x5_urlInterceptor\", \"x5_pageHome\", \"x5_referer\", \"x5_imgLongClick\", \"x5_showProgress\", \"x5_floatVideo\", \"x5_autoPlay\", \"x5_ua\", \"x5_url\", \"x5_desc\", \"x5_home\", \"time\", \"rule_tid\", \"rule_uid\"];\n    },\n\n\n\n    getRulePaste(rules, isJx) {\n        if (rules.length == 0) return \"toast://没有规则\";\n        text = base64Encode(JSON.stringify(rules));\n        return $(getPastes().concat(\"纯文本\"), 2, '选择分享格式').select((txt, len, _, isJx) => {\n            if (input == \"纯文本\") {\n                u = txt;\n                g = \"Text\";\n            } else {\n                u = sharePaste(txt, input);\n                g = \"Paste\";\n            }\n            if (len === 1) {\n                t = _.group + \"规则「\" + _.title + \"」\";\n            } else {\n                t = \"共「\" + len + \"」条规则\";\n            }\n            if (isJx) clearMyVar('jxlist2');\n            refreshPage(false);\n            return \"copy://uckk规则口令，打开海阔即可导入\\n\" + t + \"￥\" + g + \"￥\" + u + '@import=js:$.require(\"tool?rule=uckk云\").setRule(input);';\n        }, text, rules.length, rules[0], isJx);\n    },\n};"},{"col_type":"movie_3","name":"❶通用函数","path":"lib","rule":"const Color = (test, color) => {\n    return '<font color=\"' + (color || '#FA7298') + '\">' + test + '</front>';\n}\nconst Strong = (test) => {\n    return '<strong>' + test + '</strong>';\n}\nconst Rich = (test) => {\n    return \"‘‘’’\" + String(test)\n        .replace(/\\\\n|(<|\\s+)br\\s*\\/?\\s*>/gi, '\\n')\n        .replace(/\\\\r/g, '\\r')\n        .replace(/\\\\f/g, '\\f')\n        .replace(/\\\\t/g, '\\t')\n        .replace(/&(lt|gt|nbsp|amp|quot);/gi, ($0, $1) => ({\n            'lt': '<',\n            'gt': '>',\n            'nbsp': ' ',\n            'amp': '&',\n            'quot': '\"'\n        }[$1.toLowerCase()]))\n        .replace(/<\\/?(em|span)[^>]*>/gi, '');\n}\nconst Size = size => {\n    if (!size) return '无法计算';\n    units = ['B', 'KB', 'MB', 'GB'];\n    i = 0;\n    while (size > 1023) {\n        size /= 1024;\n        i++;\n    }\n    size = i ? size.toFixed(2) : size;\n    return `${size} ${units[i]}`;\n}\ntry {\n    MY_PAGE;\n} catch (err) {\n    MY_PAGE = 1;\n}\nlet id = \"uckk云\";\nlet page = MY_PAGE;\nlet _PAGE = page == 1;\nlet icons = {\n    阿里: \"https://gw.alicdn.com/imgextra/i1/O1CN01rAr34V28oR0rupkAi_!!6000000007979-2-tps-240-240.png\",\n    夸克: \"hiker://images/icon_kuake\",\n    音频: \"hiker://images/icon_music3\",\n    磁力: \"https://android-artworks.25pp.com/fs08/2023/08/23/10/110_e1533a024c7efec175bc5110e96736ac_con_130x130.png\",\n    影视: \"hiker://images/icon_video2\",\n    动漫: \"hiker://images/icon_pic3\",\n    图文: \"hiker://images/icon_txt2\",\n    其他: \"hiker://images/icon_unknown\"\n}\nlet groups = Object.keys(icons);\nlet pageid = id + \"ypj-page\" + page;\nlet keyword = String(getMyVar(\"keyword\", \"\")).trim();\nlet _SOU = keyword != \"\" && !keyword.match(/quark.*\\/s\\/.+/) && keyword == String(getMyVar(\"keyword2\", \"\")).trim();\nlet history = storage0.getItem(\"searchHistory\", []);\n\n\n\n\n\nconst setHistoryKeyword = () => {\n    ii = history.indexOf(keyword);\n    if (ii > -1) {\n        history.splice(ii, 1);\n    }\n    if (history.length > 20) {\n        history.splice(history.length - 1, 1);\n    }\n    history.unshift(keyword);\n    storage0.setItem(\"searchHistory\", history);\n}\nconst getRuleBaseUrl = (baseU, Keyword) => {\n    if (!Keyword) {\n        isFyAll = String(baseU).includes(\"fyAll\");\n        FyAll_i = Number(getMyVar(\"FyAll_i\")) || 0;\n        for (t of ['class', 'area', 'year', 'sort']) {\n            eval(`${t}_i = Number(getMyVar(\"${t}_i\")) || 0;\nrule.${t}_url = String(rule.${t}_url || \"\").trim().split(\"&\");\nrule.${t}_name = String(rule.${t}_name || \"\").trim().split(\"&\");\nrule.${t}_url = rule.${t}_url.filter((u, i) => rule.${t}_name[i] != \"\");\nrule.${t}_name = rule.${t}_name.filter((Name) => Name != \"\");\nrule.${t}_i = rule.${t}_name.length;`);\n        }\n    }\n    baseU = String(baseU)\n        .replace(\n            /fypage@([^\\?\\&\\;\\#\\\"\\'\\{]+)@?/g,\n            ($0, $1) => {\n                page2 = page;\n                $1.split(\"@\").map(_ => {\n                    eval(String('page2=page2' + _));\n                });\n                return page2;\n            }\n        )\n        .replace(/fypage/g, page)\n        .replace(/\\*\\*/g, Keyword || \"\");\n    if (!keyword) baseU = String(baseU)\n        .replace(\n            /fy(class|area|year|sort)/g,\n            ($0, $1) => rule[$1 + '_url'][eval($1 + '_i')] || \"\"\n        )\n        .replace(\n            /fyAll/g,\n            ($0, $1) => {\n                FyAll_ii = FyAll_i;\n                if (FyAll_ii > (rule.class_i - 1)) {\n                    FyAll_ii -= rule.class_i;\n                    if (FyAll_ii > (rule.area_i - 1)) {\n                        FyAll_ii -= rule.area_i;\n                        if (FyAll_ii > (rule.year_i - 1)) {\n                            return rule.sort_url[FyAll_ii - rule.year_i];\n                        } else {\n                            return rule.year_url[FyAll_ii];\n                        }\n                    } else {\n                        return rule.area_url[FyAll_ii];\n                    }\n                } else {\n                    return rule.class_url[FyAll_ii];\n                }\n            }\n        );\n    return baseU;\n}\nconst getRuleGroup = (col_type, Sou) => {\n    for (it of ['class', 'area', 'year', 'sort']) {\n        eval(`index = {\n    class: 0,\n    area: rule.class_i,\n    year: rule.class_i + rule.area_i,\n    sort: rule.class_i + rule.area_i + rule.year_i,\n}[it]\nrule.${it}_name.map((name, i) => {\n    if (isFyAll) {\n        i = index + i;\n        t = FyAll_i == i;\n        k = 'FyAll_i';\n    } else {\n        t = ${it}_i == i;\n        k = '${it}_i'\n    }\n    d.push({\n        title: t ? Rich(Strong(Color(name))) : name,\n        url: $('#noLoading#').lazyRule((k, i) => {\n            putMyVar(k, i);\n            refreshPage(false);\n            return 'hiker://empty';\n        }, k, i),\n        col_type: \"${col_type||\"\"}\" || 'scroll_button'\n    });\n});\nd.push({\n    col_type: 'blank_block'\n});`);\n    }\n    if (Sou) {\n        d.push({\n            title: '搜索',\n            desc: '搜索关键词 / 夸克链接',\n            url: $.toString(() => {\n                input = input.trim();\n                if (input.match(/quark.cn.*\\/s\\/.+/)) {\n                    return \"hiker://page/quarkList#noHistory##noRecordHistory#?realurl=\" + encodeURIComponent(input) + \"&rule=uckk云&sharePwd=\";\n                } else if (input != \"\") {\n                    putMyVar('keyword2', input);\n                    refreshPage(false);\n                }\n                return 'hiker://empty';\n            }),\n            col_type: \"input\",\n            extra: {\n                id: id + \":search\",\n                defaultValue: keyword,\n                onChange: \"putMyVar('keyword',input)\"\n            }\n        });\n    }\n    d.push({\n        url: \"toast://加载中...\",\n        img: \"https://hikerfans.com/weisyr/img/Loading1.gif\",\n        col_type: \"pic_1_center\",\n        extra: {\n            cls: \"loading_gif\"\n        }\n    });\n    setPreResult(d);\n}"},{"col_type":"movie_3","name":"❺温馨提示","path":"notice","rule":"$.exports = function() {\n    f = \"Gray\";\n    t = false;\n    up = getMyVar('Rule_noupdate', '');\n    if (up != '1') {\n        version = JSON.parse(request(\"hiker://home@uckk云\")).version;\n        if (up == '') {\n            [url, v, run] = $.require(\"lanzou?rule=uckk云\").list_one(\"https://wwr.lanzoui.com/b03qf28qb\", \"read\");\n        } else {\n            url = false;\n            v = version + 1;\n        }\n        if (version < v) {\n            f = \"red\";\n            t = \"检测到新版更新，点击了解详情。\";\n            T = \"更新内容\";\n            if (up == '') {\n                confirm({\n                    title: '更新提示',\n                    content: '检测到你的规则版本小于服务器版本，是否立即更新？',\n                    confirm: $.toString((da) => {\n                        f = $.require(\"lanzou?rule=uckk云\").one_url(da);\n                        putMyVar('Rule_noupdate', '1');\n                        return \"\\u6d77\\u9614\\u89c6\\u754c\\uffe5home_rule_url\\uffe5\" + getPath(f);\n                    }, url)\n                });\n                putMyVar('Rule_noupdate', url);\n            }\n            url = $(\"hiker://empty#noHistory##noRecordHistory#\").rule((up, version) => {\n                return $.require(\"lanzou?rule=uckk云\").one_info(up, \"uckk\", version);\n            }, url || up, version);\n        } else {\n            putMyVar('Rule_noupdate', '1');\n        }\n    }\n\n\n    if (!$.require(\"tool\").isLoginCookie(getItem(\"quarkCookie\", \"\"))) {\n        clearItem(\"quarkCookie\");\n        f = \"red\";\n        T = \"登录账号\";\n        t = \"未检测到登录信息\";\n        url = $([\"输入Cookie\", \"网页登录\"]).select(() => {\n            if (input === \"网页登录\") {\n                return \"hiker://page/login\";\n            } else {\n                return $(\"\", \"请输入Cookie\").input(() => {\n                    if ($.require(\"tool\").isLoginCookie(input)) {\n                        setItem(\"quarkCookie\", input.replace(/\\s/g, \"\"));\n                        refreshPage();\n                        return \"toast://设置成功\";\n                    } else {\n                        return \"toast://Cookie格式错误\";\n                    }\n                });\n            }\n        })\n    } else if (!t) {\n        T = \"程序设置\";\n        url = \"hiker://page/install#noHistory##noRecordHistory#\";\n        T = \"捐赠/支持\";\n        url = \"hiker://page/donate#noHistory##noRecordHistory#\";\n        hour = new Date().getHours();\n        if (hour < 5) {\n            t = \"深夜，现在的夜，熬得只是还未改变的习惯\";\n        } else if (hour < 11) {\n            t = \"早安，清晨熹微的阳光， 是你在微笑吗\";\n        } else if (hour < 14) {\n            t = \"午好，伴随着熟悉的乐曲，聆听着动人的旋律\";\n        } else if (hour < 19) {\n            t = \"夕暮，似清风醉晚霞，不经意间盈笑回眸\";\n        } else {\n            t = \"夜晚，一个安静的角落，静静地聆听夜曲\";\n        }\n    }\n    d.push({\n        title: \"““””\" + t.fontcolor(f).small(),\n        col_type: \"text_center_1\",\n        url: url,\n        extra: {\n            pageTitle: T,\n            lineVisible: false\n        }\n    });\n}"},{"col_type":"movie_3","name":"❽蓝奏更新","path":"lanzou","rule":"js:\nhead = {\n    headers: {\n        \"upgrade-insecure-requests\": \"1\",\n        \"User-Agent\": \"Mozilla/5.0 (Linux; Android 8.0.0; MI 5s Plus Build/OPR1.170623.032; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/71.0.3578.99 Mobile Safari/537.36\",\n        \"Cookie\": \"down_ip=1\",\n        \"accept\": \"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\",\n    },\n    method: 'GET'\n};\none_url = function(url, pwd, run, noTp, Html) {\n    try {\n        head.headers.referer = url.split(\"?\")[0];\n        isTp = !url.match(\"/tp/\");\n        if (isTp && !noTp) {\n            da = url.replace(/^(.*?\\.com)/, '$1/tp');\n        } else {\n            da = url;\n        }\n        html = String(Html || fetch(da, head));\n        if (html == \"\" && isTp && !noTp) {\n            return one_url(url, pwd, run, true);\n        }\n        try {\n            path = html.match(/link = ['\"]([^\"']+)/i)[1];\n            host = url.match(/^(.*?\\.com\\/)/)[1];\n            return one_url(host + path, pwd, run);\n        } catch (err0) {\n            try {\n                path = html.match(/'(\\?.+?)'/)[1];\n                host = \"https://developer.lanzoug.com\";\n            } catch (err1) {\n                eval(html.match(/value\\;([\\s\\S]+?)\\$\\(/i)[1]);\n                eval('body=' + html.match(/[\\s\\S]*data :([\\s\\S]*?\\}),\\s+/)[1]);\n                u = String(url).replace(/\\.com.*/, \".com/ajaxm.php\");\n                _ = JSON.parse(post(u, {\n                    body: body,\n                    headers: head.headers\n                }));\n                path = _.url;\n                host = _.dom;\n            }\n        }\n        u = host + \"/file/\" + path;\n        k = JSON.parse(fetch(u, {\n            redirect: false,\n            onlyHeaders: true\n        })).headers.location;\n        k = Array.isArray(k) ? k[0] : k;\n        if (run) return k;\n        let f = \"hiker://files/cache/_fileSelect_rule.json\";\n        downloadFile(k, f);\n        return f;\n    } catch (err2) {\n        return false;\n    }\n};\n$.exports = {\n    list_one: function(url, pwd, run) {\n        src = fetch(url, head);\n        eval(src.match(/var pgs;([\\s\\S]*?pgs.+;)/)[1]);\n        eval('body=' + src.match(/data :([\\s\\S]*?\\})/)[1]);\n        url = url.replace(/\\.com.*/, \".com/filemoreajax.php\");\n        list = JSON.parse(post(url, {\n            body: body,\n            headers: head.headers\n        })).text;\n        if (run) return list;\n        __ = list[0];\n        url = url.replace(/filemo.*/, 'tp/' + __.id);\n        v = __.name_all.match(/\\[(.+)/)[1];\n        [v, run] = v.split(\"]\");\n        return [url, v, run];\n    },\n    one_url: one_url,\n    one_info: function(url, pwd, version) {\n        version = version || \"未知版本\";\n        version = String(version).replace(/(\\d\\d)(\\d\\d)$/, \"-$1-$2\");\n        item = fetch(url, head);\n        t = pdfh(item, \".md&&Text\") || pdfh(item, \"title&&Text\");\n        try {\n            t = String(t).split(\"[\")[1].split(\"]\")[0];\n        } catch (err) {}\n        t = String(t).replace(/(\\d\\d)(\\d\\d)$/, \"-$1-$2\");\n        d = [];\n        d.push({\n            desc: \"<b>““\" + version + \" => \" + t + \"””</b>\",\n            col_type: \"text_center_1\",\n            url: \"hiker://empty\",\n            extra: {\n                lineVisible: false\n            }\n        });\n        d.push({\n            col_type: \"big_big_blank_block\"\n        });\n        d.push({\n            title: pdfh(item, \".mdo&&Html\").replace(/(<\\/span>)?\\s*<span>/gi, \"<br>\"),\n            url: 'hiker://empty',\n            col_type: 'rich_text'\n        });\n        d.push({\n            col_type: \"big_blank_block\"\n        });\n        d.push({\n            title: \"<b>““确定更新””</b>\".big(),\n            col_type: \"text_center_1\",\n            url: $(\"hiker://empty#noHistory##noRecordHistory#\").lazyRule((url, pwd, item) => {\n                if (getMyVar('Rule_noupdate') == '1') {\n                    return back(true), \"hiker://empty\";\n                }\n                let {\n                    one_url\n                } = $.require(\"hiker://page/lanzou?rule=歌词适配\");\n                let K = one_url(url, pwd, 1, 0, item);\n                if (!K) {\n                    K = one_url(url, pwd, 1);\n                }\n                if (!K) {\n                    K = one_url(url.split(\"?\")[0], pwd, 1);\n                }\n                if (K) {\n                    f = \"hiker://files/cache/_fileSelect_rule.json\";\n                    downloadFile(K, f);\n                    putMyVar('Rule_noupdate', '1');\n                    return \"\\u6d77\\u9614\\u89c6\\u754c\\uffe5home_rule_url\\uffe5\" + getPath(f);\n                } else {\n                    return \"toast://获取下载链接失败\";\n                }\n            }, url, pwd, item),\n            extra: {\n                lineVisible: false\n            }\n        });\n        setResult(d);\n    }\n}"},{"col_type":"movie_3","name":"❻支持作者","path":"donate","rule":"js:\nlet d = [];\nd.push({\n    title: \"捐赠/支持\",\n    desc: \"这个捐赠不能为你带来特权，但您的支持是我更新创作的动力。\",\n    col_type: \"text_center_1\",\n    url: \"toast://感谢您的支持\"\n});\nd.push({\n    col_type: \"pic_1_full\",\n    url: \"https://gitee.com/ThomasYou/haikuo/raw/master/IMG_20240112_081355.png\",\n    pic_url: \"https://gitee.com/ThomasYou/haikuo/raw/master/IMG_20240112_081355.png\"\n});\nd.push({\n    col_type: \"text_center_1\",\n    title: \"““””\" + \"图片加载缓慢请稍等\".small().fontcolor(\"Gray\"),\n    url: \"hiker://empty\",\n    extra: {\n        lineVisible: false\n    }\n});\nsetResult(d);"},{"col_type":"movie_3","name":"❸规则列表","path":"ruleList","rule":"js:\naddListener('onClose', $.toString(() => {\n    arr = $.require('tool?rule=uckk云').getVariables();\n    for (t of arr) {\n        clearMyVar(t);\n    }\n}));\neval(JSON.parse(fetch('hiker://page/lib?rule=uckk云', {})).rule);\nd = [];\nd.push({\n    title: '新增规则',\n    col_type: 'text_2',\n    url: $('#noLoading#').lazyRule(() => {\n        arr = $.require('tool?rule=uckk云').getVariables();\n        for (t of arr) {\n            clearMyVar(t);\n        }\n        clearMyVar(\"rule_uid\");\n        return 'hiker://page/ruleEdit#noHistory##noRecordHistory#?pageTitle=规则编辑&rule=uckk云'\n    })\n});\nd.push({\n    title: '分享选中',\n    col_type: 'text_2',\n    url: $('#noLoading#').lazyRule(() => {\n        zy = storage0.getMyVar(\"jxlist2\", {});\n        zu = Object.keys(zy);\n        if (zu.length == 0) {\n            return \"toast://没有选中规则\";\n        }\n        rules = zu.length == 1 ? [zy[zu[0]]] : zu.map(key => zy[key]);\n        return $.require(\"tool?rule=uckk云\").getRulePaste(rules, 1);\n    })\n});\n\n\n\n\n\nplatform = getMyVar('platform', '综合');\n[\"综合\"].concat(groups).map(group => {\n    if (group == platform)\n        platform2 = Rich(Strong(Color(group)));\n    else\n        platform2 = group;\n    d.push({\n        title: platform2,\n        url: $('#noLoading#').lazyRule((group) => {\n            putMyVar('platform', group);\n            refreshPage();\n            return 'hiker://empty';\n        }, group),\n        col_type: 'scroll_button',\n        extra: {\n            longClick: [{\n                    title: '删除' + group.replace('综合', '全部') + '规则',\n                    js: $.toString((group) => {\n                        $$ = $.require('configs?rule=uckk云');\n                        if (group == \"综合\") {\n                            deleteFile($$.rulePath);\n                        } else {\n                            rules = $$.getJson_1(\"group\", group);\n                            $$.saveJson(rules);\n                        }\n                        refreshPage();\n                        return \"hiker://empty\";\n                    }, group)\n                },\n                {\n                    title: '分享' + group.replace('综合', '全部') + '规则',\n                    js: $.toString((group) => {\n                        $$ = $.require('configs?rule=uckk云');\n                        if (group == \"综合\") {\n                            rules = $$.getJson().slice(1);\n                        } else {\n                            rules = $$.getJson_1(\"group\", group, 1);\n                        }\n                        return $.require(\"tool?rule=uckk云\").getRulePaste(rules);\n                    }, group)\n                }\n            ]\n        }\n    });\n});\nd.push({\n    col_type: 'blank_block'\n});\nrules = $.require('configs?rule=uckk云').getGroupJson(false, \"group\", platform, \"综合\");\n\n\n\n\n\npid = Number(getMyVar('pid')) || 0;\nnames = $.require('configs?rule=uckk云').getGroupNames(rules, \"search_group\");\nif (pid > names.length - 1) {\n    pid = 0;\n}\nnames.map((group, i) => {\n    if (i == pid)\n        platform2 = Rich(Strong(Color(group)));\n    else\n        platform2 = group;\n    d.push({\n        title: platform2,\n        url: $('#noLoading#').lazyRule((i) => {\n            putMyVar('pid', i);\n            refreshPage(false);\n            return 'hiker://empty';\n        }, i),\n        col_type: 'scroll_button',\n        extra: {\n            longClick: [{\n                title: '分享' + group.replace('全全', '全部') + '规则',\n                js: $.toString((platform, group) => {\n                    $$ = $.require('configs?rule=uckk云');\n                    if (platform == \"综合\") {\n                        rules = $$.getJson().slice(1);\n                    } else {\n                        rules = $$.getJson_1(\"group\", platform, 1);\n                    }\n                    if (group != \"全全\") {\n                        rules = rules.filter(f => f.search_group == group);\n                    }\n                    return $.require(\"tool?rule=uckk云\").getRulePaste(rules);\n                }, platform, group)\n            }]\n        }\n    });\n});\nd.push({\n    col_type: 'line'\n});\nplatform2 = names[pid];\nrules = $.require('configs?rule=uckk云').getGroupJson(rules, \"search_group\", platform2, \"全全\").slice(1);\n\n\n\n\n\n\nif (rules.length == 0) {\n    d.push({\n        title: Rich(Strong(Color(\"没有规则\"))),\n        url: 'hiker://empty',\n        col_type: 'text_center_1',\n        extra: {\n            lineVisible: false\n        }\n    });\n} else {\n    jxlist2 = storage0.getMyVar(\"jxlist2\", {});\n    rules.map((_, ii) => {\n        m = md5(_.group + _.title);\n        i = !jxlist2[m];\n        d1 = _.explore_enabled == \"1\";\n        d2 = 'by ' + _.author;\n        d.push({\n            title: Strong(i ? _.title : Color(_.title)),\n            desc: d1 ? Color(d2, \"#2E5D8E\") : d2,\n            url: $([\"分享\", \"编辑\", \"删除\", \"移动\"].concat([i ? \"选中规则\" : \"取消选中\", d1 ? \"禁用发现\" : \"启用发现\"]), 2, '选择扩展操作').select((m, _) => {\n                switch (input) {\n                    case '分享':\n                        return $.require(\"tool?rule=uckk云\").getRulePaste([_]);\n                        break;\n                    case '编辑':\n                        arr = $.require('tool?rule=uckk云').getVariables();\n                        for (t of arr) {\n                            clearMyVar(t);\n                        }\n                        arr = Object.keys(_);\n                        for (t of arr) {\n                            putMyVar(t, _[t] || \"\");\n                        }\n                        putMyVar('rule_uid', m);\n                        putMyVar('search_enabled', _.search_enabled || \"0\");\n                        putMyVar('explore_enabled', _.explore_enabled || \"0\");\n                        return 'hiker://page/ruleEdit#noHistory##noRecordHistory#?pageTitle=规则编辑&rule=uckk云';\n                        break;\n                    case '删除':\n                        return $(\"确定删除\" + _.group + \"规则“\" + _.title + '”吗？\\n此操作不可逆，请谨慎选择。').confirm((m) => {\n                            $$ = $.require('configs?rule=uckk云');\n                            rules = $$.getJson_2(m);\n                            $$.saveJson(rules);\n                            refreshPage(false);\n                        }, m);\n                        break;\n                    case '移动':\n                        zy = $.require('configs?rule=uckk云').getJson_2(m);\n                        zu = zy.slice(1).map(_ => _.title);\n                        return $(zu.concat(\"最后面\"), 2, '请选择移动位置').select((zy, zu, _) => {\n                            i = zu.indexOf(input);\n                            if (i == -1)\n                                zy.push(_);\n                            else\n                                zy.splice(i + 1, 0, _);\n                            $.require('configs?rule=uckk云').saveJson(zy);\n                            refreshPage(false);\n                        }, zy, zu, _);\n                        break;\n                    case '选中规则':\n                        jxlist2 = storage0.getMyVar(\"jxlist2\", {});\n                        jxlist2[m] = _;\n                        storage0.putMyVar(\"jxlist2\", jxlist2);\n                        refreshPage(false);\n                        break;\n                    case '取消选中':\n                        jxlist2 = storage0.getMyVar(\"jxlist2\", {});\n                        delete jxlist2[m];\n                        storage0.putMyVar(\"jxlist2\", jxlist2);\n                        refreshPage(false);\n                        break;\n                    case '启用发现':\n                    case '禁用发现':\n                        $.require('configs?rule=uckk云').getJson_2(m, \"explore_enabled\");\n                        refreshPage(false);\n                        break;\n                }\n            }, m, _),\n            col_type: 'avatar',\n            img: _.icon\n        });\n        d.push({\n            title: _.group + '丨' + _.search_group + '丨' + (_.x5_url || (_.url ? _.url : _.search_url).split(\"/\").slice(0, 3).join(\"/\")),\n            url: $('#noLoading#').lazyRule((m) => {\n                $.require('configs?rule=uckk云').getJson_2(m, \"search_enabled\");\n                refreshPage(false);\n                return 'hiker://empty';\n            }, m),\n            col_type: 'text_icon',\n            img: 'https://hikerfans.com/tubiao/messy/' + (_.search_enabled == '1' ? 55 : 63) + '.svg',\n            extra: {\n                lineVisible: false\n            }\n        });\n        d.push({\n            col_type: 'line'\n        });\n    });\n}\nsetResult(d);"},{"col_type":"movie_3","name":"❼程序首页","path":"home","rule":"js:\neval(JSON.parse(fetch('hiker://page/lib?rule=uckk云', {})).rule);\naddListener('onRefresh', $.toString(() => {\n    putMyVar('keyword2', getMyVar('keyword'));\n}));\nd = [];\nlet rules = $.require(\"configs?rule=uckk云\").getJson();\n\n\n\nsearch_rule = rules.filter(_ => _.search_enabled == \"1\" && _.search_url != \"\" && _.searchFind != \"\");\nsearch_type = $.require(\"configs?rule=uckk云\").getGroupNames(search_rule, \"group\");\nruleType = getMyVar(\"ruleType\", \"综合\");\nsearch_rule = $.require(\"configs?rule=uckk云\").getGroupJson(search_rule, \"group\", ruleType, \"综合\");\nsearch_group = $.require(\"configs?rule=uckk云\").getGroupNames(search_rule, \"search_group\");\nruleGroup = Number(getMyVar(\"ruleGroup\")) || 0;\nif (ruleGroup > search_group.length - 1) {\n    ruleGroup = 0;\n}\nsearch_rule = $.require(\"configs?rule=uckk云\").getGroupJson(search_rule, \"search_group\", search_group[ruleGroup], \"全全\");\nlet sid = Number(getMyVar(\"sid\")) || 0;\nif (sid > search_rule.length - 1) {\n    sid = 0;\n}\nif (sid) {\n    data = [search_rule[sid]];\n} else {\n    data = search_rule.slice(1);\n}\n\n\n\n\nlet explore_rule = rules.filter(_ => _.explore_enabled == \"1\" && _.url != \"\" && (_.explore_X5 == \"1\" || _.find_rule != \"\"));\nlet tid = Number(getMyVar(\"tid\")) || 0;\nif (tid > explore_rule.length - 1) {\n    tid = 0;\n}\nlet rule = _ = explore_rule[tid];\nlet rule_x5 = _.explore_X5 == \"1\";\nif (rule_x5) {\n    if (!_.x5_url && (_.url ? _.url : _.search_url).match(/fy(All|class|area|sort|year|page)/)) {\n        _.x5_url = (_.url ? _.url : _.search_url).split(\"/\").slice(0, 3).join(\"/\");\n    }\n} else {\n    if (_PAGE) $.require('notice?rule=uckk云')();\n    _.x5_desc = '1';\n}\nlet baseUrl, home_baseUrl = getRuleBaseUrl(_.url);\n\n\n\n\n\n\n// top\nif (_PAGE) {\n    explore_rule.map((_, i) => {\n        d.push({\n            title: Strong(\"““\" + (tid == i ? _.title + \"””\" : \"””\" + _.title)),\n            url: $('#noLoading#').lazyRule((i) => {\n                putMyVar('keyword2', getMyVar('keyword'));\n                putMyVar('tid', i);\n                for (t of [\"class\", \"area\", \"year\", \"sort\", \"FyAll\"]) {\n                    clearMyVar(t + \"_i\");\n                }\n                refreshPage();\n                return 'hiker://empty';\n            }, i),\n            col_type: 'scroll_button'\n        });\n    });\n    d.push({\n        col_type: \"x5_webview_single\",\n        url: _.x5_desc == '1' || _.x5_url || _.url,\n        desc: _.x5_desc == '1' ? '0' : 'screen-133&&float',\n        extra: {\n            canBack: true,\n            ua: _.x5_ua ? (_.x5_ua == \"PC_UA\" ? PC_UA : _.x5_ua) : MOBILE_UA,\n            referer: _.x5_referer,\n            js: _.x5_js,\n            jsLoadingInject: !!_.x5_jsLoadingInject,\n            autoPlay: !!_.x5_autoPlay,\n            floatVideo: !!_.x5_floatVideo,\n            imgLongClick: !_.x5_imgLongClick,\n            showProgress: !_.x5_showProgress,\n            blockRules: eval(_.x5_blockRules) || [],\n            urlInterceptor: $.toString((urlInterceptor_js, x5Url) => {\n                if (input.includes(\"aliyundrive.com/\") || input.includes(\"aliyundrive.net/\") || input.includes(\"alipan.com/\")) {\n                    return $.toString((url) => {\n                        fba.open(JSON.stringify({\n                            rule: '云盘君.简',\n                            url: \"hiker://page/aliyun#noHistory##noRecordHistory#?rule=云盘君.简&page=fypage&realurl=\" + encodeURIComponent(url)\n                        }));\n                    }, input)\n                } else if (input.includes(\"quark.cn\")) {\n                    return $.toString((url) => {\n                        fba.open(JSON.stringify({\n                            title: \"夸克网盘\",\n                            url: \"hiker://page/quarkList#noHistory##noRecordHistory#?rule=uckk云&realurl=\" + encodeURIComponent(url),\n                        }))\n                    }, input);\n                }\n                let x5_urlInterceptor = new Function(\"input\", \"x5Url\", urlInterceptor_js);\n                return x5_urlInterceptor(input, x5Url);\n            }, _.x5_urlInterceptor, \"hiker://page/ruleHome#noHistory##noRecordHistory#?rule=uckk云&page=fypage&ruleName=\" + _.title + \"&ruleGroup=\" + _.group + \"&baseUrl=\")\n        }\n    });\n}\n\n\n\nif (rule_x5) { // x5\n    if (_.x5_desc == '1') { // 自定义首页\n        eval(_.preRule);\n        eval(_.x5_home);\n        if (rule.Search && rule.search_url != \"\" && rule.searchFind != \"\") {\n            data = [rule];\n            d.push({\n                title: \"正在搜索““\" + keyword + \"””，加载第\" + page + \"页中...\",\n                pic_url: \"https://hikerfans.com/weisyr/img/Loading1.gif\",\n                col_type: _PAGE ? \"pic_1_center\" : \"text_center_1\",\n                url: \"hiker://empty\",\n                extra: {\n                    id: pageid\n                }\n            });\n        }\n    }\n} else { // 搜索/发现\n    if (_PAGE) {\n        d.push({\n            col_type: 'line_blank'\n        }, {\n            col_type: 'line_blank'\n        }, {\n            title: Strong(\"我的收藏\"),\n            url: \"hiker://collection?rule=\" + id,\n            col_type: \"icon_small_3\",\n            img: \"hiker://images/icon_download\"\n        }, {\n            title: Strong(\"历史记录\"),\n            url: \"hiker://history?rule=\" + id,\n            col_type: \"icon_small_3\",\n            img: \"hiker://images/icon_his\"\n        }, {\n            title: Strong(\"规则管理\"),\n            url: \"hiker://page/ruleList#noHistory##noRecordHistory#?pageTitle=规则管理&rule=\" + id,\n            col_type: \"icon_small_3\",\n            img: \"hiker://images/icon_xiutan\"\n        }, {\n            title: '搜索',\n            desc: '搜索关键词 / 夸克链接',\n            url: $.toString(() => {\n                input = input.trim();\n                if (input.match(/quark.cn.*\\/s\\/.+/)) {\n                    return \"hiker://page/quarkList#noHistory##noRecordHistory#?realurl=\" + encodeURIComponent(input) + \"&rule=uckk云&sharePwd=\";\n                } else if (input != \"\") {\n                    putMyVar('keyword2', input);\n                    refreshPage(false);\n                }\n                return 'hiker://empty';\n            }),\n            col_type: \"input\",\n            extra: {\n                id: id + \":search\",\n                defaultValue: keyword,\n                onChange: \"putMyVar('keyword',input)\"\n            }\n        }, {\n            title: Rich(Strong(Color(ruleType, \"#3399cc\"))),\n            url: $([\"综合\"].concat(groups).map(name => {\n                if (name == ruleType) {\n                    name = Rich(Strong(Color(name)));\n                } else if (search_type.indexOf(name) == -1) {\n                    name = Rich(\"<S>\" + name + \"</S>\");\n                }\n                return name;\n            }), 3, \"选择搜索类别\").select(() => {\n                if (input.indexOf(\"<S>\") != -1) {\n                    return \"toast://没有对应规则\";\n                } else if (input.indexOf(\"<\") == -1) {\n                    putMyVar('keyword2', getMyVar('keyword'));\n                    putMyVar('ruleType', input);\n                    clearMyVar(\"ruleGroup\");\n                    clearMyVar(\"sid\");\n                    refreshPage(false);\n                }\n                return 'hiker://empty';\n            }),\n            col_type: 'scroll_button'\n        });\n        search_group.map((name, i) => {\n            d.push({\n                title: ruleGroup == i ? Rich(Strong(Color(name))) : name,\n                url: $('#noLoading#').lazyRule((i) => {\n                    putMyVar('keyword2', getMyVar('keyword'));\n                    putMyVar('ruleGroup', i);\n                    clearMyVar(\"sid\");\n                    refreshPage();\n                    return 'hiker://empty';\n                }, i),\n                col_type: 'scroll_button'\n            });\n        });\n        d.push({\n            col_type: 'blank_block'\n        });\n        search_rule.map((_, i) => {\n            d.push({\n                title: sid == i ? Rich(Strong(Color(_.title))) : _.title,\n                url: $('#noLoading#').lazyRule((i) => {\n                    putMyVar('keyword2', getMyVar('keyword'));\n                    putMyVar('sid', i);\n                    refreshPage();\n                    return 'hiker://empty';\n                }, i),\n                col_type: 'scroll_button'\n            });\n        });\n        d.push({\n            col_type: 'line_blank'\n        });\n    }\n\n\n\n\n\n    if (_SOU) {\n        if (data.length > 0) {\n            d.push({\n                title: \"加载第\" + page + \"页中，进度：1/\" + data.length,\n                url: \"hiker://empty\",\n                col_type: \"text_center_1\",\n                desc: \"\",\n                pic_url: \"\",\n                extra: {\n                    id: pageid\n                }\n            });\n        } else if (_PAGE) {\n            d.push({\n                title: \"没有可用的搜索规则\",\n                url: \"hiker://empty\",\n                col_type: \"text_center_1\",\n                desc: \"\",\n                pic_url: \"\",\n                extra: {\n                    id: pageid\n                }\n            });\n        }\n    } else if (_PAGE || rule.url.match(\"fypage\")) {\n        if (_PAGE) {\n            if (rule.title != \"聚搜\") d.push({\n                title: '‘‘’’<b>' + Color(rule.title, '#ff6601') + '</b>',\n                url: $('#noLoading#').lazyRule((url) => {\n                    for (t of [\"class\", \"area\", \"year\", \"sort\", \"FyAll\"]) {\n                        clearMyVar(t + \"_i\");\n                    }\n                    return url;\n                }, \"hiker://page/ruleHome?rule=uckk云&page=fypage&ruleName=\" + rule.title + \"&ruleGroup=\" + rule.group),\n                col_type: 'text_center_1',\n                img: rule.icon,\n                extra: {\n                    lineVisible: false,\n                    home: 1\n                }\n            });\n            getRuleGroup();\n        }\n        baseUrl = home_baseUrl;\n        eval(rule.preRule);\n        eval(rule.find_rule);\n    }\n}\n_PAGE ? setPreResult(d) : setResult(d);\ndeleteItemByCls('loading_gif');\n\n\n\n// 搜索\nif ((!rule_x5 || (rule.Search && rule.search_url != \"\" && rule.searchFind != \"\")) && _SOU && data.length > 0) {\n    setHistoryKeyword();\n    let tasks = data.map(it => {\n        return {\n            func: function(rule) {\n                try {\n                    page = MY_PAGE;\n                    baseUrl = getRuleBaseUrl(rule.search_url, keyword);\n                    if (page == 1 || rule.search_url.match(\"fypage\")) {\n                        eval(rule.preRule);\n                        let searchfind = new Function(\"rule\", \"baseUrl\", \"keyword\", \"page\", rule.searchFind);\n                        let list = searchfind(rule, baseUrl, keyword, page);\n                        if (!list) return [];\n                        let descTips = \"““””\" + rule.title.fontcolor(\"#f13b66a\") + \"&nbsp;&nbsp;\";\n                        let resList = [];\n                        for (let it of list) {\n                            resList.push({\n                                title: it.title.includes(\"““””\") ? it.title : \"““””\" + it.title.replace(/<\\/em>/g, \"\").replace(new RegExp(keyword, \"g\"), \"<strong><span style=\\\"color: #1E90FF\\\">\" + keyword + \"</span></strong>\"),\n                                desc: descTips + (it.desc || \"\"),\n                                url: it.url,\n                                img: it.img || it.pic_url,\n                                col_type: it.col_type || \"text_1\",\n                                extra: Object.assign({\n                                    inheritTitle: false,\n                                    noPic: true\n                                }, it.extra || {})\n                            });\n                        }\n                        return resList;\n                    } else {\n                        return [];\n                    }\n                } catch (e) {\n                    log(_.title + \":\" + e.toString());\n                    return [];\n                }\n            },\n            param: it,\n            id: \"uckk_rule@\" + it.title\n        }\n    });\n    batchExecute(tasks, {\n        func: function(param, id, error, result) {\n            param.i += 1;\n            if (Array.isArray(result)) {\n                deleteItem(\"_nothave\");\n                addItemBefore(pageid, result);\n            }\n            if (param.i === param.all) {\n                if (!result || !result.length) {\n                    deleteItem(\"_nothave\");\n                    addItemBefore(pageid, {\n                        col_type: \"text_center_1\",\n                        url: \"hiker://empty\",\n                        title: \"““””\" + \"~~~什么资源都没有哦~~~\".fontcolor(\"Gray\"),\n                        extra: {\n                            lineVisible: false,\n                            id: \"_nothave\"\n                        }\n                    });\n                }\n                deleteItem(pageid);\n            } else {\n                updateItem(pageid, {\n                    title: \"加载第\" + MY_PAGE + \"页中，进度：\" + (param.i + 1) + \"/\" + param.all,\n                    col_type: \"text_center_1\",\n                    url: \"hiker://empty\"\n                });\n            }\n        },\n        param: {\n            all: data.length,\n            i: 0,\n        }\n    });\n}"},{"col_type":"movie_3","name":"❹规则编辑","path":"ruleEdit","rule":"js:\neval(JSON.parse(fetch('hiker://page/lib?rule=uckk云', {})).rule);\n\ngroup = getMyVar('group', '夸克');\nsearch_enabled = getMyVar('search_enabled', '1') == '1';\nexplore_enabled = getMyVar('explore_enabled', '0') == '1';\n\nrule_tid = getMyVar('rule_tid', '基本');\nexplore_X5 = getMyVar('explore_X5', '0') == '1';\ntime = Number(getMyVar(\"time\")) || new Date().getTime();\n\n\n\n\n\n\n\nd = [];\nd.push({\n    title: Strong(Color('<b>' + group + '资源</b>', '#ff6601')),\n    url: $(groups.map(title => title == group ? Rich(Strong(Color(title))) : title), 2, '选择规则分组').select(() => {\n        if (!input.match(/^‘‘’’/)) {\n            putMyVar('group', input);\n            refreshPage(false);\n        }\n        return 'hiker://empty';\n    }),\n    img: icons[group],\n    col_type: 'icon_small_3'\n});\nd.push({\n    title: Color('<b>启用搜索</b>', '#ff6601'),\n    url: $('#noLoading#').lazyRule((search_enabled) => {\n        putMyVar('search_enabled', search_enabled);\n        refreshPage(false);\n        return 'hiker://empty';\n    }, search_enabled ? '0' : '1'),\n    img: 'https://hikerfans.com/tubiao/messy/' + (search_enabled ? 55 : 63) + '.svg',\n    col_type: 'icon_small_3'\n});\nd.push({\n    title: Color('<b>启用发现</b>', '#ff6601'),\n    url: $('#noLoading#').lazyRule((explore_enabled) => {\n        putMyVar('explore_enabled', explore_enabled);\n        refreshPage(false);\n        return 'hiker://empty';\n    }, explore_enabled ? '0' : '1'),\n    img: 'https://hikerfans.com/tubiao/messy/' + (explore_enabled ? 55 : 63) + '.svg',\n    col_type: 'icon_small_3'\n});\n\n[\"基本\", \"搜索\", \"发现\", \"替换\", \"扩展\"].map(name => {\n    i = rule_tid == name\n    d.push({\n        title: Rich(Strong(i ? Color(name) : name)),\n        url: $('#noLoading#').lazyRule((tid, tii) => {\n            if (tii) {\n                putMyVar('rule_tid', tid);\n                refreshPage(false);\n            }\n            return 'hiker://empty';\n        }, name, !i),\n        col_type: 'text_5'\n    });\n});\ninput_push = (desc, id, value, json, height) => {\n    d.push({\n        desc: desc,\n        title: \"</>\",\n        url: $.toString((id) => {\n            let group = $.require(\"configs?rule=uckk云\").getGroupNames(0, \"search_group\");\n            if (!group.length) {\n                return \"\";\n            }\n            return $(group, 3, \"选择规则分组\").select((id) => {\n                let extra = findItem(id).extra;\n                updateItem(id, {\n                    extra: Object.assign(extra, {\n                        defaultValue: input\n                    })\n                });\n            }, id);\n        }, id),\n        col_type: 'input',\n        extra: Object.assign({\n            defaultValue: getMyVar(id, value),\n            onChange: `putMyVar(\"${id}\", input)`,\n            type: 'textarea',\n            titleVisible: true,\n            highlight: true,\n            height: height || 5,\n            id: id,\n        }, json || {})\n    });\n}\nswitch (rule_tid) {\n    case '基本':\n        [\n            ['必填，源名称', 'title', ''],\n            ['选填，源图标', 'icon', ''],\n            ['选填，源作者', 'author', '佚名'],\n            ['选填，JsLib', 'preRule', '', {\n                height: 3\n            }],\n        ].map([a, b, c, e] => {\n            input_push(a, b, c, e, 1);\n        });\n        break;\n    case '搜索':\n        [\n            ['必填，搜索链接', 'search_url', ''],\n            ['必填，搜索分组', 'search_group', '全全', {\n                highlight: false,\n            }],\n            ['必填，列表规则\\n提供变量: baseUrl, keyword, page\\n\\n需要返回数组：return [];', 'searchFind', '', {\n                height: 5\n            }],\n        ].map([a, b, c, e] => {\n            input_push(a, b, c, e, 1);\n        });\n        break;\n    case '发现':\n        d.push({\n            title: Strong('使用 x5_webview_single'),\n            url: $('#noLoading#').lazyRule((explore_X5) => {\n                putMyVar('explore_X5', explore_X5);\n                refreshPage(false);\n                return 'hiker://empty';\n            }, explore_X5 ? '0' : '1'),\n            col_type: 'text_icon',\n            img: 'https://hikerfans.com/tubiao/messy/' + (explore_X5 ? 55 : 63) + '.svg'\n        });\n        [\n            ['必填，源链接', 'url', '', {\n                height: 1\n            }],\n            ['必填，列表规则\\n启用x5就不用写了\\n\\n继承数组d： d.push(json);', 'find_rule', ''],\n        ].map([a, b, c, e] => {\n            input_push(a, b, c, e);\n        });\n        break;\n    case '替换':\n        d.push({\n            title: Strong('发现链接替换'),\n            desc: '选填',\n            url: 'hiker://empty',\n            col_type: 'avatar',\n            img: 'hiker://images/home_icon_edit'\n        });\n        [\n            ['分类名称', 'class_name', ''],\n            ['分类替换', 'class_url', ''],\n            ['地区名称', 'area_name', ''],\n            ['地区替换', 'area_url', ''],\n            ['年代名称', 'year_name', ''],\n            ['年代替换', 'year_url', ''],\n            ['排序名称', 'sort_name', ''],\n            ['排序替换', 'sort_url', ''],\n        ].map([a, b, c, e] => {\n            input_push(a, b, c, e, 1);\n        });\n        break;\n    case '扩展':\n        x5_jsLoadingInject = getMyVar('x5_jsLoadingInject', '0') == '1';\n        x5_floatVideo = getMyVar('x5_floatVideo', '0') == '1';\n        x5_autoPlay = getMyVar('x5_autoPlay', '0') == '1';\n        x5_showProgress = getMyVar('x5_showProgress', '0') == '1';\n        x5_imgLongClick = getMyVar('x5_imgLongClick', '0') == '1';\n        x5_desc = getMyVar('x5_desc', '0') == '1';\n\n        d.push({\n            title: Strong('注入js'),\n            desc: '选填',\n            url: 'hiker://empty',\n            col_type: 'avatar',\n            img: 'hiker://images/home_icon_edit'\n        });\n        d.push({\n            title: '<b>网站加载中也执行</b>',\n            url: $('#noLoading#').lazyRule((x) => {\n                putMyVar('x5_jsLoadingInject', x);\n                refreshPage(false);\n                return 'hiker://empty';\n            }, x5_jsLoadingInject ? '0' : '1'),\n            img: 'https://hikerfans.com/tubiao/messy/' + (x5_jsLoadingInject ? 55 : 63) + '.svg',\n            col_type: 'text_icon'\n        });\n        input_push(\"如果启用了在加载中也执行，js会执行两次，需要自行处理重复加载的问题\", \"x5_js\", \"\", {}, 3);\n\n        d.push({\n            col_type: 'line_blank'\n        });\n        d.push({\n            title: Strong('拦截资源'),\n            desc: '选填',\n            url: 'hiker://empty',\n            col_type: 'avatar',\n            img: 'hiker://images/home_icon_edit'\n        });\n        input_push(\"返回为数组，支持js，不需要return\\n不执行匹配的链接，让网页加载更快，规则为包含匹配，*代表任意字符（不是正则），如果想拦截不包含的可使用!!，如 ['!!test1!!$dom'] 表示链接不包含test1并且不包含网站域名那就拦截、!!$topdom不包含主域名就拦截\", \"x5_blockRules\", \"\");\n        input_push(`提供变量 input，x5Url\\n该代码不是在网页中执行的，没有fy_bridge_app。\\n有返回就拦截链接，不加载网址，例：if(input.includes('/ad/')) return true\\n可以跳转到规则二级页面，例：\\nreturn $.toString((url, x5Url) => {\n    fba.open(JSON.stringify({\n        url: x5Url + encodeURIComponent(url)\n    }));\n}, input, x5Url)`, \"x5_urlInterceptor\", \"\", {}, 7);\n        input_push(\"子页面规则，上面的规则可以通过x5Url跳转到这里。baseUrl是跳转的链接\", \"x5_pageHome\", \"\", {}, 3);\n        d.push({\n            col_type: 'line_blank'\n        });\n        d.push({\n            title: Strong('x5设置'),\n            desc: '一般不用管',\n            url: 'hiker://empty',\n            col_type: 'avatar',\n            img: 'hiker://images/home_icon_edit'\n        });\n        input_push(\"Referer\", \"x5_referer\", \"\", {}, 1);\n        input_push(\"UA，MOBILE_UA/PC_UA/自定义\", \"x5_ua\", \"\", {}, 1);\n        d.push({\n            title: '<b>长按图片不显示菜单</b>',\n            url: $('#noLoading#').lazyRule((x) => {\n                putMyVar('x5_imgLongClick', x);\n                refreshPage(false);\n                return 'hiker://empty';\n            }, x5_imgLongClick ? '0' : '1'),\n            img: 'https://hikerfans.com/tubiao/messy/' + (x5_imgLongClick ? 55 : 63) + '.svg',\n            col_type: 'text_icon'\n        });\n        d.push({\n            title: '<b>不显示进度条</b>',\n            url: $('#noLoading#').lazyRule((x) => {\n                putMyVar('x5_showProgress', x);\n                refreshPage(false);\n                return 'hiker://empty';\n            }, x5_showProgress ? '0' : '1'),\n            img: 'https://hikerfans.com/tubiao/messy/' + (x5_showProgress ? 55 : 63) + '.svg',\n            col_type: 'text_icon'\n        });\n        d.push({\n            title: '<b>悬浮嗅探播放</b>',\n            url: $('#noLoading#').lazyRule((x) => {\n                putMyVar('x5_floatVideo', x);\n                refreshPage(false);\n                return 'hiker://empty';\n            }, x5_floatVideo ? '0' : '1'),\n            img: 'https://hikerfans.com/tubiao/messy/' + (x5_floatVideo ? 55 : 63) + '.svg',\n            col_type: 'text_icon'\n        });\n        d.push({\n            title: '<b>音视频自动播放</b>',\n            url: $('#noLoading#').lazyRule((x) => {\n                putMyVar('x5_autoPlay', x);\n                refreshPage(false);\n                return 'hiker://empty';\n            }, x5_autoPlay ? '0' : '1'),\n            img: 'https://hikerfans.com/tubiao/messy/' + (x5_autoPlay ? 55 : 63) + '.svg',\n            col_type: 'text_icon'\n        });\n        d.push({\n            col_type: 'line_blank'\n        });\n        d.push({\n            title: Strong('x5扩展'),\n            desc: '选填',\n            url: 'hiker://empty',\n            col_type: 'avatar',\n            img: 'hiker://images/home_icon_edit'\n        });\n        d.push({\n            title: '<b>首页不显示搜索框</b>',\n            url: $('#noLoading#').lazyRule((x) => {\n                putMyVar('x5_desc', x);\n                refreshPage(false);\n                return 'hiker://empty';\n            }, x5_desc ? '0' : '1'),\n            img: 'https://hikerfans.com/tubiao/messy/' + (x5_desc ? 55 : 63) + '.svg',\n            col_type: 'text_icon'\n        });\n        input_push(\"url，发现链接和x5链接冲突时填写\", \"x5_url\", \"\", {}, 1);\n        input_push(\"home_js，不显示搜索框时执行。\\n继承数组d，内容只有规则分类。\\n在此基础上自定义首页吧。\", \"x5_home\", \"\");\n        break;\n}\nd.push({\n    col_type: 'line_blank'\n});\nd.push({\n    title: Rich(Strong(Color('保存并退出'))),\n    desc: '上次编辑：' + $.dateFormat(time, 'yyyy-MM-dd hh:mm:ss'),\n    url: $('#noLoading#').lazyRule(() => {\n        return $.require(\"tool?rule=uckk云\").setEdit();\n    }),\n    col_type: 'text_center_1',\n    extra: {\n        lineVisible: false\n    }\n});\nsetResult(d);"},{"col_type":"movie_3","name":"❷规则文件","path":"configs","rule":"const rulePath = \"hiker://files/rules/Thomas/uckkRules.json\";\nlet rules;\n\nfunction getJson() {\n    if (Array.isArray(rules)) {\n        return rules;\n    }\n    try {\n        rules = JSON.parse(readFile(rulePath) || \"[]\");\n    } catch (e) {\n        rules = [];\n    }\n    if (rules.length == 0) deleteFile(rulePath);\n    return rules;\n}\n\nfunction saveJson(json) {\n    saveFile(rulePath, JSON.stringify(json));\n}\n\nfunction getJson_1(Key, Value, Type) {\n    return getJson().filter(f => f[Key] == Value && Type);\n}\n\nfunction getJson_2(M, Key) {\n    if (Key)\n        return saveJson(getJson().map(f => {\n            if (md5(f.group + f.title) == M) {\n                f[Key] = f[Key] == \"1\" ? \"0\" : \"1\";\n            }\n            return f;\n        }));\n    else\n        return getJson().filter(v => md5(v.group + v.title) != M);\n}\n\nfunction getGroupJson(Rules, Key, Value1, Value2) {\n    return (Rules || getJson()).filter(f => f[Key] == Value1 || f[Key] == Value2 || Value1 == Value2);\n}\n\nfunction getGroupNames(Rules, Key) {\n    return Array.from(new Set((Rules || getJson()).map(f => f[Key]))).filter(v => v);\n}\n\nif (!fileExist(rulePath)) {\n    rules = [{\n        group: \"综合\",\n        search_enabled: \"1\",\n        explore_enabled: \"1\",\n\n        title: \"聚搜\",\n        author: \"Thomas喲\",\n        icon: \"hiker://images/search\",\n        preRule: \"\",\n\n        search_url: \"fypage\",\n        search_group: \"全全\",\n        searchFind: \"1\",\n\n        explore_X5: \"0\",\n        url: \"hiker://empty\",\n        find_rule: `d.push({\n    title: '<b>历史搜索</b>'.fontcolor(\"#ff6601\"),\n    pic_url: \"hiker://images/icon_find\",\n    col_type: \"avatar\",\n    url: $(\"确定清除全部搜索记录？\").confirm((id) => {\n        clearItem(\"searchHistory\");\n        deleteItemByCls(id + \":key\");\n        addItemAfter(id + \":searchHistory\", {\n            col_type: \"text_center_1\",\n            url: \"hiker://empty\",\n            title: \"““””\" + \"~~~什么都没有哦~~~\".fontcolor(\"Gray\"),\n            extra: {\n                cls: id + \":key\",\n                lineVisible: false\n            }\n        });\n    }, id),\n    extra: {\n        id: id + \":searchHistory\",\n    }\n});\nif (history.length === 0) d.push({\n    col_type: \"text_center_1\",\n    url: \"hiker://empty\",\n    title: \"““””\" + \"~~~什么都没有哦~~~\".fontcolor(\"Gray\"),\n    extra: {\n        cls: id + \":key\",\n        lineVisible: false\n    }\n});\nelse history.map((key, i) => {\n    d.push({\n        title: key,\n        url: $(\"#noLoading#\").lazyRule((id, key) => {\n            let extra = findItem(id + \":search\").extra;\n            extra.defaultValue = key;\n            updateItem({\n                extra: extra\n            });\n            return \"hiker://empty\";\n        }, id, key),\n        col_type: \"flex_button\",\n        extra: {\n            id: id + \":key:\" + key,\n            cls: id + \":key\",\n            longClick: [{\n                title: \"删除关键词:\" + key,\n                js: $.toString((id, key) => {\n                    let history = storage0.getItem(\"searchHistory\", []);\n                    let ii = history.indexOf(key);\n                    history.splice(ii, 1);\n                    storage0.setItem(\"searchHistory\", history);\n                    deleteItem(id + \":key:\" + key);\n                    if (history.length === 0) addItemAfter(id + \":searchHistory\", {\n                        col_type: \"text_center_1\",\n                        url: \"hiker://empty\",\n                        title: \"““””\" + \"~~~什么都没有哦~~~\".fontcolor(\"Gray\"),\n                        extra: {\n                            cls: id + \":key\",\n                            lineVisible: false\n                        }\n                    });\n                }, id, key)\n            }]\n        }\n    });\n});`,\n\n        class_name: \"\",\n        class_url: \"\",\n        area_name: \"\",\n        area_url: \"\",\n        year_name: \"\",\n        year_url: \"\",\n        sort_name: \"\",\n        sort_url: \"\",\n        time: 0\n    }];\n    saveJson(rules);\n}\n$.exports = {\n    getJson,\n    saveJson,\n    getJson_1,\n    getJson_2,\n    rulePath,\n    getGroupNames,\n    getGroupJson\n};"},{"col_type":"movie_3","name":"❾跳转二级","path":"ruleHome","rule":"js:\neval(JSON.parse(fetch('hiker://page/lib?rule=uckk云', {})).rule);\nlet ruleGroup = getParam('ruleGroup', '综合');\nlet ruleName = getParam('ruleName', '');\nlet baseUrl = decodeURIComponent(getParam('baseUrl'));\nlet rules = $.require(\"configs?rule=uckk云\").getGroupJson(false, \"group\", ruleGroup, \"综合\");\nlet rule = _ = rules.find(f => f.title == ruleName);\nif (rule != -1) {\n    if (MY_PARAMS.home) { // 从首页跳转的\n        d = [];\n        baseUrl = getRuleBaseUrl(rule.url);\n        if (_PAGE) {\n            getRuleGroup(0, rule.search != \"\" && rule.searchFind != \"\");\n        }\n        eval(rule.preRule);\n        if (_SOU && (_PAGE || rule.search_url.includes(\"fypage\"))) {\n            setHistoryKeyword();\n            baseUrl = getRuleBaseUrl(rule.search_url, keyword);\n            let dd = d;\n            searchfind = new Function(\"rule\", \"baseUrl\", \"keyword\", \"page\", rule.searchFind);\n            list = searchfind(rule, baseUrl, keyword, page);\n            d = dd.concat(list);\n        } else if (!_SOU && (_PAGE || rule.url.includes(\"fypage\"))) {\n            eval(rule.find_rule);\n        }\n        _PAGE ? setPreResult(d) : setResult(d);\n        deleteItemByCls('loading_gif');\n    } else { // 从x5跳转的\n        eval(rule.preRule);\n        eval(rule.x5_pageHome);\n    }\n} else {\n    setResult([{\n        title: Color('<h1 style=\"text-align:center;\">图书馆Pro</h1>', '#FEBD6F').big(),\n        url: \"hiker://empty\",\n        col_type: \"rich_text\"\n    }]);\n}"}],"title":"uckk云","author":"Thomas喲&LoyDgIk","version":20240222,"type":"all","url":"hiker://empty?page=fypage","col_type":"movie_3","class_name":"","class_url":"","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:$.require('home?rule=uckk云');","searchFind":"js:\nsetResult([{\n    title: \"搜索 => \" + MY_KEYWORD,\n    desc: '通过\"高级搜索\"页面搜索',\n    url: $('#noLoading#').lazyRule((keyword) => {\n        keyword = String(keyword).trim();\n        if (keyword.match(/quark.*\\/s\\/.+/)) {\n            u1 = \"quarkList\";\n            u2 = \"realurl=\" + encodeURIComponent(keyword);\n        } else {\n            putMyVar('keyword', keyword);\n            putMyVar('keyword2', keyword);\n            u1 = \"home\";\n            u2 = \"page=fypage\";\n        }\n        return \"hiker://page/\" + u1 + \"#noHistory##noRecordHistory#?rule=uckk云&\" + u2;\n    }, MY_KEYWORD),\n    extra: {\n        pageTitle: \"搜索资源\"\n    }\n}]);","search_url":"hiker://empty?keyword=**","group":"①推荐","detail_col_type":"movie_1","detail_find_rule":"","sdetail_col_type":"movie_1","sdetail_find_rule":"","ua":"mobile","preRule":"","pages":"[{\"col_type\":\"movie_3\",\"name\":\"Ⓛ列表API\",\"path\":\"QuarkShareApi\",\"rule\":\"js:\\n//@author LoyDgIk\\nlet httpRequest = $.require(\\\"httpRequest\\\");\\nconst baseUrl = \\\"https://pan.quark.cn\\\";\\n\\nfunction QuarkShareApi(shareId, sharePwd) {\\n    this.shareId = shareId;\\n    this.sharePwd = sharePwd;\\n    this.refreshCallBack = (() => void 0);\\n    //this.shareToken = shareToken || this.getShareToken();\\n}\\nObject.assign(QuarkShareApi.prototype, {\\n    setRefresh(refreshCallBack) {\\n        this.refreshCallBack = refreshCallBack;\\n        return this;\\n    },\\n    setToken(shareToken) {\\n        this.shareToken = shareToken;\\n        return this;\\n    },\\n    requestHttp(api) {\\n        return new httpRequest(baseUrl+api).success((body) => {\\n            if (body.status !== 200) {\\n                throw new Error(body.message);\\n            }\\n            return body;\\n        });\\n    },\\n    getToken() {\\n        return this.shareToken || this.getShareToken();\\n    },\\n\\n    getShareToken() {\\n        let result = this.requestHttp(\\\"/1/clouddrive/share/sharepage/token\\\").body({\\n            \\\"pwd_id\\\": this.shareId,\\n            \\\"passcode\\\": this.sharePwd,\\n        }).bodyToString(true).setStartRequestFunc(post).start(true);\\n        this.shareToken = result.data.stoken;\\n        this.refreshCallBack(result.data.stoken, this);\\n        return this.shareToken;\\n    },\\n    getListFile(fileId, page, orderBy) {\\n        let result = this.requestHttp(\\\"/1/clouddrive/share/sharepage/detail?pr=ucpro&fr=pc\\\").buildUrl({\\n            pwd_id: this.shareId || \\\"\\\",\\n            stoken: encodeURIComponent(this.getToken() || \\\"\\\"),\\n            pdir_fid: fileId || \\\"\\\",\\n            force: 0,\\n            _page: page,\\n            _size: 50,\\n            _fetch_banner: 1,\\n            _fetch_share: 1,\\n            _fetch_total: 1,\\n            _sort: \\\"file_type:asc,\\\" + orderBy\\n        }).errorWithRetry((err, res, http) => {\\n            if (JSON.parse(res.body).message.includes('stoken')) {\\n                http.mergeHeadAndBody({\\n                    buildUrl: {\\n                        stoken: encodeURIComponent(this.getShareToken()||\\\"\\\")\\n                    }\\n                });\\n                return true;\\n            }\\n        }).start(true);\\n        return result;\\n    }\\n});\\n$.exports = QuarkShareApi;\"},{\"col_type\":\"movie_3\",\"name\":\"Ⓛ请求函数\",\"path\":\"httpRequest\",\"rule\":\"function httpRequest(url, options) {\\n    this.retryCount = 0;\\n    this.url = url;\\n    this.options = Object.assign({}, options, {\\n        withHeaders: true\\n    });\\n    this.errorCallback = (err, res) => {throw err};\\n    this.errorCallbackWithRetry = (err, res, tryRestart) => false;\\n    this.successCallback = (body, statusCode, headers) => body;\\n    this.errorTypeCallback = (err, res) => err;\\n    this.startRequest = fetch;\\n    this._bodyToString = false;\\n    this.buildParam = void(0);\\n}\\n\\nObject.assign(httpRequest.prototype, {\\n    bodyToString(flag) {\\n        this._bodyToString = !!flag;\\n        return this;\\n    },\\n    body(body) {\\n        this.options.body = body || void 0;\\n        return this;\\n    },\\n    buildUrl(buildParam) {\\n        this.buildParam = buildParam || {};\\n        return this;\\n    },\\n    setStartRequestFunc(func) {\\n        this.startRequest = func;\\n        return this;\\n    },\\n    headers(headers) {\\n        this.options.headers = headers || void 0;\\n        return this;\\n    },\\n    success(successCallback) {\\n        if (typeof successCallback !== \\\"function\\\") return this;\\n        this.successCallback = successCallback;\\n        return this;\\n    },\\n    error(errorCallback) {\\n        if (typeof errorCallback !== \\\"function\\\") return this;\\n        this.errorCallback = errorCallback;\\n        return this;\\n    },\\n    errorType(errorTypeCallback) {\\n        if (typeof errorTypeCallback !== \\\"function\\\") return this;\\n        this.errorTypeCallback = errorTypeCallback;\\n        return this;\\n    },\\n    errorWithRetry(retryCount, errorCallbackWithRetry) {\\n        if (typeof retryCount === \\\"function\\\" && typeof errorCallbackWithRetry === \\\"undefined\\\") {\\n            errorCallbackWithRetry = retryCount;\\n            retryCount = 1;\\n        }\\n        if (typeof errorCallbackWithRetry !== \\\"function\\\") {\\n            return this;\\n        }\\n        this.retryCount = Number(retryCount);\\n        this.errorCallbackWithRetry = errorCallbackWithRetry;\\n        return this;\\n    },\\n    start(toJson) {\\n        let options = Object.assign({}, this.options);\\n        if (typeof options.body === \\\"object\\\" && this._bodyToString) {\\n            options.body = JSON.stringify(options.body);\\n        }\\n        var res = JSON.parse(this.startRequest(this.buildParam?buildUrl(this.url, this.buildParam):this.url, options));\\n        try {\\n            if (res.statusCode >= 200 && res.statusCode <= 300) {\\n                let body = res.body;\\n                if (toJson) {\\n                    body = JSON.parse(body);\\n                }\\n                return this.successCallback(body, res);\\n            } else {\\n                throw new Error(String(res.statusCode));\\n            }\\n        } catch (err) {\\n            try {\\n                err = this.errorTypeCallback(err, res);\\n            } catch (e) {\\n\\n            }\\n            if (this.retryCount) {\\n                let tryResult = this.errorCallbackWithRetry(err, res, this);\\n                if (tryResult) {\\n                    this.retryCount--;\\n                    return this.start(toJson);\\n                } else {\\n                    this.retryCount = 0;\\n                    return this.errorCallback(err, res);\\n                }\\n            } else {\\n                return this.errorCallback(err, res);\\n            }\\n        }\\n    },\\n    setOptions(options) {\\n        this.options = Object.assign({}, options, {\\n            withHeaders: true\\n        });\\n        return this;\\n    },\\n    mergeHeadAndBody(options) {\\n        options = options || {};\\n        Object.assign(this.options.headers||{}, options.headers);\\n        if (typeof this.options.body === \\\"object\\\" && typeof options.body === \\\"object\\\") {\\n            Object.assign(this.options.body||{}, options.body);\\n        }\\n        if (typeof options.buildUrl === \\\"object\\\") {\\n            Object.assign(this.buildParam||{}, options.buildUrl);\\n        }\\n        return this;\\n    }\\n});\\n\\nObject.assign(httpRequest, {\\n    fetch(url, options) {\\n        return new httpRequest(url, options);\\n    },\\n    post(url, options) {\\n        return new httpRequest(url, options).setStartRequestFunc(post);\\n    },\\n    request(url, options) {\\n        return new httpRequest(url, options).setStartRequestFunc(request);\\n    },\\n    postRequest(url, options) {\\n        return new httpRequest(url, options).setStartRequestFunc(postRequest);\\n    },\\n    fetchCookie(url, options) {\\n        return new httpRequest(url, options).setStartRequestFunc(fetchCookie);\\n    }\\n});\\n$.exports = httpRequest;\"},{\"col_type\":\"movie_3\",\"name\":\"Ⓛ列表页面\",\"path\":\"quarkList\",\"rule\":\"js:\\nlet d = [];\\n\\naddListener(\\\"onClose\\\", () => clearMyVar(\\\"playUrlCache\\\"));\\naddListener(\\\"onRefresh\\\", () => clearMyVar(\\\"playUrlCache\\\"));\\n\\nlet realurl = decodeURIComponent(getParam(\\\"realurl\\\", \\\"\\\")); // .split(\\\"?\\\")[0];\\n// let urlData = realurl.split(\\\"/\\\");\\n\\n\\n\\nlet shareId = MY_PARAMS.shareId || realurl.match(/pan\\\\.quark\\\\.cn(%2F|\\\\/)s\\\\1([a-zA-Z0-9]+)/)[2];\\nlet sharePwd = getParam(\\\"sharePwd\\\", MY_PARAMS.sharePwd || \\\"\\\");\\nlet shareToken = getParam(\\\"shareToken\\\", MY_PARAMS.shareToken || \\\"\\\");\\n\\nlet fileId = MY_PARAMS.fileId;\\n\\nlet sort = {\\n    \\\"名称正序\\\": \\\"file_name:asc\\\",\\n    \\\"名称倒序\\\": \\\"file_name:desc\\\",\\n    \\\"时间正序\\\": \\\"updated_at:asc\\\",\\n    \\\"时间倒序\\\": \\\"updated_at:desc\\\"\\n};\\nlet styles = [\\\"text_1\\\", \\\"avatar\\\"];\\n\\nlet sortValue = sort[getItem(\\\"sortKey\\\", \\\"名称正序\\\")];\\nlet style = getItem(\\\"style\\\", styles[0]);\\nif (MY_PAGE == 1) {\\n    d.push({\\n        title: style,\\n        url: $(styles, 1, '请选择').select(() => {\\n            setItem('style', input);\\n            refreshPage();\\n        }),\\n        pic_url: \\\"https://hikerfans.com/img/ali_icon.svg\\\",\\n        col_type: \\\"icon_small_4\\\"\\n    });\\n    d.push({\\n        title: getItem(\\\"sortKey\\\", \\\"名称正序\\\"),\\n        url: $(Object.keys(sort), 1, '请选择').select(() => {\\n            setItem(\\\"sortKey\\\", input)\\n            refreshPage();\\n        }),\\n        pic_url: \\\"https://hikerfans.com/img/ali_sort.svg\\\",\\n        col_type: \\\"icon_small_4\\\"\\n    });\\n    d.push({\\n        title: getItem(\\\"quark_playMode\\\", \\\"转码\\\"),\\n        url: $([\\\"转码\\\", \\\"原画\\\"], 2, \\\"播放模式\\\").select(() => {\\n            setItem(\\\"quark_playMode\\\", input);\\n            refreshPage();\\n            return \\\"toast://切换成功\\\";\\n        }),\\n        col_type: \\\"icon_small_4\\\",\\n        pic_url: \\\"https://hikerfans.com/img/ali_play.svg\\\",\\n    });\\n    d.push({\\n        title: \\\"功能\\\",\\n        url: $([\\\"跳转夸克APP\\\", \\\"登录\\\", \\\"原画下载线程\\\"]).select((shareId) => {\\n            if (input === \\\"跳转夸克APP\\\") {\\n                return \\\"qklink://www.uc.cn/b20b84fd735a8dd3f7541129bacc4e9a?action=open_url&url=https://pan.quark.cn/s/\\\" + shareId;\\n            } else if (input === \\\"登录\\\") {\\n                return $([\\\"输入Cookie\\\", \\\"网页登录\\\"]).select(() => {\\n                    if (input === \\\"网页登录\\\") {\\n                        return \\\"hiker://page/login\\\";\\n                    } else {\\n                        return $(\\\"\\\", \\\"请输入Cookie\\\").input(() => {\\n                            if ($.require(\\\"tool\\\").isLoginCookie(input)) {\\n                                setItem(\\\"quarkCookie\\\", input.replace(/\\\\s/g, \\\"\\\"));\\n                                return \\\"toast://设置成功\\\";\\n                            } else {\\n                                return \\\"toast://Cookie格式错误\\\";\\n                            }\\n                        });\\n                    }\\n                })\\n            } else if (input === \\\"原画下载线程\\\") {\\n                return $(getItem(\\\"speedThread\\\", \\\"10\\\"), \\\"请输入3-32之间的整数\\\").input(() => {\\n                    let speedThread = parseInt(input);\\n                    if (speedThread < 3 || speedThread > 32) {\\n                        return \\\"toast://设置不合法\\\";\\n                    }\\n                    setItem(\\\"speedThread\\\", String(speedThread));\\n                    return \\\"toast://设置成功\\\";\\n                });\\n            }\\n        }, shareId),\\n        col_type: \\\"icon_small_4\\\",\\n        pic_url: \\\"https://hikerfans.com/img/ali_fileinto.svg\\\",\\n    });\\n    d.push({\\n        col_type: 'line_blank'\\n    });\\n}\\n\\n\\nlet QuarkShareApi = $.require(\\\"QuarkShareApi\\\");\\nlet quarkShareApi = new QuarkShareApi(shareId, sharePwd).setToken(shareToken).setRefresh((shareToken) => {\\n    MY_PARAMS.shareToken = shareToken;\\n    setPageParams(MY_PARAMS);\\n});\\n\\nfunction formatSize(size) {\\n    if (!size) {\\n        return '';\\n    }\\n    const units = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\\n    let i = 0;\\n    while (size >= 1024) {\\n        size /= 1024;\\n        i++;\\n    }\\n    size = i ? Number(size.toFixed(2)) : size;\\n    return `${size} ${units[i]}`;\\n}\\n\\nlet subExts = [\\\"vtt\\\", \\\"srt\\\", \\\"ass\\\"];\\nlet titleHead = {\\n    video: \\\"🎬\\\",\\n    audio: \\\"🎵\\\",\\n    doc: \\\"📑\\\",\\n    image: \\\"🖼\\\",\\n    archive: \\\"📦\\\",\\n    \\\"default\\\": \\\"❓\\\"\\n};\\n\\nfunction getHead(type, ext) {\\n    let head = titleHead[type];\\n    /*if (subExts.includes(ext)) {\\n        head = \\\"🕸\\\";\\n    }*/\\n    return head || \\\"❓\\\";\\n}\\ntry {\\n    var res = quarkShareApi.getListFile(fileId, MY_PAGE, sortValue);\\n    //设置标题\\n    setPageTitle(res.data.share.title);\\n    var list = res.data.list||[];\\n    if(list.length===0&&!fileId){\\n        res = quarkShareApi.getListFile(res.data.share.first_fid, MY_PAGE, sortValue);\\n        setPageTitle(res.data.share.title);\\n        var list = res.data.list||[];\\n    }\\n    list.forEach(item => {\\n        //判断是否文件夹\\n        if (item.dir) {\\n            d.push({\\n                title: \\\"📂\\\" + item.file_name,\\n                desc: $.dateFormat(item.updated_at, 'yyyy-MM-dd') + '  ' + item.include_items + '项  ',\\n                pic_url: \\\"https://hikerfans.com/tubiao/messy/27.svg\\\",\\n                url: \\\"hiker://page/quarkList?page=fypage\\\",\\n                col_type: style,\\n                extra: {\\n                    shareId,\\n                    sharePwd,\\n                    shareToken: quarkShareApi.getToken(),\\n                    fileId: item.fid,\\n                    inheritTitle: false\\n                }\\n            });\\n        } else {\\n            d.push({\\n                title: getHead(item.obj_category) + item.file_name,\\n                desc: $.dateFormat(item.updated_at, 'yyyy-MM-dd') + '  ' + formatSize(item.size),\\n                pic_url: item.thumbnail,\\n                url: $().lazyRule((fid, fid_token, pwd_id, stoken, category) => {\\n                    let playUrlCache = storage0.getMyVar(\\\"playUrlCache\\\", {});\\n                    if (playUrlCache[fid]) {\\n                        return playUrlCache[fid];\\n                    } else {\\n                        let url = $.require(\\\"play\\\").getPlayUrl(fid, fid_token, pwd_id, stoken, category);\\n                        playUrlCache[fid] = url;\\n                        storage0.putMyVar(\\\"playUrlCache\\\", playUrlCache);\\n                        return url;\\n                    }\\n                }, item.fid, item.share_fid_token, shareId, quarkShareApi.getToken(), item.obj_category),\\n                col_type: style,\\n                extra: {\\n                    id: item.fid,\\n                    inheritTitle: false,\\n                    cls: 'playlist ' + item.obj_category\\n                }\\n            })\\n        }\\n        d.push({\\n            col_type: 'line'\\n        });\\n    });\\n} catch (e) {\\n    d.push({\\n        title: e.message,\\n        url: 'hiker://empty',\\n        col_type: 'text_center_1',\\n        extra: {\\n            lineVisible: false\\n        }\\n    });\\n    if (e.message.includes(\\\"提取码\\\")) {\\n        d.push({\\n            title: \\\"输入提取码\\\",\\n            url: $().input((MY_PARAMS) => {\\n                setPageParams(Object.assign({}, MY_PARAMS, {\\n                    sharePwd: input\\n                }));\\n                refreshPage();\\n            }, MY_PARAMS),\\n            col_type: \\\"text_center_1\\\"\\n        });\\n    }\\n}\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"Ⓛ获取链接\",\"path\":\"play\",\"rule\":\"js:\\nconst cookie = getItem(\\\"quarkCookie\\\", \\\"\\\");\\nlet httpRequest = $.require(\\\"httpRequest\\\");\\n\\nfunction CookieManage(cookie) {\\n    this.cookie = {};\\n    this.add(cookie);\\n}\\nObject.assign(CookieManage.prototype, {\\n    add(cookie) {\\n        let cookies = [];\\n        if (typeof cookie === \\\"string\\\") {\\n            cookies = cookie.split(\\\";\\\");\\n        } else if (Array.isArray(cookie)) {\\n            cookies = cookie;\\n        }\\n        cookies.forEach(v => {\\n            v = v.split(\\\"=\\\");\\n            if (v.length < 2) return;\\n            this.cookie[v[0].trim()] = v[1].trim();\\n        });\\n    },\\n    get() {\\n        return Object.entries(this.cookie).map(v => v[0] + \\\"=\\\" + v[1]).join(\\\";\\\");\\n    }\\n});\\nconst cookieManage = new CookieManage(cookie);\\n\\nfunction waitSleep(time) {\\n    java.lang.Thread.sleep(time || 600);\\n}\\n\\nfunction requestHttp(url) {\\n    return new httpRequest(url)\\n        .success((body, res) => {\\n            if (body.status !== 200) {\\n                throw new Error(body.message);\\n            }\\n            cookieManage.add(res.headers[\\\"set-cookie\\\"]);\\n            return body;\\n        })\\n        .errorType((err, res) => {\\n            return new Error(JSON.parse(res.body).message);\\n        })\\n        .bodyToString(true)\\n        .headers({\\n            cookie: cookieManage.get(),\\n            \\\"User-Agent\\\": \\\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) quark-cloud-drive/2.5.20 Chrome/100.0.4896.160 Electron/18.3.5.4-b478491100 Safari/537.36 Channel/pckk_other_ch\\\",\\n            \\\"referer\\\": \\\"https://drive.quark.cn/\\\"\\n        });\\n}\\n\\nfunction getDriveInfo() {\\n    return requestHttp(\\\"https://drive.quark.cn/1/clouddrive/share/sharepage/dir?pr=ucpro&fr=pc&aver=1\\\").start(true);\\n}\\n\\nfunction createSaveTask(fid, fid_token, pwd_id, stoken) {\\n    let driveInfo = getDriveInfo();\\n    return requestHttp(\\\"https://drive.quark.cn/1/clouddrive/share/sharepage/save?pr=ucpro&fr=pc\\\").setStartRequestFunc(post).body({\\n        \\\"fid_list\\\": [\\n            fid\\n        ],\\n        \\\"fid_token_list\\\": [\\n            fid_token\\n        ],\\n        \\\"to_pdir_fid\\\": driveInfo.data.dir.fid,\\n        \\\"pwd_id\\\": pwd_id,\\n        \\\"stoken\\\": stoken,\\n        \\\"pdir_fid\\\": driveInfo.data.dir.pdir_fid\\n    }).start(true);\\n}\\n\\nfunction createDeleteTask(fid) {\\n    let driveInfo = getDriveInfo();\\n    return requestHttp(\\\"https://drive.quark.cn/1/clouddrive/file/delete?pr=ucpro&fr=pc\\\").setStartRequestFunc(post).body({\\n        \\\"action_type\\\": 2,\\n        \\\"filelist\\\": [\\n            fid\\n        ],\\n        \\\"exclude_fids\\\": []\\n    }).start(true);\\n}\\n\\nfunction task(task_id, retry_index) {\\n    return requestHttp(\\\"https://drive.quark.cn/1/clouddrive/task\\\").buildUrl({\\n        pr: \\\"ucpro\\\",\\n        fr: \\\"pc\\\",\\n        task_id: task_id,\\n        retry_index: retry_index\\n    }).start(true);\\n}\\n\\nfunction queryTask(task_id) {\\n    for (let i = 0; i < 6; i++) {\\n        try {\\n            let res = task(task_id, i + \\\"\\\");\\n            if (res.data.status === 2) {\\n                waitSleep(1000);\\n                return res.data.save_as.save_as_top_fids[0];\\n            }\\n            waitSleep(300);\\n        } catch (e) {}\\n    }\\n    return void(0);\\n}\\n\\nfunction queryTaskStatus(task_id) {\\n    for (let i = 0; i < 6; i++) {\\n        try {\\n            let res = task(task_id, i + \\\"\\\");\\n            if (res.data.status === 2) {\\n                waitSleep(1000);\\n                return true;\\n            }\\n            waitSleep(300);\\n        } catch (e) {}\\n    }\\n    return false;\\n}\\n\\nfunction getPreviewVideo(fid) {\\n    return requestHttp(\\\"https://drive.quark.cn/1/clouddrive/file/v2/play?pr=ucpro&fr=pc\\\").body({\\n        \\\"fid\\\": fid,\\n        \\\"resolutions\\\": \\\"normal,low,high,super,2k,4k\\\",\\n        \\\"supports\\\": \\\"fmp4,m3u8\\\"\\n    }).setStartRequestFunc(post).start(true);\\n}\\n\\nfunction getDownloadUrl(fid) {\\n    return requestHttp(\\\"https://drive.quark.cn/1/clouddrive/file/download?pr=ucpro&fr=pc\\\").body({\\n        \\\"fids\\\": [fid]\\n    }).setStartRequestFunc(post).start(true);\\n}\\n\\nfunction getPlayUrl(fid, fid_token, pwd_id, stoken, category) {\\n    try {\\n        if (!cookie) return \\\"toast://请登录账号\\\";\\n        let taskId = createSaveTask(fid, fid_token, pwd_id, stoken).data.task_id;\\n        let asfid = queryTask(taskId);\\n        if (!asfid) {\\n            return \\\"toast://获取失败\\\";\\n        }\\n        let playCookie = cookieManage.get();\\n        let playHeader = {\\n            Referer: \\\"http://pan.quark.cn/\\\",\\n            cookie: playCookie,\\n            \\\"User-Agent\\\": \\\"com.stub.StubApp/1.3.0 (Linux;Android 14) AndroidXMedia3/1.1.1\\\"\\n        };\\n        if (category == \\\"video\\\") {\\n            let playMode = getItem(\\\"quark_playMode\\\", \\\"转码\\\");\\n            if (playMode === \\\"转码\\\") {\\n                let videoRes = getPreviewVideo(asfid);\\n                let videoList = videoRes.data.video_list;\\n                let playList = {\\n                    names: [],\\n                    urls: [],\\n                    headers: []\\n                };\\n                videoList.filter(v => v.accessable).forEach(v => {\\n                    playList.names.push(v.resolution);\\n                    playList.urls.push(v.video_info.url + \\\"#isVideo=true#\\\");\\n                    playList.headers.push(playHeader);\\n                });\\n                createDeleteTask(asfid);\\n                return JSON.stringify(playList);\\n            } else {\\n                let playUrl = getDownloadUrl(asfid).data[0].download_url;\\n                let playList = {\\n                    names: [\\\"原画\\\"],\\n                    urls: [playUrl + \\\"#isVideo=true##fastPlayMode##threads=\\\" + getItem(\\\"speedThread\\\", \\\"10\\\") + \\\"#\\\"],\\n                    headers: [playHeader]\\n                }\\n                createDeleteTask(asfid);\\n                return JSON.stringify(playList);\\n            }\\n        } else { // 不是视频资源\\n            let playInfo = getDownloadUrl(asfid).data[0];\\n            let playUrl = playInfo.download_url;\\n\\n            // 音频资源\\n            if (playInfo.format_type.includes('audio') || playInfo.file_name.match(/\\\\.(aac|ac3|aiff|amr|m4a|mp2|mp3|ogg|ra|au|wav|wma|mka|flac|wav)/)) {\\n                let playList = {\\n                    names: [\\\"音频\\\"],\\n                    urls: [playUrl + \\\"#isVideo=true#\\\"],\\n                    headers: [playHeader],\\n                    lyric: \\\"\\\"\\n                }\\n                createDeleteTask(asfid);\\n                return JSON.stringify(playList);\\n            }\\n\\n            // 漏网之鱼\\n            if (playInfo.format_type.includes('video') || playInfo.file_name.match(/\\\\.(avi|wmv|mpeg|mp4|m4v|mov|asf|flv|f4v|rmvb|rm|3gp|vob|mkv)/)) {\\n                let playList = {\\n                    names: [\\\"原画\\\"],\\n                    urls: [playUrl + \\\"#isVideo=true##fastPlayMode##threads=\\\" + getItem(\\\"speedThread\\\", \\\"10\\\") + \\\"#\\\"],\\n                    headers: [playHeader]\\n                }\\n                createDeleteTask(asfid);\\n                return JSON.stringify(playList);\\n            }\\n\\n            // 显示图片\\n            if (playInfo.format_type.includes('image') || playInfo.file_name.match(/\\\\.(jpg|gif|jpeg|png|bmp|svg|ico|tiff)/)) {\\n                return playUrl + \\\"@headers=\\\" + JSON.stringify(playHeader);\\n            }\\n\\n            // 下载资源\\n            playHeader = Object.keys(playHeader).map(Key => Key + \\\"@\\\" + String(playHeader[Key]).replace(/;/g, \\\"；；\\\"));\\n            return 'download://' + playUrl + ';{' + playHeader.join(\\\"&&\\\") + '}';\\n        }\\n    } catch (e) {\\n        if (e.message.includes(\\\"require login\\\")) {\\n            toast(\\\"未登录或登录过期，请重新登录\\\");\\n            return \\\"hiker://page/login\\\";\\n        }\\n        return \\\"toast://\\\" + e.toString();\\n    }\\n}\\n\\n$.exports = {\\n    getPlayUrl\\n};\"},{\"col_type\":\"movie_3\",\"name\":\"Ⓛ登录账号\",\"path\":\"login\",\"rule\":\"js:\\nlet d = [];\\naddListener(\\\"onClose\\\", () => {\\n    let cookie = getVar(\\\"quarkCookie\\\", \\\"\\\");\\n    if (cookie) {\\n        setItem(\\\"quarkCookie\\\", cookie);\\n        toast(\\\"Cookie获取成功\\\");\\n        refreshPage();\\n    }\\n    clearVar(\\\"quarkCookie\\\");\\n});\\nd.push({\\n    col_type: \\\"x5_webview_single\\\",\\n    url: \\\"https://pan.quark.cn/\\\",\\n    desc: \\\"float&&100%\\\",\\n    extra: {\\n        js: $.toString((ApiRootUrl) => {\\n            let timeInter = setInterval(() => {\\n                let Cookie = fba.getCookie(ApiRootUrl);\\n                if (Cookie.includes(\\\"_UP_F7E_8D_=\\\") && Cookie.includes(\\\"__uid=\\\")&&Cookie.includes(\\\"__puus=\\\")) {\\n                    fba.putVar(\\\"quarkCookie\\\", Cookie)\\n                    clearInterval(timeInter);\\n                    fba.log(Cookie);\\n                    fba.back(false);\\n                }\\n            }, 600);\\n        }, \\\"https://pan.quark.cn\\\"),\\n        ua: PC_UA,\\n        jsLoadingInject: false\\n    }\\n});\\nsetResult(d)\"},{\"col_type\":\"movie_3\",\"name\":\"Ⓛ登录检测\",\"path\":\"tool\",\"rule\":\"js:\\n$.exports = {\\n    isLoginCookie(cookie) {\\n        return !!(cookie && cookie.includes(\\\"_UP_F7E_8D_=\\\") && cookie.includes(\\\"__uid=\\\") && cookie.includes(\\\"__puus=\\\"));\\n    },\\n\\n\\n\\n    setRule(input) {\\n        showLoading('uckk云 解析中...');\\n        try {\\n            // 格式化\\n            [logT, type, text] = String(input).split(\\\"￥\\\");\\n            switch (String(type)) {\\n                case 'Paste':\\n                    text = parsePaste(text);\\n                    break;\\n                case 'Lanzou':\\n                    [url, pwd] = text.split(\\\"##\\\");\\n                    durl = $.require('lanzou?rule=uckk云').one_url(url, pwd, 1);\\n                    text = String(fetch(durl));\\n                    if ((sp = text.split(\\\"￥\\\")).length == 3) {\\n                        text = sp[2].split(\\\"@\\\")[0].trim();\\n                    }\\n                    break;\\n            }\\n            arr1 = JSON.parse(base64Decode(text));\\n\\n\\n            // 合并，去重\\n            arr2 = $.require(\\\"configs?rule=uckk云\\\").getJson();\\n            arr3 = arr2.concat(arr1).filter((obj, index, arr) => {\\n                return arr.findIndex(o => obj.group === o.group && obj.title === o.title && (obj.time > o.time || obj.time == o.time)) === index;\\n            });\\n            $.require(\\\"configs?rule=uckk云\\\").saveJson(arr3);\\n\\n\\n            // 计算余量\\n            x = arr3.length - arr2.length;\\n            f = arr1.length - x\\n            refreshPage();\\n            toast(\\\"导入成功，新增：\\\" + x + \\\" 覆盖：\\\" + f);\\n        } catch (e) {\\n            log(e.toString());\\n            toast(\\\"导入失败\\\");\\n        }\\n        hideLoading();\\n    },\\n\\n\\n\\n    setEdit() {\\n        _ = {\\n            group: getMyVar(\\\"group\\\", \\\"夸克\\\").trim(), // 规则 类别\\n            search_enabled: getMyVar(\\\"search_enabled\\\", \\\"1\\\").trim(), // 启用搜索 #\\n            explore_enabled: getMyVar(\\\"explore_enabled\\\", \\\"0\\\").trim(), // 启用发现 #\\n\\n            title: getMyVar(\\\"title\\\", \\\"\\\").trim(), // 源名称\\n            author: getMyVar(\\\"author\\\", \\\"佚名\\\").trim(), // 源作者\\n            icon: getMyVar(\\\"icon\\\", \\\"\\\").trim(), // 源图标\\n            preRule: getMyVar(\\\"preRule\\\", \\\"\\\").trim(), // js预处理\\n\\n            search_url: getMyVar(\\\"search_url\\\", \\\"\\\").trim(), // 搜索链接\\n            search_group: getMyVar(\\\"search_group\\\", \\\"常用\\\").trim(), // 源分组 #\\n            searchFind: getMyVar(\\\"searchFind\\\", \\\"\\\").trim(), // 搜索规则\\n\\n            explore_X5: getMyVar(\\\"explore_X5\\\", \\\"0\\\").trim(), // 使用x5 #\\n            url: getMyVar(\\\"url\\\", \\\"\\\").trim(), // 发现链接\\n            find_rule: getMyVar(\\\"find_rule\\\", \\\"\\\").trim(), // 发现规则\\n\\n            // 发现链接替换\\n            class_name: getMyVar(\\\"class_name\\\", \\\"\\\").trim(),\\n            class_url: getMyVar(\\\"class_url\\\", \\\"\\\").trim(),\\n            area_name: getMyVar(\\\"area_name\\\", \\\"\\\").trim(),\\n            area_url: getMyVar(\\\"area_url\\\", \\\"\\\").trim(),\\n            year_name: getMyVar(\\\"year_name\\\", \\\"\\\").trim(),\\n            year_url: getMyVar(\\\"year_url\\\", \\\"\\\").trim(),\\n            sort_name: getMyVar(\\\"sort_name\\\", \\\"\\\").trim(),\\n            sort_url: getMyVar(\\\"sort_url\\\", \\\"\\\").trim(),\\n\\n            // x5设置\\n            x5_jsLoadingInject: getMyVar(\\\"x5_jsLoadingInject\\\", \\\"0\\\").trim(),\\n            x5_js: getMyVar(\\\"x5_js\\\", \\\"\\\").trim(),\\n            x5_blockRules: getMyVar(\\\"x5_blockRules\\\", \\\"\\\").trim(),\\n            x5_urlInterceptor: getMyVar(\\\"x5_urlInterceptor\\\", \\\"\\\").trim(),\\n            x5_pageHome: getMyVar(\\\"x5_pageHome\\\", \\\"\\\").trim(),\\n            x5_referer: getMyVar(\\\"x5_referer\\\", \\\"\\\").trim(),\\n            x5_imgLongClick: getMyVar(\\\"x5_imgLongClick\\\", \\\"0\\\").trim(),\\n            x5_showProgress: getMyVar(\\\"x5_showProgress\\\", \\\"0\\\").trim(),\\n            x5_floatVideo: getMyVar(\\\"x5_floatVideo\\\", \\\"0\\\").trim(),\\n            x5_autoPlay: getMyVar(\\\"x5_autoPlay\\\", \\\"0\\\").trim(),\\n            x5_ua: getMyVar(\\\"x5_ua\\\", \\\"\\\").trim(),\\n            x5_url: getMyVar(\\\"x5_url\\\", \\\"\\\").trim(),\\n            x5_desc: getMyVar(\\\"x5_desc\\\", \\\"\\\").trim(),\\n            x5_home: getMyVar(\\\"x5_home\\\", \\\"\\\").trim(),\\n            time: new Date().getTime(), // 保存时间 #\\n        };\\n        if (_.title != \\\"\\\" && _.title != \\\"聚搜\\\" && _.title != \\\"最后面\\\") {\\n            if ((_.search_url != \\\"\\\" && _.searchFind != \\\"\\\") || (_.url != \\\"\\\" && (_.explore_X5 == \\\"1\\\" || _.find_rule != \\\"\\\"))) {\\n                for (t in _) {\\n                    clearMyVar(t);\\n                    if (_[t] == \\\"\\\" || _[t] == \\\"0\\\" || _[t] == \\\"MOBILE_UA\\\") {\\n                        delete _[t];\\n                    }\\n                }\\n                jxlist = $.require(\\\"configs?rule=uckk云\\\").getJson();\\n                uids = jxlist.map(__ => md5(__.group + __.title));\\n                i = uids.indexOf(getMyVar('rule_uid', '-1'));\\n                if (i == -1) {\\n                    jxlist.push(_);\\n                } else {\\n                    jxlist.splice(i, 1, _);\\n                }\\n                clearMyVar('rule_tid');\\n                clearMyVar('rule_uid');\\n                jxlist = jxlist.filter((obj, index, arr) => {\\n                    return arr.findIndex(o => md5(obj.group + obj.title) === md5(o.group + o.title) && (obj.time > o.time || obj.time === o.time)) === index;\\n                });\\n                $.require(\\\"configs?rule=uckk云\\\").saveJson(jxlist);\\n                return back(true), 'toast://保存成功';\\n            } else {\\n                return 'toast://搜索规则/发现规则总得写一个吧';\\n            }\\n        } else if (_.title == \\\"\\\") {\\n            return 'toast://请填写源名称';\\n        } else {\\n            return 'toast://规则名不能是' + _.title;\\n        }\\n    },\\n\\n\\n\\n    getVariables() {\\n        return [\\\"group\\\", \\\"search_enabled\\\", \\\"explore_enabled\\\", \\\"title\\\", \\\"author\\\", \\\"icon\\\", \\\"preRule\\\", \\\"search_url\\\", \\\"search_group\\\", \\\"searchFind\\\", \\\"explore_X5\\\", \\\"url\\\", \\\"find_rule\\\", \\\"class_name\\\", \\\"class_url\\\", \\\"area_name\\\", \\\"area_url\\\", \\\"year_name\\\", \\\"year_url\\\", \\\"sort_name\\\", \\\"sort_url\\\", \\\"x5_jsLoadingInject\\\", \\\"x5_js\\\", \\\"x5_blockRules\\\", \\\"x5_urlInterceptor\\\", \\\"x5_pageHome\\\", \\\"x5_referer\\\", \\\"x5_imgLongClick\\\", \\\"x5_showProgress\\\", \\\"x5_floatVideo\\\", \\\"x5_autoPlay\\\", \\\"x5_ua\\\", \\\"x5_url\\\", \\\"x5_desc\\\", \\\"x5_home\\\", \\\"time\\\", \\\"rule_tid\\\", \\\"rule_uid\\\"];\\n    },\\n\\n\\n\\n    getRulePaste(rules, isJx) {\\n        if (rules.length == 0) return \\\"toast://没有规则\\\";\\n        text = base64Encode(JSON.stringify(rules));\\n        return $(getPastes().concat(\\\"纯文本\\\"), 2, '选择分享格式').select((txt, len, _, isJx) => {\\n            if (input == \\\"纯文本\\\") {\\n                u = txt;\\n                g = \\\"Text\\\";\\n            } else {\\n                u = sharePaste(txt, input);\\n                g = \\\"Paste\\\";\\n            }\\n            if (len === 1) {\\n                t = _.group + \\\"规则「\\\" + _.title + \\\"」\\\";\\n            } else {\\n                t = \\\"共「\\\" + len + \\\"」条规则\\\";\\n            }\\n            if (isJx) clearMyVar('jxlist2');\\n            refreshPage(false);\\n            return \\\"copy://uckk规则口令，打开海阔即可导入\\\\n\\\" + t + \\\"￥\\\" + g + \\\"￥\\\" + u + '@import=js:$.require(\\\"tool?rule=uckk云\\\").setRule(input);';\\n        }, text, rules.length, rules[0], isJx);\\n    },\\n};\"},{\"col_type\":\"movie_3\",\"name\":\"❶通用函数\",\"path\":\"lib\",\"rule\":\"const Color = (test, color) => {\\n    return '<font color=\\\"' + (color || '#FA7298') + '\\\">' + test + '</front>';\\n}\\nconst Strong = (test) => {\\n    return '<strong>' + test + '</strong>';\\n}\\nconst Rich = (test) => {\\n    return \\\"‘‘’’\\\" + String(test)\\n        .replace(/\\\\\\\\n|(<|\\\\s+)br\\\\s*\\\\/?\\\\s*>/gi, '\\\\n')\\n        .replace(/\\\\\\\\r/g, '\\\\r')\\n        .replace(/\\\\\\\\f/g, '\\\\f')\\n        .replace(/\\\\\\\\t/g, '\\\\t')\\n        .replace(/&(lt|gt|nbsp|amp|quot);/gi, ($0, $1) => ({\\n            'lt': '<',\\n            'gt': '>',\\n            'nbsp': ' ',\\n            'amp': '&',\\n            'quot': '\\\"'\\n        }[$1.toLowerCase()]))\\n        .replace(/<\\\\/?(em|span)[^>]*>/gi, '');\\n}\\nconst Size = size => {\\n    if (!size) return '无法计算';\\n    units = ['B', 'KB', 'MB', 'GB'];\\n    i = 0;\\n    while (size > 1023) {\\n        size /= 1024;\\n        i++;\\n    }\\n    size = i ? size.toFixed(2) : size;\\n    return `${size} ${units[i]}`;\\n}\\ntry {\\n    MY_PAGE;\\n} catch (err) {\\n    MY_PAGE = 1;\\n}\\nlet id = \\\"uckk云\\\";\\nlet page = MY_PAGE;\\nlet _PAGE = page == 1;\\nlet icons = {\\n    阿里: \\\"https://gw.alicdn.com/imgextra/i1/O1CN01rAr34V28oR0rupkAi_!!6000000007979-2-tps-240-240.png\\\",\\n    夸克: \\\"hiker://images/icon_kuake\\\",\\n    音频: \\\"hiker://images/icon_music3\\\",\\n    磁力: \\\"https://android-artworks.25pp.com/fs08/2023/08/23/10/110_e1533a024c7efec175bc5110e96736ac_con_130x130.png\\\",\\n    影视: \\\"hiker://images/icon_video2\\\",\\n    动漫: \\\"hiker://images/icon_pic3\\\",\\n    图文: \\\"hiker://images/icon_txt2\\\",\\n    其他: \\\"hiker://images/icon_unknown\\\"\\n}\\nlet groups = Object.keys(icons);\\nlet pageid = id + \\\"ypj-page\\\" + page;\\nlet keyword = String(getMyVar(\\\"keyword\\\", \\\"\\\")).trim();\\nlet _SOU = keyword != \\\"\\\" && !keyword.match(/quark.*\\\\/s\\\\/.+/) && keyword == String(getMyVar(\\\"keyword2\\\", \\\"\\\")).trim();\\nlet history = storage0.getItem(\\\"searchHistory\\\", []);\\n\\n\\n\\n\\n\\nconst setHistoryKeyword = () => {\\n    ii = history.indexOf(keyword);\\n    if (ii > -1) {\\n        history.splice(ii, 1);\\n    }\\n    if (history.length > 20) {\\n        history.splice(history.length - 1, 1);\\n    }\\n    history.unshift(keyword);\\n    storage0.setItem(\\\"searchHistory\\\", history);\\n}\\nconst getRuleBaseUrl = (baseU, Keyword) => {\\n    if (!Keyword) {\\n        isFyAll = String(baseU).includes(\\\"fyAll\\\");\\n        FyAll_i = Number(getMyVar(\\\"FyAll_i\\\")) || 0;\\n        for (t of ['class', 'area', 'year', 'sort']) {\\n            eval(`${t}_i = Number(getMyVar(\\\"${t}_i\\\")) || 0;\\nrule.${t}_url = String(rule.${t}_url || \\\"\\\").trim().split(\\\"&\\\");\\nrule.${t}_name = String(rule.${t}_name || \\\"\\\").trim().split(\\\"&\\\");\\nrule.${t}_url = rule.${t}_url.filter((u, i) => rule.${t}_name[i] != \\\"\\\");\\nrule.${t}_name = rule.${t}_name.filter((Name) => Name != \\\"\\\");\\nrule.${t}_i = rule.${t}_name.length;`);\\n        }\\n    }\\n    baseU = String(baseU)\\n        .replace(\\n            /fypage@([^\\\\?\\\\&\\\\;\\\\#\\\\\\\"\\\\'\\\\{]+)@?/g,\\n            ($0, $1) => {\\n                page2 = page;\\n                $1.split(\\\"@\\\").map(_ => {\\n                    eval(String('page2=page2' + _));\\n                });\\n                return page2;\\n            }\\n        )\\n        .replace(/fypage/g, page)\\n        .replace(/\\\\*\\\\*/g, Keyword || \\\"\\\");\\n    if (!keyword) baseU = String(baseU)\\n        .replace(\\n            /fy(class|area|year|sort)/g,\\n            ($0, $1) => rule[$1 + '_url'][eval($1 + '_i')] || \\\"\\\"\\n        )\\n        .replace(\\n            /fyAll/g,\\n            ($0, $1) => {\\n                FyAll_ii = FyAll_i;\\n                if (FyAll_ii > (rule.class_i - 1)) {\\n                    FyAll_ii -= rule.class_i;\\n                    if (FyAll_ii > (rule.area_i - 1)) {\\n                        FyAll_ii -= rule.area_i;\\n                        if (FyAll_ii > (rule.year_i - 1)) {\\n                            return rule.sort_url[FyAll_ii - rule.year_i];\\n                        } else {\\n                            return rule.year_url[FyAll_ii];\\n                        }\\n                    } else {\\n                        return rule.area_url[FyAll_ii];\\n                    }\\n                } else {\\n                    return rule.class_url[FyAll_ii];\\n                }\\n            }\\n        );\\n    return baseU;\\n}\\nconst getRuleGroup = (col_type, Sou) => {\\n    for (it of ['class', 'area', 'year', 'sort']) {\\n        eval(`index = {\\n    class: 0,\\n    area: rule.class_i,\\n    year: rule.class_i + rule.area_i,\\n    sort: rule.class_i + rule.area_i + rule.year_i,\\n}[it]\\nrule.${it}_name.map((name, i) => {\\n    if (isFyAll) {\\n        i = index + i;\\n        t = FyAll_i == i;\\n        k = 'FyAll_i';\\n    } else {\\n        t = ${it}_i == i;\\n        k = '${it}_i'\\n    }\\n    d.push({\\n        title: t ? Rich(Strong(Color(name))) : name,\\n        url: $('#noLoading#').lazyRule((k, i) => {\\n            putMyVar(k, i);\\n            refreshPage(false);\\n            return 'hiker://empty';\\n        }, k, i),\\n        col_type: \\\"${col_type||\\\"\\\"}\\\" || 'scroll_button'\\n    });\\n});\\nd.push({\\n    col_type: 'blank_block'\\n});`);\\n    }\\n    if (Sou) {\\n        d.push({\\n            title: '搜索',\\n            desc: '搜索关键词 / 夸克链接',\\n            url: $.toString(() => {\\n                input = input.trim();\\n                if (input.match(/quark.cn.*\\\\/s\\\\/.+/)) {\\n                    return \\\"hiker://page/quarkList#noHistory##noRecordHistory#?realurl=\\\" + encodeURIComponent(input) + \\\"&rule=uckk云&sharePwd=\\\";\\n                } else if (input != \\\"\\\") {\\n                    putMyVar('keyword2', input);\\n                    refreshPage(false);\\n                }\\n                return 'hiker://empty';\\n            }),\\n            col_type: \\\"input\\\",\\n            extra: {\\n                id: id + \\\":search\\\",\\n                defaultValue: keyword,\\n                onChange: \\\"putMyVar('keyword',input)\\\"\\n            }\\n        });\\n    }\\n    d.push({\\n        url: \\\"toast://加载中...\\\",\\n        img: \\\"https://hikerfans.com/weisyr/img/Loading1.gif\\\",\\n        col_type: \\\"pic_1_center\\\",\\n        extra: {\\n            cls: \\\"loading_gif\\\"\\n        }\\n    });\\n    setPreResult(d);\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"❺温馨提示\",\"path\":\"notice\",\"rule\":\"$.exports = function() {\\n    f = \\\"Gray\\\";\\n    t = false;\\n    up = getMyVar('Rule_noupdate', '');\\n    if (up != '1') {\\n        version = JSON.parse(request(\\\"hiker://home@uckk云\\\")).version;\\n        if (up == '') {\\n            [url, v, run] = $.require(\\\"lanzou?rule=uckk云\\\").list_one(\\\"https://wwr.lanzoui.com/b03qf28qb\\\", \\\"read\\\");\\n        } else {\\n            url = false;\\n            v = version + 1;\\n        }\\n        if (version < v) {\\n            f = \\\"red\\\";\\n            t = \\\"检测到新版更新，点击了解详情。\\\";\\n            T = \\\"更新内容\\\";\\n            if (up == '') {\\n                confirm({\\n                    title: '更新提示',\\n                    content: '检测到你的规则版本小于服务器版本，是否立即更新？',\\n                    confirm: $.toString((da) => {\\n                        f = $.require(\\\"lanzou?rule=uckk云\\\").one_url(da);\\n                        putMyVar('Rule_noupdate', '1');\\n                        return \\\"\\\\u6d77\\\\u9614\\\\u89c6\\\\u754c\\\\uffe5home_rule_url\\\\uffe5\\\" + getPath(f);\\n                    }, url)\\n                });\\n                putMyVar('Rule_noupdate', url);\\n            }\\n            url = $(\\\"hiker://empty#noHistory##noRecordHistory#\\\").rule((up, version) => {\\n                return $.require(\\\"lanzou?rule=uckk云\\\").one_info(up, \\\"uckk\\\", version);\\n            }, url || up, version);\\n        } else {\\n            putMyVar('Rule_noupdate', '1');\\n        }\\n    }\\n\\n\\n    if (!$.require(\\\"tool\\\").isLoginCookie(getItem(\\\"quarkCookie\\\", \\\"\\\"))) {\\n        clearItem(\\\"quarkCookie\\\");\\n        f = \\\"red\\\";\\n        T = \\\"登录账号\\\";\\n        t = \\\"未检测到登录信息\\\";\\n        url = $([\\\"输入Cookie\\\", \\\"网页登录\\\"]).select(() => {\\n            if (input === \\\"网页登录\\\") {\\n                return \\\"hiker://page/login\\\";\\n            } else {\\n                return $(\\\"\\\", \\\"请输入Cookie\\\").input(() => {\\n                    if ($.require(\\\"tool\\\").isLoginCookie(input)) {\\n                        setItem(\\\"quarkCookie\\\", input.replace(/\\\\s/g, \\\"\\\"));\\n                        refreshPage();\\n                        return \\\"toast://设置成功\\\";\\n                    } else {\\n                        return \\\"toast://Cookie格式错误\\\";\\n                    }\\n                });\\n            }\\n        })\\n    } else if (!t) {\\n        T = \\\"程序设置\\\";\\n        url = \\\"hiker://page/install#noHistory##noRecordHistory#\\\";\\n        T = \\\"捐赠/支持\\\";\\n        url = \\\"hiker://page/donate#noHistory##noRecordHistory#\\\";\\n        hour = new Date().getHours();\\n        if (hour < 5) {\\n            t = \\\"深夜，现在的夜，熬得只是还未改变的习惯\\\";\\n        } else if (hour < 11) {\\n            t = \\\"早安，清晨熹微的阳光， 是你在微笑吗\\\";\\n        } else if (hour < 14) {\\n            t = \\\"午好，伴随着熟悉的乐曲，聆听着动人的旋律\\\";\\n        } else if (hour < 19) {\\n            t = \\\"夕暮，似清风醉晚霞，不经意间盈笑回眸\\\";\\n        } else {\\n            t = \\\"夜晚，一个安静的角落，静静地聆听夜曲\\\";\\n        }\\n    }\\n    d.push({\\n        title: \\\"““””\\\" + t.fontcolor(f).small(),\\n        col_type: \\\"text_center_1\\\",\\n        url: url,\\n        extra: {\\n            pageTitle: T,\\n            lineVisible: false\\n        }\\n    });\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"❽蓝奏更新\",\"path\":\"lanzou\",\"rule\":\"js:\\nhead = {\\n    headers: {\\n        \\\"upgrade-insecure-requests\\\": \\\"1\\\",\\n        \\\"User-Agent\\\": \\\"Mozilla/5.0 (Linux; Android 8.0.0; MI 5s Plus Build/OPR1.170623.032; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/71.0.3578.99 Mobile Safari/537.36\\\",\\n        \\\"Cookie\\\": \\\"down_ip=1\\\",\\n        \\\"accept\\\": \\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\\",\\n    },\\n    method: 'GET'\\n};\\none_url = function(url, pwd, run, noTp, Html) {\\n    try {\\n        head.headers.referer = url.split(\\\"?\\\")[0];\\n        isTp = !url.match(\\\"/tp/\\\");\\n        if (isTp && !noTp) {\\n            da = url.replace(/^(.*?\\\\.com)/, '$1/tp');\\n        } else {\\n            da = url;\\n        }\\n        html = String(Html || fetch(da, head));\\n        if (html == \\\"\\\" && isTp && !noTp) {\\n            return one_url(url, pwd, run, true);\\n        }\\n        try {\\n            path = html.match(/link = ['\\\"]([^\\\"']+)/i)[1];\\n            host = url.match(/^(.*?\\\\.com\\\\/)/)[1];\\n            return one_url(host + path, pwd, run);\\n        } catch (err0) {\\n            try {\\n                path = html.match(/'(\\\\?.+?)'/)[1];\\n                host = \\\"https://developer.lanzoug.com\\\";\\n            } catch (err1) {\\n                eval(html.match(/value\\\\;([\\\\s\\\\S]+?)\\\\$\\\\(/i)[1]);\\n                eval('body=' + html.match(/[\\\\s\\\\S]*data :([\\\\s\\\\S]*?\\\\}),\\\\s+/)[1]);\\n                u = String(url).replace(/\\\\.com.*/, \\\".com/ajaxm.php\\\");\\n                _ = JSON.parse(post(u, {\\n                    body: body,\\n                    headers: head.headers\\n                }));\\n                path = _.url;\\n                host = _.dom;\\n            }\\n        }\\n        u = host + \\\"/file/\\\" + path;\\n        k = JSON.parse(fetch(u, {\\n            redirect: false,\\n            onlyHeaders: true\\n        })).headers.location;\\n        k = Array.isArray(k) ? k[0] : k;\\n        if (run) return k;\\n        let f = \\\"hiker://files/cache/_fileSelect_rule.json\\\";\\n        downloadFile(k, f);\\n        return f;\\n    } catch (err2) {\\n        return false;\\n    }\\n};\\n$.exports = {\\n    list_one: function(url, pwd, run) {\\n        src = fetch(url, head);\\n        eval(src.match(/var pgs;([\\\\s\\\\S]*?pgs.+;)/)[1]);\\n        eval('body=' + src.match(/data :([\\\\s\\\\S]*?\\\\})/)[1]);\\n        url = url.replace(/\\\\.com.*/, \\\".com/filemoreajax.php\\\");\\n        list = JSON.parse(post(url, {\\n            body: body,\\n            headers: head.headers\\n        })).text;\\n        if (run) return list;\\n        __ = list[0];\\n        url = url.replace(/filemo.*/, 'tp/' + __.id);\\n        v = __.name_all.match(/\\\\[(.+)/)[1];\\n        [v, run] = v.split(\\\"]\\\");\\n        return [url, v, run];\\n    },\\n    one_url: one_url,\\n    one_info: function(url, pwd, version) {\\n        version = version || \\\"未知版本\\\";\\n        version = String(version).replace(/(\\\\d\\\\d)(\\\\d\\\\d)$/, \\\"-$1-$2\\\");\\n        item = fetch(url, head);\\n        t = pdfh(item, \\\".md&&Text\\\") || pdfh(item, \\\"title&&Text\\\");\\n        try {\\n            t = String(t).split(\\\"[\\\")[1].split(\\\"]\\\")[0];\\n        } catch (err) {}\\n        t = String(t).replace(/(\\\\d\\\\d)(\\\\d\\\\d)$/, \\\"-$1-$2\\\");\\n        d = [];\\n        d.push({\\n            desc: \\\"<b>““\\\" + version + \\\" => \\\" + t + \\\"””</b>\\\",\\n            col_type: \\\"text_center_1\\\",\\n            url: \\\"hiker://empty\\\",\\n            extra: {\\n                lineVisible: false\\n            }\\n        });\\n        d.push({\\n            col_type: \\\"big_big_blank_block\\\"\\n        });\\n        d.push({\\n            title: pdfh(item, \\\".mdo&&Html\\\").replace(/(<\\\\/span>)?\\\\s*<span>/gi, \\\"<br>\\\"),\\n            url: 'hiker://empty',\\n            col_type: 'rich_text'\\n        });\\n        d.push({\\n            col_type: \\\"big_blank_block\\\"\\n        });\\n        d.push({\\n            title: \\\"<b>““确定更新””</b>\\\".big(),\\n            col_type: \\\"text_center_1\\\",\\n            url: $(\\\"hiker://empty#noHistory##noRecordHistory#\\\").lazyRule((url, pwd, item) => {\\n                if (getMyVar('Rule_noupdate') == '1') {\\n                    return back(true), \\\"hiker://empty\\\";\\n                }\\n                let {\\n                    one_url\\n                } = $.require(\\\"hiker://page/lanzou?rule=歌词适配\\\");\\n                let K = one_url(url, pwd, 1, 0, item);\\n                if (!K) {\\n                    K = one_url(url, pwd, 1);\\n                }\\n                if (!K) {\\n                    K = one_url(url.split(\\\"?\\\")[0], pwd, 1);\\n                }\\n                if (K) {\\n                    f = \\\"hiker://files/cache/_fileSelect_rule.json\\\";\\n                    downloadFile(K, f);\\n                    putMyVar('Rule_noupdate', '1');\\n                    return \\\"\\\\u6d77\\\\u9614\\\\u89c6\\\\u754c\\\\uffe5home_rule_url\\\\uffe5\\\" + getPath(f);\\n                } else {\\n                    return \\\"toast://获取下载链接失败\\\";\\n                }\\n            }, url, pwd, item),\\n            extra: {\\n                lineVisible: false\\n            }\\n        });\\n        setResult(d);\\n    }\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"❻支持作者\",\"path\":\"donate\",\"rule\":\"js:\\nlet d = [];\\nd.push({\\n    title: \\\"捐赠/支持\\\",\\n    desc: \\\"这个捐赠不能为你带来特权，但您的支持是我更新创作的动力。\\\",\\n    col_type: \\\"text_center_1\\\",\\n    url: \\\"toast://感谢您的支持\\\"\\n});\\nd.push({\\n    col_type: \\\"pic_1_full\\\",\\n    url: \\\"https://gitee.com/ThomasYou/haikuo/raw/master/IMG_20240112_081355.png\\\",\\n    pic_url: \\\"https://gitee.com/ThomasYou/haikuo/raw/master/IMG_20240112_081355.png\\\"\\n});\\nd.push({\\n    col_type: \\\"text_center_1\\\",\\n    title: \\\"““””\\\" + \\\"图片加载缓慢请稍等\\\".small().fontcolor(\\\"Gray\\\"),\\n    url: \\\"hiker://empty\\\",\\n    extra: {\\n        lineVisible: false\\n    }\\n});\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"❸规则列表\",\"path\":\"ruleList\",\"rule\":\"js:\\naddListener('onClose', $.toString(() => {\\n    arr = $.require('tool?rule=uckk云').getVariables();\\n    for (t of arr) {\\n        clearMyVar(t);\\n    }\\n}));\\neval(JSON.parse(fetch('hiker://page/lib?rule=uckk云', {})).rule);\\nd = [];\\nd.push({\\n    title: '新增规则',\\n    col_type: 'text_2',\\n    url: $('#noLoading#').lazyRule(() => {\\n        arr = $.require('tool?rule=uckk云').getVariables();\\n        for (t of arr) {\\n            clearMyVar(t);\\n        }\\n        clearMyVar(\\\"rule_uid\\\");\\n        return 'hiker://page/ruleEdit#noHistory##noRecordHistory#?pageTitle=规则编辑&rule=uckk云'\\n    })\\n});\\nd.push({\\n    title: '分享选中',\\n    col_type: 'text_2',\\n    url: $('#noLoading#').lazyRule(() => {\\n        zy = storage0.getMyVar(\\\"jxlist2\\\", {});\\n        zu = Object.keys(zy);\\n        if (zu.length == 0) {\\n            return \\\"toast://没有选中规则\\\";\\n        }\\n        rules = zu.length == 1 ? [zy[zu[0]]] : zu.map(key => zy[key]);\\n        return $.require(\\\"tool?rule=uckk云\\\").getRulePaste(rules, 1);\\n    })\\n});\\n\\n\\n\\n\\n\\nplatform = getMyVar('platform', '综合');\\n[\\\"综合\\\"].concat(groups).map(group => {\\n    if (group == platform)\\n        platform2 = Rich(Strong(Color(group)));\\n    else\\n        platform2 = group;\\n    d.push({\\n        title: platform2,\\n        url: $('#noLoading#').lazyRule((group) => {\\n            putMyVar('platform', group);\\n            refreshPage();\\n            return 'hiker://empty';\\n        }, group),\\n        col_type: 'scroll_button',\\n        extra: {\\n            longClick: [{\\n                    title: '删除' + group.replace('综合', '全部') + '规则',\\n                    js: $.toString((group) => {\\n                        $$ = $.require('configs?rule=uckk云');\\n                        if (group == \\\"综合\\\") {\\n                            deleteFile($$.rulePath);\\n                        } else {\\n                            rules = $$.getJson_1(\\\"group\\\", group);\\n                            $$.saveJson(rules);\\n                        }\\n                        refreshPage();\\n                        return \\\"hiker://empty\\\";\\n                    }, group)\\n                },\\n                {\\n                    title: '分享' + group.replace('综合', '全部') + '规则',\\n                    js: $.toString((group) => {\\n                        $$ = $.require('configs?rule=uckk云');\\n                        if (group == \\\"综合\\\") {\\n                            rules = $$.getJson().slice(1);\\n                        } else {\\n                            rules = $$.getJson_1(\\\"group\\\", group, 1);\\n                        }\\n                        return $.require(\\\"tool?rule=uckk云\\\").getRulePaste(rules);\\n                    }, group)\\n                }\\n            ]\\n        }\\n    });\\n});\\nd.push({\\n    col_type: 'blank_block'\\n});\\nrules = $.require('configs?rule=uckk云').getGroupJson(false, \\\"group\\\", platform, \\\"综合\\\");\\n\\n\\n\\n\\n\\npid = Number(getMyVar('pid')) || 0;\\nnames = $.require('configs?rule=uckk云').getGroupNames(rules, \\\"search_group\\\");\\nif (pid > names.length - 1) {\\n    pid = 0;\\n}\\nnames.map((group, i) => {\\n    if (i == pid)\\n        platform2 = Rich(Strong(Color(group)));\\n    else\\n        platform2 = group;\\n    d.push({\\n        title: platform2,\\n        url: $('#noLoading#').lazyRule((i) => {\\n            putMyVar('pid', i);\\n            refreshPage(false);\\n            return 'hiker://empty';\\n        }, i),\\n        col_type: 'scroll_button',\\n        extra: {\\n            longClick: [{\\n                title: '分享' + group.replace('全全', '全部') + '规则',\\n                js: $.toString((platform, group) => {\\n                    $$ = $.require('configs?rule=uckk云');\\n                    if (platform == \\\"综合\\\") {\\n                        rules = $$.getJson().slice(1);\\n                    } else {\\n                        rules = $$.getJson_1(\\\"group\\\", platform, 1);\\n                    }\\n                    if (group != \\\"全全\\\") {\\n                        rules = rules.filter(f => f.search_group == group);\\n                    }\\n                    return $.require(\\\"tool?rule=uckk云\\\").getRulePaste(rules);\\n                }, platform, group)\\n            }]\\n        }\\n    });\\n});\\nd.push({\\n    col_type: 'line'\\n});\\nplatform2 = names[pid];\\nrules = $.require('configs?rule=uckk云').getGroupJson(rules, \\\"search_group\\\", platform2, \\\"全全\\\").slice(1);\\n\\n\\n\\n\\n\\n\\nif (rules.length == 0) {\\n    d.push({\\n        title: Rich(Strong(Color(\\\"没有规则\\\"))),\\n        url: 'hiker://empty',\\n        col_type: 'text_center_1',\\n        extra: {\\n            lineVisible: false\\n        }\\n    });\\n} else {\\n    jxlist2 = storage0.getMyVar(\\\"jxlist2\\\", {});\\n    rules.map((_, ii) => {\\n        m = md5(_.group + _.title);\\n        i = !jxlist2[m];\\n        d1 = _.explore_enabled == \\\"1\\\";\\n        d2 = 'by ' + _.author;\\n        d.push({\\n            title: Strong(i ? _.title : Color(_.title)),\\n            desc: d1 ? Color(d2, \\\"#2E5D8E\\\") : d2,\\n            url: $([\\\"分享\\\", \\\"编辑\\\", \\\"删除\\\", \\\"移动\\\"].concat([i ? \\\"选中规则\\\" : \\\"取消选中\\\", d1 ? \\\"禁用发现\\\" : \\\"启用发现\\\"]), 2, '选择扩展操作').select((m, _) => {\\n                switch (input) {\\n                    case '分享':\\n                        return $.require(\\\"tool?rule=uckk云\\\").getRulePaste([_]);\\n                        break;\\n                    case '编辑':\\n                        arr = $.require('tool?rule=uckk云').getVariables();\\n                        for (t of arr) {\\n                            clearMyVar(t);\\n                        }\\n                        arr = Object.keys(_);\\n                        for (t of arr) {\\n                            putMyVar(t, _[t] || \\\"\\\");\\n                        }\\n                        putMyVar('rule_uid', m);\\n                        putMyVar('search_enabled', _.search_enabled || \\\"0\\\");\\n                        putMyVar('explore_enabled', _.explore_enabled || \\\"0\\\");\\n                        return 'hiker://page/ruleEdit#noHistory##noRecordHistory#?pageTitle=规则编辑&rule=uckk云';\\n                        break;\\n                    case '删除':\\n                        return $(\\\"确定删除\\\" + _.group + \\\"规则“\\\" + _.title + '”吗？\\\\n此操作不可逆，请谨慎选择。').confirm((m) => {\\n                            $$ = $.require('configs?rule=uckk云');\\n                            rules = $$.getJson_2(m);\\n                            $$.saveJson(rules);\\n                            refreshPage(false);\\n                        }, m);\\n                        break;\\n                    case '移动':\\n                        zy = $.require('configs?rule=uckk云').getJson_2(m);\\n                        zu = zy.slice(1).map(_ => _.title);\\n                        return $(zu.concat(\\\"最后面\\\"), 2, '请选择移动位置').select((zy, zu, _) => {\\n                            i = zu.indexOf(input);\\n                            if (i == -1)\\n                                zy.push(_);\\n                            else\\n                                zy.splice(i + 1, 0, _);\\n                            $.require('configs?rule=uckk云').saveJson(zy);\\n                            refreshPage(false);\\n                        }, zy, zu, _);\\n                        break;\\n                    case '选中规则':\\n                        jxlist2 = storage0.getMyVar(\\\"jxlist2\\\", {});\\n                        jxlist2[m] = _;\\n                        storage0.putMyVar(\\\"jxlist2\\\", jxlist2);\\n                        refreshPage(false);\\n                        break;\\n                    case '取消选中':\\n                        jxlist2 = storage0.getMyVar(\\\"jxlist2\\\", {});\\n                        delete jxlist2[m];\\n                        storage0.putMyVar(\\\"jxlist2\\\", jxlist2);\\n                        refreshPage(false);\\n                        break;\\n                    case '启用发现':\\n                    case '禁用发现':\\n                        $.require('configs?rule=uckk云').getJson_2(m, \\\"explore_enabled\\\");\\n                        refreshPage(false);\\n                        break;\\n                }\\n            }, m, _),\\n            col_type: 'avatar',\\n            img: _.icon\\n        });\\n        d.push({\\n            title: _.group + '丨' + _.search_group + '丨' + (_.x5_url || (_.url ? _.url : _.search_url).split(\\\"/\\\").slice(0, 3).join(\\\"/\\\")),\\n            url: $('#noLoading#').lazyRule((m) => {\\n                $.require('configs?rule=uckk云').getJson_2(m, \\\"search_enabled\\\");\\n                refreshPage(false);\\n                return 'hiker://empty';\\n            }, m),\\n            col_type: 'text_icon',\\n            img: 'https://hikerfans.com/tubiao/messy/' + (_.search_enabled == '1' ? 55 : 63) + '.svg',\\n            extra: {\\n                lineVisible: false\\n            }\\n        });\\n        d.push({\\n            col_type: 'line'\\n        });\\n    });\\n}\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"❼程序首页\",\"path\":\"home\",\"rule\":\"js:\\neval(JSON.parse(fetch('hiker://page/lib?rule=uckk云', {})).rule);\\naddListener('onRefresh', $.toString(() => {\\n    putMyVar('keyword2', getMyVar('keyword'));\\n}));\\nd = [];\\nlet rules = $.require(\\\"configs?rule=uckk云\\\").getJson();\\n\\n\\n\\nsearch_rule = rules.filter(_ => _.search_enabled == \\\"1\\\" && _.search_url != \\\"\\\" && _.searchFind != \\\"\\\");\\nsearch_type = $.require(\\\"configs?rule=uckk云\\\").getGroupNames(search_rule, \\\"group\\\");\\nruleType = getMyVar(\\\"ruleType\\\", \\\"综合\\\");\\nsearch_rule = $.require(\\\"configs?rule=uckk云\\\").getGroupJson(search_rule, \\\"group\\\", ruleType, \\\"综合\\\");\\nsearch_group = $.require(\\\"configs?rule=uckk云\\\").getGroupNames(search_rule, \\\"search_group\\\");\\nruleGroup = Number(getMyVar(\\\"ruleGroup\\\")) || 0;\\nif (ruleGroup > search_group.length - 1) {\\n    ruleGroup = 0;\\n}\\nsearch_rule = $.require(\\\"configs?rule=uckk云\\\").getGroupJson(search_rule, \\\"search_group\\\", search_group[ruleGroup], \\\"全全\\\");\\nlet sid = Number(getMyVar(\\\"sid\\\")) || 0;\\nif (sid > search_rule.length - 1) {\\n    sid = 0;\\n}\\nif (sid) {\\n    data = [search_rule[sid]];\\n} else {\\n    data = search_rule.slice(1);\\n}\\n\\n\\n\\n\\nlet explore_rule = rules.filter(_ => _.explore_enabled == \\\"1\\\" && _.url != \\\"\\\" && (_.explore_X5 == \\\"1\\\" || _.find_rule != \\\"\\\"));\\nlet tid = Number(getMyVar(\\\"tid\\\")) || 0;\\nif (tid > explore_rule.length - 1) {\\n    tid = 0;\\n}\\nlet rule = _ = explore_rule[tid];\\nlet rule_x5 = _.explore_X5 == \\\"1\\\";\\nif (rule_x5) {\\n    if (!_.x5_url && (_.url ? _.url : _.search_url).match(/fy(All|class|area|sort|year|page)/)) {\\n        _.x5_url = (_.url ? _.url : _.search_url).split(\\\"/\\\").slice(0, 3).join(\\\"/\\\");\\n    }\\n} else {\\n    if (_PAGE) $.require('notice?rule=uckk云')();\\n    _.x5_desc = '1';\\n}\\nlet baseUrl, home_baseUrl = getRuleBaseUrl(_.url);\\n\\n\\n\\n\\n\\n\\n// top\\nif (_PAGE) {\\n    explore_rule.map((_, i) => {\\n        d.push({\\n            title: Strong(\\\"““\\\" + (tid == i ? _.title + \\\"””\\\" : \\\"””\\\" + _.title)),\\n            url: $('#noLoading#').lazyRule((i) => {\\n                putMyVar('keyword2', getMyVar('keyword'));\\n                putMyVar('tid', i);\\n                for (t of [\\\"class\\\", \\\"area\\\", \\\"year\\\", \\\"sort\\\", \\\"FyAll\\\"]) {\\n                    clearMyVar(t + \\\"_i\\\");\\n                }\\n                refreshPage();\\n                return 'hiker://empty';\\n            }, i),\\n            col_type: 'scroll_button'\\n        });\\n    });\\n    d.push({\\n        col_type: \\\"x5_webview_single\\\",\\n        url: _.x5_desc == '1' || _.x5_url || _.url,\\n        desc: _.x5_desc == '1' ? '0' : 'screen-133&&float',\\n        extra: {\\n            canBack: true,\\n            ua: _.x5_ua ? (_.x5_ua == \\\"PC_UA\\\" ? PC_UA : _.x5_ua) : MOBILE_UA,\\n            referer: _.x5_referer,\\n            js: _.x5_js,\\n            jsLoadingInject: !!_.x5_jsLoadingInject,\\n            autoPlay: !!_.x5_autoPlay,\\n            floatVideo: !!_.x5_floatVideo,\\n            imgLongClick: !_.x5_imgLongClick,\\n            showProgress: !_.x5_showProgress,\\n            blockRules: eval(_.x5_blockRules) || [],\\n            urlInterceptor: $.toString((urlInterceptor_js, x5Url) => {\\n                if (input.includes(\\\"aliyundrive.com/\\\") || input.includes(\\\"aliyundrive.net/\\\") || input.includes(\\\"alipan.com/\\\")) {\\n                    return $.toString((url) => {\\n                        fba.open(JSON.stringify({\\n                            rule: '云盘君.简',\\n                            url: \\\"hiker://page/aliyun#noHistory##noRecordHistory#?rule=云盘君.简&page=fypage&realurl=\\\" + encodeURIComponent(url)\\n                        }));\\n                    }, input)\\n                } else if (input.includes(\\\"quark.cn\\\")) {\\n                    return $.toString((url) => {\\n                        fba.open(JSON.stringify({\\n                            title: \\\"夸克网盘\\\",\\n                            url: \\\"hiker://page/quarkList#noHistory##noRecordHistory#?rule=uckk云&realurl=\\\" + encodeURIComponent(url),\\n                        }))\\n                    }, input);\\n                }\\n                let x5_urlInterceptor = new Function(\\\"input\\\", \\\"x5Url\\\", urlInterceptor_js);\\n                return x5_urlInterceptor(input, x5Url);\\n            }, _.x5_urlInterceptor, \\\"hiker://page/ruleHome#noHistory##noRecordHistory#?rule=uckk云&page=fypage&ruleName=\\\" + _.title + \\\"&ruleGroup=\\\" + _.group + \\\"&baseUrl=\\\")\\n        }\\n    });\\n}\\n\\n\\n\\nif (rule_x5) { // x5\\n    if (_.x5_desc == '1') { // 自定义首页\\n        eval(_.preRule);\\n        eval(_.x5_home);\\n        if (rule.Search && rule.search_url != \\\"\\\" && rule.searchFind != \\\"\\\") {\\n            data = [rule];\\n            d.push({\\n                title: \\\"正在搜索““\\\" + keyword + \\\"””，加载第\\\" + page + \\\"页中...\\\",\\n                pic_url: \\\"https://hikerfans.com/weisyr/img/Loading1.gif\\\",\\n                col_type: _PAGE ? \\\"pic_1_center\\\" : \\\"text_center_1\\\",\\n                url: \\\"hiker://empty\\\",\\n                extra: {\\n                    id: pageid\\n                }\\n            });\\n        }\\n    }\\n} else { // 搜索/发现\\n    if (_PAGE) {\\n        d.push({\\n            col_type: 'line_blank'\\n        }, {\\n            col_type: 'line_blank'\\n        }, {\\n            title: Strong(\\\"我的收藏\\\"),\\n            url: \\\"hiker://collection?rule=\\\" + id,\\n            col_type: \\\"icon_small_3\\\",\\n            img: \\\"hiker://images/icon_download\\\"\\n        }, {\\n            title: Strong(\\\"历史记录\\\"),\\n            url: \\\"hiker://history?rule=\\\" + id,\\n            col_type: \\\"icon_small_3\\\",\\n            img: \\\"hiker://images/icon_his\\\"\\n        }, {\\n            title: Strong(\\\"规则管理\\\"),\\n            url: \\\"hiker://page/ruleList#noHistory##noRecordHistory#?pageTitle=规则管理&rule=\\\" + id,\\n            col_type: \\\"icon_small_3\\\",\\n            img: \\\"hiker://images/icon_xiutan\\\"\\n        }, {\\n            title: '搜索',\\n            desc: '搜索关键词 / 夸克链接',\\n            url: $.toString(() => {\\n                input = input.trim();\\n                if (input.match(/quark.cn.*\\\\/s\\\\/.+/)) {\\n                    return \\\"hiker://page/quarkList#noHistory##noRecordHistory#?realurl=\\\" + encodeURIComponent(input) + \\\"&rule=uckk云&sharePwd=\\\";\\n                } else if (input != \\\"\\\") {\\n                    putMyVar('keyword2', input);\\n                    refreshPage(false);\\n                }\\n                return 'hiker://empty';\\n            }),\\n            col_type: \\\"input\\\",\\n            extra: {\\n                id: id + \\\":search\\\",\\n                defaultValue: keyword,\\n                onChange: \\\"putMyVar('keyword',input)\\\"\\n            }\\n        }, {\\n            title: Rich(Strong(Color(ruleType, \\\"#3399cc\\\"))),\\n            url: $([\\\"综合\\\"].concat(groups).map(name => {\\n                if (name == ruleType) {\\n                    name = Rich(Strong(Color(name)));\\n                } else if (search_type.indexOf(name) == -1) {\\n                    name = Rich(\\\"<S>\\\" + name + \\\"</S>\\\");\\n                }\\n                return name;\\n            }), 3, \\\"选择搜索类别\\\").select(() => {\\n                if (input.indexOf(\\\"<S>\\\") != -1) {\\n                    return \\\"toast://没有对应规则\\\";\\n                } else if (input.indexOf(\\\"<\\\") == -1) {\\n                    putMyVar('keyword2', getMyVar('keyword'));\\n                    putMyVar('ruleType', input);\\n                    clearMyVar(\\\"ruleGroup\\\");\\n                    clearMyVar(\\\"sid\\\");\\n                    refreshPage(false);\\n                }\\n                return 'hiker://empty';\\n            }),\\n            col_type: 'scroll_button'\\n        });\\n        search_group.map((name, i) => {\\n            d.push({\\n                title: ruleGroup == i ? Rich(Strong(Color(name))) : name,\\n                url: $('#noLoading#').lazyRule((i) => {\\n                    putMyVar('keyword2', getMyVar('keyword'));\\n                    putMyVar('ruleGroup', i);\\n                    clearMyVar(\\\"sid\\\");\\n                    refreshPage();\\n                    return 'hiker://empty';\\n                }, i),\\n                col_type: 'scroll_button'\\n            });\\n        });\\n        d.push({\\n            col_type: 'blank_block'\\n        });\\n        search_rule.map((_, i) => {\\n            d.push({\\n                title: sid == i ? Rich(Strong(Color(_.title))) : _.title,\\n                url: $('#noLoading#').lazyRule((i) => {\\n                    putMyVar('keyword2', getMyVar('keyword'));\\n                    putMyVar('sid', i);\\n                    refreshPage();\\n                    return 'hiker://empty';\\n                }, i),\\n                col_type: 'scroll_button'\\n            });\\n        });\\n        d.push({\\n            col_type: 'line_blank'\\n        });\\n    }\\n\\n\\n\\n\\n\\n    if (_SOU) {\\n        if (data.length > 0) {\\n            d.push({\\n                title: \\\"加载第\\\" + page + \\\"页中，进度：1/\\\" + data.length,\\n                url: \\\"hiker://empty\\\",\\n                col_type: \\\"text_center_1\\\",\\n                desc: \\\"\\\",\\n                pic_url: \\\"\\\",\\n                extra: {\\n                    id: pageid\\n                }\\n            });\\n        } else if (_PAGE) {\\n            d.push({\\n                title: \\\"没有可用的搜索规则\\\",\\n                url: \\\"hiker://empty\\\",\\n                col_type: \\\"text_center_1\\\",\\n                desc: \\\"\\\",\\n                pic_url: \\\"\\\",\\n                extra: {\\n                    id: pageid\\n                }\\n            });\\n        }\\n    } else if (_PAGE || rule.url.match(\\\"fypage\\\")) {\\n        if (_PAGE) {\\n            if (rule.title != \\\"聚搜\\\") d.push({\\n                title: '‘‘’’<b>' + Color(rule.title, '#ff6601') + '</b>',\\n                url: $('#noLoading#').lazyRule((url) => {\\n                    for (t of [\\\"class\\\", \\\"area\\\", \\\"year\\\", \\\"sort\\\", \\\"FyAll\\\"]) {\\n                        clearMyVar(t + \\\"_i\\\");\\n                    }\\n                    return url;\\n                }, \\\"hiker://page/ruleHome?rule=uckk云&page=fypage&ruleName=\\\" + rule.title + \\\"&ruleGroup=\\\" + rule.group),\\n                col_type: 'text_center_1',\\n                img: rule.icon,\\n                extra: {\\n                    lineVisible: false,\\n                    home: 1\\n                }\\n            });\\n            getRuleGroup();\\n        }\\n        baseUrl = home_baseUrl;\\n        eval(rule.preRule);\\n        eval(rule.find_rule);\\n    }\\n}\\n_PAGE ? setPreResult(d) : setResult(d);\\ndeleteItemByCls('loading_gif');\\n\\n\\n\\n// 搜索\\nif ((!rule_x5 || (rule.Search && rule.search_url != \\\"\\\" && rule.searchFind != \\\"\\\")) && _SOU && data.length > 0) {\\n    setHistoryKeyword();\\n    let tasks = data.map(it => {\\n        return {\\n            func: function(rule) {\\n                try {\\n                    page = MY_PAGE;\\n                    baseUrl = getRuleBaseUrl(rule.search_url, keyword);\\n                    if (page == 1 || rule.search_url.match(\\\"fypage\\\")) {\\n                        eval(rule.preRule);\\n                        let searchfind = new Function(\\\"rule\\\", \\\"baseUrl\\\", \\\"keyword\\\", \\\"page\\\", rule.searchFind);\\n                        let list = searchfind(rule, baseUrl, keyword, page);\\n                        if (!list) return [];\\n                        let descTips = \\\"““””\\\" + rule.title.fontcolor(\\\"#f13b66a\\\") + \\\"&nbsp;&nbsp;\\\";\\n                        let resList = [];\\n                        for (let it of list) {\\n                            resList.push({\\n                                title: it.title.includes(\\\"““””\\\") ? it.title : \\\"““””\\\" + it.title.replace(/<\\\\/em>/g, \\\"\\\").replace(new RegExp(keyword, \\\"g\\\"), \\\"<strong><span style=\\\\\\\"color: #1E90FF\\\\\\\">\\\" + keyword + \\\"</span></strong>\\\"),\\n                                desc: descTips + (it.desc || \\\"\\\"),\\n                                url: it.url,\\n                                img: it.img || it.pic_url,\\n                                col_type: it.col_type || \\\"text_1\\\",\\n                                extra: Object.assign({\\n                                    inheritTitle: false,\\n                                    noPic: true\\n                                }, it.extra || {})\\n                            });\\n                        }\\n                        return resList;\\n                    } else {\\n                        return [];\\n                    }\\n                } catch (e) {\\n                    log(_.title + \\\":\\\" + e.toString());\\n                    return [];\\n                }\\n            },\\n            param: it,\\n            id: \\\"uckk_rule@\\\" + it.title\\n        }\\n    });\\n    batchExecute(tasks, {\\n        func: function(param, id, error, result) {\\n            param.i += 1;\\n            if (Array.isArray(result)) {\\n                deleteItem(\\\"_nothave\\\");\\n                addItemBefore(pageid, result);\\n            }\\n            if (param.i === param.all) {\\n                if (!result || !result.length) {\\n                    deleteItem(\\\"_nothave\\\");\\n                    addItemBefore(pageid, {\\n                        col_type: \\\"text_center_1\\\",\\n                        url: \\\"hiker://empty\\\",\\n                        title: \\\"““””\\\" + \\\"~~~什么资源都没有哦~~~\\\".fontcolor(\\\"Gray\\\"),\\n                        extra: {\\n                            lineVisible: false,\\n                            id: \\\"_nothave\\\"\\n                        }\\n                    });\\n                }\\n                deleteItem(pageid);\\n            } else {\\n                updateItem(pageid, {\\n                    title: \\\"加载第\\\" + MY_PAGE + \\\"页中，进度：\\\" + (param.i + 1) + \\\"/\\\" + param.all,\\n                    col_type: \\\"text_center_1\\\",\\n                    url: \\\"hiker://empty\\\"\\n                });\\n            }\\n        },\\n        param: {\\n            all: data.length,\\n            i: 0,\\n        }\\n    });\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"❹规则编辑\",\"path\":\"ruleEdit\",\"rule\":\"js:\\neval(JSON.parse(fetch('hiker://page/lib?rule=uckk云', {})).rule);\\n\\ngroup = getMyVar('group', '夸克');\\nsearch_enabled = getMyVar('search_enabled', '1') == '1';\\nexplore_enabled = getMyVar('explore_enabled', '0') == '1';\\n\\nrule_tid = getMyVar('rule_tid', '基本');\\nexplore_X5 = getMyVar('explore_X5', '0') == '1';\\ntime = Number(getMyVar(\\\"time\\\")) || new Date().getTime();\\n\\n\\n\\n\\n\\n\\n\\nd = [];\\nd.push({\\n    title: Strong(Color('<b>' + group + '资源</b>', '#ff6601')),\\n    url: $(groups.map(title => title == group ? Rich(Strong(Color(title))) : title), 2, '选择规则分组').select(() => {\\n        if (!input.match(/^‘‘’’/)) {\\n            putMyVar('group', input);\\n            refreshPage(false);\\n        }\\n        return 'hiker://empty';\\n    }),\\n    img: icons[group],\\n    col_type: 'icon_small_3'\\n});\\nd.push({\\n    title: Color('<b>启用搜索</b>', '#ff6601'),\\n    url: $('#noLoading#').lazyRule((search_enabled) => {\\n        putMyVar('search_enabled', search_enabled);\\n        refreshPage(false);\\n        return 'hiker://empty';\\n    }, search_enabled ? '0' : '1'),\\n    img: 'https://hikerfans.com/tubiao/messy/' + (search_enabled ? 55 : 63) + '.svg',\\n    col_type: 'icon_small_3'\\n});\\nd.push({\\n    title: Color('<b>启用发现</b>', '#ff6601'),\\n    url: $('#noLoading#').lazyRule((explore_enabled) => {\\n        putMyVar('explore_enabled', explore_enabled);\\n        refreshPage(false);\\n        return 'hiker://empty';\\n    }, explore_enabled ? '0' : '1'),\\n    img: 'https://hikerfans.com/tubiao/messy/' + (explore_enabled ? 55 : 63) + '.svg',\\n    col_type: 'icon_small_3'\\n});\\n\\n[\\\"基本\\\", \\\"搜索\\\", \\\"发现\\\", \\\"替换\\\", \\\"扩展\\\"].map(name => {\\n    i = rule_tid == name\\n    d.push({\\n        title: Rich(Strong(i ? Color(name) : name)),\\n        url: $('#noLoading#').lazyRule((tid, tii) => {\\n            if (tii) {\\n                putMyVar('rule_tid', tid);\\n                refreshPage(false);\\n            }\\n            return 'hiker://empty';\\n        }, name, !i),\\n        col_type: 'text_5'\\n    });\\n});\\ninput_push = (desc, id, value, json, height) => {\\n    d.push({\\n        desc: desc,\\n        title: \\\"</>\\\",\\n        url: $.toString((id) => {\\n            let group = $.require(\\\"configs?rule=uckk云\\\").getGroupNames(0, \\\"search_group\\\");\\n            if (!group.length) {\\n                return \\\"\\\";\\n            }\\n            return $(group, 3, \\\"选择规则分组\\\").select((id) => {\\n                let extra = findItem(id).extra;\\n                updateItem(id, {\\n                    extra: Object.assign(extra, {\\n                        defaultValue: input\\n                    })\\n                });\\n            }, id);\\n        }, id),\\n        col_type: 'input',\\n        extra: Object.assign({\\n            defaultValue: getMyVar(id, value),\\n            onChange: `putMyVar(\\\"${id}\\\", input)`,\\n            type: 'textarea',\\n            titleVisible: true,\\n            highlight: true,\\n            height: height || 5,\\n            id: id,\\n        }, json || {})\\n    });\\n}\\nswitch (rule_tid) {\\n    case '基本':\\n        [\\n            ['必填，源名称', 'title', ''],\\n            ['选填，源图标', 'icon', ''],\\n            ['选填，源作者', 'author', '佚名'],\\n            ['选填，JsLib', 'preRule', '', {\\n                height: 3\\n            }],\\n        ].map([a, b, c, e] => {\\n            input_push(a, b, c, e, 1);\\n        });\\n        break;\\n    case '搜索':\\n        [\\n            ['必填，搜索链接', 'search_url', ''],\\n            ['必填，搜索分组', 'search_group', '全全', {\\n                highlight: false,\\n            }],\\n            ['必填，列表规则\\\\n提供变量: baseUrl, keyword, page\\\\n\\\\n需要返回数组：return [];', 'searchFind', '', {\\n                height: 5\\n            }],\\n        ].map([a, b, c, e] => {\\n            input_push(a, b, c, e, 1);\\n        });\\n        break;\\n    case '发现':\\n        d.push({\\n            title: Strong('使用 x5_webview_single'),\\n            url: $('#noLoading#').lazyRule((explore_X5) => {\\n                putMyVar('explore_X5', explore_X5);\\n                refreshPage(false);\\n                return 'hiker://empty';\\n            }, explore_X5 ? '0' : '1'),\\n            col_type: 'text_icon',\\n            img: 'https://hikerfans.com/tubiao/messy/' + (explore_X5 ? 55 : 63) + '.svg'\\n        });\\n        [\\n            ['必填，源链接', 'url', '', {\\n                height: 1\\n            }],\\n            ['必填，列表规则\\\\n启用x5就不用写了\\\\n\\\\n继承数组d： d.push(json);', 'find_rule', ''],\\n        ].map([a, b, c, e] => {\\n            input_push(a, b, c, e);\\n        });\\n        break;\\n    case '替换':\\n        d.push({\\n            title: Strong('发现链接替换'),\\n            desc: '选填',\\n            url: 'hiker://empty',\\n            col_type: 'avatar',\\n            img: 'hiker://images/home_icon_edit'\\n        });\\n        [\\n            ['分类名称', 'class_name', ''],\\n            ['分类替换', 'class_url', ''],\\n            ['地区名称', 'area_name', ''],\\n            ['地区替换', 'area_url', ''],\\n            ['年代名称', 'year_name', ''],\\n            ['年代替换', 'year_url', ''],\\n            ['排序名称', 'sort_name', ''],\\n            ['排序替换', 'sort_url', ''],\\n        ].map([a, b, c, e] => {\\n            input_push(a, b, c, e, 1);\\n        });\\n        break;\\n    case '扩展':\\n        x5_jsLoadingInject = getMyVar('x5_jsLoadingInject', '0') == '1';\\n        x5_floatVideo = getMyVar('x5_floatVideo', '0') == '1';\\n        x5_autoPlay = getMyVar('x5_autoPlay', '0') == '1';\\n        x5_showProgress = getMyVar('x5_showProgress', '0') == '1';\\n        x5_imgLongClick = getMyVar('x5_imgLongClick', '0') == '1';\\n        x5_desc = getMyVar('x5_desc', '0') == '1';\\n\\n        d.push({\\n            title: Strong('注入js'),\\n            desc: '选填',\\n            url: 'hiker://empty',\\n            col_type: 'avatar',\\n            img: 'hiker://images/home_icon_edit'\\n        });\\n        d.push({\\n            title: '<b>网站加载中也执行</b>',\\n            url: $('#noLoading#').lazyRule((x) => {\\n                putMyVar('x5_jsLoadingInject', x);\\n                refreshPage(false);\\n                return 'hiker://empty';\\n            }, x5_jsLoadingInject ? '0' : '1'),\\n            img: 'https://hikerfans.com/tubiao/messy/' + (x5_jsLoadingInject ? 55 : 63) + '.svg',\\n            col_type: 'text_icon'\\n        });\\n        input_push(\\\"如果启用了在加载中也执行，js会执行两次，需要自行处理重复加载的问题\\\", \\\"x5_js\\\", \\\"\\\", {}, 3);\\n\\n        d.push({\\n            col_type: 'line_blank'\\n        });\\n        d.push({\\n            title: Strong('拦截资源'),\\n            desc: '选填',\\n            url: 'hiker://empty',\\n            col_type: 'avatar',\\n            img: 'hiker://images/home_icon_edit'\\n        });\\n        input_push(\\\"返回为数组，支持js，不需要return\\\\n不执行匹配的链接，让网页加载更快，规则为包含匹配，*代表任意字符（不是正则），如果想拦截不包含的可使用!!，如 ['!!test1!!$dom'] 表示链接不包含test1并且不包含网站域名那就拦截、!!$topdom不包含主域名就拦截\\\", \\\"x5_blockRules\\\", \\\"\\\");\\n        input_push(`提供变量 input，x5Url\\\\n该代码不是在网页中执行的，没有fy_bridge_app。\\\\n有返回就拦截链接，不加载网址，例：if(input.includes('/ad/')) return true\\\\n可以跳转到规则二级页面，例：\\\\nreturn $.toString((url, x5Url) => {\\n    fba.open(JSON.stringify({\\n        url: x5Url + encodeURIComponent(url)\\n    }));\\n}, input, x5Url)`, \\\"x5_urlInterceptor\\\", \\\"\\\", {}, 7);\\n        input_push(\\\"子页面规则，上面的规则可以通过x5Url跳转到这里。baseUrl是跳转的链接\\\", \\\"x5_pageHome\\\", \\\"\\\", {}, 3);\\n        d.push({\\n            col_type: 'line_blank'\\n        });\\n        d.push({\\n            title: Strong('x5设置'),\\n            desc: '一般不用管',\\n            url: 'hiker://empty',\\n            col_type: 'avatar',\\n            img: 'hiker://images/home_icon_edit'\\n        });\\n        input_push(\\\"Referer\\\", \\\"x5_referer\\\", \\\"\\\", {}, 1);\\n        input_push(\\\"UA，MOBILE_UA/PC_UA/自定义\\\", \\\"x5_ua\\\", \\\"\\\", {}, 1);\\n        d.push({\\n            title: '<b>长按图片不显示菜单</b>',\\n            url: $('#noLoading#').lazyRule((x) => {\\n                putMyVar('x5_imgLongClick', x);\\n                refreshPage(false);\\n                return 'hiker://empty';\\n            }, x5_imgLongClick ? '0' : '1'),\\n            img: 'https://hikerfans.com/tubiao/messy/' + (x5_imgLongClick ? 55 : 63) + '.svg',\\n            col_type: 'text_icon'\\n        });\\n        d.push({\\n            title: '<b>不显示进度条</b>',\\n            url: $('#noLoading#').lazyRule((x) => {\\n                putMyVar('x5_showProgress', x);\\n                refreshPage(false);\\n                return 'hiker://empty';\\n            }, x5_showProgress ? '0' : '1'),\\n            img: 'https://hikerfans.com/tubiao/messy/' + (x5_showProgress ? 55 : 63) + '.svg',\\n            col_type: 'text_icon'\\n        });\\n        d.push({\\n            title: '<b>悬浮嗅探播放</b>',\\n            url: $('#noLoading#').lazyRule((x) => {\\n                putMyVar('x5_floatVideo', x);\\n                refreshPage(false);\\n                return 'hiker://empty';\\n            }, x5_floatVideo ? '0' : '1'),\\n            img: 'https://hikerfans.com/tubiao/messy/' + (x5_floatVideo ? 55 : 63) + '.svg',\\n            col_type: 'text_icon'\\n        });\\n        d.push({\\n            title: '<b>音视频自动播放</b>',\\n            url: $('#noLoading#').lazyRule((x) => {\\n                putMyVar('x5_autoPlay', x);\\n                refreshPage(false);\\n                return 'hiker://empty';\\n            }, x5_autoPlay ? '0' : '1'),\\n            img: 'https://hikerfans.com/tubiao/messy/' + (x5_autoPlay ? 55 : 63) + '.svg',\\n            col_type: 'text_icon'\\n        });\\n        d.push({\\n            col_type: 'line_blank'\\n        });\\n        d.push({\\n            title: Strong('x5扩展'),\\n            desc: '选填',\\n            url: 'hiker://empty',\\n            col_type: 'avatar',\\n            img: 'hiker://images/home_icon_edit'\\n        });\\n        d.push({\\n            title: '<b>首页不显示搜索框</b>',\\n            url: $('#noLoading#').lazyRule((x) => {\\n                putMyVar('x5_desc', x);\\n                refreshPage(false);\\n                return 'hiker://empty';\\n            }, x5_desc ? '0' : '1'),\\n            img: 'https://hikerfans.com/tubiao/messy/' + (x5_desc ? 55 : 63) + '.svg',\\n            col_type: 'text_icon'\\n        });\\n        input_push(\\\"url，发现链接和x5链接冲突时填写\\\", \\\"x5_url\\\", \\\"\\\", {}, 1);\\n        input_push(\\\"home_js，不显示搜索框时执行。\\\\n继承数组d，内容只有规则分类。\\\\n在此基础上自定义首页吧。\\\", \\\"x5_home\\\", \\\"\\\");\\n        break;\\n}\\nd.push({\\n    col_type: 'line_blank'\\n});\\nd.push({\\n    title: Rich(Strong(Color('保存并退出'))),\\n    desc: '上次编辑：' + $.dateFormat(time, 'yyyy-MM-dd hh:mm:ss'),\\n    url: $('#noLoading#').lazyRule(() => {\\n        return $.require(\\\"tool?rule=uckk云\\\").setEdit();\\n    }),\\n    col_type: 'text_center_1',\\n    extra: {\\n        lineVisible: false\\n    }\\n});\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"❷规则文件\",\"path\":\"configs\",\"rule\":\"const rulePath = \\\"hiker://files/rules/Thomas/uckkRules.json\\\";\\nlet rules;\\n\\nfunction getJson() {\\n    if (Array.isArray(rules)) {\\n        return rules;\\n    }\\n    try {\\n        rules = JSON.parse(readFile(rulePath) || \\\"[]\\\");\\n    } catch (e) {\\n        rules = [];\\n    }\\n    if (rules.length == 0) deleteFile(rulePath);\\n    return rules;\\n}\\n\\nfunction saveJson(json) {\\n    saveFile(rulePath, JSON.stringify(json));\\n}\\n\\nfunction getJson_1(Key, Value, Type) {\\n    return getJson().filter(f => f[Key] == Value && Type);\\n}\\n\\nfunction getJson_2(M, Key) {\\n    if (Key)\\n        return saveJson(getJson().map(f => {\\n            if (md5(f.group + f.title) == M) {\\n                f[Key] = f[Key] == \\\"1\\\" ? \\\"0\\\" : \\\"1\\\";\\n            }\\n            return f;\\n        }));\\n    else\\n        return getJson().filter(v => md5(v.group + v.title) != M);\\n}\\n\\nfunction getGroupJson(Rules, Key, Value1, Value2) {\\n    return (Rules || getJson()).filter(f => f[Key] == Value1 || f[Key] == Value2 || Value1 == Value2);\\n}\\n\\nfunction getGroupNames(Rules, Key) {\\n    return Array.from(new Set((Rules || getJson()).map(f => f[Key]))).filter(v => v);\\n}\\n\\nif (!fileExist(rulePath)) {\\n    rules = [{\\n        group: \\\"综合\\\",\\n        search_enabled: \\\"1\\\",\\n        explore_enabled: \\\"1\\\",\\n\\n        title: \\\"聚搜\\\",\\n        author: \\\"Thomas喲\\\",\\n        icon: \\\"hiker://images/search\\\",\\n        preRule: \\\"\\\",\\n\\n        search_url: \\\"fypage\\\",\\n        search_group: \\\"全全\\\",\\n        searchFind: \\\"1\\\",\\n\\n        explore_X5: \\\"0\\\",\\n        url: \\\"hiker://empty\\\",\\n        find_rule: `d.push({\\n    title: '<b>历史搜索</b>'.fontcolor(\\\"#ff6601\\\"),\\n    pic_url: \\\"hiker://images/icon_find\\\",\\n    col_type: \\\"avatar\\\",\\n    url: $(\\\"确定清除全部搜索记录？\\\").confirm((id) => {\\n        clearItem(\\\"searchHistory\\\");\\n        deleteItemByCls(id + \\\":key\\\");\\n        addItemAfter(id + \\\":searchHistory\\\", {\\n            col_type: \\\"text_center_1\\\",\\n            url: \\\"hiker://empty\\\",\\n            title: \\\"““””\\\" + \\\"~~~什么都没有哦~~~\\\".fontcolor(\\\"Gray\\\"),\\n            extra: {\\n                cls: id + \\\":key\\\",\\n                lineVisible: false\\n            }\\n        });\\n    }, id),\\n    extra: {\\n        id: id + \\\":searchHistory\\\",\\n    }\\n});\\nif (history.length === 0) d.push({\\n    col_type: \\\"text_center_1\\\",\\n    url: \\\"hiker://empty\\\",\\n    title: \\\"““””\\\" + \\\"~~~什么都没有哦~~~\\\".fontcolor(\\\"Gray\\\"),\\n    extra: {\\n        cls: id + \\\":key\\\",\\n        lineVisible: false\\n    }\\n});\\nelse history.map((key, i) => {\\n    d.push({\\n        title: key,\\n        url: $(\\\"#noLoading#\\\").lazyRule((id, key) => {\\n            let extra = findItem(id + \\\":search\\\").extra;\\n            extra.defaultValue = key;\\n            updateItem({\\n                extra: extra\\n            });\\n            return \\\"hiker://empty\\\";\\n        }, id, key),\\n        col_type: \\\"flex_button\\\",\\n        extra: {\\n            id: id + \\\":key:\\\" + key,\\n            cls: id + \\\":key\\\",\\n            longClick: [{\\n                title: \\\"删除关键词:\\\" + key,\\n                js: $.toString((id, key) => {\\n                    let history = storage0.getItem(\\\"searchHistory\\\", []);\\n                    let ii = history.indexOf(key);\\n                    history.splice(ii, 1);\\n                    storage0.setItem(\\\"searchHistory\\\", history);\\n                    deleteItem(id + \\\":key:\\\" + key);\\n                    if (history.length === 0) addItemAfter(id + \\\":searchHistory\\\", {\\n                        col_type: \\\"text_center_1\\\",\\n                        url: \\\"hiker://empty\\\",\\n                        title: \\\"““””\\\" + \\\"~~~什么都没有哦~~~\\\".fontcolor(\\\"Gray\\\"),\\n                        extra: {\\n                            cls: id + \\\":key\\\",\\n                            lineVisible: false\\n                        }\\n                    });\\n                }, id, key)\\n            }]\\n        }\\n    });\\n});`,\\n\\n        class_name: \\\"\\\",\\n        class_url: \\\"\\\",\\n        area_name: \\\"\\\",\\n        area_url: \\\"\\\",\\n        year_name: \\\"\\\",\\n        year_url: \\\"\\\",\\n        sort_name: \\\"\\\",\\n        sort_url: \\\"\\\",\\n        time: 0\\n    }];\\n    saveJson(rules);\\n}\\n$.exports = {\\n    getJson,\\n    saveJson,\\n    getJson_1,\\n    getJson_2,\\n    rulePath,\\n    getGroupNames,\\n    getGroupJson\\n};\"},{\"col_type\":\"movie_3\",\"name\":\"❾跳转二级\",\"path\":\"ruleHome\",\"rule\":\"js:\\neval(JSON.parse(fetch('hiker://page/lib?rule=uckk云', {})).rule);\\nlet ruleGroup = getParam('ruleGroup', '综合');\\nlet ruleName = getParam('ruleName', '');\\nlet baseUrl = decodeURIComponent(getParam('baseUrl'));\\nlet rules = $.require(\\\"configs?rule=uckk云\\\").getGroupJson(false, \\\"group\\\", ruleGroup, \\\"综合\\\");\\nlet rule = _ = rules.find(f => f.title == ruleName);\\nif (rule != -1) {\\n    if (MY_PARAMS.home) { // 从首页跳转的\\n        d = [];\\n        baseUrl = getRuleBaseUrl(rule.url);\\n        if (_PAGE) {\\n            getRuleGroup(0, rule.search != \\\"\\\" && rule.searchFind != \\\"\\\");\\n        }\\n        eval(rule.preRule);\\n        if (_SOU && (_PAGE || rule.search_url.includes(\\\"fypage\\\"))) {\\n            setHistoryKeyword();\\n            baseUrl = getRuleBaseUrl(rule.search_url, keyword);\\n            let dd = d;\\n            searchfind = new Function(\\\"rule\\\", \\\"baseUrl\\\", \\\"keyword\\\", \\\"page\\\", rule.searchFind);\\n            list = searchfind(rule, baseUrl, keyword, page);\\n            d = dd.concat(list);\\n        } else if (!_SOU && (_PAGE || rule.url.includes(\\\"fypage\\\"))) {\\n            eval(rule.find_rule);\\n        }\\n        _PAGE ? setPreResult(d) : setResult(d);\\n        deleteItemByCls('loading_gif');\\n    } else { // 从x5跳转的\\n        eval(rule.preRule);\\n        eval(rule.x5_pageHome);\\n    }\\n} else {\\n    setResult([{\\n        title: Color('<h1 style=\\\"text-align:center;\\\">图书馆Pro</h1>', '#FEBD6F').big(),\\n        url: \\\"hiker://empty\\\",\\n        col_type: \\\"rich_text\\\"\\n    }]);\\n}\"}]","proxy":"","icon":"https://android-artworks.25pp.com/fs08/2022/07/26/7/110_19d9823817a833704d6e9b40c71da042_con_130x130.png"},{"last_chapter_rule":"","pageList":[{"col_type":"text_1","name":"ClassTab","path":"ClassTab","rule":"var {\n    QING_TITLE, title, url,\n    class_name, class_url,\n    area_name, area_url,\n    year_name, year_url,\n    sort_name, sort_url\n} = $.importParam\nconst ClassTab = function(classArray, params) {\n    Object.assign(this, params)\n    this.arr = classArray.map(v => this.init(v))\n    this.sign = '$' + QING_TITLE + '_' + (this.name || '') + '_'\n    this.color = this.color || '#12b668'\n    this.boundary = this.boundary || 'blank_block'\n}\nClassTab.prototype = {\n    constructor: ClassTab,\n    load(el) {\n        let folded = this.fold && getVar('$fold_' + this.sign, '')\n        if (this.arr.length > 1 && this.fold) el.push({\n            title: '““””' + (folded ? '▶' : '▼').fontcolor('#049eff'),\n            url: $('#noLoading#').lazyRule((sign, folded) => {\n                putVar('$fold_' + sign, folded ? '' : 'T')\n                refreshPage(false)\n                return 'hiker://empty'\n            }, this.sign, folded),\n            col_type: 'scroll_button'\n        })\n        let arr = folded ? [this.arr[0]] : this.arr\n        arr.forEach((v) => {\n            let { id, class_name, class_url } = v,\n            selected = JSON.stringify(this.getClass(id))\n            class_name.forEach((name, i) => {\n                let url = class_url[i],\n                    now = JSON.stringify({ name: name, url: url })\n                el.push({\n                    title: selected == now ? '““””' + name.fontcolor(this.color).bold() : name,\n                    url: selected == now ? 'hiker://empty' : $('#noLoading#').lazyRule((sign, id, now) => {\n                        putVar(sign + id, now)\n                        refreshPage(false)\n                        return 'hiker://empty'\n                    }, this.sign, id, now),\n                    col_type: 'scroll_button'\n                })\n            })\n            el.push({ col_type: this.boundary })\n        })\n    },\n    init(classObject) {\n        if (typeof classObject.class_name == 'string')\n            classObject.class_name = classObject.class_name.split('&')\n        if (typeof classObject.class_url == 'string')\n            classObject.class_url = classObject.class_url.split('&').map((v) => v.trim())\n        return classObject\n    },\n    push(classObject) {\n        this.arr.push(this.init(classObject))\n    },\n    getClass(id) {\n        let defaultClass = this.arr.find(item => item.id == id)\n        defaultClass = JSON.stringify(defaultClass ? {\n            name: defaultClass.class_name[0],\n            url: defaultClass.class_url[0]\n        } : { name:  'cannot find id: ' + id + ' in classTab: ' + this.sign, url: ''})\n        return JSON.parse(getVar(this.sign + id, defaultClass))\n    },\n    setUrl(url) {\n        return url.replace(/\\$\\{([^}]*)\\}/g, (_, id) => this.getClass(id).url)\n    }\n}\n// 生成头部分类\nlet fyAll = url.includes('fyAll'),\n    tabHeader = []\nif (class_name) tabHeader.push({\n    id: fyAll ? 'fyAll' : 'fyclass',\n    class_name: class_name,\n    class_url: class_url\n})\nif (area_name) tabHeader.push({\n    id: fyAll ? 'fyAll' : 'fyarea',\n    class_name: area_name,\n    class_url: area_url\n})\nif (year_name) tabHeader.push({\n    id: fyAll ? 'fyAll' : 'fyyear',\n    class_name: year_name,\n    class_url: year_url\n})\nif (sort_name) tabHeader.push({\n    id: fyAll ? 'fyAll' : 'fysort',\n    class_name: sort_name,\n    class_url: sort_url\n})\n$.exports = {\n    fyAll: fyAll,\n    tabHeader: new ClassTab(tabHeader, { name: title, fold: readFile('tabFold'), })\n}\n"},{"col_type":"icon_2_round","name":"设置","path":"Config","rule":"js:\naddListener('onClose', 'clearMyVar(\"sortFlag\");refreshPage()')\nsetPageTitle('⚙ 轻合集设置 ⚙')\nconst QING_TITLE = getMyVar('myCollection'),\n    url = getMyVar('remoteUrl')\nlet data = $.require('hiker://page/dataLoad?rule=' + QING_TITLE, true),\n    el = [{\n        title: '<b> 清除缓存，立即更新 <small> （基于远程仓库，不要频繁点击）',\n        url: $('#noLoading#').lazyRule((url) => {\n            if (url.startsWith('hiker://') || url.startsWith('file://'))\n                return 'toast://仓库为本地文件，不会进行缓存，本功能也无效'\n            deleteCache(url)\n            back(false)\n            return 'toast://已更新'\n        }, url),\n        img: 'hiker://images/icon4',\n        col_type: 'avatar'\n    }],\n    updateInterval = readFile('updateInterval') || '1',\n    newWindow = readFile('newWindow'),\n    tabFold = readFile('tabFold'),\n    disableCustom = readFile('disableCustom'),\n    editMode = disableCustom ? '导入海阔' : getMyVar('editMode', '启用/禁用')\n\nel.push({\n    title: '  💡 更新频率: ' + (updateInterval == 0 ? '手动' : updateInterval + '天') + '  ',\n    url: $(updateInterval, '输入更新间隔（天），为0则手动更新\\n本地文件链接无效').input(() => {\n        input = parseInt(input)\n        if (Number.isNaN(input)) input = 1\n        else if (input < 1) input = 0\n        saveFile('updateInterval', input.toString())\n        refreshPage()\n        return 'hiker://empty'\n    }),\n    col_type: 'scroll_button'\n}, {\n    title: '  🖥 独立首页: ' + (newWindow ? '是' : '否') + '  ',\n    url: $('#noLoading#').lazyRule((newWindow) => {\n        saveFile('newWindow', newWindow ? '' : 'T')\n        refreshPage()\n        return 'hiker://empty'\n    }, newWindow),\n    col_type: 'scroll_button'\n}, {\n    title: '  💠 分类折叠: ' + (tabFold ? '是' : '否') + '  ',\n    url: $('#noLoading#').lazyRule((tabFold) => {\n        saveFile('tabFold', tabFold ? '' : 'T')\n        refreshPage()\n        return 'hiker://empty'\n    }, tabFold),\n    col_type: 'scroll_button'\n}, {\n    title: '  💼 备份恢复  ',\n    url: $(['备份', '恢复'], 1).select((QING_TITLE, updateInterval, newWindow, tabFold, disableCustom) => {\n        let url = getMyVar('remoteUrl')\n        if (!url.startsWith('hiker://') && !url.startsWith('file://'))\n            url = 'hiker://files/libs/' + md5(url) + '.js'\n        else if (url.startsWith('hiker://page/')) url = 'hiker://empty'\n        if (input == '备份') return $('hiker://files/tmp/' + QING_TITLE + '_backup.json', '输入备份路径')\n            .input((url, updateInterval, newWindow, tabFold, disableCustom) => {\n                let rules = request(url),\n                    customData = readFile('customData')\n                writeFile(input, JSON.stringify({\n                    updateInterval: updateInterval,\n                    newWindow: newWindow,\n                    tabFold: tabFold,\n                    disableCustom: disableCustom,\n                    customData: customData,\n                    rules: rules\n                }))\n                return 'toast://已备份，注意若仓库为子页面则不备份'\n            }, url, updateInterval, newWindow, tabFold, disableCustom)\n        else return $('hiker://files/tmp/' + QING_TITLE + '_backup.json', '输入备份路径').input((url) => {\n            let { updateInterval, newWindow, tabFold, disableCustom, customData, rules } = JSON.parse(request(input))\n            saveFile('updateInterval', updateInterval)\n            saveFile('newWindow', newWindow)\n            saveFile('tabFold', tabFold)\n            saveFile('disableCustom', disableCustom)\n            saveFile('customData', customData)\n            if (rules) writeFile(url, rules)\n            refreshPage()\n            return 'toast://已恢复，如果不想同步远程仓库，可以设置更新频率为手动'\n        }, url)\n    }, QING_TITLE, updateInterval, newWindow, tabFold, disableCustom),\n    col_type: 'scroll_button'\n}, {\n    title: '““””<font color=\"#666666\"><small>特别鸣谢，小程序提供者：\\n' +\n        data.reduce((self, v) => v.author ? self.concat(v.author.split('&')) : self, [])\n        .filter((v, i, arr) => v && arr.indexOf(v) == i).join('、'),\n    url: 'hiker://empty',\n    col_type: 'text_center_1'\n})\n\nel.push({ col_type: 'line' }, {\n    title: '““””' + '📝'.small() + '&nbsp 轻合集自定义 &nbsp'.bold().fontcolor('#757575') + (disableCustom ? '❌' : '⭕').small(),\n    url: $([(disableCustom ? '启用' : '禁用') + '合集自定义', '清除自定义数据'], 1).select(() => {\n        if (input == '清除自定义数据') {\n            deleteFile('customData')\n        } else if (input == '启用合集自定义') {\n            saveFile('disableCustom', '')\n        } else {\n            saveFile('disableCustom', 'T')\n            input += '\\n小程序启用/禁用、重新排序等操作均不会体现在首页小程序列表中'\n        }\n        refreshPage(false)\n        return 'toast://已' + input\n    }),\n    col_type: 'text_center_1',\n    extra: { lineVisible: false }\n});\n(disableCustom ? ['导入海阔'] : ['启用/禁用', '重新排序', '更改图标', '导入海阔']).forEach((v) => {\n    el.push({\n        title: v == editMode ? '““””' + v.bold().fontcolor('#12b668') : v,\n        url: v == editMode ? 'hiker://empty' : $('#noLoading#').lazyRule((v) => {\n            putMyVar('editMode', v)\n            refreshPage(false)\n            return 'hiker://empty'\n        }, v),\n        col_type: 'scroll_button'\n    })\n});\nif (editMode == '导入海阔') el.push({\n    title: '全部导入',\n    url: '海阔视界￥home_rule_url￥' + (url.startsWith('hiker://') || url.startsWith('file://') ? url : 'hiker://files/libs/' + md5(url) + '.js'),\n    col_type: 'text_center_1',\n    extra: { lineVisible: false }\n});\n(disableCustom ? data : JSON.parse(readFile('customData') || '[]')).forEach((v, i) => {\n    let d = { title: v.title, img: data[i].icon }\n    switch (editMode) {\n        case '启用/禁用':\n            d.title = (v.visible ? '🟢  ' : '🔴  ') + d.title\n            d.url = $('#noLoading#').lazyRule((i) => {\n                let rules = JSON.parse(readFile('customData') || '[]')\n                rules[i].visible = !rules[i].visible\n                saveFile('customData', JSON.stringify(rules))\n                refreshPage(false)\n                return 'hiker://empty'\n            }, i)\n            break\n        case '重新排序':\n            let sortFlag = parseInt(getMyVar('sortFlag', '-1'))\n            d.title = (sortFlag == i ? '🔃  ' : '') + d.title\n            if (sortFlag == -1)\n                d.url = $('#noLoading#').lazyRule((i) => {\n                    putMyVar('sortFlag', i.toString())\n                    refreshPage(false)\n                    return 'toast://选择要移动到的位置'\n                }, i)\n            else\n                d.url = $('#noLoading#').lazyRule((oldIndex, newIndex) => {\n                    let rules = JSON.parse(readFile('customData') || '[]')\n                    rules.splice(newIndex, 0, rules.splice(oldIndex, 1)[0])\n                    saveFile('customData', JSON.stringify(rules))\n                    putMyVar('sortFlag', '-1')\n                    refreshPage(false)\n                    return 'hiker://empty'\n                }, sortFlag, i)\n            break\n        case '更改图标':\n            d.url = $(v.icon || '', '输入新图标地址或颜色代码：').input((i) => {\n                let rules = JSON.parse(readFile('customData') || '[]')\n                if (input)\n                    rules[i].icon = input\n                else\n                    delete rules[i].icon\n                saveFile('customData', JSON.stringify(rules))\n                refreshPage(false)\n                return 'hiker://empty'\n            }, i)\n            break\n        case '导入海阔':\n            d.url = $('#noLoading#').lazyRule((i) => {\n                let data = $.require('hiker://page/dataLoad?rule=' + getMyVar('myCollection'), true)\n                return 'rule://' + base64Encode(JSON.stringify(data[i]))\n            }, i)\n            break\n    }\n    el.push(d)\n})\nsetResult(el)\n"},{"col_type":"movie_3","name":"页面载入","path":"frameLoad","rule":"js:\nconst QING_TITLE = getMyVar('myCollection')\nvar myColl_el = []\neval(JSON.parse(fetch('hiker://page/hijackEnv?rule=' + QING_TITLE)).rule)\n\nif (!isIndex) {\n    if (pageTitle) setPageTitle(pageTitle)\n    setLastChapterRule(oriRULE.last_chapter_rule)\n    MY_PARAMS = MY_RULE.params\n} else if (MY_PAGE == 1) {\n    tabHeader.load(myColl_el)\n    if (RULE.search_url) myColl_el.push({\n        title: \"搜索\",\n        desc: \"这是轻合集的搜索哦~~\",\n        url: '\"hiker://search?s=\"+input',\n        extra: {\n            rules: $.toString((QING_TITLE, title) => {\n                let rules = $.require('hiker://page/dataLoad?rule=' + QING_TITLE)\n                rules = [rules.find((v) => v.title == title)]\n                return JSON.stringify(rules)\n            }, QING_TITLE, RULE.title),\n            defaultValue: getMyVar('searchKey', ''),\n            onChange: \"putMyVar('searchKey',input)\"\n        },\n        col_type: \"input\",\n    })\n}\n// 正文解析\nvar {\n    paramHandle,\n    runPreRule,\n    genExUrl,\n    hijackLazyRule\n} = $.require('hiker://page/funcTools?rule=' + QING_TITLE)\nrunPreRule(oriRULE.preRule)\nif (MY_RULE.find_rule.startsWith('js:')) {\n    let { hijackEl } = $.require('hiker://page/funcTools?rule=' + QING_TITLE)\n    setResult = function(param0, param1, param2, param3) {\n        param1 = CALLBACK_KEY\n        param2 = MY_RULE\n        param3 = MY_TYPE\n        if (Array.isArray(param0.data)) param0 = param0.data\n        Array.prototype.push.apply(myColl_el, param0.map(hijackEl))\n        method_setResult.invoke(javaContext, myColl_el, param1, param2, param3)\n    }\n    setHomeResult = setResult\n    setSearchResult = setResult\n\n    eval(MY_RULE.find_rule.slice(3))\n} else {\n    let { runCode } = $.require('hiker://page/funcTools?rule=' + QING_TITLE),\n        [_, findRule, detailFindRule] = MY_RULE.find_rule.match(/^([\\s\\S]*?)(?:==>([\\s\\S]*))?$/)\n    findRule = findRule.split(';')\n    parseDomForArray(getResCode(), findRule.shift()).forEach((data) => {\n        let [title, img, desc, url] = findRule.map((v, i) => {\n                try {\n                    if (v == '*') return ''\n                    else v = (i == 1 || i == 3) ?\n                        parseDom(data, v) :\n                        parseDomForHtml(data, v)\n                    if (i != 3) v = runCode(v)\n                    return v\n                } catch (e) { return '' }\n            }),\n            res = {\n                title: title, url: url,\n                desc: desc, img: img,\n                col_type: MY_RULE.col_type\n            }\n        if (res.url) {\n            if (res.url.includes('@lazyRule=')) {\n                let reIndex = res.url.indexOf('.js:')\n                if (reIndex >= 0) res.url = res.url.slice(0, reIndex) + '.js:' + hijackLazyRule + ';' + res.url.slice(reIndex + 4)\n            } else  if (detailFindRule) {\n                res.extra = {\n                    url: genExUrl(url),\n                    RULE: base64Encode(JSON.stringify(Object.assign(genMyRule(), { detail_find_rule: detailFindRule }))),\n                    pageTitle: isIndex && title\n                }\n                res.url = 'hiker://page/frameLoad?rule=' + QING_TITLE\n            } else if (MY_RULE.detail_find_rule) {\n                res.extra = {\n                    url: genExUrl(url),\n                    RULE: base64Encode(JSON.stringify(genMyRule())),\n                    pageTitle: isIndex && title\n                }\n                res.url = 'hiker://page/frameLoad?rule=' + QING_TITLE\n            }\n        }\n        myColl_el.push(res)\n    })\n    setResult(myColl_el)\n}\n"},{"col_type":"movie_3","name":"数据载入","path":"dataLoad","rule":"let showAll = $.importParam,\n    url = getMyVar('remoteUrl'),\n    data = []\nif (url.startsWith('hiker://') || url.startsWith('file://')) {\n    // 如果为本地文件则不进行缓存\n    try {\n        let oriData = fetch(url)\n        if (url.startsWith('hiker://page/'))\n            oriData = JSON.parse(oriData).rule\n        data = JSON.parse(oriData)\n    } catch (e) {}\n} else {\n    // 获取远程数据，检查间隔默认一天\n    let interval = parseInt(readFile('updateInterval') || '1'),\n        oldData = fetch('hiker://files/libs/' + md5(url) + '.js'),\n        remoteData = []\n    if (interval == 0) interval = -1\n    try { remoteData = JSON.parse(fetchCache(url, 24 * interval, { timeout: 50000 })) } catch (e) {}\n    if (!Array.isArray(remoteData)) remoteData = []\n    if (remoteData.length < 3) {\n        log('未获取到数据')\n        if (oldData) writeFile('hiker://files/libs/' + md5(url) + '.js', oldData)\n        data = JSON.parse(oldData || '[]')\n    } else {\n        log('已获取到数据')\n        data = remoteData\n    }\n}\ndata = data.filter((v) => v.title != getMyVar('myCollection') && !(v.author || '').includes('轻合集生成器'))\nif (readFile('disableCustom')) $.exports = data\nelse { // 写入自定义数据\n    let customData = JSON.parse(readFile('customData') || '[]'),\n        rewriteData = []\n    customData = customData.reduce((self, v) => {\n        let index = data.findIndex((vv) => v.title == vv.title)\n        if (index >= 0) {\n            self.push(v)\n            let rule = data.splice(index, 1)[0]\n            if (showAll || v.visible)\n                rewriteData.push(Object.assign(rule, v))\n        }\n        return self\n    }, [])\n    data.forEach((v) => customData.push({ title: v.title, visible: true }))\n    saveFile('customData', JSON.stringify(customData))\n    $.exports = rewriteData.concat(data)\n}\n"},{"col_type":"movie_3","name":"环境劫持","path":"hijackEnv","rule":"var { RULE, isIndex, pageTitle } = MY_PARAMS\nRULE = JSON.parse(base64Decode(RULE))\nvar oriRULE = $.require('hiker://page/dataLoad?rule=' + QING_TITLE).find((v) => v.title == RULE.title)\nif (isIndex) {\n    RULE = oriRULE\n    var { tabHeader, fyAll } = $.require('hiker://page/ClassTab?rule=' + QING_TITLE, Object.assign({ QING_TITLE: QING_TITLE }, RULE))\n    // 处理MY_RULE\n    MY_RULE.class_url = tabHeader.getClass(fyAll ? 'fyAll' : 'fyclass').url\n    MY_RULE.area_url = fyAll ? MY_RULE.class_url : tabHeader.getClass('fyarea').url\n    MY_RULE.year_url = fyAll ? MY_RULE.class_url : tabHeader.getClass('fyyear').url\n    MY_RULE.sort_url = fyAll ? MY_RULE.class_url : tabHeader.getClass('fysort').url\n    MY_RULE.url = RULE.url\n    MY_RULE.col_type = RULE.col_type\n    MY_RULE.detail_col_type = RULE.detail_col_type\n    MY_RULE.find_rule = RULE.find_rule\n    MY_RULE.detail_find_rule = RULE.detail_find_rule\n    MY_RULE.params = {}\n} else {\n    RULE.pages = oriRULE.pages\n    // 处理MY_RULE\n    MY_RULE.url = MY_PARAMS.url\n    MY_RULE.col_type = RULE.detail_col_type\n    MY_RULE.find_rule = RULE.detail_find_rule\n    MY_RULE.params = RULE.params\n}\nMY_RULE.pages = RULE.pages\nMY_RULE.pageList = JSON.parse(MY_RULE.pages || '[]')\nMY_RULE.title = RULE.title\nMY_RULE.ua = RULE.ua\n// 载入函数工具\nvar { genMyRule } = $.require('hiker://page/funcTools?rule=' + QING_TITLE, {\n    QING_TITLE: QING_TITLE,\n    MY_RULE: MY_RULE,\n    isIndex: isIndex\n})\n// 防止require多次运行\nconst myColl_required = {}\nrequire = function(param0, param1, param2, param3, param4) {\n    if (myColl_required[param0]) return\n    myColl_required[param0] = true\n    param2 = param2 != null ? param2 : 0\n    param3 = MY_TICKET\n    param4 = eval\n    return method_require.invoke(javaContext, param0, param1, param2, param3, param4)\n}\nrequireCache = function(param0, param1, param2, param3, param4, param5) {\n    if (myColl_required[param0]) return\n    myColl_required[param0] = true\n    param3 = param3 != null ? param3 : 0\n    param4 = MY_TICKET\n    param5 = eval\n    return method_requireCache.invoke(javaContext, param0, param1, param2, param3, param4, param5)\n}\nrc = requireCache\n// 最新章节规则环境劫持\nsetLastChapterRule = function(param0) {\n    if (param0.startsWith(\"js:\")) {\n        param0 = 'js:' + $.toString((QING_TITLE, MY_PARAMS) => {\n            eval(JSON.parse(fetch('hiker://page/hijackEnv?rule=' + QING_TITLE)).rule)\n            var { runPreRule } = $.require('hiker://page/funcTools?rule=' + QING_TITLE)\n            runPreRule(oriRULE.preRule)\n        }, QING_TITLE, { url: MY_RULE.url, RULE: base64Encode(JSON.stringify(genMyRule())), isIndex: isIndex }) + ';' + param0.slice(3)\n    }\n    method_setLastChapterRule.invoke(javaContext, param0)\n}\n// 动态新增函数劫持\naddItemAfter = function(param0, param1) {\n    if (Array.isArray(param1)) param1 = param1.map(hijackEl)\n    else param1 = hijackEl(param1)\n    method_addItemAfter.invoke(javaContext, param0, param1)\n}\naddItemBefore = function(param0, param1) {\n    if (Array.isArray(param1)) param1 = param1.map(hijackEl)\n    else param1 = hijackEl(param1)\n    method_addItemBefore.invoke(javaContext, param0, param1)\n}\n"},{"col_type":"movie_3","name":"函数工具","path":"funcTools","rule":"let { QING_TITLE, MY_RULE, isIndex } = $.importParam\nif (!MY_RULE) MY_RULE = {}\n\nfunction runCode(rule) {\n    try {\n        let [input, code] = rule.split('.js:')\n        return code ? eval(code) : rule\n    } catch (e) { return rule }\n}\n// 首页链接替换分类\nfunction indexUrl(param) {\n    MY_RULE = JSON.parse(base64Decode(MY_RULE))\n    let pageNum = parseInt(param.split('###')[1]),\n        url = MY_RULE.url,\n        { fyAll, tabHeader } = $.require('hiker://page/ClassTab?rule=' + QING_TITLE, Object.assign({ QING_TITLE: QING_TITLE }, MY_RULE))\n\n    url = tabHeader.setUrl(fyAll ? url.replace(/fyAll/g, '$${fyAll}') : url.replace(/fy(class|area|year|sort)/g, '$${fy$1}'))\n    url = url.replace(/fypage(?:@(-?\\d+)@)?(?:\\*(\\d+)@)?/g, (_, start, space) => parseInt(start || 0) + 1 + (pageNum - 1) * parseInt(space || 1))\n    url = /^([\\s\\S]*?)(?:\\[firstPage=([\\s\\S]*?)\\])?(?:(\\.js:[\\s\\S]*?))?$/.exec(url)\n    if (pageNum == 1 && url[2]) url[1] = url[2]\n    if (url[3] && !url[1].includes('.js:')) url[1] += url[3]\n    return runCode(url[1])\n}\n\nfunction paramHandle(urlParam, ua, urlTmp) {\n    let charset, paramTmp\n    try { // 链接的编码、UA和Referer应该是首先继承首页链接\n        [, , charset, paramTmp] = urlTmp.split(';')\n        paramTmp = paramTmp.match(/^{(.*)}$/)[1].split('&&')\n    } catch (e) { paramTmp = [] }\n    let UserAgent = paramTmp.find((v) => v.startsWith('User-Agent@')),\n        Referer = paramTmp.find((v) => v.startsWith('Referer@'))\n    urlParam[0] = urlParam[0] || 'GET'\n    urlParam[1] = urlParam[1] || charset || 'UTF-8'\n    try {\n        urlParam[2] = urlParam[2].match(/^{(.*)}$/)[1].split('&&')\n    } catch (e) { urlParam[2] = [] }\n    // 添加全局UA和上级Referer\n    if (!urlParam[2].some((v) => v.startsWith('User-Agent@'))) {\n        if (UserAgent) urlParam[2].push(UserAgent)\n        else if (ua == 'pc')\n            urlParam[2].push('User-Agent@' + PC_UA.replace(/;/g, '；；').replace(/\\?/, '？？'))\n        else if (ua == 'mobile')\n            urlParam[2].push('User-Agent@' + MOBILE_UA.replace(/;/g, '；；').replace(/\\?/, '？？'))\n    }\n    if (Referer && !urlParam[2].some((v) => v.startsWith('Referer@')))\n        urlParam[2].push(Referer)\n    urlParam[2] = '{' + urlParam[2].join('&&') + '}'\n    return urlParam.join(';')\n}\n// 预处理并初始化config\nfunction runPreRule(rule) {\n    if ((MY_PAGE == 1 || typeof MY_PAGE == 'undefined') &&\n        (isIndex || !getMyVar('$preRule_' + MY_RULE.title))) {\n        eval(rule)\n        putMyVar('$preRule_' + MY_RULE.title, 'T')\n    }\n    let _cfg = getMyVar('initConfig', '{}')\n    if (_cfg && _cfg.length > 0) {\n        config = JSON.parse(_cfg)\n    }\n}\n// 正文解析通用变量\nfunction genMyRule() {\n    let RULE = Object.assign({}, MY_RULE)\n    delete RULE.last_chapter_rule\n    delete RULE.preRule\n    delete RULE.pageList\n    delete RULE.pages\n    return RULE\n}\n\nfunction genExUrl(url) {\n    url = url.split(';')\n    return url.shift() + ';' + paramHandle(url, MY_RULE.ua, MY_RULE.url)\n}\n\nhijackLazyRule = $.toString((QING_TITLE, MY_PARAMS) => {\n    if (!MY_RULE) MY_RULE = {}\n    eval(JSON.parse(fetch('hiker://page/hijackEnv?rule=' + QING_TITLE)).rule)\n    var {\n        paramHandle,\n        genExUrl,\n        hijackLazyRule,\n        hijackEl\n    } = $.require('hiker://page/funcTools?rule=' + QING_TITLE)\n}, QING_TITLE, { url: MY_RULE.url, RULE: base64Encode(JSON.stringify(genMyRule())), isIndex: isIndex })\n\nfunction hijackEl(el) {\n    if(!el || typeof el != 'object') return\n    if (!el.extra) el.extra = {}\n    el.col_type = el.col_type || MY_RULE.col_type\n    let NOW_RULE = Object.assign(genMyRule(), { params: el.extra })\n\n    if (typeof el.url != 'string' ||\n        ['x5_webview_single', 'input'].find((v) => el.col_type == v) ||\n        ['海阔视界', 'javascript:'].find((v) => el.url.startsWith(v)) ||\n        ['rule', 'pics', 'toast', 'copy', 'editFile', 'x5', 'x5WebView', 'x5Play', 'web', 'x5Rule', 'webRule',\n            'download', 'share', 'fileSelect', 'video'].find((v) => el.url.startsWith(v + '://'))) {\n        return el\n    } else if (el.url.startsWith('input://')) {\n        let para = JSON.parse(el.url.slice(8))\n        if (para.js) para.js = hijackLazyRule + ';' + para.js\n        el.url = 'input://' + JSON.stringify(para)\n        return el\n    } else if (el.url.startsWith('confirm://')) {\n        let reIndex = el.url.indexOf('.js:')\n        if (reIndex >= 0) el.url = el.url.slice(0, reIndex) + '.js:' + hijackLazyRule + ';' + el.url.slice(reIndex + 4)\n        return el\n    } else if (el.url.startsWith('select://')) {\n        let para = JSON.parse(el.url.slice(9))\n        if (para.js) para.js = hijackLazyRule + ';' + para.js\n        el.url = 'select://' + JSON.stringify(para)\n        return el\n    } else if (el.url.includes('@rule=')) {\n        let [_, url, rule] = el.url.match(/^([\\s\\S]*?)@rule=([\\s\\S]*)$/)\n        el.url = url\n        NOW_RULE.detail_find_rule = rule\n        NOW_RULE.detail_col_type = MY_RULE.col_type\n    } else if (el.url.startsWith('hiker://page/')) {\n        if (el.url.includes('rule=') || el.extra.rule)\n            return el\n        let [_, path, flag, params] = el.url.match(/^hiker:\\/\\/page\\/(.+?)(#.*?)?(?:\\?(.*))?$/),\n            subPage = MY_RULE.pageList.find((v) => v.path == path),\n            subUrl = (params || '').split('&').find((v) => v.startsWith('url='))\n        el.url = (subUrl ? subUrl.slice(4).replace(/？？/g, '?').replace(/＆＆/g, '&') : (el.extra || {}).url) || 'hiker://empty' + flag + '?' + (params || '')\n        NOW_RULE.detail_find_rule = subPage.rule\n        NOW_RULE.detail_col_type = subPage.col_type\n    } else if (el.url.includes('@lazyRule=')) {\n        let reIndex = el.url.indexOf('.js:')\n        if (reIndex >= 0) el.url = el.url.slice(0, reIndex) + '.js:' + hijackLazyRule + ';' + el.url.slice(reIndex + 4)\n        return el\n    } else if (isIndex) {\n        if (!MY_RULE.detail_find_rule || /hiker:\\/\\/(?!empty.+$)/.test(el.url)) return el\n    } else {\n        return el\n    }\n    el.extra = Object.assign({}, el.extra, {\n        url: genExUrl(el.url),\n        RULE: base64Encode(JSON.stringify(NOW_RULE)),\n        pageTitle: isIndex && el.title\n    })\n    el.url = 'hiker://page/frameLoad?rule=' + QING_TITLE\n    return el\n}\n$.exports = {\n    runCode: runCode,\n    indexUrl: indexUrl,\n    paramHandle: paramHandle,\n    runPreRule: runPreRule,\n    genMyRule: genMyRule,\n    genExUrl: genExUrl,\n    hijackLazyRule: hijackLazyRule,\n    hijackEl: hijackEl\n}\n"},{"col_type":"movie_3","name":"更新","path":"更新","rule":"if (getMyVar('qx', '1') != 0) {\n    var uplink = 'http://hiker.nokia.press/hikerule/rulelist.json?id=4765'\n    let newVersion;\n    let myVersion = MY_RULE.version == 0 ? 20240329 : MY_RULE.version;\n    try {\n        newVersion = JSON.parse(fetchCache(uplink, 24, {\n            timeout: 1000\n        })).version;\n        log(newVersion)\n    } catch (e) {\n        newVersion = myVersion;\n    }\n    let isUpdate = Number(newVersion) > Number(myVersion);\n    if (isUpdate) {\n        log('有新版本:' + newVersion + ',当前:' + myVersion);\n        confirm({\n            title: '更新提示',\n            content: '检测到你的规则版本小于服务器版本，是否立即更新？',\n            confirm: $.toString((uplink) => {\n                return `海阔视界首页频道规则￥home_rule_url￥${uplink}`\n            }, uplink),\n            cancel: $.toString(() => {\n                return putMyVar('qx', '0')\n            })\n        })\n    }\n}"}],"title":"轻合集.缘分","author":"缘分","version":20240329,"type":"all","url":"hiker://empty","col_type":"icon_round_small_4","class_name":"","class_url":"","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:\nconst QING_TITLE = getMyVar('myCollection'),\n    newWindow = readFile('newWindow'),\n    typeShow = getMyVar('typeShow', '@'),\n    types = { 'all': '聚合', 'video': '视频🎋', 'music': '音频🍂', 'live': '直播🍁', 'cartoon': '漫画🌾', 'read': '阅读🌺', 'picture': '图集🌻', 'news': '资讯🌿', 'tool': '工具🎄', 'other': '其它🍀' }\nlet el = [{\n        title: ' ' + QING_TITLE.bold() + ' &nbsp &nbsp ' + '⚙ 轻合集设置 ⚙ &nbsp '.small() + getVar('gx', '').small(),\n        url: 'hiker://page/Config?rule=' + QING_TITLE + '&#noRecordHistory#',\n        img: MY_RULE.icon || 'hiker://images/icon1',\n        col_type: 'avatar'\n    }, {\n        url: '\"hiker://search?s=\"+input',\n        desc: '这是轻合集的搜索哦~~',\n        title: '搜索',\n        col_type: 'input',\n        extra: {\n            rules: $.toString((QING_TITLE, typeShow) => {\n                let rules = $.require('hiker://page/dataLoad?rule=' + QING_TITLE)\n                if (typeShow[0] == '@') {\n                    let filterKey = typeShow.slice(1)\n                    if (filterKey) rules = rules.filter((v) => v.title.includes(filterKey))\n                } else rules = rules.filter((v) => v.type == typeShow)\n                return JSON.stringify(rules)\n            }, QING_TITLE, typeShow),\n            defaultValue: getMyVar('searchKey', ''),\n            onChange: \"putMyVar('searchKey',input)\"\n        }\n    }],\n    rules = $.require('hiker://page/dataLoad?rule=' + QING_TITLE),\n    rulesType = rules.reduce((obj, v) => {\n        let type = v.type\n        if (type) {\n            if (!Array.isArray(obj[type]))\n                obj[type] = []\n            obj[type].push(v)\n        }\n        return obj\n    }, {})\nif (typeShow[0] == '@') {\n    let filterKey = typeShow.slice(1)\n    if (filterKey) rules = rules.filter((v) => v.title.includes(filterKey))\n}\nel.push(typeShow[0] == '@' ? {\n    title: '““””' + ('全部🌸' + (typeShow[1] ? '[' + typeShow.slice(1) + ']' : '')).bold().fontcolor('#12b668') + ' ' + (rules.length).toString().small(),\n    url: $(typeShow.slice(5), '查找小程序关键词').input(() => {\n        putMyVar('typeShow', '@' + input)\n        refreshPage(false)\n        return 'hiker://empty'\n    }),\n    col_type: 'scroll_button'\n} : {\n    title: '““””全部🌸 ' + (rules.length).toString().small(),\n    url: $('#noLoading#').lazyRule(() => {\n        putMyVar('typeShow', '@')\n        refreshPage(false)\n        return 'toast://再次点击【全部】可查找小程序'\n    }),\n    col_type: 'scroll_button'\n})\nfor (let k in types)\n    if (k in rulesType)\n        el.push({\n            title: '““””' + (k == typeShow ? types[k].bold().fontcolor('#12b668') : types[k]) + ' ' + (rulesType[k].length).toString().small(),\n            url: k == typeShow ? 'hiker://empty' : $('#noLoading#').lazyRule((k) => {\n                putMyVar('typeShow', k)\n                refreshPage(false)\n                return 'hiker://empty'\n            }, k),\n            col_type: 'scroll_button'\n        })\n\nif (typeShow[0] != '@') rules = rulesType[typeShow]\nlet { paramHandle } = $.require('hiker://page/funcTools?rule=' + QING_TITLE, {})\nrules.forEach((v) => {\n    let urlParam = v.url.split(';'),\n        ruleTmp = {\n            title: v.title, url: urlParam.shift(),\n            class_name: v.class_name, class_url: v.class_url,\n            area_name: v.area_name, area_url: v.area_url,\n            year_name: v.year_name, year_url: v.year_url,\n            sort_name: v.sort_name, sort_url: v.sort_url\n        },\n        fypage = ruleTmp.url.includes('fypage') ? 'fypage' : '1',\n        domain = (/^https?:\\/\\/[^/?#]+/i.exec(ruleTmp.url) || ['hiker://empty'])[0],\n        d = {\n            title: v.title,\n            url: 'hiker://page/frameLoad',\n            img: v.icon || 'hiker://images/icon1',\n            extra: {\n                url: domain + '/#noHistory##noRecordHistory####' + fypage +\n                    '.js:let { runCode, indexUrl } = $.require(\"hiker://page/funcTools？？rule=' + QING_TITLE + '\", '\n                     + JSON.stringify({\n                        MY_RULE: base64Encode(JSON.stringify(ruleTmp)),\n                        QING_TITLE: QING_TITLE\n                    }) + ')；；indexUrl(input);' + paramHandle(urlParam, v.ua),\n                RULE: base64Encode(JSON.stringify({ title: v.title })),\n                isIndex: true\n            }\n        }\n    if (newWindow) Object.assign(d.extra, {\n        newWindow: true,\n        windowId: QING_TITLE + '_' + d.title\n    })\n    el.push(d)\n$.require(\"hiker://page/更新?rule=轻合集.缘分\")\n})\nsetResult(el)\n","searchFind":"js:\nsetResult([{\n    title: \"点我开始轻合集•视界聚搜\",\n    url: \"hiker://search?s=\" + getParam(\"keyword\"),\n    extra: {\n        rules: $.toString(() => {\n            const QING_TITLE = getMyVar('myCollection'),\n                typeShow = getMyVar('typeShow', '@')\n            let rules = $.require('hiker://page/dataLoad?rule=' + QING_TITLE)\n            if (typeShow[0] == '@') {\n                let filterKey = typeShow.slice(1)\n                if (filterKey) rules = rules.filter((v) => v.title.includes(filterKey))\n            } else rules = rules.filter((v) => v.type == typeShow)\n            return JSON.stringify(rules)\n        })\n    }\n}])\n","search_url":"hiker://empty?keyword=**","group":"①推荐","detail_col_type":"movie_1","detail_find_rule":"","sdetail_col_type":"movie_1","sdetail_find_rule":"","ua":"mobile","preRule":"putMyVar('myCollection', MY_RULE.title)\nvar JiaSu = 'https://github.moeyy.xyz/';\nvar Url = 'https://gitlab.com/liuzaoyue/l/-/raw/main/share-home-rules.json';\nvar Url1 = 'https://gitcode.net/liuzaoyue/hai/-/raw/master/share-home-rules.json';\nvar Url2 = JiaSu + 'https://raw.githubusercontent.com/liuzaoyue/haikuo/master/share-home-rules.json';\nputMyVar('remoteUrl', Url1)","pages":"[{\"col_type\":\"text_1\",\"name\":\"ClassTab\",\"path\":\"ClassTab\",\"rule\":\"var {\\n    QING_TITLE, title, url,\\n    class_name, class_url,\\n    area_name, area_url,\\n    year_name, year_url,\\n    sort_name, sort_url\\n} = $.importParam\\nconst ClassTab = function(classArray, params) {\\n    Object.assign(this, params)\\n    this.arr = classArray.map(v => this.init(v))\\n    this.sign = '$' + QING_TITLE + '_' + (this.name || '') + '_'\\n    this.color = this.color || '#12b668'\\n    this.boundary = this.boundary || 'blank_block'\\n}\\nClassTab.prototype = {\\n    constructor: ClassTab,\\n    load(el) {\\n        let folded = this.fold && getVar('$fold_' + this.sign, '')\\n        if (this.arr.length > 1 && this.fold) el.push({\\n            title: '““””' + (folded ? '▶' : '▼').fontcolor('#049eff'),\\n            url: $('#noLoading#').lazyRule((sign, folded) => {\\n                putVar('$fold_' + sign, folded ? '' : 'T')\\n                refreshPage(false)\\n                return 'hiker://empty'\\n            }, this.sign, folded),\\n            col_type: 'scroll_button'\\n        })\\n        let arr = folded ? [this.arr[0]] : this.arr\\n        arr.forEach((v) => {\\n            let { id, class_name, class_url } = v,\\n            selected = JSON.stringify(this.getClass(id))\\n            class_name.forEach((name, i) => {\\n                let url = class_url[i],\\n                    now = JSON.stringify({ name: name, url: url })\\n                el.push({\\n                    title: selected == now ? '““””' + name.fontcolor(this.color).bold() : name,\\n                    url: selected == now ? 'hiker://empty' : $('#noLoading#').lazyRule((sign, id, now) => {\\n                        putVar(sign + id, now)\\n                        refreshPage(false)\\n                        return 'hiker://empty'\\n                    }, this.sign, id, now),\\n                    col_type: 'scroll_button'\\n                })\\n            })\\n            el.push({ col_type: this.boundary })\\n        })\\n    },\\n    init(classObject) {\\n        if (typeof classObject.class_name == 'string')\\n            classObject.class_name = classObject.class_name.split('&')\\n        if (typeof classObject.class_url == 'string')\\n            classObject.class_url = classObject.class_url.split('&').map((v) => v.trim())\\n        return classObject\\n    },\\n    push(classObject) {\\n        this.arr.push(this.init(classObject))\\n    },\\n    getClass(id) {\\n        let defaultClass = this.arr.find(item => item.id == id)\\n        defaultClass = JSON.stringify(defaultClass ? {\\n            name: defaultClass.class_name[0],\\n            url: defaultClass.class_url[0]\\n        } : { name:  'cannot find id: ' + id + ' in classTab: ' + this.sign, url: ''})\\n        return JSON.parse(getVar(this.sign + id, defaultClass))\\n    },\\n    setUrl(url) {\\n        return url.replace(/\\\\$\\\\{([^}]*)\\\\}/g, (_, id) => this.getClass(id).url)\\n    }\\n}\\n// 生成头部分类\\nlet fyAll = url.includes('fyAll'),\\n    tabHeader = []\\nif (class_name) tabHeader.push({\\n    id: fyAll ? 'fyAll' : 'fyclass',\\n    class_name: class_name,\\n    class_url: class_url\\n})\\nif (area_name) tabHeader.push({\\n    id: fyAll ? 'fyAll' : 'fyarea',\\n    class_name: area_name,\\n    class_url: area_url\\n})\\nif (year_name) tabHeader.push({\\n    id: fyAll ? 'fyAll' : 'fyyear',\\n    class_name: year_name,\\n    class_url: year_url\\n})\\nif (sort_name) tabHeader.push({\\n    id: fyAll ? 'fyAll' : 'fysort',\\n    class_name: sort_name,\\n    class_url: sort_url\\n})\\n$.exports = {\\n    fyAll: fyAll,\\n    tabHeader: new ClassTab(tabHeader, { name: title, fold: readFile('tabFold'), })\\n}\\n\"},{\"col_type\":\"icon_2_round\",\"name\":\"设置\",\"path\":\"Config\",\"rule\":\"js:\\naddListener('onClose', 'clearMyVar(\\\"sortFlag\\\");refreshPage()')\\nsetPageTitle('⚙ 轻合集设置 ⚙')\\nconst QING_TITLE = getMyVar('myCollection'),\\n    url = getMyVar('remoteUrl')\\nlet data = $.require('hiker://page/dataLoad?rule=' + QING_TITLE, true),\\n    el = [{\\n        title: '<b> 清除缓存，立即更新 <small> （基于远程仓库，不要频繁点击）',\\n        url: $('#noLoading#').lazyRule((url) => {\\n            if (url.startsWith('hiker://') || url.startsWith('file://'))\\n                return 'toast://仓库为本地文件，不会进行缓存，本功能也无效'\\n            deleteCache(url)\\n            back(false)\\n            return 'toast://已更新'\\n        }, url),\\n        img: 'hiker://images/icon4',\\n        col_type: 'avatar'\\n    }],\\n    updateInterval = readFile('updateInterval') || '1',\\n    newWindow = readFile('newWindow'),\\n    tabFold = readFile('tabFold'),\\n    disableCustom = readFile('disableCustom'),\\n    editMode = disableCustom ? '导入海阔' : getMyVar('editMode', '启用/禁用')\\n\\nel.push({\\n    title: '  💡 更新频率: ' + (updateInterval == 0 ? '手动' : updateInterval + '天') + '  ',\\n    url: $(updateInterval, '输入更新间隔（天），为0则手动更新\\\\n本地文件链接无效').input(() => {\\n        input = parseInt(input)\\n        if (Number.isNaN(input)) input = 1\\n        else if (input < 1) input = 0\\n        saveFile('updateInterval', input.toString())\\n        refreshPage()\\n        return 'hiker://empty'\\n    }),\\n    col_type: 'scroll_button'\\n}, {\\n    title: '  🖥 独立首页: ' + (newWindow ? '是' : '否') + '  ',\\n    url: $('#noLoading#').lazyRule((newWindow) => {\\n        saveFile('newWindow', newWindow ? '' : 'T')\\n        refreshPage()\\n        return 'hiker://empty'\\n    }, newWindow),\\n    col_type: 'scroll_button'\\n}, {\\n    title: '  💠 分类折叠: ' + (tabFold ? '是' : '否') + '  ',\\n    url: $('#noLoading#').lazyRule((tabFold) => {\\n        saveFile('tabFold', tabFold ? '' : 'T')\\n        refreshPage()\\n        return 'hiker://empty'\\n    }, tabFold),\\n    col_type: 'scroll_button'\\n}, {\\n    title: '  💼 备份恢复  ',\\n    url: $(['备份', '恢复'], 1).select((QING_TITLE, updateInterval, newWindow, tabFold, disableCustom) => {\\n        let url = getMyVar('remoteUrl')\\n        if (!url.startsWith('hiker://') && !url.startsWith('file://'))\\n            url = 'hiker://files/libs/' + md5(url) + '.js'\\n        else if (url.startsWith('hiker://page/')) url = 'hiker://empty'\\n        if (input == '备份') return $('hiker://files/tmp/' + QING_TITLE + '_backup.json', '输入备份路径')\\n            .input((url, updateInterval, newWindow, tabFold, disableCustom) => {\\n                let rules = request(url),\\n                    customData = readFile('customData')\\n                writeFile(input, JSON.stringify({\\n                    updateInterval: updateInterval,\\n                    newWindow: newWindow,\\n                    tabFold: tabFold,\\n                    disableCustom: disableCustom,\\n                    customData: customData,\\n                    rules: rules\\n                }))\\n                return 'toast://已备份，注意若仓库为子页面则不备份'\\n            }, url, updateInterval, newWindow, tabFold, disableCustom)\\n        else return $('hiker://files/tmp/' + QING_TITLE + '_backup.json', '输入备份路径').input((url) => {\\n            let { updateInterval, newWindow, tabFold, disableCustom, customData, rules } = JSON.parse(request(input))\\n            saveFile('updateInterval', updateInterval)\\n            saveFile('newWindow', newWindow)\\n            saveFile('tabFold', tabFold)\\n            saveFile('disableCustom', disableCustom)\\n            saveFile('customData', customData)\\n            if (rules) writeFile(url, rules)\\n            refreshPage()\\n            return 'toast://已恢复，如果不想同步远程仓库，可以设置更新频率为手动'\\n        }, url)\\n    }, QING_TITLE, updateInterval, newWindow, tabFold, disableCustom),\\n    col_type: 'scroll_button'\\n}, {\\n    title: '““””<font color=\\\"#666666\\\"><small>特别鸣谢，小程序提供者：\\\\n' +\\n        data.reduce((self, v) => v.author ? self.concat(v.author.split('&')) : self, [])\\n        .filter((v, i, arr) => v && arr.indexOf(v) == i).join('、'),\\n    url: 'hiker://empty',\\n    col_type: 'text_center_1'\\n})\\n\\nel.push({ col_type: 'line' }, {\\n    title: '““””' + '📝'.small() + '&nbsp 轻合集自定义 &nbsp'.bold().fontcolor('#757575') + (disableCustom ? '❌' : '⭕').small(),\\n    url: $([(disableCustom ? '启用' : '禁用') + '合集自定义', '清除自定义数据'], 1).select(() => {\\n        if (input == '清除自定义数据') {\\n            deleteFile('customData')\\n        } else if (input == '启用合集自定义') {\\n            saveFile('disableCustom', '')\\n        } else {\\n            saveFile('disableCustom', 'T')\\n            input += '\\\\n小程序启用/禁用、重新排序等操作均不会体现在首页小程序列表中'\\n        }\\n        refreshPage(false)\\n        return 'toast://已' + input\\n    }),\\n    col_type: 'text_center_1',\\n    extra: { lineVisible: false }\\n});\\n(disableCustom ? ['导入海阔'] : ['启用/禁用', '重新排序', '更改图标', '导入海阔']).forEach((v) => {\\n    el.push({\\n        title: v == editMode ? '““””' + v.bold().fontcolor('#12b668') : v,\\n        url: v == editMode ? 'hiker://empty' : $('#noLoading#').lazyRule((v) => {\\n            putMyVar('editMode', v)\\n            refreshPage(false)\\n            return 'hiker://empty'\\n        }, v),\\n        col_type: 'scroll_button'\\n    })\\n});\\nif (editMode == '导入海阔') el.push({\\n    title: '全部导入',\\n    url: '海阔视界￥home_rule_url￥' + (url.startsWith('hiker://') || url.startsWith('file://') ? url : 'hiker://files/libs/' + md5(url) + '.js'),\\n    col_type: 'text_center_1',\\n    extra: { lineVisible: false }\\n});\\n(disableCustom ? data : JSON.parse(readFile('customData') || '[]')).forEach((v, i) => {\\n    let d = { title: v.title, img: data[i].icon }\\n    switch (editMode) {\\n        case '启用/禁用':\\n            d.title = (v.visible ? '🟢  ' : '🔴  ') + d.title\\n            d.url = $('#noLoading#').lazyRule((i) => {\\n                let rules = JSON.parse(readFile('customData') || '[]')\\n                rules[i].visible = !rules[i].visible\\n                saveFile('customData', JSON.stringify(rules))\\n                refreshPage(false)\\n                return 'hiker://empty'\\n            }, i)\\n            break\\n        case '重新排序':\\n            let sortFlag = parseInt(getMyVar('sortFlag', '-1'))\\n            d.title = (sortFlag == i ? '🔃  ' : '') + d.title\\n            if (sortFlag == -1)\\n                d.url = $('#noLoading#').lazyRule((i) => {\\n                    putMyVar('sortFlag', i.toString())\\n                    refreshPage(false)\\n                    return 'toast://选择要移动到的位置'\\n                }, i)\\n            else\\n                d.url = $('#noLoading#').lazyRule((oldIndex, newIndex) => {\\n                    let rules = JSON.parse(readFile('customData') || '[]')\\n                    rules.splice(newIndex, 0, rules.splice(oldIndex, 1)[0])\\n                    saveFile('customData', JSON.stringify(rules))\\n                    putMyVar('sortFlag', '-1')\\n                    refreshPage(false)\\n                    return 'hiker://empty'\\n                }, sortFlag, i)\\n            break\\n        case '更改图标':\\n            d.url = $(v.icon || '', '输入新图标地址或颜色代码：').input((i) => {\\n                let rules = JSON.parse(readFile('customData') || '[]')\\n                if (input)\\n                    rules[i].icon = input\\n                else\\n                    delete rules[i].icon\\n                saveFile('customData', JSON.stringify(rules))\\n                refreshPage(false)\\n                return 'hiker://empty'\\n            }, i)\\n            break\\n        case '导入海阔':\\n            d.url = $('#noLoading#').lazyRule((i) => {\\n                let data = $.require('hiker://page/dataLoad?rule=' + getMyVar('myCollection'), true)\\n                return 'rule://' + base64Encode(JSON.stringify(data[i]))\\n            }, i)\\n            break\\n    }\\n    el.push(d)\\n})\\nsetResult(el)\\n\"},{\"col_type\":\"movie_3\",\"name\":\"页面载入\",\"path\":\"frameLoad\",\"rule\":\"js:\\nconst QING_TITLE = getMyVar('myCollection')\\nvar myColl_el = []\\neval(JSON.parse(fetch('hiker://page/hijackEnv?rule=' + QING_TITLE)).rule)\\n\\nif (!isIndex) {\\n    if (pageTitle) setPageTitle(pageTitle)\\n    setLastChapterRule(oriRULE.last_chapter_rule)\\n    MY_PARAMS = MY_RULE.params\\n} else if (MY_PAGE == 1) {\\n    tabHeader.load(myColl_el)\\n    if (RULE.search_url) myColl_el.push({\\n        title: \\\"搜索\\\",\\n        desc: \\\"这是轻合集的搜索哦~~\\\",\\n        url: '\\\"hiker://search?s=\\\"+input',\\n        extra: {\\n            rules: $.toString((QING_TITLE, title) => {\\n                let rules = $.require('hiker://page/dataLoad?rule=' + QING_TITLE)\\n                rules = [rules.find((v) => v.title == title)]\\n                return JSON.stringify(rules)\\n            }, QING_TITLE, RULE.title),\\n            defaultValue: getMyVar('searchKey', ''),\\n            onChange: \\\"putMyVar('searchKey',input)\\\"\\n        },\\n        col_type: \\\"input\\\",\\n    })\\n}\\n// 正文解析\\nvar {\\n    paramHandle,\\n    runPreRule,\\n    genExUrl,\\n    hijackLazyRule\\n} = $.require('hiker://page/funcTools?rule=' + QING_TITLE)\\nrunPreRule(oriRULE.preRule)\\nif (MY_RULE.find_rule.startsWith('js:')) {\\n    let { hijackEl } = $.require('hiker://page/funcTools?rule=' + QING_TITLE)\\n    setResult = function(param0, param1, param2, param3) {\\n        param1 = CALLBACK_KEY\\n        param2 = MY_RULE\\n        param3 = MY_TYPE\\n        if (Array.isArray(param0.data)) param0 = param0.data\\n        Array.prototype.push.apply(myColl_el, param0.map(hijackEl))\\n        method_setResult.invoke(javaContext, myColl_el, param1, param2, param3)\\n    }\\n    setHomeResult = setResult\\n    setSearchResult = setResult\\n\\n    eval(MY_RULE.find_rule.slice(3))\\n} else {\\n    let { runCode } = $.require('hiker://page/funcTools?rule=' + QING_TITLE),\\n        [_, findRule, detailFindRule] = MY_RULE.find_rule.match(/^([\\\\s\\\\S]*?)(?:==>([\\\\s\\\\S]*))?$/)\\n    findRule = findRule.split(';')\\n    parseDomForArray(getResCode(), findRule.shift()).forEach((data) => {\\n        let [title, img, desc, url] = findRule.map((v, i) => {\\n                try {\\n                    if (v == '*') return ''\\n                    else v = (i == 1 || i == 3) ?\\n                        parseDom(data, v) :\\n                        parseDomForHtml(data, v)\\n                    if (i != 3) v = runCode(v)\\n                    return v\\n                } catch (e) { return '' }\\n            }),\\n            res = {\\n                title: title, url: url,\\n                desc: desc, img: img,\\n                col_type: MY_RULE.col_type\\n            }\\n        if (res.url) {\\n            if (res.url.includes('@lazyRule=')) {\\n                let reIndex = res.url.indexOf('.js:')\\n                if (reIndex >= 0) res.url = res.url.slice(0, reIndex) + '.js:' + hijackLazyRule + ';' + res.url.slice(reIndex + 4)\\n            } else  if (detailFindRule) {\\n                res.extra = {\\n                    url: genExUrl(url),\\n                    RULE: base64Encode(JSON.stringify(Object.assign(genMyRule(), { detail_find_rule: detailFindRule }))),\\n                    pageTitle: isIndex && title\\n                }\\n                res.url = 'hiker://page/frameLoad?rule=' + QING_TITLE\\n            } else if (MY_RULE.detail_find_rule) {\\n                res.extra = {\\n                    url: genExUrl(url),\\n                    RULE: base64Encode(JSON.stringify(genMyRule())),\\n                    pageTitle: isIndex && title\\n                }\\n                res.url = 'hiker://page/frameLoad?rule=' + QING_TITLE\\n            }\\n        }\\n        myColl_el.push(res)\\n    })\\n    setResult(myColl_el)\\n}\\n\"},{\"col_type\":\"movie_3\",\"name\":\"数据载入\",\"path\":\"dataLoad\",\"rule\":\"let showAll = $.importParam,\\n    url = getMyVar('remoteUrl'),\\n    data = []\\nif (url.startsWith('hiker://') || url.startsWith('file://')) {\\n    // 如果为本地文件则不进行缓存\\n    try {\\n        let oriData = fetch(url)\\n        if (url.startsWith('hiker://page/'))\\n            oriData = JSON.parse(oriData).rule\\n        data = JSON.parse(oriData)\\n    } catch (e) {}\\n} else {\\n    // 获取远程数据，检查间隔默认一天\\n    let interval = parseInt(readFile('updateInterval') || '1'),\\n        oldData = fetch('hiker://files/libs/' + md5(url) + '.js'),\\n        remoteData = []\\n    if (interval == 0) interval = -1\\n    try { remoteData = JSON.parse(fetchCache(url, 24 * interval, { timeout: 50000 })) } catch (e) {}\\n    if (!Array.isArray(remoteData)) remoteData = []\\n    if (remoteData.length < 3) {\\n        log('未获取到数据')\\n        if (oldData) writeFile('hiker://files/libs/' + md5(url) + '.js', oldData)\\n        data = JSON.parse(oldData || '[]')\\n    } else {\\n        log('已获取到数据')\\n        data = remoteData\\n    }\\n}\\ndata = data.filter((v) => v.title != getMyVar('myCollection') && !(v.author || '').includes('轻合集生成器'))\\nif (readFile('disableCustom')) $.exports = data\\nelse { // 写入自定义数据\\n    let customData = JSON.parse(readFile('customData') || '[]'),\\n        rewriteData = []\\n    customData = customData.reduce((self, v) => {\\n        let index = data.findIndex((vv) => v.title == vv.title)\\n        if (index >= 0) {\\n            self.push(v)\\n            let rule = data.splice(index, 1)[0]\\n            if (showAll || v.visible)\\n                rewriteData.push(Object.assign(rule, v))\\n        }\\n        return self\\n    }, [])\\n    data.forEach((v) => customData.push({ title: v.title, visible: true }))\\n    saveFile('customData', JSON.stringify(customData))\\n    $.exports = rewriteData.concat(data)\\n}\\n\"},{\"col_type\":\"movie_3\",\"name\":\"环境劫持\",\"path\":\"hijackEnv\",\"rule\":\"var { RULE, isIndex, pageTitle } = MY_PARAMS\\nRULE = JSON.parse(base64Decode(RULE))\\nvar oriRULE = $.require('hiker://page/dataLoad?rule=' + QING_TITLE).find((v) => v.title == RULE.title)\\nif (isIndex) {\\n    RULE = oriRULE\\n    var { tabHeader, fyAll } = $.require('hiker://page/ClassTab?rule=' + QING_TITLE, Object.assign({ QING_TITLE: QING_TITLE }, RULE))\\n    // 处理MY_RULE\\n    MY_RULE.class_url = tabHeader.getClass(fyAll ? 'fyAll' : 'fyclass').url\\n    MY_RULE.area_url = fyAll ? MY_RULE.class_url : tabHeader.getClass('fyarea').url\\n    MY_RULE.year_url = fyAll ? MY_RULE.class_url : tabHeader.getClass('fyyear').url\\n    MY_RULE.sort_url = fyAll ? MY_RULE.class_url : tabHeader.getClass('fysort').url\\n    MY_RULE.url = RULE.url\\n    MY_RULE.col_type = RULE.col_type\\n    MY_RULE.detail_col_type = RULE.detail_col_type\\n    MY_RULE.find_rule = RULE.find_rule\\n    MY_RULE.detail_find_rule = RULE.detail_find_rule\\n    MY_RULE.params = {}\\n} else {\\n    RULE.pages = oriRULE.pages\\n    // 处理MY_RULE\\n    MY_RULE.url = MY_PARAMS.url\\n    MY_RULE.col_type = RULE.detail_col_type\\n    MY_RULE.find_rule = RULE.detail_find_rule\\n    MY_RULE.params = RULE.params\\n}\\nMY_RULE.pages = RULE.pages\\nMY_RULE.pageList = JSON.parse(MY_RULE.pages || '[]')\\nMY_RULE.title = RULE.title\\nMY_RULE.ua = RULE.ua\\n// 载入函数工具\\nvar { genMyRule } = $.require('hiker://page/funcTools?rule=' + QING_TITLE, {\\n    QING_TITLE: QING_TITLE,\\n    MY_RULE: MY_RULE,\\n    isIndex: isIndex\\n})\\n// 防止require多次运行\\nconst myColl_required = {}\\nrequire = function(param0, param1, param2, param3, param4) {\\n    if (myColl_required[param0]) return\\n    myColl_required[param0] = true\\n    param2 = param2 != null ? param2 : 0\\n    param3 = MY_TICKET\\n    param4 = eval\\n    return method_require.invoke(javaContext, param0, param1, param2, param3, param4)\\n}\\nrequireCache = function(param0, param1, param2, param3, param4, param5) {\\n    if (myColl_required[param0]) return\\n    myColl_required[param0] = true\\n    param3 = param3 != null ? param3 : 0\\n    param4 = MY_TICKET\\n    param5 = eval\\n    return method_requireCache.invoke(javaContext, param0, param1, param2, param3, param4, param5)\\n}\\nrc = requireCache\\n// 最新章节规则环境劫持\\nsetLastChapterRule = function(param0) {\\n    if (param0.startsWith(\\\"js:\\\")) {\\n        param0 = 'js:' + $.toString((QING_TITLE, MY_PARAMS) => {\\n            eval(JSON.parse(fetch('hiker://page/hijackEnv?rule=' + QING_TITLE)).rule)\\n            var { runPreRule } = $.require('hiker://page/funcTools?rule=' + QING_TITLE)\\n            runPreRule(oriRULE.preRule)\\n        }, QING_TITLE, { url: MY_RULE.url, RULE: base64Encode(JSON.stringify(genMyRule())), isIndex: isIndex }) + ';' + param0.slice(3)\\n    }\\n    method_setLastChapterRule.invoke(javaContext, param0)\\n}\\n// 动态新增函数劫持\\naddItemAfter = function(param0, param1) {\\n    if (Array.isArray(param1)) param1 = param1.map(hijackEl)\\n    else param1 = hijackEl(param1)\\n    method_addItemAfter.invoke(javaContext, param0, param1)\\n}\\naddItemBefore = function(param0, param1) {\\n    if (Array.isArray(param1)) param1 = param1.map(hijackEl)\\n    else param1 = hijackEl(param1)\\n    method_addItemBefore.invoke(javaContext, param0, param1)\\n}\\n\"},{\"col_type\":\"movie_3\",\"name\":\"函数工具\",\"path\":\"funcTools\",\"rule\":\"let { QING_TITLE, MY_RULE, isIndex } = $.importParam\\nif (!MY_RULE) MY_RULE = {}\\n\\nfunction runCode(rule) {\\n    try {\\n        let [input, code] = rule.split('.js:')\\n        return code ? eval(code) : rule\\n    } catch (e) { return rule }\\n}\\n// 首页链接替换分类\\nfunction indexUrl(param) {\\n    MY_RULE = JSON.parse(base64Decode(MY_RULE))\\n    let pageNum = parseInt(param.split('###')[1]),\\n        url = MY_RULE.url,\\n        { fyAll, tabHeader } = $.require('hiker://page/ClassTab?rule=' + QING_TITLE, Object.assign({ QING_TITLE: QING_TITLE }, MY_RULE))\\n\\n    url = tabHeader.setUrl(fyAll ? url.replace(/fyAll/g, '$${fyAll}') : url.replace(/fy(class|area|year|sort)/g, '$${fy$1}'))\\n    url = url.replace(/fypage(?:@(-?\\\\d+)@)?(?:\\\\*(\\\\d+)@)?/g, (_, start, space) => parseInt(start || 0) + 1 + (pageNum - 1) * parseInt(space || 1))\\n    url = /^([\\\\s\\\\S]*?)(?:\\\\[firstPage=([\\\\s\\\\S]*?)\\\\])?(?:(\\\\.js:[\\\\s\\\\S]*?))?$/.exec(url)\\n    if (pageNum == 1 && url[2]) url[1] = url[2]\\n    if (url[3] && !url[1].includes('.js:')) url[1] += url[3]\\n    return runCode(url[1])\\n}\\n\\nfunction paramHandle(urlParam, ua, urlTmp) {\\n    let charset, paramTmp\\n    try { // 链接的编码、UA和Referer应该是首先继承首页链接\\n        [, , charset, paramTmp] = urlTmp.split(';')\\n        paramTmp = paramTmp.match(/^{(.*)}$/)[1].split('&&')\\n    } catch (e) { paramTmp = [] }\\n    let UserAgent = paramTmp.find((v) => v.startsWith('User-Agent@')),\\n        Referer = paramTmp.find((v) => v.startsWith('Referer@'))\\n    urlParam[0] = urlParam[0] || 'GET'\\n    urlParam[1] = urlParam[1] || charset || 'UTF-8'\\n    try {\\n        urlParam[2] = urlParam[2].match(/^{(.*)}$/)[1].split('&&')\\n    } catch (e) { urlParam[2] = [] }\\n    // 添加全局UA和上级Referer\\n    if (!urlParam[2].some((v) => v.startsWith('User-Agent@'))) {\\n        if (UserAgent) urlParam[2].push(UserAgent)\\n        else if (ua == 'pc')\\n            urlParam[2].push('User-Agent@' + PC_UA.replace(/;/g, '；；').replace(/\\\\?/, '？？'))\\n        else if (ua == 'mobile')\\n            urlParam[2].push('User-Agent@' + MOBILE_UA.replace(/;/g, '；；').replace(/\\\\?/, '？？'))\\n    }\\n    if (Referer && !urlParam[2].some((v) => v.startsWith('Referer@')))\\n        urlParam[2].push(Referer)\\n    urlParam[2] = '{' + urlParam[2].join('&&') + '}'\\n    return urlParam.join(';')\\n}\\n// 预处理并初始化config\\nfunction runPreRule(rule) {\\n    if ((MY_PAGE == 1 || typeof MY_PAGE == 'undefined') &&\\n        (isIndex || !getMyVar('$preRule_' + MY_RULE.title))) {\\n        eval(rule)\\n        putMyVar('$preRule_' + MY_RULE.title, 'T')\\n    }\\n    let _cfg = getMyVar('initConfig', '{}')\\n    if (_cfg && _cfg.length > 0) {\\n        config = JSON.parse(_cfg)\\n    }\\n}\\n// 正文解析通用变量\\nfunction genMyRule() {\\n    let RULE = Object.assign({}, MY_RULE)\\n    delete RULE.last_chapter_rule\\n    delete RULE.preRule\\n    delete RULE.pageList\\n    delete RULE.pages\\n    return RULE\\n}\\n\\nfunction genExUrl(url) {\\n    url = url.split(';')\\n    return url.shift() + ';' + paramHandle(url, MY_RULE.ua, MY_RULE.url)\\n}\\n\\nhijackLazyRule = $.toString((QING_TITLE, MY_PARAMS) => {\\n    if (!MY_RULE) MY_RULE = {}\\n    eval(JSON.parse(fetch('hiker://page/hijackEnv?rule=' + QING_TITLE)).rule)\\n    var {\\n        paramHandle,\\n        genExUrl,\\n        hijackLazyRule,\\n        hijackEl\\n    } = $.require('hiker://page/funcTools?rule=' + QING_TITLE)\\n}, QING_TITLE, { url: MY_RULE.url, RULE: base64Encode(JSON.stringify(genMyRule())), isIndex: isIndex })\\n\\nfunction hijackEl(el) {\\n    if(!el || typeof el != 'object') return\\n    if (!el.extra) el.extra = {}\\n    el.col_type = el.col_type || MY_RULE.col_type\\n    let NOW_RULE = Object.assign(genMyRule(), { params: el.extra })\\n\\n    if (typeof el.url != 'string' ||\\n        ['x5_webview_single', 'input'].find((v) => el.col_type == v) ||\\n        ['海阔视界', 'javascript:'].find((v) => el.url.startsWith(v)) ||\\n        ['rule', 'pics', 'toast', 'copy', 'editFile', 'x5', 'x5WebView', 'x5Play', 'web', 'x5Rule', 'webRule',\\n            'download', 'share', 'fileSelect', 'video'].find((v) => el.url.startsWith(v + '://'))) {\\n        return el\\n    } else if (el.url.startsWith('input://')) {\\n        let para = JSON.parse(el.url.slice(8))\\n        if (para.js) para.js = hijackLazyRule + ';' + para.js\\n        el.url = 'input://' + JSON.stringify(para)\\n        return el\\n    } else if (el.url.startsWith('confirm://')) {\\n        let reIndex = el.url.indexOf('.js:')\\n        if (reIndex >= 0) el.url = el.url.slice(0, reIndex) + '.js:' + hijackLazyRule + ';' + el.url.slice(reIndex + 4)\\n        return el\\n    } else if (el.url.startsWith('select://')) {\\n        let para = JSON.parse(el.url.slice(9))\\n        if (para.js) para.js = hijackLazyRule + ';' + para.js\\n        el.url = 'select://' + JSON.stringify(para)\\n        return el\\n    } else if (el.url.includes('@rule=')) {\\n        let [_, url, rule] = el.url.match(/^([\\\\s\\\\S]*?)@rule=([\\\\s\\\\S]*)$/)\\n        el.url = url\\n        NOW_RULE.detail_find_rule = rule\\n        NOW_RULE.detail_col_type = MY_RULE.col_type\\n    } else if (el.url.startsWith('hiker://page/')) {\\n        if (el.url.includes('rule=') || el.extra.rule)\\n            return el\\n        let [_, path, flag, params] = el.url.match(/^hiker:\\\\/\\\\/page\\\\/(.+?)(#.*?)?(?:\\\\?(.*))?$/),\\n            subPage = MY_RULE.pageList.find((v) => v.path == path),\\n            subUrl = (params || '').split('&').find((v) => v.startsWith('url='))\\n        el.url = (subUrl ? subUrl.slice(4).replace(/？？/g, '?').replace(/＆＆/g, '&') : (el.extra || {}).url) || 'hiker://empty' + flag + '?' + (params || '')\\n        NOW_RULE.detail_find_rule = subPage.rule\\n        NOW_RULE.detail_col_type = subPage.col_type\\n    } else if (el.url.includes('@lazyRule=')) {\\n        let reIndex = el.url.indexOf('.js:')\\n        if (reIndex >= 0) el.url = el.url.slice(0, reIndex) + '.js:' + hijackLazyRule + ';' + el.url.slice(reIndex + 4)\\n        return el\\n    } else if (isIndex) {\\n        if (!MY_RULE.detail_find_rule || /hiker:\\\\/\\\\/(?!empty.+$)/.test(el.url)) return el\\n    } else {\\n        return el\\n    }\\n    el.extra = Object.assign({}, el.extra, {\\n        url: genExUrl(el.url),\\n        RULE: base64Encode(JSON.stringify(NOW_RULE)),\\n        pageTitle: isIndex && el.title\\n    })\\n    el.url = 'hiker://page/frameLoad?rule=' + QING_TITLE\\n    return el\\n}\\n$.exports = {\\n    runCode: runCode,\\n    indexUrl: indexUrl,\\n    paramHandle: paramHandle,\\n    runPreRule: runPreRule,\\n    genMyRule: genMyRule,\\n    genExUrl: genExUrl,\\n    hijackLazyRule: hijackLazyRule,\\n    hijackEl: hijackEl\\n}\\n\"},{\"col_type\":\"movie_3\",\"name\":\"更新\",\"path\":\"更新\",\"rule\":\"if (getMyVar('qx', '1') != 0) {\\n    var uplink = 'http://hiker.nokia.press/hikerule/rulelist.json?id=4765'\\n    let newVersion;\\n    let myVersion = MY_RULE.version == 0 ? 20240329 : MY_RULE.version;\\n    try {\\n        newVersion = JSON.parse(fetchCache(uplink, 24, {\\n            timeout: 1000\\n        })).version;\\n        log(newVersion)\\n    } catch (e) {\\n        newVersion = myVersion;\\n    }\\n    let isUpdate = Number(newVersion) > Number(myVersion);\\n    if (isUpdate) {\\n        log('有新版本:' + newVersion + ',当前:' + myVersion);\\n        confirm({\\n            title: '更新提示',\\n            content: '检测到你的规则版本小于服务器版本，是否立即更新？',\\n            confirm: $.toString((uplink) => {\\n                return `海阔视界首页频道规则￥home_rule_url￥${uplink}`\\n            }, uplink),\\n            cancel: $.toString(() => {\\n                return putMyVar('qx', '0')\\n            })\\n        })\\n    }\\n}\"}]","proxy":"","icon":"https://img2.woyaogexing.com/2022/04/19/dc6b18070df64185a80f6dcb3cbfc207!400x400.jpeg"},{"last_chapter_rule":"","pageList":[],"title":"果核剥壳⬇️","author":"缘分","version":0,"type":"tool","url":"https://www.ghxi.com/category/all/fyclass/page/fypage ","col_type":"movie_1_left_pic","class_name":"安卓&电脑&","class_url":"android&pcsoft&","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:\nvar res = {};\nvar d = [];\nvar html = getResCode();\nvar list = parseDomForArray(html,'.post-loop&&li');\nfor (var j in list) {\n  d.push({\n     title: parseDomForHtml(list[j], 'a&&title'),\n     desc:parseDomForHtml(list[j], '.item-meta-li&&Text'),\n     pic_url: parseDom(list[j], 'img&&data-original')+'@Referer=',\n     url: parseDom(list[j], 'a&&href')+\"#immersiveTheme#\"\n  });\n}\nres.data = d;\nsetHomeResult(res);","searchFind":"js:\nvar res = {};\nvar d = [];\nvar html = getResCode();\nvar list = parseDomForArray(html,'.post-loop&&li');\nfor (var j in list) {\n  d.push({\n     title: parseDomForHtml(list[j], 'a&&title'),\n     desc:parseDomForHtml(list[j], '.item-meta-li&&Text'),\n     pic_url: parseDom(list[j], 'img&&data-original')+'@Referer=',\n     url: parseDom(list[j], 'a&&href')+\"#immersiveTheme#\"\n  });\n}\nres.data = d;\nsetHomeResult(res);","search_url":"https://www.ghxi.com/page/fypage?s=**","group":"①推荐","detail_col_type":"movie_1","detail_find_rule":"js:\nvar d = [];\nvar html = getResCode();\nvar tabs = parseDomForHtml(html, 'body--p,-1&&.entry-content&&Html').replace(/\\<script[\\S\\s]*?<\\/script\\>/g, '');\n\nd.push({\n    title: tabs,\n    desc: '',\n    pic_url: '',\n    url: '',\n    col_type: 'rich_text'\n});\n\nsetHomeResult({\n    data: d\n});","sdetail_col_type":"movie_1","sdetail_find_rule":"","ua":"mobile","preRule":"","pages":"[]","proxy":"","icon":"https://www.ghxi.com/favicon.ico"},{"last_chapter_rule":"","pageList":[{"col_type":"movie_3","name":"更新数据","path":"update","rule":"var cloud = base64Decode(fetchCache(\"https://ghproxy.net/https://raw.githubusercontent.com/xixifree/Hiker/main/yxj.json\", 24, {\n    dns: \"51.195.241.253\"\n}));\nif (cloud.includes(\"合集\")) {\n    writeFile(\"hiker://files/rules/Hood/yxj.json\", cloud);\n    writeFile(\"hiker://files/cache/update/yxj.txt\", new Date() + '');\n}"}],"title":"游戏集𝔥","author":"小棉袄🌞&小🔥星&鬼四&爱是用心&Joker&妄炁&阿钊&Hood","version":7,"type":"other","url":"hiker://empty","col_type":"icon_round_small_4","class_name":"","class_url":"","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:\r\nvar res = {};\r\nvar d = [];\r\nvar html = getResCode();\n\nd.push({\n    title: \"更新数据\",\n    pic_url: \"https://pic.imgdb.cn/item/64841a7c1ddac507cc8f4280.jpg\",\n    url: $(\"#noLoading#\").lazyRule(() => {\n        confirm({\n            title: \" 确认更新数据？\",\n            content: \"这会覆盖本地文件\",\n            confirm: `eval(JSON.parse(fetch('hiker://page/update')).rule);refreshPage();'toast://数据已更新'`,\n            cancel: ''\n        });\n        return 'hiker://empty'\n    }),\n    col_type: 'avatar'\n});\n\n//列表\neval(fetch(\"hiker://files/rules/Hood/yxj.json\"));\n\nfor(var i in list){\n    let picurl = list[i].split(\",\")[2];\n    if(!picurl) picurl = \"https://pic.imgdb.cn/item/6343873a16f2c2beb14176b7.png\";\n    d.push({\n        title: list[i].split(\",\")[0],\n        pic_url: picurl + \"@Referer=\",\n        url: list[i].split(\",\")[1] + \"#gameTheme#\"\n    });\n}\n\r\nres.data = d;\r\nsetHomeResult(res);","searchFind":"","search_url":"","group":"①推荐","detail_col_type":"movie_1","detail_find_rule":"js:\nsetResult([{\n    col_type: 'x5_webview_single',\n    url: MY_URL,\n    desc: \"auto&&float\",\n    extra: {\n        canBack: true\n    }\n}])","sdetail_col_type":"movie_1","sdetail_find_rule":"","ua":"mobile","preRule":"//自动更新？1启用, 0关闭\nvar update = 1;\n\n//更新间隔, 单位为天\nvar uptime = 3;\n\nvar local = \"hiker://files/rules/Hood/yxj.json\";\nvar date_txt = \"hiker://files/cache/update/yxj.txt\";\n\n//计算时间间隔\nvar start = new Date(fetch(date_txt)); \nvar now = new Date(); \nvar D_T = now.getTime() - start.getTime(); \nvar D_D = D_T / (1000 * 3600 * 24);\nvar mytime=parseInt(D_D)+'';\n\nif(!fetch(date_txt) || !fetch(local) || (update==1&&mytime>=uptime)){\n    try{\n        var cloud = base64Decode(fetch(\"https://ghproxy.net/https://raw.githubusercontent.com/xixifree/Hiker/main/yxj.json\",{\n            dns: \"51.195.241.253\"\n        }));\n        if(cloud.includes(\"合集\")){\n            writeFile(local,cloud);\n            writeFile(date_txt,new Date()+'');\n        }\n    }catch(e){}\n}","pages":"[{\"col_type\":\"movie_3\",\"name\":\"更新数据\",\"path\":\"update\",\"rule\":\"var cloud = base64Decode(fetchCache(\\\"https://ghproxy.net/https://raw.githubusercontent.com/xixifree/Hiker/main/yxj.json\\\", 24, {\\n    dns: \\\"51.195.241.253\\\"\\n}));\\nif (cloud.includes(\\\"合集\\\")) {\\n    writeFile(\\\"hiker://files/rules/Hood/yxj.json\\\", cloud);\\n    writeFile(\\\"hiker://files/cache/update/yxj.txt\\\", new Date() + '');\\n}\"}]","proxy":"","icon":"https://hikerfans.com/tubiao/ke/58.png"},{"last_chapter_rule":"","pageList":[{"col_type":"text_1","name":"ClassTab","path":"ClassTab","rule":"var {\n    QING_TITLE, title, url,\n    class_name, class_url,\n    area_name, area_url,\n    year_name, year_url,\n    sort_name, sort_url\n} = $.importParam\nconst ClassTab = function(classArray, params) {\n    Object.assign(this, params)\n    this.arr = classArray.map(v => this.init(v))\n    this.sign = '$' + QING_TITLE + '_' + (this.name || '') + '_'\n    this.color = this.color || '#12b668'\n    this.boundary = this.boundary || 'blank_block'\n}\nClassTab.prototype = {\n    constructor: ClassTab,\n    load(el) {\n        let folded = this.fold && getVar('$fold_' + this.sign, '')\n        if (this.arr.length > 1 && this.fold) el.push({\n            title: '““””' + (folded ? '▶' : '▼').fontcolor('#049eff'),\n            url: $('#noLoading#').lazyRule((sign, folded) => {\n                putVar('$fold_' + sign, folded ? '' : 'T')\n                refreshPage(false)\n                return 'hiker://empty'\n            }, this.sign, folded),\n            col_type: 'scroll_button'\n        })\n        let arr = folded ? [this.arr[0]] : this.arr\n        arr.forEach((v) => {\n            let { id, class_name, class_url } = v,\n            selected = JSON.stringify(this.getClass(id))\n            class_name.forEach((name, i) => {\n                let url = class_url[i],\n                    now = JSON.stringify({ name: name, url: url })\n                el.push({\n                    title: selected == now ? '““””' + name.fontcolor(this.color).bold() : name,\n                    url: selected == now ? 'hiker://empty' : $('#noLoading#').lazyRule((sign, id, now) => {\n                        putVar(sign + id, now)\n                        refreshPage(false)\n                        return 'hiker://empty'\n                    }, this.sign, id, now),\n                    col_type: 'scroll_button'\n                })\n            })\n            el.push({ col_type: this.boundary })\n        })\n    },\n    init(classObject) {\n        if (typeof classObject.class_name == 'string')\n            classObject.class_name = classObject.class_name.split('&')\n        if (typeof classObject.class_url == 'string')\n            classObject.class_url = classObject.class_url.split('&').map((v) => v.trim())\n        return classObject\n    },\n    push(classObject) {\n        this.arr.push(this.init(classObject))\n    },\n    getClass(id) {\n        let defaultClass = this.arr.find(item => item.id == id)\n        defaultClass = JSON.stringify(defaultClass ? {\n            name: defaultClass.class_name[0],\n            url: defaultClass.class_url[0]\n        } : { name:  'cannot find id: ' + id + ' in classTab: ' + this.sign, url: ''})\n        return JSON.parse(getVar(this.sign + id, defaultClass))\n    },\n    setUrl(url) {\n        return url.replace(/\\$\\{([^}]*)\\}/g, (_, id) => this.getClass(id).url)\n    }\n}\n// 生成头部分类\nlet fyAll = url.includes('fyAll'),\n    tabHeader = []\nif (class_name) tabHeader.push({\n    id: fyAll ? 'fyAll' : 'fyclass',\n    class_name: class_name,\n    class_url: class_url\n})\nif (area_name) tabHeader.push({\n    id: fyAll ? 'fyAll' : 'fyarea',\n    class_name: area_name,\n    class_url: area_url\n})\nif (year_name) tabHeader.push({\n    id: fyAll ? 'fyAll' : 'fyyear',\n    class_name: year_name,\n    class_url: year_url\n})\nif (sort_name) tabHeader.push({\n    id: fyAll ? 'fyAll' : 'fysort',\n    class_name: sort_name,\n    class_url: sort_url\n})\n$.exports = {\n    fyAll: fyAll,\n    tabHeader: new ClassTab(tabHeader, { name: title, fold: readFile('tabFold'), })\n}\n"},{"col_type":"icon_2_round","name":"设置","path":"Config","rule":"js:\naddListener('onClose', 'clearMyVar(\"sortFlag\");refreshPage()')\nsetPageTitle('⚙ 轻合集设置 ⚙')\nconst QING_TITLE = getMyVar('myCollection'),\n    url = getMyVar('remoteUrl')\nlet data = $.require('hiker://page/dataLoad?rule=' + QING_TITLE, true),\n    el = [{\n        title: '<b> 清除缓存，立即更新 <small> （基于远程仓库，不要频繁点击）',\n        url: $('#noLoading#').lazyRule((url) => {\n            if (url.startsWith('hiker://') || url.startsWith('file://'))\n                return 'toast://仓库为本地文件，不会进行缓存，本功能也无效'\n            deleteCache(url)\n            back(false)\n            return 'toast://已更新'\n        }, url),\n        img: 'hiker://images/icon4',\n        col_type: 'avatar'\n    }],\n    updateInterval = readFile('updateInterval') || '1',\n    newWindow = readFile('newWindow'),\n    tabFold = readFile('tabFold'),\n    disableCustom = readFile('disableCustom'),\n    editMode = disableCustom ? '导入海阔' : getMyVar('editMode', '启用/禁用')\n\nel.push({\n    title: '  💡 更新频率: ' + (updateInterval == 0 ? '手动' : updateInterval + '天') + '  ',\n    url: $(updateInterval, '输入更新间隔（天），为0则手动更新\\n本地文件链接无效').input(() => {\n        input = parseInt(input)\n        if (Number.isNaN(input)) input = 1\n        else if (input < 1) input = 0\n        saveFile('updateInterval', input.toString())\n        refreshPage()\n        return 'hiker://empty'\n    }),\n    col_type: 'scroll_button'\n}, {\n    title: '  🖥 独立首页: ' + (newWindow ? '是' : '否') + '  ',\n    url: $('#noLoading#').lazyRule((newWindow) => {\n        saveFile('newWindow', newWindow ? '' : 'T')\n        refreshPage()\n        return 'hiker://empty'\n    }, newWindow),\n    col_type: 'scroll_button'\n}, {\n    title: '  💠 分类折叠: ' + (tabFold ? '是' : '否') + '  ',\n    url: $('#noLoading#').lazyRule((tabFold) => {\n        saveFile('tabFold', tabFold ? '' : 'T')\n        refreshPage()\n        return 'hiker://empty'\n    }, tabFold),\n    col_type: 'scroll_button'\n}, {\n    title: '  💼 备份恢复  ',\n    url: $(['备份', '恢复'], 1).select((QING_TITLE, updateInterval, newWindow, tabFold, disableCustom) => {\n        let url = getMyVar('remoteUrl')\n        if (!url.startsWith('hiker://') && !url.startsWith('file://'))\n            url = 'hiker://files/libs/' + md5(url) + '.js'\n        else if (url.startsWith('hiker://page/')) url = 'hiker://empty'\n        if (input == '备份') return $('hiker://files/tmp/' + QING_TITLE + '_backup.json', '输入备份路径')\n            .input((url, updateInterval, newWindow, tabFold, disableCustom) => {\n                let rules = request(url),\n                    customData = readFile('customData')\n                writeFile(input, JSON.stringify({\n                    updateInterval: updateInterval,\n                    newWindow: newWindow,\n                    tabFold: tabFold,\n                    disableCustom: disableCustom,\n                    customData: customData,\n                    rules: rules\n                }))\n                return 'toast://已备份，注意若仓库为子页面则不备份'\n            }, url, updateInterval, newWindow, tabFold, disableCustom)\n        else return $('hiker://files/tmp/' + QING_TITLE + '_backup.json', '输入备份路径').input((url) => {\n            let { updateInterval, newWindow, tabFold, disableCustom, customData, rules } = JSON.parse(request(input))\n            saveFile('updateInterval', updateInterval)\n            saveFile('newWindow', newWindow)\n            saveFile('tabFold', tabFold)\n            saveFile('disableCustom', disableCustom)\n            saveFile('customData', customData)\n            if (rules) writeFile(url, rules)\n            refreshPage()\n            return 'toast://已恢复，如果不想同步远程仓库，可以设置更新频率为手动'\n        }, url)\n    }, QING_TITLE, updateInterval, newWindow, tabFold, disableCustom),\n    col_type: 'scroll_button'\n}, {\n    title: '““””<font color=\"#666666\"><small>特别鸣谢，小程序提供者：\\n' +\n        data.reduce((self, v) => v.author ? self.concat(v.author.split('&')) : self, [])\n        .filter((v, i, arr) => v && arr.indexOf(v) == i).join('、'),\n    url: 'hiker://empty',\n    col_type: 'text_center_1'\n})\n\nel.push({ col_type: 'line' }, {\n    title: '““””' + '📝'.small() + '&nbsp 轻合集自定义 &nbsp'.bold().fontcolor('#757575') + (disableCustom ? '❌' : '⭕').small(),\n    url: $([(disableCustom ? '启用' : '禁用') + '合集自定义', '清除自定义数据', '编辑JSON'], 1).select(() => {\n        switch (input.slice(0, 2)) {\n            case '清除':\n                deleteFile('customData')\n                break\n            case '启用':\n                saveFile('disableCustom', '')\n                break\n            case '禁用':\n                saveFile('disableCustom', 'T')\n                input += '\\n小程序启用/禁用、重新排序等操作均不会体现在首页小程序列表中'\n                break\n            case '编辑':\n                let url = getMyVar('remoteUrl')\n                if (!url.startsWith('hiker://files/') && !url.startsWith('file://'))\n                    url = 'hiker://files/libs/' + md5(url) + '.js'\n                return  'hiker://page/interface#noRefresh##noHistory##noRecordHistory#?rule=JSON编辑器&Json='+base64Encode(url)\n        }\n        refreshPage(false)\n        return 'toast://已' + input\n    }),\n    col_type: 'text_center_1',\n    extra: { lineVisible: false }\n});\n(disableCustom ? ['导入海阔'] : ['启用/禁用', '重新排序', '更改图标', '导入海阔']).forEach((v) => {\n    el.push({\n        title: v == editMode ? '““””' + v.bold().fontcolor('#12b668') : v,\n        url: v == editMode ? 'hiker://empty' : $('#noLoading#').lazyRule((v) => {\n            putMyVar('editMode', v)\n            refreshPage(false)\n            return 'hiker://empty'\n        }, v),\n        col_type: 'scroll_button'\n    })\n});\nif (editMode == '导入海阔') el.push({\n    title: '全部导入',\n    url: '海阔视界￥home_rule_url￥' + (url.startsWith('hiker://') || url.startsWith('file://') ? url : 'hiker://files/libs/' + md5(url) + '.js'),\n    col_type: 'text_center_1',\n    extra: { lineVisible: false }\n});\n(disableCustom ? data : JSON.parse(readFile('customData') || '[]')).forEach((v, i) => {\n    let d = { title: v.title, img: data[i].icon }\n    switch (editMode) {\n        case '启用/禁用':\n            d.title = (v.visible ? '🟢  ' : '🔴  ') + d.title\n            d.url = $('#noLoading#').lazyRule((i) => {\n                let rules = JSON.parse(readFile('customData') || '[]')\n                rules[i].visible = !rules[i].visible\n                saveFile('customData', JSON.stringify(rules))\n                refreshPage(false)\n                return 'hiker://empty'\n            }, i)\n            break\n        case '重新排序':\n            let sortFlag = parseInt(getMyVar('sortFlag', '-1'))\n            d.title = (sortFlag == i ? '🔃  ' : '') + d.title\n            if (sortFlag == -1)\n                d.url = $('#noLoading#').lazyRule((i) => {\n                    putMyVar('sortFlag', i.toString())\n                    refreshPage(false)\n                    return 'toast://选择要移动到的位置'\n                }, i)\n            else\n                d.url = $('#noLoading#').lazyRule((oldIndex, newIndex) => {\n                    let rules = JSON.parse(readFile('customData') || '[]')\n                    rules.splice(newIndex, 0, rules.splice(oldIndex, 1)[0])\n                    saveFile('customData', JSON.stringify(rules))\n                    putMyVar('sortFlag', '-1')\n                    refreshPage(false)\n                    return 'hiker://empty'\n                }, sortFlag, i)\n            break\n        case '更改图标':\n            d.url = $(v.icon || '', '输入新图标地址或颜色代码：').input((i) => {\n                let rules = JSON.parse(readFile('customData') || '[]')\n                if (input)\n                    rules[i].icon = input\n                else\n                    delete rules[i].icon\n                saveFile('customData', JSON.stringify(rules))\n                refreshPage(false)\n                return 'hiker://empty'\n            }, i)\n            break\n        case '导入海阔':\n            d.url = $('#noLoading#').lazyRule((i) => {\n                let data = $.require('hiker://page/dataLoad?rule=' + getMyVar('myCollection'), true)\n                return 'rule://' + base64Encode(JSON.stringify(data[i]))\n            }, i)\n            break\n    }\n    el.push(d)\n})\nsetResult(el)\n"},{"col_type":"movie_3","name":"页面载入","path":"frameLoad","rule":"js:\nconst QING_TITLE = getMyVar('myCollection')\nvar myColl_el = []\neval(JSON.parse(fetch('hiker://page/hijackEnv?rule=' + QING_TITLE)).rule)\n\nif (!isIndex) {\n    if (pageTitle) setPageTitle(pageTitle)\n    setLastChapterRule(oriRULE.last_chapter_rule)\n    MY_PARAMS = MY_RULE.params\n} else if (MY_PAGE == 1) {\n    tabHeader.load(myColl_el)\n    if (RULE.search_url) myColl_el.push({\n        title: \"搜索\",\n        desc: \"这是轻合集的搜索哦~~\",\n        url: '\"hiker://search?s=\"+input',\n        extra: {\n            rules: $.toString((QING_TITLE, title) => {\n                let rules = $.require('hiker://page/dataLoad?rule=' + QING_TITLE)\n                rules = [rules.find((v) => v.title == title)]\n                return JSON.stringify(rules)\n            }, QING_TITLE, RULE.title),\n            defaultValue: getMyVar('searchKey', ''),\n            onChange: \"putMyVar('searchKey',input)\"\n        },\n        col_type: \"input\",\n    })\n}\n// 正文解析\nvar {\n    paramHandle,\n    runPreRule,\n    genExUrl,\n    hijackLazyRule\n} = $.require('hiker://page/funcTools?rule=' + QING_TITLE)\nrunPreRule(oriRULE.preRule)\nif (MY_RULE.find_rule.startsWith('js:')) {\n    let { hijackEl } = $.require('hiker://page/funcTools?rule=' + QING_TITLE)\n    setResult = function(param0, param1, param2, param3) {\n        param1 = CALLBACK_KEY\n        param2 = MY_RULE\n        param3 = MY_TYPE\n        if (Array.isArray(param0.data)) param0 = param0.data\n        Array.prototype.push.apply(myColl_el, param0.map(hijackEl))\n        method_setResult.invoke(javaContext, myColl_el, param1, param2, param3)\n    }\n    setHomeResult = setResult\n    setSearchResult = setResult\n\n    eval(MY_RULE.find_rule.slice(3))\n} else {\n    let { runCode } = $.require('hiker://page/funcTools?rule=' + QING_TITLE),\n        [_, findRule, detailFindRule] = MY_RULE.find_rule.match(/^([\\s\\S]*?)(?:==>([\\s\\S]*))?$/)\n    findRule = findRule.split(';')\n    parseDomForArray(getResCode(), findRule.shift()).forEach((data) => {\n        let [title, img, desc, url] = findRule.map((v, i) => {\n                try {\n                    if (v == '*') return ''\n                    else v = (i == 1 || i == 3) ?\n                        parseDom(data, v) :\n                        parseDomForHtml(data, v)\n                    if (i != 3) v = runCode(v)\n                    return v\n                } catch (e) { return '' }\n            }),\n            res = {\n                title: title, url: url,\n                desc: desc, img: img,\n                col_type: MY_RULE.col_type\n            }\n        if (res.url) {\n            if (res.url.includes('@lazyRule=')) {\n                let reIndex = res.url.indexOf('.js:')\n                if (reIndex >= 0) res.url = res.url.slice(0, reIndex) + '.js:' + hijackLazyRule + ';' + res.url.slice(reIndex + 4)\n            } else  if (detailFindRule) {\n                res.extra = {\n                    url: genExUrl(url),\n                    RULE: base64Encode(JSON.stringify(Object.assign(genMyRule(), { detail_find_rule: detailFindRule }))),\n                    pageTitle: isIndex && title\n                }\n                res.url = 'hiker://page/frameLoad?rule=' + QING_TITLE\n            } else if (MY_RULE.detail_find_rule) {\n                res.extra = {\n                    url: genExUrl(url),\n                    RULE: base64Encode(JSON.stringify(genMyRule())),\n                    pageTitle: isIndex && title\n                }\n                res.url = 'hiker://page/frameLoad?rule=' + QING_TITLE\n            }\n        }\n        myColl_el.push(res)\n    })\n    setResult(myColl_el)\n}\n"},{"col_type":"movie_3","name":"数据载入","path":"dataLoad","rule":"let showAll = $.importParam,\n    url = getMyVar('remoteUrl'),\n    data = []\nif (url.startsWith('hiker://') || url.startsWith('file://')) {\n    // 如果为本地文件则不进行缓存\n    try {\n        let oriData = fetch(url)\n        if (url.startsWith('hiker://page/'))\n            oriData = JSON.parse(oriData).rule\n        data = JSON.parse(oriData)\n    } catch (e) {}\n} else {\n    // 获取远程数据，检查间隔默认一天\n    let interval = parseInt(readFile('updateInterval') || '1'),\n        oldData = fetch('hiker://files/libs/' + md5(url) + '.js'),\n        remoteData = []\n    if (interval == 0) interval = -1\n    try { remoteData = JSON.parse(fetchCache(url, 24 * interval, { timeout: 50000 })) } catch (e) {}\n    if (!Array.isArray(remoteData)) remoteData = []\n    if (remoteData.length < 3) {\n        log('未获取到数据')\n        if (oldData) writeFile('hiker://files/libs/' + md5(url) + '.js', oldData)\n        data = JSON.parse(oldData || '[]')\n    } else {\n        log('已获取到数据')\n        data = remoteData\n    }\n}\ndata = data.filter((v) => v.title != getMyVar('myCollection') && !(v.author || '').includes('轻合集生成器'))\nif (readFile('disableCustom')) $.exports = data\nelse { // 写入自定义数据\n    let customData = JSON.parse(readFile('customData') || '[]'),\n        rewriteData = []\n    customData = customData.reduce((self, v) => {\n        let index = data.findIndex((vv) => v.title == vv.title)\n        if (index >= 0) {\n            self.push(v)\n            let rule = data.splice(index, 1)[0]\n            if (showAll || v.visible)\n                rewriteData.push(Object.assign(rule, v))\n        }\n        return self\n    }, [])\n    data.forEach((v) => customData.push({ title: v.title, visible: true }))\n    saveFile('customData', JSON.stringify(customData))\n    $.exports = rewriteData.concat(data)\n}\n"},{"col_type":"movie_3","name":"环境劫持","path":"hijackEnv","rule":"var { RULE, isIndex, pageTitle } = MY_PARAMS\nRULE = JSON.parse(base64Decode(RULE))\nvar oriRULE = $.require('hiker://page/dataLoad?rule=' + QING_TITLE).find((v) => v.title == RULE.title)\nif (isIndex) {\n    RULE = oriRULE\n    var { tabHeader, fyAll } = $.require('hiker://page/ClassTab?rule=' + QING_TITLE, Object.assign({ QING_TITLE: QING_TITLE }, RULE))\n    // 处理MY_RULE\n    MY_RULE.class_url = tabHeader.getClass(fyAll ? 'fyAll' : 'fyclass').url\n    MY_RULE.area_url = fyAll ? MY_RULE.class_url : tabHeader.getClass('fyarea').url\n    MY_RULE.year_url = fyAll ? MY_RULE.class_url : tabHeader.getClass('fyyear').url\n    MY_RULE.sort_url = fyAll ? MY_RULE.class_url : tabHeader.getClass('fysort').url\n    MY_RULE.url = RULE.url\n    MY_RULE.col_type = RULE.col_type\n    MY_RULE.detail_col_type = RULE.detail_col_type\n    MY_RULE.find_rule = RULE.find_rule\n    MY_RULE.detail_find_rule = RULE.detail_find_rule\n    MY_RULE.params = {}\n} else {\n    RULE.pages = oriRULE.pages\n    // 处理MY_RULE\n    MY_RULE.url = MY_PARAMS.url\n    MY_RULE.col_type = RULE.detail_col_type\n    MY_RULE.find_rule = RULE.detail_find_rule\n    MY_RULE.params = RULE.params\n}\nMY_RULE.pages = RULE.pages\nMY_RULE.pageList = JSON.parse(MY_RULE.pages || '[]')\nMY_RULE.title = RULE.title\nMY_RULE.ua = RULE.ua\nlog(MY_RULE.url)\n// 载入函数工具\nvar { genMyRule } = $.require('hiker://page/funcTools?rule=' + QING_TITLE, {\n    QING_TITLE: QING_TITLE,\n    MY_RULE: MY_RULE,\n    isIndex: isIndex\n})\n// 防止require多次运行\nconst myColl_required = {}\nrequire = function(param0, param1, param2, param3, param4) {\n    if (myColl_required[param0]) return\n    myColl_required[param0] = true\n    param2 = param2 != null ? param2 : 0\n    param3 = MY_TICKET\n    param4 = eval\n    return method_require.invoke(javaContext, param0, param1, param2, param3, param4)\n}\nrequireCache = function(param0, param1, param2, param3, param4, param5) {\n    if (myColl_required[param0]) return\n    myColl_required[param0] = true\n    param3 = param3 != null ? param3 : 0\n    param4 = MY_TICKET\n    param5 = eval\n    return method_requireCache.invoke(javaContext, param0, param1, param2, param3, param4, param5)\n}\nrc = requireCache\n// 最新章节规则环境劫持\nsetLastChapterRule = function(param0) {\n    if (param0.startsWith(\"js:\")) {\n        param0 = 'js:' + $.toString((QING_TITLE, MY_PARAMS) => {\n            eval(JSON.parse(fetch('hiker://page/hijackEnv?rule=' + QING_TITLE)).rule)\n            var { runPreRule } = $.require('hiker://page/funcTools?rule=' + QING_TITLE)\n            runPreRule(oriRULE.preRule)\n        }, QING_TITLE, { url: MY_RULE.url, RULE: base64Encode(JSON.stringify(genMyRule())), isIndex: isIndex }) + ';' + param0.slice(3)\n    }\n    method_setLastChapterRule.invoke(javaContext, param0)\n}\n// 动态新增函数劫持\naddItemAfter = function(param0, param1) {\n    if (Array.isArray(param1)) param1 = param1.map(hijackEl)\n    else param1 = hijackEl(param1)\n    method_addItemAfter.invoke(javaContext, param0, param1)\n}\naddItemBefore = function(param0, param1) {\n    if (Array.isArray(param1)) param1 = param1.map(hijackEl)\n    else param1 = hijackEl(param1)\n    method_addItemBefore.invoke(javaContext, param0, param1)\n}\n"},{"col_type":"movie_3","name":"函数工具","path":"funcTools","rule":"let { QING_TITLE, MY_RULE, isIndex } = $.importParam\nif (!MY_RULE) MY_RULE = {}\n\nfunction runCode(rule) {\n    try {\n        let [input, code] = rule.split('.js:')\n        return code ? eval(code) : rule\n    } catch (e) { return rule }\n}\n// 首页链接替换分类\nfunction indexUrl(param) {\n    MY_RULE = JSON.parse(base64Decode(MY_RULE))\n    let pageNum = parseInt(param.split('###')[1]),\n        url = MY_RULE.url,\n        { fyAll, tabHeader } = $.require('hiker://page/ClassTab?rule=' + QING_TITLE, Object.assign({ QING_TITLE: QING_TITLE }, MY_RULE))\n\n    url = tabHeader.setUrl(fyAll ? url.replace(/fyAll/g, '$${fyAll}') : url.replace(/fy(class|area|year|sort)/g, '$${fy$1}'))\n    url = url.replace(/fypage(?:@(-?\\d+)@)?(?:\\*(\\d+)@)?/g, (_, start, space) => parseInt(start || 0) + 1 + (pageNum - 1) * parseInt(space || 1))\n    url = /^([\\s\\S]*?)(?:\\[firstPage=([\\s\\S]*?)\\])?(?:(\\.js:[\\s\\S]*?))?$/.exec(url)\n    if (pageNum == 1 && url[2]) url[1] = url[2]\n    if (url[3] && !url[1].includes('.js:')) url[1] += url[3]\n    return runCode(url[1])\n}\n\nfunction paramHandle(urlParam, ua, urlTmp) {\n    let charset, paramTmp\n    try { // 链接的编码、UA和Referer应该是首先继承首页链接\n        [, , charset, paramTmp] = urlTmp.split(';')\n        paramTmp = paramTmp.match(/^{(.*)}$/)[1].split('&&')\n    } catch (e) { paramTmp = [] }\n    let UserAgent = paramTmp.find((v) => v.startsWith('User-Agent@')),\n        Referer = paramTmp.find((v) => v.startsWith('Referer@'))\n    urlParam[0] = urlParam[0] || 'GET'\n    urlParam[1] = urlParam[1] || charset || 'UTF-8'\n    try {\n        urlParam[2] = urlParam[2].match(/^{(.*)}$/)[1].split('&&')\n    } catch (e) { urlParam[2] = [] }\n    // 添加全局UA和上级Referer\n    if (!urlParam[2].some((v) => v.startsWith('User-Agent@'))) {\n        if (UserAgent) urlParam[2].push(UserAgent)\n        else if (ua == 'pc')\n            urlParam[2].push('User-Agent@' + PC_UA.replace(/;/g, '；；').replace(/\\?/, '？？'))\n        else if (ua == 'mobile')\n            urlParam[2].push('User-Agent@' + MOBILE_UA.replace(/;/g, '；；').replace(/\\?/, '？？'))\n    }\n    if (Referer && !urlParam[2].some((v) => v.startsWith('Referer@')))\n        urlParam[2].push(Referer)\n    urlParam[2] = '{' + urlParam[2].join('&&') + '}'\n    return urlParam.join(';')\n}\n// 预处理并初始化config\nfunction runPreRule(rule) {\n    if ((typeof MY_PAGE != 'undefined' &&  MY_PAGE == 1) &&\n         (isIndex || !getMyVar('$preRule_' + MY_RULE.title))) {\n        eval(rule)\n        putMyVar('$preRule_' + MY_RULE.title, 'T')\n    }\n    let _cfg = getMyVar('initConfig', '{}')\n    if (_cfg && _cfg.length > 0) {\n        config = JSON.parse(_cfg)\n    }\n}\n// 正文解析通用变量\nfunction genMyRule() {\n    let RULE = Object.assign({}, MY_RULE)\n    delete RULE.last_chapter_rule\n    delete RULE.preRule\n    delete RULE.pageList\n    delete RULE.pages\n    return RULE\n}\n\nfunction genExUrl(url) {\n    url = url.split(';')\n    return url.shift() + ';' + paramHandle(url, MY_RULE.ua, MY_RULE.url)\n}\n\nhijackLazyRule = $.toString((QING_TITLE, MY_PARAMS) => {\n    if (!MY_RULE) MY_RULE = {}\n    MY_PARAMS = JSON.parse(base64Decode(MY_PARAMS))\n    eval(JSON.parse(fetch('hiker://page/hijackEnv?rule=' + QING_TITLE)).rule)\n    var {\n        paramHandle,\n        genExUrl,\n        hijackLazyRule,\n        hijackEl\n    } = $.require('hiker://page/funcTools?rule=' + QING_TITLE)\n}, QING_TITLE, base64Encode(JSON.stringify({ url: MY_RULE.url, RULE: base64Encode(JSON.stringify(genMyRule())), isIndex: isIndex })))\n\nfunction hijackEl(el) {\n    if(!el || typeof el != 'object') return\n    if (!el.extra) el.extra = {}\n    el.col_type = el.col_type || MY_RULE.col_type\n    let NOW_RULE = Object.assign(genMyRule(), { params: el.extra })\n\n    if (typeof el.url != 'string' ||\n        ['x5_webview_single', 'input'].some((v) => el.col_type == v) ||\n        ['海阔视界', 'javascript:'].some((v) => el.url.startsWith(v)) ||\n        ['rule', 'pics', 'toast', 'copy', 'editFile', 'x5', 'x5WebView', 'x5Play', 'web', 'x5Rule', 'webRule',\n            'download', 'share', 'fileSelect', 'video'].some((v) => el.url.startsWith(v + '://'))) {\n        return el\n    } else if (el.url.startsWith('input://')) {\n        let para = JSON.parse(el.url.slice(8))\n        if (para.js) para.js = hijackLazyRule + ';' + para.js\n        el.url = 'input://' + JSON.stringify(para)\n        return el\n    } else if (el.url.startsWith('confirm://')) {\n        let reIndex = el.url.indexOf('.js:')\n        if (reIndex >= 0) el.url = el.url.slice(0, reIndex) + '.js:' + hijackLazyRule + ';' + el.url.slice(reIndex + 4)\n        return el\n    } else if (el.url.startsWith('select://')) {\n        let para = JSON.parse(el.url.slice(9))\n        if (para.js) para.js = hijackLazyRule + ';' + para.js\n        el.url = 'select://' + JSON.stringify(para)\n        return el\n    } else if (el.url.includes('@rule=')) {\n        let [_, url, rule] = el.url.match(/^([\\s\\S]*?)@rule=([\\s\\S]*)$/)\n        el.url = url\n        NOW_RULE.detail_find_rule = rule\n        NOW_RULE.detail_col_type = MY_RULE.col_type\n    } else if (el.url.startsWith('hiker://page/')) {\n        if (el.url.includes('rule=') || el.extra.rule)\n            return el\n        let [_, path, flag, params] = el.url.match(/^hiker:\\/\\/page\\/(.+?)(#.*?)?(?:\\?(.*))?$/),\n            subPage = MY_RULE.pageList.find((v) => v.path == path),\n            subUrl = (params || '').split('&').find((v) => v.startsWith('url='))\n        el.url = (subUrl ? subUrl.slice(4).replace(/？？/g, '?').replace(/＆＆/g, '&') : (el.extra || {}).url) || 'hiker://empty' + flag + '?' + (params || '')\n        NOW_RULE.detail_find_rule = subPage.rule\n        NOW_RULE.detail_col_type = subPage.col_type\n    } else if (el.url.includes('@lazyRule=')) {\n        let reIndex = el.url.indexOf('.js:')\n        if (reIndex >= 0) el.url = el.url.slice(0, reIndex) + '.js:' + hijackLazyRule + ';' + el.url.slice(reIndex + 4)\n        return el\n    } else if (isIndex) {\n        if (!MY_RULE.detail_find_rule || /hiker:\\/\\/(?!empty.+$)/.test(el.url)) return el\n    } else {\n        return el\n    }\n    el.extra = Object.assign({}, el.extra, {\n        url: genExUrl(el.url),\n        RULE: base64Encode(JSON.stringify(NOW_RULE)),\n        pageTitle: isIndex && el.title\n    })\n    el.url = 'hiker://page/frameLoad?rule=' + QING_TITLE\n    return el\n}\n$.exports = {\n    runCode: runCode,\n    indexUrl: indexUrl,\n    paramHandle: paramHandle,\n    runPreRule: runPreRule,\n    genMyRule: genMyRule,\n    genExUrl: genExUrl,\n    hijackLazyRule: hijackLazyRule,\n    hijackEl: hijackEl\n}\n"}],"title":"轻合集.水淼","author":"轻合集生成器","version":107,"type":"all","url":"hiker://empty","col_type":"icon_round_small_4","class_name":"","class_url":"","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:\nconst QING_TITLE = getMyVar('myCollection'),\n    newWindow = readFile('newWindow'),\n    typeShow = getMyVar('typeShow', '@'),\n    types = { 'all': '聚合', 'video': '视频', 'music': '音频', 'live': '直播', 'cartoon': '漫画', 'read': '阅读', 'picture': '图集', 'news': '资讯', 'tool': '工具', 'other': '其它' }\nlet el = [{\n        title: ' ' + QING_TITLE.bold() + ' &nbsp &nbsp ' + '⚙ 轻合集设置 ⚙'.small(),\n        url: 'hiker://page/Config?rule=' + QING_TITLE + '&#noRecordHistory#',\n        img: MY_RULE.icon || 'hiker://images/icon1',\n        col_type: 'avatar'\n    }, {\n        url: '\"hiker://search?s=\"+input',\n        desc: '这是轻合集的搜索哦~~',\n        title: '搜索',\n        col_type: 'input',\n        extra: {\n            rules: $.toString((QING_TITLE, typeShow) => {\n                let rules = $.require('hiker://page/dataLoad?rule=' + QING_TITLE)\n                if (typeShow[0] == '@') {\n                    let filterKey = typeShow.slice(1)\n                    if (filterKey) rules = rules.filter((v) => v.title.includes(filterKey))\n                } else rules = rules.filter((v) => v.type == typeShow)\n                return JSON.stringify(rules)\n            }, QING_TITLE, typeShow),\n            defaultValue: getMyVar('searchKey', ''),\n            onChange: \"putMyVar('searchKey',input)\"\n        }\n    }],\n    rules = $.require('hiker://page/dataLoad?rule=' + QING_TITLE),\n    rulesType = rules.reduce((obj, v) => {\n        let type = v.type\n        if (type) {\n            if (!Array.isArray(obj[type]))\n                obj[type] = []\n            obj[type].push(v)\n        }\n        return obj\n    }, {})\nif (typeShow[0] == '@') {\n    let filterKey = typeShow.slice(1)\n    if (filterKey) rules = rules.filter((v) => v.title.includes(filterKey))\n}\nel.push(typeShow[0] == '@' ? {\n    title: '““””' + ('全部' + (typeShow[1] ? '[' + typeShow.slice(1) + ']' : '')).bold().fontcolor('#12b668') + ' ' + (rules.length).toString().small(),\n    url: $(typeShow.slice(5), '查找小程序关键词').input(() => {\n        putMyVar('typeShow', '@' + input)\n        refreshPage(false)\n        return 'hiker://empty'\n    }),\n    col_type: 'scroll_button'\n} : {\n    title: '““””全部 ' + (rules.length).toString().small(),\n    url: $('#noLoading#').lazyRule(() => {\n        putMyVar('typeShow', '@')\n        refreshPage(false)\n        return 'toast://再次点击【全部】可查找小程序'\n    }),\n    col_type: 'scroll_button'\n})\nfor (let k in types)\n    if (k in rulesType)\n        el.push({\n            title: '““””' + (k == typeShow ? types[k].bold().fontcolor('#12b668') : types[k]) + ' ' + (rulesType[k].length).toString().small(),\n            url: k == typeShow ? 'hiker://empty' : $('#noLoading#').lazyRule((k) => {\n                putMyVar('typeShow', k)\n                refreshPage(false)\n                return 'hiker://empty'\n            }, k),\n            col_type: 'scroll_button'\n        })\n\nif (typeShow[0] != '@') rules = rulesType[typeShow]\nlet { paramHandle } = $.require('hiker://page/funcTools?rule=' + QING_TITLE, {})\nrules.forEach((v) => {\n    let urlParam = v.url.split(';'),\n        ruleTmp = {\n            title: v.title, url: urlParam.shift(),\n            class_name: v.class_name, class_url: v.class_url,\n            area_name: v.area_name, area_url: v.area_url,\n            year_name: v.year_name, year_url: v.year_url,\n            sort_name: v.sort_name, sort_url: v.sort_url\n        },\n        fypage = ruleTmp.url.includes('fypage') ? 'fypage' : '1',\n        domain = (/^https?:\\/\\/[^/?#]+/i.exec(ruleTmp.url) || ['hiker://empty'])[0],\n        d = {\n            title: v.title,\n            url: 'hiker://page/frameLoad',\n            img: v.icon || 'hiker://images/icon1',\n            extra: {\n                url: domain + '/#noHistory##noRecordHistory####' + fypage +\n                    '.js:let { runCode, indexUrl } = $.require(\"hiker://page/funcTools？？rule=' + QING_TITLE + '\", '\n                     + JSON.stringify({\n                        MY_RULE: base64Encode(JSON.stringify(ruleTmp)),\n                        QING_TITLE: QING_TITLE\n                    }) + ')；；indexUrl(input);' + paramHandle(urlParam, v.ua),\n                RULE: base64Encode(JSON.stringify({ title: v.title })),\n                isIndex: true\n            }\n        }\n    if (newWindow) Object.assign(d.extra, {\n        newWindow: true,\n        windowId: QING_TITLE + '_' + d.title\n    })\n    el.push(d)\n})\nsetResult(el)\n","searchFind":"js:\nsetResult([{\n    title: \"点我开始轻合集•视界聚搜\",\n    url: \"hiker://search?s=\" + getParam(\"keyword\"),\n    extra: {\n        rules: $.toString(() => {\n            const QING_TITLE = getMyVar('myCollection'),\n                typeShow = getMyVar('typeShow', '@')\n            let rules = $.require('hiker://page/dataLoad?rule=' + QING_TITLE)\n            if (typeShow[0] == '@') {\n                let filterKey = typeShow.slice(1)\n                if (filterKey) rules = rules.filter((v) => v.title.includes(filterKey))\n            } else rules = rules.filter((v) => v.type == typeShow)\n            return JSON.stringify(rules)\n        })\n    }\n}])\n","search_url":"hiker://empty?keyword=**","group":"①推荐","detail_col_type":"movie_1","detail_find_rule":"","sdetail_col_type":"movie_1","sdetail_find_rule":"","ua":"mobile","preRule":"putMyVar('myCollection', MY_RULE.title)\nputMyVar('remoteUrl', 'http://hiker.nokia.press/hikerule/dev/json_list?name=384625466')\n// \n/*\n*/","pages":"[{\"col_type\":\"text_1\",\"name\":\"ClassTab\",\"path\":\"ClassTab\",\"rule\":\"var {\\n    QING_TITLE, title, url,\\n    class_name, class_url,\\n    area_name, area_url,\\n    year_name, year_url,\\n    sort_name, sort_url\\n} = $.importParam\\nconst ClassTab = function(classArray, params) {\\n    Object.assign(this, params)\\n    this.arr = classArray.map(v => this.init(v))\\n    this.sign = '$' + QING_TITLE + '_' + (this.name || '') + '_'\\n    this.color = this.color || '#12b668'\\n    this.boundary = this.boundary || 'blank_block'\\n}\\nClassTab.prototype = {\\n    constructor: ClassTab,\\n    load(el) {\\n        let folded = this.fold && getVar('$fold_' + this.sign, '')\\n        if (this.arr.length > 1 && this.fold) el.push({\\n            title: '““””' + (folded ? '▶' : '▼').fontcolor('#049eff'),\\n            url: $('#noLoading#').lazyRule((sign, folded) => {\\n                putVar('$fold_' + sign, folded ? '' : 'T')\\n                refreshPage(false)\\n                return 'hiker://empty'\\n            }, this.sign, folded),\\n            col_type: 'scroll_button'\\n        })\\n        let arr = folded ? [this.arr[0]] : this.arr\\n        arr.forEach((v) => {\\n            let { id, class_name, class_url } = v,\\n            selected = JSON.stringify(this.getClass(id))\\n            class_name.forEach((name, i) => {\\n                let url = class_url[i],\\n                    now = JSON.stringify({ name: name, url: url })\\n                el.push({\\n                    title: selected == now ? '““””' + name.fontcolor(this.color).bold() : name,\\n                    url: selected == now ? 'hiker://empty' : $('#noLoading#').lazyRule((sign, id, now) => {\\n                        putVar(sign + id, now)\\n                        refreshPage(false)\\n                        return 'hiker://empty'\\n                    }, this.sign, id, now),\\n                    col_type: 'scroll_button'\\n                })\\n            })\\n            el.push({ col_type: this.boundary })\\n        })\\n    },\\n    init(classObject) {\\n        if (typeof classObject.class_name == 'string')\\n            classObject.class_name = classObject.class_name.split('&')\\n        if (typeof classObject.class_url == 'string')\\n            classObject.class_url = classObject.class_url.split('&').map((v) => v.trim())\\n        return classObject\\n    },\\n    push(classObject) {\\n        this.arr.push(this.init(classObject))\\n    },\\n    getClass(id) {\\n        let defaultClass = this.arr.find(item => item.id == id)\\n        defaultClass = JSON.stringify(defaultClass ? {\\n            name: defaultClass.class_name[0],\\n            url: defaultClass.class_url[0]\\n        } : { name:  'cannot find id: ' + id + ' in classTab: ' + this.sign, url: ''})\\n        return JSON.parse(getVar(this.sign + id, defaultClass))\\n    },\\n    setUrl(url) {\\n        return url.replace(/\\\\$\\\\{([^}]*)\\\\}/g, (_, id) => this.getClass(id).url)\\n    }\\n}\\n// 生成头部分类\\nlet fyAll = url.includes('fyAll'),\\n    tabHeader = []\\nif (class_name) tabHeader.push({\\n    id: fyAll ? 'fyAll' : 'fyclass',\\n    class_name: class_name,\\n    class_url: class_url\\n})\\nif (area_name) tabHeader.push({\\n    id: fyAll ? 'fyAll' : 'fyarea',\\n    class_name: area_name,\\n    class_url: area_url\\n})\\nif (year_name) tabHeader.push({\\n    id: fyAll ? 'fyAll' : 'fyyear',\\n    class_name: year_name,\\n    class_url: year_url\\n})\\nif (sort_name) tabHeader.push({\\n    id: fyAll ? 'fyAll' : 'fysort',\\n    class_name: sort_name,\\n    class_url: sort_url\\n})\\n$.exports = {\\n    fyAll: fyAll,\\n    tabHeader: new ClassTab(tabHeader, { name: title, fold: readFile('tabFold'), })\\n}\\n\"},{\"col_type\":\"icon_2_round\",\"name\":\"设置\",\"path\":\"Config\",\"rule\":\"js:\\naddListener('onClose', 'clearMyVar(\\\"sortFlag\\\");refreshPage()')\\nsetPageTitle('⚙ 轻合集设置 ⚙')\\nconst QING_TITLE = getMyVar('myCollection'),\\n    url = getMyVar('remoteUrl')\\nlet data = $.require('hiker://page/dataLoad?rule=' + QING_TITLE, true),\\n    el = [{\\n        title: '<b> 清除缓存，立即更新 <small> （基于远程仓库，不要频繁点击）',\\n        url: $('#noLoading#').lazyRule((url) => {\\n            if (url.startsWith('hiker://') || url.startsWith('file://'))\\n                return 'toast://仓库为本地文件，不会进行缓存，本功能也无效'\\n            deleteCache(url)\\n            back(false)\\n            return 'toast://已更新'\\n        }, url),\\n        img: 'hiker://images/icon4',\\n        col_type: 'avatar'\\n    }],\\n    updateInterval = readFile('updateInterval') || '1',\\n    newWindow = readFile('newWindow'),\\n    tabFold = readFile('tabFold'),\\n    disableCustom = readFile('disableCustom'),\\n    editMode = disableCustom ? '导入海阔' : getMyVar('editMode', '启用/禁用')\\n\\nel.push({\\n    title: '  💡 更新频率: ' + (updateInterval == 0 ? '手动' : updateInterval + '天') + '  ',\\n    url: $(updateInterval, '输入更新间隔（天），为0则手动更新\\\\n本地文件链接无效').input(() => {\\n        input = parseInt(input)\\n        if (Number.isNaN(input)) input = 1\\n        else if (input < 1) input = 0\\n        saveFile('updateInterval', input.toString())\\n        refreshPage()\\n        return 'hiker://empty'\\n    }),\\n    col_type: 'scroll_button'\\n}, {\\n    title: '  🖥 独立首页: ' + (newWindow ? '是' : '否') + '  ',\\n    url: $('#noLoading#').lazyRule((newWindow) => {\\n        saveFile('newWindow', newWindow ? '' : 'T')\\n        refreshPage()\\n        return 'hiker://empty'\\n    }, newWindow),\\n    col_type: 'scroll_button'\\n}, {\\n    title: '  💠 分类折叠: ' + (tabFold ? '是' : '否') + '  ',\\n    url: $('#noLoading#').lazyRule((tabFold) => {\\n        saveFile('tabFold', tabFold ? '' : 'T')\\n        refreshPage()\\n        return 'hiker://empty'\\n    }, tabFold),\\n    col_type: 'scroll_button'\\n}, {\\n    title: '  💼 备份恢复  ',\\n    url: $(['备份', '恢复'], 1).select((QING_TITLE, updateInterval, newWindow, tabFold, disableCustom) => {\\n        let url = getMyVar('remoteUrl')\\n        if (!url.startsWith('hiker://') && !url.startsWith('file://'))\\n            url = 'hiker://files/libs/' + md5(url) + '.js'\\n        else if (url.startsWith('hiker://page/')) url = 'hiker://empty'\\n        if (input == '备份') return $('hiker://files/tmp/' + QING_TITLE + '_backup.json', '输入备份路径')\\n            .input((url, updateInterval, newWindow, tabFold, disableCustom) => {\\n                let rules = request(url),\\n                    customData = readFile('customData')\\n                writeFile(input, JSON.stringify({\\n                    updateInterval: updateInterval,\\n                    newWindow: newWindow,\\n                    tabFold: tabFold,\\n                    disableCustom: disableCustom,\\n                    customData: customData,\\n                    rules: rules\\n                }))\\n                return 'toast://已备份，注意若仓库为子页面则不备份'\\n            }, url, updateInterval, newWindow, tabFold, disableCustom)\\n        else return $('hiker://files/tmp/' + QING_TITLE + '_backup.json', '输入备份路径').input((url) => {\\n            let { updateInterval, newWindow, tabFold, disableCustom, customData, rules } = JSON.parse(request(input))\\n            saveFile('updateInterval', updateInterval)\\n            saveFile('newWindow', newWindow)\\n            saveFile('tabFold', tabFold)\\n            saveFile('disableCustom', disableCustom)\\n            saveFile('customData', customData)\\n            if (rules) writeFile(url, rules)\\n            refreshPage()\\n            return 'toast://已恢复，如果不想同步远程仓库，可以设置更新频率为手动'\\n        }, url)\\n    }, QING_TITLE, updateInterval, newWindow, tabFold, disableCustom),\\n    col_type: 'scroll_button'\\n}, {\\n    title: '““””<font color=\\\"#666666\\\"><small>特别鸣谢，小程序提供者：\\\\n' +\\n        data.reduce((self, v) => v.author ? self.concat(v.author.split('&')) : self, [])\\n        .filter((v, i, arr) => v && arr.indexOf(v) == i).join('、'),\\n    url: 'hiker://empty',\\n    col_type: 'text_center_1'\\n})\\n\\nel.push({ col_type: 'line' }, {\\n    title: '““””' + '📝'.small() + '&nbsp 轻合集自定义 &nbsp'.bold().fontcolor('#757575') + (disableCustom ? '❌' : '⭕').small(),\\n    url: $([(disableCustom ? '启用' : '禁用') + '合集自定义', '清除自定义数据', '编辑JSON'], 1).select(() => {\\n        switch (input.slice(0, 2)) {\\n            case '清除':\\n                deleteFile('customData')\\n                break\\n            case '启用':\\n                saveFile('disableCustom', '')\\n                break\\n            case '禁用':\\n                saveFile('disableCustom', 'T')\\n                input += '\\\\n小程序启用/禁用、重新排序等操作均不会体现在首页小程序列表中'\\n                break\\n            case '编辑':\\n                let url = getMyVar('remoteUrl')\\n                if (!url.startsWith('hiker://files/') && !url.startsWith('file://'))\\n                    url = 'hiker://files/libs/' + md5(url) + '.js'\\n                return  'hiker://page/interface#noRefresh##noHistory##noRecordHistory#?rule=JSON编辑器&Json='+base64Encode(url)\\n        }\\n        refreshPage(false)\\n        return 'toast://已' + input\\n    }),\\n    col_type: 'text_center_1',\\n    extra: { lineVisible: false }\\n});\\n(disableCustom ? ['导入海阔'] : ['启用/禁用', '重新排序', '更改图标', '导入海阔']).forEach((v) => {\\n    el.push({\\n        title: v == editMode ? '““””' + v.bold().fontcolor('#12b668') : v,\\n        url: v == editMode ? 'hiker://empty' : $('#noLoading#').lazyRule((v) => {\\n            putMyVar('editMode', v)\\n            refreshPage(false)\\n            return 'hiker://empty'\\n        }, v),\\n        col_type: 'scroll_button'\\n    })\\n});\\nif (editMode == '导入海阔') el.push({\\n    title: '全部导入',\\n    url: '海阔视界￥home_rule_url￥' + (url.startsWith('hiker://') || url.startsWith('file://') ? url : 'hiker://files/libs/' + md5(url) + '.js'),\\n    col_type: 'text_center_1',\\n    extra: { lineVisible: false }\\n});\\n(disableCustom ? data : JSON.parse(readFile('customData') || '[]')).forEach((v, i) => {\\n    let d = { title: v.title, img: data[i].icon }\\n    switch (editMode) {\\n        case '启用/禁用':\\n            d.title = (v.visible ? '🟢  ' : '🔴  ') + d.title\\n            d.url = $('#noLoading#').lazyRule((i) => {\\n                let rules = JSON.parse(readFile('customData') || '[]')\\n                rules[i].visible = !rules[i].visible\\n                saveFile('customData', JSON.stringify(rules))\\n                refreshPage(false)\\n                return 'hiker://empty'\\n            }, i)\\n            break\\n        case '重新排序':\\n            let sortFlag = parseInt(getMyVar('sortFlag', '-1'))\\n            d.title = (sortFlag == i ? '🔃  ' : '') + d.title\\n            if (sortFlag == -1)\\n                d.url = $('#noLoading#').lazyRule((i) => {\\n                    putMyVar('sortFlag', i.toString())\\n                    refreshPage(false)\\n                    return 'toast://选择要移动到的位置'\\n                }, i)\\n            else\\n                d.url = $('#noLoading#').lazyRule((oldIndex, newIndex) => {\\n                    let rules = JSON.parse(readFile('customData') || '[]')\\n                    rules.splice(newIndex, 0, rules.splice(oldIndex, 1)[0])\\n                    saveFile('customData', JSON.stringify(rules))\\n                    putMyVar('sortFlag', '-1')\\n                    refreshPage(false)\\n                    return 'hiker://empty'\\n                }, sortFlag, i)\\n            break\\n        case '更改图标':\\n            d.url = $(v.icon || '', '输入新图标地址或颜色代码：').input((i) => {\\n                let rules = JSON.parse(readFile('customData') || '[]')\\n                if (input)\\n                    rules[i].icon = input\\n                else\\n                    delete rules[i].icon\\n                saveFile('customData', JSON.stringify(rules))\\n                refreshPage(false)\\n                return 'hiker://empty'\\n            }, i)\\n            break\\n        case '导入海阔':\\n            d.url = $('#noLoading#').lazyRule((i) => {\\n                let data = $.require('hiker://page/dataLoad?rule=' + getMyVar('myCollection'), true)\\n                return 'rule://' + base64Encode(JSON.stringify(data[i]))\\n            }, i)\\n            break\\n    }\\n    el.push(d)\\n})\\nsetResult(el)\\n\"},{\"col_type\":\"movie_3\",\"name\":\"页面载入\",\"path\":\"frameLoad\",\"rule\":\"js:\\nconst QING_TITLE = getMyVar('myCollection')\\nvar myColl_el = []\\neval(JSON.parse(fetch('hiker://page/hijackEnv?rule=' + QING_TITLE)).rule)\\n\\nif (!isIndex) {\\n    if (pageTitle) setPageTitle(pageTitle)\\n    setLastChapterRule(oriRULE.last_chapter_rule)\\n    MY_PARAMS = MY_RULE.params\\n} else if (MY_PAGE == 1) {\\n    tabHeader.load(myColl_el)\\n    if (RULE.search_url) myColl_el.push({\\n        title: \\\"搜索\\\",\\n        desc: \\\"这是轻合集的搜索哦~~\\\",\\n        url: '\\\"hiker://search?s=\\\"+input',\\n        extra: {\\n            rules: $.toString((QING_TITLE, title) => {\\n                let rules = $.require('hiker://page/dataLoad?rule=' + QING_TITLE)\\n                rules = [rules.find((v) => v.title == title)]\\n                return JSON.stringify(rules)\\n            }, QING_TITLE, RULE.title),\\n            defaultValue: getMyVar('searchKey', ''),\\n            onChange: \\\"putMyVar('searchKey',input)\\\"\\n        },\\n        col_type: \\\"input\\\",\\n    })\\n}\\n// 正文解析\\nvar {\\n    paramHandle,\\n    runPreRule,\\n    genExUrl,\\n    hijackLazyRule\\n} = $.require('hiker://page/funcTools?rule=' + QING_TITLE)\\nrunPreRule(oriRULE.preRule)\\nif (MY_RULE.find_rule.startsWith('js:')) {\\n    let { hijackEl } = $.require('hiker://page/funcTools?rule=' + QING_TITLE)\\n    setResult = function(param0, param1, param2, param3) {\\n        param1 = CALLBACK_KEY\\n        param2 = MY_RULE\\n        param3 = MY_TYPE\\n        if (Array.isArray(param0.data)) param0 = param0.data\\n        Array.prototype.push.apply(myColl_el, param0.map(hijackEl))\\n        method_setResult.invoke(javaContext, myColl_el, param1, param2, param3)\\n    }\\n    setHomeResult = setResult\\n    setSearchResult = setResult\\n\\n    eval(MY_RULE.find_rule.slice(3))\\n} else {\\n    let { runCode } = $.require('hiker://page/funcTools?rule=' + QING_TITLE),\\n        [_, findRule, detailFindRule] = MY_RULE.find_rule.match(/^([\\\\s\\\\S]*?)(?:==>([\\\\s\\\\S]*))?$/)\\n    findRule = findRule.split(';')\\n    parseDomForArray(getResCode(), findRule.shift()).forEach((data) => {\\n        let [title, img, desc, url] = findRule.map((v, i) => {\\n                try {\\n                    if (v == '*') return ''\\n                    else v = (i == 1 || i == 3) ?\\n                        parseDom(data, v) :\\n                        parseDomForHtml(data, v)\\n                    if (i != 3) v = runCode(v)\\n                    return v\\n                } catch (e) { return '' }\\n            }),\\n            res = {\\n                title: title, url: url,\\n                desc: desc, img: img,\\n                col_type: MY_RULE.col_type\\n            }\\n        if (res.url) {\\n            if (res.url.includes('@lazyRule=')) {\\n                let reIndex = res.url.indexOf('.js:')\\n                if (reIndex >= 0) res.url = res.url.slice(0, reIndex) + '.js:' + hijackLazyRule + ';' + res.url.slice(reIndex + 4)\\n            } else  if (detailFindRule) {\\n                res.extra = {\\n                    url: genExUrl(url),\\n                    RULE: base64Encode(JSON.stringify(Object.assign(genMyRule(), { detail_find_rule: detailFindRule }))),\\n                    pageTitle: isIndex && title\\n                }\\n                res.url = 'hiker://page/frameLoad?rule=' + QING_TITLE\\n            } else if (MY_RULE.detail_find_rule) {\\n                res.extra = {\\n                    url: genExUrl(url),\\n                    RULE: base64Encode(JSON.stringify(genMyRule())),\\n                    pageTitle: isIndex && title\\n                }\\n                res.url = 'hiker://page/frameLoad?rule=' + QING_TITLE\\n            }\\n        }\\n        myColl_el.push(res)\\n    })\\n    setResult(myColl_el)\\n}\\n\"},{\"col_type\":\"movie_3\",\"name\":\"数据载入\",\"path\":\"dataLoad\",\"rule\":\"let showAll = $.importParam,\\n    url = getMyVar('remoteUrl'),\\n    data = []\\nif (url.startsWith('hiker://') || url.startsWith('file://')) {\\n    // 如果为本地文件则不进行缓存\\n    try {\\n        let oriData = fetch(url)\\n        if (url.startsWith('hiker://page/'))\\n            oriData = JSON.parse(oriData).rule\\n        data = JSON.parse(oriData)\\n    } catch (e) {}\\n} else {\\n    // 获取远程数据，检查间隔默认一天\\n    let interval = parseInt(readFile('updateInterval') || '1'),\\n        oldData = fetch('hiker://files/libs/' + md5(url) + '.js'),\\n        remoteData = []\\n    if (interval == 0) interval = -1\\n    try { remoteData = JSON.parse(fetchCache(url, 24 * interval, { timeout: 50000 })) } catch (e) {}\\n    if (!Array.isArray(remoteData)) remoteData = []\\n    if (remoteData.length < 3) {\\n        log('未获取到数据')\\n        if (oldData) writeFile('hiker://files/libs/' + md5(url) + '.js', oldData)\\n        data = JSON.parse(oldData || '[]')\\n    } else {\\n        log('已获取到数据')\\n        data = remoteData\\n    }\\n}\\ndata = data.filter((v) => v.title != getMyVar('myCollection') && !(v.author || '').includes('轻合集生成器'))\\nif (readFile('disableCustom')) $.exports = data\\nelse { // 写入自定义数据\\n    let customData = JSON.parse(readFile('customData') || '[]'),\\n        rewriteData = []\\n    customData = customData.reduce((self, v) => {\\n        let index = data.findIndex((vv) => v.title == vv.title)\\n        if (index >= 0) {\\n            self.push(v)\\n            let rule = data.splice(index, 1)[0]\\n            if (showAll || v.visible)\\n                rewriteData.push(Object.assign(rule, v))\\n        }\\n        return self\\n    }, [])\\n    data.forEach((v) => customData.push({ title: v.title, visible: true }))\\n    saveFile('customData', JSON.stringify(customData))\\n    $.exports = rewriteData.concat(data)\\n}\\n\"},{\"col_type\":\"movie_3\",\"name\":\"环境劫持\",\"path\":\"hijackEnv\",\"rule\":\"var { RULE, isIndex, pageTitle } = MY_PARAMS\\nRULE = JSON.parse(base64Decode(RULE))\\nvar oriRULE = $.require('hiker://page/dataLoad?rule=' + QING_TITLE).find((v) => v.title == RULE.title)\\nif (isIndex) {\\n    RULE = oriRULE\\n    var { tabHeader, fyAll } = $.require('hiker://page/ClassTab?rule=' + QING_TITLE, Object.assign({ QING_TITLE: QING_TITLE }, RULE))\\n    // 处理MY_RULE\\n    MY_RULE.class_url = tabHeader.getClass(fyAll ? 'fyAll' : 'fyclass').url\\n    MY_RULE.area_url = fyAll ? MY_RULE.class_url : tabHeader.getClass('fyarea').url\\n    MY_RULE.year_url = fyAll ? MY_RULE.class_url : tabHeader.getClass('fyyear').url\\n    MY_RULE.sort_url = fyAll ? MY_RULE.class_url : tabHeader.getClass('fysort').url\\n    MY_RULE.url = RULE.url\\n    MY_RULE.col_type = RULE.col_type\\n    MY_RULE.detail_col_type = RULE.detail_col_type\\n    MY_RULE.find_rule = RULE.find_rule\\n    MY_RULE.detail_find_rule = RULE.detail_find_rule\\n    MY_RULE.params = {}\\n} else {\\n    RULE.pages = oriRULE.pages\\n    // 处理MY_RULE\\n    MY_RULE.url = MY_PARAMS.url\\n    MY_RULE.col_type = RULE.detail_col_type\\n    MY_RULE.find_rule = RULE.detail_find_rule\\n    MY_RULE.params = RULE.params\\n}\\nMY_RULE.pages = RULE.pages\\nMY_RULE.pageList = JSON.parse(MY_RULE.pages || '[]')\\nMY_RULE.title = RULE.title\\nMY_RULE.ua = RULE.ua\\nlog(MY_RULE.url)\\n// 载入函数工具\\nvar { genMyRule } = $.require('hiker://page/funcTools?rule=' + QING_TITLE, {\\n    QING_TITLE: QING_TITLE,\\n    MY_RULE: MY_RULE,\\n    isIndex: isIndex\\n})\\n// 防止require多次运行\\nconst myColl_required = {}\\nrequire = function(param0, param1, param2, param3, param4) {\\n    if (myColl_required[param0]) return\\n    myColl_required[param0] = true\\n    param2 = param2 != null ? param2 : 0\\n    param3 = MY_TICKET\\n    param4 = eval\\n    return method_require.invoke(javaContext, param0, param1, param2, param3, param4)\\n}\\nrequireCache = function(param0, param1, param2, param3, param4, param5) {\\n    if (myColl_required[param0]) return\\n    myColl_required[param0] = true\\n    param3 = param3 != null ? param3 : 0\\n    param4 = MY_TICKET\\n    param5 = eval\\n    return method_requireCache.invoke(javaContext, param0, param1, param2, param3, param4, param5)\\n}\\nrc = requireCache\\n// 最新章节规则环境劫持\\nsetLastChapterRule = function(param0) {\\n    if (param0.startsWith(\\\"js:\\\")) {\\n        param0 = 'js:' + $.toString((QING_TITLE, MY_PARAMS) => {\\n            eval(JSON.parse(fetch('hiker://page/hijackEnv?rule=' + QING_TITLE)).rule)\\n            var { runPreRule } = $.require('hiker://page/funcTools?rule=' + QING_TITLE)\\n            runPreRule(oriRULE.preRule)\\n        }, QING_TITLE, { url: MY_RULE.url, RULE: base64Encode(JSON.stringify(genMyRule())), isIndex: isIndex }) + ';' + param0.slice(3)\\n    }\\n    method_setLastChapterRule.invoke(javaContext, param0)\\n}\\n// 动态新增函数劫持\\naddItemAfter = function(param0, param1) {\\n    if (Array.isArray(param1)) param1 = param1.map(hijackEl)\\n    else param1 = hijackEl(param1)\\n    method_addItemAfter.invoke(javaContext, param0, param1)\\n}\\naddItemBefore = function(param0, param1) {\\n    if (Array.isArray(param1)) param1 = param1.map(hijackEl)\\n    else param1 = hijackEl(param1)\\n    method_addItemBefore.invoke(javaContext, param0, param1)\\n}\\n\"},{\"col_type\":\"movie_3\",\"name\":\"函数工具\",\"path\":\"funcTools\",\"rule\":\"let { QING_TITLE, MY_RULE, isIndex } = $.importParam\\nif (!MY_RULE) MY_RULE = {}\\n\\nfunction runCode(rule) {\\n    try {\\n        let [input, code] = rule.split('.js:')\\n        return code ? eval(code) : rule\\n    } catch (e) { return rule }\\n}\\n// 首页链接替换分类\\nfunction indexUrl(param) {\\n    MY_RULE = JSON.parse(base64Decode(MY_RULE))\\n    let pageNum = parseInt(param.split('###')[1]),\\n        url = MY_RULE.url,\\n        { fyAll, tabHeader } = $.require('hiker://page/ClassTab?rule=' + QING_TITLE, Object.assign({ QING_TITLE: QING_TITLE }, MY_RULE))\\n\\n    url = tabHeader.setUrl(fyAll ? url.replace(/fyAll/g, '$${fyAll}') : url.replace(/fy(class|area|year|sort)/g, '$${fy$1}'))\\n    url = url.replace(/fypage(?:@(-?\\\\d+)@)?(?:\\\\*(\\\\d+)@)?/g, (_, start, space) => parseInt(start || 0) + 1 + (pageNum - 1) * parseInt(space || 1))\\n    url = /^([\\\\s\\\\S]*?)(?:\\\\[firstPage=([\\\\s\\\\S]*?)\\\\])?(?:(\\\\.js:[\\\\s\\\\S]*?))?$/.exec(url)\\n    if (pageNum == 1 && url[2]) url[1] = url[2]\\n    if (url[3] && !url[1].includes('.js:')) url[1] += url[3]\\n    return runCode(url[1])\\n}\\n\\nfunction paramHandle(urlParam, ua, urlTmp) {\\n    let charset, paramTmp\\n    try { // 链接的编码、UA和Referer应该是首先继承首页链接\\n        [, , charset, paramTmp] = urlTmp.split(';')\\n        paramTmp = paramTmp.match(/^{(.*)}$/)[1].split('&&')\\n    } catch (e) { paramTmp = [] }\\n    let UserAgent = paramTmp.find((v) => v.startsWith('User-Agent@')),\\n        Referer = paramTmp.find((v) => v.startsWith('Referer@'))\\n    urlParam[0] = urlParam[0] || 'GET'\\n    urlParam[1] = urlParam[1] || charset || 'UTF-8'\\n    try {\\n        urlParam[2] = urlParam[2].match(/^{(.*)}$/)[1].split('&&')\\n    } catch (e) { urlParam[2] = [] }\\n    // 添加全局UA和上级Referer\\n    if (!urlParam[2].some((v) => v.startsWith('User-Agent@'))) {\\n        if (UserAgent) urlParam[2].push(UserAgent)\\n        else if (ua == 'pc')\\n            urlParam[2].push('User-Agent@' + PC_UA.replace(/;/g, '；；').replace(/\\\\?/, '？？'))\\n        else if (ua == 'mobile')\\n            urlParam[2].push('User-Agent@' + MOBILE_UA.replace(/;/g, '；；').replace(/\\\\?/, '？？'))\\n    }\\n    if (Referer && !urlParam[2].some((v) => v.startsWith('Referer@')))\\n        urlParam[2].push(Referer)\\n    urlParam[2] = '{' + urlParam[2].join('&&') + '}'\\n    return urlParam.join(';')\\n}\\n// 预处理并初始化config\\nfunction runPreRule(rule) {\\n    if ((typeof MY_PAGE != 'undefined' &&  MY_PAGE == 1) &&\\n         (isIndex || !getMyVar('$preRule_' + MY_RULE.title))) {\\n        eval(rule)\\n        putMyVar('$preRule_' + MY_RULE.title, 'T')\\n    }\\n    let _cfg = getMyVar('initConfig', '{}')\\n    if (_cfg && _cfg.length > 0) {\\n        config = JSON.parse(_cfg)\\n    }\\n}\\n// 正文解析通用变量\\nfunction genMyRule() {\\n    let RULE = Object.assign({}, MY_RULE)\\n    delete RULE.last_chapter_rule\\n    delete RULE.preRule\\n    delete RULE.pageList\\n    delete RULE.pages\\n    return RULE\\n}\\n\\nfunction genExUrl(url) {\\n    url = url.split(';')\\n    return url.shift() + ';' + paramHandle(url, MY_RULE.ua, MY_RULE.url)\\n}\\n\\nhijackLazyRule = $.toString((QING_TITLE, MY_PARAMS) => {\\n    if (!MY_RULE) MY_RULE = {}\\n    MY_PARAMS = JSON.parse(base64Decode(MY_PARAMS))\\n    eval(JSON.parse(fetch('hiker://page/hijackEnv?rule=' + QING_TITLE)).rule)\\n    var {\\n        paramHandle,\\n        genExUrl,\\n        hijackLazyRule,\\n        hijackEl\\n    } = $.require('hiker://page/funcTools?rule=' + QING_TITLE)\\n}, QING_TITLE, base64Encode(JSON.stringify({ url: MY_RULE.url, RULE: base64Encode(JSON.stringify(genMyRule())), isIndex: isIndex })))\\n\\nfunction hijackEl(el) {\\n    if(!el || typeof el != 'object') return\\n    if (!el.extra) el.extra = {}\\n    el.col_type = el.col_type || MY_RULE.col_type\\n    let NOW_RULE = Object.assign(genMyRule(), { params: el.extra })\\n\\n    if (typeof el.url != 'string' ||\\n        ['x5_webview_single', 'input'].some((v) => el.col_type == v) ||\\n        ['海阔视界', 'javascript:'].some((v) => el.url.startsWith(v)) ||\\n        ['rule', 'pics', 'toast', 'copy', 'editFile', 'x5', 'x5WebView', 'x5Play', 'web', 'x5Rule', 'webRule',\\n            'download', 'share', 'fileSelect', 'video'].some((v) => el.url.startsWith(v + '://'))) {\\n        return el\\n    } else if (el.url.startsWith('input://')) {\\n        let para = JSON.parse(el.url.slice(8))\\n        if (para.js) para.js = hijackLazyRule + ';' + para.js\\n        el.url = 'input://' + JSON.stringify(para)\\n        return el\\n    } else if (el.url.startsWith('confirm://')) {\\n        let reIndex = el.url.indexOf('.js:')\\n        if (reIndex >= 0) el.url = el.url.slice(0, reIndex) + '.js:' + hijackLazyRule + ';' + el.url.slice(reIndex + 4)\\n        return el\\n    } else if (el.url.startsWith('select://')) {\\n        let para = JSON.parse(el.url.slice(9))\\n        if (para.js) para.js = hijackLazyRule + ';' + para.js\\n        el.url = 'select://' + JSON.stringify(para)\\n        return el\\n    } else if (el.url.includes('@rule=')) {\\n        let [_, url, rule] = el.url.match(/^([\\\\s\\\\S]*?)@rule=([\\\\s\\\\S]*)$/)\\n        el.url = url\\n        NOW_RULE.detail_find_rule = rule\\n        NOW_RULE.detail_col_type = MY_RULE.col_type\\n    } else if (el.url.startsWith('hiker://page/')) {\\n        if (el.url.includes('rule=') || el.extra.rule)\\n            return el\\n        let [_, path, flag, params] = el.url.match(/^hiker:\\\\/\\\\/page\\\\/(.+?)(#.*?)?(?:\\\\?(.*))?$/),\\n            subPage = MY_RULE.pageList.find((v) => v.path == path),\\n            subUrl = (params || '').split('&').find((v) => v.startsWith('url='))\\n        el.url = (subUrl ? subUrl.slice(4).replace(/？？/g, '?').replace(/＆＆/g, '&') : (el.extra || {}).url) || 'hiker://empty' + flag + '?' + (params || '')\\n        NOW_RULE.detail_find_rule = subPage.rule\\n        NOW_RULE.detail_col_type = subPage.col_type\\n    } else if (el.url.includes('@lazyRule=')) {\\n        let reIndex = el.url.indexOf('.js:')\\n        if (reIndex >= 0) el.url = el.url.slice(0, reIndex) + '.js:' + hijackLazyRule + ';' + el.url.slice(reIndex + 4)\\n        return el\\n    } else if (isIndex) {\\n        if (!MY_RULE.detail_find_rule || /hiker:\\\\/\\\\/(?!empty.+$)/.test(el.url)) return el\\n    } else {\\n        return el\\n    }\\n    el.extra = Object.assign({}, el.extra, {\\n        url: genExUrl(el.url),\\n        RULE: base64Encode(JSON.stringify(NOW_RULE)),\\n        pageTitle: isIndex && el.title\\n    })\\n    el.url = 'hiker://page/frameLoad?rule=' + QING_TITLE\\n    return el\\n}\\n$.exports = {\\n    runCode: runCode,\\n    indexUrl: indexUrl,\\n    paramHandle: paramHandle,\\n    runPreRule: runPreRule,\\n    genMyRule: genMyRule,\\n    genExUrl: genExUrl,\\n    hijackLazyRule: hijackLazyRule,\\n    hijackEl: hijackEl\\n}\\n\"}]","proxy":"","icon":"http://q1.qlogo.cn/g?b=qq&nk=36835891&s=640"},{"last_chapter_rule":"","pageList":[{"col_type":"text_1","name":"ClassTab","path":"ClassTab","rule":"var {\n    QING_TITLE, title, url,\n    class_name, class_url,\n    area_name, area_url,\n    year_name, year_url,\n    sort_name, sort_url\n} = $.importParam\nconst ClassTab = function(classArray, params) {\n    Object.assign(this, params)\n    this.arr = classArray.map(v => this.init(v))\n    this.sign = '$' + QING_TITLE + '_' + (this.name || '') + '_'\n    this.color = this.color || '#12b668'\n    this.boundary = this.boundary || 'blank_block'\n}\nClassTab.prototype = {\n    constructor: ClassTab,\n    load(el) {\n        let folded = this.fold && getVar('$fold_' + this.sign, '')\n        if (this.arr.length > 1 && this.fold) el.push({\n            title: '““””' + (folded ? '▶' : '▼').fontcolor('#049eff'),\n            url: $('#noLoading#').lazyRule((sign, folded) => {\n                putVar('$fold_' + sign, folded ? '' : 'T')\n                refreshPage(false)\n                return 'hiker://empty'\n            }, this.sign, folded),\n            col_type: 'scroll_button'\n        })\n        let arr = folded ? [this.arr[0]] : this.arr\n        arr.forEach((v) => {\n            let { id, class_name, class_url } = v,\n            selected = JSON.stringify(this.getClass(id))\n            class_name.forEach((name, i) => {\n                let url = class_url[i],\n                    now = JSON.stringify({ name: name, url: url })\n                el.push({\n                    title: selected == now ? '““””' + name.fontcolor(this.color).bold() : name,\n                    url: selected == now ? 'hiker://empty' : $('#noLoading#').lazyRule((sign, id, now) => {\n                        putVar(sign + id, now)\n                        refreshPage(false)\n                        return 'hiker://empty'\n                    }, this.sign, id, now),\n                    col_type: 'scroll_button'\n                })\n            })\n            el.push({ col_type: this.boundary })\n        })\n    },\n    init(classObject) {\n        if (typeof classObject.class_name == 'string')\n            classObject.class_name = classObject.class_name.split('&')\n        if (typeof classObject.class_url == 'string')\n            classObject.class_url = classObject.class_url.split('&').map((v) => v.trim())\n        return classObject\n    },\n    push(classObject) {\n        this.arr.push(this.init(classObject))\n    },\n    getClass(id) {\n        let defaultClass = this.arr.find(item => item.id == id)\n        defaultClass = JSON.stringify(defaultClass ? {\n            name: defaultClass.class_name[0],\n            url: defaultClass.class_url[0]\n        } : { name:  'cannot find id: ' + id + ' in classTab: ' + this.sign, url: ''})\n        return JSON.parse(getVar(this.sign + id, defaultClass))\n    },\n    setUrl(url) {\n        return url.replace(/\\$\\{([^}]*)\\}/g, (_, id) => this.getClass(id).url)\n    }\n}\n// 生成头部分类\nlet fyAll = url.includes('fyAll'),\n    tabHeader = []\nif (class_name) tabHeader.push({\n    id: fyAll ? 'fyAll' : 'fyclass',\n    class_name: class_name,\n    class_url: class_url\n})\nif (area_name) tabHeader.push({\n    id: fyAll ? 'fyAll' : 'fyarea',\n    class_name: area_name,\n    class_url: area_url\n})\nif (year_name) tabHeader.push({\n    id: fyAll ? 'fyAll' : 'fyyear',\n    class_name: year_name,\n    class_url: year_url\n})\nif (sort_name) tabHeader.push({\n    id: fyAll ? 'fyAll' : 'fysort',\n    class_name: sort_name,\n    class_url: sort_url\n})\n$.exports = {\n    fyAll: fyAll,\n    tabHeader: new ClassTab(tabHeader, { name: title, fold: readFile('tabFold'), })\n}\n"},{"col_type":"icon_2_round","name":"设置","path":"Config","rule":"js:\naddListener('onClose', 'clearMyVar(\"sortFlag\");refreshPage()')\nsetPageTitle('⚙ 轻合集设置 ⚙')\nconst QING_TITLE = getMyVar('myCollection'),\n    url = getMyVar('remoteUrl')\nlet data = $.require('hiker://page/dataLoad?rule=' + QING_TITLE, true),\n    el = [{\n        title: '<b> 清除缓存，立即更新 <small> （基于远程仓库，不要频繁点击）',\n        url: $('#noLoading#').lazyRule((url) => {\n            if (url.startsWith('hiker://') || url.startsWith('file://'))\n                return 'toast://仓库为本地文件，不会进行缓存，本功能也无效'\n            deleteCache(url)\n            back(false)\n            return 'toast://已更新'\n        }, url),\n        img: 'hiker://images/icon4',\n        col_type: 'avatar'\n    }],\n    updateInterval = readFile('updateInterval') || '1',\n    newWindow = readFile('newWindow'),\n    tabFold = readFile('tabFold'),\n    disableCustom = readFile('disableCustom'),\n    editMode = disableCustom ? '导入海阔' : getMyVar('editMode', '启用/禁用')\n\nel.push({\n    title: '  💡 更新频率: ' + (updateInterval == 0 ? '手动' : updateInterval + '天') + '  ',\n    url: $(updateInterval, '输入更新间隔（天），为0则手动更新\\n本地文件链接无效').input(() => {\n        input = parseInt(input)\n        if (Number.isNaN(input)) input = 1\n        else if (input < 1) input = 0\n        saveFile('updateInterval', input.toString())\n        refreshPage()\n        return 'hiker://empty'\n    }),\n    col_type: 'scroll_button'\n}, {\n    title: '  🖥 独立首页: ' + (newWindow ? '是' : '否') + '  ',\n    url: $('#noLoading#').lazyRule((newWindow) => {\n        saveFile('newWindow', newWindow ? '' : 'T')\n        refreshPage()\n        return 'hiker://empty'\n    }, newWindow),\n    col_type: 'scroll_button'\n}, {\n    title: '  💠 分类折叠: ' + (tabFold ? '是' : '否') + '  ',\n    url: $('#noLoading#').lazyRule((tabFold) => {\n        saveFile('tabFold', tabFold ? '' : 'T')\n        refreshPage()\n        return 'hiker://empty'\n    }, tabFold),\n    col_type: 'scroll_button'\n}, {\n    title: '  💼 备份恢复  ',\n    url: $(['备份', '恢复'], 1).select((QING_TITLE, updateInterval, newWindow, tabFold, disableCustom) => {\n        let url = getMyVar('remoteUrl')\n        if (!url.startsWith('hiker://') && !url.startsWith('file://'))\n            url = 'hiker://files/libs/' + md5(url) + '.js'\n        else if (url.startsWith('hiker://page/')) url = 'hiker://empty'\n        if (input == '备份') return $('hiker://files/tmp/' + QING_TITLE + '_backup.json', '输入备份路径')\n            .input((url, updateInterval, newWindow, tabFold, disableCustom) => {\n                let rules = request(url),\n                    customData = readFile('customData')\n                writeFile(input, JSON.stringify({\n                    updateInterval: updateInterval,\n                    newWindow: newWindow,\n                    tabFold: tabFold,\n                    disableCustom: disableCustom,\n                    customData: customData,\n                    rules: rules\n                }))\n                return 'toast://已备份，注意若仓库为子页面则不备份'\n            }, url, updateInterval, newWindow, tabFold, disableCustom)\n        else return $('hiker://files/tmp/' + QING_TITLE + '_backup.json', '输入备份路径').input((url) => {\n            let { updateInterval, newWindow, tabFold, disableCustom, customData, rules } = JSON.parse(request(input))\n            saveFile('updateInterval', updateInterval)\n            saveFile('newWindow', newWindow)\n            saveFile('tabFold', tabFold)\n            saveFile('disableCustom', disableCustom)\n            saveFile('customData', customData)\n            if (rules) writeFile(url, rules)\n            refreshPage()\n            return 'toast://已恢复，如果不想同步远程仓库，可以设置更新频率为手动'\n        }, url)\n    }, QING_TITLE, updateInterval, newWindow, tabFold, disableCustom),\n    col_type: 'scroll_button'\n}, {\n    title: '““””<font color=\"#666666\"><small>特别鸣谢，小程序提供者：\\n' +\n        data.reduce((self, v) => v.author ? self.concat(v.author.split('&')) : self, [])\n        .filter((v, i, arr) => v && arr.indexOf(v) == i).join('、'),\n    url: 'hiker://empty',\n    col_type: 'text_center_1'\n})\n\nel.push({ col_type: 'line' }, {\n    title: '““””' + '📝'.small() + '&nbsp 轻合集自定义 &nbsp'.bold().fontcolor('#757575') + (disableCustom ? '❌' : '⭕').small(),\n    url: $([(disableCustom ? '启用' : '禁用') + '合集自定义', '清除自定义数据', '编辑JSON'], 1).select(() => {\n        switch (input.slice(0, 2)) {\n            case '清除':\n                deleteFile('customData')\n                break\n            case '启用':\n                saveFile('disableCustom', '')\n                break\n            case '禁用':\n                saveFile('disableCustom', 'T')\n                input += '\\n小程序启用/禁用、重新排序等操作均不会体现在首页小程序列表中'\n                break\n            case '编辑':\n                let url = getMyVar('remoteUrl')\n                if (!url.startsWith('hiker://files/') && !url.startsWith('file://'))\n                    url = 'hiker://files/libs/' + md5(url) + '.js'\n                return  'hiker://page/interface#noRefresh##noHistory##noRecordHistory#?rule=JSON编辑器&Json='+base64Encode(url)\n        }\n        refreshPage(false)\n        return 'toast://已' + input\n    }),\n    col_type: 'text_center_1',\n    extra: { lineVisible: false }\n});\n(disableCustom ? ['导入海阔'] : ['启用/禁用', '重新排序', '更改图标', '导入海阔']).forEach((v) => {\n    el.push({\n        title: v == editMode ? '““””' + v.bold().fontcolor('#12b668') : v,\n        url: v == editMode ? 'hiker://empty' : $('#noLoading#').lazyRule((v) => {\n            putMyVar('editMode', v)\n            refreshPage(false)\n            return 'hiker://empty'\n        }, v),\n        col_type: 'scroll_button'\n    })\n});\nif (editMode == '导入海阔') el.push({\n    title: '全部导入',\n    url: '海阔视界￥home_rule_url￥' + (url.startsWith('hiker://') || url.startsWith('file://') ? url : 'hiker://files/libs/' + md5(url) + '.js'),\n    col_type: 'text_center_1',\n    extra: { lineVisible: false }\n});\n(disableCustom ? data : JSON.parse(readFile('customData') || '[]')).forEach((v, i) => {\n    let d = { title: v.title, img: data[i].icon }\n    switch (editMode) {\n        case '启用/禁用':\n            d.title = (v.visible ? '🟢  ' : '🔴  ') + d.title\n            d.url = $('#noLoading#').lazyRule((i) => {\n                let rules = JSON.parse(readFile('customData') || '[]')\n                rules[i].visible = !rules[i].visible\n                saveFile('customData', JSON.stringify(rules))\n                refreshPage(false)\n                return 'hiker://empty'\n            }, i)\n            break\n        case '重新排序':\n            let sortFlag = parseInt(getMyVar('sortFlag', '-1'))\n            d.title = (sortFlag == i ? '🔃  ' : '') + d.title\n            if (sortFlag == -1)\n                d.url = $('#noLoading#').lazyRule((i) => {\n                    putMyVar('sortFlag', i.toString())\n                    refreshPage(false)\n                    return 'toast://选择要移动到的位置'\n                }, i)\n            else\n                d.url = $('#noLoading#').lazyRule((oldIndex, newIndex) => {\n                    let rules = JSON.parse(readFile('customData') || '[]')\n                    rules.splice(newIndex, 0, rules.splice(oldIndex, 1)[0])\n                    saveFile('customData', JSON.stringify(rules))\n                    putMyVar('sortFlag', '-1')\n                    refreshPage(false)\n                    return 'hiker://empty'\n                }, sortFlag, i)\n            break\n        case '更改图标':\n            d.url = $(v.icon || '', '输入新图标地址或颜色代码：').input((i) => {\n                let rules = JSON.parse(readFile('customData') || '[]')\n                if (input)\n                    rules[i].icon = input\n                else\n                    delete rules[i].icon\n                saveFile('customData', JSON.stringify(rules))\n                refreshPage(false)\n                return 'hiker://empty'\n            }, i)\n            break\n        case '导入海阔':\n            d.url = $('#noLoading#').lazyRule((i) => {\n                let data = $.require('hiker://page/dataLoad?rule=' + getMyVar('myCollection'), true)\n                return 'rule://' + base64Encode(JSON.stringify(data[i]))\n            }, i)\n            break\n    }\n    el.push(d)\n})\nsetResult(el)\n"},{"col_type":"movie_3","name":"页面载入","path":"frameLoad","rule":"js:\nconst QING_TITLE = getMyVar('myCollection')\nvar myColl_el = []\neval(JSON.parse(fetch('hiker://page/hijackEnv?rule=' + QING_TITLE)).rule)\n\nif (!isIndex) {\n    if (pageTitle) setPageTitle(pageTitle)\n    setLastChapterRule(oriRULE.last_chapter_rule)\n    MY_PARAMS = MY_RULE.params\n} else if (MY_PAGE == 1) {\n    tabHeader.load(myColl_el)\n    if (RULE.search_url) myColl_el.push({\n        title: \"搜索\",\n        desc: \"这是轻合集的搜索哦~~\",\n        url: '\"hiker://search?s=\"+input',\n        extra: {\n            rules: $.toString((QING_TITLE, title) => {\n                let rules = $.require('hiker://page/dataLoad?rule=' + QING_TITLE)\n                rules = [rules.find((v) => v.title == title)]\n                return JSON.stringify(rules)\n            }, QING_TITLE, RULE.title),\n            defaultValue: getMyVar('searchKey', ''),\n            onChange: \"putMyVar('searchKey',input)\"\n        },\n        col_type: \"input\",\n    })\n}\n// 正文解析\nvar {\n    paramHandle,\n    runPreRule,\n    genExUrl,\n    hijackLazyRule\n} = $.require('hiker://page/funcTools?rule=' + QING_TITLE)\nrunPreRule(oriRULE.preRule)\nif (MY_RULE.find_rule.startsWith('js:')) {\n    let { hijackEl } = $.require('hiker://page/funcTools?rule=' + QING_TITLE)\n    setResult = function(param0, param1, param2, param3) {\n        param1 = CALLBACK_KEY\n        param2 = MY_RULE\n        param3 = MY_TYPE\n        if (Array.isArray(param0.data)) param0 = param0.data\n        Array.prototype.push.apply(myColl_el, param0.map(hijackEl))\n        method_setResult.invoke(javaContext, myColl_el, param1, param2, param3)\n    }\n    setHomeResult = setResult\n    setSearchResult = setResult\n\n    eval(MY_RULE.find_rule.slice(3))\n} else {\n    let { runCode } = $.require('hiker://page/funcTools?rule=' + QING_TITLE),\n        [_, findRule, detailFindRule] = MY_RULE.find_rule.match(/^([\\s\\S]*?)(?:==>([\\s\\S]*))?$/)\n    findRule = findRule.split(';')\n    parseDomForArray(getResCode(), findRule.shift()).forEach((data) => {\n        let [title, img, desc, url] = findRule.map((v, i) => {\n                try {\n                    if (v == '*') return ''\n                    else v = (i == 1 || i == 3) ?\n                        parseDom(data, v) :\n                        parseDomForHtml(data, v)\n                    if (i != 3) v = runCode(v)\n                    return v\n                } catch (e) { return '' }\n            }),\n            res = {\n                title: title, url: url,\n                desc: desc, img: img,\n                col_type: MY_RULE.col_type\n            }\n        if (res.url) {\n            if (res.url.includes('@lazyRule=')) {\n                let reIndex = res.url.indexOf('.js:')\n                if (reIndex >= 0) res.url = res.url.slice(0, reIndex) + '.js:' + hijackLazyRule + ';' + res.url.slice(reIndex + 4)\n            } else  if (detailFindRule) {\n                res.extra = {\n                    url: genExUrl(url),\n                    RULE: base64Encode(JSON.stringify(Object.assign(genMyRule(), { detail_find_rule: detailFindRule }))),\n                    pageTitle: isIndex && title\n                }\n                res.url = 'hiker://page/frameLoad?rule=' + QING_TITLE\n            } else if (MY_RULE.detail_find_rule) {\n                res.extra = {\n                    url: genExUrl(url),\n                    RULE: base64Encode(JSON.stringify(genMyRule())),\n                    pageTitle: isIndex && title\n                }\n                res.url = 'hiker://page/frameLoad?rule=' + QING_TITLE\n            }\n        }\n        myColl_el.push(res)\n    })\n    setResult(myColl_el)\n}\n"},{"col_type":"movie_3","name":"数据载入","path":"dataLoad","rule":"let showAll = $.importParam,\n    url = getMyVar('remoteUrl'),\n    data = []\nif (url.startsWith('hiker://') || url.startsWith('file://')) {\n    // 如果为本地文件则不进行缓存\n    try {\n        let oriData = fetch(url)\n        if (url.startsWith('hiker://page/'))\n            oriData = JSON.parse(oriData).rule\n        data = JSON.parse(oriData)\n    } catch (e) {}\n} else {\n    // 获取远程数据，检查间隔默认一天\n    let interval = parseInt(readFile('updateInterval') || '1'),\n        oldData = fetch('hiker://files/libs/' + md5(url) + '.js'),\n        remoteData = []\n    if (interval == 0) interval = -1\n    try { remoteData = JSON.parse(fetchCache(url, 24 * interval, { timeout: 50000 })) } catch (e) {}\n    if (!Array.isArray(remoteData)) remoteData = []\n    if (remoteData.length < 3) {\n        log('未获取到数据')\n        if (oldData) writeFile('hiker://files/libs/' + md5(url) + '.js', oldData)\n        data = JSON.parse(oldData || '[]')\n    } else {\n        log('已获取到数据')\n        data = remoteData\n    }\n}\ndata = data.filter((v) => v.title != getMyVar('myCollection') && !(v.author || '').includes('轻合集生成器'))\nif (readFile('disableCustom')) $.exports = data\nelse { // 写入自定义数据\n    let customData = JSON.parse(readFile('customData') || '[]'),\n        rewriteData = []\n    customData = customData.reduce((self, v) => {\n        let index = data.findIndex((vv) => v.title == vv.title)\n        if (index >= 0) {\n            self.push(v)\n            let rule = data.splice(index, 1)[0]\n            if (showAll || v.visible)\n                rewriteData.push(Object.assign(rule, v))\n        }\n        return self\n    }, [])\n    data.forEach((v) => customData.push({ title: v.title, visible: true }))\n    saveFile('customData', JSON.stringify(customData))\n    $.exports = rewriteData.concat(data)\n}\n"},{"col_type":"movie_3","name":"环境劫持","path":"hijackEnv","rule":"var { RULE, isIndex, pageTitle } = MY_PARAMS\nRULE = JSON.parse(base64Decode(RULE))\nvar oriRULE = $.require('hiker://page/dataLoad?rule=' + QING_TITLE).find((v) => v.title == RULE.title)\nif (isIndex) {\n    RULE = oriRULE\n    var { tabHeader, fyAll } = $.require('hiker://page/ClassTab?rule=' + QING_TITLE, Object.assign({ QING_TITLE: QING_TITLE }, RULE))\n    // 处理MY_RULE\n    MY_RULE.class_url = tabHeader.getClass(fyAll ? 'fyAll' : 'fyclass').url\n    MY_RULE.area_url = fyAll ? MY_RULE.class_url : tabHeader.getClass('fyarea').url\n    MY_RULE.year_url = fyAll ? MY_RULE.class_url : tabHeader.getClass('fyyear').url\n    MY_RULE.sort_url = fyAll ? MY_RULE.class_url : tabHeader.getClass('fysort').url\n    MY_RULE.url = RULE.url\n    MY_RULE.col_type = RULE.col_type\n    MY_RULE.detail_col_type = RULE.detail_col_type\n    MY_RULE.find_rule = RULE.find_rule\n    MY_RULE.detail_find_rule = RULE.detail_find_rule\n    MY_RULE.params = {}\n} else {\n    RULE.pages = oriRULE.pages\n    // 处理MY_RULE\n    MY_RULE.url = MY_PARAMS.url\n    MY_RULE.col_type = RULE.detail_col_type\n    MY_RULE.find_rule = RULE.detail_find_rule\n    MY_RULE.params = RULE.params\n}\nMY_RULE.pages = RULE.pages\nMY_RULE.pageList = JSON.parse(MY_RULE.pages || '[]')\nMY_RULE.title = RULE.title\nMY_RULE.ua = RULE.ua\nlog(MY_RULE.url)\n// 载入函数工具\nvar { genMyRule } = $.require('hiker://page/funcTools?rule=' + QING_TITLE, {\n    QING_TITLE: QING_TITLE,\n    MY_RULE: MY_RULE,\n    isIndex: isIndex\n})\n// 防止require多次运行\nconst myColl_required = {}\nrequire = function(param0, param1, param2, param3, param4) {\n    if (myColl_required[param0]) return\n    myColl_required[param0] = true\n    param2 = param2 != null ? param2 : 0\n    param3 = MY_TICKET\n    param4 = eval\n    return method_require.invoke(javaContext, param0, param1, param2, param3, param4)\n}\nrequireCache = function(param0, param1, param2, param3, param4, param5) {\n    if (myColl_required[param0]) return\n    myColl_required[param0] = true\n    param3 = param3 != null ? param3 : 0\n    param4 = MY_TICKET\n    param5 = eval\n    return method_requireCache.invoke(javaContext, param0, param1, param2, param3, param4, param5)\n}\nrc = requireCache\n// 最新章节规则环境劫持\nsetLastChapterRule = function(param0) {\n    if (param0.startsWith(\"js:\")) {\n        param0 = 'js:' + $.toString((QING_TITLE, MY_PARAMS) => {\n            eval(JSON.parse(fetch('hiker://page/hijackEnv?rule=' + QING_TITLE)).rule)\n            var { runPreRule } = $.require('hiker://page/funcTools?rule=' + QING_TITLE)\n            runPreRule(oriRULE.preRule)\n        }, QING_TITLE, { url: MY_RULE.url, RULE: base64Encode(JSON.stringify(genMyRule())), isIndex: isIndex }) + ';' + param0.slice(3)\n    }\n    method_setLastChapterRule.invoke(javaContext, param0)\n}\n// 动态新增函数劫持\naddItemAfter = function(param0, param1) {\n    if (Array.isArray(param1)) param1 = param1.map(hijackEl)\n    else param1 = hijackEl(param1)\n    method_addItemAfter.invoke(javaContext, param0, param1)\n}\naddItemBefore = function(param0, param1) {\n    if (Array.isArray(param1)) param1 = param1.map(hijackEl)\n    else param1 = hijackEl(param1)\n    method_addItemBefore.invoke(javaContext, param0, param1)\n}\n"},{"col_type":"movie_3","name":"函数工具","path":"funcTools","rule":"let { QING_TITLE, MY_RULE, isIndex } = $.importParam\nif (!MY_RULE) MY_RULE = {}\n\nfunction runCode(rule) {\n    try {\n        let [input, code] = rule.split('.js:')\n        return code ? eval(code) : rule\n    } catch (e) { return rule }\n}\n// 首页链接替换分类\nfunction indexUrl(param) {\n    MY_RULE = JSON.parse(base64Decode(MY_RULE))\n    let pageNum = parseInt(param.split('###')[1]),\n        url = MY_RULE.url,\n        { fyAll, tabHeader } = $.require('hiker://page/ClassTab?rule=' + QING_TITLE, Object.assign({ QING_TITLE: QING_TITLE }, MY_RULE))\n\n    url = tabHeader.setUrl(fyAll ? url.replace(/fyAll/g, '$${fyAll}') : url.replace(/fy(class|area|year|sort)/g, '$${fy$1}'))\n    url = url.replace(/fypage(?:@(-?\\d+)@)?(?:\\*(\\d+)@)?/g, (_, start, space) => parseInt(start || 0) + 1 + (pageNum - 1) * parseInt(space || 1))\n    url = /^([\\s\\S]*?)(?:\\[firstPage=([\\s\\S]*?)\\])?(?:(\\.js:[\\s\\S]*?))?$/.exec(url)\n    if (pageNum == 1 && url[2]) url[1] = url[2]\n    if (url[3] && !url[1].includes('.js:')) url[1] += url[3]\n    return runCode(url[1])\n}\n\nfunction paramHandle(urlParam, ua, urlTmp) {\n    let charset, paramTmp\n    try { // 链接的编码、UA和Referer应该是首先继承首页链接\n        [, , charset, paramTmp] = urlTmp.split(';')\n        paramTmp = paramTmp.match(/^{(.*)}$/)[1].split('&&')\n    } catch (e) { paramTmp = [] }\n    let UserAgent = paramTmp.find((v) => v.startsWith('User-Agent@')),\n        Referer = paramTmp.find((v) => v.startsWith('Referer@'))\n    urlParam[0] = urlParam[0] || 'GET'\n    urlParam[1] = urlParam[1] || charset || 'UTF-8'\n    try {\n        urlParam[2] = urlParam[2].match(/^{(.*)}$/)[1].split('&&')\n    } catch (e) { urlParam[2] = [] }\n    // 添加全局UA和上级Referer\n    if (!urlParam[2].some((v) => v.startsWith('User-Agent@'))) {\n        if (UserAgent) urlParam[2].push(UserAgent)\n        else if (ua == 'pc')\n            urlParam[2].push('User-Agent@' + PC_UA.replace(/;/g, '；；').replace(/\\?/, '？？'))\n        else if (ua == 'mobile')\n            urlParam[2].push('User-Agent@' + MOBILE_UA.replace(/;/g, '；；').replace(/\\?/, '？？'))\n    }\n    if (Referer && !urlParam[2].some((v) => v.startsWith('Referer@')))\n        urlParam[2].push(Referer)\n    urlParam[2] = '{' + urlParam[2].join('&&') + '}'\n    return urlParam.join(';')\n}\n// 预处理并初始化config\nfunction runPreRule(rule) {\n    if ((typeof MY_PAGE != 'undefined' &&  MY_PAGE == 1) &&\n         (isIndex || !getMyVar('$preRule_' + MY_RULE.title))) {\n        eval(rule)\n        putMyVar('$preRule_' + MY_RULE.title, 'T')\n    }\n    let _cfg = getMyVar('initConfig', '{}')\n    if (_cfg && _cfg.length > 0) {\n        config = JSON.parse(_cfg)\n    }\n}\n// 正文解析通用变量\nfunction genMyRule() {\n    let RULE = Object.assign({}, MY_RULE)\n    delete RULE.last_chapter_rule\n    delete RULE.preRule\n    delete RULE.pageList\n    delete RULE.pages\n    return RULE\n}\n\nfunction genExUrl(url) {\n    url = url.split(';')\n    return url.shift() + ';' + paramHandle(url, MY_RULE.ua, MY_RULE.url)\n}\n\nhijackLazyRule = $.toString((QING_TITLE, MY_PARAMS) => {\n    if (!MY_RULE) MY_RULE = {}\n    MY_PARAMS = JSON.parse(base64Decode(MY_PARAMS))\n    eval(JSON.parse(fetch('hiker://page/hijackEnv?rule=' + QING_TITLE)).rule)\n    var {\n        paramHandle,\n        genExUrl,\n        hijackLazyRule,\n        hijackEl\n    } = $.require('hiker://page/funcTools?rule=' + QING_TITLE)\n}, QING_TITLE, base64Encode(JSON.stringify({ url: MY_RULE.url, RULE: base64Encode(JSON.stringify(genMyRule())), isIndex: isIndex })))\n\nfunction hijackEl(el) {\n    if(!el || typeof el != 'object') return\n    if (!el.extra) el.extra = {}\n    el.col_type = el.col_type || MY_RULE.col_type\n    let NOW_RULE = Object.assign(genMyRule(), { params: el.extra })\n\n    if (typeof el.url != 'string' ||\n        ['x5_webview_single', 'input'].some((v) => el.col_type == v) ||\n        ['海阔视界', 'javascript:'].some((v) => el.url.startsWith(v)) ||\n        ['rule', 'pics', 'toast', 'copy', 'editFile', 'x5', 'x5WebView', 'x5Play', 'web', 'x5Rule', 'webRule',\n            'download', 'share', 'fileSelect', 'video'].some((v) => el.url.startsWith(v + '://'))) {\n        return el\n    } else if (el.url.startsWith('input://')) {\n        let para = JSON.parse(el.url.slice(8))\n        if (para.js) para.js = hijackLazyRule + ';' + para.js\n        el.url = 'input://' + JSON.stringify(para)\n        return el\n    } else if (el.url.startsWith('confirm://')) {\n        let reIndex = el.url.indexOf('.js:')\n        if (reIndex >= 0) el.url = el.url.slice(0, reIndex) + '.js:' + hijackLazyRule + ';' + el.url.slice(reIndex + 4)\n        return el\n    } else if (el.url.startsWith('select://')) {\n        let para = JSON.parse(el.url.slice(9))\n        if (para.js) para.js = hijackLazyRule + ';' + para.js\n        el.url = 'select://' + JSON.stringify(para)\n        return el\n    } else if (el.url.includes('@rule=')) {\n        let [_, url, rule] = el.url.match(/^([\\s\\S]*?)@rule=([\\s\\S]*)$/)\n        el.url = url\n        NOW_RULE.detail_find_rule = rule\n        NOW_RULE.detail_col_type = MY_RULE.col_type\n    } else if (el.url.startsWith('hiker://page/')) {\n        if (el.url.includes('rule=') || el.extra.rule)\n            return el\n        let [_, path, flag, params] = el.url.match(/^hiker:\\/\\/page\\/(.+?)(#.*?)?(?:\\?(.*))?$/),\n            subPage = MY_RULE.pageList.find((v) => v.path == path),\n            subUrl = (params || '').split('&').find((v) => v.startsWith('url='))\n        el.url = (subUrl ? subUrl.slice(4).replace(/？？/g, '?').replace(/＆＆/g, '&') : (el.extra || {}).url) || 'hiker://empty' + flag + '?' + (params || '')\n        NOW_RULE.detail_find_rule = subPage.rule\n        NOW_RULE.detail_col_type = subPage.col_type\n    } else if (el.url.includes('@lazyRule=')) {\n        let reIndex = el.url.indexOf('.js:')\n        if (reIndex >= 0) el.url = el.url.slice(0, reIndex) + '.js:' + hijackLazyRule + ';' + el.url.slice(reIndex + 4)\n        return el\n    } else if (isIndex) {\n        if (!MY_RULE.detail_find_rule || /hiker:\\/\\/(?!empty.+$)/.test(el.url)) return el\n    } else {\n        return el\n    }\n    el.extra = Object.assign({}, el.extra, {\n        url: genExUrl(el.url),\n        RULE: base64Encode(JSON.stringify(NOW_RULE)),\n        pageTitle: isIndex && el.title\n    })\n    el.url = 'hiker://page/frameLoad?rule=' + QING_TITLE\n    return el\n}\n$.exports = {\n    runCode: runCode,\n    indexUrl: indexUrl,\n    paramHandle: paramHandle,\n    runPreRule: runPreRule,\n    genMyRule: genMyRule,\n    genExUrl: genExUrl,\n    hijackLazyRule: hijackLazyRule,\n    hijackEl: hijackEl\n}\n"}],"title":"听合集","author":"小棉袄🌞&永远の明日","version":107,"type":"all","url":"hiker://empty","col_type":"icon_round_small_4","class_name":"","class_url":"","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:\nconst QING_TITLE = getMyVar('myCollection'),\n    newWindow = readFile('newWindow'),\n    typeShow = getMyVar('typeShow', '@'),\n    types = { 'all': '聚合', 'video': '视频', 'music': '音频', 'live': '直播', 'cartoon': '漫画', 'read': '阅读', 'picture': '图集', 'news': '资讯', 'tool': '工具', 'other': '其它' }\nlet el = [{\n        title: ' ' + QING_TITLE.bold() + ' &nbsp &nbsp ' + '⚙ 轻合集设置 ⚙'.small(),\n        url: 'hiker://page/Config?rule=' + QING_TITLE + '&#noRecordHistory#',\n        img: MY_RULE.icon || 'hiker://images/icon1',\n        col_type: 'avatar'\n    }, {\n        url: '\"hiker://search?s=\"+input',\n        desc: '这是轻合集的搜索哦~~',\n        title: '搜索',\n        col_type: 'input',\n        extra: {\n            rules: $.toString((QING_TITLE, typeShow) => {\n                let rules = $.require('hiker://page/dataLoad?rule=' + QING_TITLE)\n                if (typeShow[0] == '@') {\n                    let filterKey = typeShow.slice(1)\n                    if (filterKey) rules = rules.filter((v) => v.title.includes(filterKey))\n                } else rules = rules.filter((v) => v.type == typeShow)\n                return JSON.stringify(rules)\n            }, QING_TITLE, typeShow),\n            defaultValue: getMyVar('searchKey', ''),\n            onChange: \"putMyVar('searchKey',input)\"\n        }\n    }],\n    rules = $.require('hiker://page/dataLoad?rule=' + QING_TITLE),\n    rulesType = rules.reduce((obj, v) => {\n        let type = v.type\n        if (type) {\n            if (!Array.isArray(obj[type]))\n                obj[type] = []\n            obj[type].push(v)\n        }\n        return obj\n    }, {})\nif (typeShow[0] == '@') {\n    let filterKey = typeShow.slice(1)\n    if (filterKey) rules = rules.filter((v) => v.title.includes(filterKey))\n}\nel.push(typeShow[0] == '@' ? {\n    title: '““””' + ('全部' + (typeShow[1] ? '[' + typeShow.slice(1) + ']' : '')).bold().fontcolor('#12b668') + ' ' + (rules.length).toString().small(),\n    url: $(typeShow.slice(5), '查找小程序关键词').input(() => {\n        putMyVar('typeShow', '@' + input)\n        refreshPage(false)\n        return 'hiker://empty'\n    }),\n    col_type: 'scroll_button'\n} : {\n    title: '““””全部 ' + (rules.length).toString().small(),\n    url: $('#noLoading#').lazyRule(() => {\n        putMyVar('typeShow', '@')\n        refreshPage(false)\n        return 'toast://再次点击【全部】可查找小程序'\n    }),\n    col_type: 'scroll_button'\n})\nfor (let k in types)\n    if (k in rulesType)\n        el.push({\n            title: '““””' + (k == typeShow ? types[k].bold().fontcolor('#12b668') : types[k]) + ' ' + (rulesType[k].length).toString().small(),\n            url: k == typeShow ? 'hiker://empty' : $('#noLoading#').lazyRule((k) => {\n                putMyVar('typeShow', k)\n                refreshPage(false)\n                return 'hiker://empty'\n            }, k),\n            col_type: 'scroll_button'\n        })\n\nif (typeShow[0] != '@') rules = rulesType[typeShow]\nlet { paramHandle } = $.require('hiker://page/funcTools?rule=' + QING_TITLE, {})\nrules.forEach((v) => {\n    let urlParam = v.url.split(';'),\n        ruleTmp = {\n            title: v.title, url: urlParam.shift(),\n            class_name: v.class_name, class_url: v.class_url,\n            area_name: v.area_name, area_url: v.area_url,\n            year_name: v.year_name, year_url: v.year_url,\n            sort_name: v.sort_name, sort_url: v.sort_url\n        },\n        fypage = ruleTmp.url.includes('fypage') ? 'fypage' : '1',\n        domain = (/^https?:\\/\\/[^/?#]+/i.exec(ruleTmp.url) || ['hiker://empty'])[0],\n        d = {\n            title: v.title,\n            url: 'hiker://page/frameLoad',\n            img: v.icon || 'hiker://images/icon1',\n            extra: {\n                url: domain + '/#noHistory##noRecordHistory####' + fypage +\n                    '.js:let { runCode, indexUrl } = $.require(\"hiker://page/funcTools？？rule=' + QING_TITLE + '\", '\n                     + JSON.stringify({\n                        MY_RULE: base64Encode(JSON.stringify(ruleTmp)),\n                        QING_TITLE: QING_TITLE\n                    }) + ')；；indexUrl(input);' + paramHandle(urlParam, v.ua),\n                RULE: base64Encode(JSON.stringify({ title: v.title })),\n                isIndex: true\n            }\n        }\n    if (newWindow) Object.assign(d.extra, {\n        newWindow: true,\n        windowId: QING_TITLE + '_' + d.title\n    })\n    el.push(d)\n})\nsetResult(el)\n","searchFind":"js:\nsetResult([{\n    title: \"点我开始轻合集•视界聚搜\",\n    url: \"hiker://search?s=\" + getParam(\"keyword\"),\n    extra: {\n        rules: $.toString(() => {\n            const QING_TITLE = getMyVar('myCollection'),\n                typeShow = getMyVar('typeShow', '@')\n            let rules = $.require('hiker://page/dataLoad?rule=' + QING_TITLE)\n            if (typeShow[0] == '@') {\n                let filterKey = typeShow.slice(1)\n                if (filterKey) rules = rules.filter((v) => v.title.includes(filterKey))\n            } else rules = rules.filter((v) => v.type == typeShow)\n            return JSON.stringify(rules)\n        })\n    }\n}])\n","search_url":"hiker://empty?keyword=**","group":"①推荐","detail_col_type":"movie_1","detail_find_rule":"","sdetail_col_type":"movie_1","sdetail_find_rule":"","ua":"mobile","preRule":"putMyVar('myCollection', MY_RULE.title)\nputMyVar('remoteUrl', 'https://ghproxy.net/https://raw.githubusercontent.com/xixifree/Hiker/main/ting.json')\n\nvar switchx = getItem('switchx','0');\nif(switchx==0){\n    var disableCustom = readFile('disableCustom');\n    saveFile('disableCustom','T');\n    setItem('switchx', '1');\n}","pages":"[{\"col_type\":\"text_1\",\"name\":\"ClassTab\",\"path\":\"ClassTab\",\"rule\":\"var {\\n    QING_TITLE, title, url,\\n    class_name, class_url,\\n    area_name, area_url,\\n    year_name, year_url,\\n    sort_name, sort_url\\n} = $.importParam\\nconst ClassTab = function(classArray, params) {\\n    Object.assign(this, params)\\n    this.arr = classArray.map(v => this.init(v))\\n    this.sign = '$' + QING_TITLE + '_' + (this.name || '') + '_'\\n    this.color = this.color || '#12b668'\\n    this.boundary = this.boundary || 'blank_block'\\n}\\nClassTab.prototype = {\\n    constructor: ClassTab,\\n    load(el) {\\n        let folded = this.fold && getVar('$fold_' + this.sign, '')\\n        if (this.arr.length > 1 && this.fold) el.push({\\n            title: '““””' + (folded ? '▶' : '▼').fontcolor('#049eff'),\\n            url: $('#noLoading#').lazyRule((sign, folded) => {\\n                putVar('$fold_' + sign, folded ? '' : 'T')\\n                refreshPage(false)\\n                return 'hiker://empty'\\n            }, this.sign, folded),\\n            col_type: 'scroll_button'\\n        })\\n        let arr = folded ? [this.arr[0]] : this.arr\\n        arr.forEach((v) => {\\n            let { id, class_name, class_url } = v,\\n            selected = JSON.stringify(this.getClass(id))\\n            class_name.forEach((name, i) => {\\n                let url = class_url[i],\\n                    now = JSON.stringify({ name: name, url: url })\\n                el.push({\\n                    title: selected == now ? '““””' + name.fontcolor(this.color).bold() : name,\\n                    url: selected == now ? 'hiker://empty' : $('#noLoading#').lazyRule((sign, id, now) => {\\n                        putVar(sign + id, now)\\n                        refreshPage(false)\\n                        return 'hiker://empty'\\n                    }, this.sign, id, now),\\n                    col_type: 'scroll_button'\\n                })\\n            })\\n            el.push({ col_type: this.boundary })\\n        })\\n    },\\n    init(classObject) {\\n        if (typeof classObject.class_name == 'string')\\n            classObject.class_name = classObject.class_name.split('&')\\n        if (typeof classObject.class_url == 'string')\\n            classObject.class_url = classObject.class_url.split('&').map((v) => v.trim())\\n        return classObject\\n    },\\n    push(classObject) {\\n        this.arr.push(this.init(classObject))\\n    },\\n    getClass(id) {\\n        let defaultClass = this.arr.find(item => item.id == id)\\n        defaultClass = JSON.stringify(defaultClass ? {\\n            name: defaultClass.class_name[0],\\n            url: defaultClass.class_url[0]\\n        } : { name:  'cannot find id: ' + id + ' in classTab: ' + this.sign, url: ''})\\n        return JSON.parse(getVar(this.sign + id, defaultClass))\\n    },\\n    setUrl(url) {\\n        return url.replace(/\\\\$\\\\{([^}]*)\\\\}/g, (_, id) => this.getClass(id).url)\\n    }\\n}\\n// 生成头部分类\\nlet fyAll = url.includes('fyAll'),\\n    tabHeader = []\\nif (class_name) tabHeader.push({\\n    id: fyAll ? 'fyAll' : 'fyclass',\\n    class_name: class_name,\\n    class_url: class_url\\n})\\nif (area_name) tabHeader.push({\\n    id: fyAll ? 'fyAll' : 'fyarea',\\n    class_name: area_name,\\n    class_url: area_url\\n})\\nif (year_name) tabHeader.push({\\n    id: fyAll ? 'fyAll' : 'fyyear',\\n    class_name: year_name,\\n    class_url: year_url\\n})\\nif (sort_name) tabHeader.push({\\n    id: fyAll ? 'fyAll' : 'fysort',\\n    class_name: sort_name,\\n    class_url: sort_url\\n})\\n$.exports = {\\n    fyAll: fyAll,\\n    tabHeader: new ClassTab(tabHeader, { name: title, fold: readFile('tabFold'), })\\n}\\n\"},{\"col_type\":\"icon_2_round\",\"name\":\"设置\",\"path\":\"Config\",\"rule\":\"js:\\naddListener('onClose', 'clearMyVar(\\\"sortFlag\\\");refreshPage()')\\nsetPageTitle('⚙ 轻合集设置 ⚙')\\nconst QING_TITLE = getMyVar('myCollection'),\\n    url = getMyVar('remoteUrl')\\nlet data = $.require('hiker://page/dataLoad?rule=' + QING_TITLE, true),\\n    el = [{\\n        title: '<b> 清除缓存，立即更新 <small> （基于远程仓库，不要频繁点击）',\\n        url: $('#noLoading#').lazyRule((url) => {\\n            if (url.startsWith('hiker://') || url.startsWith('file://'))\\n                return 'toast://仓库为本地文件，不会进行缓存，本功能也无效'\\n            deleteCache(url)\\n            back(false)\\n            return 'toast://已更新'\\n        }, url),\\n        img: 'hiker://images/icon4',\\n        col_type: 'avatar'\\n    }],\\n    updateInterval = readFile('updateInterval') || '1',\\n    newWindow = readFile('newWindow'),\\n    tabFold = readFile('tabFold'),\\n    disableCustom = readFile('disableCustom'),\\n    editMode = disableCustom ? '导入海阔' : getMyVar('editMode', '启用/禁用')\\n\\nel.push({\\n    title: '  💡 更新频率: ' + (updateInterval == 0 ? '手动' : updateInterval + '天') + '  ',\\n    url: $(updateInterval, '输入更新间隔（天），为0则手动更新\\\\n本地文件链接无效').input(() => {\\n        input = parseInt(input)\\n        if (Number.isNaN(input)) input = 1\\n        else if (input < 1) input = 0\\n        saveFile('updateInterval', input.toString())\\n        refreshPage()\\n        return 'hiker://empty'\\n    }),\\n    col_type: 'scroll_button'\\n}, {\\n    title: '  🖥 独立首页: ' + (newWindow ? '是' : '否') + '  ',\\n    url: $('#noLoading#').lazyRule((newWindow) => {\\n        saveFile('newWindow', newWindow ? '' : 'T')\\n        refreshPage()\\n        return 'hiker://empty'\\n    }, newWindow),\\n    col_type: 'scroll_button'\\n}, {\\n    title: '  💠 分类折叠: ' + (tabFold ? '是' : '否') + '  ',\\n    url: $('#noLoading#').lazyRule((tabFold) => {\\n        saveFile('tabFold', tabFold ? '' : 'T')\\n        refreshPage()\\n        return 'hiker://empty'\\n    }, tabFold),\\n    col_type: 'scroll_button'\\n}, {\\n    title: '  💼 备份恢复  ',\\n    url: $(['备份', '恢复'], 1).select((QING_TITLE, updateInterval, newWindow, tabFold, disableCustom) => {\\n        let url = getMyVar('remoteUrl')\\n        if (!url.startsWith('hiker://') && !url.startsWith('file://'))\\n            url = 'hiker://files/libs/' + md5(url) + '.js'\\n        else if (url.startsWith('hiker://page/')) url = 'hiker://empty'\\n        if (input == '备份') return $('hiker://files/tmp/' + QING_TITLE + '_backup.json', '输入备份路径')\\n            .input((url, updateInterval, newWindow, tabFold, disableCustom) => {\\n                let rules = request(url),\\n                    customData = readFile('customData')\\n                writeFile(input, JSON.stringify({\\n                    updateInterval: updateInterval,\\n                    newWindow: newWindow,\\n                    tabFold: tabFold,\\n                    disableCustom: disableCustom,\\n                    customData: customData,\\n                    rules: rules\\n                }))\\n                return 'toast://已备份，注意若仓库为子页面则不备份'\\n            }, url, updateInterval, newWindow, tabFold, disableCustom)\\n        else return $('hiker://files/tmp/' + QING_TITLE + '_backup.json', '输入备份路径').input((url) => {\\n            let { updateInterval, newWindow, tabFold, disableCustom, customData, rules } = JSON.parse(request(input))\\n            saveFile('updateInterval', updateInterval)\\n            saveFile('newWindow', newWindow)\\n            saveFile('tabFold', tabFold)\\n            saveFile('disableCustom', disableCustom)\\n            saveFile('customData', customData)\\n            if (rules) writeFile(url, rules)\\n            refreshPage()\\n            return 'toast://已恢复，如果不想同步远程仓库，可以设置更新频率为手动'\\n        }, url)\\n    }, QING_TITLE, updateInterval, newWindow, tabFold, disableCustom),\\n    col_type: 'scroll_button'\\n}, {\\n    title: '““””<font color=\\\"#666666\\\"><small>特别鸣谢，小程序提供者：\\\\n' +\\n        data.reduce((self, v) => v.author ? self.concat(v.author.split('&')) : self, [])\\n        .filter((v, i, arr) => v && arr.indexOf(v) == i).join('、'),\\n    url: 'hiker://empty',\\n    col_type: 'text_center_1'\\n})\\n\\nel.push({ col_type: 'line' }, {\\n    title: '““””' + '📝'.small() + '&nbsp 轻合集自定义 &nbsp'.bold().fontcolor('#757575') + (disableCustom ? '❌' : '⭕').small(),\\n    url: $([(disableCustom ? '启用' : '禁用') + '合集自定义', '清除自定义数据', '编辑JSON'], 1).select(() => {\\n        switch (input.slice(0, 2)) {\\n            case '清除':\\n                deleteFile('customData')\\n                break\\n            case '启用':\\n                saveFile('disableCustom', '')\\n                break\\n            case '禁用':\\n                saveFile('disableCustom', 'T')\\n                input += '\\\\n小程序启用/禁用、重新排序等操作均不会体现在首页小程序列表中'\\n                break\\n            case '编辑':\\n                let url = getMyVar('remoteUrl')\\n                if (!url.startsWith('hiker://files/') && !url.startsWith('file://'))\\n                    url = 'hiker://files/libs/' + md5(url) + '.js'\\n                return  'hiker://page/interface#noRefresh##noHistory##noRecordHistory#?rule=JSON编辑器&Json='+base64Encode(url)\\n        }\\n        refreshPage(false)\\n        return 'toast://已' + input\\n    }),\\n    col_type: 'text_center_1',\\n    extra: { lineVisible: false }\\n});\\n(disableCustom ? ['导入海阔'] : ['启用/禁用', '重新排序', '更改图标', '导入海阔']).forEach((v) => {\\n    el.push({\\n        title: v == editMode ? '““””' + v.bold().fontcolor('#12b668') : v,\\n        url: v == editMode ? 'hiker://empty' : $('#noLoading#').lazyRule((v) => {\\n            putMyVar('editMode', v)\\n            refreshPage(false)\\n            return 'hiker://empty'\\n        }, v),\\n        col_type: 'scroll_button'\\n    })\\n});\\nif (editMode == '导入海阔') el.push({\\n    title: '全部导入',\\n    url: '海阔视界￥home_rule_url￥' + (url.startsWith('hiker://') || url.startsWith('file://') ? url : 'hiker://files/libs/' + md5(url) + '.js'),\\n    col_type: 'text_center_1',\\n    extra: { lineVisible: false }\\n});\\n(disableCustom ? data : JSON.parse(readFile('customData') || '[]')).forEach((v, i) => {\\n    let d = { title: v.title, img: data[i].icon }\\n    switch (editMode) {\\n        case '启用/禁用':\\n            d.title = (v.visible ? '🟢  ' : '🔴  ') + d.title\\n            d.url = $('#noLoading#').lazyRule((i) => {\\n                let rules = JSON.parse(readFile('customData') || '[]')\\n                rules[i].visible = !rules[i].visible\\n                saveFile('customData', JSON.stringify(rules))\\n                refreshPage(false)\\n                return 'hiker://empty'\\n            }, i)\\n            break\\n        case '重新排序':\\n            let sortFlag = parseInt(getMyVar('sortFlag', '-1'))\\n            d.title = (sortFlag == i ? '🔃  ' : '') + d.title\\n            if (sortFlag == -1)\\n                d.url = $('#noLoading#').lazyRule((i) => {\\n                    putMyVar('sortFlag', i.toString())\\n                    refreshPage(false)\\n                    return 'toast://选择要移动到的位置'\\n                }, i)\\n            else\\n                d.url = $('#noLoading#').lazyRule((oldIndex, newIndex) => {\\n                    let rules = JSON.parse(readFile('customData') || '[]')\\n                    rules.splice(newIndex, 0, rules.splice(oldIndex, 1)[0])\\n                    saveFile('customData', JSON.stringify(rules))\\n                    putMyVar('sortFlag', '-1')\\n                    refreshPage(false)\\n                    return 'hiker://empty'\\n                }, sortFlag, i)\\n            break\\n        case '更改图标':\\n            d.url = $(v.icon || '', '输入新图标地址或颜色代码：').input((i) => {\\n                let rules = JSON.parse(readFile('customData') || '[]')\\n                if (input)\\n                    rules[i].icon = input\\n                else\\n                    delete rules[i].icon\\n                saveFile('customData', JSON.stringify(rules))\\n                refreshPage(false)\\n                return 'hiker://empty'\\n            }, i)\\n            break\\n        case '导入海阔':\\n            d.url = $('#noLoading#').lazyRule((i) => {\\n                let data = $.require('hiker://page/dataLoad?rule=' + getMyVar('myCollection'), true)\\n                return 'rule://' + base64Encode(JSON.stringify(data[i]))\\n            }, i)\\n            break\\n    }\\n    el.push(d)\\n})\\nsetResult(el)\\n\"},{\"col_type\":\"movie_3\",\"name\":\"页面载入\",\"path\":\"frameLoad\",\"rule\":\"js:\\nconst QING_TITLE = getMyVar('myCollection')\\nvar myColl_el = []\\neval(JSON.parse(fetch('hiker://page/hijackEnv?rule=' + QING_TITLE)).rule)\\n\\nif (!isIndex) {\\n    if (pageTitle) setPageTitle(pageTitle)\\n    setLastChapterRule(oriRULE.last_chapter_rule)\\n    MY_PARAMS = MY_RULE.params\\n} else if (MY_PAGE == 1) {\\n    tabHeader.load(myColl_el)\\n    if (RULE.search_url) myColl_el.push({\\n        title: \\\"搜索\\\",\\n        desc: \\\"这是轻合集的搜索哦~~\\\",\\n        url: '\\\"hiker://search?s=\\\"+input',\\n        extra: {\\n            rules: $.toString((QING_TITLE, title) => {\\n                let rules = $.require('hiker://page/dataLoad?rule=' + QING_TITLE)\\n                rules = [rules.find((v) => v.title == title)]\\n                return JSON.stringify(rules)\\n            }, QING_TITLE, RULE.title),\\n            defaultValue: getMyVar('searchKey', ''),\\n            onChange: \\\"putMyVar('searchKey',input)\\\"\\n        },\\n        col_type: \\\"input\\\",\\n    })\\n}\\n// 正文解析\\nvar {\\n    paramHandle,\\n    runPreRule,\\n    genExUrl,\\n    hijackLazyRule\\n} = $.require('hiker://page/funcTools?rule=' + QING_TITLE)\\nrunPreRule(oriRULE.preRule)\\nif (MY_RULE.find_rule.startsWith('js:')) {\\n    let { hijackEl } = $.require('hiker://page/funcTools?rule=' + QING_TITLE)\\n    setResult = function(param0, param1, param2, param3) {\\n        param1 = CALLBACK_KEY\\n        param2 = MY_RULE\\n        param3 = MY_TYPE\\n        if (Array.isArray(param0.data)) param0 = param0.data\\n        Array.prototype.push.apply(myColl_el, param0.map(hijackEl))\\n        method_setResult.invoke(javaContext, myColl_el, param1, param2, param3)\\n    }\\n    setHomeResult = setResult\\n    setSearchResult = setResult\\n\\n    eval(MY_RULE.find_rule.slice(3))\\n} else {\\n    let { runCode } = $.require('hiker://page/funcTools?rule=' + QING_TITLE),\\n        [_, findRule, detailFindRule] = MY_RULE.find_rule.match(/^([\\\\s\\\\S]*?)(?:==>([\\\\s\\\\S]*))?$/)\\n    findRule = findRule.split(';')\\n    parseDomForArray(getResCode(), findRule.shift()).forEach((data) => {\\n        let [title, img, desc, url] = findRule.map((v, i) => {\\n                try {\\n                    if (v == '*') return ''\\n                    else v = (i == 1 || i == 3) ?\\n                        parseDom(data, v) :\\n                        parseDomForHtml(data, v)\\n                    if (i != 3) v = runCode(v)\\n                    return v\\n                } catch (e) { return '' }\\n            }),\\n            res = {\\n                title: title, url: url,\\n                desc: desc, img: img,\\n                col_type: MY_RULE.col_type\\n            }\\n        if (res.url) {\\n            if (res.url.includes('@lazyRule=')) {\\n                let reIndex = res.url.indexOf('.js:')\\n                if (reIndex >= 0) res.url = res.url.slice(0, reIndex) + '.js:' + hijackLazyRule + ';' + res.url.slice(reIndex + 4)\\n            } else  if (detailFindRule) {\\n                res.extra = {\\n                    url: genExUrl(url),\\n                    RULE: base64Encode(JSON.stringify(Object.assign(genMyRule(), { detail_find_rule: detailFindRule }))),\\n                    pageTitle: isIndex && title\\n                }\\n                res.url = 'hiker://page/frameLoad?rule=' + QING_TITLE\\n            } else if (MY_RULE.detail_find_rule) {\\n                res.extra = {\\n                    url: genExUrl(url),\\n                    RULE: base64Encode(JSON.stringify(genMyRule())),\\n                    pageTitle: isIndex && title\\n                }\\n                res.url = 'hiker://page/frameLoad?rule=' + QING_TITLE\\n            }\\n        }\\n        myColl_el.push(res)\\n    })\\n    setResult(myColl_el)\\n}\\n\"},{\"col_type\":\"movie_3\",\"name\":\"数据载入\",\"path\":\"dataLoad\",\"rule\":\"let showAll = $.importParam,\\n    url = getMyVar('remoteUrl'),\\n    data = []\\nif (url.startsWith('hiker://') || url.startsWith('file://')) {\\n    // 如果为本地文件则不进行缓存\\n    try {\\n        let oriData = fetch(url)\\n        if (url.startsWith('hiker://page/'))\\n            oriData = JSON.parse(oriData).rule\\n        data = JSON.parse(oriData)\\n    } catch (e) {}\\n} else {\\n    // 获取远程数据，检查间隔默认一天\\n    let interval = parseInt(readFile('updateInterval') || '1'),\\n        oldData = fetch('hiker://files/libs/' + md5(url) + '.js'),\\n        remoteData = []\\n    if (interval == 0) interval = -1\\n    try { remoteData = JSON.parse(fetchCache(url, 24 * interval, { timeout: 50000 })) } catch (e) {}\\n    if (!Array.isArray(remoteData)) remoteData = []\\n    if (remoteData.length < 3) {\\n        log('未获取到数据')\\n        if (oldData) writeFile('hiker://files/libs/' + md5(url) + '.js', oldData)\\n        data = JSON.parse(oldData || '[]')\\n    } else {\\n        log('已获取到数据')\\n        data = remoteData\\n    }\\n}\\ndata = data.filter((v) => v.title != getMyVar('myCollection') && !(v.author || '').includes('轻合集生成器'))\\nif (readFile('disableCustom')) $.exports = data\\nelse { // 写入自定义数据\\n    let customData = JSON.parse(readFile('customData') || '[]'),\\n        rewriteData = []\\n    customData = customData.reduce((self, v) => {\\n        let index = data.findIndex((vv) => v.title == vv.title)\\n        if (index >= 0) {\\n            self.push(v)\\n            let rule = data.splice(index, 1)[0]\\n            if (showAll || v.visible)\\n                rewriteData.push(Object.assign(rule, v))\\n        }\\n        return self\\n    }, [])\\n    data.forEach((v) => customData.push({ title: v.title, visible: true }))\\n    saveFile('customData', JSON.stringify(customData))\\n    $.exports = rewriteData.concat(data)\\n}\\n\"},{\"col_type\":\"movie_3\",\"name\":\"环境劫持\",\"path\":\"hijackEnv\",\"rule\":\"var { RULE, isIndex, pageTitle } = MY_PARAMS\\nRULE = JSON.parse(base64Decode(RULE))\\nvar oriRULE = $.require('hiker://page/dataLoad?rule=' + QING_TITLE).find((v) => v.title == RULE.title)\\nif (isIndex) {\\n    RULE = oriRULE\\n    var { tabHeader, fyAll } = $.require('hiker://page/ClassTab?rule=' + QING_TITLE, Object.assign({ QING_TITLE: QING_TITLE }, RULE))\\n    // 处理MY_RULE\\n    MY_RULE.class_url = tabHeader.getClass(fyAll ? 'fyAll' : 'fyclass').url\\n    MY_RULE.area_url = fyAll ? MY_RULE.class_url : tabHeader.getClass('fyarea').url\\n    MY_RULE.year_url = fyAll ? MY_RULE.class_url : tabHeader.getClass('fyyear').url\\n    MY_RULE.sort_url = fyAll ? MY_RULE.class_url : tabHeader.getClass('fysort').url\\n    MY_RULE.url = RULE.url\\n    MY_RULE.col_type = RULE.col_type\\n    MY_RULE.detail_col_type = RULE.detail_col_type\\n    MY_RULE.find_rule = RULE.find_rule\\n    MY_RULE.detail_find_rule = RULE.detail_find_rule\\n    MY_RULE.params = {}\\n} else {\\n    RULE.pages = oriRULE.pages\\n    // 处理MY_RULE\\n    MY_RULE.url = MY_PARAMS.url\\n    MY_RULE.col_type = RULE.detail_col_type\\n    MY_RULE.find_rule = RULE.detail_find_rule\\n    MY_RULE.params = RULE.params\\n}\\nMY_RULE.pages = RULE.pages\\nMY_RULE.pageList = JSON.parse(MY_RULE.pages || '[]')\\nMY_RULE.title = RULE.title\\nMY_RULE.ua = RULE.ua\\nlog(MY_RULE.url)\\n// 载入函数工具\\nvar { genMyRule } = $.require('hiker://page/funcTools?rule=' + QING_TITLE, {\\n    QING_TITLE: QING_TITLE,\\n    MY_RULE: MY_RULE,\\n    isIndex: isIndex\\n})\\n// 防止require多次运行\\nconst myColl_required = {}\\nrequire = function(param0, param1, param2, param3, param4) {\\n    if (myColl_required[param0]) return\\n    myColl_required[param0] = true\\n    param2 = param2 != null ? param2 : 0\\n    param3 = MY_TICKET\\n    param4 = eval\\n    return method_require.invoke(javaContext, param0, param1, param2, param3, param4)\\n}\\nrequireCache = function(param0, param1, param2, param3, param4, param5) {\\n    if (myColl_required[param0]) return\\n    myColl_required[param0] = true\\n    param3 = param3 != null ? param3 : 0\\n    param4 = MY_TICKET\\n    param5 = eval\\n    return method_requireCache.invoke(javaContext, param0, param1, param2, param3, param4, param5)\\n}\\nrc = requireCache\\n// 最新章节规则环境劫持\\nsetLastChapterRule = function(param0) {\\n    if (param0.startsWith(\\\"js:\\\")) {\\n        param0 = 'js:' + $.toString((QING_TITLE, MY_PARAMS) => {\\n            eval(JSON.parse(fetch('hiker://page/hijackEnv?rule=' + QING_TITLE)).rule)\\n            var { runPreRule } = $.require('hiker://page/funcTools?rule=' + QING_TITLE)\\n            runPreRule(oriRULE.preRule)\\n        }, QING_TITLE, { url: MY_RULE.url, RULE: base64Encode(JSON.stringify(genMyRule())), isIndex: isIndex }) + ';' + param0.slice(3)\\n    }\\n    method_setLastChapterRule.invoke(javaContext, param0)\\n}\\n// 动态新增函数劫持\\naddItemAfter = function(param0, param1) {\\n    if (Array.isArray(param1)) param1 = param1.map(hijackEl)\\n    else param1 = hijackEl(param1)\\n    method_addItemAfter.invoke(javaContext, param0, param1)\\n}\\naddItemBefore = function(param0, param1) {\\n    if (Array.isArray(param1)) param1 = param1.map(hijackEl)\\n    else param1 = hijackEl(param1)\\n    method_addItemBefore.invoke(javaContext, param0, param1)\\n}\\n\"},{\"col_type\":\"movie_3\",\"name\":\"函数工具\",\"path\":\"funcTools\",\"rule\":\"let { QING_TITLE, MY_RULE, isIndex } = $.importParam\\nif (!MY_RULE) MY_RULE = {}\\n\\nfunction runCode(rule) {\\n    try {\\n        let [input, code] = rule.split('.js:')\\n        return code ? eval(code) : rule\\n    } catch (e) { return rule }\\n}\\n// 首页链接替换分类\\nfunction indexUrl(param) {\\n    MY_RULE = JSON.parse(base64Decode(MY_RULE))\\n    let pageNum = parseInt(param.split('###')[1]),\\n        url = MY_RULE.url,\\n        { fyAll, tabHeader } = $.require('hiker://page/ClassTab?rule=' + QING_TITLE, Object.assign({ QING_TITLE: QING_TITLE }, MY_RULE))\\n\\n    url = tabHeader.setUrl(fyAll ? url.replace(/fyAll/g, '$${fyAll}') : url.replace(/fy(class|area|year|sort)/g, '$${fy$1}'))\\n    url = url.replace(/fypage(?:@(-?\\\\d+)@)?(?:\\\\*(\\\\d+)@)?/g, (_, start, space) => parseInt(start || 0) + 1 + (pageNum - 1) * parseInt(space || 1))\\n    url = /^([\\\\s\\\\S]*?)(?:\\\\[firstPage=([\\\\s\\\\S]*?)\\\\])?(?:(\\\\.js:[\\\\s\\\\S]*?))?$/.exec(url)\\n    if (pageNum == 1 && url[2]) url[1] = url[2]\\n    if (url[3] && !url[1].includes('.js:')) url[1] += url[3]\\n    return runCode(url[1])\\n}\\n\\nfunction paramHandle(urlParam, ua, urlTmp) {\\n    let charset, paramTmp\\n    try { // 链接的编码、UA和Referer应该是首先继承首页链接\\n        [, , charset, paramTmp] = urlTmp.split(';')\\n        paramTmp = paramTmp.match(/^{(.*)}$/)[1].split('&&')\\n    } catch (e) { paramTmp = [] }\\n    let UserAgent = paramTmp.find((v) => v.startsWith('User-Agent@')),\\n        Referer = paramTmp.find((v) => v.startsWith('Referer@'))\\n    urlParam[0] = urlParam[0] || 'GET'\\n    urlParam[1] = urlParam[1] || charset || 'UTF-8'\\n    try {\\n        urlParam[2] = urlParam[2].match(/^{(.*)}$/)[1].split('&&')\\n    } catch (e) { urlParam[2] = [] }\\n    // 添加全局UA和上级Referer\\n    if (!urlParam[2].some((v) => v.startsWith('User-Agent@'))) {\\n        if (UserAgent) urlParam[2].push(UserAgent)\\n        else if (ua == 'pc')\\n            urlParam[2].push('User-Agent@' + PC_UA.replace(/;/g, '；；').replace(/\\\\?/, '？？'))\\n        else if (ua == 'mobile')\\n            urlParam[2].push('User-Agent@' + MOBILE_UA.replace(/;/g, '；；').replace(/\\\\?/, '？？'))\\n    }\\n    if (Referer && !urlParam[2].some((v) => v.startsWith('Referer@')))\\n        urlParam[2].push(Referer)\\n    urlParam[2] = '{' + urlParam[2].join('&&') + '}'\\n    return urlParam.join(';')\\n}\\n// 预处理并初始化config\\nfunction runPreRule(rule) {\\n    if ((typeof MY_PAGE != 'undefined' &&  MY_PAGE == 1) &&\\n         (isIndex || !getMyVar('$preRule_' + MY_RULE.title))) {\\n        eval(rule)\\n        putMyVar('$preRule_' + MY_RULE.title, 'T')\\n    }\\n    let _cfg = getMyVar('initConfig', '{}')\\n    if (_cfg && _cfg.length > 0) {\\n        config = JSON.parse(_cfg)\\n    }\\n}\\n// 正文解析通用变量\\nfunction genMyRule() {\\n    let RULE = Object.assign({}, MY_RULE)\\n    delete RULE.last_chapter_rule\\n    delete RULE.preRule\\n    delete RULE.pageList\\n    delete RULE.pages\\n    return RULE\\n}\\n\\nfunction genExUrl(url) {\\n    url = url.split(';')\\n    return url.shift() + ';' + paramHandle(url, MY_RULE.ua, MY_RULE.url)\\n}\\n\\nhijackLazyRule = $.toString((QING_TITLE, MY_PARAMS) => {\\n    if (!MY_RULE) MY_RULE = {}\\n    MY_PARAMS = JSON.parse(base64Decode(MY_PARAMS))\\n    eval(JSON.parse(fetch('hiker://page/hijackEnv?rule=' + QING_TITLE)).rule)\\n    var {\\n        paramHandle,\\n        genExUrl,\\n        hijackLazyRule,\\n        hijackEl\\n    } = $.require('hiker://page/funcTools?rule=' + QING_TITLE)\\n}, QING_TITLE, base64Encode(JSON.stringify({ url: MY_RULE.url, RULE: base64Encode(JSON.stringify(genMyRule())), isIndex: isIndex })))\\n\\nfunction hijackEl(el) {\\n    if(!el || typeof el != 'object') return\\n    if (!el.extra) el.extra = {}\\n    el.col_type = el.col_type || MY_RULE.col_type\\n    let NOW_RULE = Object.assign(genMyRule(), { params: el.extra })\\n\\n    if (typeof el.url != 'string' ||\\n        ['x5_webview_single', 'input'].some((v) => el.col_type == v) ||\\n        ['海阔视界', 'javascript:'].some((v) => el.url.startsWith(v)) ||\\n        ['rule', 'pics', 'toast', 'copy', 'editFile', 'x5', 'x5WebView', 'x5Play', 'web', 'x5Rule', 'webRule',\\n            'download', 'share', 'fileSelect', 'video'].some((v) => el.url.startsWith(v + '://'))) {\\n        return el\\n    } else if (el.url.startsWith('input://')) {\\n        let para = JSON.parse(el.url.slice(8))\\n        if (para.js) para.js = hijackLazyRule + ';' + para.js\\n        el.url = 'input://' + JSON.stringify(para)\\n        return el\\n    } else if (el.url.startsWith('confirm://')) {\\n        let reIndex = el.url.indexOf('.js:')\\n        if (reIndex >= 0) el.url = el.url.slice(0, reIndex) + '.js:' + hijackLazyRule + ';' + el.url.slice(reIndex + 4)\\n        return el\\n    } else if (el.url.startsWith('select://')) {\\n        let para = JSON.parse(el.url.slice(9))\\n        if (para.js) para.js = hijackLazyRule + ';' + para.js\\n        el.url = 'select://' + JSON.stringify(para)\\n        return el\\n    } else if (el.url.includes('@rule=')) {\\n        let [_, url, rule] = el.url.match(/^([\\\\s\\\\S]*?)@rule=([\\\\s\\\\S]*)$/)\\n        el.url = url\\n        NOW_RULE.detail_find_rule = rule\\n        NOW_RULE.detail_col_type = MY_RULE.col_type\\n    } else if (el.url.startsWith('hiker://page/')) {\\n        if (el.url.includes('rule=') || el.extra.rule)\\n            return el\\n        let [_, path, flag, params] = el.url.match(/^hiker:\\\\/\\\\/page\\\\/(.+?)(#.*?)?(?:\\\\?(.*))?$/),\\n            subPage = MY_RULE.pageList.find((v) => v.path == path),\\n            subUrl = (params || '').split('&').find((v) => v.startsWith('url='))\\n        el.url = (subUrl ? subUrl.slice(4).replace(/？？/g, '?').replace(/＆＆/g, '&') : (el.extra || {}).url) || 'hiker://empty' + flag + '?' + (params || '')\\n        NOW_RULE.detail_find_rule = subPage.rule\\n        NOW_RULE.detail_col_type = subPage.col_type\\n    } else if (el.url.includes('@lazyRule=')) {\\n        let reIndex = el.url.indexOf('.js:')\\n        if (reIndex >= 0) el.url = el.url.slice(0, reIndex) + '.js:' + hijackLazyRule + ';' + el.url.slice(reIndex + 4)\\n        return el\\n    } else if (isIndex) {\\n        if (!MY_RULE.detail_find_rule || /hiker:\\\\/\\\\/(?!empty.+$)/.test(el.url)) return el\\n    } else {\\n        return el\\n    }\\n    el.extra = Object.assign({}, el.extra, {\\n        url: genExUrl(el.url),\\n        RULE: base64Encode(JSON.stringify(NOW_RULE)),\\n        pageTitle: isIndex && el.title\\n    })\\n    el.url = 'hiker://page/frameLoad?rule=' + QING_TITLE\\n    return el\\n}\\n$.exports = {\\n    runCode: runCode,\\n    indexUrl: indexUrl,\\n    paramHandle: paramHandle,\\n    runPreRule: runPreRule,\\n    genMyRule: genMyRule,\\n    genExUrl: genExUrl,\\n    hijackLazyRule: hijackLazyRule,\\n    hijackEl: hijackEl\\n}\\n\"}]","proxy":"","icon":"https://pic.imgdb.cn/item/62ea0a5116f2c2beb1f3bc42.jpg"},{"last_chapter_rule":"","pageList":[{"col_type":"text_1","name":"源目录","path":"source","rule":"js:\nvar d = [];\nvar m = MY_PARAMS.rules\nvar baseurl = m.bookSourceUrl\nif (m.ruleExplore.bookList) {\n    var rule = m.ruleExplore\n} else {\n    var rule = m.ruleSearch\n}\nd.push({\n    title: \"搜索\",\n    desc: \"请输入搜索关键词\",\n    url: $.toString(() => {\n        putMyVar(\"kw\", input);\n        return \"hiker://page/search?p=fypage&kw=\" + input\n    }),\n    col_type: \"input\",\n    extra: {\n        \"u\": baseurl + m.searchUrl,\n        \"rules\": m,\n        defaultValue: getMyVar(\"kw\", \"\"),\n        bookSourceName: m.bookSourceName\n    }\n});\ntry {\n    if (m.enabledExplore && m.exploreUrl) {\n        JSON.parse(m.exploreUrl).forEach(item => {\n            d.push({\n                title: item.title,\n                col_type: item.style.layout_flexBasisPercent == 1 ? \"text_center_1\" : \"text_3\",\n                url: item.url == \"\" ? \"hiker://empty\" : \"hiker://page/books?p=fypage\",\n                extra: {\n                    \"all\": m,\n                    \"rules\": rule,\n                    \"u\": baseurl + item.url\n                }\n            })\n        })\n    }\n} catch (e) {\n    log(m.exploreUrl);\n}\nsetResult(d);"},{"col_type":"movie_3","name":"主页","path":"home","rule":"var d = [];\nlet {\n    load,\n    loadRules,\n    getSelect\n} = $.require(\"hiker://page/datat\");\nlet data = load();\nif (data.length > 0) {\n    d.push({\n        title: \"⚙️设置\",\n        url: \"hiker://page/config\",\n        col_type: \"scroll_button\"\n    });\n    let select = getSelect(data);\n    data.forEach(item => {\n        d.push({\n            title: select.url == item.url ? \"““\" + item.name + \"””\" : item.name,\n            url: $().lazyRule((url) => {\n                setItem(\"tab\", url)\n                refreshPage()\n                return \"toast://切换成功\"\n            }, item.url),\n            col_type: \"scroll_button\"\n        })\n    })\n    d.push({\n        title: \"搜索\",\n        url: $.toString(() => {\n            putMyVar(\"kw\", input);\n            return \"hiker://page/ju?p=fypage&kw=\" + input\n        }),\n        col_type: \"input\",\n        desc: \"聚合搜索，请输入关键词\",\n        pic_url: \"\",\n        extra: {\n            defaultValue: getMyVar(\"kw\", \"\"),\n        }\n    });\n    let list = loadRules(select.name);\n    list.forEach(item => {\n        d.push({\n            title: item.bookSourceName + `(${item.bookSourceGroup})`,\n            col_type: \"text_2\",\n            url: \"hiker://page/source?p=fypage\",\n            extra: {\n                \"rules\": item\n            }\n        })\n    })\n} else {\n    setResult([{\n        title: \"你还没有书哦～～点我进入设置\",\n        url: \"hiker://page/config\",\n        col_type: \"text_center_1\"\n    }])\n}\nsetResult(d);"},{"col_type":"movie_1_vertical_pic","name":"列表","path":"books","rule":"js:\nvar d = [];\nvar {\n    convert,\n    parseUrl,\n    getCharset\n} = $.require(\"hiker://page/converter\");\ntry {\n    //log(MY_PARAMS);\n    var m = MY_PARAMS.rules\n    // 阅读=>视界\n    var url = parseUrl(MY_PARAMS.u, MY_PAGE);\n    var listrule = \"body&&\" + convert(m.bookList.split(\"||\")[0]);\n    let author = null;\n    try {\n        author = convert(m.author);\n    } catch (e) {}\n    let cover = null;\n    try {\n        cover = convert(m.coverUrl);\n    } catch (e) {}\n    let name = null;\n    try {\n        name = convert(m.name);\n    } catch (e) {}\n    let bookurl = null;\n    try {\n        bookurl = convert(m.bookUrl);\n    } catch (e) {}\n    let intro = null;\n    try {\n        intro = convert(m.intro);\n    } catch (e) {}\n    let pdfh1 = (a, b) => {\n        try {\n            if (b == null) return \"\";\n            return pdfh(a, b);\n        } catch (e) {\n            return \"\";\n        }\n    }\n    let pd1 = (a, b, c) => {\n        try {\n            if (b == null) return \"\";\n            return pd(a, b, c);\n        } catch (e) {\n            return \"\";\n        }\n    }\n    MY_URL = url;\n    if (MY_PARAMS.all && MY_PARAMS.all.searchUrl) {\n        m.charset = getCharset(MY_PARAMS.all.searchUrl);\n    }\n    let headers = m.charset ? {\n        \"Content-Type\": \"text/html; charset=\" + m.charset\n    } : {};\n    var res = request(url, {\n        headers: headers\n    })\n    let list = pdfa(res, listrule)\n    if (list.length > 0) {\n        list.forEach(item => {\n            let next = MY_PARAMS.all.ruleToc.nextTocUrl;\n            let nexttoc = next && next != \"\";\n            let ac = nexttoc ? \"\": \"#autoCache#\";\n            //let ac = \"#autoCache#\";\n            let u1 = pd1(item, bookurl) + ac + \"#immersiveTheme#\";\n            if (m.charset) {\n                u1 = u1 + \";get;\" + m.charset\n            }\n            d.push({\n                col_type: (cover ? \"movie_1_vertical_pic\" : \"text_1\"),\n                title: pdfh1(item, name),\n                img: (cover ? pd1(item, cover) + \"@Referer=\" : \"hiker://empty\"),\n                url: \"hiker://page/menu\",\n                desc: (author ? pdfh1(item, author) : \"\") + \"\\n\" + (intro ? pdfh1(item, intro) : \"\"),\n                extra: {\n                    \"bookName\": pdfh1(item, name),\n                    \"cover\": (cover ? pd1(item, cover) + \"@Referer=\" : \"hiker://empty\"),\n                    \"Toc\": MY_PARAMS.all.ruleToc,\n                    \"content\": MY_PARAMS.all.ruleContent,\n                    url: nexttoc ? \"hiker://empty#\" + u1 : u1,\n                    u1: nexttoc ? u1 : null,\n                    charset: m.charset,\n                    inheritTitle: false\n                }\n            })\n        })\n    } else {\n        d.push({\n            title: \"列表加载失败：\" + listrule,\n            col_type: \"text_center_1\",\n            url: \"hiker://empty\"\n        })\n    }\n} catch (e) {\n    d.push({\n        title: \"加载失败：\" + e.message,\n        col_type: \"text_center_1\",\n        url: \"hiker://empty\"\n    })\n}\nsetResult(d);"},{"col_type":"text_center_1","name":"设置","path":"config","rule":"js:\nvar d = [];\ntry {\n    d.push({\n        title: \"添加订阅\",\n        url: $(\"\", \"请输入订阅名称，取个名吧（注意不要填地址）\").input(() => {\n            if (input == null || input == \"\") {\n                return \"toast://不填怎么能行呢\"\n            }\n            if (input.includes(\"://\")) {\n                return \"toast://不能填地址哦，傻宝贝\"\n            }\n            return $(\"\", \"请输入订阅地址\").input((name) => {\n                let {\n                    add,\n                    update\n                } = $.require(\"hiker://page/datat\");\n                add(name, input);\n                try {\n                    update(name, input);\n                    refreshPage();\n                    return \"toast://导入成功\"\n                } catch (e) {\n                    return \"toast://导入失败\"\n                }\n            }, input)\n        }),\n        col_type: \"text_2\"\n    })\n    d.push({\n        title: \"添加本地\",\n        url: $(\"\", \"请输入订阅名称，取个名吧（输完点击确定后会跳转选择书源文件界面）\").input(() => {\n            if (input == null || input == \"\") {\n                return \"toast://不填怎么能行呢\"\n            }\n            if (input.includes(\"://\")) {\n                return \"toast://不能填地址哦，傻宝贝\"\n            }\n            return \"fileSelect://\" + $.toString((name) => {\n                let s = input.split(\"/\")\n                let fname = s[s.length - 1].replace(\"_fileSelect_\", \"\");\n                if (!fname.includes(\".json\") && !fname.includes(\".txt\")) {\n                    return \"toast://格式不对，仅支持json或txt格式的书源文件\"\n                }\n                let url = \"hiker://files/yuedu/\" + fname;\n                let c = fetch(\"file://\" + input);\n                if (!c.includes(\"bookSource\")) {\n                    return \"toast://格式不对，仅支持书源文件\"\n                }\n                writeFile(url, c);\n                let {\n                    add,\n                    update\n                } = $.require(\"hiker://page/datat\");\n                add(name, url);\n                try {\n                    update(name, url);\n                    refreshPage();\n                    return \"toast://导入成功\"\n                } catch (e) {\n                    return \"toast://导入失败\"\n                }\n            }, input);\n        }),\n        col_type: \"text_2\"\n    })\n    let list = $.require(\"hiker://page/datat\").load();\n    list.forEach((item, i) => {\n        d.push({\n            title: item.name,\n            desc: item.url,\n            url: $([\"删除订阅\", \"编辑名称\", \"分享订阅\", \"更新数据\"]).select((name, url) => {\n                if (input == \"删除订阅\") {\n                    return $(\"确认删除？\").confirm((name, url) => {\n                        if (url.startsWith(\"hiker://files/\")) {\n                            deleteFile(url);\n                        }\n                        deleteFile(\"hiker://files/yuedu/\" + md5(name) + \".json\")\n                        $.require(\"hiker://page/datat\").remove(url);\n                        refreshPage();\n                        return \"toast://已删除\"\n                    }, name, url)\n                } else if (input == \"编辑名称\") {\n                    return $(\"\").input((name, url) => {\n                        deleteFile(\"hiker://files/yuedu/\" + md5(name) + \".json\")\n                        let {\n                            rename,\n                            update\n                        } = $.require(\"hiker://page/datat\");\n                        update(input, url);\n                        rename(url, input);\n                        refreshPage();\n                        return \"hiker://empty\"\n                    }, name, url)\n                } else if (input == \"分享订阅\") {\n                    if (url.startsWith(\"hiker://files/\")) {\n                        return \"toast://当前订阅为本地文件，无法分享\";\n                    }\n                    return $(\"#noLoading#\").lazyRule((name, url) => {\n                        let {\n                            share\n                        } = $.require(\"hiker://page/datat\");\n                        return share(name, url)\n                    }, name, url)\n                } else {\n                    try {\n                        let {\n                            update\n                        } = $.require(\"hiker://page/datat\");\n                        update(name, url);\n                        return \"toast://更新成功\"\n                    } catch (e) {\n                        return \"toast://更新失败\"\n                    }\n                }\n            }, item.name, item.url),\n            col_type: \"text_1\"\n        })\n    })\n} catch (e) {\n    d.push({\n        title: \"错误：\" + e.message,\n        col_type: \"text_center_1\",\n        url: \"hiker://empty\"\n    })\n}\nsetResult(d);"},{"col_type":"text_1","name":"目录","path":"menu","rule":"js:\nvar d = [];\nvar res = getResCode()\nlet Toc = MY_PARAMS.Toc\nlet {\n    getArray,\n    getText,\n    getUrl0,\n    convert\n} = $.require(\"hiker://page/converter\");\n//log(Toc);\nvar caches = [];\n\nfunction getCache() {\n    let c = readFile(\"chapter.json\") || \"[]\";\n    caches = JSON.parse(c)\n    let url = MY_URL\n    addListener(\"onRefresh\", $.toString((url) => {\n        let c = readFile(\"chapter.json\") || \"[]\";\n        c = JSON.parse(c)\n        let che = {\n            url: url,\n            next: \"\",\n            chapters: []\n        };\n        for (let i = 0; i < c.length; i++) {\n            if (c[i].url == che.url) {\n                c[i] = che;\n                log(\"clear:\" + url)\n                saveFile(\"chapter.json\", JSON.stringify(c))\n                break\n            }\n        }\n    }, url))\n    for (let it of caches) {\n        if (it.url == url) {\n            return it;\n        }\n    }\n    return {\n        url: url,\n        next: \"\",\n        chapters: []\n    }\n}\n\nfunction saveCache(che) {\n    let c = caches\n    if (c.length > 10) {\n        c.shift()\n    }\n    let exist = false\n    for (let i = 0; i < c.length; i++) {\n        if (c[i].url == che.url) {\n            c[i] = che;\n            exist = true;\n            break\n        }\n    }\n    if (!exist) {\n        c.push(che)\n    }\n    saveFile(\"chapter.json\", JSON.stringify(c))\n}\n\n\nlet next = Toc.nextTocUrl;\nlet list = [];\nif (next && next != \"\") {\n    if (next == \"option@value\") {\n        next = \"text.下一页&&href\";\n    }\n    MY_URL = MY_PARAMS.u1 || MY_URL;\n    let headers = MY_PARAMS.charset ? {\n        \"charset\": MY_PARAMS.charset,\n        \"Content-Type\": \"text/html; charset=\" + MY_PARAMS.charset\n    } : {};\n    next = convert(next);\n    //log(next);\n    let cache = getCache();\n    let nurl = cache.next;\n    if (nurl == \"\") {\n        nurl = MY_URL;\n    }\n    let id = MY_URL + \"@@\" + new Date().getTime();\n    let aid = \"a\" + id;\n    putMyVar(aid, \"1\");\n    addListener(\"onClose\", $.toString((aid) => {\n        log(\"clear: \" + aid);\n        clearMyVar(aid);\n    }, aid));\n    let arr = cache.chapters || [];\n    var cc = (a) => {\n        return a.map(item => {\n            var title = getText(item, Toc.chapterName)\n            if (title != \"\") {\n                let u1 = getUrl0(item, Toc.chapterList, Toc.chapterUrl) + \"#autoPage##readTheme#\";\n                if (MY_PARAMS.charset) {\n                    u1 = u1 + \";get;\" + MY_PARAMS.charset;\n                }\n                return {\n                    title: title,\n                    url: \"hiker://page/content\",\n                    extra: {\n                        title: title,\n                        content: MY_PARAMS.content,\n                        url: u1\n                    },\n                    col_type: \"text_1\"\n                };\n            }\n        });\n    }\n    //log(cache.next + \":\" + cache.chapters.length);\n    let d2 = cc(arr);\n    d2.push({\n        title: \"加载中，请稍候...\",\n        url: \"\",\n        col_type: \"text_center_1\",\n        extra: {\n            id: id\n        }\n    });\n    d2.unshift({\n        title: MY_PARAMS.bookName,\n        img: MY_PARAMS.cover,\n        url: MY_URL,\n        col_type: \"movie_1_vertical_pic_blur\"\n    });\n    setResult(d2);\n    headers[\"Referer\"] = MY_URL.split(\"#\")[0];\n    if (nurl != MY_URL) {\n        MY_URL = nurl;\n        res = fetch(MY_URL, {\n            headers: headers\n        });\n    } else if (MY_PARAMS.u1) {\n        res = fetch(MY_URL, {\n            headers: headers\n        });\n    }\n    var urls = [nurl];\n    while (true) {\n        let a = [];\n        for (let it of arr) {\n            a.push(it);\n        }\n        cache.chapters = a;\n        let arr1 = getArray(res, Toc.chapterList);\n        //log(arr1);\n        if (arr1 && arr1.length > 0) {\n            for (let it of arr1) {\n                arr.push(it)\n            }\n        }\n        addItemBefore(id, cc(arr1));\n        try {\n            if (getMyVar(aid, \"0\") != \"1\") {\n                log(\"break: \" + aid);\n                break;\n            }\n            java.lang.Thread.sleep(50);\n            let nurl2 = pd(res, \"body&&\" + next);\n            if (nurl2 && nurl2 != \"\" && !urls.includes(nurl2)) {\n                headers[\"Referer\"] = cache.next.split(\"#\")[0];\n                urls.push(nurl2);\n                cache.next = nurl2;\n                nurl = nurl2;\n                MY_URL = nurl;\n                res = fetch(nurl, {\n                    headers: headers\n                });\n            } else {\n                break;\n            }\n        } catch (e) {\n            break;\n        }\n    }\n    deleteItem(id);\n    //log(cache.next + \":end:\" + cache.chapters.length);\n    saveCache(cache);\n} else {\n    list = getArray(res, Toc.chapterList);\n    list.forEach(item => {\n        //log(item);    \n        var title = getText(item, Toc.chapterName)\n        if (title != \"\") {\n            let u1 = getUrl0(item, Toc.chapterList, Toc.chapterUrl) + \"#autoPage##readTheme#\";\n            if (MY_PARAMS.charset) {\n                u1 = u1 + \";get;\" + MY_PARAMS.charset;\n            }\n            d.push({\n                title: title,\n                url: \"hiker://page/content\",\n                extra: {\n                    title: title,\n                    content: MY_PARAMS.content,\n                    url: u1\n                }\n            })\n        }\n    });\n\n    var cp = d.map(function(item) {\n        return {\n            \"title\": item.title,\n            \"url\": item.extra.url.replace(\"#autoPage##readTheme#\", \"\")\n        }\n    });\n    if (list.length > 0) {\n        d.unshift({\n            title: \"下载\",\n            url: \"hiker://page/download.view#noRecordHistory##noRefresh##noHistory#?rule=本地资源管理\",\n            col_type: \"text_center_1\",\n            extra: {\n                chapterList: cp,\n                defaultView: \"1\",\n                info: {\n                    bookName: MY_PARAMS.bookName,\n                    bookTopPic: MY_PARAMS.cover,\n                    ruleName: \"悦读\",\n                    parseCode: $.toString((MY_PARAMS, r0) => {\n                        let {\n                            convert\n                        } = $.require(\"hiker://page/converter?rule=\" + r0);\n                        var res = request(input);\n                        var rule = MY_PARAMS.content;\n                        let r = convert(rule.content);\n                        let r1 = r.split(\"&&\");\n                        let r2 = r1.slice(0, r1.length - 1).join(\"&&\");\n                        let arr = pdfa(res, \"body&&\" + r2);\n                        //log(arr);\n                        var tt = \"\"\n                        for (let it of arr) {\n                            it = it.replace(new RegExp(\"\\n\", \"g\"), \"--br--\");\n                            //log(it);\n                            var t = pdfh(it, \"Text\");\n                            t = t.replace(new RegExp(\"--br--\", \"g\"), \"<br>\");\n                            if (t == \"\") {\n                                continue\n                            }\n                            let t2 = t.split(\"<br>\");\n                            for (let it2 of t2) {\n                                if (it2 == \"\" || it2.length == 1) {\n                                    continue\n                                }\n                                if (!it2.startsWith(\"　\") && !it2.startsWith(\"&nbsp;&nbsp;\")) {\n                                    it2 = \"&nbsp;&nbsp;&nbsp;&nbsp;\" + it2.trim();\n                                }\n                                if (rule.replaceRegex) {\n                                    it2 = it2.replace(new RegExp(rule.replaceRegex.replace(\"##\", \"\"), \"g\"), \"\")\n                                }\n                                if (it2 == \"\") {\n                                    continue\n                                }\n                                tt += it2 + \"\\n\"\n                            }\n                        }\n                        return tt\n                    }, MY_PARAMS, MY_RULE.title),\n                    type: \"novel\"\n                }\n            }\n        });\n    } else {\n        d.unshift({\n            title: \"未解析到目录列表\",\n            url: MY_URL,\n            col_type: \"text_center_1\",\n        });\n    }\n    d.unshift({\n        title: MY_PARAMS.bookName,\n        img: MY_PARAMS.cover,\n        url: MY_URL,\n        col_type: \"movie_1_vertical_pic_blur\"\n    })\n    setResult(d);\n}"},{"col_type":"movie_3","name":"内容","path":"content","rule":"js:\nvar d = [];\nlet {\n    convert\n} = $.require(\"hiker://page/converter\");\nvar res = getResCode();\nvar rule = MY_PARAMS.content\nlet r = convert(rule.content);\nlet r1 = r.split(\"&&\");\nlet r2 = r1.slice(0, r1.length - 1).join(\"&&\");\nlet arr = pdfa(res, \"body&&\" + r2);\n//log(arr);\nfor (let it of arr) {\n    it = it.replace(new RegExp(\"\\n\", \"g\"), \"--br--\");\n    //log(it);\n    var t = pdfh(it, \"Text\");\n    t = t.replace(new RegExp(\"--br--\", \"g\"), \"<br>\");\n    if (t == \"\") {\n        continue\n    }\n    let t2 = t.split(\"<br>\");\n    for (let it2 of t2) {\n        if (it2 == \"\" || it2.length == 1) {\n            continue\n        }\n        if (!it2.startsWith(\"　\") && !it2.startsWith(\"&nbsp;&nbsp;\")) {\n            it2 = \"&nbsp;&nbsp;&nbsp;&nbsp;\" + it2.trim();\n        }\n        if (rule.replaceRegex) {\n            it2 = it2.replace(new RegExp(rule.replaceRegex.replace(\"##\", \"\"), \"g\"), \"\")\n        }\n        if (it2 == \"\" || it2 == \"&nbsp;&nbsp;&nbsp;&nbsp;\") {\n            continue\n        }\n        d.push({\n            title: it2,\n            url: \"\",\n            col_type: \"rich_text\",\n            desc: \"\",\n            pic_url: \"\"\n        });\n    }\n}\nd.unshift({\n    title: \"<big>\" + MY_PARAMS.title + \"</big>\",\n    col_type: \"rich_text\"\n})\nsetResult(d);"},{"col_type":"movie_1_vertical_pic","name":"搜索","path":"search","rule":"js:\nlet {\n    search\n} = $.require(\"hiker://page/ss\");\nlet d = [];\nlet kw = getParam(\"kw\");\nlet s = kw;\nsetPageTitle(\"搜索\" + kw + \" \" + MY_PARAMS.bookSourceName);\nif (typeof(getSearchMode) == \"undefined\") {\n    confirm({\n        title: \"温馨提示\",\n        content: \"你的软件版本太低，更新到最新版才能使用本规则\"\n    })\n}\nlet matchMust = getSearchMode() == 1;\nlet tip = \"精确匹配：\" + (matchMust ? \"是\" : \"否\");\nif (MY_PAGE == 1) {\n    d.push({\n        title: tip,\n        url: $(\"#noLoading#\").lazyRule(() => {\n            setSearchMode(getSearchMode() == 0 ? 1 : 0);\n            refreshPage();\n            return \"toast://OK\";\n        }),\n        col_type: \"text_1\",\n    });\n}\nlet d2 = search(MY_PARAMS.rules, kw, MY_PAGE);\nfor (let it of d2) {\n    if (!matchMust || searchContains(it.title, s)) {\n        it.title = it.title.includes(\"““””\") ? it.title : \"““””\" + it.title.replace(new RegExp(\"<em>|</em>\", \"g\"), \"\").replace(new RegExp(s, \"g\"), \"<strong><span style=\\\"color: #1E90FF\\\">\" + s + \"</span></strong>\")\n        d.push(it);\n    }\n}\n\nsetResult(d);"},{"col_type":"movie_3","name":"转换","path":"converter","rule":"var convert = (str) => {\n    return str.replace(/@/g, \"&&\")\n        .replace(/\\.[0-9]/g, function(a) {\n            return a.replace(\".\", \",\")\n        })\n        .replace(new RegExp(\" \", \"g\"), \"&&\")\n        .replace(/text\\.(.*?)&&/g, \"*:contains($1),-1&&\")\n        .replace(/-class\\./g, \".\")\n        .replace(/class\\./g, \".\")\n        .replace(/tag\\./g, \"\")\n        .replace(/id\\./g, \"#\")\n        .replace(/##/g, \"!\")\n        .replace(/&&([a-zA-Z\\.\\-]+?)!([0-9])/g, \"--$1,$2&&$1\")\n        .replace(\"text\", \"Text\");\n};\nlet getArray = (html, rule) => {\n    let r1 = rule.split(\"!\")[0].split(\"||\");\n    let c = convert(r1[0]);\n    if (c.includes(\"&&li&&a\") && c[c.length - 1] == \"a\") {\n        c = c.replace(\"&&li&&a\", \"&&li\");\n    }\n    log(c);\n    let arr = pdfa(html, \"body&&\" + c);\n    if (r1.length > 1) {\n        let r2 = r1[1].split(\":\");\n        let r3 = [];\n        for (let it of r2) {\n            try {\n                let i = parseInt(it);\n                if (isNaN(i)) {\n                    continue;\n                }\n                r3.push(i);\n            } catch (e) {}\n        }\n        let arr2 = [];\n        for (let i = 0; i < arr.length; i++) {\n            if (r3.indexOf(i) < 0) {\n                arr2.push(arr[i]);\n            }\n        }\n        return arr2;\n    }\n    log(\"获取失败，失败定位：\" + r1)\n    return arr;\n};\nlet getText = (html, rule) => {\n    var ru = convert(rule)\n    var r = pdfh(html, ru)\n    if (r == \"\") {\n        log(\"返回为空，可能是定位失败：\" + rule)\n    }\n    return r\n};\nlet getUrl0 = (html, parentRule, rule) => {\n    if (parentRule != null) {\n        parentRule = parentRule.split(\"!\")[0];\n    }\n    let p = parentRule != null && parentRule[parentRule.length - 1] == \"a\" ? \"a&&\" : \"\";\n    let r = pd(html, p + convert(rule.split(\"##\")[0]));\n    if (r == \"\") {\n        log(\"返回为空，可能是定位失败：\" + rule)\n    }\n    return r\n};\nlet parseUrl = (url, page) => {\n    url = url.replace(new RegExp(\"{{page}}\", \"g\"), page);\n    let s = url.split(\"<,\");\n    if (s.length > 1) {\n        if (page > 1) {\n            let s2 = s[1].split(\">\");\n            url = s[0] + s2[0] + (s2.length > 1 ? s2[1] : \"\")\n        } else {\n            url = s[0];\n        }\n    }\n    return url;\n}\nlet getCharset = (searchUrl) => {\n    if (searchUrl) {\n        if (searchUrl.includes('\"gbk\"') || searchUrl.includes(\"'gbk'\")) {\n            return \"gbk\"\n        } else if (searchUrl.includes('\"gb2312\"') || searchUrl.includes(\"'gb2312'\")) {\n            return \"gb2312\"\n        }\n    }\n    return null\n}\n$.exports = {\n    getArray: getArray,\n    convert: convert,\n    getText: getText,\n    getUrl0: getUrl0,\n    parseUrl: parseUrl,\n    getCharset: getCharset\n}"},{"col_type":"movie_3","name":"聚搜","path":"ju","rule":"js:\nvar d = [];\nlet {\n    search,\n    listRules\n} = $.require(\"hiker://page/ss\");\nlet {\n    all,\n    use,\n    data\n} = listRules(MY_PAGE);\ndata = data || [];\nlet s = getParam(\"kw\");\nsetPageTitle(\"搜索\" + s);\nif (typeof(getSearchMode) == \"undefined\") {\n    confirm({\n        title: \"温馨提示\",\n        content: \"你的软件版本太低，更新到最新版才能使用本规则\"\n    })\n}\nlet matchMust = getSearchMode() == 1;\nlet tip = \"搜索源：\" + use + \"/\" + all + \"  精确匹配：\" + (matchMust ? \"是\" : \"否\");\nif (MY_PAGE == 1) {\n    d.push({\n        title: tip,\n        url: $(\"#noLoading#\").lazyRule(() => {\n            setSearchMode(getSearchMode() == 0 ? 1 : 0);\n            refreshPage();\n            return \"toast://OK\";\n        }),\n        col_type: \"text_1\",\n        extra: {\n            id: \"yuedu-s-h\"\n        }\n    });\n} else if (data.length > 0) {\n    updateItem(\"yuedu-s-h\", {\n        title: tip\n    });\n}\nlet p = MY_PAGE;\nlet pageid = \"yuedu-page\" + MY_PAGE;\nif (data.length > 0) {\n    d.push({\n        title: \"加载第\" + MY_PAGE + \"页中，进度：1/\" + data.length,\n        url: \"hiker://empty\",\n        col_type: \"text_center_1\",\n        desc: \"\",\n        pic_url: \"\",\n        extra: {\n            id: pageid\n        }\n    });\n}\nsetResult(d);\nif (data.length > 0) {\n    //多线程加载\n    let tasks = data.map(it => {\n        return {\n            func: function(rule) {\n                return search(rule, s, 1);\n            },\n            param: it,\n            id: \"rule@\" + it.name\n        }\n    });\n\n    batchExecute(tasks, {\n        func: function(param, id, error, result) {\n            //log(\"listener: \" + (result || []).length)\n            param.i = param.i + 1;\n            if (result) {\n                try {\n                    for (let it of result) {\n                        param.j = param.j + 1;\n                        if (matchMust) {\n                            if (!searchContains(it.title, s)) {\n                                continue;\n                            }\n                        }\n                        let extra = it.extra || {};\n                        extra.id = \"__app\" + MY_PAGE + \"@\" + param.j;\n                        extra.bookName = it.title\n                        extra.cover = it.pic_url || it.img\n                        addItemBefore(pageid, {\n                            title: it.title.includes(\"““””\") ? it.title : \"““””\" + it.title.replace(new RegExp(\"<em>|</em>\", \"g\"), \"\").replace(new RegExp(s, \"g\"), \"<strong><span style=\\\"color: #1E90FF\\\">\" + s + \"</span></strong>\"),\n                            desc: it.desc,\n                            url: it.url,\n                            pic_url: it.pic_url || it.img,\n                            col_type: it.pic_url || it.img ? 'movie_1_vertical_pic' : \"text_1\",\n                            extra: extra\n                        })\n                    }\n                } catch (e) {}\n\n            }\n            if (param.i >= param.all) {\n                deleteItem(pageid)\n            } else {\n                updateItem({\n                    title: \"加载第\" + MY_PAGE + \"页中，进度：\" + (param.i + 1) + \"/\" + param.all,\n                    url: \"hiker://empty\",\n                    col_type: \"text_center_1\",\n                    desc: \"\",\n                    pic_url: \"\",\n                    extra: {\n                        id: pageid\n                    }\n                })\n            }\n        },\n        param: {\n            all: data.length,\n            i: 0,\n            j: -1\n        }\n    });\n}"},{"col_type":"movie_3","name":"搜索辅助","path":"ss","rule":"var {\n    convert,\n    parseUrl,\n    getCharset\n} = $.require(\"hiker://page/converter\");\nlet search = (rule, kw, page) => {\n    let d = [];\n    let m = rule.ruleSearch\n    // 阅读=>视界\n    let u = rule.searchUrl.startsWith(\"http\") ? rule.searchUrl : rule.bookSourceUrl + rule.searchUrl;\n    //log(m);\n    let url1 = parseUrl(u, page).replace(new RegExp(\"{{key}}\", \"g\"), kw);\n    let url2 = url1.split(\",{\");\n    let url = url2[0];\n    let headers = {};\n    let method = \"get\";\n    let body = null;\n    let c = getCharset(url1);\n    if (c) {\n        headers.charset = c;\n        headers[\"Content-Type\"] = \"text/html; charset=\" + c;\n    }\n    try {\n        if (url2.length > 1 && url1.substring(url1.length - 1, url1.length) == \"}\") {\n            let ext = \"{\" + url1.substring(url1.indexOf(\",{\") + 2, url1.length);\n            //log(ext);\n            try {\n                ext = JSON.parse(ext);\n            } catch (e) {\n                eval(\"ext=\" + ext);\n            }\n            if (ext.method && ext.method != \"\") {\n                method = ext.method;\n            }\n            if (ext.body && ext.body != \"\") {\n                body = ext.body;\n                headers[\"Content-Type\"] = \"application/x-www-form-urlencoded\" + (headers.charset ? \";charset=\" + headers.charset : \"\");\n            }\n        }\n    } catch (e) {\n        if (url1.includes('\"POST\"') || url1.includes('\"post\"')) {\n            method = \"post\";\n        }\n    }\n    if (method == \"post\" || method == \"POST\") {\n        let ct = headers[\"Content-Type\"];\n        headers[\"Content-Type\"] = ct ? ct.replace(\"text/html\", \"application/x-www-form-urlencoded\") : \"application/x-www-form-urlencoded\";\n    }\n\n    let listrule = \"body&&\" + convert(m.bookList).split(\"||\")[0]\n    let author = null;\n    try {\n        author = convert(m.author);\n    } catch (e) {}\n    let cover = null;\n    try {\n        cover = convert(m.coverUrl);\n    } catch (e) {}\n    let name = null;\n    try {\n        name = convert(m.name);\n    } catch (e) {}\n    let bookurl = null;\n    try {\n        bookurl = convert(m.bookUrl);\n    } catch (e) {}\n    let intro = null;\n    try {\n        intro = convert(m.intro);\n    } catch (e) {}\n    //setPageTitle(\"搜索\" + getParam(\"kw\") + \" \" + MY_PARAMS.bookSourceName);\n    //MY_URL = url;\n    let res = request(url, {\n        method: method,\n        headers: headers,\n        body: body\n    });\n    let pdfh1 = (a, b) => {\n        try {\n            if (b == null) return \"\";\n            return pdfh(a, b);\n        } catch (e) {\n            return \"\";\n        }\n    }\n    let pd1 = (a, b, c) => {\n        try {\n            if (b == null) return \"\";\n            return pd(a, b, c);\n        } catch (e) {\n            return \"\";\n        }\n    }\n    listrule = listrule.replace(\"&&tbody--tr,0&&tr\", \"&&table tbody tr:gt(0)\");\n    //log(listrule);\n    let list = pdfa(res, listrule);\n    //log(list);\n    //log(name);\n    list.forEach(item => {\n        let next = rule.ruleToc.nextTocUrl;\n        let nexttoc = next && next != \"\";\n        let ac = nexttoc ? \"\": \"#autoCache#\";\n        //let ac = \"#autoCache#\";\n        let u1 = pd1(item, bookurl, url) + ac + \"#immersiveTheme#\";\n        if (c) {\n            u1 = u1 + \";get;\" + c\n        }\n        d.push({\n            title: pdfh1(item, name),\n            img: pd1(item, cover, url),\n            url: \"hiker://page/menu\",\n            desc: rule.bookSourceName + \"\\n\" + pdfh1(item, author) + \"\\n\" + pdfh1(item, intro),\n            extra: {\n                \"Toc\": rule.ruleToc,\n                \"content\": rule.ruleContent,\n                \"bookName\": parseDomForHtml(item, name),\n                \"cover\": parseDom(item, cover, url),\n                url: nexttoc ? \"hiker://empty#\" + u1 : u1,\n                u1: nexttoc ? u1 : null,\n                inheritTitle: false,\n                charset: c\n            }\n        })\n    });\n    return d;\n}\n$.exports = {\n    convert: convert,\n    search: search,\n    listRules: (page, rule) => {\n        try {\n            //并发数量\n            let size = 16;\n            let {\n                load,\n                loadRules,\n                getSelect\n            } = $.require(\"hiker://page/datat\");\n            let data = load();\n            let select = getSelect(data);\n            let rules = data.length > 0 ? loadRules(select.name) : [];\n            if (!page && !rule) {\n                return rules.map(it => it.name);\n            }\n            if (rule != null) {\n                return rules.filter(i => i.name == rule);\n            }\n            let start = (page - 1) * size;\n            if (rules.length < start + 1) {\n                return [];\n            }\n            let len = size;\n            if (rules.length < page * size) {\n                len = rules.length - start\n            }\n            let all = rules.length;\n            let use = (page - 1) * size + len;\n            return {\n                all: all,\n                use: use,\n                data: rules.slice(start, start + len)\n            };\n        } catch (e) {\n            return {\n                all: 0,\n                use: 0,\n                data: []\n            }\n        }\n    }\n}"},{"col_type":"movie_3","name":"数据","path":"datat","rule":"let load = function() {\n    try {\n        return JSON.parse(fetch(\"hiker://files/yuedu/list.json\")).urls;\n    } catch (e) {\n        return [];\n    }\n}\nlet loadRules = function(name) {\n    try {\n        let list = JSON.parse(fetch(\"hiker://files/yuedu/\" + md5(name) + \".json\"));\n        return list.filter(it => {\n            let s = JSON.stringify(it)\n            if (s.includes(\"<js>\") || s.includes(\"@js:\") || s.includes(\"$.\")) {\n                return false\n            } else {\n                return true\n            }\n        });\n    } catch (e) {\n        return [];\n    }\n}\nlet remove = function(url) {\n    let data = load();\n    data = data.filter(it => it.url != url);\n    writeFile(\"hiker://files/yuedu/list.json\", JSON.stringify({\n        urls: data\n    }))\n}\nlet rename = function(url, name) {\n    let arr = load();\n    for (let i in arr) {\n        if (arr[i].url == url) {\n            arr[i].name = name;\n        }\n    }\n    writeFile(\"hiker://files/yuedu/list.json\", JSON.stringify({\n        urls: arr\n    }))\n}\nlet add = function(name, url) {\n    let data = load();\n    data = data.filter(it => it.url != url);\n    data.push({\n        name: name,\n        url: url\n    });\n    writeFile(\"hiker://files/yuedu/list.json\", JSON.stringify({\n        urls: data\n    }))\n}\nlet update = function(name, url) {\n    let t = fetch(url)\n    JSON.parse(t)\n    writeFile(\"hiker://files/yuedu/\" + md5(name) + \".json\", t)\n}\nlet share = function(name, url) {\n    return \"copy://悦读订阅数据分享，复制整条口令打开软件即可导入\\n\" + name + \"：\" + url + \"@import=js:$.require('hiker://page/datat?rule=\" + MY_RULE.title + \"').ca()\"\n}\nlet cloudAdd = function() {\n    let s = input.split(\"：\");\n    if (s.length > 1) {\n        add(s[0], s[1]);\n        update(s[0], s[1]);\n    }\n    return \"toast://已导入悦读订阅源“\" + s[0] + \"”\"\n}\nlet getSelect = function(data) {\n    if (data == null) {\n        data = load();\n    }\n    if (data.length == 0) {\n        return {};\n    }\n    let tab = getItem(\"tab\", data[0].url);\n    let select = data.filter(it => it.url == tab);\n    if (select.length <= 0) {\n        return data[0];\n    } else {\n        return select[0];\n    }\n}\n$.exports = {\n    add: add,\n    update: update,\n    remove: remove,\n    rename: rename,\n    load: load,\n    loadRules: loadRules,\n    getSelect: getSelect,\n    share: share,\n    ca: cloudAdd\n}"}],"title":"悦读","author":"Joe&&小棉袄🌞","version":53,"type":"read","url":"hiker://empty","col_type":"movie_3","class_name":"","class_url":"","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:$.require(\"hiker://page/home\")","searchFind":"js:\nvar d = [];\nlet kw = getParam(\"kw\")\nsetResult([{\n    title: \"点击开始聚搜\" + kw,\n    url: \"hiker://page/ju?p=fypage&kw=\" + kw\n}])\nsetResult(d);","search_url":"hiker://empty?kw=**","group":"①推荐","detail_col_type":"movie_1","detail_find_rule":"","sdetail_col_type":"movie_1","sdetail_find_rule":"","ua":"mobile","preRule":"","pages":"[{\"col_type\":\"text_1\",\"name\":\"源目录\",\"path\":\"source\",\"rule\":\"js:\\nvar d = [];\\nvar m = MY_PARAMS.rules\\nvar baseurl = m.bookSourceUrl\\nif (m.ruleExplore.bookList) {\\n    var rule = m.ruleExplore\\n} else {\\n    var rule = m.ruleSearch\\n}\\nd.push({\\n    title: \\\"搜索\\\",\\n    desc: \\\"请输入搜索关键词\\\",\\n    url: $.toString(() => {\\n        putMyVar(\\\"kw\\\", input);\\n        return \\\"hiker://page/search?p=fypage&kw=\\\" + input\\n    }),\\n    col_type: \\\"input\\\",\\n    extra: {\\n        \\\"u\\\": baseurl + m.searchUrl,\\n        \\\"rules\\\": m,\\n        defaultValue: getMyVar(\\\"kw\\\", \\\"\\\"),\\n        bookSourceName: m.bookSourceName\\n    }\\n});\\ntry {\\n    if (m.enabledExplore && m.exploreUrl) {\\n        JSON.parse(m.exploreUrl).forEach(item => {\\n            d.push({\\n                title: item.title,\\n                col_type: item.style.layout_flexBasisPercent == 1 ? \\\"text_center_1\\\" : \\\"text_3\\\",\\n                url: item.url == \\\"\\\" ? \\\"hiker://empty\\\" : \\\"hiker://page/books?p=fypage\\\",\\n                extra: {\\n                    \\\"all\\\": m,\\n                    \\\"rules\\\": rule,\\n                    \\\"u\\\": baseurl + item.url\\n                }\\n            })\\n        })\\n    }\\n} catch (e) {\\n    log(m.exploreUrl);\\n}\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"主页\",\"path\":\"home\",\"rule\":\"var d = [];\\nlet {\\n    load,\\n    loadRules,\\n    getSelect\\n} = $.require(\\\"hiker://page/datat\\\");\\nlet data = load();\\nif (data.length > 0) {\\n    d.push({\\n        title: \\\"⚙️设置\\\",\\n        url: \\\"hiker://page/config\\\",\\n        col_type: \\\"scroll_button\\\"\\n    });\\n    let select = getSelect(data);\\n    data.forEach(item => {\\n        d.push({\\n            title: select.url == item.url ? \\\"““\\\" + item.name + \\\"””\\\" : item.name,\\n            url: $().lazyRule((url) => {\\n                setItem(\\\"tab\\\", url)\\n                refreshPage()\\n                return \\\"toast://切换成功\\\"\\n            }, item.url),\\n            col_type: \\\"scroll_button\\\"\\n        })\\n    })\\n    d.push({\\n        title: \\\"搜索\\\",\\n        url: $.toString(() => {\\n            putMyVar(\\\"kw\\\", input);\\n            return \\\"hiker://page/ju?p=fypage&kw=\\\" + input\\n        }),\\n        col_type: \\\"input\\\",\\n        desc: \\\"聚合搜索，请输入关键词\\\",\\n        pic_url: \\\"\\\",\\n        extra: {\\n            defaultValue: getMyVar(\\\"kw\\\", \\\"\\\"),\\n        }\\n    });\\n    let list = loadRules(select.name);\\n    list.forEach(item => {\\n        d.push({\\n            title: item.bookSourceName + `(${item.bookSourceGroup})`,\\n            col_type: \\\"text_2\\\",\\n            url: \\\"hiker://page/source?p=fypage\\\",\\n            extra: {\\n                \\\"rules\\\": item\\n            }\\n        })\\n    })\\n} else {\\n    setResult([{\\n        title: \\\"你还没有书哦～～点我进入设置\\\",\\n        url: \\\"hiker://page/config\\\",\\n        col_type: \\\"text_center_1\\\"\\n    }])\\n}\\nsetResult(d);\"},{\"col_type\":\"movie_1_vertical_pic\",\"name\":\"列表\",\"path\":\"books\",\"rule\":\"js:\\nvar d = [];\\nvar {\\n    convert,\\n    parseUrl,\\n    getCharset\\n} = $.require(\\\"hiker://page/converter\\\");\\ntry {\\n    //log(MY_PARAMS);\\n    var m = MY_PARAMS.rules\\n    // 阅读=>视界\\n    var url = parseUrl(MY_PARAMS.u, MY_PAGE);\\n    var listrule = \\\"body&&\\\" + convert(m.bookList.split(\\\"||\\\")[0]);\\n    let author = null;\\n    try {\\n        author = convert(m.author);\\n    } catch (e) {}\\n    let cover = null;\\n    try {\\n        cover = convert(m.coverUrl);\\n    } catch (e) {}\\n    let name = null;\\n    try {\\n        name = convert(m.name);\\n    } catch (e) {}\\n    let bookurl = null;\\n    try {\\n        bookurl = convert(m.bookUrl);\\n    } catch (e) {}\\n    let intro = null;\\n    try {\\n        intro = convert(m.intro);\\n    } catch (e) {}\\n    let pdfh1 = (a, b) => {\\n        try {\\n            if (b == null) return \\\"\\\";\\n            return pdfh(a, b);\\n        } catch (e) {\\n            return \\\"\\\";\\n        }\\n    }\\n    let pd1 = (a, b, c) => {\\n        try {\\n            if (b == null) return \\\"\\\";\\n            return pd(a, b, c);\\n        } catch (e) {\\n            return \\\"\\\";\\n        }\\n    }\\n    MY_URL = url;\\n    if (MY_PARAMS.all && MY_PARAMS.all.searchUrl) {\\n        m.charset = getCharset(MY_PARAMS.all.searchUrl);\\n    }\\n    let headers = m.charset ? {\\n        \\\"Content-Type\\\": \\\"text/html; charset=\\\" + m.charset\\n    } : {};\\n    var res = request(url, {\\n        headers: headers\\n    })\\n    let list = pdfa(res, listrule)\\n    if (list.length > 0) {\\n        list.forEach(item => {\\n            let next = MY_PARAMS.all.ruleToc.nextTocUrl;\\n            let nexttoc = next && next != \\\"\\\";\\n            let ac = nexttoc ? \\\"\\\": \\\"#autoCache#\\\";\\n            //let ac = \\\"#autoCache#\\\";\\n            let u1 = pd1(item, bookurl) + ac + \\\"#immersiveTheme#\\\";\\n            if (m.charset) {\\n                u1 = u1 + \\\";get;\\\" + m.charset\\n            }\\n            d.push({\\n                col_type: (cover ? \\\"movie_1_vertical_pic\\\" : \\\"text_1\\\"),\\n                title: pdfh1(item, name),\\n                img: (cover ? pd1(item, cover) + \\\"@Referer=\\\" : \\\"hiker://empty\\\"),\\n                url: \\\"hiker://page/menu\\\",\\n                desc: (author ? pdfh1(item, author) : \\\"\\\") + \\\"\\\\n\\\" + (intro ? pdfh1(item, intro) : \\\"\\\"),\\n                extra: {\\n                    \\\"bookName\\\": pdfh1(item, name),\\n                    \\\"cover\\\": (cover ? pd1(item, cover) + \\\"@Referer=\\\" : \\\"hiker://empty\\\"),\\n                    \\\"Toc\\\": MY_PARAMS.all.ruleToc,\\n                    \\\"content\\\": MY_PARAMS.all.ruleContent,\\n                    url: nexttoc ? \\\"hiker://empty#\\\" + u1 : u1,\\n                    u1: nexttoc ? u1 : null,\\n                    charset: m.charset,\\n                    inheritTitle: false\\n                }\\n            })\\n        })\\n    } else {\\n        d.push({\\n            title: \\\"列表加载失败：\\\" + listrule,\\n            col_type: \\\"text_center_1\\\",\\n            url: \\\"hiker://empty\\\"\\n        })\\n    }\\n} catch (e) {\\n    d.push({\\n        title: \\\"加载失败：\\\" + e.message,\\n        col_type: \\\"text_center_1\\\",\\n        url: \\\"hiker://empty\\\"\\n    })\\n}\\nsetResult(d);\"},{\"col_type\":\"text_center_1\",\"name\":\"设置\",\"path\":\"config\",\"rule\":\"js:\\nvar d = [];\\ntry {\\n    d.push({\\n        title: \\\"添加订阅\\\",\\n        url: $(\\\"\\\", \\\"请输入订阅名称，取个名吧（注意不要填地址）\\\").input(() => {\\n            if (input == null || input == \\\"\\\") {\\n                return \\\"toast://不填怎么能行呢\\\"\\n            }\\n            if (input.includes(\\\"://\\\")) {\\n                return \\\"toast://不能填地址哦，傻宝贝\\\"\\n            }\\n            return $(\\\"\\\", \\\"请输入订阅地址\\\").input((name) => {\\n                let {\\n                    add,\\n                    update\\n                } = $.require(\\\"hiker://page/datat\\\");\\n                add(name, input);\\n                try {\\n                    update(name, input);\\n                    refreshPage();\\n                    return \\\"toast://导入成功\\\"\\n                } catch (e) {\\n                    return \\\"toast://导入失败\\\"\\n                }\\n            }, input)\\n        }),\\n        col_type: \\\"text_2\\\"\\n    })\\n    d.push({\\n        title: \\\"添加本地\\\",\\n        url: $(\\\"\\\", \\\"请输入订阅名称，取个名吧（输完点击确定后会跳转选择书源文件界面）\\\").input(() => {\\n            if (input == null || input == \\\"\\\") {\\n                return \\\"toast://不填怎么能行呢\\\"\\n            }\\n            if (input.includes(\\\"://\\\")) {\\n                return \\\"toast://不能填地址哦，傻宝贝\\\"\\n            }\\n            return \\\"fileSelect://\\\" + $.toString((name) => {\\n                let s = input.split(\\\"/\\\")\\n                let fname = s[s.length - 1].replace(\\\"_fileSelect_\\\", \\\"\\\");\\n                if (!fname.includes(\\\".json\\\") && !fname.includes(\\\".txt\\\")) {\\n                    return \\\"toast://格式不对，仅支持json或txt格式的书源文件\\\"\\n                }\\n                let url = \\\"hiker://files/yuedu/\\\" + fname;\\n                let c = fetch(\\\"file://\\\" + input);\\n                if (!c.includes(\\\"bookSource\\\")) {\\n                    return \\\"toast://格式不对，仅支持书源文件\\\"\\n                }\\n                writeFile(url, c);\\n                let {\\n                    add,\\n                    update\\n                } = $.require(\\\"hiker://page/datat\\\");\\n                add(name, url);\\n                try {\\n                    update(name, url);\\n                    refreshPage();\\n                    return \\\"toast://导入成功\\\"\\n                } catch (e) {\\n                    return \\\"toast://导入失败\\\"\\n                }\\n            }, input);\\n        }),\\n        col_type: \\\"text_2\\\"\\n    })\\n    let list = $.require(\\\"hiker://page/datat\\\").load();\\n    list.forEach((item, i) => {\\n        d.push({\\n            title: item.name,\\n            desc: item.url,\\n            url: $([\\\"删除订阅\\\", \\\"编辑名称\\\", \\\"分享订阅\\\", \\\"更新数据\\\"]).select((name, url) => {\\n                if (input == \\\"删除订阅\\\") {\\n                    return $(\\\"确认删除？\\\").confirm((name, url) => {\\n                        if (url.startsWith(\\\"hiker://files/\\\")) {\\n                            deleteFile(url);\\n                        }\\n                        deleteFile(\\\"hiker://files/yuedu/\\\" + md5(name) + \\\".json\\\")\\n                        $.require(\\\"hiker://page/datat\\\").remove(url);\\n                        refreshPage();\\n                        return \\\"toast://已删除\\\"\\n                    }, name, url)\\n                } else if (input == \\\"编辑名称\\\") {\\n                    return $(\\\"\\\").input((name, url) => {\\n                        deleteFile(\\\"hiker://files/yuedu/\\\" + md5(name) + \\\".json\\\")\\n                        let {\\n                            rename,\\n                            update\\n                        } = $.require(\\\"hiker://page/datat\\\");\\n                        update(input, url);\\n                        rename(url, input);\\n                        refreshPage();\\n                        return \\\"hiker://empty\\\"\\n                    }, name, url)\\n                } else if (input == \\\"分享订阅\\\") {\\n                    if (url.startsWith(\\\"hiker://files/\\\")) {\\n                        return \\\"toast://当前订阅为本地文件，无法分享\\\";\\n                    }\\n                    return $(\\\"#noLoading#\\\").lazyRule((name, url) => {\\n                        let {\\n                            share\\n                        } = $.require(\\\"hiker://page/datat\\\");\\n                        return share(name, url)\\n                    }, name, url)\\n                } else {\\n                    try {\\n                        let {\\n                            update\\n                        } = $.require(\\\"hiker://page/datat\\\");\\n                        update(name, url);\\n                        return \\\"toast://更新成功\\\"\\n                    } catch (e) {\\n                        return \\\"toast://更新失败\\\"\\n                    }\\n                }\\n            }, item.name, item.url),\\n            col_type: \\\"text_1\\\"\\n        })\\n    })\\n} catch (e) {\\n    d.push({\\n        title: \\\"错误：\\\" + e.message,\\n        col_type: \\\"text_center_1\\\",\\n        url: \\\"hiker://empty\\\"\\n    })\\n}\\nsetResult(d);\"},{\"col_type\":\"text_1\",\"name\":\"目录\",\"path\":\"menu\",\"rule\":\"js:\\nvar d = [];\\nvar res = getResCode()\\nlet Toc = MY_PARAMS.Toc\\nlet {\\n    getArray,\\n    getText,\\n    getUrl0,\\n    convert\\n} = $.require(\\\"hiker://page/converter\\\");\\n//log(Toc);\\nvar caches = [];\\n\\nfunction getCache() {\\n    let c = readFile(\\\"chapter.json\\\") || \\\"[]\\\";\\n    caches = JSON.parse(c)\\n    let url = MY_URL\\n    addListener(\\\"onRefresh\\\", $.toString((url) => {\\n        let c = readFile(\\\"chapter.json\\\") || \\\"[]\\\";\\n        c = JSON.parse(c)\\n        let che = {\\n            url: url,\\n            next: \\\"\\\",\\n            chapters: []\\n        };\\n        for (let i = 0; i < c.length; i++) {\\n            if (c[i].url == che.url) {\\n                c[i] = che;\\n                log(\\\"clear:\\\" + url)\\n                saveFile(\\\"chapter.json\\\", JSON.stringify(c))\\n                break\\n            }\\n        }\\n    }, url))\\n    for (let it of caches) {\\n        if (it.url == url) {\\n            return it;\\n        }\\n    }\\n    return {\\n        url: url,\\n        next: \\\"\\\",\\n        chapters: []\\n    }\\n}\\n\\nfunction saveCache(che) {\\n    let c = caches\\n    if (c.length > 10) {\\n        c.shift()\\n    }\\n    let exist = false\\n    for (let i = 0; i < c.length; i++) {\\n        if (c[i].url == che.url) {\\n            c[i] = che;\\n            exist = true;\\n            break\\n        }\\n    }\\n    if (!exist) {\\n        c.push(che)\\n    }\\n    saveFile(\\\"chapter.json\\\", JSON.stringify(c))\\n}\\n\\n\\nlet next = Toc.nextTocUrl;\\nlet list = [];\\nif (next && next != \\\"\\\") {\\n    if (next == \\\"option@value\\\") {\\n        next = \\\"text.下一页&&href\\\";\\n    }\\n    MY_URL = MY_PARAMS.u1 || MY_URL;\\n    let headers = MY_PARAMS.charset ? {\\n        \\\"charset\\\": MY_PARAMS.charset,\\n        \\\"Content-Type\\\": \\\"text/html; charset=\\\" + MY_PARAMS.charset\\n    } : {};\\n    next = convert(next);\\n    //log(next);\\n    let cache = getCache();\\n    let nurl = cache.next;\\n    if (nurl == \\\"\\\") {\\n        nurl = MY_URL;\\n    }\\n    let id = MY_URL + \\\"@@\\\" + new Date().getTime();\\n    let aid = \\\"a\\\" + id;\\n    putMyVar(aid, \\\"1\\\");\\n    addListener(\\\"onClose\\\", $.toString((aid) => {\\n        log(\\\"clear: \\\" + aid);\\n        clearMyVar(aid);\\n    }, aid));\\n    let arr = cache.chapters || [];\\n    var cc = (a) => {\\n        return a.map(item => {\\n            var title = getText(item, Toc.chapterName)\\n            if (title != \\\"\\\") {\\n                let u1 = getUrl0(item, Toc.chapterList, Toc.chapterUrl) + \\\"#autoPage##readTheme#\\\";\\n                if (MY_PARAMS.charset) {\\n                    u1 = u1 + \\\";get;\\\" + MY_PARAMS.charset;\\n                }\\n                return {\\n                    title: title,\\n                    url: \\\"hiker://page/content\\\",\\n                    extra: {\\n                        title: title,\\n                        content: MY_PARAMS.content,\\n                        url: u1\\n                    },\\n                    col_type: \\\"text_1\\\"\\n                };\\n            }\\n        });\\n    }\\n    //log(cache.next + \\\":\\\" + cache.chapters.length);\\n    let d2 = cc(arr);\\n    d2.push({\\n        title: \\\"加载中，请稍候...\\\",\\n        url: \\\"\\\",\\n        col_type: \\\"text_center_1\\\",\\n        extra: {\\n            id: id\\n        }\\n    });\\n    d2.unshift({\\n        title: MY_PARAMS.bookName,\\n        img: MY_PARAMS.cover,\\n        url: MY_URL,\\n        col_type: \\\"movie_1_vertical_pic_blur\\\"\\n    });\\n    setResult(d2);\\n    headers[\\\"Referer\\\"] = MY_URL.split(\\\"#\\\")[0];\\n    if (nurl != MY_URL) {\\n        MY_URL = nurl;\\n        res = fetch(MY_URL, {\\n            headers: headers\\n        });\\n    } else if (MY_PARAMS.u1) {\\n        res = fetch(MY_URL, {\\n            headers: headers\\n        });\\n    }\\n    var urls = [nurl];\\n    while (true) {\\n        let a = [];\\n        for (let it of arr) {\\n            a.push(it);\\n        }\\n        cache.chapters = a;\\n        let arr1 = getArray(res, Toc.chapterList);\\n        //log(arr1);\\n        if (arr1 && arr1.length > 0) {\\n            for (let it of arr1) {\\n                arr.push(it)\\n            }\\n        }\\n        addItemBefore(id, cc(arr1));\\n        try {\\n            if (getMyVar(aid, \\\"0\\\") != \\\"1\\\") {\\n                log(\\\"break: \\\" + aid);\\n                break;\\n            }\\n            java.lang.Thread.sleep(50);\\n            let nurl2 = pd(res, \\\"body&&\\\" + next);\\n            if (nurl2 && nurl2 != \\\"\\\" && !urls.includes(nurl2)) {\\n                headers[\\\"Referer\\\"] = cache.next.split(\\\"#\\\")[0];\\n                urls.push(nurl2);\\n                cache.next = nurl2;\\n                nurl = nurl2;\\n                MY_URL = nurl;\\n                res = fetch(nurl, {\\n                    headers: headers\\n                });\\n            } else {\\n                break;\\n            }\\n        } catch (e) {\\n            break;\\n        }\\n    }\\n    deleteItem(id);\\n    //log(cache.next + \\\":end:\\\" + cache.chapters.length);\\n    saveCache(cache);\\n} else {\\n    list = getArray(res, Toc.chapterList);\\n    list.forEach(item => {\\n        //log(item);    \\n        var title = getText(item, Toc.chapterName)\\n        if (title != \\\"\\\") {\\n            let u1 = getUrl0(item, Toc.chapterList, Toc.chapterUrl) + \\\"#autoPage##readTheme#\\\";\\n            if (MY_PARAMS.charset) {\\n                u1 = u1 + \\\";get;\\\" + MY_PARAMS.charset;\\n            }\\n            d.push({\\n                title: title,\\n                url: \\\"hiker://page/content\\\",\\n                extra: {\\n                    title: title,\\n                    content: MY_PARAMS.content,\\n                    url: u1\\n                }\\n            })\\n        }\\n    });\\n\\n    var cp = d.map(function(item) {\\n        return {\\n            \\\"title\\\": item.title,\\n            \\\"url\\\": item.extra.url.replace(\\\"#autoPage##readTheme#\\\", \\\"\\\")\\n        }\\n    });\\n    if (list.length > 0) {\\n        d.unshift({\\n            title: \\\"下载\\\",\\n            url: \\\"hiker://page/download.view#noRecordHistory##noRefresh##noHistory#?rule=本地资源管理\\\",\\n            col_type: \\\"text_center_1\\\",\\n            extra: {\\n                chapterList: cp,\\n                defaultView: \\\"1\\\",\\n                info: {\\n                    bookName: MY_PARAMS.bookName,\\n                    bookTopPic: MY_PARAMS.cover,\\n                    ruleName: \\\"悦读\\\",\\n                    parseCode: $.toString((MY_PARAMS, r0) => {\\n                        let {\\n                            convert\\n                        } = $.require(\\\"hiker://page/converter?rule=\\\" + r0);\\n                        var res = request(input);\\n                        var rule = MY_PARAMS.content;\\n                        let r = convert(rule.content);\\n                        let r1 = r.split(\\\"&&\\\");\\n                        let r2 = r1.slice(0, r1.length - 1).join(\\\"&&\\\");\\n                        let arr = pdfa(res, \\\"body&&\\\" + r2);\\n                        //log(arr);\\n                        var tt = \\\"\\\"\\n                        for (let it of arr) {\\n                            it = it.replace(new RegExp(\\\"\\\\n\\\", \\\"g\\\"), \\\"--br--\\\");\\n                            //log(it);\\n                            var t = pdfh(it, \\\"Text\\\");\\n                            t = t.replace(new RegExp(\\\"--br--\\\", \\\"g\\\"), \\\"<br>\\\");\\n                            if (t == \\\"\\\") {\\n                                continue\\n                            }\\n                            let t2 = t.split(\\\"<br>\\\");\\n                            for (let it2 of t2) {\\n                                if (it2 == \\\"\\\" || it2.length == 1) {\\n                                    continue\\n                                }\\n                                if (!it2.startsWith(\\\"　\\\") && !it2.startsWith(\\\"&nbsp;&nbsp;\\\")) {\\n                                    it2 = \\\"&nbsp;&nbsp;&nbsp;&nbsp;\\\" + it2.trim();\\n                                }\\n                                if (rule.replaceRegex) {\\n                                    it2 = it2.replace(new RegExp(rule.replaceRegex.replace(\\\"##\\\", \\\"\\\"), \\\"g\\\"), \\\"\\\")\\n                                }\\n                                if (it2 == \\\"\\\") {\\n                                    continue\\n                                }\\n                                tt += it2 + \\\"\\\\n\\\"\\n                            }\\n                        }\\n                        return tt\\n                    }, MY_PARAMS, MY_RULE.title),\\n                    type: \\\"novel\\\"\\n                }\\n            }\\n        });\\n    } else {\\n        d.unshift({\\n            title: \\\"未解析到目录列表\\\",\\n            url: MY_URL,\\n            col_type: \\\"text_center_1\\\",\\n        });\\n    }\\n    d.unshift({\\n        title: MY_PARAMS.bookName,\\n        img: MY_PARAMS.cover,\\n        url: MY_URL,\\n        col_type: \\\"movie_1_vertical_pic_blur\\\"\\n    })\\n    setResult(d);\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"内容\",\"path\":\"content\",\"rule\":\"js:\\nvar d = [];\\nlet {\\n    convert\\n} = $.require(\\\"hiker://page/converter\\\");\\nvar res = getResCode();\\nvar rule = MY_PARAMS.content\\nlet r = convert(rule.content);\\nlet r1 = r.split(\\\"&&\\\");\\nlet r2 = r1.slice(0, r1.length - 1).join(\\\"&&\\\");\\nlet arr = pdfa(res, \\\"body&&\\\" + r2);\\n//log(arr);\\nfor (let it of arr) {\\n    it = it.replace(new RegExp(\\\"\\\\n\\\", \\\"g\\\"), \\\"--br--\\\");\\n    //log(it);\\n    var t = pdfh(it, \\\"Text\\\");\\n    t = t.replace(new RegExp(\\\"--br--\\\", \\\"g\\\"), \\\"<br>\\\");\\n    if (t == \\\"\\\") {\\n        continue\\n    }\\n    let t2 = t.split(\\\"<br>\\\");\\n    for (let it2 of t2) {\\n        if (it2 == \\\"\\\" || it2.length == 1) {\\n            continue\\n        }\\n        if (!it2.startsWith(\\\"　\\\") && !it2.startsWith(\\\"&nbsp;&nbsp;\\\")) {\\n            it2 = \\\"&nbsp;&nbsp;&nbsp;&nbsp;\\\" + it2.trim();\\n        }\\n        if (rule.replaceRegex) {\\n            it2 = it2.replace(new RegExp(rule.replaceRegex.replace(\\\"##\\\", \\\"\\\"), \\\"g\\\"), \\\"\\\")\\n        }\\n        if (it2 == \\\"\\\" || it2 == \\\"&nbsp;&nbsp;&nbsp;&nbsp;\\\") {\\n            continue\\n        }\\n        d.push({\\n            title: it2,\\n            url: \\\"\\\",\\n            col_type: \\\"rich_text\\\",\\n            desc: \\\"\\\",\\n            pic_url: \\\"\\\"\\n        });\\n    }\\n}\\nd.unshift({\\n    title: \\\"<big>\\\" + MY_PARAMS.title + \\\"</big>\\\",\\n    col_type: \\\"rich_text\\\"\\n})\\nsetResult(d);\"},{\"col_type\":\"movie_1_vertical_pic\",\"name\":\"搜索\",\"path\":\"search\",\"rule\":\"js:\\nlet {\\n    search\\n} = $.require(\\\"hiker://page/ss\\\");\\nlet d = [];\\nlet kw = getParam(\\\"kw\\\");\\nlet s = kw;\\nsetPageTitle(\\\"搜索\\\" + kw + \\\" \\\" + MY_PARAMS.bookSourceName);\\nif (typeof(getSearchMode) == \\\"undefined\\\") {\\n    confirm({\\n        title: \\\"温馨提示\\\",\\n        content: \\\"你的软件版本太低，更新到最新版才能使用本规则\\\"\\n    })\\n}\\nlet matchMust = getSearchMode() == 1;\\nlet tip = \\\"精确匹配：\\\" + (matchMust ? \\\"是\\\" : \\\"否\\\");\\nif (MY_PAGE == 1) {\\n    d.push({\\n        title: tip,\\n        url: $(\\\"#noLoading#\\\").lazyRule(() => {\\n            setSearchMode(getSearchMode() == 0 ? 1 : 0);\\n            refreshPage();\\n            return \\\"toast://OK\\\";\\n        }),\\n        col_type: \\\"text_1\\\",\\n    });\\n}\\nlet d2 = search(MY_PARAMS.rules, kw, MY_PAGE);\\nfor (let it of d2) {\\n    if (!matchMust || searchContains(it.title, s)) {\\n        it.title = it.title.includes(\\\"““””\\\") ? it.title : \\\"““””\\\" + it.title.replace(new RegExp(\\\"<em>|</em>\\\", \\\"g\\\"), \\\"\\\").replace(new RegExp(s, \\\"g\\\"), \\\"<strong><span style=\\\\\\\"color: #1E90FF\\\\\\\">\\\" + s + \\\"</span></strong>\\\")\\n        d.push(it);\\n    }\\n}\\n\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"转换\",\"path\":\"converter\",\"rule\":\"var convert = (str) => {\\n    return str.replace(/@/g, \\\"&&\\\")\\n        .replace(/\\\\.[0-9]/g, function(a) {\\n            return a.replace(\\\".\\\", \\\",\\\")\\n        })\\n        .replace(new RegExp(\\\" \\\", \\\"g\\\"), \\\"&&\\\")\\n        .replace(/text\\\\.(.*?)&&/g, \\\"*:contains($1),-1&&\\\")\\n        .replace(/-class\\\\./g, \\\".\\\")\\n        .replace(/class\\\\./g, \\\".\\\")\\n        .replace(/tag\\\\./g, \\\"\\\")\\n        .replace(/id\\\\./g, \\\"#\\\")\\n        .replace(/##/g, \\\"!\\\")\\n        .replace(/&&([a-zA-Z\\\\.\\\\-]+?)!([0-9])/g, \\\"--$1,$2&&$1\\\")\\n        .replace(\\\"text\\\", \\\"Text\\\");\\n};\\nlet getArray = (html, rule) => {\\n    let r1 = rule.split(\\\"!\\\")[0].split(\\\"||\\\");\\n    let c = convert(r1[0]);\\n    if (c.includes(\\\"&&li&&a\\\") && c[c.length - 1] == \\\"a\\\") {\\n        c = c.replace(\\\"&&li&&a\\\", \\\"&&li\\\");\\n    }\\n    log(c);\\n    let arr = pdfa(html, \\\"body&&\\\" + c);\\n    if (r1.length > 1) {\\n        let r2 = r1[1].split(\\\":\\\");\\n        let r3 = [];\\n        for (let it of r2) {\\n            try {\\n                let i = parseInt(it);\\n                if (isNaN(i)) {\\n                    continue;\\n                }\\n                r3.push(i);\\n            } catch (e) {}\\n        }\\n        let arr2 = [];\\n        for (let i = 0; i < arr.length; i++) {\\n            if (r3.indexOf(i) < 0) {\\n                arr2.push(arr[i]);\\n            }\\n        }\\n        return arr2;\\n    }\\n    log(\\\"获取失败，失败定位：\\\" + r1)\\n    return arr;\\n};\\nlet getText = (html, rule) => {\\n    var ru = convert(rule)\\n    var r = pdfh(html, ru)\\n    if (r == \\\"\\\") {\\n        log(\\\"返回为空，可能是定位失败：\\\" + rule)\\n    }\\n    return r\\n};\\nlet getUrl0 = (html, parentRule, rule) => {\\n    if (parentRule != null) {\\n        parentRule = parentRule.split(\\\"!\\\")[0];\\n    }\\n    let p = parentRule != null && parentRule[parentRule.length - 1] == \\\"a\\\" ? \\\"a&&\\\" : \\\"\\\";\\n    let r = pd(html, p + convert(rule.split(\\\"##\\\")[0]));\\n    if (r == \\\"\\\") {\\n        log(\\\"返回为空，可能是定位失败：\\\" + rule)\\n    }\\n    return r\\n};\\nlet parseUrl = (url, page) => {\\n    url = url.replace(new RegExp(\\\"{{page}}\\\", \\\"g\\\"), page);\\n    let s = url.split(\\\"<,\\\");\\n    if (s.length > 1) {\\n        if (page > 1) {\\n            let s2 = s[1].split(\\\">\\\");\\n            url = s[0] + s2[0] + (s2.length > 1 ? s2[1] : \\\"\\\")\\n        } else {\\n            url = s[0];\\n        }\\n    }\\n    return url;\\n}\\nlet getCharset = (searchUrl) => {\\n    if (searchUrl) {\\n        if (searchUrl.includes('\\\"gbk\\\"') || searchUrl.includes(\\\"'gbk'\\\")) {\\n            return \\\"gbk\\\"\\n        } else if (searchUrl.includes('\\\"gb2312\\\"') || searchUrl.includes(\\\"'gb2312'\\\")) {\\n            return \\\"gb2312\\\"\\n        }\\n    }\\n    return null\\n}\\n$.exports = {\\n    getArray: getArray,\\n    convert: convert,\\n    getText: getText,\\n    getUrl0: getUrl0,\\n    parseUrl: parseUrl,\\n    getCharset: getCharset\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"聚搜\",\"path\":\"ju\",\"rule\":\"js:\\nvar d = [];\\nlet {\\n    search,\\n    listRules\\n} = $.require(\\\"hiker://page/ss\\\");\\nlet {\\n    all,\\n    use,\\n    data\\n} = listRules(MY_PAGE);\\ndata = data || [];\\nlet s = getParam(\\\"kw\\\");\\nsetPageTitle(\\\"搜索\\\" + s);\\nif (typeof(getSearchMode) == \\\"undefined\\\") {\\n    confirm({\\n        title: \\\"温馨提示\\\",\\n        content: \\\"你的软件版本太低，更新到最新版才能使用本规则\\\"\\n    })\\n}\\nlet matchMust = getSearchMode() == 1;\\nlet tip = \\\"搜索源：\\\" + use + \\\"/\\\" + all + \\\"  精确匹配：\\\" + (matchMust ? \\\"是\\\" : \\\"否\\\");\\nif (MY_PAGE == 1) {\\n    d.push({\\n        title: tip,\\n        url: $(\\\"#noLoading#\\\").lazyRule(() => {\\n            setSearchMode(getSearchMode() == 0 ? 1 : 0);\\n            refreshPage();\\n            return \\\"toast://OK\\\";\\n        }),\\n        col_type: \\\"text_1\\\",\\n        extra: {\\n            id: \\\"yuedu-s-h\\\"\\n        }\\n    });\\n} else if (data.length > 0) {\\n    updateItem(\\\"yuedu-s-h\\\", {\\n        title: tip\\n    });\\n}\\nlet p = MY_PAGE;\\nlet pageid = \\\"yuedu-page\\\" + MY_PAGE;\\nif (data.length > 0) {\\n    d.push({\\n        title: \\\"加载第\\\" + MY_PAGE + \\\"页中，进度：1/\\\" + data.length,\\n        url: \\\"hiker://empty\\\",\\n        col_type: \\\"text_center_1\\\",\\n        desc: \\\"\\\",\\n        pic_url: \\\"\\\",\\n        extra: {\\n            id: pageid\\n        }\\n    });\\n}\\nsetResult(d);\\nif (data.length > 0) {\\n    //多线程加载\\n    let tasks = data.map(it => {\\n        return {\\n            func: function(rule) {\\n                return search(rule, s, 1);\\n            },\\n            param: it,\\n            id: \\\"rule@\\\" + it.name\\n        }\\n    });\\n\\n    batchExecute(tasks, {\\n        func: function(param, id, error, result) {\\n            //log(\\\"listener: \\\" + (result || []).length)\\n            param.i = param.i + 1;\\n            if (result) {\\n                try {\\n                    for (let it of result) {\\n                        param.j = param.j + 1;\\n                        if (matchMust) {\\n                            if (!searchContains(it.title, s)) {\\n                                continue;\\n                            }\\n                        }\\n                        let extra = it.extra || {};\\n                        extra.id = \\\"__app\\\" + MY_PAGE + \\\"@\\\" + param.j;\\n                        extra.bookName = it.title\\n                        extra.cover = it.pic_url || it.img\\n                        addItemBefore(pageid, {\\n                            title: it.title.includes(\\\"““””\\\") ? it.title : \\\"““””\\\" + it.title.replace(new RegExp(\\\"<em>|</em>\\\", \\\"g\\\"), \\\"\\\").replace(new RegExp(s, \\\"g\\\"), \\\"<strong><span style=\\\\\\\"color: #1E90FF\\\\\\\">\\\" + s + \\\"</span></strong>\\\"),\\n                            desc: it.desc,\\n                            url: it.url,\\n                            pic_url: it.pic_url || it.img,\\n                            col_type: it.pic_url || it.img ? 'movie_1_vertical_pic' : \\\"text_1\\\",\\n                            extra: extra\\n                        })\\n                    }\\n                } catch (e) {}\\n\\n            }\\n            if (param.i >= param.all) {\\n                deleteItem(pageid)\\n            } else {\\n                updateItem({\\n                    title: \\\"加载第\\\" + MY_PAGE + \\\"页中，进度：\\\" + (param.i + 1) + \\\"/\\\" + param.all,\\n                    url: \\\"hiker://empty\\\",\\n                    col_type: \\\"text_center_1\\\",\\n                    desc: \\\"\\\",\\n                    pic_url: \\\"\\\",\\n                    extra: {\\n                        id: pageid\\n                    }\\n                })\\n            }\\n        },\\n        param: {\\n            all: data.length,\\n            i: 0,\\n            j: -1\\n        }\\n    });\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"搜索辅助\",\"path\":\"ss\",\"rule\":\"var {\\n    convert,\\n    parseUrl,\\n    getCharset\\n} = $.require(\\\"hiker://page/converter\\\");\\nlet search = (rule, kw, page) => {\\n    let d = [];\\n    let m = rule.ruleSearch\\n    // 阅读=>视界\\n    let u = rule.searchUrl.startsWith(\\\"http\\\") ? rule.searchUrl : rule.bookSourceUrl + rule.searchUrl;\\n    //log(m);\\n    let url1 = parseUrl(u, page).replace(new RegExp(\\\"{{key}}\\\", \\\"g\\\"), kw);\\n    let url2 = url1.split(\\\",{\\\");\\n    let url = url2[0];\\n    let headers = {};\\n    let method = \\\"get\\\";\\n    let body = null;\\n    let c = getCharset(url1);\\n    if (c) {\\n        headers.charset = c;\\n        headers[\\\"Content-Type\\\"] = \\\"text/html; charset=\\\" + c;\\n    }\\n    try {\\n        if (url2.length > 1 && url1.substring(url1.length - 1, url1.length) == \\\"}\\\") {\\n            let ext = \\\"{\\\" + url1.substring(url1.indexOf(\\\",{\\\") + 2, url1.length);\\n            //log(ext);\\n            try {\\n                ext = JSON.parse(ext);\\n            } catch (e) {\\n                eval(\\\"ext=\\\" + ext);\\n            }\\n            if (ext.method && ext.method != \\\"\\\") {\\n                method = ext.method;\\n            }\\n            if (ext.body && ext.body != \\\"\\\") {\\n                body = ext.body;\\n                headers[\\\"Content-Type\\\"] = \\\"application/x-www-form-urlencoded\\\" + (headers.charset ? \\\";charset=\\\" + headers.charset : \\\"\\\");\\n            }\\n        }\\n    } catch (e) {\\n        if (url1.includes('\\\"POST\\\"') || url1.includes('\\\"post\\\"')) {\\n            method = \\\"post\\\";\\n        }\\n    }\\n    if (method == \\\"post\\\" || method == \\\"POST\\\") {\\n        let ct = headers[\\\"Content-Type\\\"];\\n        headers[\\\"Content-Type\\\"] = ct ? ct.replace(\\\"text/html\\\", \\\"application/x-www-form-urlencoded\\\") : \\\"application/x-www-form-urlencoded\\\";\\n    }\\n\\n    let listrule = \\\"body&&\\\" + convert(m.bookList).split(\\\"||\\\")[0]\\n    let author = null;\\n    try {\\n        author = convert(m.author);\\n    } catch (e) {}\\n    let cover = null;\\n    try {\\n        cover = convert(m.coverUrl);\\n    } catch (e) {}\\n    let name = null;\\n    try {\\n        name = convert(m.name);\\n    } catch (e) {}\\n    let bookurl = null;\\n    try {\\n        bookurl = convert(m.bookUrl);\\n    } catch (e) {}\\n    let intro = null;\\n    try {\\n        intro = convert(m.intro);\\n    } catch (e) {}\\n    //setPageTitle(\\\"搜索\\\" + getParam(\\\"kw\\\") + \\\" \\\" + MY_PARAMS.bookSourceName);\\n    //MY_URL = url;\\n    let res = request(url, {\\n        method: method,\\n        headers: headers,\\n        body: body\\n    });\\n    let pdfh1 = (a, b) => {\\n        try {\\n            if (b == null) return \\\"\\\";\\n            return pdfh(a, b);\\n        } catch (e) {\\n            return \\\"\\\";\\n        }\\n    }\\n    let pd1 = (a, b, c) => {\\n        try {\\n            if (b == null) return \\\"\\\";\\n            return pd(a, b, c);\\n        } catch (e) {\\n            return \\\"\\\";\\n        }\\n    }\\n    listrule = listrule.replace(\\\"&&tbody--tr,0&&tr\\\", \\\"&&table tbody tr:gt(0)\\\");\\n    //log(listrule);\\n    let list = pdfa(res, listrule);\\n    //log(list);\\n    //log(name);\\n    list.forEach(item => {\\n        let next = rule.ruleToc.nextTocUrl;\\n        let nexttoc = next && next != \\\"\\\";\\n        let ac = nexttoc ? \\\"\\\": \\\"#autoCache#\\\";\\n        //let ac = \\\"#autoCache#\\\";\\n        let u1 = pd1(item, bookurl, url) + ac + \\\"#immersiveTheme#\\\";\\n        if (c) {\\n            u1 = u1 + \\\";get;\\\" + c\\n        }\\n        d.push({\\n            title: pdfh1(item, name),\\n            img: pd1(item, cover, url),\\n            url: \\\"hiker://page/menu\\\",\\n            desc: rule.bookSourceName + \\\"\\\\n\\\" + pdfh1(item, author) + \\\"\\\\n\\\" + pdfh1(item, intro),\\n            extra: {\\n                \\\"Toc\\\": rule.ruleToc,\\n                \\\"content\\\": rule.ruleContent,\\n                \\\"bookName\\\": parseDomForHtml(item, name),\\n                \\\"cover\\\": parseDom(item, cover, url),\\n                url: nexttoc ? \\\"hiker://empty#\\\" + u1 : u1,\\n                u1: nexttoc ? u1 : null,\\n                inheritTitle: false,\\n                charset: c\\n            }\\n        })\\n    });\\n    return d;\\n}\\n$.exports = {\\n    convert: convert,\\n    search: search,\\n    listRules: (page, rule) => {\\n        try {\\n            //并发数量\\n            let size = 16;\\n            let {\\n                load,\\n                loadRules,\\n                getSelect\\n            } = $.require(\\\"hiker://page/datat\\\");\\n            let data = load();\\n            let select = getSelect(data);\\n            let rules = data.length > 0 ? loadRules(select.name) : [];\\n            if (!page && !rule) {\\n                return rules.map(it => it.name);\\n            }\\n            if (rule != null) {\\n                return rules.filter(i => i.name == rule);\\n            }\\n            let start = (page - 1) * size;\\n            if (rules.length < start + 1) {\\n                return [];\\n            }\\n            let len = size;\\n            if (rules.length < page * size) {\\n                len = rules.length - start\\n            }\\n            let all = rules.length;\\n            let use = (page - 1) * size + len;\\n            return {\\n                all: all,\\n                use: use,\\n                data: rules.slice(start, start + len)\\n            };\\n        } catch (e) {\\n            return {\\n                all: 0,\\n                use: 0,\\n                data: []\\n            }\\n        }\\n    }\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"数据\",\"path\":\"datat\",\"rule\":\"let load = function() {\\n    try {\\n        return JSON.parse(fetch(\\\"hiker://files/yuedu/list.json\\\")).urls;\\n    } catch (e) {\\n        return [];\\n    }\\n}\\nlet loadRules = function(name) {\\n    try {\\n        let list = JSON.parse(fetch(\\\"hiker://files/yuedu/\\\" + md5(name) + \\\".json\\\"));\\n        return list.filter(it => {\\n            let s = JSON.stringify(it)\\n            if (s.includes(\\\"<js>\\\") || s.includes(\\\"@js:\\\") || s.includes(\\\"$.\\\")) {\\n                return false\\n            } else {\\n                return true\\n            }\\n        });\\n    } catch (e) {\\n        return [];\\n    }\\n}\\nlet remove = function(url) {\\n    let data = load();\\n    data = data.filter(it => it.url != url);\\n    writeFile(\\\"hiker://files/yuedu/list.json\\\", JSON.stringify({\\n        urls: data\\n    }))\\n}\\nlet rename = function(url, name) {\\n    let arr = load();\\n    for (let i in arr) {\\n        if (arr[i].url == url) {\\n            arr[i].name = name;\\n        }\\n    }\\n    writeFile(\\\"hiker://files/yuedu/list.json\\\", JSON.stringify({\\n        urls: arr\\n    }))\\n}\\nlet add = function(name, url) {\\n    let data = load();\\n    data = data.filter(it => it.url != url);\\n    data.push({\\n        name: name,\\n        url: url\\n    });\\n    writeFile(\\\"hiker://files/yuedu/list.json\\\", JSON.stringify({\\n        urls: data\\n    }))\\n}\\nlet update = function(name, url) {\\n    let t = fetch(url)\\n    JSON.parse(t)\\n    writeFile(\\\"hiker://files/yuedu/\\\" + md5(name) + \\\".json\\\", t)\\n}\\nlet share = function(name, url) {\\n    return \\\"copy://悦读订阅数据分享，复制整条口令打开软件即可导入\\\\n\\\" + name + \\\"：\\\" + url + \\\"@import=js:$.require('hiker://page/datat?rule=\\\" + MY_RULE.title + \\\"').ca()\\\"\\n}\\nlet cloudAdd = function() {\\n    let s = input.split(\\\"：\\\");\\n    if (s.length > 1) {\\n        add(s[0], s[1]);\\n        update(s[0], s[1]);\\n    }\\n    return \\\"toast://已导入悦读订阅源“\\\" + s[0] + \\\"”\\\"\\n}\\nlet getSelect = function(data) {\\n    if (data == null) {\\n        data = load();\\n    }\\n    if (data.length == 0) {\\n        return {};\\n    }\\n    let tab = getItem(\\\"tab\\\", data[0].url);\\n    let select = data.filter(it => it.url == tab);\\n    if (select.length <= 0) {\\n        return data[0];\\n    } else {\\n        return select[0];\\n    }\\n}\\n$.exports = {\\n    add: add,\\n    update: update,\\n    remove: remove,\\n    rename: rename,\\n    load: load,\\n    loadRules: loadRules,\\n    getSelect: getSelect,\\n    share: share,\\n    ca: cloudAdd\\n}\"}]","proxy":"","icon":"https://s3.bmp.ovh/imgs/2022/10/02/9248af2624d64904.png"},{"last_chapter_rule":"","pageList":[{"col_type":"movie_3","name":"加载数据","path":"config","rule":"function getConfig() {\n    try {\n        let config = fetch(\"hiker://files/rules/live/config.json\");\n        if (!config || config == \"\") {\n            return {\n                data: [],\n                version: 0\n            }\n        } else {\n            return JSON.parse(config)\n        }\n    } catch (e) {\n        try {\n            toast(\"配置文件格式有误\")\n        } catch (e) {}\n        return {\n            data: [],\n            version: 0\n        }\n    }\n}"},{"col_type":"movie_3","name":"批量导入","path":"batchIm","rule":"function batchImport(input, rule) {\n    input = input.trim();\n    if (input.length < 3 || input[0] != \"{\") {\n        return \"toast://请输入正确的格式\"\n    }\n    let im = JSON.parse(input);\n    if (im.data == null || im.data.length < 1) {\n        return \"toast://请输入正确的格式\"\n    }\n    eval(JSON.parse(request(\"hiker://page/config?rule=\" + rule)).rule);\n    let config = getConfig();\n    let count = 0;\n    let all = config.data.map(it => it.url + \"&&&\").join();\n    for (let i of im.data) {\n        if (all.indexOf(i.url + \"&&&\") >= 0) {\n            //重复的不要\n            continue;\n        }\n        count++;\n        config.data.push(i)\n    }\n    writeFile(\"hiker://files/rules/live/config.json\", JSON.stringify(config));\n    refreshPage();\n    return \"toast://已导入\" + count + \"条订阅源\";\n}"},{"col_type":"movie_3","name":"直播数据","path":"renderData","rule":"function renderLiveData(url,ua) {\n    let m3u = \"\";\n    if (url.startsWith('hiker://') || url.startsWith('file://')) {\n        m3u = fetch(url);\n    } else {\n        let interval = Number(getItem('interval', '24')),\n            oldData = fetch('hiker://files/libs/' + md5(url) + '.js'),\n            remoteData = '';\n        try {\n            remoteData = fetchCache(url, interval, {\n                headers:{\n                    'User-Agent' : ua || MOBILE_UA\n                },\n                timeout: 50000\n            });\n        } catch (e) {}\n        if (!remoteData.includes('http') || remoteData.includes('<body>')) { \n            log('更新失败');\n            if (oldData) writeFile('hiker://files/libs/' + md5(url) + '.js', oldData);\n            m3u = oldData;\n        } else {\n            m3u = remoteData;\n        }\n    }\n\n    let mode =  m3u.indexOf('#EXTM3U') == 0 , re;\n    if(mode){\n        re = /(.*),(.*)\\s*?((?:http|rtmp)[^#\\s]*)/g;\n    }else{\n        re = /()(?:\\B\\$c_start|\\B#{1,2})?(.*?),?(##|头#|\\$c_end|,?#genre#|(?:http|rtmp)[^\\s]*)/g;\n    }\n        \n    let items = {},\n        group = '未分组';\n    for (let i = re.exec(m3u); i != null; i = re.exec(m3u)) {\n        if (mode) {\n            group = (i[1].match(/group-title=\"(.*?)\"/) || [null, group])[1];\n        } else if (['#genre#','##','头#','$c_end'].includes(i[3])) {\n            group = i[2];\n            continue;\n        }\n        let title = i[2],\n            url = i[3].includes('#') ? i[3].split('#') : [i[3]],\n            headers = [];\n        if(!url[url.length-1]) url.pop();\n        url.forEach((v,index,array)=>{\n            if(/;\\{(.*)\\}/.test(v)){\n                let obj = {},\n                     con = v.match(/;\\{(.*)\\}/)[1],\n                     arr = con.split('&&');\n                arr.forEach((i)=>{\n                    let [key,value] = i.split('@');\n                    obj[key] = value.replace(/;/g,'；；');\n                })\n                array[index] = v.match(/^([^;]*);\\{/)[1]\n                headers.push(obj);\n            }else{\n                headers.push({'User-Agent' : MOBILE_UA.replace(/;/g,'；；')});\n            }\n            array[index] = array[index].replace(/;/g,'；；')+'#isVideo=true#';\n        });\n        if (items[group]) {\n            if (items[group][title]) {\n                items[group][title].url = items[group][title].url.concat(url);\n                items[group][title].headers = items[group][title].headers.concat(headers);\n            } else {\n                items[group][title] = {url:url,headers:headers};\n            }\n        } else {\n            items[group] = {};\n            items[group][title] = {url:url,headers:headers};\n        };\n    }\n    return items;\n}\n\n$.exports = {\n    renderLiveData: renderLiveData\n}\n"},{"col_type":"movie_3","name":"设置页","path":"renderSetting","rule":"function renderSetting() {\n    function getColoredText(text) {\n        return '““””<span style=\"color: #19B89D\">' + text + '</span>';\n    }\n    const d = [];\n    let interval = getItem('interval', '24');\n    d.push({\n        title: interval == -1 ? '已禁止自动更新'.fontcolor(\"#19B89D\").bold() : ('更新间隔:' + interval + '小时').fontcolor(\"#19B89D\").bold(),\n        url: $(interval, '输入n为正整数时，每隔n小时自动更新\\n为0时，每次打开都会更新\\n为-1时，禁止自动更新').input(() => {\n            if (parseInt(input) >= -1) {\n                setItem('interval', input);\n            }\n            refreshPage();\n            return 'hiker://empty'\n        }),\n        pic_url: 'https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fis4.mzstatic.com%2Fimage%2Fthumb%2FPurple3%2Fv4%2Fdf%2Ff6%2Fda%2Fdff6da83-47d7-9cb6-2398-1919c13837b4%2Fmzl.kgmnwodo.png%2F0x0ss-85.jpg&refer=http%3A%2F%2Fis4.mzstatic.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1638629349&t=2f6d967185fe2b9c54e8b230eb83e66c',\n        col_type: \"avatar\"\n    });\n\n    d.push({\n        col_type: \"big_blank_block\"\n    });\n\n    d.push({\n        title: getColoredText(\"新建订阅\"),\n        col_type: \"scroll_button\",\n        desc: \"请输入直播源订阅地址\",\n        url: $('', '请输入订阅地址\\n可以在地址后加ua\\n(使用$$$分割)').input((rule) => {\n            if (input == \"\") {\n                return \"toast://不能为空\"\n            } else if (input.indexOf(\"http\") != 0 && input.indexOf(\"file\") != 0 && input.indexOf(\"hiker\") != 0) {\n                return \"toast://链接格式有误\"\n            } else {\n                let [url,ua] = input.split('$$$');\n                return $('', \"请输入订阅标题\").input((url, rule,ua) => {\n                    eval(JSON.parse(request(\"hiker://page/config?rule=\" + rule)).rule);\n                    let config = getConfig();\n                    config.data.push({\n                        name: input,\n                        url: url,\n                        ua: ua || ''\n                    });\n                    writeFile(\"hiker://files/rules/live/config.json\", JSON.stringify(config));\n                    refreshPage();\n                    return \"toast://已保存\";\n                }, url, rule,ua)\n            }\n        }, getMyVar('title'))\n    });\n\n    d.push({\n        title: getColoredText(\"导入订阅\"),\n        col_type: \"scroll_button\",\n        url: $('', '支持原始数据和云剪贴板分享链接').input((rule) => {\n            eval(JSON.parse(request(\"hiker://page/batchIm?rule=\" + rule)).rule);\n            if (input.startsWith('聚直播分享##')) {\n                input = parsePaste(input.split('##\\n')[1]);\n            }\n            return batchImport(input, rule);\n        }, getMyVar('title'))\n    });\n    d.push({\n        title: getColoredText(\"导入本地源\"),\n        col_type: \"scroll_button\",\n        desc: \"请输入直播源名称\",\n        url: $('', '请输入直播源名称').input((rule) => {\n            if (input == \"\") {\n                return \"toast://不能为空\"\n            } else {\n                return \"fileSelect://\" + $.toString((name) => {\n                    let s = input.split(\"/\")\n                    var url = \"hiker://files/cache/live/\" + name + \".m3u\"\n                    var c = fetch(\"hiker://files/cache/\" + s[s.length - 1])\n                    if (!c.includes('http')) {\n                        return 'toast://非法文件'\n                    }\n                    writeFile(url, c)\n                    eval(JSON.parse(request(\"hiker://page/config?rule=聚直播\")).rule);\n                    let config = getConfig();\n                    config.data.push({\n                        name: name,\n                        url: url\n                    });\n                    writeFile(\"hiker://files/rules/live/config.json\", JSON.stringify(config));\n                    refreshPage();\n                    return 'toast://已保存'\n                }, input)\n            }\n        })\n    });\n    d.push({\n        title: getColoredText(\"分享订阅\"),\n        col_type: \"scroll_button\",\n        url: $([\"原始数据\", \"云剪贴板\", \"云口令\"], 3).select(() => {\n            return $('确定导出？\\n(禁用订阅不会导出)').confirm((type) => {\n                eval(JSON.parse(request(\"hiker://page/config\")).rule);\n                config = getConfig();\n                config.data = config.data.filter(v => !v.inVisible);\n                if (type == \"云剪贴板\") {\n                    var data = '聚直播分享##\\n' + sharePaste(JSON.stringify(config));\n                } else if (type == \"云口令\") {\n                    var data = '聚直播分享,复制后打开软件即可导入\\n' + sharePaste(JSON.stringify(config)) + '@import=js:eval(JSON.parse(fetch(\"hiker://page/cloud?rule=聚直播\")).rule)';\n                } else {\n                    var data = JSON.stringify(config);\n                }\n                return \"copy://\" + data;\n            }, input)\n        })\n    });\n    d.push({\n        title: getColoredText(\"编辑全部\"),\n        col_type: \"scroll_button\",\n        url: \"editFile://hiker://files/rules/live/config.json\"\n    });\n\n    d.push({\n        col_type: \"blank_block\"\n    });\n\n    eval(JSON.parse(request(\"hiker://page/config\")).rule);\n    config = getConfig();\n    let editMode = getMyVar('editMode', '启用禁用');\n    ['启用禁用', '删除订阅', '重新排序', '编辑订阅', '清除缓存'].forEach((v) => {\n        d.push({\n            title: v == editMode ? '““””' + v.bold().fontcolor('#19B89D') : v,\n            url: v == editMode ? 'hiker://empty' : $('#noLoading#').lazyRule((v) => {\n                putMyVar('editMode', v)\n                refreshPage(false)\n                return 'hiker://empty'\n            }, v),\n            col_type: 'scroll_button'\n        })\n    });\n    config.data.forEach((v, i) => {\n        let el = {\n            title: v.name,\n            col_type: \"text_3\"\n        }\n        switch (editMode) {\n            case '启用禁用':\n                el.title = (v.inVisible ? '🔴 ' : '🟢 ') + el.title\n                el.url = $('#noLoading#').lazyRule((i) => {\n                    eval(JSON.parse(request(\"hiker://page/config\")).rule);\n                    config = getConfig();\n                    config.data[i].inVisible = !config.data[i].inVisible;\n                    writeFile(\"hiker://files/rules/live/config.json\", JSON.stringify(config));\n                    refreshPage(false);\n                    return 'hiker://empty'\n                }, i)\n                break\n            case '删除订阅':\n                el.url = \"confirm://确认删除“\" + v.name + \"”订阅？.js:\" + $.toString((i) => {\n                    eval(JSON.parse(request(\"hiker://page/config\")).rule);\n                    config = getConfig();\n                    config.data.splice(i, 1);\n                    writeFile(\"hiker://files/rules/live/config.json\", JSON.stringify(config));\n                    refreshPage(false);\n                    return \"toast://已删除\";\n                }, i)\n                break\n            case '重新排序':\n                let sortFlag = parseInt(getMyVar('sortFlag', '-1'))\n                el.title = (sortFlag == i ? '🔃  ' : '') + el.title\n                if (sortFlag == -1)\n                    el.url = $('#noLoading#').lazyRule((i) => {\n                        putMyVar('sortFlag', i.toString())\n                        refreshPage(false)\n                        return 'toast://选择要移动到的位置'\n                    }, i)\n                else\n                    el.url = $('#noLoading#').lazyRule((oldIndex, newIndex) => {\n                        eval(JSON.parse(request(\"hiker://page/config\")).rule);\n                        config = getConfig();\n                        config.data.splice(newIndex, 0, config.data.splice(oldIndex, 1)[0])\n                        writeFile(\"hiker://files/rules/live/config.json\", JSON.stringify(config));\n                        putMyVar('sortFlag', '-1')\n                        refreshPage(false)\n                        return 'hiker://empty'\n                    }, sortFlag, i)\n                break\n            case '编辑订阅':\n                let arr = ['编辑名称', '编辑地址', '编辑内容'];\n                el.url = $(arr, 3).select((v, i) => {\n                    if (input == '编辑名称') {\n                        return $(v.name, '输入新名称').input((i) => {\n                            eval(JSON.parse(request(\"hiker://page/config\")).rule);\n                            config = getConfig();\n                            if (input) {\n                                config.data[i].name = input\n                                writeFile(\"hiker://files/rules/live/config.json\", JSON.stringify(config));\n                                refreshPage(false)\n                                return 'toast://修改成功'\n                            } else {\n                                return 'toast://不能为空'\n                            }\n                        }, i);\n                    } else if (input == '编辑地址') {\n                        return $(v.ua ? v.url + '$$$' + v.ua : v.url, '输入新地址').input((i) => {\n                            eval(JSON.parse(request(\"hiker://page/config\")).rule);\n                            config = getConfig();\n                            if (input == \"\") {\n                                return \"toast://不能为空\"\n                            } else if (input.indexOf(\"http\") != 0 && input.indexOf(\"file\") != 0 && input.indexOf(\"hiker\") != 0) {\n                                return \"toast://链接格式有误\"\n                            } else {\n                                let [url,ua] = input.split('$$$');\n                                config.data[i].url = url;\n                                config.data[i].ua = ua;\n                                writeFile(\"hiker://files/rules/live/config.json\", JSON.stringify(config));\n                                refreshPage(false)\n                                return 'toast://修改成功'\n                            }\n                        }, i);\n                    } else if (input == '编辑内容') {\n                        if (v.url.startsWith('file://') || v.url.startsWith('hiker://files')) {\n                            return 'editFile://' + v.url;\n                        }\n                        return 'editFile://hiker://files/libs/' + md5(v.url) + '.js'\n                    }\n                }, v, i);\n                break;\n            case '清除缓存':\n                el.url = $('确定清除“' + v.name + '”订阅缓存？\\n(可立即更新)').confirm((url) => {\n                    deleteCache(url);\n                    return 'toast://清除成功'\n                }, v.url)\n                break;\n        }\n        d.push(el)\n    });\n    return d;\n}\n\n$.exports = {\n    renderSetting: renderSetting\n}"},{"col_type":"movie_3","name":"云口令","path":"cloud","rule":"eval(JSON.parse(request(\"hiker://page/batchIm?rule=聚直播\")).rule);\nlet content = parsePaste(input);\nbatchImport(content, \"聚直播\");"}],"title":"聚直播","author":"小棉袄🌞&Joker","version":10,"type":"live","url":"hiker://empty","col_type":"icon_2_round","class_name":"","class_url":"","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:\neval(JSON.parse(request(\"hiker://page/config\")).rule); //getConfig\n\nlet data = [],\n    config = getConfig();\nconfig.data = config.data.filter(v => !v.inVisible);\n\nif (config.data.length <= 0) {\n    data = $.require('hiker://page/renderSetting').renderSetting();\n} else {\n    let select = getItem(\"live-select\", config.data[0].name),\n        has = config.data.map(i => i.name).includes(select);\n    if (!has) {\n        select = config.data[0].name;\n    }\n\n    data.push({\n        title: '聚直播'.bold() + ' &nbsp &nbsp ' + '⚙ 聚直播设置 ⚙'.small(),\n        col_type: \"avatar\",\n        pic_url: MY_RULE.icon,\n        url: $(\"hiker://empty#noLoading#\").rule(() => {\n            addListener('onClose', 'refreshPage()')\n            setResult($.require('hiker://page/renderSetting').renderSetting())\n        })\n    })\n\n    data.push({\n        title: '搜索',\n        desc: '请输入搜索关键词',\n        extra: {\n            defaultValue: getVar('search_key', ''),\n            onChange: 'putVar(\"search_key\",input)'\n        },\n        col_type: 'input',\n        url: $.toString(() => {\n            return 'hiker://search?rule=' + getMyVar('title') + '&s=' + getVar('search_key', '')\n        })\n    })\n\n\n\n    for (source of config.data) {\n        data.push({\n            title: source.name == select ? \"““””<span style='color: #19B89D'>\" + select + \"</span>\" : source.name,\n            col_type: \"scroll_button\",\n            url: $('#noLoading#').lazyRule((a) => {\n                setItem(\"live-select\", a);\n                setItem('selectGroup', '');\n                refreshPage();\n                return \"hiker://empty\"\n            }, source.name)\n        })\n    }\n\n    data.push({\n        col_type: 'blank_block'\n    })\n    \n    if (typeof(setPreResult) != \"undefined\") {\n        data.push({\n            pic_url: \"https://hikerfans.com/weisyr/img/Loading1.gif\",\n            col_type: \"pic_1_center\",\n            extra: {\n                cls: \"loading_gif\"\n            }\n       })\n       setPreResult(data);\n       data = [];\n    }\n\n    for (source of config.data) {\n        if (source.name == select) {\n            try {\n                let items = $.require('hiker://page/renderData').renderLiveData(source.url,source.ua);\n                let groups = Object.keys(items);\n                //groups.push(groups.splice(groups.indexOf(0), 1)[0]);\n                let selectGroup = getItem('selectGroup', groups[0]);\n                if (selectGroup == \"\" || !groups.includes(selectGroup)) selectGroup = groups[0];\n                groups.forEach((group) => {\n                    if (group) {\n                        data.push({\n                            title: group == selectGroup ? \"““””<span style='color: #19B89D'>\" + group + \"</span>\" : group,\n                            url: $('#noLoading#').lazyRule((group) => {\n                                setItem('selectGroup', group);\n                                refreshPage();\n                                return 'hiker://empty'\n                            }, group),\n                            col_type: 'scroll_button',\n                            extra: {\n                                lineVisible: false\n                            }\n                        })\n                    }\n                })\n                \n                for (let title in items[selectGroup]) {\n                    data.push({\n                        title: title,\n                        url: $().lazyRule((sourceurl,selectGroup,title) => {\n                            let items = $.require('hiker://page/renderData').renderLiveData(sourceurl);\n                            let surls = items[selectGroup][title].url;\n                            let sheaders = items[selectGroup][title].headers;\n                            for (let groupi in items){\n                                let group = items[groupi];\n                                if(!group) continue;\n                                for (let ititle in group){\n                                    if(ititle == title && !!group[ititle]){\n                                        let urls = group[ititle].url;\n                                        let headers = group[ititle].headers;\n                                       surls = surls.concat(urls);\n                                       sheaders = sheaders.concat(headers);\n                                    }\n                                }\n                            }\n                            surls = Array.from(new Set(surls));\n                            sheaders = Array.from(new Set(sheaders));\n                            return JSON.stringify({\n                                urls: surls,\n                                headers: sheaders\n                            })\n                        },source.url,selectGroup,title),\n                        //col_type: 'text_3',\n                        img: \"https://hikerfans.com/tubiao/more/228.png\"\n                    })\n                }\n            } catch (e) {\n                data.push({\n                    title: \"数据加载失败\\n\" + JSON.stringify(e),\n                    col_type: \"long_text\"\n                })\n            }\n            break;\n        }\n    }\n    deleteItemByCls(\"loading_gif\");\n}\nsetResult(data);","searchFind":"js:\neval(JSON.parse(request(\"hiker://page/config\")).rule);\nlet config = getConfig();\nlet rules = config.data.map((source) => {\n    return {\n        title: source.name,\n        search_url: 'hiker://empty?key=**',\n        searchFind: 'js:' + $.toString((url, rule_title) => {\n            let d = [],\n                key = getParam('key');\n            let items = $.require('hiker://page/renderData?rule=' + rule_title).renderLiveData(url);\n            for (let group in items) {\n                for (let title in items[group]) {\n                    if (title.indexOf(key) >= 0 || title.toLowerCase().indexOf(key) >= 0) {\n                        d.push({\n                            title: title,\n                            url: JSON.stringify({\n                                urls: items[group][title].url,\n                                headers: items[group][title].headers\n                            })\n                        })\n                    }\n                }\n            }\n            setResult(d);\n        }, source.url, getMyVar('title'))\n    };\n})\nsetResult([{\n    title: \"点我开始聚搜\",\n    url: \"hiker://search?s=\" + getParam(\"key\"),\n    extra: {\n        rules: $.toString((rules) => {\n            return JSON.stringify(rules)\n        }, rules)\n    }\n}])","search_url":"hiker://empty?key=**","group":"①推荐","detail_col_type":"movie_1","detail_find_rule":"","sdetail_col_type":"movie_1","sdetail_find_rule":"","ua":"mobile","preRule":"putMyVar('title',MY_RULE.title);","pages":"[{\"col_type\":\"movie_3\",\"name\":\"加载数据\",\"path\":\"config\",\"rule\":\"function getConfig() {\\n    try {\\n        let config = fetch(\\\"hiker://files/rules/live/config.json\\\");\\n        if (!config || config == \\\"\\\") {\\n            return {\\n                data: [],\\n                version: 0\\n            }\\n        } else {\\n            return JSON.parse(config)\\n        }\\n    } catch (e) {\\n        try {\\n            toast(\\\"配置文件格式有误\\\")\\n        } catch (e) {}\\n        return {\\n            data: [],\\n            version: 0\\n        }\\n    }\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"批量导入\",\"path\":\"batchIm\",\"rule\":\"function batchImport(input, rule) {\\n    input = input.trim();\\n    if (input.length < 3 || input[0] != \\\"{\\\") {\\n        return \\\"toast://请输入正确的格式\\\"\\n    }\\n    let im = JSON.parse(input);\\n    if (im.data == null || im.data.length < 1) {\\n        return \\\"toast://请输入正确的格式\\\"\\n    }\\n    eval(JSON.parse(request(\\\"hiker://page/config?rule=\\\" + rule)).rule);\\n    let config = getConfig();\\n    let count = 0;\\n    let all = config.data.map(it => it.url + \\\"&&&\\\").join();\\n    for (let i of im.data) {\\n        if (all.indexOf(i.url + \\\"&&&\\\") >= 0) {\\n            //重复的不要\\n            continue;\\n        }\\n        count++;\\n        config.data.push(i)\\n    }\\n    writeFile(\\\"hiker://files/rules/live/config.json\\\", JSON.stringify(config));\\n    refreshPage();\\n    return \\\"toast://已导入\\\" + count + \\\"条订阅源\\\";\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"直播数据\",\"path\":\"renderData\",\"rule\":\"function renderLiveData(url,ua) {\\n    let m3u = \\\"\\\";\\n    if (url.startsWith('hiker://') || url.startsWith('file://')) {\\n        m3u = fetch(url);\\n    } else {\\n        let interval = Number(getItem('interval', '24')),\\n            oldData = fetch('hiker://files/libs/' + md5(url) + '.js'),\\n            remoteData = '';\\n        try {\\n            remoteData = fetchCache(url, interval, {\\n                headers:{\\n                    'User-Agent' : ua || MOBILE_UA\\n                },\\n                timeout: 50000\\n            });\\n        } catch (e) {}\\n        if (!remoteData.includes('http') || remoteData.includes('<body>')) { \\n            log('更新失败');\\n            if (oldData) writeFile('hiker://files/libs/' + md5(url) + '.js', oldData);\\n            m3u = oldData;\\n        } else {\\n            m3u = remoteData;\\n        }\\n    }\\n\\n    let mode =  m3u.indexOf('#EXTM3U') == 0 , re;\\n    if(mode){\\n        re = /(.*),(.*)\\\\s*?((?:http|rtmp)[^#\\\\s]*)/g;\\n    }else{\\n        re = /()(?:\\\\B\\\\$c_start|\\\\B#{1,2})?(.*?),?(##|头#|\\\\$c_end|,?#genre#|(?:http|rtmp)[^\\\\s]*)/g;\\n    }\\n        \\n    let items = {},\\n        group = '未分组';\\n    for (let i = re.exec(m3u); i != null; i = re.exec(m3u)) {\\n        if (mode) {\\n            group = (i[1].match(/group-title=\\\"(.*?)\\\"/) || [null, group])[1];\\n        } else if (['#genre#','##','头#','$c_end'].includes(i[3])) {\\n            group = i[2];\\n            continue;\\n        }\\n        let title = i[2],\\n            url = i[3].includes('#') ? i[3].split('#') : [i[3]],\\n            headers = [];\\n        if(!url[url.length-1]) url.pop();\\n        url.forEach((v,index,array)=>{\\n            if(/;\\\\{(.*)\\\\}/.test(v)){\\n                let obj = {},\\n                     con = v.match(/;\\\\{(.*)\\\\}/)[1],\\n                     arr = con.split('&&');\\n                arr.forEach((i)=>{\\n                    let [key,value] = i.split('@');\\n                    obj[key] = value.replace(/;/g,'；；');\\n                })\\n                array[index] = v.match(/^([^;]*);\\\\{/)[1]\\n                headers.push(obj);\\n            }else{\\n                headers.push({'User-Agent' : MOBILE_UA.replace(/;/g,'；；')});\\n            }\\n            array[index] = array[index].replace(/;/g,'；；')+'#isVideo=true#';\\n        });\\n        if (items[group]) {\\n            if (items[group][title]) {\\n                items[group][title].url = items[group][title].url.concat(url);\\n                items[group][title].headers = items[group][title].headers.concat(headers);\\n            } else {\\n                items[group][title] = {url:url,headers:headers};\\n            }\\n        } else {\\n            items[group] = {};\\n            items[group][title] = {url:url,headers:headers};\\n        };\\n    }\\n    return items;\\n}\\n\\n$.exports = {\\n    renderLiveData: renderLiveData\\n}\\n\"},{\"col_type\":\"movie_3\",\"name\":\"设置页\",\"path\":\"renderSetting\",\"rule\":\"function renderSetting() {\\n    function getColoredText(text) {\\n        return '““””<span style=\\\"color: #19B89D\\\">' + text + '</span>';\\n    }\\n    const d = [];\\n    let interval = getItem('interval', '24');\\n    d.push({\\n        title: interval == -1 ? '已禁止自动更新'.fontcolor(\\\"#19B89D\\\").bold() : ('更新间隔:' + interval + '小时').fontcolor(\\\"#19B89D\\\").bold(),\\n        url: $(interval, '输入n为正整数时，每隔n小时自动更新\\\\n为0时，每次打开都会更新\\\\n为-1时，禁止自动更新').input(() => {\\n            if (parseInt(input) >= -1) {\\n                setItem('interval', input);\\n            }\\n            refreshPage();\\n            return 'hiker://empty'\\n        }),\\n        pic_url: 'https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fis4.mzstatic.com%2Fimage%2Fthumb%2FPurple3%2Fv4%2Fdf%2Ff6%2Fda%2Fdff6da83-47d7-9cb6-2398-1919c13837b4%2Fmzl.kgmnwodo.png%2F0x0ss-85.jpg&refer=http%3A%2F%2Fis4.mzstatic.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1638629349&t=2f6d967185fe2b9c54e8b230eb83e66c',\\n        col_type: \\\"avatar\\\"\\n    });\\n\\n    d.push({\\n        col_type: \\\"big_blank_block\\\"\\n    });\\n\\n    d.push({\\n        title: getColoredText(\\\"新建订阅\\\"),\\n        col_type: \\\"scroll_button\\\",\\n        desc: \\\"请输入直播源订阅地址\\\",\\n        url: $('', '请输入订阅地址\\\\n可以在地址后加ua\\\\n(使用$$$分割)').input((rule) => {\\n            if (input == \\\"\\\") {\\n                return \\\"toast://不能为空\\\"\\n            } else if (input.indexOf(\\\"http\\\") != 0 && input.indexOf(\\\"file\\\") != 0 && input.indexOf(\\\"hiker\\\") != 0) {\\n                return \\\"toast://链接格式有误\\\"\\n            } else {\\n                let [url,ua] = input.split('$$$');\\n                return $('', \\\"请输入订阅标题\\\").input((url, rule,ua) => {\\n                    eval(JSON.parse(request(\\\"hiker://page/config?rule=\\\" + rule)).rule);\\n                    let config = getConfig();\\n                    config.data.push({\\n                        name: input,\\n                        url: url,\\n                        ua: ua || ''\\n                    });\\n                    writeFile(\\\"hiker://files/rules/live/config.json\\\", JSON.stringify(config));\\n                    refreshPage();\\n                    return \\\"toast://已保存\\\";\\n                }, url, rule,ua)\\n            }\\n        }, getMyVar('title'))\\n    });\\n\\n    d.push({\\n        title: getColoredText(\\\"导入订阅\\\"),\\n        col_type: \\\"scroll_button\\\",\\n        url: $('', '支持原始数据和云剪贴板分享链接').input((rule) => {\\n            eval(JSON.parse(request(\\\"hiker://page/batchIm?rule=\\\" + rule)).rule);\\n            if (input.startsWith('聚直播分享##')) {\\n                input = parsePaste(input.split('##\\\\n')[1]);\\n            }\\n            return batchImport(input, rule);\\n        }, getMyVar('title'))\\n    });\\n    d.push({\\n        title: getColoredText(\\\"导入本地源\\\"),\\n        col_type: \\\"scroll_button\\\",\\n        desc: \\\"请输入直播源名称\\\",\\n        url: $('', '请输入直播源名称').input((rule) => {\\n            if (input == \\\"\\\") {\\n                return \\\"toast://不能为空\\\"\\n            } else {\\n                return \\\"fileSelect://\\\" + $.toString((name) => {\\n                    let s = input.split(\\\"/\\\")\\n                    var url = \\\"hiker://files/cache/live/\\\" + name + \\\".m3u\\\"\\n                    var c = fetch(\\\"hiker://files/cache/\\\" + s[s.length - 1])\\n                    if (!c.includes('http')) {\\n                        return 'toast://非法文件'\\n                    }\\n                    writeFile(url, c)\\n                    eval(JSON.parse(request(\\\"hiker://page/config?rule=聚直播\\\")).rule);\\n                    let config = getConfig();\\n                    config.data.push({\\n                        name: name,\\n                        url: url\\n                    });\\n                    writeFile(\\\"hiker://files/rules/live/config.json\\\", JSON.stringify(config));\\n                    refreshPage();\\n                    return 'toast://已保存'\\n                }, input)\\n            }\\n        })\\n    });\\n    d.push({\\n        title: getColoredText(\\\"分享订阅\\\"),\\n        col_type: \\\"scroll_button\\\",\\n        url: $([\\\"原始数据\\\", \\\"云剪贴板\\\", \\\"云口令\\\"], 3).select(() => {\\n            return $('确定导出？\\\\n(禁用订阅不会导出)').confirm((type) => {\\n                eval(JSON.parse(request(\\\"hiker://page/config\\\")).rule);\\n                config = getConfig();\\n                config.data = config.data.filter(v => !v.inVisible);\\n                if (type == \\\"云剪贴板\\\") {\\n                    var data = '聚直播分享##\\\\n' + sharePaste(JSON.stringify(config));\\n                } else if (type == \\\"云口令\\\") {\\n                    var data = '聚直播分享,复制后打开软件即可导入\\\\n' + sharePaste(JSON.stringify(config)) + '@import=js:eval(JSON.parse(fetch(\\\"hiker://page/cloud?rule=聚直播\\\")).rule)';\\n                } else {\\n                    var data = JSON.stringify(config);\\n                }\\n                return \\\"copy://\\\" + data;\\n            }, input)\\n        })\\n    });\\n    d.push({\\n        title: getColoredText(\\\"编辑全部\\\"),\\n        col_type: \\\"scroll_button\\\",\\n        url: \\\"editFile://hiker://files/rules/live/config.json\\\"\\n    });\\n\\n    d.push({\\n        col_type: \\\"blank_block\\\"\\n    });\\n\\n    eval(JSON.parse(request(\\\"hiker://page/config\\\")).rule);\\n    config = getConfig();\\n    let editMode = getMyVar('editMode', '启用禁用');\\n    ['启用禁用', '删除订阅', '重新排序', '编辑订阅', '清除缓存'].forEach((v) => {\\n        d.push({\\n            title: v == editMode ? '““””' + v.bold().fontcolor('#19B89D') : v,\\n            url: v == editMode ? 'hiker://empty' : $('#noLoading#').lazyRule((v) => {\\n                putMyVar('editMode', v)\\n                refreshPage(false)\\n                return 'hiker://empty'\\n            }, v),\\n            col_type: 'scroll_button'\\n        })\\n    });\\n    config.data.forEach((v, i) => {\\n        let el = {\\n            title: v.name,\\n            col_type: \\\"text_3\\\"\\n        }\\n        switch (editMode) {\\n            case '启用禁用':\\n                el.title = (v.inVisible ? '🔴 ' : '🟢 ') + el.title\\n                el.url = $('#noLoading#').lazyRule((i) => {\\n                    eval(JSON.parse(request(\\\"hiker://page/config\\\")).rule);\\n                    config = getConfig();\\n                    config.data[i].inVisible = !config.data[i].inVisible;\\n                    writeFile(\\\"hiker://files/rules/live/config.json\\\", JSON.stringify(config));\\n                    refreshPage(false);\\n                    return 'hiker://empty'\\n                }, i)\\n                break\\n            case '删除订阅':\\n                el.url = \\\"confirm://确认删除“\\\" + v.name + \\\"”订阅？.js:\\\" + $.toString((i) => {\\n                    eval(JSON.parse(request(\\\"hiker://page/config\\\")).rule);\\n                    config = getConfig();\\n                    config.data.splice(i, 1);\\n                    writeFile(\\\"hiker://files/rules/live/config.json\\\", JSON.stringify(config));\\n                    refreshPage(false);\\n                    return \\\"toast://已删除\\\";\\n                }, i)\\n                break\\n            case '重新排序':\\n                let sortFlag = parseInt(getMyVar('sortFlag', '-1'))\\n                el.title = (sortFlag == i ? '🔃  ' : '') + el.title\\n                if (sortFlag == -1)\\n                    el.url = $('#noLoading#').lazyRule((i) => {\\n                        putMyVar('sortFlag', i.toString())\\n                        refreshPage(false)\\n                        return 'toast://选择要移动到的位置'\\n                    }, i)\\n                else\\n                    el.url = $('#noLoading#').lazyRule((oldIndex, newIndex) => {\\n                        eval(JSON.parse(request(\\\"hiker://page/config\\\")).rule);\\n                        config = getConfig();\\n                        config.data.splice(newIndex, 0, config.data.splice(oldIndex, 1)[0])\\n                        writeFile(\\\"hiker://files/rules/live/config.json\\\", JSON.stringify(config));\\n                        putMyVar('sortFlag', '-1')\\n                        refreshPage(false)\\n                        return 'hiker://empty'\\n                    }, sortFlag, i)\\n                break\\n            case '编辑订阅':\\n                let arr = ['编辑名称', '编辑地址', '编辑内容'];\\n                el.url = $(arr, 3).select((v, i) => {\\n                    if (input == '编辑名称') {\\n                        return $(v.name, '输入新名称').input((i) => {\\n                            eval(JSON.parse(request(\\\"hiker://page/config\\\")).rule);\\n                            config = getConfig();\\n                            if (input) {\\n                                config.data[i].name = input\\n                                writeFile(\\\"hiker://files/rules/live/config.json\\\", JSON.stringify(config));\\n                                refreshPage(false)\\n                                return 'toast://修改成功'\\n                            } else {\\n                                return 'toast://不能为空'\\n                            }\\n                        }, i);\\n                    } else if (input == '编辑地址') {\\n                        return $(v.ua ? v.url + '$$$' + v.ua : v.url, '输入新地址').input((i) => {\\n                            eval(JSON.parse(request(\\\"hiker://page/config\\\")).rule);\\n                            config = getConfig();\\n                            if (input == \\\"\\\") {\\n                                return \\\"toast://不能为空\\\"\\n                            } else if (input.indexOf(\\\"http\\\") != 0 && input.indexOf(\\\"file\\\") != 0 && input.indexOf(\\\"hiker\\\") != 0) {\\n                                return \\\"toast://链接格式有误\\\"\\n                            } else {\\n                                let [url,ua] = input.split('$$$');\\n                                config.data[i].url = url;\\n                                config.data[i].ua = ua;\\n                                writeFile(\\\"hiker://files/rules/live/config.json\\\", JSON.stringify(config));\\n                                refreshPage(false)\\n                                return 'toast://修改成功'\\n                            }\\n                        }, i);\\n                    } else if (input == '编辑内容') {\\n                        if (v.url.startsWith('file://') || v.url.startsWith('hiker://files')) {\\n                            return 'editFile://' + v.url;\\n                        }\\n                        return 'editFile://hiker://files/libs/' + md5(v.url) + '.js'\\n                    }\\n                }, v, i);\\n                break;\\n            case '清除缓存':\\n                el.url = $('确定清除“' + v.name + '”订阅缓存？\\\\n(可立即更新)').confirm((url) => {\\n                    deleteCache(url);\\n                    return 'toast://清除成功'\\n                }, v.url)\\n                break;\\n        }\\n        d.push(el)\\n    });\\n    return d;\\n}\\n\\n$.exports = {\\n    renderSetting: renderSetting\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"云口令\",\"path\":\"cloud\",\"rule\":\"eval(JSON.parse(request(\\\"hiker://page/batchIm?rule=聚直播\\\")).rule);\\nlet content = parsePaste(input);\\nbatchImport(content, \\\"聚直播\\\");\"}]","proxy":"","icon":"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fis4.mzstatic.com%2Fimage%2Fthumb%2FPurple3%2Fv4%2Fdf%2Ff6%2Fda%2Fdff6da83-47d7-9cb6-2398-1919c13837b4%2Fmzl.kgmnwodo.png%2F0x0ss-85.jpg&refer=http%3A%2F%2Fis4.mzstatic.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1638629349&t=2f6d967185fe2b9c54e8b230eb83e66c"},{"last_chapter_rule":"","pageList":[{"col_type":"movie_3","name":"lazy","path":"lazy","rule":"var lazy = $('').lazyRule(() => {\n    if (input.indexOf('magnet:?xt') == -1) {\n        try {\n            var html = JSON.parse(request(input).match(/r player_.*?=(.*?)</)[1])\n            var url = html.url\n            if (html.encrypt == '1') {\n                url = unescape(url);\n            } else if (html.encrypt == '2') {\n                url = unescape(base64Decode(url));\n            }\n            if (/m3u8|mp4/.test(url)) {\n                return url\n            } else {\n                requireCache('hiker://page/globalParse?rule=道长仓库Pro', 24);\n                return lazyParse(input);\n            }\n        } catch (e) {\n            log('报错改web嗅探');\n            //requireCache('hiker://page/globalParse?rule=道长仓库Pro', 24);\n            //return lazyParse(input);\n            return \"video://\" + input\n        }\n    } else {\n        return input\n    }\n});"}],"title":"书源仓库","author":"","version":0,"type":"read","url":"https://www.yckceo.com/yuedu/fyAll/index.html?page=fypage","col_type":"text_1","class_name":"书源&书源合集&Rss&Rss合集","class_url":"shuyuan&shuyuans&rss&rsss","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:\nvar d = []\nif(MY_PAGE=='1'){\nd.push({\n    title: \"搜索\",\n    url:\"'hiker://search?rule=书源仓库&s='+input\",\n    desc:\"输入关键词搜索\",\n    col_type:\"input\",\n    })\n    }\nvar list = pdfa(getResCode(), 'body&&.layui-col-sm6');\nfor (var j in list) {\n    d.push({\n        title: pdfh(list[j], 'a&&Text'),\n        desc: pdfh(list[j], '.m-right&&Text')+\" \"+pdfh(list[j], '.layui-font-red&&Text')+\" \"+pdfh(list[j], '.layui-font-purple&&Text'),\n        url:pd(list[j], 'a&&href'),\n        extra: {\n            pageTitle: \"阅读\"\n        }\n    })\n}\nsetResult(d)","searchFind":"js:\nvar d = [];\nvar html = getResCode()\r\nvar list = pdfa(html, '.layui-card-body&&div');//列表\nfor (var j in list) {\n    d.push({\n        title: pdfh(list[j], 'a&&Text'),//标题\n        desc: pdfh(list[j], '.layui-font-purple&&Text'),//第几集或清晰度\n        img: pd(list[j], '.lazy&&data-original')+'@Referer=',//图片\ncontent:pdfh(list[j], '.m-right&&Text'),//简介或影片信息\n        url: pd(list[j], 'a&&href'),\n        extra:{\n            pageTitle: \"阅读\"\n        }\n    });\n}\r\nsetResult(d)","search_url":"https://www.yckceo.com/yuedu/shuyuan/index.html?keys=**&uid=&order1=time&order2=1&ver=&faxian=&sousuo=&tu=&shengyin=","group":"①推荐","detail_col_type":"movie_1","detail_find_rule":"js:\nvar d=[];\nd.push({\n    col_type:\"big_blank_block\"\n});\nvar html=getResCode();\ntry{\nvar header = pdfa(html,\"body&&.layui-card\")\nvar ht = pdfh(header[0],\".content&&Text\").replace(pdfh(header[0],\".content&&p&&Text\"),'')\nvar huser = pdfh(header[0],\".layui-elem-quote&&Text\")\nd.push({\n    title: '““””'+ht.fontcolor('#63bbd0').big(),\n    desc: '““””'+pdfh(header[0],\".content&&p&&Text\").fontcolor('#63bbd0'),\n    url: \"hiker://empty\",\n    col_type: \"text_center_1\",\n    extra: {\n        lineVisible: false,\n    }\n    \n},{\n    title: huser,\n    url: \"hiker://empty\",\n    col_type: \"text_center_1\",\n},{\n    title: pdfh(header[0],\".contents&&Text\"),\n    col_type: \"rich_text\",\n    extra: {\n        textSize: 14\n    }\n},{\n    col_type: \"line_blank\"\n})\nvar value = pdfh(header[1],\"#jsonurl&&value\")\nvar dr = pdfh(header[1],\"a:matches(导入)&&href\")\nd.push({\n    title: \"网络导入\",\n    url: \"hiker://empty\",\n    col_type: \"text_center_1\"\n},{\n    col_type: \"input\",\n    extra:{\n        titleVisible: false,\n        defaultValue: value,\n        type: 'number'\n    }\n},{\n    title: \"下载JSON文件\",\n    url: \"download://\"+value,\n    col_type: \"text_2\"\n},{\n    title: \"3.x一键导入\",\n    url: dr,\n    col_type: \"text_2\"\n},{\n    col_type: \"line_blank\"\n})\nvar pre = pdfh(header[3],\"pre&&Text\")\nif(pre){\nd.push({\n    title: \"复制代码\",\n    url: \"copy://\"+pre,\n    col_type: \"text_center_1\"\n},{\n    col_type: \"input\",\n    extra:{\n        titleVisible: false,\n        defaultValue: pre,\n        type: 'textarea'\n    }\n})\n}\ntry{\nvar tab = pdfh(header[3],\".layui-table&&tbody&&Html\")\nif(tab){\n    d.push({\n        title: tab,\n        col_type: \"rich_text\"\n    })\n}\n}catch(e){}\n}catch(e){\n    var hea = pdfa(html,\"body&&.layui-panel\")\n    d.push({\n        title: '““””'+pdfh(html,\"h3&&Text\").fontcolor('#63bbd0').big(),\n        url: \"hiker://empty\",\n    col_type: \"text_center_1\",\n    extra: {\n        lineVisible: false,\n    }\n    })\n    var val = pdfh(hea[2],\"#jsonurl&&value\")\nvar drs = pdfh(hea[2],\"a:matches(导入)&&href\")\nd.push({\n    title: \"网络导入\",\n    url: \"hiker://empty\",\n    col_type: \"text_center_1\"\n},{\n    col_type: \"input\",\n    extra:{\n        titleVisible: false,\n        defaultValue: val,\n        type: 'number'\n    }\n},{\n    title: \"下载JSON文件\",\n    url: \"download://\"+val,\n    col_type: \"text_2\"\n},{\n    title: \"3.x一键导入\",\n    url: drs,\n    col_type: \"text_2\"\n},{\n    col_type: \"line_blank\"\n})\n}\nsetResult(d)","sdetail_col_type":"movie_1","sdetail_find_rule":"*","ua":"mobile","preRule":"","pages":"[{\"col_type\":\"movie_3\",\"name\":\"lazy\",\"path\":\"lazy\",\"rule\":\"var lazy = $('').lazyRule(() => {\\n    if (input.indexOf('magnet:?xt') == -1) {\\n        try {\\n            var html = JSON.parse(request(input).match(/r player_.*?=(.*?)</)[1])\\n            var url = html.url\\n            if (html.encrypt == '1') {\\n                url = unescape(url);\\n            } else if (html.encrypt == '2') {\\n                url = unescape(base64Decode(url));\\n            }\\n            if (/m3u8|mp4/.test(url)) {\\n                return url\\n            } else {\\n                requireCache('hiker://page/globalParse?rule=道长仓库Pro', 24);\\n                return lazyParse(input);\\n            }\\n        } catch (e) {\\n            log('报错改web嗅探');\\n            //requireCache('hiker://page/globalParse?rule=道长仓库Pro', 24);\\n            //return lazyParse(input);\\n            return \\\"video://\\\" + input\\n        }\\n    } else {\\n        return input\\n    }\\n});\"}]","proxy":"","icon":"https://jfghome.com/static/logo.svg"},{"last_chapter_rule":"","pageList":[{"col_type":"movie_3","name":"作者","path":"author","rule":"js:\nlet arr = []\nlet html = getResCode()\n\nfunction setFont(title, color) {\n    return '<font color=\"'+color+'\">'+title+'</font>';\n}\n\nsetPageTitle(pdfh(html, 'h1&&Text'))\n\narr.push({\n    title: '‘‘’’<big>' + setFont(pdfh(html, 'h1&&Text'), '#E43770') + '</big>',\n    col_type: 'text_center_1'\n}, {\n    title: setFont('▐\\t', '#52C3F2') + pdfh(html, '.title&&Text'),\n    col_type: 'rich_text'\n}, {\n    title: '　　' + pdfh(html, '.intro&&p,0&&Text'),\n    col_type: 'rich_text'\n}, {\n    col_type: 'line_blank'\n})\n\nlet list = pdfa(html, 'ul.list&&li')\nlist.forEach(data => {\n    let status = pdfh(data, 'li&&.layui-btn-radius,1&&Text')\n    let type = pdfh(data, 'li&&.layui-btn-radius&&Text')\n    arr.push({\n        title: pdfh(data, 'img&&alt') + '\\n' + '‘‘’’<small>'+ setFont(type, '#009688') + '\\t\\t' + setFont(status, status == '连载' ? '#1E9FFF' : '#FF5722')+'</small>',\n        desc: pdfh(data, '.intro&&Text'),\n        img: pd(data, 'img&&src'),\n        url: pd(data, 'a&&href') + `#immersiveTheme##autoCache#@rule=js:$.require('hiker://page/detail')`,\n        col_type: 'movie_1_vertical_pic',\n        extra: {\n            desc: pdfh(data, '.intro&&Text')\n        }\n    })\n})\nsetResult(arr)"},{"col_type":"text_1","name":"详情","path":"detail","rule":"js:\nlet arr = [];\nlet html = getResCode()\n\nfunction setLink(title, href) {\n    return '‘‘’’<a href=' + href + '>' + title + '</a>';\n}\n\nfunction setFont(title, color) {\n    return '‘‘’’<font color=' + color + '>' + title + '</front>';\n}\nsetPageTitle(pdfh(html, '.detail&&img&&alt'))\nlet author = pdfh(html, 'p.author&&a&&Text')\nlet a_link = pd(html, 'p.author&&a&&href') + `@rule=js:$.require('hiker://page/author')`\nlet count = pdfh(html, '.layui-bg-red&&Text')\nlet newest = pdfh(html, 'p.new&&a&&Text')\nlet n_link = pd(html, 'p.new&&a&&href') + `#readTheme#@rule=js:$.require('hiker://page/content')`\n\narr.push({\n    title: `${pdfh(html, '.detail&&img&&alt')}\\n作者：${setLink(author,a_link)}\\t\\t${setFont(count,'#FF5722')}`,\n    desc: `最新章节：${setLink(newest, n_link)}\\n${pdfh(html,'.detail&&p:matches(更新)&&Text')}`,\n    url: 'hiker://empty',\n    col_type: 'movie_1_vertical_pic_blur',\n    img: pd(html, '.detail&&img&&src'),\n    extra: {\n        gradient: true\n    }\n});\n\narr.push({\n    title: setFont('小说简介', '#4078C0'),\n    desc: '　　' + MY_PARAMS.desc,\n    url: 'hiker://empty##noHistory#小说简介：<br>　　' + MY_PARAMS.desc + `@rule=js: let arr = [];arr.push({title: MY_URL.split('#')[1],col_type: 'rich_text',extra: {textSize: 18}}); setResult(arr);`,\n    col_type: 'text_1',\n    extra: {\n        lineVisible: false\n    }\n});\n\nlet htmls = request(MY_URL.replace('book', 'read'))\n\nlet pages = pdfa(htmls, '.pagelist&&option');\nlet text = pages.map(data => {\n    return pdfh(data, 'Text')\n})\nlet urls = pages.map(data => {\n    return pd(data, 'option&&value')\n})\n\ntext.forEach((data, i) => {\n    arr.push({\n        title: getMyVar(MY_URL, '0') == i ? setFont(data, '#FF5722') : data,\n        url: $('#noLoading#').lazyRule(i => {\n            putMyVar(MY_URL, i);\n            refreshPage(false);\n            return \"hiker://empty\"\n        }, i),\n        col_type: 'scroll_button',\n    })\n})\n\nlet code = getMyVar(MY_URL, '0') == 0 ? htmls : request(urls[getMyVar(MY_URL)])\n\nlet list = pdfa(code, 'ul.read&&li');\n\nlist.forEach(data => {\n    arr.push({\n        title: pdfh(data, 'a&&Text'),\n        url: pd(data, 'a&&href') + \"#autoPage##readTheme#@rule=js:$.require('hiker://page/content')\",\n        col_type: 'text_1',\n        extra: {\n            cls: 'playlist'\n        }\n    });\n})\nsetResult(arr);"},{"col_type":"movie_3","name":"正文","path":"content","rule":"let arr = [];\nlet des_title = pdfh(getResCode(), '.headline&&h1&&Text');\narr.push({\n    title: '<h3>' + des_title + '</h3>',\n    col_type: 'rich_text'\n});\n\nfunction getText(url) {\n    let html = request(url)\n    let ctnt = pdfa(html, '.content&&p:not(:matches(下一页|爪机书屋))')\n    let text = ctnt.map(it => '　　' + pdfh(it, 'p&&Html')).join(\"<br><br>\")\n    if (/点击下一页继续阅读/.test(html)) {\n        let link = pd(html, '.pager&&a,2&&href')\n        text = text + '<br>' + getText(link)\n    }\n    return text\n}\n\narr.push({\n    title: getText(MY_URL),\n    col_type: \"rich_text\",\n    extra: {\n        textSize: 18,\n        click: true\n    }\n});\nsetResult(arr);"}],"title":"爪机书屋","author":"Sslong","version":0,"type":"read","url":"https://m.zjsw.org/shuku/fyarea_fyclass_0_fyyear_0_fypage.html","col_type":"movie_1_vertical_pic","class_name":"全部&玄幻&奇幻&武侠&都市&历史&军事&悬疑&游戏&科幻&体育&官场&古言&现言&幻言&仙侠&青春&穿越&女生&N次元","class_url":"0&1&2&3&4&5&6&7&8&9&10&11&12&13&14&15&16&17&18&19","area_name":"更新&总点击&月点击&周点击&日点击&总推荐&月推荐&周推荐&日推荐&总收藏&字数&入库","area_url":"lastupdate&allvisit&monthvisit&weekvisit&dayvisit&allvote&monthvote&weekvote&dayvote&goodnum&size&postdate","sort_name":"","year_name":"全部&连载&完本","sort_url":"","year_url":"0&1&2","find_rule":"js:\nlet arr = [];\nlet html = getResCode();\n\nfunction setFont(title, color) {\n    return '‘‘’’<small><font color=' + color + '>' + title + '</front></small>';\n}\n\nlet list = pdfa(html, '.list&&li');\nlist.forEach(data=> {\n    let author = '作者：' + pdfh(data, '.layui-bg-cyan&&Text')\n    let status = pdfh(data, '.layui-btn-danger||.layui-btn-normal&&Text')\n    arr.push({\n        title: pdfh(data, 'img&&alt') + '\\n' + setFont(author, '#2F4056') + '\\t\\t' + setFont(status, status == '连载' ? '#1E9FFF' : '#FF5722'),\n        desc: pdfh(data, '.intro&&Text'),\n        img: pd(data, 'img&&src'),\n        url: pd(data, 'a&&href') + `#immersiveTheme##autoCache#@rule=js:$.require('hiker://page/detail')`,\n        extra: {\n            desc: pdfh(data, '.intro&&Text')\n        }\n    })\n})\nsetResult(arr);","searchFind":"js:\nlet arr = [];\nlet [url, key, page] = MY_URL.split('#');\nlet json = fetch(url, {\n    body: 'searchkey=' + key,\n    method: 'POST',\n    onlyHeaders: true\n})\nlet true_url = page == '1' ? JSON.parse(json).url : JSON.parse(json).url.replace(/[^\\/]+(?=\\.html)/, page);\nlet list = pdfa(request(true_url), '.list&&li');\nlog(list)\nlist.forEach(data => {\n    arr.push({\n        title: pdfh(data, 'img&&alt'),\n        desc: '作者：' + pdfh(data, '.layui-bg-cyan&&Text') + '\\t\\t' + '状态：' + pdfh(data, '.layui-btn-danger||.layui-btn-normal&&Text'),\n        content: pdfh(data, '.intro&&Text'),\n        img: pd(data, 'img&&src'),\n        url: pd(data, 'a&&href') + `#immersiveTheme#@rule=js:$.require('hiker://page/detail')`,\n        extra: {\n            desc: pdfh(data, '.intro&&Text')\n        }\n    })\n})\nsetResult(arr);","search_url":"/search.html#**#fypage","group":"①推荐","detail_col_type":"text_1","detail_find_rule":"","sdetail_col_type":"movie_1","sdetail_find_rule":"*","ua":"mobile","preRule":"","pages":"[{\"col_type\":\"movie_3\",\"name\":\"作者\",\"path\":\"author\",\"rule\":\"js:\\nlet arr = []\\nlet html = getResCode()\\n\\nfunction setFont(title, color) {\\n    return '<font color=\\\"'+color+'\\\">'+title+'</font>';\\n}\\n\\nsetPageTitle(pdfh(html, 'h1&&Text'))\\n\\narr.push({\\n    title: '‘‘’’<big>' + setFont(pdfh(html, 'h1&&Text'), '#E43770') + '</big>',\\n    col_type: 'text_center_1'\\n}, {\\n    title: setFont('▐\\\\t', '#52C3F2') + pdfh(html, '.title&&Text'),\\n    col_type: 'rich_text'\\n}, {\\n    title: '　　' + pdfh(html, '.intro&&p,0&&Text'),\\n    col_type: 'rich_text'\\n}, {\\n    col_type: 'line_blank'\\n})\\n\\nlet list = pdfa(html, 'ul.list&&li')\\nlist.forEach(data => {\\n    let status = pdfh(data, 'li&&.layui-btn-radius,1&&Text')\\n    let type = pdfh(data, 'li&&.layui-btn-radius&&Text')\\n    arr.push({\\n        title: pdfh(data, 'img&&alt') + '\\\\n' + '‘‘’’<small>'+ setFont(type, '#009688') + '\\\\t\\\\t' + setFont(status, status == '连载' ? '#1E9FFF' : '#FF5722')+'</small>',\\n        desc: pdfh(data, '.intro&&Text'),\\n        img: pd(data, 'img&&src'),\\n        url: pd(data, 'a&&href') + `#immersiveTheme##autoCache#@rule=js:$.require('hiker://page/detail')`,\\n        col_type: 'movie_1_vertical_pic',\\n        extra: {\\n            desc: pdfh(data, '.intro&&Text')\\n        }\\n    })\\n})\\nsetResult(arr)\"},{\"col_type\":\"text_1\",\"name\":\"详情\",\"path\":\"detail\",\"rule\":\"js:\\nlet arr = [];\\nlet html = getResCode()\\n\\nfunction setLink(title, href) {\\n    return '‘‘’’<a href=' + href + '>' + title + '</a>';\\n}\\n\\nfunction setFont(title, color) {\\n    return '‘‘’’<font color=' + color + '>' + title + '</front>';\\n}\\nsetPageTitle(pdfh(html, '.detail&&img&&alt'))\\nlet author = pdfh(html, 'p.author&&a&&Text')\\nlet a_link = pd(html, 'p.author&&a&&href') + `@rule=js:$.require('hiker://page/author')`\\nlet count = pdfh(html, '.layui-bg-red&&Text')\\nlet newest = pdfh(html, 'p.new&&a&&Text')\\nlet n_link = pd(html, 'p.new&&a&&href') + `#readTheme#@rule=js:$.require('hiker://page/content')`\\n\\narr.push({\\n    title: `${pdfh(html, '.detail&&img&&alt')}\\\\n作者：${setLink(author,a_link)}\\\\t\\\\t${setFont(count,'#FF5722')}`,\\n    desc: `最新章节：${setLink(newest, n_link)}\\\\n${pdfh(html,'.detail&&p:matches(更新)&&Text')}`,\\n    url: 'hiker://empty',\\n    col_type: 'movie_1_vertical_pic_blur',\\n    img: pd(html, '.detail&&img&&src'),\\n    extra: {\\n        gradient: true\\n    }\\n});\\n\\narr.push({\\n    title: setFont('小说简介', '#4078C0'),\\n    desc: '　　' + MY_PARAMS.desc,\\n    url: 'hiker://empty##noHistory#小说简介：<br>　　' + MY_PARAMS.desc + `@rule=js: let arr = [];arr.push({title: MY_URL.split('#')[1],col_type: 'rich_text',extra: {textSize: 18}}); setResult(arr);`,\\n    col_type: 'text_1',\\n    extra: {\\n        lineVisible: false\\n    }\\n});\\n\\nlet htmls = request(MY_URL.replace('book', 'read'))\\n\\nlet pages = pdfa(htmls, '.pagelist&&option');\\nlet text = pages.map(data => {\\n    return pdfh(data, 'Text')\\n})\\nlet urls = pages.map(data => {\\n    return pd(data, 'option&&value')\\n})\\n\\ntext.forEach((data, i) => {\\n    arr.push({\\n        title: getMyVar(MY_URL, '0') == i ? setFont(data, '#FF5722') : data,\\n        url: $('#noLoading#').lazyRule(i => {\\n            putMyVar(MY_URL, i);\\n            refreshPage(false);\\n            return \\\"hiker://empty\\\"\\n        }, i),\\n        col_type: 'scroll_button',\\n    })\\n})\\n\\nlet code = getMyVar(MY_URL, '0') == 0 ? htmls : request(urls[getMyVar(MY_URL)])\\n\\nlet list = pdfa(code, 'ul.read&&li');\\n\\nlist.forEach(data => {\\n    arr.push({\\n        title: pdfh(data, 'a&&Text'),\\n        url: pd(data, 'a&&href') + \\\"#autoPage##readTheme#@rule=js:$.require('hiker://page/content')\\\",\\n        col_type: 'text_1',\\n        extra: {\\n            cls: 'playlist'\\n        }\\n    });\\n})\\nsetResult(arr);\"},{\"col_type\":\"movie_3\",\"name\":\"正文\",\"path\":\"content\",\"rule\":\"let arr = [];\\nlet des_title = pdfh(getResCode(), '.headline&&h1&&Text');\\narr.push({\\n    title: '<h3>' + des_title + '</h3>',\\n    col_type: 'rich_text'\\n});\\n\\nfunction getText(url) {\\n    let html = request(url)\\n    let ctnt = pdfa(html, '.content&&p:not(:matches(下一页|爪机书屋))')\\n    let text = ctnt.map(it => '　　' + pdfh(it, 'p&&Html')).join(\\\"<br><br>\\\")\\n    if (/点击下一页继续阅读/.test(html)) {\\n        let link = pd(html, '.pager&&a,2&&href')\\n        text = text + '<br>' + getText(link)\\n    }\\n    return text\\n}\\n\\narr.push({\\n    title: getText(MY_URL),\\n    col_type: \\\"rich_text\\\",\\n    extra: {\\n        textSize: 18,\\n        click: true\\n    }\\n});\\nsetResult(arr);\"}]","proxy":"","icon":"https://hikerfans.com/tubiao/messy/65.svg"},{"last_chapter_rule":"","pageList":[{"col_type":"movie_3","name":"函数","path":"hanshu","rule":"js:\n\neval(getCryptoJS())\nconst key = CryptoJS.enc.Utf8.parse(\"4395daa50ad6baf7\");\nconst iv = CryptoJS.enc.Utf8.parse(\"0123456789abcdef\");\nfunction Decrypt(word) {\n    let decrypt = CryptoJS.AES.decrypt(word, key, {\n        iv: iv,\n        mode: CryptoJS.mode.CBC,\n        padding: CryptoJS.pad.Pkcs7,\n    });\n    let decryptedStr = decrypt.toString(CryptoJS.enc.Utf8);\n    return decryptedStr.toString();\n}"},{"col_type":"movie_3","name":"正文","path":"lazy","rule":"js:\nvar d = [];\nvar html = JSON.parse(request(MY_PARAMS.url)).content; //log(html) \nd.push({\n    title: '<big><strong>'+MY_PARAMS.title+'</strong></big><br>',\n    col_type: 'rich_text'\n}); //正文标题\nd.push({\n    title: '\\t\\t\\t\\t'+html.replace(/\\n\\n/mg,'<br>\\t\\t\\t\\t'),\n    col_type: \"rich_text\",\n    extra: {\n        textSize: 18,\n        click: true\n    }\n}); //正文内容\nsetResult(d)"}],"title":"丁丁小说APP","author":"zhao","version":1,"type":"read","url":"hiker://empty##fypage","col_type":"movie_3","class_name":"","class_url":"","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:\neval(JSON.parse(request('hiker://page/hanshu')).rule)\nvar d = [];\nvar getRangeColors = function() {\n    return ('00000' + (Math.random() * 0x1000000 << 0).toString(16)).substr(-6);\n}\nif (MY_PAGE == 1) {\n    let nav = [\"分类\", \"排行榜\"];\n    for (let i = 0; i < nav.length; i++) {\n        let mytitle = nav[i];\n        d.push({\n            title: getMyVar('navtitle', \"分类\") == mytitle ? '““””<b><font color=#9F5F9F>' + mytitle + '</font></b>' : mytitle,\n            url: $('#noLoading##noHistory#')\n                .lazyRule((mytitle) => {\n                    putMyVar(\"navtitle\", mytitle);\n                    refreshPage();\n                    return 'hiker://empty'\n                }, mytitle),\n            col_type: \"text_2\"\n        });\n    }\n}\nif (getMyVar('navtitle', \"分类\") == \"分类\") {\n    if (MY_PAGE == 1) {\n        let nav2 = [\"男生频道\", \"女生频道\"];\n        for (let i = 0; i < nav2.length; i++) {\n            let mytitle = nav2[i];\n            d.push({\n                title: getMyVar('navtitle2', \"男生频道\") == mytitle ? '““””<b><font color=#9F5F9F>' + mytitle + '</font></b>' : mytitle,\n                url: $('#noLoading##noHistory#')\n                    .lazyRule((mytitle) => {\n                        putMyVar(\"navtitle2\", mytitle);\n                        refreshPage();\n                        return 'hiker://empty'\n                    }, mytitle),\n                col_type: \"text_2\"\n            });\n        }\n    }\n    if (getMyVar('navtitle2', \"男生频道\") == \"男生频道\") {\n        var he = [\"玄幻\", \"都市\", \"武侠\", \"仙侠\", \"军事\", \"历史\", \"游戏\", \"科幻\", \"轻小说\"]\n        var subs = [\"lejRej\", \"mbk5ez\", \"nel5aK\", \"vbmOeY\", \"penRe7\", \"xbojag\", \"mep2bM\", \"zbq2dp\", \"YerEdO\"]\n        if (MY_PAGE == '1') {\n            he.forEach((x, i) => {\n                var ctitle = x\n                var sub = subs[i]\n                d.push({\n                    title: getMyVar('ctitle', \"玄幻\") == ctitle ? '““””' + ctitle.fontcolor('#' + getRangeColors()) : ctitle,\n                    url: $('#noLoading##noHistory#').lazyRule((ctitle, sub) => {\n                        putMyVar(\"ctitle\", ctitle);\n                        putMyVar(\"sub\", sub);\n                        refreshPage();\n                        return 'hiker://empty'\n                    }, ctitle, sub),\n                    col_type: \"scroll_button\"\n                })\n            })\n        }\n        var sub = getMyVar(\"sub\", subs[0])\n        var html = fetch('http://api.yuanxifayi.com/novel?sort=1&page=' + MY_PAGE + '&categoryId=' + sub, {\n            headers: {\n                'client-device': '55e0f601cff5b1ca2e59688c42013693',\n                'client-brand': 'Redmi',\n                'client-version': '1.1.0',\n                'client-channel': 'android',\n                'client-name': 'app.maoyankanshu.novel',\n                'alias-name': 'dingdianapp',\n                'client-source': 'android',\n                'Authorization': 'bearereyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwOlwvXC9hcGkueGluZ2xpYW5nZ2xvYmFsLmNvbVwvYXV0aFwvdGhpcmQiLCJpYXQiOjE3MjU1Mjk4ODYsImV4cCI6MTgxODg0MTg4NiwibmJmIjoxNzI1NTI5ODg2LCJqdGkiOiJPYjBQbkNzQXRuWEs1c2JtIiwic3ViIjo0ODc4MjAsInBydiI6ImExY2IwMzcxODAyOTZjNmExOTM4ZWYzMGI0Mzc5NDY3MmRkMDE2YzUifQ.SJHatqTVR6oQXqjRck_80LTA2-WM0RPE_gwHsYDQY5I',\n                'Host': 'api.yuanxifayi.com',\n                'Connection': 'Keep-Alive',\n                //'Accept-Encoding': 'gzip',\n                'User-Agent': 'okhttp/4.9.2'\n            },\n            method: 'GET'\n        }); //log(html)\n        var list = JSON.parse(html).data;\n        list.forEach(item => {\n            d.push({\n                title: item.novelName + '\\n' + item.authorName + '  ' + item.wordNum + '   ' + item.averageScore + '分',\n                desc: item.summary,\n                pic_url: item.cover,\n                url: 'hiker://empty##http://api.xingliangglobal.com/novel/' + item.novelId + '/chapters',\n                col_type: 'movie_1_vertical_pic',\n                extra: {\n                    title: item.novelName + '\\n' + item.authorName + '  ' + item.wordNum + '   ' + item.averageScore + '分',\n                    desc: item.summary,\n                    pic_url: item.cover,\n                    url: item.novelId\n                }\n            })\n        })\n    } else if (getMyVar(\"navtitle2\") == \"女生频道\") {\n        var he2 = [\"现代言情\", \"古代言情\", \"幻想言情\", \"青春校园\", \"唯美纯爱\", \"同人衍生\"]\n        var subs2 = [\"9avmeG\", \"DdwRb1\", \"7ax9by\", \"Pdy7aQ\", \"kazYeJ\", \"9aAOdv\"]\n        if (MY_PAGE == '1') {\n            he2.forEach((x, i) => {\n                var ctitle2 = x\n                var sub2 = subs2[i]\n                d.push({\n                    title: getMyVar('ctitle2', \"现代言情\") == ctitle2 ? '““””' + ctitle2.fontcolor('#' + getRangeColors()) : ctitle2,\n                    url: $('#noLoading##noHistory#').lazyRule((ctitle2, sub2) => {\n                        putMyVar(\"ctitle2\", ctitle2);\n                        putMyVar(\"sub2\", sub2);\n                        refreshPage();\n                        return 'hiker://empty'\n                    }, ctitle2, sub2),\n                    col_type: \"scroll_button\"\n                })\n            })\n        }\n        var sub2 = getMyVar(\"sub2\", subs2[0])\n        var html = fetch('http://api.yuanxifayi.com/novel?sort=1&page=' + MY_PAGE + '&categoryId=' + sub2, {\n            headers: {\n                'client-device': '55e0f601cff5b1ca2e59688c42013693',\n                'client-brand': 'Redmi',\n                'client-version': '1.1.0',\n                'client-channel': 'android',\n                'client-name': 'app.maoyankanshu.novel',\n                'alias-name': 'dingdianapp',\n                'client-source': 'android',\n                'Authorization': 'bearereyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwOlwvXC9hcGkueGluZ2xpYW5nZ2xvYmFsLmNvbVwvYXV0aFwvdGhpcmQiLCJpYXQiOjE3MjU1Mjk4ODYsImV4cCI6MTgxODg0MTg4NiwibmJmIjoxNzI1NTI5ODg2LCJqdGkiOiJPYjBQbkNzQXRuWEs1c2JtIiwic3ViIjo0ODc4MjAsInBydiI6ImExY2IwMzcxODAyOTZjNmExOTM4ZWYzMGI0Mzc5NDY3MmRkMDE2YzUifQ.SJHatqTVR6oQXqjRck_80LTA2-WM0RPE_gwHsYDQY5I',\n                'Host': 'api.yuanxifayi.com',\n                'Connection': 'Keep-Alive',\n                //'Accept-Encoding': 'gzip',\n                'User-Agent': 'okhttp/4.9.2'\n            },\n            method: 'GET'\n        }); //log(html)\n        var list = JSON.parse(html).data;\n        list.forEach(item => {\n            d.push({\n                title: item.novelName + '\\n' + item.authorName + '  ' + item.wordNum + '   ' + item.averageScore + '分',\n                desc: item.summary,\n                pic_url: item.cover,\n                url: 'hiker://empty##http://api.xingliangglobal.com/novel/' + item.novelId + '/chapters',\n                col_type: 'movie_1_vertical_pic',\n                extra: {\n                    title: item.novelName + '\\n' + item.authorName + '  ' + item.wordNum + '   ' + item.averageScore + '分',\n                    desc: item.summary,\n                    pic_url: item.cover,\n                    url: item.novelId\n                }\n            })\n        })\n    }\n} else if (getMyVar(\"navtitle\") == \"排行榜\") {\n    if (MY_PAGE == 1) {\n        let nav3 = [\"男生频道\", \"女生频道\"];\n        for (let i = 0; i < nav3.length; i++) {\n            let mytitle = nav3[i];\n            d.push({\n                title: getMyVar('navtitle3', \"男生频道\") == mytitle ? '““””<b><font color=#9F5F9F>' + mytitle + '</font></b>' : mytitle,\n                url: $('#noLoading##noHistory#')\n                    .lazyRule((mytitle) => {\n                        putMyVar(\"navtitle3\", mytitle);\n                        refreshPage();\n                        return 'hiker://empty'\n                    }, mytitle),\n                col_type: \"text_2\"\n            });\n        }\n    }\n    if (getMyVar('navtitle3', \"男生频道\") == \"男生频道\") {\n        var he3 = [\"必读榜\", \"潜力榜\", \"完本榜\", \"更新榜\", \"搜索榜\", \"评论榜\"]\n        var subs3 = [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\"]\n        if (MY_PAGE == '1') {\n            he3.forEach((x, i) => {\n                var ctitle3 = x\n                var sub3 = subs3[i]\n                d.push({\n                    title: getMyVar('ctitle3', \"必读榜\") == ctitle3 ? '““””' + ctitle3.fontcolor('#' + getRangeColors()) : ctitle3,\n                    url: $('#noLoading##noHistory#').lazyRule((ctitle3, sub3) => {\n                        putMyVar(\"ctitle3\", ctitle3);\n                        putMyVar(\"sub3\", sub3);\n                        refreshPage();\n                        return 'hiker://empty'\n                    }, ctitle3, sub3),\n                    col_type: \"scroll_button\"\n                })\n            })\n        }\n        var sub3 = getMyVar(\"sub3\", subs3[0])\n        var html = fetch('http://api.xingliangglobal.com/module/rank?type=' + sub3 + '&channel=1&page=' + MY_PAGE, {\n            headers: {\n                'client-device': '55e0f601cff5b1ca2e59688c42013693',\n                'client-brand': 'Redmi',\n                'client-version': '1.1.0',\n                'client-channel': 'android',\n                'client-name': 'app.maoyankanshu.novel',\n                'alias-name': 'dingdianapp',\n                'client-source': 'android',\n                'Authorization': 'bearereyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwOlwvXC9hcGkueGluZ2xpYW5nZ2xvYmFsLmNvbVwvYXV0aFwvdGhpcmQiLCJpYXQiOjE3MjU1Mjk4ODYsImV4cCI6MTgxODg0MTg4NiwibmJmIjoxNzI1NTI5ODg2LCJqdGkiOiJPYjBQbkNzQXRuWEs1c2JtIiwic3ViIjo0ODc4MjAsInBydiI6ImExY2IwMzcxODAyOTZjNmExOTM4ZWYzMGI0Mzc5NDY3MmRkMDE2YzUifQ.SJHatqTVR6oQXqjRck_80LTA2-WM0RPE_gwHsYDQY5I',\n                'Host': 'api.yuanxifayi.com',\n                'Connection': 'Keep-Alive',\n                //'Accept-Encoding': 'gzip',\n                'User-Agent': 'okhttp/4.9.2'\n            },\n            method: 'GET'\n        }); //log(html)\n        var list = JSON.parse(html).data;\n        list.forEach(item => {\n            d.push({\n                title: item.novelName + '\\n' + item.authorName + '  ' + item.rankInfo,\n                desc: item.createdAt,\n                pic_url: item.cover,\n                url: 'hiker://empty##http://api.xingliangglobal.com/novel/' + item.novelId + '/chapters',\n                col_type: 'movie_1_vertical_pic',\n                extra: {\n                    title: item.novelName + '\\n' + item.authorName + '  ' + item.rankInfo,\n                    desc: item.createdAt,\n                    pic_url: item.cover,\n                    url: item.novelId\n                }\n            })\n        })\n    } else if (getMyVar(\"navtitle3\") == \"女生频道\") {\n        var he3 = [\"必读榜\", \"潜力榜\", \"完本榜\", \"更新榜\", \"搜索榜\", \"评论榜\"]\n        var subs3 = [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\"]\n        if (MY_PAGE == '1') {\n            he3.forEach((x, i) => {\n                var ctitle3 = x\n                var sub3 = subs3[i]\n                d.push({\n                    title: getMyVar('ctitle3', \"必读榜\") == ctitle3 ? '““””' + ctitle3.fontcolor('#' + getRangeColors()) : ctitle3,\n                    url: $('#noLoading##noHistory#').lazyRule((ctitle3, sub3) => {\n                        putMyVar(\"ctitle3\", ctitle3);\n                        putMyVar(\"sub3\", sub3);\n                        refreshPage();\n                        return 'hiker://empty'\n                    }, ctitle3, sub3),\n                    col_type: \"scroll_button\"\n                })\n            })\n        }\n        var sub3 = getMyVar(\"sub3\", subs3[0])\n        var html = fetch('http://api.xingliangglobal.com/module/rank?type=' + sub3 + '&channel=2&page=' + MY_PAGE, {\n            headers: {\n                'client-device': '55e0f601cff5b1ca2e59688c42013693',\n                'client-brand': 'Redmi',\n                'client-version': '1.1.0',\n                'client-channel': 'android',\n                'client-name': 'app.maoyankanshu.novel',\n                'alias-name': 'dingdianapp',\n                'client-source': 'android',\n                'Authorization': 'bearereyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwOlwvXC9hcGkueGluZ2xpYW5nZ2xvYmFsLmNvbVwvYXV0aFwvdGhpcmQiLCJpYXQiOjE3MjU1Mjk4ODYsImV4cCI6MTgxODg0MTg4NiwibmJmIjoxNzI1NTI5ODg2LCJqdGkiOiJPYjBQbkNzQXRuWEs1c2JtIiwic3ViIjo0ODc4MjAsInBydiI6ImExY2IwMzcxODAyOTZjNmExOTM4ZWYzMGI0Mzc5NDY3MmRkMDE2YzUifQ.SJHatqTVR6oQXqjRck_80LTA2-WM0RPE_gwHsYDQY5I',\n                'Host': 'api.yuanxifayi.com',\n                'Connection': 'Keep-Alive',\n                //'Accept-Encoding': 'gzip',\n                'User-Agent': 'okhttp/4.9.2'\n            },\n            method: 'GET'\n        }); //log(html)\n        var list = JSON.parse(html).data;\n        list.forEach(item => {\n            d.push({\n                title: item.novelName + '\\n' + item.authorName + '  ' + item.rankInfo,\n                desc: item.createdAt,\n                pic_url: item.cover,\n                url: 'hiker://empty##http://api.xingliangglobal.com/novel/' + item.novelId + '/chapters',\n                col_type: 'movie_1_vertical_pic',\n                extra: {\n                    title: item.novelName + '\\n' + item.authorName + '  ' + item.rankInfo,\n                    desc: item.createdAt,\n                    pic_url: item.cover,\n                    url: item.novelId\n                }\n            })\n        })\n    }\n}\nsetResult(d)","searchFind":"js:\nvar d = [];\nvar html = fetch('http://api.xingliangglobal.com/search?keyword='+MY_KEYWORD+'&page='+MY_PAGE,{\n    headers: {\n    'client-device': '55e0f601cff5b1ca2e59688c42013693',\n    'client-brand': 'Redmi',\n    'client-version': '1.1.0',\n    'client-channel': 'android',\n    'client-name': 'app.maoyankanshu.novel',\n    'alias-name': 'dingdianapp',\n    'client-source': 'android',\n    'Authorization': 'bearereyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwOlwvXC9hcGkueGluZ2xpYW5nZ2xvYmFsLmNvbVwvYXV0aFwvdGhpcmQiLCJpYXQiOjE3MjU1Mjk4ODYsImV4cCI6MTgxODg0MTg4NiwibmJmIjoxNzI1NTI5ODg2LCJqdGkiOiJPYjBQbkNzQXRuWEs1c2JtIiwic3ViIjo0ODc4MjAsInBydiI6ImExY2IwMzcxODAyOTZjNmExOTM4ZWYzMGI0Mzc5NDY3MmRkMDE2YzUifQ.SJHatqTVR6oQXqjRck_80LTA2-WM0RPE_gwHsYDQY5I',\n    'Host': 'api.yuanxifayi.com',\n    'Connection': 'Keep-Alive',\n    //'Accept-Encoding': 'gzip',\n    'User-Agent': 'okhttp/4.9.2'\n  },\n    method: 'GET'\n}); //log(html)\nvar list = JSON.parse(html).data;\nlist.forEach(item => {\n    d.push({\n        title: item.novelName,\n        desc: item.authorName+'  '+item.wordNum+'   '+item.averageScore+'分',\n        content: item.summary,\n        pic_url: item.cover,\n        url: 'hiker://empty##http://api.xingliangglobal.com/novel/'+item.novelId+'/chapters',\n        col_type: 'movie_1_vertical_pic',\n        extra: {\n            title: item.novelName+'\\n'+item.authorName+'  '+item.wordNum+'   '+item.averageScore+'分',\n            desc: item.summary,\n            pic_url: item.cover,\n            url: item.novelId\n        }\n    })\n})\n\nsetResult(d)","search_url":"hiker://empty##**##fypage","group":"①推荐","detail_col_type":"movie_1","detail_find_rule":"js:\neval(JSON.parse(request('hiker://page/hanshu')).rule)\nvar d = [];\nvar MY_URL = MY_URL.split('##')[1];\nd.push({\n    title: MY_PARAMS.title,\n    desc: MY_PARAMS.desc,\n    pic_url: MY_PARAMS.pic_url,\n    url: 'hiker://empty',\n    col_type: 'movie_1_vertical_pic'\n})\nvar html = fetch(MY_URL,{\n    headers: {\n    'client-device': '55e0f601cff5b1ca2e59688c42013693',\n    'client-brand': 'Redmi',\n    'client-version': '1.1.0',\n    'client-channel': 'android',\n    'client-name': 'app.maoyankanshu.novel',\n    'alias-name': 'dingdianapp',\n    'client-source': 'android',\n    'Authorization': 'bearereyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwOlwvXC9hcGkueGluZ2xpYW5nZ2xvYmFsLmNvbVwvYXV0aFwvdGhpcmQiLCJpYXQiOjE3MjU1Mjk4ODYsImV4cCI6MTgxODg0MTg4NiwibmJmIjoxNzI1NTI5ODg2LCJqdGkiOiJPYjBQbkNzQXRuWEs1c2JtIiwic3ViIjo0ODc4MjAsInBydiI6ImExY2IwMzcxODAyOTZjNmExOTM4ZWYzMGI0Mzc5NDY3MmRkMDE2YzUifQ.SJHatqTVR6oQXqjRck_80LTA2-WM0RPE_gwHsYDQY5I',\n    'Host': 'api.yuanxifayi.com',\n    'Connection': 'Keep-Alive',\n    //'Accept-Encoding': 'gzip',\n    'User-Agent': 'okhttp/4.9.2'\n  },\n    method: 'GET'\n}); //log(html)\nvar list = JSON.parse(html).data.list;\nlist.forEach(item => {\n    d.push({\n        title: '‘‘’’<small><small>'+item.chapterName+'</small></small>',\n        url: Decrypt(item.path) + \"#autoPage##readTheme#@rule=js:$.require('hiker://page/lazy')\",\n        col_type: 'text_2',\n        extra: {\n            title: item.chapterName,\n            url: Decrypt(item.path)\n        }\n    })\n})\n\nsetResult(d)","sdetail_col_type":"movie_1","sdetail_find_rule":"*","ua":"mobile","preRule":"","pages":"[{\"col_type\":\"movie_3\",\"name\":\"函数\",\"path\":\"hanshu\",\"rule\":\"js:\\n\\neval(getCryptoJS())\\nconst key = CryptoJS.enc.Utf8.parse(\\\"4395daa50ad6baf7\\\");\\nconst iv = CryptoJS.enc.Utf8.parse(\\\"0123456789abcdef\\\");\\nfunction Decrypt(word) {\\n    let decrypt = CryptoJS.AES.decrypt(word, key, {\\n        iv: iv,\\n        mode: CryptoJS.mode.CBC,\\n        padding: CryptoJS.pad.Pkcs7,\\n    });\\n    let decryptedStr = decrypt.toString(CryptoJS.enc.Utf8);\\n    return decryptedStr.toString();\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"正文\",\"path\":\"lazy\",\"rule\":\"js:\\nvar d = [];\\nvar html = JSON.parse(request(MY_PARAMS.url)).content; //log(html) \\nd.push({\\n    title: '<big><strong>'+MY_PARAMS.title+'</strong></big><br>',\\n    col_type: 'rich_text'\\n}); //正文标题\\nd.push({\\n    title: '\\\\t\\\\t\\\\t\\\\t'+html.replace(/\\\\n\\\\n/mg,'<br>\\\\t\\\\t\\\\t\\\\t'),\\n    col_type: \\\"rich_text\\\",\\n    extra: {\\n        textSize: 18,\\n        click: true\\n    }\\n}); //正文内容\\nsetResult(d)\"}]","proxy":"","icon":""},{"last_chapter_rule":"","pageList":[],"title":"meflc软件","author":"小🔥星","version":7,"type":"tool","url":"https://www.mefcl.com/category/fyAll/page/fypage","col_type":"movie_1_vertical_pic","class_name":"电脑软件&安卓软件&影音娱乐&装机必备&系统设置&","class_url":"pcsoft&android&happy&pcsoft/must&pcsoft/ostools&","area_name":"图像影音&影音播放&办公软件&格式转换&Win11&Win10&Win7&Windows-xp&Windows-PE","area_url":"pcsoft/image&pcsoft/player&pcsoft/office&pcsoft/conversion&pcsoft/os/windows-11&pcsoft/os/windows-10&pcsoft/os/windows-7&pcsoft/os/windows-xp&pcsoft/os/windowspe","sort_name":"其他软件&诚意推荐&游戏休闲&影视分享&音乐分享","year_name":"社交沟通&行业软件&上传下载&网页浏览&安装制作&工具软件&","sort_url":"pcsoft/other&pcsoft/goodsoft&happy/game&happy/movies&happy/music","year_url":"pcsoft/soul&pcsoft/industry&pcsoft/upordown&pcsoft/browsewebs&pcsoft/setup&pcsoft/tools&","find_rule":"body&&.excerpt;img&&alt;img&&data-src;;a&&href.js:\"x5://\"+input","searchFind":"body&&.excerpt;img&&alt;a&&href.js:\"x5://\"+input;.note&&Text;;img&&data-src.js:input+ \"@Referer=\"","search_url":"https://www.mefcl.com/page/fypage?s=**","group":"①推荐","detail_col_type":"movie_1","detail_find_rule":"","sdetail_col_type":"movie_1","sdetail_find_rule":"*","ua":"mobile","preRule":"","pages":"[]","proxy":"","icon":"https://www.mefcl.com/wp-content/uploads/2021/03/logo120x30-1.png"}]