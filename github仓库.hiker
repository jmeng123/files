{"last_chapter_rule":"","pageList":[],"title":"github仓库","author":"@LoyDgIk","version":1,"type":"other","url":"hiker://empty##","col_type":"text_2","class_name":"","class_url":"","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:\nlet list = JSON.parse(fetch(\"https://api.github.com/repos/jmeng123/files/contents\"));\nlist = list.filter(v => (v.name.endsWith(\".hiker\") || v.name.endsWith(\".json\") || v.name.endsWith(\".html\")) && v.type === \"file\");\nlet d = [];\nfor (let it of list) {\n    d.push({\n        title: it.name,\n        col_type: \"text_2\",\n        url: $([\"删除\", \"复制分享链接\", \"导入规则\", \"导入文件\"]).select((url, sha, name) => {\n            if (input === \"复制分享链接\") {\n                return \"copy://海阔视界规则【\" + name + \"】￥home_rule_url￥\" + 'https://github.jevons.vip/' + url;\n            } else if (input === \"导入规则\") {\n                return \"rule://\" + base64Encode(\"￥home_rule_url￥\" + 'https://github.jevons.vip/' + url);\n            } else if (input === \"导入文件\") {\n                var file = getPath('hiker://files/Jm/file/' + name);\n                var html = fetch('https://github.jevons.vip/' + url);\n                writeFile(file,html);\n                return 'toast://已导入' + name\n            } else {\n                return $(\"确认从仓库删除该分享:\" + name).confirm((name, sha) => {\n                    let user = storage0.getItem(\"user\", \"\");\n                    showLoading(\"正在删除\");\n                    try {\n                        let res = JSON.parse(fetch(\"https://api.github.com/repos/\" + user.repo + \"/contents/\" + name, {\n                            headers: {\n                                Accept: \"application/vnd.github.v3+json\",\n                                Authorization: \"token \" + user.token\n                            },\n                            body: {\n                                sha: sha,\n                                message: \"删除规则\"\n                            },\n                            method: \"DELETE\",\n                            withStatusCode: true\n                        }));\n                        if (res.statusCode === 200) {\n                            java.lang.Thread.sleep(1650);\n                            refreshPage(false);\n                            hideLoading();\n                            return \"toast://删除成功,服务器删除会有一定延迟\";\n                        } else {\n                            res = JSON.parse(res.body);\n                            throw new Error(res.message);\n                        }\n                    } catch (e) {\n                        hideLoading();\n                        return \"toast://删除失败:\" + e.toString();\n                    }\n                }, name, sha);\n            }\n        }, it.download_url, it.sha, it.name)\n    });\n}\nsetResult(d);","searchFind":"","search_url":"","group":"⑩模板工具","detail_col_type":"movie_1","detail_find_rule":"","sdetail_col_type":"movie_1","sdetail_find_rule":"","ua":"mobile","preRule":"","pages":"[]","proxy":"","icon":"https://gh-proxy.com/https://raw.githubusercontent.com/ls125781003/lmtubiao/main/messy/13.svg"}